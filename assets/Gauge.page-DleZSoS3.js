import{_ as E,a as H}from"./TabItem.vue_vue_type_script_setup_true_lang-WiI9wihv.js";import{d as T,g as N,T as M,U,f as C,V as K,h as f,o,_ as S,u as s,w as i,a as d,b as r,L as G,W as w,c as _,t as k,i as $,e as A,F,j,Q as D,l as q,r as z,O as J,a5 as X,a6 as Y,N as Z,R as x,a3 as B}from"./index-D9HG0aMx.js";import{b as ee,c as ae,d as se,e as te}from"./gauge-LlysuvL8.js";import{_ as W}from"./AsyncValue-DFPjSn8i.js";import{_ as oe}from"./TokenIcon-FdPx6qGk.js";import{_ as ne}from"./KPI-lh-O-EX8.js";import{u as re,c as le,a as ue,_ as ie,b as de}from"./UseLightweightChart-Dg18GyEC.js";import{r as ge}from"./Number-Ddcsuny1.js";import{_ as R,a as ce}from"./Table-B4hAO1Bw.js";import{_ as _e}from"./InputText-BX-PqYS8.js";import{u as pe,_ as me}from"./UsePagination-BNnpjFMQ.js";import{u as he}from"./UseSort-BZUUkiZy.js";import{a as fe}from"./index-M9l7MIn3.js";import{u as ve}from"./UseTabNavigation-BHsy7CRJ.js";import"./timestamp-CoE2HNXc.js";import"./useQuery-D63AZpyD.js";import"./Object-DOSYkgA0.js";const ke={style:{display:"flex"}},be={ref:"chartRef",class:"chart"},ye=T({__name:"ChartWeightHistory",props:{gaugeAddress:{}},setup(b){const{isFetching:h,data:n}=ee(N(()=>b.gaugeAddress)),c=M(),e=U("card"),{chart:a,series:g}=re({createChartOptions:ue(),series:le({name:"weight",color:C(()=>c.value.colors.blue),formatter:p=>ge(p,1)})});K(l);function l(){if(!a.value||!g.weight)return;const p=n.value.map(m=>({time:m.epoch,value:Number(m.weight)/10**18})).uniqWith((m,v)=>m.time===v.time).orderBy(m=>m.time,"asc");p.length>0&&g.weight.setData(p),a.value.timeScale().fitContent()}return(p,m)=>{const v=ie,t=de,u=S;return o(),f(u,{ref_key:"card",ref:e,title:"Weight",loading:s(h)},{actions:i(()=>[d("div",ke,[r(v,{filename:"weight",series:s(g)},null,8,["series"]),r(t,{chart:s(a),target:s(e)},null,8,["chart","target"])])]),default:i(()=>[d("div",be,null,512)]),_:1},8,["loading"])}}}),$e=["href"],we=["href"],Te=["innerHTML"],Ce=T({__name:"TableDeployment",props:{gaugeAddress:{}},setup(b){const{isFetching:h,data:n}=ae(N(()=>b.gaugeAddress)),c=C(()=>{var e;return(e=n.value)!=null&&e.calldataDecoded?n.value.calldataDecoded.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,a=>/[A-F]/g.test(a)&&G(a)?`<a target='_blank' href='https://etherscan.io/address/${a}'>${a}</a>`:a):null});return(e,a)=>{const g=ce,l=R,p=S;return o(),f(p,{title:"Deployment",loading:s(h)},{default:i(()=>[s(n)?(o(),f(l,{key:0},{default:i(()=>[r(g,null,{default:i(()=>[a[2]||(a[2]=d("div",null,"Date",-1)),d("div",null,k(s(n).timestamp.toLocaleDateString()),1)]),_:1,__:[2]}),r(g,null,{default:i(()=>[a[3]||(a[3]=d("div",null,"From",-1)),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${s(n).addressFrom}`,onClick:a[0]||(a[0]=$(()=>{},["stop"]))},k(s(n).addressFrom),9,$e)])]),_:1,__:[3]}),s(n).addressTo?(o(),f(g,{key:0},{default:i(()=>[a[4]||(a[4]=d("div",null,"To",-1)),d("div",null,[d("a",{class:"font-mono trim",target:"_blank",href:`https://etherscan.io/address/${s(n).addressTo}`,onClick:a[1]||(a[1]=$(()=>{},["stop"]))},k(s(n).addressTo),9,we)])]),_:1,__:[4]})):w("",!0)]),_:1})):w("",!0),s(c)?(o(),_("div",{key:1,class:"calldata font-mono",innerHTML:s(c)},null,8,Te)):w("",!0)]),_:1},8,["loading"])}}}),Ae=A(Ce,[["__scopeId","data-v-2856e0e1"]]),Se={class:"dashboard-grid"},Ve=["href"],Le={key:1},De=["href"],Ne={key:1},Pe={key:2},Fe=["href"],Be={key:1},Ie={key:0,class:"tokens"},Ge={key:1},We=["href"],Re=T({__name:"GaugeOverview",props:{gauge:{}},setup(b){const h=C(()=>{var e;return(e=b.gauge)==null?void 0:e.address});function n(e){return G(e,{strict:!1})?D(e):e.replace("Curve.fi","").replace("Gauge Deposit","").trim()}function c(e){switch(e){case"arbitrum":return"arbiscan.io";case"ethereum":return"etherscan.io";default:return"etherscan.io"}}return(e,a)=>{var v;const g=S,l=ne,p=oe,m=W;return o(),_(F,null,[(v=e.gauge)!=null&&v.killed?(o(),f(g,{key:0,class:"killed border-flash"},{default:i(()=>a[4]||(a[4]=[j(" This gauge has been killed! ")])),_:1,__:[4]})):w("",!0),d("div",Se,[r(l,{style:{"grid-area":"title"},label:"Gauge","has-value":!!e.gauge},{default:i(()=>[e.gauge?(o(),_("a",{key:0,class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${e.gauge.address}`,onClick:a[0]||(a[0]=$(()=>{},["stop"]))},k(n(e.gauge.name??e.gauge.address)),9,Ve)):(o(),_("span",Le," ?"))]),_:1},8,["has-value"]),r(l,{style:{"grid-area":"underlying"},label:"Market / Pool","has-value":!!e.gauge},{default:i(()=>{var t,u;return[(t=e.gauge)!=null&&t.pool?(o(),_("a",{key:0,class:"font-mono",target:"_blank",href:`https://${c(e.gauge.pool.chain)}/address/${e.gauge.pool.address}`,onClick:a[1]||(a[1]=$(()=>{},["stop"]))},k(n(e.gauge.pool.name)),9,De)):(u=e.gauge)!=null&&u.market?(o(),_("span",Ne,k(n(e.gauge.market.name)),1)):(o(),_("span",Pe,"No underlying market or pool"))]}),_:1},8,["has-value"]),r(l,{style:{"grid-area":"lp-token"},label:"LP Token","has-value":!!e.gauge},{default:i(()=>{var t,u;return[(t=e.gauge)!=null&&t.lpToken&&((u=e.gauge)!=null&&u.pool)?(o(),_("a",{key:0,class:"font-mono",target:"_blank",href:`https://${c(e.gauge.pool.chain)}/address/${e.gauge.lpToken}`,onClick:a[2]||(a[2]=$(()=>{},["stop"]))},k(("addressShort"in e?e.addressShort:s(D))(e.gauge.lpToken)),9,Fe)):(o(),_("span",Be,"No LP token"))]}),_:1},8,["has-value"]),r(l,{style:{"grid-area":"tokens"},label:"Tokens","has-value":!!e.gauge},{default:i(()=>{var t;return[(t=e.gauge)!=null&&t.tokens&&e.gauge.tokens.length>0?(o(),_("div",Ie,[(o(!0),_(F,null,q(e.gauge.tokens,u=>(o(),f(p,{key:u.address,clickable:"",class:"token",address:u.address},null,8,["address"]))),128))])):(o(),_("span",Ge,"No tokens"))]}),_:1},8,["has-value"]),r(l,{style:{"grid-area":"weight"},label:"Weight","has-value":!!e.gauge},{default:i(()=>{var t;return[r(m,{value:Number(((t=e.gauge)==null?void 0:t.weight)??0)/10**18},null,8,["value"])]}),_:1},8,["has-value"]),r(l,{style:{"grid-area":"emissions"},label:"Emissions","has-value":!!e.gauge},{default:i(()=>{var t;return[r(m,{value:((t=e.gauge)==null?void 0:t.emissions)??0},null,8,["value"])]}),_:1},8,["has-value"]),r(l,{style:{"grid-area":"date"},label:"Creation Date","has-value":!!e.gauge},{default:i(()=>[e.gauge?(o(),_("a",{key:0,class:"font-mono",target:"_blank",href:`https://etherscan.io/tx/${e.gauge.creationTx}`,onClick:a[3]||(a[3]=$(()=>{},["stop"]))},k(e.gauge.creationDate.toLocaleDateString()),9,We)):w("",!0)]),_:1},8,["has-value"]),r(Ae,{style:{"grid-area":"deployment"},"gauge-address":s(h)},null,8,["gauge-address"]),r(ye,{style:{"grid-area":"weight-chart"},"gauge-address":s(h)},null,8,["gauge-address"])])],64)}}}),Oe=A(Re,[["__scopeId","data-v-b5347363"]]),Qe={style:{display:"flex","flex-wrap":"wrap",gap:"1rem"}},Ee=["href"],He={class:"end"},Me={class:"end"},Ue={class:"end"},Ke=["href"],I=15,je=T({__name:"TableVotes",props:{gaugeAddress:{}},setup(b){const{isFetching:h,data:n}=se(N(()=>b.gaugeAddress)),c=[{id:"voter",label:"Voter",sort:!1},{id:"weight",label:"Weight",sort:!0,align:"end"},{id:"block",label:"Block",sort:!0,align:"end"},{id:"time",label:"Timestamp",sort:!0,align:"end"}],{sorting:e,onSort:a}=he("time"),g=z(""),l=C(()=>n.value.filter(t=>{const u=g.value.toLocaleLowerCase().split(" ");return(V=>u.some(L=>V.toLocaleLowerCase().includes(L)))(t.user)}).orderBy(t=>{switch(e.value.column){case"time":return t.timestamp.getTime();case"weight":return t.weight;case"block":return t.blockNumber}},e.value.order)),{page:p,rowsPage:m,onPage:v}=pe(l,I);return(t,u)=>{const P=me,V=_e,L=W,O=R,Q=S;return o(),f(Q,{title:"Votes",loading:s(h)},{actions:i(()=>[d("div",Qe,[r(P,{"items-count":s(l).length,"items-per-page":I,page:s(p),onPage:s(v)},null,8,["items-count","page","onPage"]),r(V,{modelValue:s(g),"onUpdate:modelValue":u[0]||(u[0]=y=>J(g)?g.value=y:null),search:"",placeholder:"Search for..."},null,8,["modelValue"])])]),default:i(()=>[r(O,{rows:s(m),columns:c,sorting:s(e),onSortColumn:s(a)},{row:i(({item:y})=>[d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${y.user}`,onClick:u[1]||(u[1]=$(()=>{},["stop"]))},k(("addressShort"in t?t.addressShort:s(D))(y.user)),9,Ee)]),d("div",He,[r(L,{value:y.weight},null,8,["value"])]),d("div",Me,k(y.blockNumber),1),d("div",Ue,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/tx/${y.tx}`,onClick:u[2]||(u[2]=$(()=>{},["stop"]))},k(y.timestamp.toLocaleDateString()),9,Ke)])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),qe=A(je,[["__scopeId","data-v-8779ea09"]]),ze={class:"dashboard-grid"},Je=T({__name:"Votes",props:{gauge:{}},setup(b){const h=C(()=>{var n;return(n=b.gauge)==null?void 0:n.address});return(n,c)=>(o(),_("div",ze,[r(qe,{style:{"grid-area":"votes"},"gauge-address":s(h)},null,8,["gauge-address"])]))}}),Xe=A(Je,[["__scopeId","data-v-73ae6153"]]),Ye={class:"dashboard"},Ze=T({__name:"Gauge.page",setup(b){const h=fe("gaugeAddr"),{isFetching:n,data:c}=te(h),{crumbs:e}=X(Y());Z(c,l=>{e.value=[{id:"gauges",label:"Gauges",pathName:"gauges"},{id:"gauge",label:`Gauge: ${(l==null?void 0:l.name)??(l==null?void 0:l.address)??"?"}`}]},{immediate:!0});const{tabActive:a,tabActiveIndex:g}=ve(["overview","votes"],"gauge",()=>({gaugeAddr:h.value}));return(l,p)=>{const m=x,v=E,t=H;return o(),_("div",Ye,[r(m,{loading:s(n)},null,8,["loading"]),!s(n)&&s(c)?(o(),f(t,{key:0,active:s(g),onTab:p[0]||(p[0]=u=>g.value=u.index)},{default:i(()=>[r(v,{header:"Overview"},{default:i(()=>[(o(),f(B,null,[s(a)==="overview"?(o(),f(Oe,{key:0,gauge:s(c)},null,8,["gauge"])):w("",!0)],1024))]),_:1}),r(v,{header:"Votes"},{default:i(()=>[(o(),f(B,null,[s(a)==="votes"?(o(),f(Xe,{key:0,gauge:s(c)},null,8,["gauge"])):w("",!0)],1024))]),_:1})]),_:1},8,["active"])):w("",!0)])}}}),ha=A(Ze,[["__scopeId","data-v-ffcdec4a"]]);export{ha as default};
