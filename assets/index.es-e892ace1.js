import{bX as Am,c0 as Ds,bY as Zn,b$ as ti,cF as Lr,c2 as Cm,cI as il,cJ as Tm}from"./vendor-9be3fe18.js";import{e as qr,N as Pu}from"./events-7489caec.js";import{s as Au,a as Cu,d as Tu,f as Yo,g as Nu,c as Nm,b as Jo,e as Ld,h as Ru}from"./index-9ea24693.js";let Rm=class{};class $m extends Rm{constructor(){super()}}class Um extends $m{constructor(e){super()}}const Fm="^https?:",jm="^wss?:";function Lm(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Md(n,e){const t=Lm(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function sl(n){return Md(n,Fm)}function ol(n){return Md(n,jm)}function Mm(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function qd(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function $u(n){return qd(n)&&"method"in n}function Xo(n){return qd(n)&&(_n(n)||Wr(n))}function _n(n){return"result"in n}function Wr(n){return"error"in n}var Uu={},Qo={},Fe={},zd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(d,m){var _=d>>>16&65535,S=d&65535,P=m>>>16&65535,x=m&65535;return S*x+(_*x+S*P<<16>>>0)|0}n.mul=Math.imul||e;function t(d,m){return d+m|0}n.add=t;function s(d,m){return d-m|0}n.sub=s;function o(d,m){return d<<m|d>>>32-m}n.rotl=o;function c(d,m){return d<<32-m|d>>>m}n.rotr=c;function l(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}n.isInteger=Number.isInteger||l,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(d){return n.isInteger(d)&&d>=-n.MAX_SAFE_INTEGER&&d<=n.MAX_SAFE_INTEGER}})(zd);Object.defineProperty(Fe,"__esModule",{value:!0});var Hd=zd;function qm(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Fe.readInt16BE=qm;function zm(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Fe.readUint16BE=zm;function Hm(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Fe.readInt16LE=Hm;function Bm(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Fe.readUint16LE=Bm;function Bd(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Fe.writeUint16BE=Bd;Fe.writeInt16BE=Bd;function Kd(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Fe.writeUint16LE=Kd;Fe.writeInt16LE=Kd;function Zc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Fe.readInt32BE=Zc;function eu(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Fe.readUint32BE=eu;function tu(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Fe.readInt32LE=tu;function ru(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Fe.readUint32LE=ru;function zo(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Fe.writeUint32BE=zo;Fe.writeInt32BE=zo;function Ho(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Fe.writeUint32LE=Ho;Fe.writeInt32LE=Ho;function Km(n,e){e===void 0&&(e=0);var t=Zc(n,e),s=Zc(n,e+4);return t*4294967296+s-(s>>31)*4294967296}Fe.readInt64BE=Km;function Vm(n,e){e===void 0&&(e=0);var t=eu(n,e),s=eu(n,e+4);return t*4294967296+s}Fe.readUint64BE=Vm;function km(n,e){e===void 0&&(e=0);var t=tu(n,e),s=tu(n,e+4);return s*4294967296+t-(t>>31)*4294967296}Fe.readInt64LE=km;function Wm(n,e){e===void 0&&(e=0);var t=ru(n,e),s=ru(n,e+4);return s*4294967296+t}Fe.readUint64LE=Wm;function Vd(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),zo(n/4294967296>>>0,e,t),zo(n>>>0,e,t+4),e}Fe.writeUint64BE=Vd;Fe.writeInt64BE=Vd;function kd(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ho(n>>>0,e,t),Ho(n/4294967296>>>0,e,t+4),e}Fe.writeUint64LE=kd;Fe.writeInt64LE=kd;function Gm(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=n/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Fe.readUintBE=Gm;function Ym(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+n/8;c++)s+=e[c]*o,o*=256;return s}Fe.readUintLE=Ym;function Jm(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Hd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=n/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Fe.writeUintBE=Jm;function Xm(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Hd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+n/8;c++)t[c]=e/o&255,o*=256;return t}Fe.writeUintLE=Xm;function Qm(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Fe.readFloat32BE=Qm;function Zm(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Fe.readFloat32LE=Zm;function eb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Fe.readFloat64BE=eb;function tb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Fe.readFloat64LE=tb;function rb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n),e}Fe.writeFloat32BE=rb;function nb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n,!0),e}Fe.writeFloat32LE=nb;function ib(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n),e}Fe.writeFloat64BE=ib;function sb(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n,!0),e}Fe.writeFloat64LE=sb;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function ob(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Ir.wipe=ob;Object.defineProperty(Qo,"__esModule",{value:!0});var tr=Fe,nu=Ir,ab=20;function cb(n,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],m=t[7]<<24|t[6]<<16|t[5]<<8|t[4],_=t[11]<<24|t[10]<<16|t[9]<<8|t[8],S=t[15]<<24|t[14]<<16|t[13]<<8|t[12],P=t[19]<<24|t[18]<<16|t[17]<<8|t[16],x=t[23]<<24|t[22]<<16|t[21]<<8|t[20],C=t[27]<<24|t[26]<<16|t[25]<<8|t[24],R=t[31]<<24|t[30]<<16|t[29]<<8|t[28],q=e[3]<<24|e[2]<<16|e[1]<<8|e[0],L=e[7]<<24|e[6]<<16|e[5]<<8|e[4],Q=e[11]<<24|e[10]<<16|e[9]<<8|e[8],p=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=s,v=o,w=c,g=l,u=d,b=m,K=_,k=S,oe=P,ce=x,ge=C,U=R,B=q,fe=L,re=Q,G=p,te=0;te<ab;te+=2)E=E+u|0,B^=E,B=B>>>32-16|B<<16,oe=oe+B|0,u^=oe,u=u>>>32-12|u<<12,v=v+b|0,fe^=v,fe=fe>>>32-16|fe<<16,ce=ce+fe|0,b^=ce,b=b>>>32-12|b<<12,w=w+K|0,re^=w,re=re>>>32-16|re<<16,ge=ge+re|0,K^=ge,K=K>>>32-12|K<<12,g=g+k|0,G^=g,G=G>>>32-16|G<<16,U=U+G|0,k^=U,k=k>>>32-12|k<<12,w=w+K|0,re^=w,re=re>>>32-8|re<<8,ge=ge+re|0,K^=ge,K=K>>>32-7|K<<7,g=g+k|0,G^=g,G=G>>>32-8|G<<8,U=U+G|0,k^=U,k=k>>>32-7|k<<7,v=v+b|0,fe^=v,fe=fe>>>32-8|fe<<8,ce=ce+fe|0,b^=ce,b=b>>>32-7|b<<7,E=E+u|0,B^=E,B=B>>>32-8|B<<8,oe=oe+B|0,u^=oe,u=u>>>32-7|u<<7,E=E+b|0,G^=E,G=G>>>32-16|G<<16,ge=ge+G|0,b^=ge,b=b>>>32-12|b<<12,v=v+K|0,B^=v,B=B>>>32-16|B<<16,U=U+B|0,K^=U,K=K>>>32-12|K<<12,w=w+k|0,fe^=w,fe=fe>>>32-16|fe<<16,oe=oe+fe|0,k^=oe,k=k>>>32-12|k<<12,g=g+u|0,re^=g,re=re>>>32-16|re<<16,ce=ce+re|0,u^=ce,u=u>>>32-12|u<<12,w=w+k|0,fe^=w,fe=fe>>>32-8|fe<<8,oe=oe+fe|0,k^=oe,k=k>>>32-7|k<<7,g=g+u|0,re^=g,re=re>>>32-8|re<<8,ce=ce+re|0,u^=ce,u=u>>>32-7|u<<7,v=v+K|0,B^=v,B=B>>>32-8|B<<8,U=U+B|0,K^=U,K=K>>>32-7|K<<7,E=E+b|0,G^=E,G=G>>>32-8|G<<8,ge=ge+G|0,b^=ge,b=b>>>32-7|b<<7;tr.writeUint32LE(E+s|0,n,0),tr.writeUint32LE(v+o|0,n,4),tr.writeUint32LE(w+c|0,n,8),tr.writeUint32LE(g+l|0,n,12),tr.writeUint32LE(u+d|0,n,16),tr.writeUint32LE(b+m|0,n,20),tr.writeUint32LE(K+_|0,n,24),tr.writeUint32LE(k+S|0,n,28),tr.writeUint32LE(oe+P|0,n,32),tr.writeUint32LE(ce+x|0,n,36),tr.writeUint32LE(ge+C|0,n,40),tr.writeUint32LE(U+R|0,n,44),tr.writeUint32LE(B+q|0,n,48),tr.writeUint32LE(fe+L|0,n,52),tr.writeUint32LE(re+Q|0,n,56),tr.writeUint32LE(G+p|0,n,60)}function Wd(n,e,t,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var d=new Uint8Array(64),m=0;m<t.length;m+=64){cb(d,c,n);for(var _=m;_<m+64&&_<t.length;_++)s[_]=t[_]^d[_-m];hb(c,0,l)}return nu.wipe(d),o===0&&nu.wipe(c),s}Qo.streamXOR=Wd;function ub(n,e,t,s){return s===void 0&&(s=0),nu.wipe(t),Wd(n,e,t,t,s)}Qo.stream=ub;function hb(n,e,t){for(var s=1;t--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Gd={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});function fb(n,e,t){return~(n-1)&e|n-1&t}Nn.select=fb;function lb(n,e){return(n|0)-(e|0)-1>>>31&1}Nn.lessOrEqual=lb;function Yd(n,e){if(n.length!==e.length)return 0;for(var t=0,s=0;s<n.length;s++)t|=n[s]^e[s];return 1&t-1>>>8}Nn.compare=Yd;function db(n,e){return n.length===0||e.length===0?!1:Yd(n,e)!==0}Nn.equal=db;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Nn,t=Ir;n.DIGEST_LENGTH=16;var s=function(){function l(d){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var m=d[0]|d[1]<<8;this._r[0]=m&8191;var _=d[2]|d[3]<<8;this._r[1]=(m>>>13|_<<3)&8191;var S=d[4]|d[5]<<8;this._r[2]=(_>>>10|S<<6)&7939;var P=d[6]|d[7]<<8;this._r[3]=(S>>>7|P<<9)&8191;var x=d[8]|d[9]<<8;this._r[4]=(P>>>4|x<<12)&255,this._r[5]=x>>>1&8190;var C=d[10]|d[11]<<8;this._r[6]=(x>>>14|C<<2)&8191;var R=d[12]|d[13]<<8;this._r[7]=(C>>>11|R<<5)&8065;var q=d[14]|d[15]<<8;this._r[8]=(R>>>8|q<<8)&8191,this._r[9]=q>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return l.prototype._blocks=function(d,m,_){for(var S=this._fin?0:2048,P=this._h[0],x=this._h[1],C=this._h[2],R=this._h[3],q=this._h[4],L=this._h[5],Q=this._h[6],p=this._h[7],E=this._h[8],v=this._h[9],w=this._r[0],g=this._r[1],u=this._r[2],b=this._r[3],K=this._r[4],k=this._r[5],oe=this._r[6],ce=this._r[7],ge=this._r[8],U=this._r[9];_>=16;){var B=d[m+0]|d[m+1]<<8;P+=B&8191;var fe=d[m+2]|d[m+3]<<8;x+=(B>>>13|fe<<3)&8191;var re=d[m+4]|d[m+5]<<8;C+=(fe>>>10|re<<6)&8191;var G=d[m+6]|d[m+7]<<8;R+=(re>>>7|G<<9)&8191;var te=d[m+8]|d[m+9]<<8;q+=(G>>>4|te<<12)&8191,L+=te>>>1&8191;var Y=d[m+10]|d[m+11]<<8;Q+=(te>>>14|Y<<2)&8191;var ne=d[m+12]|d[m+13]<<8;p+=(Y>>>11|ne<<5)&8191;var Ie=d[m+14]|d[m+15]<<8;E+=(ne>>>8|Ie<<8)&8191,v+=Ie>>>5|S;var ie=0,be=ie;be+=P*w,be+=x*(5*U),be+=C*(5*ge),be+=R*(5*ce),be+=q*(5*oe),ie=be>>>13,be&=8191,be+=L*(5*k),be+=Q*(5*K),be+=p*(5*b),be+=E*(5*u),be+=v*(5*g),ie+=be>>>13,be&=8191;var he=ie;he+=P*g,he+=x*w,he+=C*(5*U),he+=R*(5*ge),he+=q*(5*ce),ie=he>>>13,he&=8191,he+=L*(5*oe),he+=Q*(5*k),he+=p*(5*K),he+=E*(5*b),he+=v*(5*u),ie+=he>>>13,he&=8191;var ve=ie;ve+=P*u,ve+=x*g,ve+=C*w,ve+=R*(5*U),ve+=q*(5*ge),ie=ve>>>13,ve&=8191,ve+=L*(5*ce),ve+=Q*(5*oe),ve+=p*(5*k),ve+=E*(5*K),ve+=v*(5*b),ie+=ve>>>13,ve&=8191;var H=ie;H+=P*b,H+=x*u,H+=C*g,H+=R*w,H+=q*(5*U),ie=H>>>13,H&=8191,H+=L*(5*ge),H+=Q*(5*ce),H+=p*(5*oe),H+=E*(5*k),H+=v*(5*K),ie+=H>>>13,H&=8191;var z=ie;z+=P*K,z+=x*b,z+=C*u,z+=R*g,z+=q*w,ie=z>>>13,z&=8191,z+=L*(5*U),z+=Q*(5*ge),z+=p*(5*ce),z+=E*(5*oe),z+=v*(5*k),ie+=z>>>13,z&=8191;var $=ie;$+=P*k,$+=x*K,$+=C*b,$+=R*u,$+=q*g,ie=$>>>13,$&=8191,$+=L*w,$+=Q*(5*U),$+=p*(5*ge),$+=E*(5*ce),$+=v*(5*oe),ie+=$>>>13,$&=8191;var f=ie;f+=P*oe,f+=x*k,f+=C*K,f+=R*b,f+=q*u,ie=f>>>13,f&=8191,f+=L*g,f+=Q*w,f+=p*(5*U),f+=E*(5*ge),f+=v*(5*ce),ie+=f>>>13,f&=8191;var T=ie;T+=P*ce,T+=x*oe,T+=C*k,T+=R*K,T+=q*b,ie=T>>>13,T&=8191,T+=L*u,T+=Q*g,T+=p*w,T+=E*(5*U),T+=v*(5*ge),ie+=T>>>13,T&=8191;var se=ie;se+=P*ge,se+=x*ce,se+=C*oe,se+=R*k,se+=q*K,ie=se>>>13,se&=8191,se+=L*b,se+=Q*u,se+=p*g,se+=E*w,se+=v*(5*U),ie+=se>>>13,se&=8191;var le=ie;le+=P*U,le+=x*ge,le+=C*ce,le+=R*oe,le+=q*k,ie=le>>>13,le&=8191,le+=L*K,le+=Q*b,le+=p*u,le+=E*g,le+=v*w,ie+=le>>>13,le&=8191,ie=(ie<<2)+ie|0,ie=ie+be|0,be=ie&8191,ie=ie>>>13,he+=ie,P=be,x=he,C=ve,R=H,q=z,L=$,Q=f,p=T,E=se,v=le,m+=16,_-=16}this._h[0]=P,this._h[1]=x,this._h[2]=C,this._h[3]=R,this._h[4]=q,this._h[5]=L,this._h[6]=Q,this._h[7]=p,this._h[8]=E,this._h[9]=v},l.prototype.finish=function(d,m){m===void 0&&(m=0);var _=new Uint16Array(10),S,P,x,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(S=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=S,S=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=S*5,S=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=S,S=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=S,_[0]=this._h[0]+5,S=_[0]>>>13,_[0]&=8191,C=1;C<10;C++)_[C]=this._h[C]+S,S=_[C]>>>13,_[C]&=8191;for(_[9]-=8192,P=(S^1)-1,C=0;C<10;C++)_[C]&=P;for(P=~P,C=0;C<10;C++)this._h[C]=this._h[C]&P|_[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,x=this._h[0]+this._pad[0],this._h[0]=x&65535,C=1;C<8;C++)x=(this._h[C]+this._pad[C]|0)+(x>>>16)|0,this._h[C]=x&65535;return d[m+0]=this._h[0]>>>0,d[m+1]=this._h[0]>>>8,d[m+2]=this._h[1]>>>0,d[m+3]=this._h[1]>>>8,d[m+4]=this._h[2]>>>0,d[m+5]=this._h[2]>>>8,d[m+6]=this._h[3]>>>0,d[m+7]=this._h[3]>>>8,d[m+8]=this._h[4]>>>0,d[m+9]=this._h[4]>>>8,d[m+10]=this._h[5]>>>0,d[m+11]=this._h[5]>>>8,d[m+12]=this._h[6]>>>0,d[m+13]=this._h[6]>>>8,d[m+14]=this._h[7]>>>0,d[m+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(d){var m=0,_=d.length,S;if(this._leftover){S=16-this._leftover,S>_&&(S=_);for(var P=0;P<S;P++)this._buffer[this._leftover+P]=d[m+P];if(_-=S,m+=S,this._leftover+=S,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(_>=16&&(S=_-_%16,this._blocks(d,m,S),m+=S,_-=S),_){for(var P=0;P<_;P++)this._buffer[this._leftover+P]=d[m+P];this._leftover+=_}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();n.Poly1305=s;function o(l,d){var m=new s(l);m.update(d);var _=m.digest();return m.clean(),_}n.oneTimeAuth=o;function c(l,d){return l.length!==n.DIGEST_LENGTH||d.length!==n.DIGEST_LENGTH?!1:e.equal(l,d)}n.equal=c})(Gd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Qo,t=Gd,s=Ir,o=Fe,c=Nn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var l=new Uint8Array(16),d=function(){function m(_){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,_.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(_)}return m.prototype.seal=function(_,S,P,x){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(_,C.length-_.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var q=S.length+this.tagLength,L;if(x){if(x.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");L=x}else L=new Uint8Array(q);return e.streamXOR(this._key,C,S,L,4),this._authenticate(L.subarray(L.length-this.tagLength,L.length),R,L.subarray(0,L.length-this.tagLength),P),s.wipe(C),L},m.prototype.open=function(_,S,P,x){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(S.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(_,C.length-_.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var q=new Uint8Array(this.tagLength);if(this._authenticate(q,R,S.subarray(0,S.length-this.tagLength),P),!c.equal(q,S.subarray(S.length-this.tagLength,S.length)))return null;var L=S.length-this.tagLength,Q;if(x){if(x.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");Q=x}else Q=new Uint8Array(L);return e.streamXOR(this._key,C,S.subarray(0,S.length-this.tagLength),Q,4),s.wipe(C),Q},m.prototype.clean=function(){return s.wipe(this._key),this},m.prototype._authenticate=function(_,S,P,x){var C=new t.Poly1305(S);x&&(C.update(x),x.length%16>0&&C.update(l.subarray(x.length%16))),C.update(P),P.length%16>0&&C.update(l.subarray(P.length%16));var R=new Uint8Array(8);x&&o.writeUint64LE(x.length,R),C.update(R),o.writeUint64LE(P.length,R),C.update(R);for(var q=C.digest(),L=0;L<q.length;L++)_[L]=q[L];C.clean(),s.wipe(q),s.wipe(R)},m}();n.ChaCha20Poly1305=d})(Uu);var Jd={},Ss={},Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});function pb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Fu.isSerializableHash=pb;Object.defineProperty(Ss,"__esModule",{value:!0});var tn=Fu,gb=Nn,yb=Ir,Xd=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),tn.isSerializableHash(this._inner)&&tn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),yb.wipe(s)}return n.prototype.reset=function(){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){tn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),tn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!tn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!tn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();Ss.HMAC=Xd;function _b(n,e,t){var s=new Xd(n,e);s.update(t);var o=s.digest();return s.clean(),o}Ss.hmac=_b;Ss.equal=gb.equal;Object.defineProperty(Jd,"__esModule",{value:!0});var al=Ss,cl=Ir,vb=function(){function n(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=al.hmac(this._hash,s,t);this._hmac=new al.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),cl.wipe(this._buffer),cl.wipe(this._counter),this._bufpos=0},n}(),mb=Jd.HKDF=vb,Ni={},Zo={},ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.BrowserRandomSource=void 0;const ul=65536;class bb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=ul)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,ul)));return t}}ea.BrowserRandomSource=bb;function wb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.NodeRandomSource=void 0;const Eb=Ir;class Db{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof wb<"u"){const e=Am;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,Eb.wipe)(t),s}}ta.NodeRandomSource=Db;Object.defineProperty(Zo,"__esModule",{value:!0});Zo.SystemRandomSource=void 0;const Sb=ea,Ob=ta;class Ib{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Sb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ob.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Zo.SystemRandomSource=Ib;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Zo,t=Fe,s=Ir;n.defaultRandomSource=new e.SystemRandomSource;function o(_,S=n.defaultRandomSource){return S.randomBytes(_)}n.randomBytes=o;function c(_=n.defaultRandomSource){const S=o(4,_),P=(0,t.readUint32LE)(S);return(0,s.wipe)(S),P}n.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(_,S=l,P=n.defaultRandomSource){if(S.length<2)throw new Error("randomString charset is too short");if(S.length>256)throw new Error("randomString charset is too long");let x="";const C=S.length,R=256-256%C;for(;_>0;){const q=o(Math.ceil(_*256/R),P);for(let L=0;L<q.length&&_>0;L++){const Q=q[L];Q<R&&(x+=S.charAt(Q%C),_--)}(0,s.wipe)(q)}return x}n.randomString=d;function m(_,S=l,P=n.defaultRandomSource){const x=Math.ceil(_/(Math.log(S.length)/Math.LN2));return d(x,S,P)}n.randomStringForEntropy=m})(Ni);var ra={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Fe,t=Ir;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function d(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},d.prototype.update=function(m,_){if(_===void 0&&(_=m.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var S=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&_>0;)this._buffer[this._bufferLength++]=m[S++],_--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(S=c(this._temp,this._state,m,S,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=m[S++],_--;return this},d.prototype.finish=function(m){if(!this._finished){var _=this._bytesHashed,S=this._bufferLength,P=_/536870912|0,x=_<<3,C=_%64<56?64:128;this._buffer[S]=128;for(var R=S+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(P,this._buffer,C-8),e.writeUint32BE(x,this._buffer,C-4),c(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],m,R*4);return this},d.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(m){return this._state.set(m.state),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(m){t.wipe(m.state),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},d}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(d,m,_,S,P){for(;P>=64;){for(var x=m[0],C=m[1],R=m[2],q=m[3],L=m[4],Q=m[5],p=m[6],E=m[7],v=0;v<16;v++){var w=S+v*4;d[v]=e.readUint32BE(_,w)}for(var v=16;v<64;v++){var g=d[v-2],u=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=d[v-15];var b=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;d[v]=(u+d[v-7]|0)+(b+d[v-16]|0)}for(var v=0;v<64;v++){var u=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&Q^~L&p)|0)+(E+(o[v]+d[v]|0)|0)|0,b=((x>>>2|x<<32-2)^(x>>>13|x<<32-13)^(x>>>22|x<<32-22))+(x&C^x&R^C&R)|0;E=p,p=Q,Q=L,L=q+u|0,q=R,R=C,C=x,x=u+b|0}m[0]+=x,m[1]+=C,m[2]+=R,m[3]+=q,m[4]+=L,m[5]+=Q,m[6]+=p,m[7]+=E,S+=64,P-=64}return S}function l(d){var m=new s;m.update(d);var _=m.digest();return m.clean(),_}n.hash=l})(ra);var ju={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Ni,t=Ir;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(v){const w=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)w[g]=v[g];return w}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(v){let w=1;for(let g=0;g<16;g++){let u=v[g]+w+65535;w=Math.floor(u/65536),v[g]=u-w*65536}v[0]+=w-1+37*(w-1)}function d(v,w,g){const u=~(g-1);for(let b=0;b<16;b++){const K=u&(v[b]^w[b]);v[b]^=K,w[b]^=K}}function m(v,w){const g=s(),u=s();for(let b=0;b<16;b++)u[b]=w[b];l(u),l(u),l(u);for(let b=0;b<2;b++){g[0]=u[0]-65517;for(let k=1;k<15;k++)g[k]=u[k]-65535-(g[k-1]>>16&1),g[k-1]&=65535;g[15]=u[15]-32767-(g[14]>>16&1);const K=g[15]>>16&1;g[14]&=65535,d(u,g,1-K)}for(let b=0;b<16;b++)v[2*b]=u[b]&255,v[2*b+1]=u[b]>>8}function _(v,w){for(let g=0;g<16;g++)v[g]=w[2*g]+(w[2*g+1]<<8);v[15]&=32767}function S(v,w,g){for(let u=0;u<16;u++)v[u]=w[u]+g[u]}function P(v,w,g){for(let u=0;u<16;u++)v[u]=w[u]-g[u]}function x(v,w,g){let u,b,K=0,k=0,oe=0,ce=0,ge=0,U=0,B=0,fe=0,re=0,G=0,te=0,Y=0,ne=0,Ie=0,ie=0,be=0,he=0,ve=0,H=0,z=0,$=0,f=0,T=0,se=0,le=0,Se=0,He=0,Ve=0,je=0,yt=0,_t=0,Me=g[0],Oe=g[1],Re=g[2],$e=g[3],qe=g[4],Pe=g[5],Ue=g[6],De=g[7],Ae=g[8],Be=g[9],xe=g[10],ke=g[11],Ge=g[12],et=g[13],tt=g[14],Je=g[15];u=w[0],K+=u*Me,k+=u*Oe,oe+=u*Re,ce+=u*$e,ge+=u*qe,U+=u*Pe,B+=u*Ue,fe+=u*De,re+=u*Ae,G+=u*Be,te+=u*xe,Y+=u*ke,ne+=u*Ge,Ie+=u*et,ie+=u*tt,be+=u*Je,u=w[1],k+=u*Me,oe+=u*Oe,ce+=u*Re,ge+=u*$e,U+=u*qe,B+=u*Pe,fe+=u*Ue,re+=u*De,G+=u*Ae,te+=u*Be,Y+=u*xe,ne+=u*ke,Ie+=u*Ge,ie+=u*et,be+=u*tt,he+=u*Je,u=w[2],oe+=u*Me,ce+=u*Oe,ge+=u*Re,U+=u*$e,B+=u*qe,fe+=u*Pe,re+=u*Ue,G+=u*De,te+=u*Ae,Y+=u*Be,ne+=u*xe,Ie+=u*ke,ie+=u*Ge,be+=u*et,he+=u*tt,ve+=u*Je,u=w[3],ce+=u*Me,ge+=u*Oe,U+=u*Re,B+=u*$e,fe+=u*qe,re+=u*Pe,G+=u*Ue,te+=u*De,Y+=u*Ae,ne+=u*Be,Ie+=u*xe,ie+=u*ke,be+=u*Ge,he+=u*et,ve+=u*tt,H+=u*Je,u=w[4],ge+=u*Me,U+=u*Oe,B+=u*Re,fe+=u*$e,re+=u*qe,G+=u*Pe,te+=u*Ue,Y+=u*De,ne+=u*Ae,Ie+=u*Be,ie+=u*xe,be+=u*ke,he+=u*Ge,ve+=u*et,H+=u*tt,z+=u*Je,u=w[5],U+=u*Me,B+=u*Oe,fe+=u*Re,re+=u*$e,G+=u*qe,te+=u*Pe,Y+=u*Ue,ne+=u*De,Ie+=u*Ae,ie+=u*Be,be+=u*xe,he+=u*ke,ve+=u*Ge,H+=u*et,z+=u*tt,$+=u*Je,u=w[6],B+=u*Me,fe+=u*Oe,re+=u*Re,G+=u*$e,te+=u*qe,Y+=u*Pe,ne+=u*Ue,Ie+=u*De,ie+=u*Ae,be+=u*Be,he+=u*xe,ve+=u*ke,H+=u*Ge,z+=u*et,$+=u*tt,f+=u*Je,u=w[7],fe+=u*Me,re+=u*Oe,G+=u*Re,te+=u*$e,Y+=u*qe,ne+=u*Pe,Ie+=u*Ue,ie+=u*De,be+=u*Ae,he+=u*Be,ve+=u*xe,H+=u*ke,z+=u*Ge,$+=u*et,f+=u*tt,T+=u*Je,u=w[8],re+=u*Me,G+=u*Oe,te+=u*Re,Y+=u*$e,ne+=u*qe,Ie+=u*Pe,ie+=u*Ue,be+=u*De,he+=u*Ae,ve+=u*Be,H+=u*xe,z+=u*ke,$+=u*Ge,f+=u*et,T+=u*tt,se+=u*Je,u=w[9],G+=u*Me,te+=u*Oe,Y+=u*Re,ne+=u*$e,Ie+=u*qe,ie+=u*Pe,be+=u*Ue,he+=u*De,ve+=u*Ae,H+=u*Be,z+=u*xe,$+=u*ke,f+=u*Ge,T+=u*et,se+=u*tt,le+=u*Je,u=w[10],te+=u*Me,Y+=u*Oe,ne+=u*Re,Ie+=u*$e,ie+=u*qe,be+=u*Pe,he+=u*Ue,ve+=u*De,H+=u*Ae,z+=u*Be,$+=u*xe,f+=u*ke,T+=u*Ge,se+=u*et,le+=u*tt,Se+=u*Je,u=w[11],Y+=u*Me,ne+=u*Oe,Ie+=u*Re,ie+=u*$e,be+=u*qe,he+=u*Pe,ve+=u*Ue,H+=u*De,z+=u*Ae,$+=u*Be,f+=u*xe,T+=u*ke,se+=u*Ge,le+=u*et,Se+=u*tt,He+=u*Je,u=w[12],ne+=u*Me,Ie+=u*Oe,ie+=u*Re,be+=u*$e,he+=u*qe,ve+=u*Pe,H+=u*Ue,z+=u*De,$+=u*Ae,f+=u*Be,T+=u*xe,se+=u*ke,le+=u*Ge,Se+=u*et,He+=u*tt,Ve+=u*Je,u=w[13],Ie+=u*Me,ie+=u*Oe,be+=u*Re,he+=u*$e,ve+=u*qe,H+=u*Pe,z+=u*Ue,$+=u*De,f+=u*Ae,T+=u*Be,se+=u*xe,le+=u*ke,Se+=u*Ge,He+=u*et,Ve+=u*tt,je+=u*Je,u=w[14],ie+=u*Me,be+=u*Oe,he+=u*Re,ve+=u*$e,H+=u*qe,z+=u*Pe,$+=u*Ue,f+=u*De,T+=u*Ae,se+=u*Be,le+=u*xe,Se+=u*ke,He+=u*Ge,Ve+=u*et,je+=u*tt,yt+=u*Je,u=w[15],be+=u*Me,he+=u*Oe,ve+=u*Re,H+=u*$e,z+=u*qe,$+=u*Pe,f+=u*Ue,T+=u*De,se+=u*Ae,le+=u*Be,Se+=u*xe,He+=u*ke,Ve+=u*Ge,je+=u*et,yt+=u*tt,_t+=u*Je,K+=38*he,k+=38*ve,oe+=38*H,ce+=38*z,ge+=38*$,U+=38*f,B+=38*T,fe+=38*se,re+=38*le,G+=38*Se,te+=38*He,Y+=38*Ve,ne+=38*je,Ie+=38*yt,ie+=38*_t,b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=U+b+65535,b=Math.floor(u/65536),U=u-b*65536,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=fe+b+65535,b=Math.floor(u/65536),fe=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=Y+b+65535,b=Math.floor(u/65536),Y=u-b*65536,u=ne+b+65535,b=Math.floor(u/65536),ne=u-b*65536,u=Ie+b+65535,b=Math.floor(u/65536),Ie=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,K+=b-1+37*(b-1),b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=U+b+65535,b=Math.floor(u/65536),U=u-b*65536,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=fe+b+65535,b=Math.floor(u/65536),fe=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=Y+b+65535,b=Math.floor(u/65536),Y=u-b*65536,u=ne+b+65535,b=Math.floor(u/65536),ne=u-b*65536,u=Ie+b+65535,b=Math.floor(u/65536),Ie=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,K+=b-1+37*(b-1),v[0]=K,v[1]=k,v[2]=oe,v[3]=ce,v[4]=ge,v[5]=U,v[6]=B,v[7]=fe,v[8]=re,v[9]=G,v[10]=te,v[11]=Y,v[12]=ne,v[13]=Ie,v[14]=ie,v[15]=be}function C(v,w){x(v,w,w)}function R(v,w){const g=s();for(let u=0;u<16;u++)g[u]=w[u];for(let u=253;u>=0;u--)C(g,g),u!==2&&u!==4&&x(g,g,w);for(let u=0;u<16;u++)v[u]=g[u]}function q(v,w){const g=new Uint8Array(32),u=new Float64Array(80),b=s(),K=s(),k=s(),oe=s(),ce=s(),ge=s();for(let re=0;re<31;re++)g[re]=v[re];g[31]=v[31]&127|64,g[0]&=248,_(u,w);for(let re=0;re<16;re++)K[re]=u[re];b[0]=oe[0]=1;for(let re=254;re>=0;--re){const G=g[re>>>3]>>>(re&7)&1;d(b,K,G),d(k,oe,G),S(ce,b,k),P(b,b,k),S(k,K,oe),P(K,K,oe),C(oe,ce),C(ge,b),x(b,k,b),x(k,K,ce),S(ce,b,k),P(b,b,k),C(K,b),P(k,oe,ge),x(b,k,c),S(b,b,oe),x(k,k,b),x(b,oe,ge),x(oe,K,u),C(K,ce),d(b,K,G),d(k,oe,G)}for(let re=0;re<16;re++)u[re+16]=b[re],u[re+32]=k[re],u[re+48]=K[re],u[re+64]=oe[re];const U=u.subarray(32),B=u.subarray(16);R(U,U),x(B,B,U);const fe=new Uint8Array(32);return m(fe,B),fe}n.scalarMult=q;function L(v){return q(v,o)}n.scalarMultBase=L;function Q(v){if(v.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const w=new Uint8Array(v);return{publicKey:L(w),secretKey:w}}n.generateKeyPairFromSeed=Q;function p(v){const w=(0,e.randomBytes)(32,v),g=Q(w);return(0,t.wipe)(w),g}n.generateKeyPair=p;function E(v,w,g=!1){if(v.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(w.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=q(v,w);if(g){let b=0;for(let K=0;K<u.length;K++)b|=u[K];if(b===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=E})(ju);function Lu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Qd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function iu(n,e){e||(e=n.reduce((o,c)=>o+c.length,0));const t=Qd(e);let s=0;for(const o of n)t.set(o,s),s+=o.length;return Lu(t)}function xb(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=n.length,m=n.charAt(0),_=Math.log(d)/Math.log(256),S=Math.log(256)/Math.log(d);function P(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var q=0,L=0,Q=0,p=R.length;Q!==p&&R[Q]===0;)Q++,q++;for(var E=(p-Q)*S+1>>>0,v=new Uint8Array(E);Q!==p;){for(var w=R[Q],g=0,u=E-1;(w!==0||g<L)&&u!==-1;u--,g++)w+=256*v[u]>>>0,v[u]=w%d>>>0,w=w/d>>>0;if(w!==0)throw new Error("Non-zero carry");L=g,Q++}for(var b=E-L;b!==E&&v[b]===0;)b++;for(var K=m.repeat(q);b<E;++b)K+=n.charAt(v[b]);return K}function x(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var q=0;if(R[q]!==" "){for(var L=0,Q=0;R[q]===m;)L++,q++;for(var p=(R.length-q)*_+1>>>0,E=new Uint8Array(p);R[q];){var v=t[R.charCodeAt(q)];if(v===255)return;for(var w=0,g=p-1;(v!==0||w<Q)&&g!==-1;g--,w++)v+=d*E[g]>>>0,E[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");Q=w,q++}if(R[q]!==" "){for(var u=p-Q;u!==p&&E[u]===0;)u++;for(var b=new Uint8Array(L+(p-u)),K=L;u!==p;)b[K++]=E[u++];return b}}}function C(R){var q=x(R);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:P,decodeUnsafe:x,decode:C}}var Pb=xb,Ab=Pb;const Cb=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Tb=n=>new TextEncoder().encode(n),Nb=n=>new TextDecoder().decode(n);class Rb{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $b{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Zd(this,e)}}class Ub{constructor(e){this.decoders=e}or(e){return Zd(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zd=(n,e)=>new Ub({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Fb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new Rb(e,t,s),this.decoder=new $b(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const na=({name:n,prefix:e,encode:t,decode:s})=>new Fb(n,e,t,s),Os=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=Ab(t,e);return na({prefix:n,name:e,encode:s,decode:c=>Cb(o(c))})},jb=(n,e,t,s)=>{const o={};for(let S=0;S<e.length;++S)o[e[S]]=S;let c=n.length;for(;n[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,m=0,_=0;for(let S=0;S<c;++S){const P=o[n[S]];if(P===void 0)throw new SyntaxError(`Non-${s} character`);m=m<<t|P,d+=t,d>=8&&(d-=8,l[_++]=255&m>>d)}if(d>=t||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return l},Lb=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let m=0;m<n.length;++m)for(d=d<<8|n[m],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>na({prefix:e,name:n,encode(o){return Lb(o,s,t)},decode(o){return jb(o,s,t,n)}}),Mb=na({prefix:"\0",name:"identity",encode:n=>Nb(n),decode:n=>Tb(n)}),qb=Object.freeze(Object.defineProperty({__proto__:null,identity:Mb},Symbol.toStringTag,{value:"Module"})),zb=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Hb=Object.freeze(Object.defineProperty({__proto__:null,base2:zb},Symbol.toStringTag,{value:"Module"})),Bb=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Kb=Object.freeze(Object.defineProperty({__proto__:null,base8:Bb},Symbol.toStringTag,{value:"Module"})),Vb=Os({prefix:"9",name:"base10",alphabet:"0123456789"}),kb=Object.freeze(Object.defineProperty({__proto__:null,base10:Vb},Symbol.toStringTag,{value:"Module"})),Wb=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gb=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Yb=Object.freeze(Object.defineProperty({__proto__:null,base16:Wb,base16upper:Gb},Symbol.toStringTag,{value:"Module"})),Jb=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xb=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qb=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Zb=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ew=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tw=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rw=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nw=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),iw=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sw=Object.freeze(Object.defineProperty({__proto__:null,base32:Jb,base32hex:ew,base32hexpad:rw,base32hexpadupper:nw,base32hexupper:tw,base32pad:Qb,base32padupper:Zb,base32upper:Xb,base32z:iw},Symbol.toStringTag,{value:"Module"})),ow=Os({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),aw=Os({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cw=Object.freeze(Object.defineProperty({__proto__:null,base36:ow,base36upper:aw},Symbol.toStringTag,{value:"Module"})),uw=Os({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hw=Os({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),fw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:uw,base58flickr:hw},Symbol.toStringTag,{value:"Module"})),lw=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dw=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pw=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gw=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yw=Object.freeze(Object.defineProperty({__proto__:null,base64:lw,base64pad:dw,base64url:pw,base64urlpad:gw},Symbol.toStringTag,{value:"Module"})),ep=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),_w=ep.reduce((n,e,t)=>(n[t]=e,n),[]),vw=ep.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function mw(n){return n.reduce((e,t)=>(e+=_w[t],e),"")}function bw(n){const e=[];for(const t of n){const s=vw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const ww=na({prefix:"ðŸš€",name:"base256emoji",encode:mw,decode:bw}),Ew=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ww},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const hl={...qb,...Hb,...Kb,...kb,...Yb,...sw,...cw,...fw,...yw,...Ew};function tp(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const fl=tp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Rc=tp("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=Qd(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),rp={utf8:fl,"utf-8":fl,hex:hl.base16,latin1:Rc,ascii:Rc,binary:Rc,...hl};function mr(n,e="utf8"){const t=rp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lu(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function fr(n,e="utf8"){const t=rp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var su=function(n,e){return su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},su(n,e)};function Dw(n,e){su(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ou=function(){return ou=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},ou.apply(this,arguments)};function Sw(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function Ow(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Iw(n,e){return function(t,s){e(t,s,n)}}function xw(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Pw(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(S){try{_(s.next(S))}catch(P){l(P)}}function m(S){try{_(s.throw(S))}catch(P){l(P)}}function _(S){S.done?c(S.value):o(S.value).then(d,m)}_((s=s.apply(n,e||[])).next())})}function Aw(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(_){return function(S){return m([_,S])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function Cw(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function Tw(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function au(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function np(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function Nw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(np(arguments[e]));return n}function Rw(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function _s(n){return this instanceof _s?(this.v=n,this):new _s(n)}function $w(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(x){s[x]&&(o[x]=function(C){return new Promise(function(R,q){c.push([x,C,R,q])>1||d(x,C)})})}function d(x,C){try{m(s[x](C))}catch(R){P(c[0][3],R)}}function m(x){x.value instanceof _s?Promise.resolve(x.value.v).then(_,S):P(c[0][2],x)}function _(x){d("next",x)}function S(x){d("throw",x)}function P(x,C){x(C),c.shift(),c.length&&d(c[0][0],c[0][1])}}function Uw(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:_s(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function Fw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof au=="function"?au(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(d,m){l=n[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(_){c({value:_,done:d})},l)}}function jw(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Lw(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Mw(n){return n&&n.__esModule?n:{default:n}}function qw(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function zw(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const Hw=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ou},__asyncDelegator:Uw,__asyncGenerator:$w,__asyncValues:Fw,__await:_s,__awaiter:Pw,__classPrivateFieldGet:qw,__classPrivateFieldSet:zw,__createBinding:Cw,__decorate:Ow,__exportStar:Tw,__extends:Dw,__generator:Aw,__importDefault:Mw,__importStar:Lw,__makeTemplateObject:jw,__metadata:xw,__param:Iw,__read:np,__rest:Sw,__spread:Nw,__spreadArrays:Rw,__values:au},Symbol.toStringTag,{value:"Module"})),ia=Ds(Hw);var $c={},ns={},ll;function Bw(){if(ll)return ns;ll=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ns.delay=n,ns}var Yn={},Uc={},Jn={},dl;function Kw(){return dl||(dl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.ONE_THOUSAND=Jn.ONE_HUNDRED=void 0,Jn.ONE_HUNDRED=100,Jn.ONE_THOUSAND=1e3),Jn}var Fc={},pl;function Vw(){return pl||(pl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Fc)),Fc}var gl;function ip(){return gl||(gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ia;e.__exportStar(Kw(),n),e.__exportStar(Vw(),n)}(Uc)),Uc}var yl;function kw(){if(yl)return Yn;yl=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.fromMiliseconds=Yn.toMiliseconds=void 0;const n=ip();function e(s){return s*n.ONE_THOUSAND}Yn.toMiliseconds=e;function t(s){return Math.floor(s/n.ONE_THOUSAND)}return Yn.fromMiliseconds=t,Yn}var _l;function Ww(){return _l||(_l=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ia;e.__exportStar(Bw(),n),e.__exportStar(kw(),n)}($c)),$c}var Pi={},vl;function Gw(){if(vl)return Pi;vl=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Pi.Watch=n,Pi.default=n,Pi}var jc={},is={},ml;function Yw(){if(ml)return is;ml=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IWatch=void 0;class n{}return is.IWatch=n,is}var bl;function Jw(){return bl||(bl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),ia.__exportStar(Yw(),n)}(jc)),jc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ia;e.__exportStar(Ww(),n),e.__exportStar(Gw(),n),e.__exportStar(Jw(),n),e.__exportStar(ip(),n)})(_e);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function ri(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ft.getFromWindow=ri;function Ri(n){const e=ri(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ft.getFromWindowOrThrow=Ri;function Xw(){return Ri("document")}ft.getDocumentOrThrow=Xw;function Qw(){return ri("document")}ft.getDocument=Qw;function Zw(){return Ri("navigator")}ft.getNavigatorOrThrow=Zw;function eE(){return ri("navigator")}ft.getNavigator=eE;function tE(){return Ri("location")}ft.getLocationOrThrow=tE;function rE(){return ri("location")}ft.getLocation=rE;function nE(){return Ri("crypto")}ft.getCryptoOrThrow=nE;function iE(){return ri("crypto")}ft.getCrypto=iE;function sE(){return Ri("localStorage")}ft.getLocalStorageOrThrow=sE;function oE(){return ri("localStorage")}ft.getLocalStorage=oE;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.getWindowMetadata=void 0;const wl=ft;function aE(){let n,e;try{n=wl.getDocumentOrThrow(),e=wl.getLocationOrThrow()}catch{return null}function t(){const P=n.getElementsByTagName("link"),x=[];for(let C=0;C<P.length;C++){const R=P[C],q=R.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=R.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Q=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Q+=L;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");Q+=E+"/"+L}x.push(Q)}else if(L.indexOf("//")===0){const Q=e.protocol+L;x.push(Q)}else x.push(L)}}return x}function s(...P){const x=n.getElementsByTagName("meta");for(let C=0;C<x.length;C++){const R=x[C],q=["itemprop","property","name"].map(L=>R.getAttribute(L)).filter(L=>L?P.includes(L):!1);if(q.length&&q){const L=R.getAttribute("content");if(L)return L}}return""}function o(){let P=s("name","og:site_name","og:title","twitter:title");return P||(P=n.title),P}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),m=e.origin,_=t();return{description:d,url:m,icons:_,name:l}}Mu.getWindowMetadata=aE;var cE={},qu=function(n,e){for(var t={},s=Object.keys(n),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],d=n[l];(o?e.indexOf(l)!==-1:e(l,d,n))&&(t[l]=d)}return t};(function(n){const e=Cu,t=Tu,s=Au,o=qu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[",g,"]"].join("")]:[...v,[S(E,p),"[",S(g,p),"]=",S(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[]"].join("")]:[...v,[S(E,p),"[]=",S(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),":list="].join("")]:[...v,[S(E,p),":list=",S(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[S(v,p),E,S(g,p)].join("")]:[[w,S(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,S(E,p)]:[...v,[S(E,p),"=",S(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&P(w,p).includes(p.arrayFormatSeparator);w=b?P(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(k=>P(k,p)):w===null?w:P(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&P(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>P(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function P(p,E){return E.decode?t(p):p}function x(p){return Array.isArray(p)?p.sort():typeof p=="object"?x(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function q(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function L(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Q(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:P(b,E),v(P(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=L(u[b],E);else w[g]=L(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=x(b):g[u]=b,g},Object.create(null))}n.extract=q,n.parse=Q,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=d(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?S(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?S(b,E)+"[]":K.reduce(w(b),[]).join("&"):S(b,E)+"="+S(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Q(q(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:P(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[l]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[l]?S(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(cE);const uE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function hE(n,e=[]){const t=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const o=n[s];t.push(...o.accounts)}),t}const fE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function lE(n,e){const{message:t,code:s}=fE[n];return{message:e?`${t} ${e}`:t,code:s}}function cu(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}var sa={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uu=function(n,e){return uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},uu(n,e)};function dE(n,e){uu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hu=function(){return hu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},hu.apply(this,arguments)};function pE(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function gE(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function yE(n,e){return function(t,s){e(t,s,n)}}function _E(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function vE(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(S){try{_(s.next(S))}catch(P){l(P)}}function m(S){try{_(s.throw(S))}catch(P){l(P)}}function _(S){S.done?c(S.value):o(S.value).then(d,m)}_((s=s.apply(n,e||[])).next())})}function mE(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(_){return function(S){return m([_,S])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function bE(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function wE(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function fu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function EE(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(sp(arguments[e]));return n}function DE(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function vs(n){return this instanceof vs?(this.v=n,this):new vs(n)}function SE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(x){s[x]&&(o[x]=function(C){return new Promise(function(R,q){c.push([x,C,R,q])>1||d(x,C)})})}function d(x,C){try{m(s[x](C))}catch(R){P(c[0][3],R)}}function m(x){x.value instanceof vs?Promise.resolve(x.value.v).then(_,S):P(c[0][2],x)}function _(x){d("next",x)}function S(x){d("throw",x)}function P(x,C){x(C),c.shift(),c.length&&d(c[0][0],c[0][1])}}function OE(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:vs(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function IE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof fu=="function"?fu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(d,m){l=n[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(_){c({value:_,done:d})},l)}}function xE(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function PE(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function AE(n){return n&&n.__esModule?n:{default:n}}function CE(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function TE(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const NE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return hu},__asyncDelegator:OE,__asyncGenerator:SE,__asyncValues:IE,__await:vs,__awaiter:vE,__classPrivateFieldGet:CE,__classPrivateFieldSet:TE,__createBinding:bE,__decorate:gE,__exportStar:wE,__extends:dE,__generator:mE,__importDefault:AE,__importStar:PE,__makeTemplateObject:xE,__metadata:_E,__param:yE,__read:sp,__rest:pE,__spread:EE,__spreadArrays:DE,__values:fu},Symbol.toStringTag,{value:"Module"})),op=Ds(NE);var Is={};Object.defineProperty(Is,"__esModule",{value:!0});function RE(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}Is.safeJsonParse=RE;function $E(n){return typeof n=="string"?n:JSON.stringify(n,(e,t)=>typeof t>"u"?null:t)}Is.safeJsonStringify=$E;var ss={exports:{}},El;function UE(){return El||(El=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,s){this[t]=String(s)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Zn<"u"&&Zn.localStorage?ss.exports=Zn.localStorage:typeof window<"u"&&window.localStorage?ss.exports=window.localStorage:ss.exports=new e}()),ss.exports}var Lc={},os={},Dl;function FE(){if(Dl)return os;Dl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.IKeyValueStorage=void 0;class n{}return os.IKeyValueStorage=n,os}var as={},Sl;function jE(){if(Sl)return as;Sl=1,Object.defineProperty(as,"__esModule",{value:!0}),as.parseEntry=void 0;const n=Is;function e(t){var s;return[t[0],n.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return as.parseEntry=e,as}var Ol;function LE(){return Ol||(Ol=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=op;e.__exportStar(FE(),n),e.__exportStar(jE(),n)}(Lc)),Lc}Object.defineProperty(sa,"__esModule",{value:!0});sa.KeyValueStorage=void 0;const Ai=op,Il=Is,ME=Ai.__importDefault(UE()),qE=LE();class ap{constructor(){this.localStorage=ME.default}getKeys(){return Ai.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Ai.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(qE.parseEntry)})}getItem(e){return Ai.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return Il.safeJsonParse(t)})}setItem(e,t){return Ai.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Il.safeJsonStringify(t))})}removeItem(e){return Ai.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}sa.KeyValueStorage=ap;var zE=sa.default=ap,$i={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lu=function(n,e){return lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},lu(n,e)};function HE(n,e){lu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var du=function(){return du=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},du.apply(this,arguments)};function BE(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function KE(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function VE(n,e){return function(t,s){e(t,s,n)}}function kE(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function WE(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(S){try{_(s.next(S))}catch(P){l(P)}}function m(S){try{_(s.throw(S))}catch(P){l(P)}}function _(S){S.done?c(S.value):o(S.value).then(d,m)}_((s=s.apply(n,e||[])).next())})}function GE(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(_){return function(S){return m([_,S])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function YE(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function JE(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function pu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function XE(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(cp(arguments[e]));return n}function QE(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function ms(n){return this instanceof ms?(this.v=n,this):new ms(n)}function ZE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(x){s[x]&&(o[x]=function(C){return new Promise(function(R,q){c.push([x,C,R,q])>1||d(x,C)})})}function d(x,C){try{m(s[x](C))}catch(R){P(c[0][3],R)}}function m(x){x.value instanceof ms?Promise.resolve(x.value.v).then(_,S):P(c[0][2],x)}function _(x){d("next",x)}function S(x){d("throw",x)}function P(x,C){x(C),c.shift(),c.length&&d(c[0][0],c[0][1])}}function e3(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:ms(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function t3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pu=="function"?pu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(d,m){l=n[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(_){c({value:_,done:d})},l)}}function r3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function n3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function i3(n){return n&&n.__esModule?n:{default:n}}function s3(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function o3(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const a3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return du},__asyncDelegator:e3,__asyncGenerator:ZE,__asyncValues:t3,__await:ms,__awaiter:WE,__classPrivateFieldGet:s3,__classPrivateFieldSet:o3,__createBinding:YE,__decorate:KE,__exportStar:JE,__extends:HE,__generator:GE,__importDefault:i3,__importStar:n3,__makeTemplateObject:r3,__metadata:kE,__param:VE,__read:cp,__rest:BE,__spread:XE,__spreadArrays:QE,__values:pu},Symbol.toStringTag,{value:"Module"})),oa=Ds(a3);var cs={},Mc={},us={};class ni{}const c3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ni},Symbol.toStringTag,{value:"Module"})),u3=Ds(c3);var xl;function h3(){if(xl)return us;xl=1,Object.defineProperty(us,"__esModule",{value:!0}),us.IHeartBeat=void 0;const n=u3;class e extends n.IEvents{constructor(s){super()}}return us.IHeartBeat=e,us}var Pl;function up(){return Pl||(Pl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),oa.__exportStar(h3(),n)}(Mc)),Mc}var qc={},Xn={},Al;function f3(){if(Al)return Xn;Al=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.HEARTBEAT_EVENTS=Xn.HEARTBEAT_INTERVAL=void 0;const n=_e;return Xn.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Xn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Xn}var Cl;function hp(){return Cl||(Cl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),oa.__exportStar(f3(),n)}(qc)),qc}var Tl;function l3(){if(Tl)return cs;Tl=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.HeartBeat=void 0;const n=oa,e=qr,t=_e,s=up(),o=hp();class c extends s.IHeartBeat{constructor(d){super(d),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(d==null?void 0:d.interval)||o.HEARTBEAT_INTERVAL}static init(d){return n.__awaiter(this,void 0,void 0,function*(){const m=new c(d);return yield m.init(),m})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(d,m){this.events.on(d,m)}once(d,m){this.events.once(d,m)}off(d,m){this.events.off(d,m)}removeListener(d,m){this.events.removeListener(d,m)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return cs.HeartBeat=c,cs}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=oa;e.__exportStar(l3(),n),e.__exportStar(up(),n),e.__exportStar(hp(),n)})($i);var Ze={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gu=function(n,e){return gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},gu(n,e)};function d3(n,e){gu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yu=function(){return yu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},yu.apply(this,arguments)};function p3(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function g3(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function y3(n,e){return function(t,s){e(t,s,n)}}function _3(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function v3(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(S){try{_(s.next(S))}catch(P){l(P)}}function m(S){try{_(s.throw(S))}catch(P){l(P)}}function _(S){S.done?c(S.value):o(S.value).then(d,m)}_((s=s.apply(n,e||[])).next())})}function m3(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(_){return function(S){return m([_,S])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function b3(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function w3(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function _u(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function E3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(fp(arguments[e]));return n}function D3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function bs(n){return this instanceof bs?(this.v=n,this):new bs(n)}function S3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(x){s[x]&&(o[x]=function(C){return new Promise(function(R,q){c.push([x,C,R,q])>1||d(x,C)})})}function d(x,C){try{m(s[x](C))}catch(R){P(c[0][3],R)}}function m(x){x.value instanceof bs?Promise.resolve(x.value.v).then(_,S):P(c[0][2],x)}function _(x){d("next",x)}function S(x){d("throw",x)}function P(x,C){x(C),c.shift(),c.length&&d(c[0][0],c[0][1])}}function O3(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:bs(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function I3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _u=="function"?_u(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(d,m){l=n[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(_){c({value:_,done:d})},l)}}function x3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function P3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function A3(n){return n&&n.__esModule?n:{default:n}}function C3(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function T3(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const N3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return yu},__asyncDelegator:O3,__asyncGenerator:S3,__asyncValues:I3,__await:bs,__awaiter:v3,__classPrivateFieldGet:C3,__classPrivateFieldSet:T3,__createBinding:b3,__decorate:g3,__exportStar:w3,__extends:d3,__generator:m3,__importDefault:A3,__importStar:P3,__makeTemplateObject:x3,__metadata:_3,__param:y3,__read:fp,__rest:p3,__spread:E3,__spreadArrays:D3,__values:_u},Symbol.toStringTag,{value:"Module"})),R3=Ds(N3);var zc,Nl;function $3(){if(Nl)return zc;Nl=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}zc=e;function e(t,s,o){var c=o&&o.stringify||n,l=1;if(typeof t=="object"&&t!==null){var d=s.length+l;if(d===1)return t;var m=new Array(d);m[0]=c(t);for(var _=1;_<d;_++)m[_]=c(s[_]);return m.join(" ")}if(typeof t!="string")return t;var S=s.length;if(S===0)return t;for(var P="",x=1-l,C=-1,R=t&&t.length||0,q=0;q<R;){if(t.charCodeAt(q)===37&&q+1<R){switch(C=C>-1?C:0,t.charCodeAt(q+1)){case 100:case 102:if(x>=S||s[x]==null)break;C<q&&(P+=t.slice(C,q)),P+=Number(s[x]),C=q+2,q++;break;case 105:if(x>=S||s[x]==null)break;C<q&&(P+=t.slice(C,q)),P+=Math.floor(Number(s[x])),C=q+2,q++;break;case 79:case 111:case 106:if(x>=S||s[x]===void 0)break;C<q&&(P+=t.slice(C,q));var L=typeof s[x];if(L==="string"){P+="'"+s[x]+"'",C=q+2,q++;break}if(L==="function"){P+=s[x].name||"<anonymous>",C=q+2,q++;break}P+=c(s[x]),C=q+2,q++;break;case 115:if(x>=S)break;C<q&&(P+=t.slice(C,q)),P+=String(s[x]),C=q+2,q++;break;case 37:C<q&&(P+=t.slice(C,q)),P+="%",C=q+2,q++,x--;break}++x}++q}return C===-1?t:(C<R&&(P+=t.slice(C)),P)}return zc}var Hc,Rl;function U3(){if(Rl)return Hc;Rl=1;const n=$3();Hc=o;const e=w().console||{},t={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:q,wrapResponseSerializer:q,wrapErrorSerializer:q,req:R,res:R,err:x};function s(g,u){return Array.isArray(g)?g.filter(function(K){return K!=="!stdSerializers.err"}):g===!0?Object.keys(u):!1}function o(g){g=g||{},g.browser=g.browser||{};const u=g.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const K=g.serializers||{},k=s(g.browser.serialize,K);let oe=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(oe=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),g.enabled===!1&&(g.level="silent");const ge=g.level||"info",U=Object.create(b);U.log||(U.log=L),Object.defineProperty(U,"levelVal",{get:fe}),Object.defineProperty(U,"level",{get:re,set:G});const B={transmit:u,serialize:k,asObject:g.browser.asObject,levels:ce,timestamp:C(g)};U.levels=o.levels,U.level=ge,U.setMaxListeners=U.getMaxListeners=U.emit=U.addListener=U.on=U.prependListener=U.once=U.prependOnceListener=U.removeListener=U.removeAllListeners=U.listeners=U.listenerCount=U.eventNames=U.write=U.flush=L,U.serializers=K,U._serialize=k,U._stdErrSerialize=oe,U.child=te,u&&(U._logEvent=P());function fe(){return this.level==="silent"?1/0:this.levels.values[this.level]}function re(){return this._level}function G(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,c(B,U,"error","log"),c(B,U,"fatal","error"),c(B,U,"warn","error"),c(B,U,"info","log"),c(B,U,"debug","log"),c(B,U,"trace","log")}function te(Y,ne){if(!Y)throw new Error("missing bindings for child Pino");ne=ne||{},k&&Y.serializers&&(ne.serializers=Y.serializers);const Ie=ne.serializers;if(k&&Ie){var ie=Object.assign({},K,Ie),be=g.browser.serialize===!0?Object.keys(ie):k;delete Y.serializers,m([Y],be,ie,this._stdErrSerialize)}function he(ve){this._childLevel=(ve._childLevel|0)+1,this.error=_(ve,Y,"error"),this.fatal=_(ve,Y,"fatal"),this.warn=_(ve,Y,"warn"),this.info=_(ve,Y,"info"),this.debug=_(ve,Y,"debug"),this.trace=_(ve,Y,"trace"),ie&&(this.serializers=ie,this._serialize=be),u&&(this._logEvent=P([].concat(ve._logEvent.bindings,Y)))}return he.prototype=this,new he(this)}return U}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:Q,epochTime:p,unixTime:E,isoTime:v});function c(g,u,b,K){const k=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?L:k[b]?k[b]:e[b]||e[K]||L,l(g,u,b)}function l(g,u,b){!g.transmit&&u[b]===L||(u[b]=function(K){return function(){const oe=g.timestamp(),ce=new Array(arguments.length),ge=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var U=0;U<ce.length;U++)ce[U]=arguments[U];if(g.serialize&&!g.asObject&&m(ce,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?K.call(ge,d(this,b,ce,oe)):K.apply(ge,ce),g.transmit){const B=g.transmit.level||u.level,fe=o.levels.values[B],re=o.levels.values[b];if(re<fe)return;S(this,{ts:oe,methodLevel:b,methodValue:re,transmitLevel:B,transmitValue:o.levels.values[g.transmit.level||u.level],send:g.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function d(g,u,b,K){g._serialize&&m(b,g._serialize,g.serializers,g._stdErrSerialize);const k=b.slice();let oe=k[0];const ce={};K&&(ce.time=K),ce.level=o.levels.values[u];let ge=(g._childLevel|0)+1;if(ge<1&&(ge=1),oe!==null&&typeof oe=="object"){for(;ge--&&typeof k[0]=="object";)Object.assign(ce,k.shift());oe=k.length?n(k.shift(),k):void 0}else typeof oe=="string"&&(oe=n(k.shift(),k));return oe!==void 0&&(ce.msg=oe),ce}function m(g,u,b,K){for(const k in g)if(K&&g[k]instanceof Error)g[k]=o.stdSerializers.err(g[k]);else if(typeof g[k]=="object"&&!Array.isArray(g[k]))for(const oe in g[k])u&&u.indexOf(oe)>-1&&oe in b&&(g[k][oe]=b[oe](g[k][oe]))}function _(g,u,b){return function(){const K=new Array(1+arguments.length);K[0]=u;for(var k=1;k<K.length;k++)K[k]=arguments[k-1];return g[b].apply(this,K)}}function S(g,u,b){const K=u.send,k=u.ts,oe=u.methodLevel,ce=u.methodValue,ge=u.val,U=g._logEvent.bindings;m(b,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=k,g._logEvent.messages=b.filter(function(B){return U.indexOf(B)===-1}),g._logEvent.level.label=oe,g._logEvent.level.value=ce,K(oe,g._logEvent,ge),g._logEvent=P(U)}function P(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function x(g){const u={type:g.constructor.name,msg:g.message,stack:g.stack};for(const b in g)u[b]===void 0&&(u[b]=g[b]);return u}function C(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?Q:p}function R(){return{}}function q(g){return g}function L(){}function Q(){return!1}function p(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function w(){function g(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Hc}var Qn={},$l;function lp(){return $l||($l=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PINO_CUSTOM_CONTEXT_KEY=Qn.PINO_LOGGER_DEFAULTS=void 0,Qn.PINO_LOGGER_DEFAULTS={level:"info"},Qn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Qn}var cr={},Ul;function F3(){if(Ul)return cr;Ul=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const n=lp();function e(d){return Object.assign(Object.assign({},d),{level:(d==null?void 0:d.level)||n.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(d,m=n.PINO_CUSTOM_CONTEXT_KEY){return d[m]||""}cr.getBrowserLoggerContext=t;function s(d,m,_=n.PINO_CUSTOM_CONTEXT_KEY){return d[_]=m,d}cr.setBrowserLoggerContext=s;function o(d,m=n.PINO_CUSTOM_CONTEXT_KEY){let _="";return typeof d.bindings>"u"?_=t(d,m):_=d.bindings().context||"",_}cr.getLoggerContext=o;function c(d,m,_=n.PINO_CUSTOM_CONTEXT_KEY){const S=o(d,_);return S.trim()?`${S}/${m}`:m}cr.formatChildLoggerContext=c;function l(d,m,_=n.PINO_CUSTOM_CONTEXT_KEY){const S=c(d,m,_),P=d.child({context:S});return s(P,S,_)}return cr.generateChildLogger=l,cr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=R3,t=e.__importDefault(U3());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(lp(),n),e.__exportStar(F3(),n)})(Ze);class j3 extends ni{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class L3 extends ni{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class M3{constructor(e,t){this.logger=e,this.core=t}}let q3=class extends ni{constructor(e,t){super(),this.relayer=e,this.logger=t}},z3=class extends ni{constructor(e){super()}},H3=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class B3 extends ni{constructor(e,t){super(),this.relayer=e,this.logger=t}}let K3=class extends ni{constructor(e,t){super(),this.core=e,this.logger=t}},V3=class{constructor(e,t){this.projectId=e,this.logger=t}},k3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},W3=class{constructor(e){this.client=e}};const G3=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Y3=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function zu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Y3(n)}catch{return n}}function ws(n){return typeof n=="string"?n:G3(n)||""}var Hu={},dp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Fe,t=Ir;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function d(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},d.prototype.update=function(m,_){if(_===void 0&&(_=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&_>0;)this._buffer[this._bufferLength++]=m[S++],_--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(S=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,S,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=m[S++],_--;return this},d.prototype.finish=function(m){if(!this._finished){var _=this._bytesHashed,S=this._bufferLength,P=_/536870912|0,x=_<<3,C=_%128<112?128:256;this._buffer[S]=128;for(var R=S+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(P,this._buffer,C-8),e.writeUint32BE(x,this._buffer,C-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],m,R*8),e.writeUint32BE(this._stateLo[R],m,R*8+4);return this},d.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(m){t.wipe(m.stateHi),t.wipe(m.stateLo),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},d}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(d,m,_,S,P,x,C){for(var R=_[0],q=_[1],L=_[2],Q=_[3],p=_[4],E=_[5],v=_[6],w=_[7],g=S[0],u=S[1],b=S[2],K=S[3],k=S[4],oe=S[5],ce=S[6],ge=S[7],U,B,fe,re,G,te,Y,ne;C>=128;){for(var Ie=0;Ie<16;Ie++){var ie=8*Ie+x;d[Ie]=e.readUint32BE(P,ie),m[Ie]=e.readUint32BE(P,ie+4)}for(var Ie=0;Ie<80;Ie++){var be=R,he=q,ve=L,H=Q,z=p,$=E,f=v,T=w,se=g,le=u,Se=b,He=K,Ve=k,je=oe,yt=ce,_t=ge;if(U=w,B=ge,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=(p>>>14|k<<32-14)^(p>>>18|k<<32-18)^(k>>>41-32|p<<32-(41-32)),B=(k>>>14|p<<32-14)^(k>>>18|p<<32-18)^(p>>>41-32|k<<32-(41-32)),G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,U=p&E^~p&v,B=k&oe^~k&ce,G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,U=o[Ie*2],B=o[Ie*2+1],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,U=d[Ie%16],B=m[Ie%16],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,fe=Y&65535|ne<<16,re=G&65535|te<<16,U=fe,B=re,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=(R>>>28|g<<32-28)^(g>>>34-32|R<<32-(34-32))^(g>>>39-32|R<<32-(39-32)),B=(g>>>28|R<<32-28)^(R>>>34-32|g<<32-(34-32))^(R>>>39-32|g<<32-(39-32)),G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,U=R&q^R&L^q&L,B=g&u^g&b^u&b,G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,T=Y&65535|ne<<16,_t=G&65535|te<<16,U=H,B=He,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=fe,B=re,G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,H=Y&65535|ne<<16,He=G&65535|te<<16,q=be,L=he,Q=ve,p=H,E=z,v=$,w=f,R=T,u=se,b=le,K=Se,k=He,oe=Ve,ce=je,ge=yt,g=_t,Ie%16===15)for(var ie=0;ie<16;ie++)U=d[ie],B=m[ie],G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=d[(ie+9)%16],B=m[(ie+9)%16],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,fe=d[(ie+1)%16],re=m[(ie+1)%16],U=(fe>>>1|re<<32-1)^(fe>>>8|re<<32-8)^fe>>>7,B=(re>>>1|fe<<32-1)^(re>>>8|fe<<32-8)^(re>>>7|fe<<32-7),G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,fe=d[(ie+14)%16],re=m[(ie+14)%16],U=(fe>>>19|re<<32-19)^(re>>>61-32|fe<<32-(61-32))^fe>>>6,B=(re>>>19|fe<<32-19)^(fe>>>61-32|re<<32-(61-32))^(re>>>6|fe<<32-6),G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,d[ie]=Y&65535|ne<<16,m[ie]=G&65535|te<<16}U=R,B=g,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[0],B=S[0],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[0]=R=Y&65535|ne<<16,S[0]=g=G&65535|te<<16,U=q,B=u,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[1],B=S[1],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[1]=q=Y&65535|ne<<16,S[1]=u=G&65535|te<<16,U=L,B=b,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[2],B=S[2],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[2]=L=Y&65535|ne<<16,S[2]=b=G&65535|te<<16,U=Q,B=K,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[3],B=S[3],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[3]=Q=Y&65535|ne<<16,S[3]=K=G&65535|te<<16,U=p,B=k,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[4],B=S[4],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[4]=p=Y&65535|ne<<16,S[4]=k=G&65535|te<<16,U=E,B=oe,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[5],B=S[5],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[5]=E=Y&65535|ne<<16,S[5]=oe=G&65535|te<<16,U=v,B=ce,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[6],B=S[6],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[6]=v=Y&65535|ne<<16,S[6]=ce=G&65535|te<<16,U=w,B=ge,G=B&65535,te=B>>>16,Y=U&65535,ne=U>>>16,U=_[7],B=S[7],G+=B&65535,te+=B>>>16,Y+=U&65535,ne+=U>>>16,te+=G>>>16,Y+=te>>>16,ne+=Y>>>16,_[7]=w=Y&65535|ne<<16,S[7]=ge=G&65535|te<<16,x+=128,C-=128}return x}function l(d){var m=new s;m.update(d);var _=m.digest();return m.clean(),_}n.hash=l})(dp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Ni,t=dp,s=Ir;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(H){const z=new Float64Array(16);if(H)for(let $=0;$<H.length;$++)z[$]=H[$];return z}const c=new Uint8Array(32);c[0]=9;const l=o(),d=o([1]),m=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),P=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(H,z){for(let $=0;$<16;$++)H[$]=z[$]|0}function R(H){let z=1;for(let $=0;$<16;$++){let f=H[$]+z+65535;z=Math.floor(f/65536),H[$]=f-z*65536}H[0]+=z-1+37*(z-1)}function q(H,z,$){const f=~($-1);for(let T=0;T<16;T++){const se=f&(H[T]^z[T]);H[T]^=se,z[T]^=se}}function L(H,z){const $=o(),f=o();for(let T=0;T<16;T++)f[T]=z[T];R(f),R(f),R(f);for(let T=0;T<2;T++){$[0]=f[0]-65517;for(let le=1;le<15;le++)$[le]=f[le]-65535-($[le-1]>>16&1),$[le-1]&=65535;$[15]=f[15]-32767-($[14]>>16&1);const se=$[15]>>16&1;$[14]&=65535,q(f,$,1-se)}for(let T=0;T<16;T++)H[2*T]=f[T]&255,H[2*T+1]=f[T]>>8}function Q(H,z){let $=0;for(let f=0;f<32;f++)$|=H[f]^z[f];return(1&$-1>>>8)-1}function p(H,z){const $=new Uint8Array(32),f=new Uint8Array(32);return L($,H),L(f,z),Q($,f)}function E(H){const z=new Uint8Array(32);return L(z,H),z[0]&1}function v(H,z){for(let $=0;$<16;$++)H[$]=z[2*$]+(z[2*$+1]<<8);H[15]&=32767}function w(H,z,$){for(let f=0;f<16;f++)H[f]=z[f]+$[f]}function g(H,z,$){for(let f=0;f<16;f++)H[f]=z[f]-$[f]}function u(H,z,$){let f,T,se=0,le=0,Se=0,He=0,Ve=0,je=0,yt=0,_t=0,Me=0,Oe=0,Re=0,$e=0,qe=0,Pe=0,Ue=0,De=0,Ae=0,Be=0,xe=0,ke=0,Ge=0,et=0,tt=0,Je=0,rr=0,lr=0,Yr=0,nr=0,sn=0,vn=0,Un=0,Dt=$[0],vt=$[1],St=$[2],Ot=$[3],wt=$[4],mt=$[5],Ft=$[6],jt=$[7],It=$[8],Lt=$[9],xt=$[10],Tt=$[11],Pt=$[12],ht=$[13],Mt=$[14],qt=$[15];f=z[0],se+=f*Dt,le+=f*vt,Se+=f*St,He+=f*Ot,Ve+=f*wt,je+=f*mt,yt+=f*Ft,_t+=f*jt,Me+=f*It,Oe+=f*Lt,Re+=f*xt,$e+=f*Tt,qe+=f*Pt,Pe+=f*ht,Ue+=f*Mt,De+=f*qt,f=z[1],le+=f*Dt,Se+=f*vt,He+=f*St,Ve+=f*Ot,je+=f*wt,yt+=f*mt,_t+=f*Ft,Me+=f*jt,Oe+=f*It,Re+=f*Lt,$e+=f*xt,qe+=f*Tt,Pe+=f*Pt,Ue+=f*ht,De+=f*Mt,Ae+=f*qt,f=z[2],Se+=f*Dt,He+=f*vt,Ve+=f*St,je+=f*Ot,yt+=f*wt,_t+=f*mt,Me+=f*Ft,Oe+=f*jt,Re+=f*It,$e+=f*Lt,qe+=f*xt,Pe+=f*Tt,Ue+=f*Pt,De+=f*ht,Ae+=f*Mt,Be+=f*qt,f=z[3],He+=f*Dt,Ve+=f*vt,je+=f*St,yt+=f*Ot,_t+=f*wt,Me+=f*mt,Oe+=f*Ft,Re+=f*jt,$e+=f*It,qe+=f*Lt,Pe+=f*xt,Ue+=f*Tt,De+=f*Pt,Ae+=f*ht,Be+=f*Mt,xe+=f*qt,f=z[4],Ve+=f*Dt,je+=f*vt,yt+=f*St,_t+=f*Ot,Me+=f*wt,Oe+=f*mt,Re+=f*Ft,$e+=f*jt,qe+=f*It,Pe+=f*Lt,Ue+=f*xt,De+=f*Tt,Ae+=f*Pt,Be+=f*ht,xe+=f*Mt,ke+=f*qt,f=z[5],je+=f*Dt,yt+=f*vt,_t+=f*St,Me+=f*Ot,Oe+=f*wt,Re+=f*mt,$e+=f*Ft,qe+=f*jt,Pe+=f*It,Ue+=f*Lt,De+=f*xt,Ae+=f*Tt,Be+=f*Pt,xe+=f*ht,ke+=f*Mt,Ge+=f*qt,f=z[6],yt+=f*Dt,_t+=f*vt,Me+=f*St,Oe+=f*Ot,Re+=f*wt,$e+=f*mt,qe+=f*Ft,Pe+=f*jt,Ue+=f*It,De+=f*Lt,Ae+=f*xt,Be+=f*Tt,xe+=f*Pt,ke+=f*ht,Ge+=f*Mt,et+=f*qt,f=z[7],_t+=f*Dt,Me+=f*vt,Oe+=f*St,Re+=f*Ot,$e+=f*wt,qe+=f*mt,Pe+=f*Ft,Ue+=f*jt,De+=f*It,Ae+=f*Lt,Be+=f*xt,xe+=f*Tt,ke+=f*Pt,Ge+=f*ht,et+=f*Mt,tt+=f*qt,f=z[8],Me+=f*Dt,Oe+=f*vt,Re+=f*St,$e+=f*Ot,qe+=f*wt,Pe+=f*mt,Ue+=f*Ft,De+=f*jt,Ae+=f*It,Be+=f*Lt,xe+=f*xt,ke+=f*Tt,Ge+=f*Pt,et+=f*ht,tt+=f*Mt,Je+=f*qt,f=z[9],Oe+=f*Dt,Re+=f*vt,$e+=f*St,qe+=f*Ot,Pe+=f*wt,Ue+=f*mt,De+=f*Ft,Ae+=f*jt,Be+=f*It,xe+=f*Lt,ke+=f*xt,Ge+=f*Tt,et+=f*Pt,tt+=f*ht,Je+=f*Mt,rr+=f*qt,f=z[10],Re+=f*Dt,$e+=f*vt,qe+=f*St,Pe+=f*Ot,Ue+=f*wt,De+=f*mt,Ae+=f*Ft,Be+=f*jt,xe+=f*It,ke+=f*Lt,Ge+=f*xt,et+=f*Tt,tt+=f*Pt,Je+=f*ht,rr+=f*Mt,lr+=f*qt,f=z[11],$e+=f*Dt,qe+=f*vt,Pe+=f*St,Ue+=f*Ot,De+=f*wt,Ae+=f*mt,Be+=f*Ft,xe+=f*jt,ke+=f*It,Ge+=f*Lt,et+=f*xt,tt+=f*Tt,Je+=f*Pt,rr+=f*ht,lr+=f*Mt,Yr+=f*qt,f=z[12],qe+=f*Dt,Pe+=f*vt,Ue+=f*St,De+=f*Ot,Ae+=f*wt,Be+=f*mt,xe+=f*Ft,ke+=f*jt,Ge+=f*It,et+=f*Lt,tt+=f*xt,Je+=f*Tt,rr+=f*Pt,lr+=f*ht,Yr+=f*Mt,nr+=f*qt,f=z[13],Pe+=f*Dt,Ue+=f*vt,De+=f*St,Ae+=f*Ot,Be+=f*wt,xe+=f*mt,ke+=f*Ft,Ge+=f*jt,et+=f*It,tt+=f*Lt,Je+=f*xt,rr+=f*Tt,lr+=f*Pt,Yr+=f*ht,nr+=f*Mt,sn+=f*qt,f=z[14],Ue+=f*Dt,De+=f*vt,Ae+=f*St,Be+=f*Ot,xe+=f*wt,ke+=f*mt,Ge+=f*Ft,et+=f*jt,tt+=f*It,Je+=f*Lt,rr+=f*xt,lr+=f*Tt,Yr+=f*Pt,nr+=f*ht,sn+=f*Mt,vn+=f*qt,f=z[15],De+=f*Dt,Ae+=f*vt,Be+=f*St,xe+=f*Ot,ke+=f*wt,Ge+=f*mt,et+=f*Ft,tt+=f*jt,Je+=f*It,rr+=f*Lt,lr+=f*xt,Yr+=f*Tt,nr+=f*Pt,sn+=f*ht,vn+=f*Mt,Un+=f*qt,se+=38*Ae,le+=38*Be,Se+=38*xe,He+=38*ke,Ve+=38*Ge,je+=38*et,yt+=38*tt,_t+=38*Je,Me+=38*rr,Oe+=38*lr,Re+=38*Yr,$e+=38*nr,qe+=38*sn,Pe+=38*vn,Ue+=38*Un,T=1,f=se+T+65535,T=Math.floor(f/65536),se=f-T*65536,f=le+T+65535,T=Math.floor(f/65536),le=f-T*65536,f=Se+T+65535,T=Math.floor(f/65536),Se=f-T*65536,f=He+T+65535,T=Math.floor(f/65536),He=f-T*65536,f=Ve+T+65535,T=Math.floor(f/65536),Ve=f-T*65536,f=je+T+65535,T=Math.floor(f/65536),je=f-T*65536,f=yt+T+65535,T=Math.floor(f/65536),yt=f-T*65536,f=_t+T+65535,T=Math.floor(f/65536),_t=f-T*65536,f=Me+T+65535,T=Math.floor(f/65536),Me=f-T*65536,f=Oe+T+65535,T=Math.floor(f/65536),Oe=f-T*65536,f=Re+T+65535,T=Math.floor(f/65536),Re=f-T*65536,f=$e+T+65535,T=Math.floor(f/65536),$e=f-T*65536,f=qe+T+65535,T=Math.floor(f/65536),qe=f-T*65536,f=Pe+T+65535,T=Math.floor(f/65536),Pe=f-T*65536,f=Ue+T+65535,T=Math.floor(f/65536),Ue=f-T*65536,f=De+T+65535,T=Math.floor(f/65536),De=f-T*65536,se+=T-1+37*(T-1),T=1,f=se+T+65535,T=Math.floor(f/65536),se=f-T*65536,f=le+T+65535,T=Math.floor(f/65536),le=f-T*65536,f=Se+T+65535,T=Math.floor(f/65536),Se=f-T*65536,f=He+T+65535,T=Math.floor(f/65536),He=f-T*65536,f=Ve+T+65535,T=Math.floor(f/65536),Ve=f-T*65536,f=je+T+65535,T=Math.floor(f/65536),je=f-T*65536,f=yt+T+65535,T=Math.floor(f/65536),yt=f-T*65536,f=_t+T+65535,T=Math.floor(f/65536),_t=f-T*65536,f=Me+T+65535,T=Math.floor(f/65536),Me=f-T*65536,f=Oe+T+65535,T=Math.floor(f/65536),Oe=f-T*65536,f=Re+T+65535,T=Math.floor(f/65536),Re=f-T*65536,f=$e+T+65535,T=Math.floor(f/65536),$e=f-T*65536,f=qe+T+65535,T=Math.floor(f/65536),qe=f-T*65536,f=Pe+T+65535,T=Math.floor(f/65536),Pe=f-T*65536,f=Ue+T+65535,T=Math.floor(f/65536),Ue=f-T*65536,f=De+T+65535,T=Math.floor(f/65536),De=f-T*65536,se+=T-1+37*(T-1),H[0]=se,H[1]=le,H[2]=Se,H[3]=He,H[4]=Ve,H[5]=je,H[6]=yt,H[7]=_t,H[8]=Me,H[9]=Oe,H[10]=Re,H[11]=$e,H[12]=qe,H[13]=Pe,H[14]=Ue,H[15]=De}function b(H,z){u(H,z,z)}function K(H,z){const $=o();let f;for(f=0;f<16;f++)$[f]=z[f];for(f=253;f>=0;f--)b($,$),f!==2&&f!==4&&u($,$,z);for(f=0;f<16;f++)H[f]=$[f]}function k(H,z){const $=o();let f;for(f=0;f<16;f++)$[f]=z[f];for(f=250;f>=0;f--)b($,$),f!==1&&u($,$,z);for(f=0;f<16;f++)H[f]=$[f]}function oe(H,z){const $=o(),f=o(),T=o(),se=o(),le=o(),Se=o(),He=o(),Ve=o(),je=o();g($,H[1],H[0]),g(je,z[1],z[0]),u($,$,je),w(f,H[0],H[1]),w(je,z[0],z[1]),u(f,f,je),u(T,H[3],z[3]),u(T,T,_),u(se,H[2],z[2]),w(se,se,se),g(le,f,$),g(Se,se,T),w(He,se,T),w(Ve,f,$),u(H[0],le,Se),u(H[1],Ve,He),u(H[2],He,Se),u(H[3],le,Ve)}function ce(H,z,$){for(let f=0;f<4;f++)q(H[f],z[f],$)}function ge(H,z){const $=o(),f=o(),T=o();K(T,z[2]),u($,z[0],T),u(f,z[1],T),L(H,f),H[31]^=E($)<<7}function U(H,z,$){C(H[0],l),C(H[1],d),C(H[2],d),C(H[3],l);for(let f=255;f>=0;--f){const T=$[f/8|0]>>(f&7)&1;ce(H,z,T),oe(z,H),oe(H,H),ce(H,z,T)}}function B(H,z){const $=[o(),o(),o(),o()];C($[0],S),C($[1],P),C($[2],d),u($[3],S,P),U(H,$,z)}function fe(H){if(H.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const z=(0,t.hash)(H);z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(32),f=[o(),o(),o(),o()];B(f,z),ge($,f);const T=new Uint8Array(64);return T.set(H),T.set($,32),{publicKey:$,secretKey:T}}n.generateKeyPairFromSeed=fe;function re(H){const z=(0,e.randomBytes)(32,H),$=fe(z);return(0,s.wipe)(z),$}n.generateKeyPair=re;function G(H){if(H.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}n.extractPublicKeyFromSecretKey=G;const te=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(H,z){let $,f,T,se;for(f=63;f>=32;--f){for($=0,T=f-32,se=f-12;T<se;++T)z[T]+=$-16*z[f]*te[T-(f-32)],$=Math.floor((z[T]+128)/256),z[T]-=$*256;z[T]+=$,z[f]=0}for($=0,T=0;T<32;T++)z[T]+=$-(z[31]>>4)*te[T],$=z[T]>>8,z[T]&=255;for(T=0;T<32;T++)z[T]-=$*te[T];for(f=0;f<32;f++)z[f+1]+=z[f]>>8,H[f]=z[f]&255}function ne(H){const z=new Float64Array(64);for(let $=0;$<64;$++)z[$]=H[$];for(let $=0;$<64;$++)H[$]=0;Y(H,z)}function Ie(H,z){const $=new Float64Array(64),f=[o(),o(),o(),o()],T=(0,t.hash)(H.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const se=new Uint8Array(64);se.set(T.subarray(32),32);const le=new t.SHA512;le.update(se.subarray(32)),le.update(z);const Se=le.digest();le.clean(),ne(Se),B(f,Se),ge(se,f),le.reset(),le.update(se.subarray(0,32)),le.update(H.subarray(32)),le.update(z);const He=le.digest();ne(He);for(let Ve=0;Ve<32;Ve++)$[Ve]=Se[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)$[Ve+je]+=He[Ve]*T[je];return Y(se.subarray(32),$),se}n.sign=Ie;function ie(H,z){const $=o(),f=o(),T=o(),se=o(),le=o(),Se=o(),He=o();return C(H[2],d),v(H[1],z),b(T,H[1]),u(se,T,m),g(T,T,H[2]),w(se,H[2],se),b(le,se),b(Se,le),u(He,Se,le),u($,He,T),u($,$,se),k($,$),u($,$,T),u($,$,se),u($,$,se),u(H[0],$,se),b(f,H[0]),u(f,f,se),p(f,T)&&u(H[0],H[0],x),b(f,H[0]),u(f,f,se),p(f,T)?-1:(E(H[0])===z[31]>>7&&g(H[0],l,H[0]),u(H[3],H[0],H[1]),0)}function be(H,z,$){const f=new Uint8Array(32),T=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if($.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ie(se,H))return!1;const le=new t.SHA512;le.update($.subarray(0,32)),le.update(H),le.update(z);const Se=le.digest();return ne(Se),U(T,se,Se),B(se,$.subarray(32)),oe(T,se),ge(f,T),!Q($,f)}n.verify=be;function he(H){let z=[o(),o(),o(),o()];if(ie(z,H))throw new Error("Ed25519: invalid public key");let $=o(),f=o(),T=z[1];w($,d,T),g(f,d,T),K(f,f),u($,$,f);let se=new Uint8Array(32);return L(se,$),se}n.convertPublicKeyToX25519=he;function ve(H){const z=(0,t.hash)(H.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(z.subarray(0,32));return(0,s.wipe)(z),$}n.convertSecretKeyToX25519=ve})(Hu);const J3="EdDSA",X3="JWT",pp=".",gp="base64url",Q3="utf8",Z3="utf8",eD=":",tD="did",rD="key",Fl="base58btc",nD="z",iD="K36",sD=32;function Bo(n){return fr(mr(ws(n),Q3),gp)}function yp(n){const e=mr(iD,Fl),t=nD+fr(iu([e,n]),Fl);return[tD,rD,t].join(eD)}function oD(n){return fr(n,gp)}function aD(n){return mr([Bo(n.header),Bo(n.payload)].join(pp),Z3)}function cD(n){return[Bo(n.header),Bo(n.payload),oD(n.signature)].join(pp)}function jl(n=Ni.randomBytes(sD)){return Hu.generateKeyPairFromSeed(n)}async function uD(n,e,t,s,o=_e.fromMiliseconds(Date.now())){const c={alg:J3,typ:X3},l=yp(s.publicKey),d=o+t,m={iss:l,sub:n,aud:e,iat:o,exp:d},_=aD({header:c,payload:m}),S=Hu.sign(s.secretKey,_);return cD({header:c,payload:m,signature:S})}var Ll=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return n.concat(c||Array.prototype.slice.call(e))},hD=function(){function n(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return n}(),fD=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=ti.platform}return n}(),lD=function(){function n(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return n}(),dD=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),pD=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),gD=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,yD=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ml=3,_D=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gD]],ql=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function vD(n){return n?zl(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new pD:typeof navigator<"u"?zl(navigator.userAgent):wD()}function mD(n){return n!==""&&_D.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(n);return!!c&&[s,c]},!1)}function zl(n){var e=mD(n);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new dD;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Ml&&(o=Ll(Ll([],o,!0),ED(Ml-o.length),!0)):o=[];var c=o.join("."),l=bD(n),d=yD.exec(n);return d&&d[1]?new lD(t,c,l,d[1]):new hD(t,c,l)}function bD(n){for(var e=0,t=ql.length;e<t;e++){var s=ql[e],o=s[0],c=s[1],l=c.exec(n);if(l)return o}return null}function wD(){var n=typeof ti<"u"&&ti.version;return n?new fD(ti.version.slice(1)):null}function ED(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=vp=lt.getLocation=lt.getLocationOrThrow=Bu=lt.getNavigator=lt.getNavigatorOrThrow=_p=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ii(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=ii;function Ui(n){const e=ii(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=Ui;function DD(){return Ui("document")}lt.getDocumentOrThrow=DD;function SD(){return ii("document")}var _p=lt.getDocument=SD;function OD(){return Ui("navigator")}lt.getNavigatorOrThrow=OD;function ID(){return ii("navigator")}var Bu=lt.getNavigator=ID;function xD(){return Ui("location")}lt.getLocationOrThrow=xD;function PD(){return ii("location")}var vp=lt.getLocation=PD;function AD(){return Ui("crypto")}lt.getCryptoOrThrow=AD;function CD(){return ii("crypto")}lt.getCrypto=CD;function TD(){return Ui("localStorage")}lt.getLocalStorageOrThrow=TD;function ND(){return ii("localStorage")}lt.getLocalStorage=ND;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});var mp=Ku.getWindowMetadata=void 0;const Hl=lt;function RD(){let n,e;try{n=Hl.getDocumentOrThrow(),e=Hl.getLocationOrThrow()}catch{return null}function t(){const P=n.getElementsByTagName("link"),x=[];for(let C=0;C<P.length;C++){const R=P[C],q=R.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=R.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Q=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Q+=L;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");Q+=E+"/"+L}x.push(Q)}else if(L.indexOf("//")===0){const Q=e.protocol+L;x.push(Q)}else x.push(L)}}return x}function s(...P){const x=n.getElementsByTagName("meta");for(let C=0;C<x.length;C++){const R=x[C],q=["itemprop","property","name"].map(L=>R.getAttribute(L)).filter(L=>L?P.includes(L):!1);if(q.length&&q){const L=R.getAttribute("content");if(L)return L}}return""}function o(){let P=s("name","og:site_name","og:title","twitter:title");return P||(P=n.title),P}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),m=e.origin,_=t();return{description:d,url:m,icons:_,name:l}}mp=Ku.getWindowMetadata=RD;var Es={};(function(n){const e=Cu,t=Tu,s=Au,o=qu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[",g,"]"].join("")]:[...v,[S(E,p),"[",S(g,p),"]=",S(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[]"].join("")]:[...v,[S(E,p),"[]=",S(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),":list="].join("")]:[...v,[S(E,p),":list=",S(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[S(v,p),E,S(g,p)].join("")]:[[w,S(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,S(E,p)]:[...v,[S(E,p),"=",S(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&P(w,p).includes(p.arrayFormatSeparator);w=b?P(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(k=>P(k,p)):w===null?w:P(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&P(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>P(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function P(p,E){return E.decode?t(p):p}function x(p){return Array.isArray(p)?p.sort():typeof p=="object"?x(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function q(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function L(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Q(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:P(b,E),v(P(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=L(u[b],E);else w[g]=L(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=x(b):g[u]=b,g},Object.create(null))}n.extract=q,n.parse=Q,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=d(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?S(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?S(b,E)+"[]":K.reduce(w(b),[]).join("&"):S(b,E)+"="+S(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Q(q(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:P(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[l]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[l]?S(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(Es);function bp(n,e){return n.includes(":")?[n]:e.chains||[]}const wp="base10",hr="base16",vu="base64pad",Vu="utf8",Ep=0,si=1,$D=0,Bl=1,mu=12,ku=32;function UD(){const n=ju.generateKeyPair();return{privateKey:fr(n.secretKey,hr),publicKey:fr(n.publicKey,hr)}}function bu(){const n=Ni.randomBytes(ku);return fr(n,hr)}function FD(n,e){const t=ju.sharedKey(mr(n,hr),mr(e,hr)),s=new mb(ra.SHA256,t).expand(ku);return fr(s,hr)}function jD(n){const e=ra.hash(mr(n,hr));return fr(e,hr)}function Ti(n){const e=ra.hash(mr(n,Vu));return fr(e,hr)}function LD(n){return mr(`${n}`,wp)}function xs(n){return Number(fr(n,wp))}function MD(n){const e=LD(typeof n.type<"u"?n.type:Ep);if(xs(e)===si&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?mr(n.senderPublicKey,hr):void 0,s=typeof n.iv<"u"?mr(n.iv,hr):Ni.randomBytes(mu),o=new Uu.ChaCha20Poly1305(mr(n.symKey,hr)).seal(s,mr(n.message,Vu));return zD({type:e,sealed:o,iv:s,senderPublicKey:t})}function qD(n){const e=new Uu.ChaCha20Poly1305(mr(n.symKey,hr)),{sealed:t,iv:s}=Ko(n.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return fr(o,Vu)}function zD(n){if(xs(n.type)===si){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(iu([n.type,n.senderPublicKey,n.iv,n.sealed]),vu)}return fr(iu([n.type,n.iv,n.sealed]),vu)}function Ko(n){const e=mr(n,vu),t=e.slice($D,Bl),s=Bl;if(xs(t)===si){const d=s+ku,m=d+mu,_=e.slice(s,d),S=e.slice(d,m),P=e.slice(m);return{type:t,sealed:P,iv:S,senderPublicKey:_}}const o=s+mu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function HD(n,e){const t=Ko(n);return Dp({type:xs(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?fr(t.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Dp(n){const e=(n==null?void 0:n.type)||Ep;if(e===si){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Kl(n){return n.type===si&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var BD=Object.defineProperty,Vl=Object.getOwnPropertySymbols,KD=Object.prototype.hasOwnProperty,VD=Object.prototype.propertyIsEnumerable,kl=(n,e,t)=>e in n?BD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wl=(n,e)=>{for(var t in e||(e={}))KD.call(e,t)&&kl(n,t,e[t]);if(Vl)for(var t of Vl(e))VD.call(e,t)&&kl(n,t,e[t]);return n};const kD="ReactNative",Cn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},WD="js";function Wu(){return typeof ti<"u"&&typeof ti.versions<"u"&&typeof ti.versions.node<"u"}function Sp(){return!_p()&&!!Bu()&&navigator.product===kD}function Gu(){return!Wu()&&!!Bu()}function Yu(){return Sp()?Cn.reactNative:Wu()?Cn.node:Gu()?Cn.browser:Cn.unknown}function GD(n,e){let t=Es.parse(n);return t=Wl(Wl({},t),e),n=Es.stringify(t),n}function YD(){return mp()||{name:"",description:"",url:"",icons:[""]}}function JD(){if(Yu()===Cn.reactNative&&typeof Lr<"u"&&typeof(Lr==null?void 0:Lr.Platform)<"u"){const{OS:t,Version:s}=Lr.Platform;return[t,s].join("-")}const n=vD();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function XD(){var n;const e=Yu();return e===Cn.browser?[e,((n=vp())==null?void 0:n.host)||"unknown"].join(":"):e}function QD(n,e,t){const s=JD(),o=XD();return[[n,e].join("-"),[WD,t].join("-"),s,o].join("/")}function ZD({protocol:n,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l}){const d=t.split("?"),m=QD(n,e,s),_={auth:o,ua:m,projectId:c,useOnCloseEvent:l||void 0},S=GD(d[1]||"",_);return d[0]+"?"+S}function ei(n,e){return n.filter(t=>e.includes(t)).length===n.length}function Op(n){return Object.fromEntries(n.entries())}function Ip(n){return new Map(Object.entries(n))}function Ci(n=_e.FIVE_MINUTES,e){const t=_e.toMiliseconds(n||_e.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,d)=>{c=setTimeout(()=>{d(new Error(e))},t),s=l,o=d})}}function Vo(n,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await n;s(l)}catch(l){o(l)}clearTimeout(c)})}function xp(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function eS(n){return xp("topic",n)}function tS(n){return xp("id",n)}function Pp(n){const[e,t]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(n,e){return _e.fromMiliseconds((e||Date.now())+_e.toMiliseconds(n))}function An(n){return Date.now()>=_e.toMiliseconds(n)}function Bt(n,e){return`${n}${e?`:${e}`:""}`}async function rS({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${n}&sessionTopic=${e}`,l=Yu();l===Cn.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===Cn.reactNative&&typeof(Lr==null?void 0:Lr.Linking)<"u"&&await Lr.Linking.openURL(c)}catch(s){console.error(s)}}const nS="irn";function wu(n){return(n==null?void 0:n.relay)||{protocol:nS}}function Lo(n){const e=uE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var iS=Object.defineProperty,Gl=Object.getOwnPropertySymbols,sS=Object.prototype.hasOwnProperty,oS=Object.prototype.propertyIsEnumerable,Yl=(n,e,t)=>e in n?iS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,aS=(n,e)=>{for(var t in e||(e={}))sS.call(e,t)&&Yl(n,t,e[t]);if(Gl)for(var t of Gl(e))oS.call(e,t)&&Yl(n,t,e[t]);return n};function cS(n,e="-"){const t={},s="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=n[o];t[c]=l}}),t}function uS(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),o=n.substring(e+1,t).split("@"),c=typeof t<"u"?n.substring(t):"",l=Es.parse(c);return{protocol:s,topic:hS(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:cS(l)}}function hS(n){return n.startsWith("//")?n.substring(2):n}function fS(n,e="-"){const t="relay",s={};return Object.keys(n).forEach(o=>{const c=t+e+o;n[o]&&(s[c]=n[o])}),s}function lS(n){return`${n.protocol}:${n.topic}@${n.version}?`+Es.stringify(aS({symKey:n.symKey},fS(n.relay)))}function Fi(n){const e=[];return n.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function dS(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Fi(t.accounts))}),e}function pS(n,e){const t=[];return Object.values(n).forEach(s=>{Fi(s.accounts).includes(e)&&t.push(...s.methods)}),t}function gS(n,e){const t=[];return Object.values(n).forEach(s=>{Fi(s.accounts).includes(e)&&t.push(...s.events)}),t}function yS(n,e){const t=Mo(n,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(n))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}const _S={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},vS={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(n,e){const{message:t,code:s}=vS[n];return{message:e?`${t} ${e}`:t,code:s}}function Gt(n,e){const{message:t,code:s}=_S[n];return{message:e?`${t} ${e}`:t,code:s}}function Ps(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function ys(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ur(n){return typeof n>"u"}function Yt(n,e){return e&&ur(n)?!0:typeof n=="string"&&!!n.trim().length}function Ju(n,e){return e&&ur(n)?!0:typeof n=="number"&&!isNaN(n)}function mS(n,e){const{requiredNamespaces:t}=e,s=Object.keys(n.namespaces),o=Object.keys(t);let c=!0;return ei(o,s)?(s.forEach(l=>{const{accounts:d,methods:m,events:_}=n.namespaces[l],S=Fi(d),P=t[l];(!ei(bp(l,P),S)||!ei(P.methods,m)||!ei(P.events,_))&&(c=!1)}),c):!1}function ko(n){return Yt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function bS(n){if(Yt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ko(t)}}return!1}function wS(n){if(Yt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function ES(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function DS(n){return n==null?void 0:n.topic}function SS(n,e){let t=null;return Yt(n==null?void 0:n.publicKey,!1)||(t=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Jl(n){let e=!0;return Ps(n)?n.length&&(e=n.every(t=>Yt(t,!1))):e=!1,e}function OS(n,e,t){let s=null;return Ps(e)&&e.length?e.forEach(o=>{s||ko(o)||(s=Gt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):ko(n)||(s=Gt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function IS(n,e,t){let s=null;return Object.entries(n).forEach(([o,c])=>{if(s)return;const l=OS(o,bp(o,c),`${e} ${t}`);l&&(s=l)}),s}function xS(n,e){let t=null;return Ps(n)?n.forEach(s=>{t||bS(s)||(t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function PS(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=xS(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function AS(n,e){let t=null;return Jl(n==null?void 0:n.methods)?Jl(n==null?void 0:n.events)||(t=Gt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Gt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Ap(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=AS(s,`${e}, namespace`);o&&(t=o)}),t}function CS(n,e,t){let s=null;if(n&&ys(n)){const o=Ap(n,e);o&&(s=o);const c=IS(n,e,t);c&&(s=c)}else s=ue("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Mo(n,e){let t=null;if(n&&ys(n)){const s=Ap(n,e);s&&(t=s);const o=PS(n,e);o&&(t=o)}else t=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Cp(n){return Yt(n.protocol,!0)}function TS(n,e){let t=!1;return e&&!n?t=!0:n&&Ps(n)&&n.length&&n.forEach(s=>{t=Cp(s)}),t}function NS(n){return typeof n=="number"}function vr(n){return typeof n<"u"&&typeof n!==null}function RS(n){return!(!n||typeof n!="object"||!n.code||!Ju(n.code,!1)||!n.message||!Yt(n.message,!1))}function $S(n){return!(ur(n)||!Yt(n.method,!1))}function US(n){return!(ur(n)||ur(n.result)&&ur(n.error)||!Ju(n.id,!1)||!Yt(n.jsonrpc,!1))}function FS(n){return!(ur(n)||!Yt(n.name,!1))}function Xl(n,e){return!(!ko(e)||!dS(n).includes(e))}function jS(n,e,t){return Yt(t,!1)?pS(n,e).includes(t):!1}function LS(n,e,t){return Yt(t,!1)?gS(n,e).includes(t):!1}function Ql(n,e,t){let s=null;const o=MS(n),c=qS(e),l=Object.keys(o),d=Object.keys(c),m=Zl(Object.keys(n)),_=Zl(Object.keys(e)),S=m.filter(P=>!_.includes(P));return S.length&&(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(e).toString()}`)),ei(l,d)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(P=>{if(!P.includes(":")||s)return;const x=Fi(e[P].accounts);x.includes(P)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${P}
        Required: ${P}
        Approved: ${x.toString()}`))}),l.forEach(P=>{s||(ei(o[P].methods,c[P].methods)?ei(o[P].events,c[P].events)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${P}`)):s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${P}`))}),s}function MS(n){const e={};return Object.keys(n).forEach(t=>{var s;t.includes(":")?e[t]=n[t]:(s=n[t].chains)==null||s.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function Zl(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function qS(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const s=Fi(n[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:n[t].accounts.filter(c=>c.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function zS(n,e){return Ju(n,!1)&&n<=e.max&&n>=e.min}class Rn extends Um{constructor(e){super(e),this.events=new qr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Yo(e.method,e.params||[],e.id||Nu().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Wr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Xo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const HS=()=>typeof Lr<"u"&&typeof Lr.WebSocket<"u"?Lr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),BS=()=>typeof window<"u",ed=n=>n.split("?")[0],td=10,KS=HS();class VS{constructor(e){if(this.url=e,this.events=new qr.EventEmitter,this.registering=!1,!ol(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ws(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!ol(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Nm.isReactNative()?void 0:{rejectUnauthorized:!Mm(e)},c=new KS(e,[],o);BS()?c.onerror=l=>{const d=l;s(this.emitError(d.error))}:c.on("error",l=>{s(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?zu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Jo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Ld(e,ed(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>td&&this.events.setMaxListeners(td)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ed(this.url)}`));return this.events.emit("register_error",t),t}}var Wo={exports:{}};Wo.exports;(function(n,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,d="[object Arguments]",m="[object Array]",_="[object AsyncFunction]",S="[object Boolean]",P="[object Date]",x="[object Error]",C="[object Function]",R="[object GeneratorFunction]",q="[object Map]",L="[object Number]",Q="[object Null]",p="[object Object]",E="[object Promise]",v="[object Proxy]",w="[object RegExp]",g="[object Set]",u="[object String]",b="[object Symbol]",K="[object Undefined]",k="[object WeakMap]",oe="[object ArrayBuffer]",ce="[object DataView]",ge="[object Float32Array]",U="[object Float64Array]",B="[object Int8Array]",fe="[object Int16Array]",re="[object Int32Array]",G="[object Uint8Array]",te="[object Uint8ClampedArray]",Y="[object Uint16Array]",ne="[object Uint32Array]",Ie=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,he={};he[ge]=he[U]=he[B]=he[fe]=he[re]=he[G]=he[te]=he[Y]=he[ne]=!0,he[d]=he[m]=he[oe]=he[S]=he[ce]=he[P]=he[x]=he[C]=he[q]=he[L]=he[p]=he[w]=he[g]=he[u]=he[k]=!1;var ve=typeof Zn=="object"&&Zn&&Zn.Object===Object&&Zn,H=typeof self=="object"&&self&&self.Object===Object&&self,z=ve||H||Function("return this")(),$=e&&!e.nodeType&&e,f=$&&!0&&n&&!n.nodeType&&n,T=f&&f.exports===$,se=T&&ve.process,le=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Se=le&&le.isTypedArray;function He(I,F){for(var Z=-1,de=I==null?0:I.length,at=0,Te=[];++Z<de;){var pt=I[Z];F(pt,Z,I)&&(Te[at++]=pt)}return Te}function Ve(I,F){for(var Z=-1,de=F.length,at=I.length;++Z<de;)I[at+Z]=F[Z];return I}function je(I,F){for(var Z=-1,de=I==null?0:I.length;++Z<de;)if(F(I[Z],Z,I))return!0;return!1}function yt(I,F){for(var Z=-1,de=Array(I);++Z<I;)de[Z]=F(Z);return de}function _t(I){return function(F){return I(F)}}function Me(I,F){return I.has(F)}function Oe(I,F){return I==null?void 0:I[F]}function Re(I){var F=-1,Z=Array(I.size);return I.forEach(function(de,at){Z[++F]=[at,de]}),Z}function $e(I,F){return function(Z){return I(F(Z))}}function qe(I){var F=-1,Z=Array(I.size);return I.forEach(function(de){Z[++F]=de}),Z}var Pe=Array.prototype,Ue=Function.prototype,De=Object.prototype,Ae=z["__core-js_shared__"],Be=Ue.toString,xe=De.hasOwnProperty,ke=function(){var I=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ge=De.toString,et=RegExp("^"+Be.call(xe).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?z.Buffer:void 0,Je=z.Symbol,rr=z.Uint8Array,lr=De.propertyIsEnumerable,Yr=Pe.splice,nr=Je?Je.toStringTag:void 0,sn=Object.getOwnPropertySymbols,vn=tt?tt.isBuffer:void 0,Un=$e(Object.keys,Object),Dt=br(z,"DataView"),vt=br(z,"Map"),St=br(z,"Promise"),Ot=br(z,"Set"),wt=br(z,"WeakMap"),mt=br(Object,"create"),Ft=an(Dt),jt=an(vt),It=an(St),Lt=an(Ot),xt=an(wt),Tt=Je?Je.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function ht(I){var F=-1,Z=I==null?0:I.length;for(this.clear();++F<Z;){var de=I[F];this.set(de[0],de[1])}}function Mt(){this.__data__=mt?mt(null):{},this.size=0}function qt(I){var F=this.has(I)&&delete this.__data__[I];return this.size-=F?1:0,F}function ua(I){var F=this.__data__;if(mt){var Z=F[I];return Z===s?void 0:Z}return xe.call(F,I)?F[I]:void 0}function ha(I){var F=this.__data__;return mt?F[I]!==void 0:xe.call(F,I)}function fa(I,F){var Z=this.__data__;return this.size+=this.has(I)?0:1,Z[I]=mt&&F===void 0?s:F,this}ht.prototype.clear=Mt,ht.prototype.delete=qt,ht.prototype.get=ua,ht.prototype.has=ha,ht.prototype.set=fa;function xr(I){var F=-1,Z=I==null?0:I.length;for(this.clear();++F<Z;){var de=I[F];this.set(de[0],de[1])}}function la(){this.__data__=[],this.size=0}function da(I){var F=this.__data__,Z=Fn(F,I);if(Z<0)return!1;var de=F.length-1;return Z==de?F.pop():Yr.call(F,Z,1),--this.size,!0}function pa(I){var F=this.__data__,Z=Fn(F,I);return Z<0?void 0:F[Z][1]}function ga(I){return Fn(this.__data__,I)>-1}function ya(I,F){var Z=this.__data__,de=Fn(Z,I);return de<0?(++this.size,Z.push([I,F])):Z[de][1]=F,this}xr.prototype.clear=la,xr.prototype.delete=da,xr.prototype.get=pa,xr.prototype.has=ga,xr.prototype.set=ya;function on(I){var F=-1,Z=I==null?0:I.length;for(this.clear();++F<Z;){var de=I[F];this.set(de[0],de[1])}}function ci(){this.size=0,this.__data__={hash:new ht,map:new(vt||xr),string:new ht}}function _a(I){var F=mn(this,I).delete(I);return this.size-=F?1:0,F}function ui(I){return mn(this,I).get(I)}function va(I){return mn(this,I).has(I)}function ma(I,F){var Z=mn(this,I),de=Z.size;return Z.set(I,F),this.size+=Z.size==de?0:1,this}on.prototype.clear=ci,on.prototype.delete=_a,on.prototype.get=ui,on.prototype.has=va,on.prototype.set=ma;function hi(I){var F=-1,Z=I==null?0:I.length;for(this.__data__=new on;++F<Z;)this.add(I[F])}function Cs(I){return this.__data__.set(I,s),this}function Ts(I){return this.__data__.has(I)}hi.prototype.add=hi.prototype.push=Cs,hi.prototype.has=Ts;function zr(I){var F=this.__data__=new xr(I);this.size=F.size}function ba(){this.__data__=new xr,this.size=0}function wa(I){var F=this.__data__,Z=F.delete(I);return this.size=F.size,Z}function Ea(I){return this.__data__.get(I)}function Da(I){return this.__data__.has(I)}function Ns(I,F){var Z=this.__data__;if(Z instanceof xr){var de=Z.__data__;if(!vt||de.length<t-1)return de.push([I,F]),this.size=++Z.size,this;Z=this.__data__=new on(de)}return Z.set(I,F),this.size=Z.size,this}zr.prototype.clear=ba,zr.prototype.delete=wa,zr.prototype.get=Ea,zr.prototype.has=Da,zr.prototype.set=Ns;function Rs(I,F){var Z=di(I),de=!Z&&Vs(I),at=!Z&&!de&&qi(I),Te=!Z&&!de&&!at&&Gs(I),pt=Z||de||at||Te,zt=pt?yt(I.length,String):[],Xe=zt.length;for(var ct in I)(F||xe.call(I,ct))&&!(pt&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||qs(ct,Xe)))&&zt.push(ct);return zt}function Fn(I,F){for(var Z=I.length;Z--;)if(Ks(I[Z][0],F))return Z;return-1}function Li(I,F,Z){var de=F(I);return di(I)?de:Ve(de,Z(I))}function jn(I){return I==null?I===void 0?K:Q:nr&&nr in Object(I)?Ls(I):Ia(I)}function Mi(I){return Mn(I)&&jn(I)==d}function Ln(I,F,Z,de,at){return I===F?!0:I==null||F==null||!Mn(I)&&!Mn(F)?I!==I&&F!==F:$s(I,F,Z,de,Ln,at)}function $s(I,F,Z,de,at,Te){var pt=di(I),zt=di(F),Xe=pt?m:Jr(I),ct=zt?m:Jr(F);Xe=Xe==d?p:Xe,ct=ct==d?p:ct;var Nt=Xe==p,dr=ct==p,Ht=Xe==ct;if(Ht&&qi(I)){if(!qi(F))return!1;pt=!0,Nt=!1}if(Ht&&!Nt)return Te||(Te=new zr),pt||Gs(I)?fi(I,F,Z,de,at,Te):Oa(I,F,Xe,Z,de,at,Te);if(!(Z&o)){var gt=Nt&&xe.call(I,"__wrapped__"),ir=dr&&xe.call(F,"__wrapped__");if(gt||ir){var Hr=gt?I.value():I,Pr=ir?F.value():F;return Te||(Te=new zr),at(Hr,Pr,Z,de,Te)}}return Ht?(Te||(Te=new zr),js(I,F,Z,de,at,Te)):!1}function Sa(I){if(!Ws(I)||Hs(I))return!1;var F=pi(I)?et:ie;return F.test(an(I))}function Us(I){return Mn(I)&&ks(I.length)&&!!he[jn(I)]}function Fs(I){if(!Bs(I))return Un(I);var F=[];for(var Z in Object(I))xe.call(I,Z)&&Z!="constructor"&&F.push(Z);return F}function fi(I,F,Z,de,at,Te){var pt=Z&o,zt=I.length,Xe=F.length;if(zt!=Xe&&!(pt&&Xe>zt))return!1;var ct=Te.get(I);if(ct&&Te.get(F))return ct==F;var Nt=-1,dr=!0,Ht=Z&c?new hi:void 0;for(Te.set(I,F),Te.set(F,I);++Nt<zt;){var gt=I[Nt],ir=F[Nt];if(de)var Hr=pt?de(ir,gt,Nt,F,I,Te):de(gt,ir,Nt,I,F,Te);if(Hr!==void 0){if(Hr)continue;dr=!1;break}if(Ht){if(!je(F,function(Pr,Xr){if(!Me(Ht,Xr)&&(gt===Pr||at(gt,Pr,Z,de,Te)))return Ht.push(Xr)})){dr=!1;break}}else if(!(gt===ir||at(gt,ir,Z,de,Te))){dr=!1;break}}return Te.delete(I),Te.delete(F),dr}function Oa(I,F,Z,de,at,Te,pt){switch(Z){case ce:if(I.byteLength!=F.byteLength||I.byteOffset!=F.byteOffset)return!1;I=I.buffer,F=F.buffer;case oe:return!(I.byteLength!=F.byteLength||!Te(new rr(I),new rr(F)));case S:case P:case L:return Ks(+I,+F);case x:return I.name==F.name&&I.message==F.message;case w:case u:return I==F+"";case q:var zt=Re;case g:var Xe=de&o;if(zt||(zt=qe),I.size!=F.size&&!Xe)return!1;var ct=pt.get(I);if(ct)return ct==F;de|=c,pt.set(I,F);var Nt=fi(zt(I),zt(F),de,at,Te,pt);return pt.delete(I),Nt;case b:if(Pt)return Pt.call(I)==Pt.call(F)}return!1}function js(I,F,Z,de,at,Te){var pt=Z&o,zt=li(I),Xe=zt.length,ct=li(F),Nt=ct.length;if(Xe!=Nt&&!pt)return!1;for(var dr=Xe;dr--;){var Ht=zt[dr];if(!(pt?Ht in F:xe.call(F,Ht)))return!1}var gt=Te.get(I);if(gt&&Te.get(F))return gt==F;var ir=!0;Te.set(I,F),Te.set(F,I);for(var Hr=pt;++dr<Xe;){Ht=zt[dr];var Pr=I[Ht],Xr=F[Ht];if(de)var zi=pt?de(Xr,Pr,Ht,F,I,Te):de(Pr,Xr,Ht,I,F,Te);if(!(zi===void 0?Pr===Xr||at(Pr,Xr,Z,de,Te):zi)){ir=!1;break}Hr||(Hr=Ht=="constructor")}if(ir&&!Hr){var qn=I.constructor,kt=F.constructor;qn!=kt&&"constructor"in I&&"constructor"in F&&!(typeof qn=="function"&&qn instanceof qn&&typeof kt=="function"&&kt instanceof kt)&&(ir=!1)}return Te.delete(I),Te.delete(F),ir}function li(I){return Li(I,Aa,Ms)}function mn(I,F){var Z=I.__data__;return zs(F)?Z[typeof F=="string"?"string":"hash"]:Z.map}function br(I,F){var Z=Oe(I,F);return Sa(Z)?Z:void 0}function Ls(I){var F=xe.call(I,nr),Z=I[nr];try{I[nr]=void 0;var de=!0}catch{}var at=Ge.call(I);return de&&(F?I[nr]=Z:delete I[nr]),at}var Ms=sn?function(I){return I==null?[]:(I=Object(I),He(sn(I),function(F){return lr.call(I,F)}))}:ot,Jr=jn;(Dt&&Jr(new Dt(new ArrayBuffer(1)))!=ce||vt&&Jr(new vt)!=q||St&&Jr(St.resolve())!=E||Ot&&Jr(new Ot)!=g||wt&&Jr(new wt)!=k)&&(Jr=function(I){var F=jn(I),Z=F==p?I.constructor:void 0,de=Z?an(Z):"";if(de)switch(de){case Ft:return ce;case jt:return q;case It:return E;case Lt:return g;case xt:return k}return F});function qs(I,F){return F=F??l,!!F&&(typeof I=="number"||be.test(I))&&I>-1&&I%1==0&&I<F}function zs(I){var F=typeof I;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?I!=="__proto__":I===null}function Hs(I){return!!ke&&ke in I}function Bs(I){var F=I&&I.constructor,Z=typeof F=="function"&&F.prototype||De;return I===Z}function Ia(I){return Ge.call(I)}function an(I){if(I!=null){try{return Be.call(I)}catch{}try{return I+""}catch{}}return""}function Ks(I,F){return I===F||I!==I&&F!==F}var Vs=Mi(function(){return arguments}())?Mi:function(I){return Mn(I)&&xe.call(I,"callee")&&!lr.call(I,"callee")},di=Array.isArray;function xa(I){return I!=null&&ks(I.length)&&!pi(I)}var qi=vn||st;function Pa(I,F){return Ln(I,F)}function pi(I){if(!Ws(I))return!1;var F=jn(I);return F==C||F==R||F==_||F==v}function ks(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=l}function Ws(I){var F=typeof I;return I!=null&&(F=="object"||F=="function")}function Mn(I){return I!=null&&typeof I=="object"}var Gs=Se?_t(Se):Us;function Aa(I){return xa(I)?Rs(I):Fs(I)}function ot(){return[]}function st(){return!1}n.exports=Pa})(Wo,Wo.exports);var kS=Wo.exports;const WS=Cm(kS);function GS(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=n.length,m=n.charAt(0),_=Math.log(d)/Math.log(256),S=Math.log(256)/Math.log(d);function P(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var q=0,L=0,Q=0,p=R.length;Q!==p&&R[Q]===0;)Q++,q++;for(var E=(p-Q)*S+1>>>0,v=new Uint8Array(E);Q!==p;){for(var w=R[Q],g=0,u=E-1;(w!==0||g<L)&&u!==-1;u--,g++)w+=256*v[u]>>>0,v[u]=w%d>>>0,w=w/d>>>0;if(w!==0)throw new Error("Non-zero carry");L=g,Q++}for(var b=E-L;b!==E&&v[b]===0;)b++;for(var K=m.repeat(q);b<E;++b)K+=n.charAt(v[b]);return K}function x(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var q=0;if(R[q]!==" "){for(var L=0,Q=0;R[q]===m;)L++,q++;for(var p=(R.length-q)*_+1>>>0,E=new Uint8Array(p);R[q];){var v=t[R.charCodeAt(q)];if(v===255)return;for(var w=0,g=p-1;(v!==0||w<Q)&&g!==-1;g--,w++)v+=d*E[g]>>>0,E[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");Q=w,q++}if(R[q]!==" "){for(var u=p-Q;u!==p&&E[u]===0;)u++;for(var b=new Uint8Array(L+(p-u)),K=L;u!==p;)b[K++]=E[u++];return b}}}function C(R){var q=x(R);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:P,decodeUnsafe:x,decode:C}}var YS=GS,JS=YS;const Tp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},XS=n=>new TextEncoder().encode(n),QS=n=>new TextDecoder().decode(n);class ZS{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e6{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Np(this,e)}}class t6{constructor(e){this.decoders=e}or(e){return Np(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Np=(n,e)=>new t6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class r6{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new ZS(e,t,s),this.decoder=new e6(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const aa=({name:n,prefix:e,encode:t,decode:s})=>new r6(n,e,t,s),As=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=JS(t,e);return aa({prefix:n,name:e,encode:s,decode:c=>Tp(o(c))})},n6=(n,e,t,s)=>{const o={};for(let S=0;S<e.length;++S)o[e[S]]=S;let c=n.length;for(;n[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,m=0,_=0;for(let S=0;S<c;++S){const P=o[n[S]];if(P===void 0)throw new SyntaxError(`Non-${s} character`);m=m<<t|P,d+=t,d>=8&&(d-=8,l[_++]=255&m>>d)}if(d>=t||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return l},i6=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let m=0;m<n.length;++m)for(d=d<<8|n[m],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>aa({prefix:e,name:n,encode(o){return i6(o,s,t)},decode(o){return n6(o,s,t,n)}}),s6=aa({prefix:"\0",name:"identity",encode:n=>QS(n),decode:n=>XS(n)});var o6=Object.freeze({__proto__:null,identity:s6});const a6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var c6=Object.freeze({__proto__:null,base2:a6});const u6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var h6=Object.freeze({__proto__:null,base8:u6});const f6=As({prefix:"9",name:"base10",alphabet:"0123456789"});var l6=Object.freeze({__proto__:null,base10:f6});const d6=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),p6=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var g6=Object.freeze({__proto__:null,base16:d6,base16upper:p6});const y6=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_6=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),v6=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),m6=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b6=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w6=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),E6=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),D6=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),S6=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var O6=Object.freeze({__proto__:null,base32:y6,base32upper:_6,base32pad:v6,base32padupper:m6,base32hex:b6,base32hexupper:w6,base32hexpad:E6,base32hexpadupper:D6,base32z:S6});const I6=As({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x6=As({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var P6=Object.freeze({__proto__:null,base36:I6,base36upper:x6});const A6=As({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),C6=As({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var T6=Object.freeze({__proto__:null,base58btc:A6,base58flickr:C6});const N6=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),R6=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$6=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),U6=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var F6=Object.freeze({__proto__:null,base64:N6,base64pad:R6,base64url:$6,base64urlpad:U6});const Rp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),j6=Rp.reduce((n,e,t)=>(n[t]=e,n),[]),L6=Rp.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function M6(n){return n.reduce((e,t)=>(e+=j6[t],e),"")}function q6(n){const e=[];for(const t of n){const s=L6[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const z6=aa({prefix:"ðŸš€",name:"base256emoji",encode:M6,decode:q6});var H6=Object.freeze({__proto__:null,base256emoji:z6}),B6=$p,rd=128,K6=127,V6=~K6,k6=Math.pow(2,31);function $p(n,e,t){e=e||[],t=t||0;for(var s=t;n>=k6;)e[t++]=n&255|rd,n/=128;for(;n&V6;)e[t++]=n&255|rd,n>>>=7;return e[t]=n|0,$p.bytes=t-s+1,e}var W6=Eu,G6=128,nd=127;function Eu(n,s){var t=0,s=s||0,o=0,c=s,l,d=n.length;do{if(c>=d)throw Eu.bytes=0,new RangeError("Could not decode varint");l=n[c++],t+=o<28?(l&nd)<<o:(l&nd)*Math.pow(2,o),o+=7}while(l>=G6);return Eu.bytes=c-s,t}var Y6=Math.pow(2,7),J6=Math.pow(2,14),X6=Math.pow(2,21),Q6=Math.pow(2,28),Z6=Math.pow(2,35),e2=Math.pow(2,42),t2=Math.pow(2,49),r2=Math.pow(2,56),n2=Math.pow(2,63),i2=function(n){return n<Y6?1:n<J6?2:n<X6?3:n<Q6?4:n<Z6?5:n<e2?6:n<t2?7:n<r2?8:n<n2?9:10},s2={encode:B6,decode:W6,encodingLength:i2},Up=s2;const id=(n,e,t=0)=>(Up.encode(n,e,t),e),sd=n=>Up.encodingLength(n),Du=(n,e)=>{const t=e.byteLength,s=sd(n),o=s+sd(t),c=new Uint8Array(o+t);return id(n,c,0),id(t,c,s),c.set(e,o),new o2(n,t,e,c)};class o2{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Fp=({name:n,code:e,encode:t})=>new a2(n,e,t);class a2{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Du(this.code,t):t.then(s=>Du(this.code,s))}else throw Error("Unknown type, must be binary type")}}const jp=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),c2=Fp({name:"sha2-256",code:18,encode:jp("SHA-256")}),u2=Fp({name:"sha2-512",code:19,encode:jp("SHA-512")});var h2=Object.freeze({__proto__:null,sha256:c2,sha512:u2});const Lp=0,f2="identity",Mp=Tp,l2=n=>Du(Lp,Mp(n)),d2={code:Lp,name:f2,encode:Mp,digest:l2};var p2=Object.freeze({__proto__:null,identity:d2});new TextEncoder,new TextDecoder;const od={...o6,...c6,...h6,...l6,...g6,...O6,...P6,...T6,...F6,...H6};({...h2,...p2});function qp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function g2(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function zp(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const ad=zp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Bc=zp("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=g2(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),y2={utf8:ad,"utf-8":ad,hex:od.base16,latin1:Bc,ascii:Bc,binary:Bc,...od};function _2(n,e="utf8"){const t=y2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qp(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const Hp="wc",v2=2,Xu="core",Tn=`${Hp}@2:${Xu}:`,m2={name:Xu,logger:"error"},b2={database:":memory:"},w2="crypto",cd="client_ed25519_seed",E2=_e.ONE_DAY,D2="keychain",S2="0.3",O2="messages",I2="0.3",x2=_e.SIX_HOURS,P2="publisher",Bp="irn",A2="error",Kp="wss://relay.walletconnect.com",ud="wss://relay.walletconnect.org",C2="relayer",Ct={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},T2="_subscription",hs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},N2=_e.ONE_SECOND/2,R2="2.9.0",$2=1e4,U2="0.3",F2="WALLETCONNECT_CLIENT_ID",nn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},j2="subscription",L2="0.3",M2=_e.FIVE_SECONDS*1e3,q2="pairing",z2="0.3",fs={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},rn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},H2="history",B2="0.3",K2="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},V2="0.3",Kc="verify-api",hd="https://verify.walletconnect.com";class k2{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=D2,this.version=S2,this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ue("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Op(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ip(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class W2{constructor(e,t,s){this.core=e,this.logger=t,this.name=w2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=jl(o);return yp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=UD();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=jl(c),d=bu();return await uD(d,o,E2,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const d=this.getPrivateKey(o),m=FD(d,c);return this.setSymKey(m,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||jD(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const d=Dp(l),m=ws(c);if(Kl(d)){const x=d.senderPublicKey,C=d.receiverPublicKey;o=await this.generateSharedKey(x,C)}const _=this.getSymKey(o),{type:S,senderPublicKey:P}=d;return MD({type:S,symKey:_,message:m,senderPublicKey:P})},this.decode=async(o,c,l)=>{this.isInitialized();const d=HD(c,l);if(Kl(d)){const S=d.receiverPublicKey,P=d.senderPublicKey;o=await this.generateSharedKey(S,P)}const m=this.getSymKey(o),_=qD({symKey:m,encoded:c});return zu(_)},this.getPayloadType=o=>{const c=Ko(o);return xs(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Ko(o);return c.senderPublicKey?fr(c.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=s||new k2(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(cd)}catch{e=bu(),await this.keychain.set(cd,e)}return _2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class G2 extends M3{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=O2,this.version=I2,this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Ti(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=Ti(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Op(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ip(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Y2 extends q3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new qr.EventEmitter,this.name=P2,this.queue=new Map,this.publishTimeout=_e.toMiliseconds(_e.TEN_SECONDS),this.queueTimeout=_e.toMiliseconds(_e.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=(c==null?void 0:c.ttl)||x2,d=wu(c),m=(c==null?void 0:c.prompt)||!1,_=(c==null?void 0:c.tag)||0,S=(c==null?void 0:c.id)||Nu().toString(),P={topic:s,message:o,opts:{ttl:l,relay:d,prompt:m,tag:_,id:S}},x=setTimeout(()=>this.queue.set(S,P),this.queueTimeout);try{await await Vo(this.rpcPublish(s,o,l,d,m,_,S),this.publishTimeout),clearTimeout(x),this.relayer.events.emit(Ct.publish,P)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,l,d){var m,_,S,P;const x={method:Lo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:d};return ur((m=x.params)==null?void 0:m.prompt)&&((_=x.params)==null||delete _.prompt),ur((S=x.params)==null?void 0:S.tag)&&((P=x.params)==null||delete P.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:x}),this.relayer.request(x)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ct.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ct.message_ack,e=>{this.onPublish(e.id.toString())})}}class J2{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var X2=Object.defineProperty,Q2=Object.defineProperties,Z2=Object.getOwnPropertyDescriptors,fd=Object.getOwnPropertySymbols,e5=Object.prototype.hasOwnProperty,t5=Object.prototype.propertyIsEnumerable,ld=(n,e,t)=>e in n?X2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ls=(n,e)=>{for(var t in e||(e={}))e5.call(e,t)&&ld(n,t,e[t]);if(fd)for(var t of fd(e))t5.call(e,t)&&ld(n,t,e[t]);return n},Vc=(n,e)=>Q2(n,Z2(e));class r5 extends B3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new J2,this.events=new qr.EventEmitter,this.name=j2,this.version=L2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Tn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=wu(o),l={topic:s,relay:c};this.pending.set(s,l);const d=await this.rpcSubscribe(s,c);return this.onSubscribe(d,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),d}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new _e.Watch;l.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=M2&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=wu(s);await this.rpcUnsubscribe(e,t,o);const c=Gt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Lo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Vo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}return Ti(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Lo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Vo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Lo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Vc(ls({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ls({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ls({},t)),this.topicMap.set(t.topic,e),this.events.emit(nn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(nn.deleted,Vc(ls({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(nn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(nn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Ps(t)&&this.onBatchSubscribe(t.map((s,o)=>Vc(ls({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ct.connect,async()=>{await this.onConnect()}),this.relayer.on(Ct.disconnect,()=>{this.onDisconnect()}),this.events.on(nn.created,async e=>{const t=nn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(nn.deleted,async e=>{const t=nn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var n5=Object.defineProperty,dd=Object.getOwnPropertySymbols,i5=Object.prototype.hasOwnProperty,s5=Object.prototype.propertyIsEnumerable,pd=(n,e,t)=>e in n?n5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,o5=(n,e)=>{for(var t in e||(e={}))i5.call(e,t)&&pd(n,t,e[t]);if(dd)for(var t of dd(e))s5.call(e,t)&&pd(n,t,e[t]);return n};class a5 extends z3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new qr.EventEmitter,this.name=C2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||A2})),this.messages=new G2(this.logger,e.core),this.subscriber=new r5(this,this.logger),this.publisher=new Y2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Kp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ud}...`),await this.restartTransport(ud)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},$2)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(nn.created,l=>{l.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ct.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(nn.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Vo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Ct.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Ct.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Ct.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(hs.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Rn(new VS(ZD({sdkVersion:R2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),$u(e)){if(!e.method.endsWith(T2))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(o5({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Xo(e)&&this.events.emit(Ct.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ct.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Ru(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(hs.payload,e=>this.onProviderPayload(e)),this.provider.on(hs.connect,()=>{this.events.emit(Ct.connect)}),this.provider.on(hs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(hs.error,e=>{this.logger.error(e),this.events.emit(Ct.error,e)})}registerEventListeners(){this.events.on(Ct.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ct.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},_e.toMiliseconds(N2))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var c5=Object.defineProperty,gd=Object.getOwnPropertySymbols,u5=Object.prototype.hasOwnProperty,h5=Object.prototype.propertyIsEnumerable,yd=(n,e,t)=>e in n?c5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_d=(n,e)=>{for(var t in e||(e={}))u5.call(e,t)&&yd(n,t,e[t]);if(gd)for(var t of gd(e))h5.call(e,t)&&yd(n,t,e[t]);return n};class ca extends H3{constructor(e,t,s,o=Tn,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=U2,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ur(l)?this.map.set(this.getKey(l),l):ES(l)?this.map.set(l.id,l):DS(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,d)=>{this.isInitialized(),this.map.has(l)?await this.update(l,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:d}),this.map.set(l,d),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(d=>Object.keys(l).every(m=>WS(d[m],l[m]))):this.values),this.update=async(l,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:d});const m=_d(_d({},this.getData(l)),d);this.map.set(l,m),await this.persist()},this.delete=async(l,d)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:d}),this.map.delete(l),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class f5{constructor(e,t){this.core=e,this.logger=t,this.name=q2,this.version=z2,this.events=new Pu,this.initialized=!1,this.storagePrefix=Tn,this.ignoredPayloadTypes=[si],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=bu(),o=await this.core.crypto.setSymKey(s),c=Gr(_e.FIVE_MINUTES),l={protocol:Bp},d={topic:o,expiry:c,relay:l,active:!1},m=lS({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,d),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:m}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=uS(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const d=Gr(_e.FIVE_MINUTES),m={topic:o,relay:l,expiry:d,active:!1};return await this.pairings.set(o,m),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l}),this.core.expirer.set(o,d),s.activatePairing&&await this.activate({topic:o}),m},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(_e.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:d,reject:m}=Ci();this.events.once(Bt("pairing_ping",c),({error:_})=>{_?m(_):d()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Gt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=Yo(o,c),d=await this.core.crypto.encode(s,l),m=fs[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,d,m),l.id},this.sendResult=async(s,o,c)=>{const l=Ru(s,c),d=await this.core.crypto.encode(o,l),m=await this.core.history.get(o,s),_=fs[m.request.method].res;await this.core.relayer.publish(o,d,_),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=Jo(s,c),d=await this.core.crypto.encode(o,l),m=await this.core.history.get(o,s),_=fs[m.request.method]?fs[m.request.method].res:fs.unregistered_method.res;await this.core.relayer.publish(o,d,_),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Gt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>An(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,l=c.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{_n(o)?this.events.emit(Bt("pairing_ping",c),{}):Wr(o)&&this.events.emit(Bt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const d=Gt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,d),this.logger.error(d)}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=ue("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!wS(s.uri)){const{message:o}=ue("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:c}=ue("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:c}=ue("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Yt(s,!1)){const{message:o}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(An(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ue("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new ca(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ct.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);$u(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Xo(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async e=>{const{topic:t}=Pp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class l5 extends L3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new qr.EventEmitter,this.name=H2,this.version=B2,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Gr(_e.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(rn.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Wr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(rn.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(rn.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Yo(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(rn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(rn.created,e=>{const t=rn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(rn.updated,e=>{const t=rn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(rn.deleted,e=>{const t=rn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{_e.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class d5 extends K3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new qr.EventEmitter,this.name=K2,this.version=V2,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(jr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(jr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return eS(e);if(typeof e=="number")return tS(e);const{message:t}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;_e.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(jr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on($i.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(jr.created,e=>{const t=jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.expired,e=>{const t=jr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.deleted,e=>{const t=jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class p5 extends V3{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Kc,this.initialized=!1,this.init=async s=>{Sp()||!Gu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||hd,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(_e.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(o=await l.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Kc))return s();const c=document.createElement("iframe");c.setAttribute("id",Kc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",l=>{o(l)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),_e.toMiliseconds(_e.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=hd,this.abortController=new AbortController,this.isDevEnv=Wu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var g5=Object.defineProperty,vd=Object.getOwnPropertySymbols,y5=Object.prototype.hasOwnProperty,_5=Object.prototype.propertyIsEnumerable,md=(n,e,t)=>e in n?g5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bd=(n,e)=>{for(var t in e||(e={}))y5.call(e,t)&&md(n,t,e[t]);if(vd)for(var t of vd(e))_5.call(e,t)&&md(n,t,e[t]);return n};class Qu extends j3{constructor(e){super(e),this.protocol=Hp,this.version=v2,this.name=Xu,this.events=new qr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Kp;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||m2.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new $i.HeartBeat,this.crypto=new W2(this,this.logger,e==null?void 0:e.keychain),this.history=new l5(this,this.logger),this.expirer=new d5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new zE(bd(bd({},b2),e==null?void 0:e.storageOptions)),this.relayer=new a5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new f5(this,this.logger),this.verify=new p5(this.projectId||"",this.logger)}static async init(e){const t=new Qu(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(F2,s),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const v5=Qu,Vp="wc",kp=2,Wp="client",Zu=`${Vp}@${kp}:${Wp}:`,kc={name:Wp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},m5="WALLETCONNECT_DEEPLINK_CHOICE",b5="proposal",Gp="Proposal expired",w5="session",Uo=_e.SEVEN_DAYS,E5="engine",ds={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1115}}},Wc={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},D5="request",S5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var O5=Object.defineProperty,I5=Object.defineProperties,x5=Object.getOwnPropertyDescriptors,wd=Object.getOwnPropertySymbols,P5=Object.prototype.hasOwnProperty,A5=Object.prototype.propertyIsEnumerable,Ed=(n,e,t)=>e in n?O5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fr=(n,e)=>{for(var t in e||(e={}))P5.call(e,t)&&Ed(n,t,e[t]);if(wd)for(var t of wd(e))A5.call(e,t)&&Ed(n,t,e[t]);return n},Gc=(n,e)=>I5(n,x5(e));class C5 extends W3{constructor(e){super(e),this.name=E5,this.events=new Pu,this.initialized=!1,this.ignoredPayloadTypes=[si],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ds)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=Gc(Fr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:d,relays:m}=s;let _=o,S,P=!1;if(_&&(P=this.client.core.pairing.pairings.get(_).active),!_||!P){const{topic:E,uri:v}=await this.client.core.pairing.create();_=E,S=v}const x=await this.client.core.crypto.generateKeyPair(),C=Fr({requiredNamespaces:c,optionalNamespaces:l,relays:m??[{protocol:Bp}],proposer:{publicKey:x,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:R,resolve:q,done:L}=Ci(_e.FIVE_MINUTES,Gp);if(this.events.once(Bt("session_connect"),async({error:E,session:v})=>{if(E)R(E);else if(v){v.self.publicKey=x;const w=Gc(Fr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,w),await this.setExpiry(v.topic,v.expiry),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:v.peer.metadata}),q(w)}}),!_){const{message:E}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(E)}const Q=await this.sendRequest(_,"wc_sessionPropose",C),p=Gr(_e.FIVE_MINUTES);return await this.setProposal(Q,Fr({id:Q,expiry:p},C)),{uri:S,approval:L}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,d=this.client.proposal.get(s);let{pairingTopic:m,proposer:_,requiredNamespaces:S,optionalNamespaces:P}=d;m=m||"",ys(S)||(S=yS(c,"approve()"));const x=await this.client.core.crypto.generateKeyPair(),C=_.publicKey,R=await this.client.core.crypto.generateSharedKey(x,C);m&&s&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:_.metadata}),await this.sendResult(s,m,{relay:{protocol:o??"irn"},responderPublicKey:x}),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const q=Fr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:S,optionalNamespaces:P,pairingTopic:m,controller:{publicKey:x,metadata:this.client.metadata},expiry:Gr(Uo)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(R),await this.sendRequest(R,"wc_sessionSettle",q);const L=Gc(Fr({},q),{topic:R,pairingTopic:m,acknowledged:!1,self:q.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:x});return await this.client.session.set(R,L),await this.setExpiry(R,Gr(Uo)),{topic:R,acknowledged:()=>new Promise(Q=>setTimeout(()=>Q(this.client.session.get(R)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:l,resolve:d,reject:m}=Ci();return this.events.once(Bt("session_update",c),({error:_})=>{_?m(_):d()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:l,reject:d}=Ci();return this.events.once(Bt("session_extend",o),({error:m})=>{m?d(m):l()}),await this.setExpiry(s,Gr(Uo)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,d=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},l),{done:m,resolve:_,reject:S}=Ci(l);this.events.once(Bt("session_request",d),({error:x,result:C})=>{x?S(x):_(C)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:d});const P=await this.client.core.storage.getItem(m5);return rS({id:d,topic:c,wcDeepLink:P}),await m()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;_n(o)?await this.sendResult(c,s,o.result):Wr(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:l,reject:d}=Ci();this.events.once(Bt("session_ping",o),({error:m})=>{m?d(m):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=Nu().toString();let c;const l=d=>{(d==null?void 0:d.id.toString())===o&&(this.client.core.relayer.events.removeListener(Ct.message_ack,l),c())};await Promise.all([new Promise(d=>{c=d,this.client.core.relayer.on(Ct.message_ack,l)}),this.sendRequest(s,"wc_sessionDelete",Gt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>mS(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,d;return((l=c.peerMetadata)==null?void 0:l.url)&&((d=c.peerMetadata)==null?void 0:d.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Gt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Gt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ds.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async(t,s,o,c,l)=>{const d=Yo(s,o);if(Gu()&&S5.includes(s)){const S=Ti(JSON.stringify(d));await this.client.core.verify.register({attestationId:S})}const m=await this.client.core.crypto.encode(t,d),_=ds[s].req;return c&&(_.ttl=c),l&&(_.id=l),this.client.core.history.set(t,d),this.client.core.relayer.publish(t,m,_),d.id},this.sendResult=async(t,s,o)=>{const c=Ru(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),m=ds[d.request.method].res;this.client.core.relayer.publish(s,l,m),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=Jo(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),m=ds[d.request.method].res;this.client.core.relayer.publish(s,l,m),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{An(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{An(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Fr({},s.params));const l=Gr(_e.FIVE_MINUTES),d=Fr({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,d);const m=Ti(JSON.stringify(s)),_=await this.getVerifyContext(m,d.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:_})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(_n(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const d=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const _=await this.client.core.crypto.generateSharedKey(d,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const S=await this.client.core.relayer.subscribe(_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:t})}else Wr(s)&&(await this.client.proposal.delete(o,Gt("USER_DISCONNECTED")),this.events.emit(Bt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:d,expiry:m,namespaces:_,requiredNamespaces:S,optionalNamespaces:P,sessionProperties:x,pairingTopic:C}=s.params,R=Fr({topic:t,relay:l,expiry:m,namespaces:_,acknowledged:!0,pairingTopic:C,requiredNamespaces:S,optionalNamespaces:P,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},x&&{sessionProperties:x});await this.sendResult(s.id,t,!0),this.events.emit(Bt("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;_n(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Bt("session_approve",o),{})):Wr(s)&&(await this.client.session.delete(t,Gt("USER_DISCONNECTED")),this.events.emit(Bt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Fr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Bt("session_update",o),{}):Wr(s)&&this.events.emit(Bt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(Uo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Bt("session_extend",o),{}):Wr(s)&&this.events.emit(Bt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{_n(s)?this.events.emit(Bt("session_ping",o),{}):Wr(s)&&this.events.emit(Bt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Ct.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Fr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const l=Ti(JSON.stringify(s)),d=this.client.session.get(t),m=await this.getVerifyContext(l,d.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:m})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Bt("session_request",o),{result:s.result}):Wr(s)&&this.events.emit(Bt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Fr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.isValidConnect=async t=>{if(!vr(t)){const{message:m}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(m)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:d}=t;if(ur(s)||await this.isValidPairingTopic(s),!TS(d,!0)){const{message:m}=ue("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(m)}!ur(o)&&ys(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(c)&&ys(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ur(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=CS(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!vr(t))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const d=this.client.proposal.get(s),m=Mo(o,"approve()");if(m)throw new Error(m.message);const _=Ql(d.requiredNamespaces,o,"approve()");if(_)throw new Error(_.message);if(!Yt(c,!0)){const{message:S}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(S)}ur(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!vr(t)){const{message:c}=ue("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!RS(o)){const{message:c}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!vr(t)){const{message:_}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(_)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!Cp(s)){const{message:_}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_)}const d=SS(o,"onSessionSettleRequest()");if(d)throw new Error(d.message);const m=Mo(c,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(An(l)){const{message:_}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(_)}},this.isValidUpdate=async t=>{if(!vr(t)){const{message:m}=ue("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(m)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=Mo(o,"update()");if(l)throw new Error(l.message);const d=Ql(c.requiredNamespaces,o,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async t=>{if(!vr(t)){const{message:o}=ue("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!vr(t)){const{message:m}=ue("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(m)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Xl(d,c)){const{message:m}=ue("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(m)}if(!$S(o)){const{message:m}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(m)}if(!jS(d,c,o.method)){const{message:m}=ue("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(m)}if(l&&!zS(l,Wc)){const{message:m}=ue("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${Wc.min} and ${Wc.max}`);throw new Error(m)}},this.isValidRespond=async t=>{if(!vr(t)){const{message:c}=ue("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!US(o)){const{message:c}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!vr(t)){const{message:o}=ue("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!vr(t)){const{message:d}=ue("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(d)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!Xl(l,c)){const{message:d}=ue("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(d)}if(!FS(o)){const{message:d}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}if(!LS(l,c,o.name)){const{message:d}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidDisconnect=async t=>{if(!vr(t)){const{message:o}=ue("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Yt(o,!1)){const{message:c}=ue("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ct.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);$u(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Xo(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async e=>{const{topic:t,id:s}=Pp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ue("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Yt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Yt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ue("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Yt(e,!1)){const{message:t}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!NS(e)){const{message:t}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class T5 extends ca{constructor(e,t){super(e,t,b5,Zu),this.core=e,this.logger=t}}class N5 extends ca{constructor(e,t){super(e,t,w5,Zu),this.core=e,this.logger=t}}class R5 extends ca{constructor(e,t){super(e,t,D5,Zu,s=>s.id),this.core=e,this.logger=t}}let $5=class Yp extends k3{constructor(e){super(e),this.protocol=Vp,this.version=kp,this.name=kc.name,this.events=new qr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||kc.name,this.metadata=(e==null?void 0:e.metadata)||YD();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||kc.logger}));this.core=(e==null?void 0:e.core)||new v5(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new N5(this.core,this.logger),this.proposal=new T5(this.core,this.logger),this.pendingRequest=new R5(this.core,this.logger),this.engine=new C5(this)}static async init(e){const t=new Yp(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=dt.getNavigator=dt.getNavigatorOrThrow=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function oi(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}dt.getFromWindow=oi;function ji(n){const e=oi(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}dt.getFromWindowOrThrow=ji;function U5(){return ji("document")}dt.getDocumentOrThrow=U5;function F5(){return oi("document")}dt.getDocument=F5;function j5(){return ji("navigator")}dt.getNavigatorOrThrow=j5;function L5(){return oi("navigator")}dt.getNavigator=L5;function M5(){return ji("location")}dt.getLocationOrThrow=M5;function q5(){return oi("location")}dt.getLocation=q5;function z5(){return ji("crypto")}dt.getCryptoOrThrow=z5;function H5(){return oi("crypto")}dt.getCrypto=H5;function B5(){return ji("localStorage")}dt.getLocalStorageOrThrow=B5;function K5(){return oi("localStorage")}dt.getLocalStorage=K5;var eh={};Object.defineProperty(eh,"__esModule",{value:!0});eh.getWindowMetadata=void 0;const Dd=dt;function V5(){let n,e;try{n=Dd.getDocumentOrThrow(),e=Dd.getLocationOrThrow()}catch{return null}function t(){const P=n.getElementsByTagName("link"),x=[];for(let C=0;C<P.length;C++){const R=P[C],q=R.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=R.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let Q=e.protocol+"//"+e.host;if(L.indexOf("/")===0)Q+=L;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");Q+=E+"/"+L}x.push(Q)}else if(L.indexOf("//")===0){const Q=e.protocol+L;x.push(Q)}else x.push(L)}}return x}function s(...P){const x=n.getElementsByTagName("meta");for(let C=0;C<x.length;C++){const R=x[C],q=["itemprop","property","name"].map(L=>R.getAttribute(L)).filter(L=>L?P.includes(L):!1);if(q.length&&q){const L=R.getAttribute("content");if(L)return L}}return""}function o(){let P=s("name","og:site_name","og:title","twitter:title");return P||(P=n.title),P}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),m=e.origin,_=t();return{description:d,url:m,icons:_,name:l}}eh.getWindowMetadata=V5;var k5={};(function(n){const e=Cu,t=Tu,s=Au,o=qu,c=p=>p==null,l=Symbol("encodeFragmentIdentifier");function d(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[",g,"]"].join("")]:[...v,[S(E,p),"[",S(g,p),"]=",S(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),"[]"].join("")]:[...v,[S(E,p),"[]=",S(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[S(E,p),":list="].join("")]:[...v,[S(E,p),":list=",S(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[S(v,p),E,S(g,p)].join("")]:[[w,S(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,S(E,p)]:[...v,[S(E,p),"=",S(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&P(w,p).includes(p.arrayFormatSeparator);w=b?P(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(k=>P(k,p)):w===null?w:P(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&P(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>P(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function P(p,E){return E.decode?t(p):p}function x(p){return Array.isArray(p)?p.sort():typeof p=="object"?x(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function q(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function L(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function Q(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:P(b,E),v(P(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=L(u[b],E);else w[g]=L(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=x(b):g[u]=b,g},Object.create(null))}n.extract=q,n.parse=Q,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=d(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?S(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?S(b,E)+"[]":K.reduce(w(b),[]).join("&"):S(b,E)+"="+S(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:Q(q(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:P(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[l]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[l]?S(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[l]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(k5);function Yc(n=[],e=[]){return[...new Set([...n,...e])]}function th(n){return n.includes(":")}function qo(n){return th(n)?n.split(":")[0]:n}const W5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Sd(n,e){const{message:t,code:s}=W5[n];return{message:e?`${t} ${e}`:t,code:s}}function Od(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function G5(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}const Y5={Accept:"application/json","Content-Type":"application/json"},J5="POST",Id={headers:Y5,method:J5},xd=10;class ai{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new qr.EventEmitter,this.isAvailable=!1,this.registering=!1,!sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=ws(e),c=await(await il(this.url,Object.assign(Object.assign({},Id),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ws({id:1,jsonrpc:"2.0",method:"test",params:[]});await il(e,Object.assign(Object.assign({},Id),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?zu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Jo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Ld(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>xd&&this.events.setMaxListeners(xd)}}const Pd="error",X5="wss://relay.walletconnect.com",Q5="wc",Z5="universal_provider",Ad=`${Q5}@2:${Z5}:`,eO="https://rpc.walletconnect.com/v1",$n={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Lr<"u"?Lr:typeof self<"u"?self:{},Su={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",_=500,S="__lodash_placeholder__",P=1,x=2,C=4,R=1,q=2,L=1,Q=2,p=4,E=8,v=16,w=32,g=64,u=128,b=256,K=512,k=30,oe="...",ce=800,ge=16,U=1,B=2,fe=3,re=1/0,G=9007199254740991,te=17976931348623157e292,Y=0/0,ne=4294967295,Ie=ne-1,ie=ne>>>1,be=[["ary",u],["bind",L],["bindKey",Q],["curry",E],["curryRight",v],["flip",K],["partial",w],["partialRight",g],["rearg",b]],he="[object Arguments]",ve="[object Array]",H="[object AsyncFunction]",z="[object Boolean]",$="[object Date]",f="[object DOMException]",T="[object Error]",se="[object Function]",le="[object GeneratorFunction]",Se="[object Map]",He="[object Number]",Ve="[object Null]",je="[object Object]",yt="[object Promise]",_t="[object Proxy]",Me="[object RegExp]",Oe="[object Set]",Re="[object String]",$e="[object Symbol]",qe="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",De="[object ArrayBuffer]",Ae="[object DataView]",Be="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",Ge="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",lr="[object Uint32Array]",Yr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vn=/&(?:amp|lt|gt|quot|#39);/g,Un=/[&<>"']/g,Dt=RegExp(vn.source),vt=RegExp(Un.source),St=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(It.source),xt=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ua=/[()=,{}\[\]\/\s]/,ha=/\\(\\)?/g,fa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,la=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,pa=/^\[object .+?Constructor\]$/,ga=/^0o[0-7]+$/i,ya=/^(?:0|[1-9]\d*)$/,on=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ci=/($^)/,_a=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",va="\\u0300-\\u036f",ma="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",Cs=va+ma+hi,Ts="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",ba="\\xac\\xb1\\xd7\\xf7",wa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ea="\\u2000-\\u206f",Da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Rs="\\ufe0e\\ufe0f",Fn=ba+wa+Ea+Da,Li="['â€™]",jn="["+ui+"]",Mi="["+Fn+"]",Ln="["+Cs+"]",$s="\\d+",Sa="["+Ts+"]",Us="["+zr+"]",Fs="[^"+ui+Fn+$s+Ts+zr+Ns+"]",fi="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+Ln+"|"+fi+")",js="[^"+ui+"]",li="(?:\\ud83c[\\udde6-\\uddff]){2}",mn="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Ns+"]",Ls="\\u200d",Ms="(?:"+Us+"|"+Fs+")",Jr="(?:"+br+"|"+Fs+")",qs="(?:"+Li+"(?:d|ll|m|re|s|t|ve))?",zs="(?:"+Li+"(?:D|LL|M|RE|S|T|VE))?",Hs=Oa+"?",Bs="["+Rs+"]?",Ia="(?:"+Ls+"(?:"+[js,li,mn].join("|")+")"+Bs+Hs+")*",an="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ks="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vs=Bs+Hs+Ia,di="(?:"+[Sa,li,mn].join("|")+")"+Vs,xa="(?:"+[js+Ln+"?",Ln,li,mn,jn].join("|")+")",qi=RegExp(Li,"g"),Pa=RegExp(Ln,"g"),pi=RegExp(fi+"(?="+fi+")|"+xa+Vs,"g"),ks=RegExp([br+"?"+Us+"+"+qs+"(?="+[Mi,br,"$"].join("|")+")",Jr+"+"+zs+"(?="+[Mi,br+Ms,"$"].join("|")+")",br+"?"+Ms+"+"+qs,br+"+"+zs,Ks,an,$s,di].join("|"),"g"),Ws=RegExp("["+Ls+ui+Cs+Rs+"]"),Mn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Aa=-1,ot={};ot[Be]=ot[xe]=ot[ke]=ot[Ge]=ot[et]=ot[tt]=ot[Je]=ot[rr]=ot[lr]=!0,ot[he]=ot[ve]=ot[De]=ot[z]=ot[Ae]=ot[$]=ot[T]=ot[se]=ot[Se]=ot[He]=ot[je]=ot[Me]=ot[Oe]=ot[Re]=ot[Pe]=!1;var st={};st[he]=st[ve]=st[De]=st[Ae]=st[z]=st[$]=st[Be]=st[xe]=st[ke]=st[Ge]=st[et]=st[Se]=st[He]=st[je]=st[Me]=st[Oe]=st[Re]=st[$e]=st[tt]=st[Je]=st[rr]=st[lr]=!0,st[T]=st[se]=st[Pe]=!1;var I={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},de={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,pt=typeof ps=="object"&&ps&&ps.Object===Object&&ps,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=pt||zt||Function("return this")(),ct=e&&!e.nodeType&&e,Nt=ct&&!0&&n&&!n.nodeType&&n,dr=Nt&&Nt.exports===ct,Ht=dr&&pt.process,gt=function(){try{var j=Nt&&Nt.require&&Nt.require("util").types;return j||Ht&&Ht.binding&&Ht.binding("util")}catch{}}(),ir=gt&&gt.isArrayBuffer,Hr=gt&&gt.isDate,Pr=gt&&gt.isMap,Xr=gt&&gt.isRegExp,zi=gt&&gt.isSet,qn=gt&&gt.isTypedArray;function kt(j,W,V){switch(V.length){case 0:return j.call(W);case 1:return j.call(W,V[0]);case 2:return j.call(W,V[0],V[1]);case 3:return j.call(W,V[0],V[1],V[2])}return j.apply(W,V)}function Qp(j,W,V,pe){for(var Ce=-1,rt=j==null?0:j.length;++Ce<rt;){var Kt=j[Ce];W(pe,Kt,V(Kt),j)}return pe}function Ar(j,W){for(var V=-1,pe=j==null?0:j.length;++V<pe&&W(j[V],V,j)!==!1;);return j}function Zp(j,W){for(var V=j==null?0:j.length;V--&&W(j[V],V,j)!==!1;);return j}function ih(j,W){for(var V=-1,pe=j==null?0:j.length;++V<pe;)if(!W(j[V],V,j))return!1;return!0}function bn(j,W){for(var V=-1,pe=j==null?0:j.length,Ce=0,rt=[];++V<pe;){var Kt=j[V];W(Kt,V,j)&&(rt[Ce++]=Kt)}return rt}function Ys(j,W){var V=j==null?0:j.length;return!!V&&gi(j,W,0)>-1}function Ca(j,W,V){for(var pe=-1,Ce=j==null?0:j.length;++pe<Ce;)if(V(W,j[pe]))return!0;return!1}function bt(j,W){for(var V=-1,pe=j==null?0:j.length,Ce=Array(pe);++V<pe;)Ce[V]=W(j[V],V,j);return Ce}function wn(j,W){for(var V=-1,pe=W.length,Ce=j.length;++V<pe;)j[Ce+V]=W[V];return j}function Ta(j,W,V,pe){var Ce=-1,rt=j==null?0:j.length;for(pe&&rt&&(V=j[++Ce]);++Ce<rt;)V=W(V,j[Ce],Ce,j);return V}function eg(j,W,V,pe){var Ce=j==null?0:j.length;for(pe&&Ce&&(V=j[--Ce]);Ce--;)V=W(V,j[Ce],Ce,j);return V}function Na(j,W){for(var V=-1,pe=j==null?0:j.length;++V<pe;)if(W(j[V],V,j))return!0;return!1}var tg=Ra("length");function rg(j){return j.split("")}function ng(j){return j.match(qt)||[]}function sh(j,W,V){var pe;return V(j,function(Ce,rt,Kt){if(W(Ce,rt,Kt))return pe=rt,!1}),pe}function Js(j,W,V,pe){for(var Ce=j.length,rt=V+(pe?1:-1);pe?rt--:++rt<Ce;)if(W(j[rt],rt,j))return rt;return-1}function gi(j,W,V){return W===W?gg(j,W,V):Js(j,oh,V)}function ig(j,W,V,pe){for(var Ce=V-1,rt=j.length;++Ce<rt;)if(pe(j[Ce],W))return Ce;return-1}function oh(j){return j!==j}function ah(j,W){var V=j==null?0:j.length;return V?Ua(j,W)/V:Y}function Ra(j){return function(W){return W==null?t:W[j]}}function $a(j){return function(W){return j==null?t:j[W]}}function ch(j,W,V,pe,Ce){return Ce(j,function(rt,Kt,ut){V=pe?(pe=!1,rt):W(V,rt,Kt,ut)}),V}function sg(j,W){var V=j.length;for(j.sort(W);V--;)j[V]=j[V].value;return j}function Ua(j,W){for(var V,pe=-1,Ce=j.length;++pe<Ce;){var rt=W(j[pe]);rt!==t&&(V=V===t?rt:V+rt)}return V}function Fa(j,W){for(var V=-1,pe=Array(j);++V<j;)pe[V]=W(V);return pe}function og(j,W){return bt(W,function(V){return[V,j[V]]})}function uh(j){return j&&j.slice(0,dh(j)+1).replace(xt,"")}function wr(j){return function(W){return j(W)}}function ja(j,W){return bt(W,function(V){return j[V]})}function Hi(j,W){return j.has(W)}function hh(j,W){for(var V=-1,pe=j.length;++V<pe&&gi(W,j[V],0)>-1;);return V}function fh(j,W){for(var V=j.length;V--&&gi(W,j[V],0)>-1;);return V}function ag(j,W){for(var V=j.length,pe=0;V--;)j[V]===W&&++pe;return pe}var cg=$a(I),ug=$a(F);function hg(j){return"\\"+de[j]}function fg(j,W){return j==null?t:j[W]}function yi(j){return Ws.test(j)}function lg(j){return Mn.test(j)}function dg(j){for(var W,V=[];!(W=j.next()).done;)V.push(W.value);return V}function La(j){var W=-1,V=Array(j.size);return j.forEach(function(pe,Ce){V[++W]=[Ce,pe]}),V}function lh(j,W){return function(V){return j(W(V))}}function En(j,W){for(var V=-1,pe=j.length,Ce=0,rt=[];++V<pe;){var Kt=j[V];(Kt===W||Kt===S)&&(j[V]=S,rt[Ce++]=V)}return rt}function Xs(j){var W=-1,V=Array(j.size);return j.forEach(function(pe){V[++W]=pe}),V}function pg(j){var W=-1,V=Array(j.size);return j.forEach(function(pe){V[++W]=[pe,pe]}),V}function gg(j,W,V){for(var pe=V-1,Ce=j.length;++pe<Ce;)if(j[pe]===W)return pe;return-1}function yg(j,W,V){for(var pe=V+1;pe--;)if(j[pe]===W)return pe;return pe}function _i(j){return yi(j)?vg(j):tg(j)}function Br(j){return yi(j)?mg(j):rg(j)}function dh(j){for(var W=j.length;W--&&Tt.test(j.charAt(W)););return W}var _g=$a(Z);function vg(j){for(var W=pi.lastIndex=0;pi.test(j);)++W;return W}function mg(j){return j.match(pi)||[]}function bg(j){return j.match(ks)||[]}var wg=function j(W){W=W==null?Xe:vi.defaults(Xe.Object(),W,vi.pick(Xe,Gs));var V=W.Array,pe=W.Date,Ce=W.Error,rt=W.Function,Kt=W.Math,ut=W.Object,Ma=W.RegExp,Eg=W.String,Cr=W.TypeError,Qs=V.prototype,Dg=rt.prototype,mi=ut.prototype,Zs=W["__core-js_shared__"],eo=Dg.toString,it=mi.hasOwnProperty,Sg=0,ph=function(){var r=/[^.]+$/.exec(Zs&&Zs.keys&&Zs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),to=mi.toString,Og=eo.call(ut),Ig=Xe._,xg=Ma("^"+eo.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=dr?W.Buffer:t,Dn=W.Symbol,no=W.Uint8Array,gh=ro?ro.allocUnsafe:t,io=lh(ut.getPrototypeOf,ut),yh=ut.create,_h=mi.propertyIsEnumerable,so=Qs.splice,vh=Dn?Dn.isConcatSpreadable:t,Bi=Dn?Dn.iterator:t,zn=Dn?Dn.toStringTag:t,oo=function(){try{var r=kn(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Pg=W.clearTimeout!==Xe.clearTimeout&&W.clearTimeout,Ag=pe&&pe.now!==Xe.Date.now&&pe.now,Cg=W.setTimeout!==Xe.setTimeout&&W.setTimeout,ao=Kt.ceil,co=Kt.floor,qa=ut.getOwnPropertySymbols,Tg=ro?ro.isBuffer:t,mh=W.isFinite,Ng=Qs.join,Rg=lh(ut.keys,ut),Vt=Kt.max,Zt=Kt.min,$g=pe.now,Ug=W.parseInt,bh=Kt.random,Fg=Qs.reverse,za=kn(W,"DataView"),Ki=kn(W,"Map"),Ha=kn(W,"Promise"),bi=kn(W,"Set"),Vi=kn(W,"WeakMap"),ki=kn(ut,"create"),uo=Vi&&new Vi,wi={},jg=Wn(za),Lg=Wn(Ki),Mg=Wn(Ha),qg=Wn(bi),zg=Wn(Vi),ho=Dn?Dn.prototype:t,Wi=ho?ho.valueOf:t,wh=ho?ho.toString:t;function D(r){if(At(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Tr)return r;if(it.call(r,"__wrapped__"))return Df(r)}return new Tr(r)}var Ei=function(){function r(){}return function(i){if(!Et(i))return{};if(yh)return yh(i);r.prototype=i;var a=new r;return r.prototype=t,a}}();function fo(){}function Tr(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}D.templateSettings={escape:St,evaluate:Ot,interpolate:wt,variable:"",imports:{_:D}},D.prototype=fo.prototype,D.prototype.constructor=D,Tr.prototype=Ei(fo.prototype),Tr.prototype.constructor=Tr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function Hg(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function Bg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Kg(){var r=this.__wrapped__.value(),i=this.__dir__,a=Ne(r),h=i<0,y=a?r.length:0,O=r1(0,y,this.__views__),A=O.start,N=O.end,M=N-A,J=h?N:A-1,X=this.__iteratees__,ee=X.length,ae=0,ye=Zt(M,this.__takeCount__);if(!a||!h&&y==M&&ye==M)return Vh(r,this.__actions__);var we=[];e:for(;M--&&ae<ye;){J+=i;for(var ze=-1,Ee=r[J];++ze<ee;){var We=X[ze],Qe=We.iteratee,Sr=We.type,ar=Qe(Ee);if(Sr==B)Ee=ar;else if(!ar){if(Sr==U)continue e;break e}}we[ae++]=Ee}return we}Ye.prototype=Ei(fo.prototype),Ye.prototype.constructor=Ye;function Hn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Vg(){this.__data__=ki?ki(null):{},this.size=0}function kg(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function Wg(r){var i=this.__data__;if(ki){var a=i[r];return a===m?t:a}return it.call(i,r)?i[r]:t}function Gg(r){var i=this.__data__;return ki?i[r]!==t:it.call(i,r)}function Yg(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=ki&&i===t?m:i,this}Hn.prototype.clear=Vg,Hn.prototype.delete=kg,Hn.prototype.get=Wg,Hn.prototype.has=Gg,Hn.prototype.set=Yg;function cn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Jg(){this.__data__=[],this.size=0}function Xg(r){var i=this.__data__,a=lo(i,r);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():so.call(i,a,1),--this.size,!0}function Qg(r){var i=this.__data__,a=lo(i,r);return a<0?t:i[a][1]}function Zg(r){return lo(this.__data__,r)>-1}function e0(r,i){var a=this.__data__,h=lo(a,r);return h<0?(++this.size,a.push([r,i])):a[h][1]=i,this}cn.prototype.clear=Jg,cn.prototype.delete=Xg,cn.prototype.get=Qg,cn.prototype.has=Zg,cn.prototype.set=e0;function un(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function t0(){this.size=0,this.__data__={hash:new Hn,map:new(Ki||cn),string:new Hn}}function r0(r){var i=Oo(this,r).delete(r);return this.size-=i?1:0,i}function n0(r){return Oo(this,r).get(r)}function i0(r){return Oo(this,r).has(r)}function s0(r,i){var a=Oo(this,r),h=a.size;return a.set(r,i),this.size+=a.size==h?0:1,this}un.prototype.clear=t0,un.prototype.delete=r0,un.prototype.get=n0,un.prototype.has=i0,un.prototype.set=s0;function Bn(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new un;++i<a;)this.add(r[i])}function o0(r){return this.__data__.set(r,m),this}function a0(r){return this.__data__.has(r)}Bn.prototype.add=Bn.prototype.push=o0,Bn.prototype.has=a0;function Kr(r){var i=this.__data__=new cn(r);this.size=i.size}function c0(){this.__data__=new cn,this.size=0}function u0(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function h0(r){return this.__data__.get(r)}function f0(r){return this.__data__.has(r)}function l0(r,i){var a=this.__data__;if(a instanceof cn){var h=a.__data__;if(!Ki||h.length<o-1)return h.push([r,i]),this.size=++a.size,this;a=this.__data__=new un(h)}return a.set(r,i),this.size=a.size,this}Kr.prototype.clear=c0,Kr.prototype.delete=u0,Kr.prototype.get=h0,Kr.prototype.has=f0,Kr.prototype.set=l0;function Eh(r,i){var a=Ne(r),h=!a&&Gn(r),y=!a&&!h&&Pn(r),O=!a&&!h&&!y&&Ii(r),A=a||h||y||O,N=A?Fa(r.length,Eg):[],M=N.length;for(var J in r)(i||it.call(r,J))&&!(A&&(J=="length"||y&&(J=="offset"||J=="parent")||O&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||dn(J,M)))&&N.push(J);return N}function Dh(r){var i=r.length;return i?r[Za(0,i-1)]:t}function d0(r,i){return Io(pr(r),Kn(i,0,r.length))}function p0(r){return Io(pr(r))}function Ba(r,i,a){(a!==t&&!Vr(r[i],a)||a===t&&!(i in r))&&hn(r,i,a)}function Gi(r,i,a){var h=r[i];(!(it.call(r,i)&&Vr(h,a))||a===t&&!(i in r))&&hn(r,i,a)}function lo(r,i){for(var a=r.length;a--;)if(Vr(r[a][0],i))return a;return-1}function g0(r,i,a,h){return Sn(r,function(y,O,A){i(h,y,a(y),A)}),h}function Sh(r,i){return r&&Zr(i,Wt(i),r)}function y0(r,i){return r&&Zr(i,yr(i),r)}function hn(r,i,a){i=="__proto__"&&oo?oo(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function Ka(r,i){for(var a=-1,h=i.length,y=V(h),O=r==null;++a<h;)y[a]=O?t:Sc(r,i[a]);return y}function Kn(r,i,a){return r===r&&(a!==t&&(r=r<=a?r:a),i!==t&&(r=r>=i?r:i)),r}function Nr(r,i,a,h,y,O){var A,N=i&P,M=i&x,J=i&C;if(a&&(A=y?a(r,h,y,O):a(r)),A!==t)return A;if(!Et(r))return r;var X=Ne(r);if(X){if(A=i1(r),!N)return pr(r,A)}else{var ee=er(r),ae=ee==se||ee==le;if(Pn(r))return Gh(r,N);if(ee==je||ee==he||ae&&!y){if(A=M||ae?{}:pf(r),!N)return M?W0(r,y0(A,r)):k0(r,Sh(A,r))}else{if(!st[ee])return y?r:{};A=s1(r,ee,N)}}O||(O=new Kr);var ye=O.get(r);if(ye)return ye;O.set(r,A),Bf(r)?r.forEach(function(Ee){A.add(Nr(Ee,i,a,Ee,r,O))}):zf(r)&&r.forEach(function(Ee,We){A.set(We,Nr(Ee,i,a,We,r,O))});var we=J?M?hc:uc:M?yr:Wt,ze=X?t:we(r);return Ar(ze||r,function(Ee,We){ze&&(We=Ee,Ee=r[We]),Gi(A,We,Nr(Ee,i,a,We,r,O))}),A}function _0(r){var i=Wt(r);return function(a){return Oh(a,r,i)}}function Oh(r,i,a){var h=a.length;if(r==null)return!h;for(r=ut(r);h--;){var y=a[h],O=i[y],A=r[y];if(A===t&&!(y in r)||!O(A))return!1}return!0}function Ih(r,i,a){if(typeof r!="function")throw new Cr(l);return ts(function(){r.apply(t,a)},i)}function Yi(r,i,a,h){var y=-1,O=Ys,A=!0,N=r.length,M=[],J=i.length;if(!N)return M;a&&(i=bt(i,wr(a))),h?(O=Ca,A=!1):i.length>=o&&(O=Hi,A=!1,i=new Bn(i));e:for(;++y<N;){var X=r[y],ee=a==null?X:a(X);if(X=h||X!==0?X:0,A&&ee===ee){for(var ae=J;ae--;)if(i[ae]===ee)continue e;M.push(X)}else O(i,ee,h)||M.push(X)}return M}var Sn=Zh(Qr),xh=Zh(ka,!0);function v0(r,i){var a=!0;return Sn(r,function(h,y,O){return a=!!i(h,y,O),a}),a}function po(r,i,a){for(var h=-1,y=r.length;++h<y;){var O=r[h],A=i(O);if(A!=null&&(N===t?A===A&&!Dr(A):a(A,N)))var N=A,M=O}return M}function m0(r,i,a,h){var y=r.length;for(a=Le(a),a<0&&(a=-a>y?0:y+a),h=h===t||h>y?y:Le(h),h<0&&(h+=y),h=a>h?0:Vf(h);a<h;)r[a++]=i;return r}function Ph(r,i){var a=[];return Sn(r,function(h,y,O){i(h,y,O)&&a.push(h)}),a}function Jt(r,i,a,h,y){var O=-1,A=r.length;for(a||(a=a1),y||(y=[]);++O<A;){var N=r[O];i>0&&a(N)?i>1?Jt(N,i-1,a,h,y):wn(y,N):h||(y[y.length]=N)}return y}var Va=ef(),Ah=ef(!0);function Qr(r,i){return r&&Va(r,i,Wt)}function ka(r,i){return r&&Ah(r,i,Wt)}function go(r,i){return bn(i,function(a){return pn(r[a])})}function Vn(r,i){i=In(i,r);for(var a=0,h=i.length;r!=null&&a<h;)r=r[en(i[a++])];return a&&a==h?r:t}function Ch(r,i,a){var h=i(r);return Ne(r)?h:wn(h,a(r))}function sr(r){return r==null?r===t?qe:Ve:zn&&zn in ut(r)?t1(r):p1(r)}function Wa(r,i){return r>i}function b0(r,i){return r!=null&&it.call(r,i)}function w0(r,i){return r!=null&&i in ut(r)}function E0(r,i,a){return r>=Zt(i,a)&&r<Vt(i,a)}function Ga(r,i,a){for(var h=a?Ca:Ys,y=r[0].length,O=r.length,A=O,N=V(O),M=1/0,J=[];A--;){var X=r[A];A&&i&&(X=bt(X,wr(i))),M=Zt(X.length,M),N[A]=!a&&(i||y>=120&&X.length>=120)?new Bn(A&&X):t}X=r[0];var ee=-1,ae=N[0];e:for(;++ee<y&&J.length<M;){var ye=X[ee],we=i?i(ye):ye;if(ye=a||ye!==0?ye:0,!(ae?Hi(ae,we):h(J,we,a))){for(A=O;--A;){var ze=N[A];if(!(ze?Hi(ze,we):h(r[A],we,a)))continue e}ae&&ae.push(we),J.push(ye)}}return J}function D0(r,i,a,h){return Qr(r,function(y,O,A){i(h,a(y),O,A)}),h}function Ji(r,i,a){i=In(i,r),r=vf(r,i);var h=r==null?r:r[en($r(i))];return h==null?t:kt(h,r,a)}function Th(r){return At(r)&&sr(r)==he}function S0(r){return At(r)&&sr(r)==De}function O0(r){return At(r)&&sr(r)==$}function Xi(r,i,a,h,y){return r===i?!0:r==null||i==null||!At(r)&&!At(i)?r!==r&&i!==i:I0(r,i,a,h,Xi,y)}function I0(r,i,a,h,y,O){var A=Ne(r),N=Ne(i),M=A?ve:er(r),J=N?ve:er(i);M=M==he?je:M,J=J==he?je:J;var X=M==je,ee=J==je,ae=M==J;if(ae&&Pn(r)){if(!Pn(i))return!1;A=!0,X=!1}if(ae&&!X)return O||(O=new Kr),A||Ii(r)?ff(r,i,a,h,y,O):Z0(r,i,M,a,h,y,O);if(!(a&R)){var ye=X&&it.call(r,"__wrapped__"),we=ee&&it.call(i,"__wrapped__");if(ye||we){var ze=ye?r.value():r,Ee=we?i.value():i;return O||(O=new Kr),y(ze,Ee,a,h,O)}}return ae?(O||(O=new Kr),e1(r,i,a,h,y,O)):!1}function x0(r){return At(r)&&er(r)==Se}function Ya(r,i,a,h){var y=a.length,O=y,A=!h;if(r==null)return!O;for(r=ut(r);y--;){var N=a[y];if(A&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++y<O;){N=a[y];var M=N[0],J=r[M],X=N[1];if(A&&N[2]){if(J===t&&!(M in r))return!1}else{var ee=new Kr;if(h)var ae=h(J,X,M,r,i,ee);if(!(ae===t?Xi(X,J,R|q,h,ee):ae))return!1}}return!0}function Nh(r){if(!Et(r)||u1(r))return!1;var i=pn(r)?xg:pa;return i.test(Wn(r))}function P0(r){return At(r)&&sr(r)==Me}function A0(r){return At(r)&&er(r)==Oe}function C0(r){return At(r)&&No(r.length)&&!!ot[sr(r)]}function Rh(r){return typeof r=="function"?r:r==null?_r:typeof r=="object"?Ne(r)?Fh(r[0],r[1]):Uh(r):rl(r)}function Ja(r){if(!es(r))return Rg(r);var i=[];for(var a in ut(r))it.call(r,a)&&a!="constructor"&&i.push(a);return i}function T0(r){if(!Et(r))return d1(r);var i=es(r),a=[];for(var h in r)h=="constructor"&&(i||!it.call(r,h))||a.push(h);return a}function Xa(r,i){return r<i}function $h(r,i){var a=-1,h=gr(r)?V(r.length):[];return Sn(r,function(y,O,A){h[++a]=i(y,O,A)}),h}function Uh(r){var i=lc(r);return i.length==1&&i[0][2]?yf(i[0][0],i[0][1]):function(a){return a===r||Ya(a,r,i)}}function Fh(r,i){return pc(r)&&gf(i)?yf(en(r),i):function(a){var h=Sc(a,r);return h===t&&h===i?Oc(a,r):Xi(i,h,R|q)}}function yo(r,i,a,h,y){r!==i&&Va(i,function(O,A){if(y||(y=new Kr),Et(O))N0(r,i,A,a,yo,h,y);else{var N=h?h(yc(r,A),O,A+"",r,i,y):t;N===t&&(N=O),Ba(r,A,N)}},yr)}function N0(r,i,a,h,y,O,A){var N=yc(r,a),M=yc(i,a),J=A.get(M);if(J){Ba(r,a,J);return}var X=O?O(N,M,a+"",r,i,A):t,ee=X===t;if(ee){var ae=Ne(M),ye=!ae&&Pn(M),we=!ae&&!ye&&Ii(M);X=M,ae||ye||we?Ne(N)?X=N:Rt(N)?X=pr(N):ye?(ee=!1,X=Gh(M,!0)):we?(ee=!1,X=Yh(M,!0)):X=[]:rs(M)||Gn(M)?(X=N,Gn(N)?X=kf(N):(!Et(N)||pn(N))&&(X=pf(M))):ee=!1}ee&&(A.set(M,X),y(X,M,h,O,A),A.delete(M)),Ba(r,a,X)}function jh(r,i){var a=r.length;if(a)return i+=i<0?a:0,dn(i,a)?r[i]:t}function Lh(r,i,a){i.length?i=bt(i,function(O){return Ne(O)?function(A){return Vn(A,O.length===1?O[0]:O)}:O}):i=[_r];var h=-1;i=bt(i,wr(me()));var y=$h(r,function(O,A,N){var M=bt(i,function(J){return J(O)});return{criteria:M,index:++h,value:O}});return sg(y,function(O,A){return V0(O,A,a)})}function R0(r,i){return Mh(r,i,function(a,h){return Oc(r,h)})}function Mh(r,i,a){for(var h=-1,y=i.length,O={};++h<y;){var A=i[h],N=Vn(r,A);a(N,A)&&Qi(O,In(A,r),N)}return O}function $0(r){return function(i){return Vn(i,r)}}function Qa(r,i,a,h){var y=h?ig:gi,O=-1,A=i.length,N=r;for(r===i&&(i=pr(i)),a&&(N=bt(r,wr(a)));++O<A;)for(var M=0,J=i[O],X=a?a(J):J;(M=y(N,X,M,h))>-1;)N!==r&&so.call(N,M,1),so.call(r,M,1);return r}function qh(r,i){for(var a=r?i.length:0,h=a-1;a--;){var y=i[a];if(a==h||y!==O){var O=y;dn(y)?so.call(r,y,1):rc(r,y)}}return r}function Za(r,i){return r+co(bh()*(i-r+1))}function U0(r,i,a,h){for(var y=-1,O=Vt(ao((i-r)/(a||1)),0),A=V(O);O--;)A[h?O:++y]=r,r+=a;return A}function ec(r,i){var a="";if(!r||i<1||i>G)return a;do i%2&&(a+=r),i=co(i/2),i&&(r+=r);while(i);return a}function Ke(r,i){return _c(_f(r,i,_r),r+"")}function F0(r){return Dh(xi(r))}function j0(r,i){var a=xi(r);return Io(a,Kn(i,0,a.length))}function Qi(r,i,a,h){if(!Et(r))return r;i=In(i,r);for(var y=-1,O=i.length,A=O-1,N=r;N!=null&&++y<O;){var M=en(i[y]),J=a;if(M==="__proto__"||M==="constructor"||M==="prototype")return r;if(y!=A){var X=N[M];J=h?h(X,M,N):t,J===t&&(J=Et(X)?X:dn(i[y+1])?[]:{})}Gi(N,M,J),N=N[M]}return r}var zh=uo?function(r,i){return uo.set(r,i),r}:_r,L0=oo?function(r,i){return oo(r,"toString",{configurable:!0,enumerable:!1,value:xc(i),writable:!0})}:_r;function M0(r){return Io(xi(r))}function Rr(r,i,a){var h=-1,y=r.length;i<0&&(i=-i>y?0:y+i),a=a>y?y:a,a<0&&(a+=y),y=i>a?0:a-i>>>0,i>>>=0;for(var O=V(y);++h<y;)O[h]=r[h+i];return O}function q0(r,i){var a;return Sn(r,function(h,y,O){return a=i(h,y,O),!a}),!!a}function _o(r,i,a){var h=0,y=r==null?h:r.length;if(typeof i=="number"&&i===i&&y<=ie){for(;h<y;){var O=h+y>>>1,A=r[O];A!==null&&!Dr(A)&&(a?A<=i:A<i)?h=O+1:y=O}return y}return tc(r,i,_r,a)}function tc(r,i,a,h){var y=0,O=r==null?0:r.length;if(O===0)return 0;i=a(i);for(var A=i!==i,N=i===null,M=Dr(i),J=i===t;y<O;){var X=co((y+O)/2),ee=a(r[X]),ae=ee!==t,ye=ee===null,we=ee===ee,ze=Dr(ee);if(A)var Ee=h||we;else J?Ee=we&&(h||ae):N?Ee=we&&ae&&(h||!ye):M?Ee=we&&ae&&!ye&&(h||!ze):ye||ze?Ee=!1:Ee=h?ee<=i:ee<i;Ee?y=X+1:O=X}return Zt(O,Ie)}function Hh(r,i){for(var a=-1,h=r.length,y=0,O=[];++a<h;){var A=r[a],N=i?i(A):A;if(!a||!Vr(N,M)){var M=N;O[y++]=A===0?0:A}}return O}function Bh(r){return typeof r=="number"?r:Dr(r)?Y:+r}function Er(r){if(typeof r=="string")return r;if(Ne(r))return bt(r,Er)+"";if(Dr(r))return wh?wh.call(r):"";var i=r+"";return i=="0"&&1/r==-re?"-0":i}function On(r,i,a){var h=-1,y=Ys,O=r.length,A=!0,N=[],M=N;if(a)A=!1,y=Ca;else if(O>=o){var J=i?null:X0(r);if(J)return Xs(J);A=!1,y=Hi,M=new Bn}else M=i?[]:N;e:for(;++h<O;){var X=r[h],ee=i?i(X):X;if(X=a||X!==0?X:0,A&&ee===ee){for(var ae=M.length;ae--;)if(M[ae]===ee)continue e;i&&M.push(ee),N.push(X)}else y(M,ee,a)||(M!==N&&M.push(ee),N.push(X))}return N}function rc(r,i){return i=In(i,r),r=vf(r,i),r==null||delete r[en($r(i))]}function Kh(r,i,a,h){return Qi(r,i,a(Vn(r,i)),h)}function vo(r,i,a,h){for(var y=r.length,O=h?y:-1;(h?O--:++O<y)&&i(r[O],O,r););return a?Rr(r,h?0:O,h?O+1:y):Rr(r,h?O+1:0,h?y:O)}function Vh(r,i){var a=r;return a instanceof Ye&&(a=a.value()),Ta(i,function(h,y){return y.func.apply(y.thisArg,wn([h],y.args))},a)}function nc(r,i,a){var h=r.length;if(h<2)return h?On(r[0]):[];for(var y=-1,O=V(h);++y<h;)for(var A=r[y],N=-1;++N<h;)N!=y&&(O[y]=Yi(O[y]||A,r[N],i,a));return On(Jt(O,1),i,a)}function kh(r,i,a){for(var h=-1,y=r.length,O=i.length,A={};++h<y;){var N=h<O?i[h]:t;a(A,r[h],N)}return A}function ic(r){return Rt(r)?r:[]}function sc(r){return typeof r=="function"?r:_r}function In(r,i){return Ne(r)?r:pc(r,i)?[r]:Ef(nt(r))}var z0=Ke;function xn(r,i,a){var h=r.length;return a=a===t?h:a,!i&&a>=h?r:Rr(r,i,a)}var Wh=Pg||function(r){return Xe.clearTimeout(r)};function Gh(r,i){if(i)return r.slice();var a=r.length,h=gh?gh(a):new r.constructor(a);return r.copy(h),h}function oc(r){var i=new r.constructor(r.byteLength);return new no(i).set(new no(r)),i}function H0(r,i){var a=i?oc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function B0(r){var i=new r.constructor(r.source,xr.exec(r));return i.lastIndex=r.lastIndex,i}function K0(r){return Wi?ut(Wi.call(r)):{}}function Yh(r,i){var a=i?oc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Jh(r,i){if(r!==i){var a=r!==t,h=r===null,y=r===r,O=Dr(r),A=i!==t,N=i===null,M=i===i,J=Dr(i);if(!N&&!J&&!O&&r>i||O&&A&&M&&!N&&!J||h&&A&&M||!a&&M||!y)return 1;if(!h&&!O&&!J&&r<i||J&&a&&y&&!h&&!O||N&&a&&y||!A&&y||!M)return-1}return 0}function V0(r,i,a){for(var h=-1,y=r.criteria,O=i.criteria,A=y.length,N=a.length;++h<A;){var M=Jh(y[h],O[h]);if(M){if(h>=N)return M;var J=a[h];return M*(J=="desc"?-1:1)}}return r.index-i.index}function Xh(r,i,a,h){for(var y=-1,O=r.length,A=a.length,N=-1,M=i.length,J=Vt(O-A,0),X=V(M+J),ee=!h;++N<M;)X[N]=i[N];for(;++y<A;)(ee||y<O)&&(X[a[y]]=r[y]);for(;J--;)X[N++]=r[y++];return X}function Qh(r,i,a,h){for(var y=-1,O=r.length,A=-1,N=a.length,M=-1,J=i.length,X=Vt(O-N,0),ee=V(X+J),ae=!h;++y<X;)ee[y]=r[y];for(var ye=y;++M<J;)ee[ye+M]=i[M];for(;++A<N;)(ae||y<O)&&(ee[ye+a[A]]=r[y++]);return ee}function pr(r,i){var a=-1,h=r.length;for(i||(i=V(h));++a<h;)i[a]=r[a];return i}function Zr(r,i,a,h){var y=!a;a||(a={});for(var O=-1,A=i.length;++O<A;){var N=i[O],M=h?h(a[N],r[N],N,a,r):t;M===t&&(M=r[N]),y?hn(a,N,M):Gi(a,N,M)}return a}function k0(r,i){return Zr(r,dc(r),i)}function W0(r,i){return Zr(r,lf(r),i)}function mo(r,i){return function(a,h){var y=Ne(a)?Qp:g0,O=i?i():{};return y(a,r,me(h,2),O)}}function Di(r){return Ke(function(i,a){var h=-1,y=a.length,O=y>1?a[y-1]:t,A=y>2?a[2]:t;for(O=r.length>3&&typeof O=="function"?(y--,O):t,A&&or(a[0],a[1],A)&&(O=y<3?t:O,y=1),i=ut(i);++h<y;){var N=a[h];N&&r(i,N,h,O)}return i})}function Zh(r,i){return function(a,h){if(a==null)return a;if(!gr(a))return r(a,h);for(var y=a.length,O=i?y:-1,A=ut(a);(i?O--:++O<y)&&h(A[O],O,A)!==!1;);return a}}function ef(r){return function(i,a,h){for(var y=-1,O=ut(i),A=h(i),N=A.length;N--;){var M=A[r?N:++y];if(a(O[M],M,O)===!1)break}return i}}function G0(r,i,a){var h=i&L,y=Zi(r);function O(){var A=this&&this!==Xe&&this instanceof O?y:r;return A.apply(h?a:this,arguments)}return O}function tf(r){return function(i){i=nt(i);var a=yi(i)?Br(i):t,h=a?a[0]:i.charAt(0),y=a?xn(a,1).join(""):i.slice(1);return h[r]()+y}}function Si(r){return function(i){return Ta(el(Zf(i).replace(qi,"")),r,"")}}function Zi(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Ei(r.prototype),h=r.apply(a,i);return Et(h)?h:a}}function Y0(r,i,a){var h=Zi(r);function y(){for(var O=arguments.length,A=V(O),N=O,M=Oi(y);N--;)A[N]=arguments[N];var J=O<3&&A[0]!==M&&A[O-1]!==M?[]:En(A,M);if(O-=J.length,O<a)return af(r,i,bo,y.placeholder,t,A,J,t,t,a-O);var X=this&&this!==Xe&&this instanceof y?h:r;return kt(X,this,A)}return y}function rf(r){return function(i,a,h){var y=ut(i);if(!gr(i)){var O=me(a,3);i=Wt(i),a=function(N){return O(y[N],N,y)}}var A=r(i,a,h);return A>-1?y[O?i[A]:A]:t}}function nf(r){return ln(function(i){var a=i.length,h=a,y=Tr.prototype.thru;for(r&&i.reverse();h--;){var O=i[h];if(typeof O!="function")throw new Cr(l);if(y&&!A&&So(O)=="wrapper")var A=new Tr([],!0)}for(h=A?h:a;++h<a;){O=i[h];var N=So(O),M=N=="wrapper"?fc(O):t;M&&gc(M[0])&&M[1]==(u|E|w|b)&&!M[4].length&&M[9]==1?A=A[So(M[0])].apply(A,M[3]):A=O.length==1&&gc(O)?A[N]():A.thru(O)}return function(){var J=arguments,X=J[0];if(A&&J.length==1&&Ne(X))return A.plant(X).value();for(var ee=0,ae=a?i[ee].apply(this,J):X;++ee<a;)ae=i[ee].call(this,ae);return ae}})}function bo(r,i,a,h,y,O,A,N,M,J){var X=i&u,ee=i&L,ae=i&Q,ye=i&(E|v),we=i&K,ze=ae?t:Zi(r);function Ee(){for(var We=arguments.length,Qe=V(We),Sr=We;Sr--;)Qe[Sr]=arguments[Sr];if(ye)var ar=Oi(Ee),Or=ag(Qe,ar);if(h&&(Qe=Xh(Qe,h,y,ye)),O&&(Qe=Qh(Qe,O,A,ye)),We-=Or,ye&&We<J){var $t=En(Qe,ar);return af(r,i,bo,Ee.placeholder,a,Qe,$t,N,M,J-We)}var kr=ee?a:this,yn=ae?kr[r]:r;return We=Qe.length,N?Qe=g1(Qe,N):we&&We>1&&Qe.reverse(),X&&M<We&&(Qe.length=M),this&&this!==Xe&&this instanceof Ee&&(yn=ze||Zi(yn)),yn.apply(kr,Qe)}return Ee}function sf(r,i){return function(a,h){return D0(a,r,i(h),{})}}function wo(r,i){return function(a,h){var y;if(a===t&&h===t)return i;if(a!==t&&(y=a),h!==t){if(y===t)return h;typeof a=="string"||typeof h=="string"?(a=Er(a),h=Er(h)):(a=Bh(a),h=Bh(h)),y=r(a,h)}return y}}function ac(r){return ln(function(i){return i=bt(i,wr(me())),Ke(function(a){var h=this;return r(i,function(y){return kt(y,h,a)})})})}function Eo(r,i){i=i===t?" ":Er(i);var a=i.length;if(a<2)return a?ec(i,r):i;var h=ec(i,ao(r/_i(i)));return yi(i)?xn(Br(h),0,r).join(""):h.slice(0,r)}function J0(r,i,a,h){var y=i&L,O=Zi(r);function A(){for(var N=-1,M=arguments.length,J=-1,X=h.length,ee=V(X+M),ae=this&&this!==Xe&&this instanceof A?O:r;++J<X;)ee[J]=h[J];for(;M--;)ee[J++]=arguments[++N];return kt(ae,y?a:this,ee)}return A}function of(r){return function(i,a,h){return h&&typeof h!="number"&&or(i,a,h)&&(a=h=t),i=gn(i),a===t?(a=i,i=0):a=gn(a),h=h===t?i<a?1:-1:gn(h),U0(i,a,h,r)}}function Do(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Ur(i),a=Ur(a)),r(i,a)}}function af(r,i,a,h,y,O,A,N,M,J){var X=i&E,ee=X?A:t,ae=X?t:A,ye=X?O:t,we=X?t:O;i|=X?w:g,i&=~(X?g:w),i&p||(i&=~(L|Q));var ze=[r,i,y,ye,ee,we,ae,N,M,J],Ee=a.apply(t,ze);return gc(r)&&mf(Ee,ze),Ee.placeholder=h,bf(Ee,r,i)}function cc(r){var i=Kt[r];return function(a,h){if(a=Ur(a),h=h==null?0:Zt(Le(h),292),h&&mh(a)){var y=(nt(a)+"e").split("e"),O=i(y[0]+"e"+(+y[1]+h));return y=(nt(O)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return i(a)}}var X0=bi&&1/Xs(new bi([,-0]))[1]==re?function(r){return new bi(r)}:Cc;function cf(r){return function(i){var a=er(i);return a==Se?La(i):a==Oe?pg(i):og(i,r(i))}}function fn(r,i,a,h,y,O,A,N){var M=i&Q;if(!M&&typeof r!="function")throw new Cr(l);var J=h?h.length:0;if(J||(i&=~(w|g),h=y=t),A=A===t?A:Vt(Le(A),0),N=N===t?N:Le(N),J-=y?y.length:0,i&g){var X=h,ee=y;h=y=t}var ae=M?t:fc(r),ye=[r,i,a,h,y,X,ee,O,A,N];if(ae&&l1(ye,ae),r=ye[0],i=ye[1],a=ye[2],h=ye[3],y=ye[4],N=ye[9]=ye[9]===t?M?0:r.length:Vt(ye[9]-J,0),!N&&i&(E|v)&&(i&=~(E|v)),!i||i==L)var we=G0(r,i,a);else i==E||i==v?we=Y0(r,i,N):(i==w||i==(L|w))&&!y.length?we=J0(r,i,a,h):we=bo.apply(t,ye);var ze=ae?zh:mf;return bf(ze(we,ye),r,i)}function uf(r,i,a,h){return r===t||Vr(r,mi[a])&&!it.call(h,a)?i:r}function hf(r,i,a,h,y,O){return Et(r)&&Et(i)&&(O.set(i,r),yo(r,i,t,hf,O),O.delete(i)),r}function Q0(r){return rs(r)?t:r}function ff(r,i,a,h,y,O){var A=a&R,N=r.length,M=i.length;if(N!=M&&!(A&&M>N))return!1;var J=O.get(r),X=O.get(i);if(J&&X)return J==i&&X==r;var ee=-1,ae=!0,ye=a&q?new Bn:t;for(O.set(r,i),O.set(i,r);++ee<N;){var we=r[ee],ze=i[ee];if(h)var Ee=A?h(ze,we,ee,i,r,O):h(we,ze,ee,r,i,O);if(Ee!==t){if(Ee)continue;ae=!1;break}if(ye){if(!Na(i,function(We,Qe){if(!Hi(ye,Qe)&&(we===We||y(we,We,a,h,O)))return ye.push(Qe)})){ae=!1;break}}else if(!(we===ze||y(we,ze,a,h,O))){ae=!1;break}}return O.delete(r),O.delete(i),ae}function Z0(r,i,a,h,y,O,A){switch(a){case Ae:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case De:return!(r.byteLength!=i.byteLength||!O(new no(r),new no(i)));case z:case $:case He:return Vr(+r,+i);case T:return r.name==i.name&&r.message==i.message;case Me:case Re:return r==i+"";case Se:var N=La;case Oe:var M=h&R;if(N||(N=Xs),r.size!=i.size&&!M)return!1;var J=A.get(r);if(J)return J==i;h|=q,A.set(r,i);var X=ff(N(r),N(i),h,y,O,A);return A.delete(r),X;case $e:if(Wi)return Wi.call(r)==Wi.call(i)}return!1}function e1(r,i,a,h,y,O){var A=a&R,N=uc(r),M=N.length,J=uc(i),X=J.length;if(M!=X&&!A)return!1;for(var ee=M;ee--;){var ae=N[ee];if(!(A?ae in i:it.call(i,ae)))return!1}var ye=O.get(r),we=O.get(i);if(ye&&we)return ye==i&&we==r;var ze=!0;O.set(r,i),O.set(i,r);for(var Ee=A;++ee<M;){ae=N[ee];var We=r[ae],Qe=i[ae];if(h)var Sr=A?h(Qe,We,ae,i,r,O):h(We,Qe,ae,r,i,O);if(!(Sr===t?We===Qe||y(We,Qe,a,h,O):Sr)){ze=!1;break}Ee||(Ee=ae=="constructor")}if(ze&&!Ee){var ar=r.constructor,Or=i.constructor;ar!=Or&&"constructor"in r&&"constructor"in i&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(ze=!1)}return O.delete(r),O.delete(i),ze}function ln(r){return _c(_f(r,t,If),r+"")}function uc(r){return Ch(r,Wt,dc)}function hc(r){return Ch(r,yr,lf)}var fc=uo?function(r){return uo.get(r)}:Cc;function So(r){for(var i=r.name+"",a=wi[i],h=it.call(wi,i)?a.length:0;h--;){var y=a[h],O=y.func;if(O==null||O==r)return y.name}return i}function Oi(r){var i=it.call(D,"placeholder")?D:r;return i.placeholder}function me(){var r=D.iteratee||Pc;return r=r===Pc?Rh:r,arguments.length?r(arguments[0],arguments[1]):r}function Oo(r,i){var a=r.__data__;return c1(i)?a[typeof i=="string"?"string":"hash"]:a.map}function lc(r){for(var i=Wt(r),a=i.length;a--;){var h=i[a],y=r[h];i[a]=[h,y,gf(y)]}return i}function kn(r,i){var a=fg(r,i);return Nh(a)?a:t}function t1(r){var i=it.call(r,zn),a=r[zn];try{r[zn]=t;var h=!0}catch{}var y=to.call(r);return h&&(i?r[zn]=a:delete r[zn]),y}var dc=qa?function(r){return r==null?[]:(r=ut(r),bn(qa(r),function(i){return _h.call(r,i)}))}:Tc,lf=qa?function(r){for(var i=[];r;)wn(i,dc(r)),r=io(r);return i}:Tc,er=sr;(za&&er(new za(new ArrayBuffer(1)))!=Ae||Ki&&er(new Ki)!=Se||Ha&&er(Ha.resolve())!=yt||bi&&er(new bi)!=Oe||Vi&&er(new Vi)!=Pe)&&(er=function(r){var i=sr(r),a=i==je?r.constructor:t,h=a?Wn(a):"";if(h)switch(h){case jg:return Ae;case Lg:return Se;case Mg:return yt;case qg:return Oe;case zg:return Pe}return i});function r1(r,i,a){for(var h=-1,y=a.length;++h<y;){var O=a[h],A=O.size;switch(O.type){case"drop":r+=A;break;case"dropRight":i-=A;break;case"take":i=Zt(i,r+A);break;case"takeRight":r=Vt(r,i-A);break}}return{start:r,end:i}}function n1(r){var i=r.match(ht);return i?i[1].split(Mt):[]}function df(r,i,a){i=In(i,r);for(var h=-1,y=i.length,O=!1;++h<y;){var A=en(i[h]);if(!(O=r!=null&&a(r,A)))break;r=r[A]}return O||++h!=y?O:(y=r==null?0:r.length,!!y&&No(y)&&dn(A,y)&&(Ne(r)||Gn(r)))}function i1(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function pf(r){return typeof r.constructor=="function"&&!es(r)?Ei(io(r)):{}}function s1(r,i,a){var h=r.constructor;switch(i){case De:return oc(r);case z:case $:return new h(+r);case Ae:return H0(r,a);case Be:case xe:case ke:case Ge:case et:case tt:case Je:case rr:case lr:return Yh(r,a);case Se:return new h;case He:case Re:return new h(r);case Me:return B0(r);case Oe:return new h;case $e:return K0(r)}}function o1(r,i){var a=i.length;if(!a)return r;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),r.replace(Pt,`{
/* [wrapped with `+i+`] */
`)}function a1(r){return Ne(r)||Gn(r)||!!(vh&&r&&r[vh])}function dn(r,i){var a=typeof r;return i=i??G,!!i&&(a=="number"||a!="symbol"&&ya.test(r))&&r>-1&&r%1==0&&r<i}function or(r,i,a){if(!Et(a))return!1;var h=typeof i;return(h=="number"?gr(a)&&dn(i,a.length):h=="string"&&i in a)?Vr(a[i],r):!1}function pc(r,i){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Dr(r)?!0:Ft.test(r)||!mt.test(r)||i!=null&&r in ut(i)}function c1(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function gc(r){var i=So(r),a=D[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(r===a)return!0;var h=fc(a);return!!h&&r===h[0]}function u1(r){return!!ph&&ph in r}var h1=Zs?pn:Nc;function es(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||mi;return r===a}function gf(r){return r===r&&!Et(r)}function yf(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==t||r in ut(a))}}function f1(r){var i=Co(r,function(h){return a.size===_&&a.clear(),h}),a=i.cache;return i}function l1(r,i){var a=r[1],h=i[1],y=a|h,O=y<(L|Q|u),A=h==u&&a==E||h==u&&a==b&&r[7].length<=i[8]||h==(u|b)&&i[7].length<=i[8]&&a==E;if(!(O||A))return r;h&L&&(r[2]=i[2],y|=a&L?0:p);var N=i[3];if(N){var M=r[3];r[3]=M?Xh(M,N,i[4]):N,r[4]=M?En(r[3],S):i[4]}return N=i[5],N&&(M=r[5],r[5]=M?Qh(M,N,i[6]):N,r[6]=M?En(r[5],S):i[6]),N=i[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?i[8]:Zt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=y,r}function d1(r){var i=[];if(r!=null)for(var a in ut(r))i.push(a);return i}function p1(r){return to.call(r)}function _f(r,i,a){return i=Vt(i===t?r.length-1:i,0),function(){for(var h=arguments,y=-1,O=Vt(h.length-i,0),A=V(O);++y<O;)A[y]=h[i+y];y=-1;for(var N=V(i+1);++y<i;)N[y]=h[y];return N[i]=a(A),kt(r,this,N)}}function vf(r,i){return i.length<2?r:Vn(r,Rr(i,0,-1))}function g1(r,i){for(var a=r.length,h=Zt(i.length,a),y=pr(r);h--;){var O=i[h];r[h]=dn(O,a)?y[O]:t}return r}function yc(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var mf=wf(zh),ts=Cg||function(r,i){return Xe.setTimeout(r,i)},_c=wf(L0);function bf(r,i,a){var h=i+"";return _c(r,o1(h,y1(n1(h),a)))}function wf(r){var i=0,a=0;return function(){var h=$g(),y=ge-(h-a);if(a=h,y>0){if(++i>=ce)return arguments[0]}else i=0;return r.apply(t,arguments)}}function Io(r,i){var a=-1,h=r.length,y=h-1;for(i=i===t?h:i;++a<i;){var O=Za(a,y),A=r[O];r[O]=r[a],r[a]=A}return r.length=i,r}var Ef=f1(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(jt,function(a,h,y,O){i.push(y?O.replace(ha,"$1"):h||a)}),i});function en(r){if(typeof r=="string"||Dr(r))return r;var i=r+"";return i=="0"&&1/r==-re?"-0":i}function Wn(r){if(r!=null){try{return eo.call(r)}catch{}try{return r+""}catch{}}return""}function y1(r,i){return Ar(be,function(a){var h="_."+a[0];i&a[1]&&!Ys(r,h)&&r.push(h)}),r.sort()}function Df(r){if(r instanceof Ye)return r.clone();var i=new Tr(r.__wrapped__,r.__chain__);return i.__actions__=pr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function _1(r,i,a){(a?or(r,i,a):i===t)?i=1:i=Vt(Le(i),0);var h=r==null?0:r.length;if(!h||i<1)return[];for(var y=0,O=0,A=V(ao(h/i));y<h;)A[O++]=Rr(r,y,y+=i);return A}function v1(r){for(var i=-1,a=r==null?0:r.length,h=0,y=[];++i<a;){var O=r[i];O&&(y[h++]=O)}return y}function m1(){var r=arguments.length;if(!r)return[];for(var i=V(r-1),a=arguments[0],h=r;h--;)i[h-1]=arguments[h];return wn(Ne(a)?pr(a):[a],Jt(i,1))}var b1=Ke(function(r,i){return Rt(r)?Yi(r,Jt(i,1,Rt,!0)):[]}),w1=Ke(function(r,i){var a=$r(i);return Rt(a)&&(a=t),Rt(r)?Yi(r,Jt(i,1,Rt,!0),me(a,2)):[]}),E1=Ke(function(r,i){var a=$r(i);return Rt(a)&&(a=t),Rt(r)?Yi(r,Jt(i,1,Rt,!0),t,a):[]});function D1(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),Rr(r,i<0?0:i,h)):[]}function S1(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Rr(r,0,i<0?0:i)):[]}function O1(r,i){return r&&r.length?vo(r,me(i,3),!0,!0):[]}function I1(r,i){return r&&r.length?vo(r,me(i,3),!0):[]}function x1(r,i,a,h){var y=r==null?0:r.length;return y?(a&&typeof a!="number"&&or(r,i,a)&&(a=0,h=y),m0(r,i,a,h)):[]}function Sf(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Le(a);return y<0&&(y=Vt(h+y,0)),Js(r,me(i,3),y)}function Of(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=h-1;return a!==t&&(y=Le(a),y=a<0?Vt(h+y,0):Zt(y,h-1)),Js(r,me(i,3),y,!0)}function If(r){var i=r==null?0:r.length;return i?Jt(r,1):[]}function P1(r){var i=r==null?0:r.length;return i?Jt(r,re):[]}function A1(r,i){var a=r==null?0:r.length;return a?(i=i===t?1:Le(i),Jt(r,i)):[]}function C1(r){for(var i=-1,a=r==null?0:r.length,h={};++i<a;){var y=r[i];h[y[0]]=y[1]}return h}function xf(r){return r&&r.length?r[0]:t}function T1(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Le(a);return y<0&&(y=Vt(h+y,0)),gi(r,i,y)}function N1(r){var i=r==null?0:r.length;return i?Rr(r,0,-1):[]}var R1=Ke(function(r){var i=bt(r,ic);return i.length&&i[0]===r[0]?Ga(i):[]}),$1=Ke(function(r){var i=$r(r),a=bt(r,ic);return i===$r(a)?i=t:a.pop(),a.length&&a[0]===r[0]?Ga(a,me(i,2)):[]}),U1=Ke(function(r){var i=$r(r),a=bt(r,ic);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===r[0]?Ga(a,t,i):[]});function F1(r,i){return r==null?"":Ng.call(r,i)}function $r(r){var i=r==null?0:r.length;return i?r[i-1]:t}function j1(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=h;return a!==t&&(y=Le(a),y=y<0?Vt(h+y,0):Zt(y,h-1)),i===i?yg(r,i,y):Js(r,oh,y,!0)}function L1(r,i){return r&&r.length?jh(r,Le(i)):t}var M1=Ke(Pf);function Pf(r,i){return r&&r.length&&i&&i.length?Qa(r,i):r}function q1(r,i,a){return r&&r.length&&i&&i.length?Qa(r,i,me(a,2)):r}function z1(r,i,a){return r&&r.length&&i&&i.length?Qa(r,i,t,a):r}var H1=ln(function(r,i){var a=r==null?0:r.length,h=Ka(r,i);return qh(r,bt(i,function(y){return dn(y,a)?+y:y}).sort(Jh)),h});function B1(r,i){var a=[];if(!(r&&r.length))return a;var h=-1,y=[],O=r.length;for(i=me(i,3);++h<O;){var A=r[h];i(A,h,r)&&(a.push(A),y.push(h))}return qh(r,y),a}function vc(r){return r==null?r:Fg.call(r)}function K1(r,i,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&or(r,i,a)?(i=0,a=h):(i=i==null?0:Le(i),a=a===t?h:Le(a)),Rr(r,i,a)):[]}function V1(r,i){return _o(r,i)}function k1(r,i,a){return tc(r,i,me(a,2))}function W1(r,i){var a=r==null?0:r.length;if(a){var h=_o(r,i);if(h<a&&Vr(r[h],i))return h}return-1}function G1(r,i){return _o(r,i,!0)}function Y1(r,i,a){return tc(r,i,me(a,2),!0)}function J1(r,i){var a=r==null?0:r.length;if(a){var h=_o(r,i,!0)-1;if(Vr(r[h],i))return h}return-1}function X1(r){return r&&r.length?Hh(r):[]}function Q1(r,i){return r&&r.length?Hh(r,me(i,2)):[]}function Z1(r){var i=r==null?0:r.length;return i?Rr(r,1,i):[]}function ey(r,i,a){return r&&r.length?(i=a||i===t?1:Le(i),Rr(r,0,i<0?0:i)):[]}function ty(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Rr(r,i<0?0:i,h)):[]}function ry(r,i){return r&&r.length?vo(r,me(i,3),!1,!0):[]}function ny(r,i){return r&&r.length?vo(r,me(i,3)):[]}var iy=Ke(function(r){return On(Jt(r,1,Rt,!0))}),sy=Ke(function(r){var i=$r(r);return Rt(i)&&(i=t),On(Jt(r,1,Rt,!0),me(i,2))}),oy=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,On(Jt(r,1,Rt,!0),t,i)});function ay(r){return r&&r.length?On(r):[]}function cy(r,i){return r&&r.length?On(r,me(i,2)):[]}function uy(r,i){return i=typeof i=="function"?i:t,r&&r.length?On(r,t,i):[]}function mc(r){if(!(r&&r.length))return[];var i=0;return r=bn(r,function(a){if(Rt(a))return i=Vt(a.length,i),!0}),Fa(i,function(a){return bt(r,Ra(a))})}function Af(r,i){if(!(r&&r.length))return[];var a=mc(r);return i==null?a:bt(a,function(h){return kt(i,t,h)})}var hy=Ke(function(r,i){return Rt(r)?Yi(r,i):[]}),fy=Ke(function(r){return nc(bn(r,Rt))}),ly=Ke(function(r){var i=$r(r);return Rt(i)&&(i=t),nc(bn(r,Rt),me(i,2))}),dy=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,nc(bn(r,Rt),t,i)}),py=Ke(mc);function gy(r,i){return kh(r||[],i||[],Gi)}function yy(r,i){return kh(r||[],i||[],Qi)}var _y=Ke(function(r){var i=r.length,a=i>1?r[i-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Af(r,a)});function Cf(r){var i=D(r);return i.__chain__=!0,i}function vy(r,i){return i(r),r}function xo(r,i){return i(r)}var my=ln(function(r){var i=r.length,a=i?r[0]:0,h=this.__wrapped__,y=function(O){return Ka(O,r)};return i>1||this.__actions__.length||!(h instanceof Ye)||!dn(a)?this.thru(y):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:xo,args:[y],thisArg:t}),new Tr(h,this.__chain__).thru(function(O){return i&&!O.length&&O.push(t),O}))});function by(){return Cf(this)}function wy(){return new Tr(this.value(),this.__chain__)}function Ey(){this.__values__===t&&(this.__values__=Kf(this.value()));var r=this.__index__>=this.__values__.length,i=r?t:this.__values__[this.__index__++];return{done:r,value:i}}function Dy(){return this}function Sy(r){for(var i,a=this;a instanceof fo;){var h=Df(a);h.__index__=0,h.__values__=t,i?y.__wrapped__=h:i=h;var y=h;a=a.__wrapped__}return y.__wrapped__=r,i}function Oy(){var r=this.__wrapped__;if(r instanceof Ye){var i=r;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:xo,args:[vc],thisArg:t}),new Tr(i,this.__chain__)}return this.thru(vc)}function Iy(){return Vh(this.__wrapped__,this.__actions__)}var xy=mo(function(r,i,a){it.call(r,a)?++r[a]:hn(r,a,1)});function Py(r,i,a){var h=Ne(r)?ih:v0;return a&&or(r,i,a)&&(i=t),h(r,me(i,3))}function Ay(r,i){var a=Ne(r)?bn:Ph;return a(r,me(i,3))}var Cy=rf(Sf),Ty=rf(Of);function Ny(r,i){return Jt(Po(r,i),1)}function Ry(r,i){return Jt(Po(r,i),re)}function $y(r,i,a){return a=a===t?1:Le(a),Jt(Po(r,i),a)}function Tf(r,i){var a=Ne(r)?Ar:Sn;return a(r,me(i,3))}function Nf(r,i){var a=Ne(r)?Zp:xh;return a(r,me(i,3))}var Uy=mo(function(r,i,a){it.call(r,a)?r[a].push(i):hn(r,a,[i])});function Fy(r,i,a,h){r=gr(r)?r:xi(r),a=a&&!h?Le(a):0;var y=r.length;return a<0&&(a=Vt(y+a,0)),Ro(r)?a<=y&&r.indexOf(i,a)>-1:!!y&&gi(r,i,a)>-1}var jy=Ke(function(r,i,a){var h=-1,y=typeof i=="function",O=gr(r)?V(r.length):[];return Sn(r,function(A){O[++h]=y?kt(i,A,a):Ji(A,i,a)}),O}),Ly=mo(function(r,i,a){hn(r,a,i)});function Po(r,i){var a=Ne(r)?bt:$h;return a(r,me(i,3))}function My(r,i,a,h){return r==null?[]:(Ne(i)||(i=i==null?[]:[i]),a=h?t:a,Ne(a)||(a=a==null?[]:[a]),Lh(r,i,a))}var qy=mo(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function zy(r,i,a){var h=Ne(r)?Ta:ch,y=arguments.length<3;return h(r,me(i,4),a,y,Sn)}function Hy(r,i,a){var h=Ne(r)?eg:ch,y=arguments.length<3;return h(r,me(i,4),a,y,xh)}function By(r,i){var a=Ne(r)?bn:Ph;return a(r,To(me(i,3)))}function Ky(r){var i=Ne(r)?Dh:F0;return i(r)}function Vy(r,i,a){(a?or(r,i,a):i===t)?i=1:i=Le(i);var h=Ne(r)?d0:j0;return h(r,i)}function ky(r){var i=Ne(r)?p0:M0;return i(r)}function Wy(r){if(r==null)return 0;if(gr(r))return Ro(r)?_i(r):r.length;var i=er(r);return i==Se||i==Oe?r.size:Ja(r).length}function Gy(r,i,a){var h=Ne(r)?Na:q0;return a&&or(r,i,a)&&(i=t),h(r,me(i,3))}var Yy=Ke(function(r,i){if(r==null)return[];var a=i.length;return a>1&&or(r,i[0],i[1])?i=[]:a>2&&or(i[0],i[1],i[2])&&(i=[i[0]]),Lh(r,Jt(i,1),[])}),Ao=Ag||function(){return Xe.Date.now()};function Jy(r,i){if(typeof i!="function")throw new Cr(l);return r=Le(r),function(){if(--r<1)return i.apply(this,arguments)}}function Rf(r,i,a){return i=a?t:i,i=r&&i==null?r.length:i,fn(r,u,t,t,t,t,i)}function $f(r,i){var a;if(typeof i!="function")throw new Cr(l);return r=Le(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=t),a}}var bc=Ke(function(r,i,a){var h=L;if(a.length){var y=En(a,Oi(bc));h|=w}return fn(r,h,i,a,y)}),Uf=Ke(function(r,i,a){var h=L|Q;if(a.length){var y=En(a,Oi(Uf));h|=w}return fn(i,h,r,a,y)});function Ff(r,i,a){i=a?t:i;var h=fn(r,E,t,t,t,t,t,i);return h.placeholder=Ff.placeholder,h}function jf(r,i,a){i=a?t:i;var h=fn(r,v,t,t,t,t,t,i);return h.placeholder=jf.placeholder,h}function Lf(r,i,a){var h,y,O,A,N,M,J=0,X=!1,ee=!1,ae=!0;if(typeof r!="function")throw new Cr(l);i=Ur(i)||0,Et(a)&&(X=!!a.leading,ee="maxWait"in a,O=ee?Vt(Ur(a.maxWait)||0,i):O,ae="trailing"in a?!!a.trailing:ae);function ye($t){var kr=h,yn=y;return h=y=t,J=$t,A=r.apply(yn,kr),A}function we($t){return J=$t,N=ts(We,i),X?ye($t):A}function ze($t){var kr=$t-M,yn=$t-J,nl=i-kr;return ee?Zt(nl,O-yn):nl}function Ee($t){var kr=$t-M,yn=$t-J;return M===t||kr>=i||kr<0||ee&&yn>=O}function We(){var $t=Ao();if(Ee($t))return Qe($t);N=ts(We,ze($t))}function Qe($t){return N=t,ae&&h?ye($t):(h=y=t,A)}function Sr(){N!==t&&Wh(N),J=0,h=M=y=N=t}function ar(){return N===t?A:Qe(Ao())}function Or(){var $t=Ao(),kr=Ee($t);if(h=arguments,y=this,M=$t,kr){if(N===t)return we(M);if(ee)return Wh(N),N=ts(We,i),ye(M)}return N===t&&(N=ts(We,i)),A}return Or.cancel=Sr,Or.flush=ar,Or}var Xy=Ke(function(r,i){return Ih(r,1,i)}),Qy=Ke(function(r,i,a){return Ih(r,Ur(i)||0,a)});function Zy(r){return fn(r,K)}function Co(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Cr(l);var a=function(){var h=arguments,y=i?i.apply(this,h):h[0],O=a.cache;if(O.has(y))return O.get(y);var A=r.apply(this,h);return a.cache=O.set(y,A)||O,A};return a.cache=new(Co.Cache||un),a}Co.Cache=un;function To(r){if(typeof r!="function")throw new Cr(l);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function e_(r){return $f(2,r)}var t_=z0(function(r,i){i=i.length==1&&Ne(i[0])?bt(i[0],wr(me())):bt(Jt(i,1),wr(me()));var a=i.length;return Ke(function(h){for(var y=-1,O=Zt(h.length,a);++y<O;)h[y]=i[y].call(this,h[y]);return kt(r,this,h)})}),wc=Ke(function(r,i){var a=En(i,Oi(wc));return fn(r,w,t,i,a)}),Mf=Ke(function(r,i){var a=En(i,Oi(Mf));return fn(r,g,t,i,a)}),r_=ln(function(r,i){return fn(r,b,t,t,t,i)});function n_(r,i){if(typeof r!="function")throw new Cr(l);return i=i===t?i:Le(i),Ke(r,i)}function i_(r,i){if(typeof r!="function")throw new Cr(l);return i=i==null?0:Vt(Le(i),0),Ke(function(a){var h=a[i],y=xn(a,0,i);return h&&wn(y,h),kt(r,this,y)})}function s_(r,i,a){var h=!0,y=!0;if(typeof r!="function")throw new Cr(l);return Et(a)&&(h="leading"in a?!!a.leading:h,y="trailing"in a?!!a.trailing:y),Lf(r,i,{leading:h,maxWait:i,trailing:y})}function o_(r){return Rf(r,1)}function a_(r,i){return wc(sc(i),r)}function c_(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function u_(r){return Nr(r,C)}function h_(r,i){return i=typeof i=="function"?i:t,Nr(r,C,i)}function f_(r){return Nr(r,P|C)}function l_(r,i){return i=typeof i=="function"?i:t,Nr(r,P|C,i)}function d_(r,i){return i==null||Oh(r,i,Wt(i))}function Vr(r,i){return r===i||r!==r&&i!==i}var p_=Do(Wa),g_=Do(function(r,i){return r>=i}),Gn=Th(function(){return arguments}())?Th:function(r){return At(r)&&it.call(r,"callee")&&!_h.call(r,"callee")},Ne=V.isArray,y_=ir?wr(ir):S0;function gr(r){return r!=null&&No(r.length)&&!pn(r)}function Rt(r){return At(r)&&gr(r)}function __(r){return r===!0||r===!1||At(r)&&sr(r)==z}var Pn=Tg||Nc,v_=Hr?wr(Hr):O0;function m_(r){return At(r)&&r.nodeType===1&&!rs(r)}function b_(r){if(r==null)return!0;if(gr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Pn(r)||Ii(r)||Gn(r)))return!r.length;var i=er(r);if(i==Se||i==Oe)return!r.size;if(es(r))return!Ja(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function w_(r,i){return Xi(r,i)}function E_(r,i,a){a=typeof a=="function"?a:t;var h=a?a(r,i):t;return h===t?Xi(r,i,t,a):!!h}function Ec(r){if(!At(r))return!1;var i=sr(r);return i==T||i==f||typeof r.message=="string"&&typeof r.name=="string"&&!rs(r)}function D_(r){return typeof r=="number"&&mh(r)}function pn(r){if(!Et(r))return!1;var i=sr(r);return i==se||i==le||i==H||i==_t}function qf(r){return typeof r=="number"&&r==Le(r)}function No(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=G}function Et(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function At(r){return r!=null&&typeof r=="object"}var zf=Pr?wr(Pr):x0;function S_(r,i){return r===i||Ya(r,i,lc(i))}function O_(r,i,a){return a=typeof a=="function"?a:t,Ya(r,i,lc(i),a)}function I_(r){return Hf(r)&&r!=+r}function x_(r){if(h1(r))throw new Ce(c);return Nh(r)}function P_(r){return r===null}function A_(r){return r==null}function Hf(r){return typeof r=="number"||At(r)&&sr(r)==He}function rs(r){if(!At(r)||sr(r)!=je)return!1;var i=io(r);if(i===null)return!0;var a=it.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&eo.call(a)==Og}var Dc=Xr?wr(Xr):P0;function C_(r){return qf(r)&&r>=-G&&r<=G}var Bf=zi?wr(zi):A0;function Ro(r){return typeof r=="string"||!Ne(r)&&At(r)&&sr(r)==Re}function Dr(r){return typeof r=="symbol"||At(r)&&sr(r)==$e}var Ii=qn?wr(qn):C0;function T_(r){return r===t}function N_(r){return At(r)&&er(r)==Pe}function R_(r){return At(r)&&sr(r)==Ue}var $_=Do(Xa),U_=Do(function(r,i){return r<=i});function Kf(r){if(!r)return[];if(gr(r))return Ro(r)?Br(r):pr(r);if(Bi&&r[Bi])return dg(r[Bi]());var i=er(r),a=i==Se?La:i==Oe?Xs:xi;return a(r)}function gn(r){if(!r)return r===0?r:0;if(r=Ur(r),r===re||r===-re){var i=r<0?-1:1;return i*te}return r===r?r:0}function Le(r){var i=gn(r),a=i%1;return i===i?a?i-a:i:0}function Vf(r){return r?Kn(Le(r),0,ne):0}function Ur(r){if(typeof r=="number")return r;if(Dr(r))return Y;if(Et(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=Et(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=uh(r);var a=da.test(r);return a||ga.test(r)?Te(r.slice(2),a?2:8):la.test(r)?Y:+r}function kf(r){return Zr(r,yr(r))}function F_(r){return r?Kn(Le(r),-G,G):r===0?r:0}function nt(r){return r==null?"":Er(r)}var j_=Di(function(r,i){if(es(i)||gr(i)){Zr(i,Wt(i),r);return}for(var a in i)it.call(i,a)&&Gi(r,a,i[a])}),Wf=Di(function(r,i){Zr(i,yr(i),r)}),$o=Di(function(r,i,a,h){Zr(i,yr(i),r,h)}),L_=Di(function(r,i,a,h){Zr(i,Wt(i),r,h)}),M_=ln(Ka);function q_(r,i){var a=Ei(r);return i==null?a:Sh(a,i)}var z_=Ke(function(r,i){r=ut(r);var a=-1,h=i.length,y=h>2?i[2]:t;for(y&&or(i[0],i[1],y)&&(h=1);++a<h;)for(var O=i[a],A=yr(O),N=-1,M=A.length;++N<M;){var J=A[N],X=r[J];(X===t||Vr(X,mi[J])&&!it.call(r,J))&&(r[J]=O[J])}return r}),H_=Ke(function(r){return r.push(t,hf),kt(Gf,t,r)});function B_(r,i){return sh(r,me(i,3),Qr)}function K_(r,i){return sh(r,me(i,3),ka)}function V_(r,i){return r==null?r:Va(r,me(i,3),yr)}function k_(r,i){return r==null?r:Ah(r,me(i,3),yr)}function W_(r,i){return r&&Qr(r,me(i,3))}function G_(r,i){return r&&ka(r,me(i,3))}function Y_(r){return r==null?[]:go(r,Wt(r))}function J_(r){return r==null?[]:go(r,yr(r))}function Sc(r,i,a){var h=r==null?t:Vn(r,i);return h===t?a:h}function X_(r,i){return r!=null&&df(r,i,b0)}function Oc(r,i){return r!=null&&df(r,i,w0)}var Q_=sf(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=to.call(i)),r[i]=a},xc(_r)),Z_=sf(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=to.call(i)),it.call(r,i)?r[i].push(a):r[i]=[a]},me),ev=Ke(Ji);function Wt(r){return gr(r)?Eh(r):Ja(r)}function yr(r){return gr(r)?Eh(r,!0):T0(r)}function tv(r,i){var a={};return i=me(i,3),Qr(r,function(h,y,O){hn(a,i(h,y,O),h)}),a}function rv(r,i){var a={};return i=me(i,3),Qr(r,function(h,y,O){hn(a,y,i(h,y,O))}),a}var nv=Di(function(r,i,a){yo(r,i,a)}),Gf=Di(function(r,i,a,h){yo(r,i,a,h)}),iv=ln(function(r,i){var a={};if(r==null)return a;var h=!1;i=bt(i,function(O){return O=In(O,r),h||(h=O.length>1),O}),Zr(r,hc(r),a),h&&(a=Nr(a,P|x|C,Q0));for(var y=i.length;y--;)rc(a,i[y]);return a});function sv(r,i){return Yf(r,To(me(i)))}var ov=ln(function(r,i){return r==null?{}:R0(r,i)});function Yf(r,i){if(r==null)return{};var a=bt(hc(r),function(h){return[h]});return i=me(i),Mh(r,a,function(h,y){return i(h,y[0])})}function av(r,i,a){i=In(i,r);var h=-1,y=i.length;for(y||(y=1,r=t);++h<y;){var O=r==null?t:r[en(i[h])];O===t&&(h=y,O=a),r=pn(O)?O.call(r):O}return r}function cv(r,i,a){return r==null?r:Qi(r,i,a)}function uv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Qi(r,i,a,h)}var Jf=cf(Wt),Xf=cf(yr);function hv(r,i,a){var h=Ne(r),y=h||Pn(r)||Ii(r);if(i=me(i,4),a==null){var O=r&&r.constructor;y?a=h?new O:[]:Et(r)?a=pn(O)?Ei(io(r)):{}:a={}}return(y?Ar:Qr)(r,function(A,N,M){return i(a,A,N,M)}),a}function fv(r,i){return r==null?!0:rc(r,i)}function lv(r,i,a){return r==null?r:Kh(r,i,sc(a))}function dv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Kh(r,i,sc(a),h)}function xi(r){return r==null?[]:ja(r,Wt(r))}function pv(r){return r==null?[]:ja(r,yr(r))}function gv(r,i,a){return a===t&&(a=i,i=t),a!==t&&(a=Ur(a),a=a===a?a:0),i!==t&&(i=Ur(i),i=i===i?i:0),Kn(Ur(r),i,a)}function yv(r,i,a){return i=gn(i),a===t?(a=i,i=0):a=gn(a),r=Ur(r),E0(r,i,a)}function _v(r,i,a){if(a&&typeof a!="boolean"&&or(r,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&i===t?(r=0,i=1):(r=gn(r),i===t?(i=r,r=0):i=gn(i)),r>i){var h=r;r=i,i=h}if(a||r%1||i%1){var y=bh();return Zt(r+y*(i-r+at("1e-"+((y+"").length-1))),i)}return Za(r,i)}var vv=Si(function(r,i,a){return i=i.toLowerCase(),r+(a?Qf(i):i)});function Qf(r){return Ic(nt(r).toLowerCase())}function Zf(r){return r=nt(r),r&&r.replace(on,cg).replace(Pa,"")}function mv(r,i,a){r=nt(r),i=Er(i);var h=r.length;a=a===t?h:Kn(Le(a),0,h);var y=a;return a-=i.length,a>=0&&r.slice(a,y)==i}function bv(r){return r=nt(r),r&&vt.test(r)?r.replace(Un,ug):r}function wv(r){return r=nt(r),r&&Lt.test(r)?r.replace(It,"\\$&"):r}var Ev=Si(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),Dv=Si(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),Sv=tf("toLowerCase");function Ov(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;if(!i||h>=i)return r;var y=(i-h)/2;return Eo(co(y),a)+r+Eo(ao(y),a)}function Iv(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;return i&&h<i?r+Eo(i-h,a):r}function xv(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;return i&&h<i?Eo(i-h,a)+r:r}function Pv(r,i,a){return a||i==null?i=0:i&&(i=+i),Ug(nt(r).replace(xt,""),i||0)}function Av(r,i,a){return(a?or(r,i,a):i===t)?i=1:i=Le(i),ec(nt(r),i)}function Cv(){var r=arguments,i=nt(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var Tv=Si(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function Nv(r,i,a){return a&&typeof a!="number"&&or(r,i,a)&&(i=a=t),a=a===t?ne:a>>>0,a?(r=nt(r),r&&(typeof i=="string"||i!=null&&!Dc(i))&&(i=Er(i),!i&&yi(r))?xn(Br(r),0,a):r.split(i,a)):[]}var Rv=Si(function(r,i,a){return r+(a?" ":"")+Ic(i)});function $v(r,i,a){return r=nt(r),a=a==null?0:Kn(Le(a),0,r.length),i=Er(i),r.slice(a,a+i.length)==i}function Uv(r,i,a){var h=D.templateSettings;a&&or(r,i,a)&&(i=t),r=nt(r),i=$o({},i,h,uf);var y=$o({},i.imports,h.imports,uf),O=Wt(y),A=ja(y,O),N,M,J=0,X=i.interpolate||ci,ee="__p += '",ae=Ma((i.escape||ci).source+"|"+X.source+"|"+(X===wt?fa:ci).source+"|"+(i.evaluate||ci).source+"|$","g"),ye="//# sourceURL="+(it.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Aa+"]")+`
`;r.replace(ae,function(Ee,We,Qe,Sr,ar,Or){return Qe||(Qe=Sr),ee+=r.slice(J,Or).replace(_a,hg),We&&(N=!0,ee+=`' +
__e(`+We+`) +
'`),ar&&(M=!0,ee+=`';
`+ar+`;
__p += '`),Qe&&(ee+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),J=Or+Ee.length,Ee}),ee+=`';
`;var we=it.call(i,"variable")&&i.variable;if(!we)ee=`with (obj) {
`+ee+`
}
`;else if(ua.test(we))throw new Ce(d);ee=(M?ee.replace(Yr,""):ee).replace(nr,"$1").replace(sn,"$1;"),ee="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var ze=tl(function(){return rt(O,ye+"return "+ee).apply(t,A)});if(ze.source=ee,Ec(ze))throw ze;return ze}function Fv(r){return nt(r).toLowerCase()}function jv(r){return nt(r).toUpperCase()}function Lv(r,i,a){if(r=nt(r),r&&(a||i===t))return uh(r);if(!r||!(i=Er(i)))return r;var h=Br(r),y=Br(i),O=hh(h,y),A=fh(h,y)+1;return xn(h,O,A).join("")}function Mv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.slice(0,dh(r)+1);if(!r||!(i=Er(i)))return r;var h=Br(r),y=fh(h,Br(i))+1;return xn(h,0,y).join("")}function qv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.replace(xt,"");if(!r||!(i=Er(i)))return r;var h=Br(r),y=hh(h,Br(i));return xn(h,y).join("")}function zv(r,i){var a=k,h=oe;if(Et(i)){var y="separator"in i?i.separator:y;a="length"in i?Le(i.length):a,h="omission"in i?Er(i.omission):h}r=nt(r);var O=r.length;if(yi(r)){var A=Br(r);O=A.length}if(a>=O)return r;var N=a-_i(h);if(N<1)return h;var M=A?xn(A,0,N).join(""):r.slice(0,N);if(y===t)return M+h;if(A&&(N+=M.length-N),Dc(y)){if(r.slice(N).search(y)){var J,X=M;for(y.global||(y=Ma(y.source,nt(xr.exec(y))+"g")),y.lastIndex=0;J=y.exec(X);)var ee=J.index;M=M.slice(0,ee===t?N:ee)}}else if(r.indexOf(Er(y),N)!=N){var ae=M.lastIndexOf(y);ae>-1&&(M=M.slice(0,ae))}return M+h}function Hv(r){return r=nt(r),r&&Dt.test(r)?r.replace(vn,_g):r}var Bv=Si(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),Ic=tf("toUpperCase");function el(r,i,a){return r=nt(r),i=a?t:i,i===t?lg(r)?bg(r):ng(r):r.match(i)||[]}var tl=Ke(function(r,i){try{return kt(r,t,i)}catch(a){return Ec(a)?a:new Ce(a)}}),Kv=ln(function(r,i){return Ar(i,function(a){a=en(a),hn(r,a,bc(r[a],r))}),r});function Vv(r){var i=r==null?0:r.length,a=me();return r=i?bt(r,function(h){if(typeof h[1]!="function")throw new Cr(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var y=-1;++y<i;){var O=r[y];if(kt(O[0],this,h))return kt(O[1],this,h)}})}function kv(r){return _0(Nr(r,P))}function xc(r){return function(){return r}}function Wv(r,i){return r==null||r!==r?i:r}var Gv=nf(),Yv=nf(!0);function _r(r){return r}function Pc(r){return Rh(typeof r=="function"?r:Nr(r,P))}function Jv(r){return Uh(Nr(r,P))}function Xv(r,i){return Fh(r,Nr(i,P))}var Qv=Ke(function(r,i){return function(a){return Ji(a,r,i)}}),Zv=Ke(function(r,i){return function(a){return Ji(r,a,i)}});function Ac(r,i,a){var h=Wt(i),y=go(i,h);a==null&&!(Et(i)&&(y.length||!h.length))&&(a=i,i=r,r=this,y=go(i,Wt(i)));var O=!(Et(a)&&"chain"in a)||!!a.chain,A=pn(r);return Ar(y,function(N){var M=i[N];r[N]=M,A&&(r.prototype[N]=function(){var J=this.__chain__;if(O||J){var X=r(this.__wrapped__),ee=X.__actions__=pr(this.__actions__);return ee.push({func:M,args:arguments,thisArg:r}),X.__chain__=J,X}return M.apply(r,wn([this.value()],arguments))})}),r}function em(){return Xe._===this&&(Xe._=Ig),this}function Cc(){}function tm(r){return r=Le(r),Ke(function(i){return jh(i,r)})}var rm=ac(bt),nm=ac(ih),im=ac(Na);function rl(r){return pc(r)?Ra(en(r)):$0(r)}function sm(r){return function(i){return r==null?t:Vn(r,i)}}var om=of(),am=of(!0);function Tc(){return[]}function Nc(){return!1}function cm(){return{}}function um(){return""}function hm(){return!0}function fm(r,i){if(r=Le(r),r<1||r>G)return[];var a=ne,h=Zt(r,ne);i=me(i),r-=ne;for(var y=Fa(h,i);++a<r;)i(a);return y}function lm(r){return Ne(r)?bt(r,en):Dr(r)?[r]:pr(Ef(nt(r)))}function dm(r){var i=++Sg;return nt(r)+i}var pm=wo(function(r,i){return r+i},0),gm=cc("ceil"),ym=wo(function(r,i){return r/i},1),_m=cc("floor");function vm(r){return r&&r.length?po(r,_r,Wa):t}function mm(r,i){return r&&r.length?po(r,me(i,2),Wa):t}function bm(r){return ah(r,_r)}function wm(r,i){return ah(r,me(i,2))}function Em(r){return r&&r.length?po(r,_r,Xa):t}function Dm(r,i){return r&&r.length?po(r,me(i,2),Xa):t}var Sm=wo(function(r,i){return r*i},1),Om=cc("round"),Im=wo(function(r,i){return r-i},0);function xm(r){return r&&r.length?Ua(r,_r):0}function Pm(r,i){return r&&r.length?Ua(r,me(i,2)):0}return D.after=Jy,D.ary=Rf,D.assign=j_,D.assignIn=Wf,D.assignInWith=$o,D.assignWith=L_,D.at=M_,D.before=$f,D.bind=bc,D.bindAll=Kv,D.bindKey=Uf,D.castArray=c_,D.chain=Cf,D.chunk=_1,D.compact=v1,D.concat=m1,D.cond=Vv,D.conforms=kv,D.constant=xc,D.countBy=xy,D.create=q_,D.curry=Ff,D.curryRight=jf,D.debounce=Lf,D.defaults=z_,D.defaultsDeep=H_,D.defer=Xy,D.delay=Qy,D.difference=b1,D.differenceBy=w1,D.differenceWith=E1,D.drop=D1,D.dropRight=S1,D.dropRightWhile=O1,D.dropWhile=I1,D.fill=x1,D.filter=Ay,D.flatMap=Ny,D.flatMapDeep=Ry,D.flatMapDepth=$y,D.flatten=If,D.flattenDeep=P1,D.flattenDepth=A1,D.flip=Zy,D.flow=Gv,D.flowRight=Yv,D.fromPairs=C1,D.functions=Y_,D.functionsIn=J_,D.groupBy=Uy,D.initial=N1,D.intersection=R1,D.intersectionBy=$1,D.intersectionWith=U1,D.invert=Q_,D.invertBy=Z_,D.invokeMap=jy,D.iteratee=Pc,D.keyBy=Ly,D.keys=Wt,D.keysIn=yr,D.map=Po,D.mapKeys=tv,D.mapValues=rv,D.matches=Jv,D.matchesProperty=Xv,D.memoize=Co,D.merge=nv,D.mergeWith=Gf,D.method=Qv,D.methodOf=Zv,D.mixin=Ac,D.negate=To,D.nthArg=tm,D.omit=iv,D.omitBy=sv,D.once=e_,D.orderBy=My,D.over=rm,D.overArgs=t_,D.overEvery=nm,D.overSome=im,D.partial=wc,D.partialRight=Mf,D.partition=qy,D.pick=ov,D.pickBy=Yf,D.property=rl,D.propertyOf=sm,D.pull=M1,D.pullAll=Pf,D.pullAllBy=q1,D.pullAllWith=z1,D.pullAt=H1,D.range=om,D.rangeRight=am,D.rearg=r_,D.reject=By,D.remove=B1,D.rest=n_,D.reverse=vc,D.sampleSize=Vy,D.set=cv,D.setWith=uv,D.shuffle=ky,D.slice=K1,D.sortBy=Yy,D.sortedUniq=X1,D.sortedUniqBy=Q1,D.split=Nv,D.spread=i_,D.tail=Z1,D.take=ey,D.takeRight=ty,D.takeRightWhile=ry,D.takeWhile=ny,D.tap=vy,D.throttle=s_,D.thru=xo,D.toArray=Kf,D.toPairs=Jf,D.toPairsIn=Xf,D.toPath=lm,D.toPlainObject=kf,D.transform=hv,D.unary=o_,D.union=iy,D.unionBy=sy,D.unionWith=oy,D.uniq=ay,D.uniqBy=cy,D.uniqWith=uy,D.unset=fv,D.unzip=mc,D.unzipWith=Af,D.update=lv,D.updateWith=dv,D.values=xi,D.valuesIn=pv,D.without=hy,D.words=el,D.wrap=a_,D.xor=fy,D.xorBy=ly,D.xorWith=dy,D.zip=py,D.zipObject=gy,D.zipObjectDeep=yy,D.zipWith=_y,D.entries=Jf,D.entriesIn=Xf,D.extend=Wf,D.extendWith=$o,Ac(D,D),D.add=pm,D.attempt=tl,D.camelCase=vv,D.capitalize=Qf,D.ceil=gm,D.clamp=gv,D.clone=u_,D.cloneDeep=f_,D.cloneDeepWith=l_,D.cloneWith=h_,D.conformsTo=d_,D.deburr=Zf,D.defaultTo=Wv,D.divide=ym,D.endsWith=mv,D.eq=Vr,D.escape=bv,D.escapeRegExp=wv,D.every=Py,D.find=Cy,D.findIndex=Sf,D.findKey=B_,D.findLast=Ty,D.findLastIndex=Of,D.findLastKey=K_,D.floor=_m,D.forEach=Tf,D.forEachRight=Nf,D.forIn=V_,D.forInRight=k_,D.forOwn=W_,D.forOwnRight=G_,D.get=Sc,D.gt=p_,D.gte=g_,D.has=X_,D.hasIn=Oc,D.head=xf,D.identity=_r,D.includes=Fy,D.indexOf=T1,D.inRange=yv,D.invoke=ev,D.isArguments=Gn,D.isArray=Ne,D.isArrayBuffer=y_,D.isArrayLike=gr,D.isArrayLikeObject=Rt,D.isBoolean=__,D.isBuffer=Pn,D.isDate=v_,D.isElement=m_,D.isEmpty=b_,D.isEqual=w_,D.isEqualWith=E_,D.isError=Ec,D.isFinite=D_,D.isFunction=pn,D.isInteger=qf,D.isLength=No,D.isMap=zf,D.isMatch=S_,D.isMatchWith=O_,D.isNaN=I_,D.isNative=x_,D.isNil=A_,D.isNull=P_,D.isNumber=Hf,D.isObject=Et,D.isObjectLike=At,D.isPlainObject=rs,D.isRegExp=Dc,D.isSafeInteger=C_,D.isSet=Bf,D.isString=Ro,D.isSymbol=Dr,D.isTypedArray=Ii,D.isUndefined=T_,D.isWeakMap=N_,D.isWeakSet=R_,D.join=F1,D.kebabCase=Ev,D.last=$r,D.lastIndexOf=j1,D.lowerCase=Dv,D.lowerFirst=Sv,D.lt=$_,D.lte=U_,D.max=vm,D.maxBy=mm,D.mean=bm,D.meanBy=wm,D.min=Em,D.minBy=Dm,D.stubArray=Tc,D.stubFalse=Nc,D.stubObject=cm,D.stubString=um,D.stubTrue=hm,D.multiply=Sm,D.nth=L1,D.noConflict=em,D.noop=Cc,D.now=Ao,D.pad=Ov,D.padEnd=Iv,D.padStart=xv,D.parseInt=Pv,D.random=_v,D.reduce=zy,D.reduceRight=Hy,D.repeat=Av,D.replace=Cv,D.result=av,D.round=Om,D.runInContext=j,D.sample=Ky,D.size=Wy,D.snakeCase=Tv,D.some=Gy,D.sortedIndex=V1,D.sortedIndexBy=k1,D.sortedIndexOf=W1,D.sortedLastIndex=G1,D.sortedLastIndexBy=Y1,D.sortedLastIndexOf=J1,D.startCase=Rv,D.startsWith=$v,D.subtract=Im,D.sum=xm,D.sumBy=Pm,D.template=Uv,D.times=fm,D.toFinite=gn,D.toInteger=Le,D.toLength=Vf,D.toLower=Fv,D.toNumber=Ur,D.toSafeInteger=F_,D.toString=nt,D.toUpper=jv,D.trim=Lv,D.trimEnd=Mv,D.trimStart=qv,D.truncate=zv,D.unescape=Hv,D.uniqueId=dm,D.upperCase=Bv,D.upperFirst=Ic,D.each=Tf,D.eachRight=Nf,D.first=xf,Ac(D,function(){var r={};return Qr(D,function(i,a){it.call(D.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),D.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),Ar(["drop","take"],function(r,i){Ye.prototype[r]=function(a){a=a===t?1:Vt(Le(a),0);var h=this.__filtered__&&!i?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Zt(a,h.__takeCount__):h.__views__.push({size:Zt(a,ne),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Ar(["filter","map","takeWhile"],function(r,i){var a=i+1,h=a==U||a==fe;Ye.prototype[r]=function(y){var O=this.clone();return O.__iteratees__.push({iteratee:me(y,3),type:a}),O.__filtered__=O.__filtered__||h,O}}),Ar(["head","last"],function(r,i){var a="take"+(i?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Ar(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(_r)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,i){return typeof r=="function"?new Ye(this):this.map(function(a){return Ji(a,r,i)})}),Ye.prototype.reject=function(r){return this.filter(To(me(r)))},Ye.prototype.slice=function(r,i){r=Le(r);var a=this;return a.__filtered__&&(r>0||i<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==t&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ne)},Qr(Ye.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),y=D[h?"take"+(i=="last"?"Right":""):i],O=h||/^find/.test(i);y&&(D.prototype[i]=function(){var A=this.__wrapped__,N=h?[1]:arguments,M=A instanceof Ye,J=N[0],X=M||Ne(A),ee=function(We){var Qe=y.apply(D,wn([We],N));return h&&ae?Qe[0]:Qe};X&&a&&typeof J=="function"&&J.length!=1&&(M=X=!1);var ae=this.__chain__,ye=!!this.__actions__.length,we=O&&!ae,ze=M&&!ye;if(!O&&X){A=ze?A:new Ye(this);var Ee=r.apply(A,N);return Ee.__actions__.push({func:xo,args:[ee],thisArg:t}),new Tr(Ee,ae)}return we&&ze?r.apply(this,N):(Ee=this.thru(ee),we?h?Ee.value()[0]:Ee.value():Ee)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(r){var i=Qs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var y=arguments;if(h&&!this.__chain__){var O=this.value();return i.apply(Ne(O)?O:[],y)}return this[a](function(A){return i.apply(Ne(A)?A:[],y)})}}),Qr(Ye.prototype,function(r,i){var a=D[i];if(a){var h=a.name+"";it.call(wi,h)||(wi[h]=[]),wi[h].push({name:i,func:a})}}),wi[bo(t,Q).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=Hg,Ye.prototype.reverse=Bg,Ye.prototype.value=Kg,D.prototype.at=my,D.prototype.chain=by,D.prototype.commit=wy,D.prototype.next=Ey,D.prototype.plant=Sy,D.prototype.reverse=Oy,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=Iy,D.prototype.first=D.prototype.head,Bi&&(D.prototype[Bi]=Dy),D},vi=wg();Nt?((Nt.exports=vi)._=vi,ct._=vi):Xe._=vi}).call(ps)})(Su,Su.exports);var tO=Object.defineProperty,rO=Object.defineProperties,nO=Object.getOwnPropertyDescriptors,Cd=Object.getOwnPropertySymbols,iO=Object.prototype.hasOwnProperty,sO=Object.prototype.propertyIsEnumerable,Td=(n,e,t)=>e in n?tO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fo=(n,e)=>{for(var t in e||(e={}))iO.call(e,t)&&Td(n,t,e[t]);if(Cd)for(var t of Cd(e))sO.call(e,t)&&Td(n,t,e[t]);return n},oO=(n,e)=>rO(n,nO(e));function Mr(n,e,t){let s;const o=Ou(n);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${eO}?chainId=eip155:${o}&projectId=${t}`),s}function Ou(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function Jp(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function aO(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function cO(n={},e={}){const t=Nd(n),s=Nd(e);return Su.exports.merge(t,s)}function Nd(n){var e,t,s,o;const c={};if(!G5(n))return c;for(const[l,d]of Object.entries(n)){const m=th(l)?[l]:d.chains,_=d.methods||[],S=d.events||[],P=d.rpcMap||{},x=qo(l);c[x]=oO(Fo(Fo({},c[x]),d),{chains:Yc(m,(e=c[x])==null?void 0:e.chains),methods:Yc(_,(t=c[x])==null?void 0:t.methods),events:Yc(S,(s=c[x])==null?void 0:s.events),rpcMap:Fo(Fo({},P),(o=c[x])==null?void 0:o.rpcMap)})}return c}function uO(n){return n.includes(":")?n.split(":")[2]:n}function hO(n){const e={};for(const[t,s]of Object.entries(n)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],d=th(t)?[t]:s.chains?s.chains:Jp(s.accounts);e[t]={chains:d,methods:o,events:c,accounts:l}}return e}const Xp={},Ut=n=>Xp[n],Jc=(n,e)=>{Xp[n]=e};class fO{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}class lO{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=Ou(e);if(!this.httpProviders[s]){const o=t||Mr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=Ou(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class dO{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}class pO{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}class gO{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}class yO{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}class _O{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Rn(new ai(s,Ut("disableProviderPing")))}}var vO=Object.defineProperty,mO=Object.defineProperties,bO=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,wO=Object.prototype.hasOwnProperty,EO=Object.prototype.propertyIsEnumerable,$d=(n,e,t)=>e in n?vO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jo=(n,e)=>{for(var t in e||(e={}))wO.call(e,t)&&$d(n,t,e[t]);if(Rd)for(var t of Rd(e))EO.call(e,t)&&$d(n,t,e[t]);return n},Xc=(n,e)=>mO(n,bO(e));class rh{constructor(e){this.events=new Pu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Pd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new rh(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:jo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Sd("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=hO(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==Gp)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Od(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await $5.init({logger:this.providerOpts.logger||Pd,relayUrl:this.providerOpts.relayUrl||X5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>qo(t)))];Jc("client",this.client),Jc("events",this.events),Jc("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=aO(t,this.session),o=Jp(s),c=cO(this.namespaces,this.optionalNamespaces),l=Xc(jo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new lO({namespace:l});break;case"solana":this.rpcProviders[t]=new dO({namespace:l});break;case"cosmos":this.rpcProviders[t]=new pO({namespace:l});break;case"polkadot":this.rpcProviders[t]=new fO({namespace:l});break;case"cip34":this.rpcProviders[t]=new gO({namespace:l});break;case"elrond":this.rpcProviders[t]=new yO({namespace:l});break;case"multiversx":this.rpcProviders[t]=new _O({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&Od(o)&&this.events.emit("accountsChanged",o.map(uO))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Xc(jo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Xc(jo({},Sd("USER_DISCONNECTED")),{data:e.topic}))}),this.on($n.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>qo(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=qo(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Ad}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Ad}/${e}`)}}const DO=rh,SO="wc",OO="ethereum_provider",IO=`${SO}@2:${OO}:`,xO="https://rpc.walletconnect.com/v1/",Iu=["eth_sendTransaction","personal_sign"],PO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],xu=["chainChanged","accountsChanged"],AO=["message","disconnect","connect"];var CO=Object.defineProperty,TO=Object.defineProperties,NO=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,RO=Object.prototype.hasOwnProperty,$O=Object.prototype.propertyIsEnumerable,Fd=(n,e,t)=>e in n?CO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gs=(n,e)=>{for(var t in e||(e={}))RO.call(e,t)&&Fd(n,t,e[t]);if(Ud)for(var t of Ud(e))$O.call(e,t)&&Fd(n,t,e[t]);return n},jd=(n,e)=>TO(n,NO(e));function Go(n){return Number(n[0].split(":")[1])}function Qc(n){return`0x${n.toString(16)}`}function UO(n){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:d}=n;if(!cu(e))throw new Error("Invalid chains");const m={chains:e,methods:s||Iu,events:c||xu,rpcMap:gs({},e.length?{[Go(e)]:d[Go(e)]}:{})},_=c==null?void 0:c.filter(C=>!xu.includes(C)),S=s==null?void 0:s.filter(C=>!Iu.includes(C));if(!t&&!l&&!o&&!(_!=null&&_.length)&&!(S!=null&&S.length))return{required:e.length?m:void 0};const P=(_==null?void 0:_.length)&&(S==null?void 0:S.length)||!t,x={chains:[...new Set(P?m.chains.concat(t||[]):t)],methods:[...new Set(m.methods.concat(o!=null&&o.length?o:PO))],events:[...new Set(m.events.concat(l||AO))],rpcMap:d};return{required:e.length?m:void 0,optional:t.length?x:void 0}}class nh{constructor(){this.events=new qr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=IO,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new nh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=UO(this.rpc);try{const o=await new Promise(async(l,d)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(_=>{!_.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(jd(gs({namespaces:gs({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(_=>{l(_)}).catch(_=>{d(new Error(_.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=hE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:Qc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Qc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",jd(gs({},lE("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Qc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=o.length?(e==null?void 0:e.methods)||Iu:[],m=o.length?(e==null?void 0:e.events)||xu:[],_=(e==null?void 0:e.optionalMethods)||[],S=(e==null?void 0:e.optionalEvents)||[],P=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),x=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(C=>this.formatChainId(C)),optionalChains:c.map(C=>this.formatChainId(C)),methods:d,events:m,optionalMethods:_,optionalEvents:S,rpcMap:P,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:x,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Go(this.rpc.chains):Go(this.rpc.optionalChains),this.signer=await DO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Tm(()=>import("./index-1a49b82d.js").then(o=>o.a),["assets/index-1a49b82d.js","assets/vendor-9be3fe18.js"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(gs({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&cu(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&cu(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${xO}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const WO=nh;export{WO as EthereumProvider,AO as OPTIONAL_EVENTS,PO as OPTIONAL_METHODS,xu as REQUIRED_EVENTS,Iu as REQUIRED_METHODS,nh as default};
