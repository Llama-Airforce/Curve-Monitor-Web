import{t as U,g as T,f as S,a as se}from"./timestamp-Dfir0V72.js";import{u as k}from"./useQuery-4rM1PUVV.js";import{f,a9 as N,d as w,T as P,U as oe,V as M,h as b,o as q,_ as C,w as _,a as d,b as v,u as h,r as Q,j as V,e as B,W as ne,t as $,Q as j,K as X,N as Y,i as K}from"./index-C7I7Pnov.js";import{u as R,c as D,a as A,_ as ie,b as le,S as re,G as ce,r as ue}from"./UseLightweightChart-BUais0L7.js";import{r as L,u as W}from"./Number-DljRImwv.js";import{_ as G}from"./ButtonToggle-BG5yzWmC.js";import{c as z,_ as E}from"./ChartStylesApex-CNdA0b1D.js";import{u as J,_ as Z}from"./UseLegend-B7g_jVVu.js";import{_ as I,a as de}from"./Table-DztvipaJ.js";import{_ as x}from"./AsyncValue-BACWgnoa.js";import{a as ee,_ as te}from"./UsePagination-CQ1jXyTi.js";import{u as ae}from"./UseRelativeTime-BnPqVZVC.js";import{_ as me}from"./TokenIcon-DiQvUyrM.js";const pe=e=>({provider:e.provider,deposit:e.deposit?{amount:e.deposit.amount,n1:e.deposit.n1,n2:e.deposit.n2}:null,withdrawal:e.withdrawal?{amountBorrowed:e.withdrawal.amount_borrowed,amountCollateral:e.withdrawal.amount_collateral}:null,blockNumber:e.block_number,timestamp:U(e.timestamp),txHash:e.transaction_hash}),_e=e=>({idSold:e.sold_id,idBought:e.bought_id,tokenSold:{symbol:e.token_sold.symbol,address:e.token_sold.address},tokenBought:{symbol:e.token_bought.symbol,address:e.token_bought.address},amountSold:e.amount_sold,amountBought:e.amount_bought,price:e.price,buyer:e.buyer,feeX:e.fee_x,feeY:e.fee_y,blockNumber:e.block_number,timestamp:U(e.timestamp),txHash:e.transaction_hash}),he=e=>({time:U(e.time),open:e.open??null,close:e.close??null,high:e.high??null,low:e.low??null,basePrice:e.base_price??null,oraclePrice:e.oracle_price??null,volume:e.volume??null});async function ve({endpoint:e,chain:o,llamma:s,page:a=1,perPage:i=10},c){const n=T(c),t=new URLSearchParams({page:a.toString(),per_page:i.toString()}),l=await S(`${n}/v1/${e}/llamma_events/${o}/${s}??${t.toString()}`);return{events:l.data.map(pe),count:l.count}}async function fe({endpoint:e,chain:o,llamma:s,page:a=1,perPage:i=10},c){const n=T(c),t=new URLSearchParams({page:a.toString(),per_page:i.toString()}),l=await S(`${n}/v1/${e}/llamma_trades/${o}/${s}?${t.toString()}`);return{trades:l.data.map(_e),count:l.count}}async function ge({endpoint:e,chain:o,llamma:s,interval:a=1,units:i="hour",start:c,end:n},t){const l=T(t),r=se({start:c,end:n}),u=new URLSearchParams({agg_number:a.toString(),agg_units:i,start:r.start.toString(),end:r.end.toString()});return(await S(`${l}/v1/${e}/llamma_ohlc/${o}/${s}?${u.toString()}`)).data.map(he)}function Ut(e,o,s,a){return k({queryKey:["llamma-market-events",o,a],queryFn:({queryKey:[,i,c]})=>ve({endpoint:e,chain:s.value,llamma:i,page:c}),placeholderData:N,enabled:f(()=>!!o.value&&!!s.value)})}function Bt(e,o,s,a){return k({queryKey:["llamma-market-trades",o,a],queryFn:({queryKey:[,i,c]})=>fe({endpoint:e,chain:s.value,llamma:i,page:c}),placeholderData:N,enabled:f(()=>!!o.value&&!!s.value)})}function Ot(e,o,s){return k({queryKey:["llamma-market-ohlc",o],queryFn:({queryKey:[,a]})=>ge({endpoint:e,chain:s.value,llamma:a}),enabled:f(()=>!!o.value&&!!s.value)})}const be={style:{display:"flex"}},qe={ref:"chartRef",class:"chart"},Pt=w({__name:"ChartCollateralRatio",props:{ratios:{}},setup(e){const o=P(),s=oe("card"),{chart:a,series:i}=R({createChartOptions:A(),series:D({name:"ratios",color:f(()=>o.value.colors.blue),formatter:n=>`${L(n,0,"percentage")}%`,minMove:.01})});M(c);function c(){if(!a.value||!i.ratios)return;const n=e.ratios.map(t=>({time:t.timestamp.getUTCTimestamp(),value:t.ratio*100})).uniqWith((t,l)=>t.time===l.time).orderBy(t=>t.time,"asc");n.length>0&&i.ratios.setData(n),a.value.timeScale().fitContent()}return(n,t)=>{const l=ie,r=le,u=C;return q(),b(u,{ref_key:"card",ref:s,title:"Collateral Ratio"},{actions:_(()=>[d("div",be,[v(l,{filename:"collateral_ratio",series:h(i)},null,8,["series"]),v(r,{chart:h(a),target:h(s)},null,8,["chart","target"])])]),default:_(()=>[d("div",qe,null,512)]),_:1},512)}}}),ye={class:"button-group"},Mt=w({__name:"ChartLiqs",props:{liqs:{}},setup(e){const o=Q("count"),s=a=>{o.value!==a&&(o.value=a)};return(a,i)=>{const c=G,n=C;return q(),b(n,{title:"Self & Hard Liquidations"},{actions:_(()=>[d("div",ye,[v(c,{"model-value":h(o)==="count",onClick:i[0]||(i[0]=t=>s("count"))},{default:_(()=>i[2]||(i[2]=[V(" Count ")])),_:1},8,["model-value"]),v(c,{"model-value":h(o)==="value",onClick:i[1]||(i[1]=t=>s("value"))},{default:_(()=>i[3]||(i[3]=[V(" Value ")])),_:1},8,["model-value"])])]),default:_(()=>[h(o)==="count"?(q(),b(h($e),{key:0,liqs:a.liqs},null,8,["liqs"])):(q(),b(h(Le),{key:1,liqs:a.liqs},null,8,["liqs"]))]),_:1})}}}),we=w({__name:"ChartLiqsCount",props:{liqs:{}},setup(e){const o=f(()=>z({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:c,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:n},min:0,max:i.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=f(()=>e.liqs.orderBy(t=>t.timestamp.getTime(),"asc").groupBy(t=>t.timestamp.getTime()).entries().map(([t])=>new Date(parseInt(t,10)).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((t,l)=>l%8===0?t:"")),a=f(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(t=>({x:t.timestamp.toLocaleDateString(),y:t.selfCount}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(t=>({x:t.timestamp.toLocaleDateString(),y:t.hardCount}))}]),i=f(()=>Math.max(...e.liqs.groupBy(t=>t.timestamp.getTime()).entries().map(([,t])=>t.reduce((l,r)=>l+r.selfCount+r.hardCount,0)))*1.1),c=t=>t,n=t=>`${L(t,1,"dollar")}${W(t)}`;return(t,l)=>{const r=E;return q(),b(r,{options:h(o),series:h(a)},null,8,["options","series"])}}}),$e=B(we,[["__scopeId","data-v-4bc8078d"]]),Ce=w({__name:"ChartLiqsValue",props:{liqs:{}},setup(e){const o=f(()=>z({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:c,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:n},min:0,max:i.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=f(()=>e.liqs.orderBy(t=>t.timestamp.getTime(),"asc").groupBy(t=>t.timestamp.getTime()).entries().map(([t])=>new Date(parseInt(t,10)).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((t,l)=>l%8===0?t:"")),a=f(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(t=>({x:t.timestamp.toLocaleDateString(),y:t.selfValue}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(t=>({x:t.timestamp.toLocaleDateString(),y:t.hardValue}))}]),i=f(()=>Math.max(...e.liqs.groupBy(t=>t.timestamp.getTime()).entries().map(([,t])=>t.reduce((l,r)=>l+r.selfValue+r.hardValue,0)))*1.1),c=t=>t,n=t=>`${L(t,1,"dollar")}${W(t)}`;return(t,l)=>{const r=E;return q(),b(r,{options:h(o),series:h(a)},null,8,["options","series"])}}}),Le=B(Ce,[["__scopeId","data-v-ac62292c"]]),Te={ref:"chartRef",class:"chart"},Rt=w({__name:"ChartLiqsMedianLoss",props:{losses:{}},setup(e){const o=P(),{chart:s,series:a}=R({createChartOptions:A(),series:D({name:"losses",color:f(()=>o.value.colors.blue),formatter:c=>`${L(c,0,"percentage")}%`,minMove:.01})});M(i);function i(){if(!s.value||!a.losses)return;const c=e.losses.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.pctLossMedian})).uniqWith((n,t)=>n.time===t.time).orderBy(n=>n.time,"asc");c.length>0&&a.losses.setData(c),s.value.timeScale().fitContent()}return(c,n)=>{const t=C;return q(),b(t,{title:"Median Loss % Among Loans with Losses"},{default:_(()=>[d("div",Te,null,512)]),_:1})}}}),Se={ref:"chartRef",class:"chart"},At=w({__name:"ChartLiqsLosersProportion",props:{losses:{}},setup(e){const o=P(),{chart:s,series:a}=R({createChartOptions:A(),series:D({name:"losses",color:f(()=>o.value.colors.blue),formatter:c=>`${L(c,0,"percentage")}%`})});M(i);function i(){if(!s.value||!a.losses)return;const c=e.losses.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.numTotalUsers>0?100*n.numUsersWithLosses/n.numTotalUsers:0})).uniqWith((n,t)=>n.time===t.time).orderBy(n=>n.time,"asc");c.length>0&&a.losses.setData(c),s.value.timeScale().fitContent()}return(c,n)=>{const t=C;return q(),b(t,{title:"Proportion of Loans with Losses"},{default:_(()=>[d("div",Se,null,512)]),_:1})}}}),Ht=w({__name:"ChartLiqsHealthDeciles",props:{deciles:{}},setup(e){const o=f(()=>z({chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:s.value,labels:{formatter:i,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:n=>{const t=n.series[0][n.dataPointIndex],l=n.series[1][n.dataPointIndex],r=n.series[2][n.dataPointIndex];return[`<div><b>Collat. (USD)</b>: ${c(l)}</div>`,`<div><b>Debt</b>: ${c(t)}</div>`,`<div><b>Stablecoin</b>: ${c(r)}</div>`].join("")}}})),s=f(()=>e.deciles.map(n=>n.decile)),a=f(()=>[{name:"Debt",data:Object.values(e.deciles).map(n=>n.debt)},{name:"Collateral",data:Object.values(e.deciles).map(n=>n.collateralUsdValue)},{name:"Stablecoin",data:Object.values(e.deciles).map(n=>n.stablecoin)}]),i=n=>n,c=n=>`$${L(n,0,"dollar")}${W(n)}`;return(n,t)=>{const l=E,r=C;return q(),b(r,{title:"Debt & Assets per Health Deciles"},{default:_(()=>[v(l,{options:h(o),series:h(a)},null,8,["options","series"])]),_:1})}}}),ke={ref:"chartRef",class:"chart"},Vt=w({__name:"ChartLiqsSoftLiqRatio",props:{ratios:{},pricesOracle:{}},setup(e){const o=P(),{items:s}=J(()=>[{id:"percentage",label:"% of loans in soft liquidation",color:o.value.colorsArray[0]},{id:"collateral-price",label:"Collateral price ($)",color:o.value.colorsArray[1]}]),{chart:a,series:i}=R({createChartOptions:A({leftPriceScale:{visible:!0}}),series:[D({name:"price",color:f(()=>o.value.colors.yellow),formatter:n=>`$${L(n,2,"dollar")}${W(n)}`}),D({name:"ratio",color:f(()=>o.value.colors.blue),formatter:n=>`${L(n,0,"percentage")}%`})]});M(c);function c(){if(!a.value||!i.price||!i.ratio)return;const n=e.ratios.map(r=>({time:r.timestamp.getUTCTimestamp(),value:r.proportion})).uniqWith((r,u)=>r.time===u.time).orderBy(r=>r.time,"asc"),t=n.length>0?n[0].time:0,l=e.pricesOracle.filter(r=>r.timestamp.getUTCTimestamp()>=t).map(r=>({time:r.timestamp.getUTCTimestamp(),value:r.priceOracle})).uniqWith((r,u)=>r.time===u.time).orderBy(r=>r.time,"asc");l.length>0&&i.price.setData(l),n.length>0&&i.ratio.setData(n),a.value.timeScale().fitContent()}return(n,t)=>{const l=Z,r=C;return q(),b(r,{title:"Soft Liquidations Ratio"},{"actions-secondary":_(()=>[v(l,{items:h(s)},null,8,["items"])]),default:_(()=>[d("div",ke,null,512)]),_:1})}}}),De={ref:"chartRef",class:"chart"},Wt=w({__name:"ChartLiquidatorRevenue",props:{discounts:{},liqs:{}},setup(e){const o=P(),{items:s}=J(()=>[{id:"revenue",label:"Liquidator Revenue",color:o.value.colorsArray[0]},{id:"discount",label:"Discount",color:o.value.colorsArray[1]}]),{chart:a,series:i}=R({createChartOptions:A({leftPriceScale:{visible:!0}}),series:[D({name:"revenue",color:f(()=>o.value.colors.blue),formatter:"price",precision:0,minMove:1}),D({name:"discount",color:f(()=>o.value.colors.yellow),formatter:"percent",precision:6,minMove:1e-6})]});M(c);function c(){if(!a.value||!i.discount||!i.revenue)return;const n=e.liqs.map(r=>({time:r.timestamp.getUTCTimestamp(),value:r.debt})).uniqWith((r,u)=>r.time===u.time).orderBy(r=>r.time,"asc").reduce((r,u)=>{const p=r.length>0?r[r.length-1].value:0;return r.push({time:u.time,value:u.value+p}),r},[]),t=n.length>0?n[0].time:0,l=e.discounts.filter(r=>r.timestamp.getUTCTimestamp()>=t).map(r=>({time:r.timestamp.getUTCTimestamp(),value:r.discount*100})).uniqWith((r,u)=>r.time===u.time).orderBy(r=>r.time,"asc");n.length>0&&i.revenue.setData(n),l.length>0&&i.discount.setData(l),a.value.timeScale().fitContent()}return(n,t)=>{const l=Z,r=C;return q(),b(r,{title:"Liquidator Revenue"},{"actions-secondary":_(()=>[v(l,{items:h(s)},null,8,["items"])]),default:_(()=>[d("div",De,null,512)]),_:1})}}}),Ue={class:"end"},Be={class:"end"},Oe={class:"end"},Pe={class:"end"},Me={class:"end"},Re={class:"collateral end"},Ae={class:"end"},He=w({__name:"TableLiqOverview",props:{overview:{}},setup(e){const o=f(()=>{if(!e.overview)return 0;const s=e.overview.liqableDebtUsd,a=e.overview.liqableCollatUsd+e.overview.liqableBorrowedUsd,i=s-a;return i<=0?0:i});return(s,a)=>{const i=de,c=x,n=I,t=C;return q(),b(t,{title:"General Health Metrics"},{default:_(()=>[v(n,{class:"liq-overview-table"},{default:_(()=>[v(i,null,{default:_(()=>{var l;return[a[0]||(a[0]=d("div",null,"Users in soft liquidation",-1)),d("div",Ue,$(((l=s.overview)==null?void 0:l.softLiqUsers)??0),1)]}),_:1}),v(i,null,{default:_(()=>{var l;return[a[1]||(a[1]=d("div",null,"Median health",-1)),d("div",Be,[v(c,{"show-zero":"",type:"percentage",value:((l=s.overview)==null?void 0:l.medianHealth)??0},null,8,["value"])])]}),_:1}),v(i,null,{default:_(()=>{var l;return[a[2]||(a[2]=d("div",null,"Collaterization ratio",-1)),d("div",Oe,[v(c,{"show-zero":"",type:"percentage",value:((l=s.overview)==null?void 0:l.collatRatio)??0},null,8,["value"])])]}),_:1}),v(i,null,{default:_(()=>{var l;return[a[3]||(a[3]=d("div",null,"Liquidatable positions",-1)),d("div",Pe,$(((l=s.overview)==null?void 0:l.liqablePositions)??0),1)]}),_:1}),v(i,null,{default:_(()=>{var l;return[a[4]||(a[4]=d("div",null,"Liquidatable positions' debt",-1)),d("div",Me,[v(c,{"show-zero":"",type:"dollar",value:((l=s.overview)==null?void 0:l.liqableDebtUsd)??0},null,8,["value"])])]}),_:1}),v(i,null,{default:_(()=>{var l,r;return[a[6]||(a[6]=d("div",null,"Liquidatable collateral (token / crvUSD)",-1)),d("div",Re,[v(c,{"show-zero":"",type:"dollar",value:((l=s.overview)==null?void 0:l.liqableCollatUsd)??0},null,8,["value"]),a[5]||(a[5]=V(" / ")),v(c,{"show-zero":"",type:"dollar",value:((r=s.overview)==null?void 0:r.liqableBorrowedUsd)??0},null,8,["value"])])]}),_:1}),h(o)>0?(q(),b(i,{key:0},{default:_(()=>[a[7]||(a[7]=d("div",null,"Bad debt",-1)),d("div",Ae,[v(c,{"show-zero":"",class:"red",type:"dollar",value:h(o)},null,8,["value"])])]),_:1})):ne("",!0)]),_:1})]),_:1})}}}),Ft=B(He,[["__scopeId","data-v-472ed839"]]),Ve={class:"address"},We=["href"],Fe={class:"end"},Ke={class:"end"},Ie=w({__name:"TableTopLiquidators",props:{liqs:{}},setup(e){const o=f(()=>e.liqs.groupBy(s=>s.liquidator).entries().map(([s,a])=>({liquidator:s,count:a.length,value:a.reduce((i,c)=>i+c.collateralReceivedUsd,0)})).orderBy(s=>s.value,"desc").take(5));return(s,a)=>{const i=x,c=I,n=C;return q(),b(n,{title:"Top Liquidators"},{default:_(()=>[v(c,{class:"liquidators-table",rows:h(o),columns:["Address",{label:"Count",align:"end"},{label:"Value",align:"end"}]},{row:_(({item:t})=>[d("div",Ve,[d("a",{target:"_blank",href:`https://etherscan.io/address/${t.liquidator}`},$(("addressShort"in s?s.addressShort:h(j))(t.liquidator,8)),9,We)]),d("div",Fe,[v(i,{"show-zero":"",value:t.count,precision:0},null,8,["value"])]),d("div",Ke,[v(i,{type:"dollar",value:t.value,precision:1},null,8,["value"])])]),_:1},8,["rows"])]),_:1})}}}),Kt=B(Ie,[["__scopeId","data-v-31325472"]]),Qe=e=>({timestamp:U(e.timestamp),proportion:e.proportion/100}),je=e=>({timestamp:U(e.dt),user:e.user,liquidator:e.liquidator,self:e.self,collateralReceived:e.collateral_received,collateralReceivedUsd:e.collateral_received_usd,stablecoinReceived:e.stablecoin_received,priceOracle:e.oracle_price,debt:e.debt,n1:e.n1,n2:e.n2,tx:e.tx,block:e.block}),ze=e=>({timestamp:U(e.timestamp),selfCount:e.self_count,hardCount:e.hard_count,selfValue:e.self_value,hardValue:e.hard_value,price:e.price}),Ee=e=>({softLiqUsers:e.soft_liquidation_users,liqablePositions:e.liquidatable_positions,liqableDebtUsd:e.liquidatable_pos_debt_usd,liqableCollatUsd:e.liquidatable_collateral_usd,liqableBorrowedUsd:e.liquidatable_borrowed_usd,medianHealth:e.median_health,avgHealth:e.average_health,collatRatio:e.collat_ratio}),Ne=e=>({timestamp:U(e.timestamp),pctLossAverage:e.avg_pct_loss,pctLossMedian:e.median_pct_loss,absoluteLossAverage:e.avg_abs_loss,absoluteLossMedian:e.median_abs_loss,numTotalUsers:e.total_users,numUsersWithLosses:e.users_with_losses,ratio:e.ratio}),Xe=e=>({decile:e.health_decile,collateralUsdValue:e.collateral,debt:e.debt,stablecoin:e.stablecoin});async function Ye(e,o,s,a){const i=T(a);return(await S(`${i}/v1/${e}/liquidations/${o}/${s}/soft_liquidation_ratio`)).data.map(Qe)}async function Ge(e,o,s,a){const i=T(a);return(await S(`${i}/v1/${e}/liquidations/${o}/${s}/history/detailed`)).data.map(je)}async function Je(e,o,s,a){const i=T(a);return(await S(`${i}/v1/${e}/liquidations/${o}/${s}/history/aggregated`)).data.map(ze)}async function Ze(e,o,s,a){const i=T(a),c=await S(`${i}/v1/${e}/liquidations/${o}/${s}/overview?fetch_on_chain=true`);return Ee(c)}async function xe(e,o,s,a){const i=T(a);return(await S(`${i}/v1/${e}/liquidations/${o}/${s}/losses/history`)).data.map(Ne)}async function et(e,o,s,a){const i=T(a);return(await S(`${i}/v1/${e}/liquidations/${o}/${s}/health/distribution`)).data.map(Xe)}function F(){return{initialData:[],initialDataUpdatedAt:0}}function H(e,o){return{enabled:f(()=>!!e.value&&(o?!!o.value:!0))}}function It(e,o,s){return k({queryKey:["liqs-soft-liqs",s],queryFn:({queryKey:[,a]})=>Ye(e.value,o.value,a),...H(s,o),...F()})}function Qt(e,o,s){return k({queryKey:["liqs-detailed",s],queryFn:({queryKey:[,a]})=>Ge(e.value,o.value,a),...H(s,o),...F()})}function jt(e,o,s){return k({queryKey:["liqs-aggregate",s],queryFn:({queryKey:[,a]})=>Je(e.value,o.value,a),...H(s,o),...F()})}function zt(e,o,s){return k({queryKey:["liqs-overview",s],queryFn:({queryKey:[,a]})=>Ze(e.value,o.value,a),...H(s,o)})}function Et(e,o,s){return k({queryKey:["liqs-losses",s],queryFn:({queryKey:[,a]})=>xe(e.value,o.value,a),...H(s,o),...F()})}function Nt(e,o,s){return k({queryKey:["liqs-health-deciles",s],queryFn:({queryKey:[,a]})=>et(e.value,o.value,a),...H(s,o),...F()})}const tt={class:"controls"},at={ref:"chartRef",class:"chart"},st=w({__name:"ChartOHLC",props:{ohlc:{}},setup(e){const o=P(),s=Q(!1),a=Q(!1);let i=1,c=0;const{chart:n,series:t}=R({createChartOptions:A({localization:{priceFormatter:u=>r(u)}}),series:[{type:re,name:"ohlc",options:f(()=>{const{colors:u}=o.value;return{priceFormat:{type:"price",precision:6,minMove:1e-6},upColor:u.green,borderUpColor:u.green,wickUpColor:u.green,downColor:u.red,borderDownColor:u.red,wickDownColor:u.red}})},{type:ce,name:"oracle",options:f(()=>({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ue.WithSteps,color:o.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}]});M(l);function l(){if(!n.value||!t.ohlc||!t.oracle)return;const u=s.value?-1:1,p=e.ohlc.filter(m=>m.open!==null&&m.high!==null&&m.low!==null&&m.close!==null).map(m=>({time:m.time.getUTCTimestamp(),open:Math.pow(m.open,u),high:Math.pow(m.high,u),low:Math.pow(m.low,u),close:Math.pow(m.close,u)})).uniqWith((m,g)=>m.time===g.time).orderBy(m=>m.time,"asc");p.length>0&&(t.ohlc.setData(p),c=Math.min(...p.map(m=>m.low)),i=Math.max(...p.map(m=>m.high)));const y=e.ohlc.filter(m=>m.oraclePrice!==null).map(m=>({time:m.time.getUTCTimestamp(),value:Math.pow(m.oraclePrice,u)})).uniqWith((m,g)=>m.time===g.time).orderBy(m=>m.time,"asc");y.length>0&&t.oracle.setData(y),t.oracle.applyOptions({visible:a.value}),n.value.timeScale().fitContent()}function r(u){const p=i-c,y=p>1?p-Math.floor(p):p,m=-Math.floor(Math.log10(y)+1)+2;return`${L(u,m,"dollar")}${W(u)}`}return(u,p)=>{const y=G,m=C;return q(),b(m,{title:"Price"},{actions:_(()=>[d("div",tt,[v(y,{"model-value":h(a),onClick:p[0]||(p[0]=g=>a.value=!h(a))},{default:_(()=>p[2]||(p[2]=[V(" Oracle Price ")])),_:1},8,["model-value"]),v(y,{"model-value":h(s),onClick:p[1]||(p[1]=g=>s.value=!h(s))},{default:_(()=>p[3]||(p[3]=[V(" Invert ")])),_:1},8,["model-value"])])]),default:_(()=>[d("div",at,null,512)]),_:1})}}}),Xt=B(st,[["__scopeId","data-v-0201eea8"]]),ot={class:"end"},nt=["href"],it={class:"end"},lt=["href"],rt=w({__name:"TableEvents",props:{events:{},count:{}},emits:["page"],setup(e,{emit:o}){const s=o,{page:a,onPage:i}=ee(),c=X(a,200);Y(c,u=>{s("page",u)});const{relativeTime:n}=ae(),t=u=>u<1?u.toFixed(4):u>1e3?u.toFixed(0):u.toFixed(2),l=u=>{var p,y;return t(((p=u.deposit)==null?void 0:p.amount)??((y=u.withdrawal)==null?void 0:y.amountCollateral)??0)},r=u=>u.deposit?"Deposit":u.withdrawal?"Withdrawal":"Unknown";return(u,p)=>{const y=te,m=I,g=C;return q(),b(g,{title:"Events"},{actions:_(()=>[v(y,{"items-count":u.count,"items-per-page":10,page:h(a),onPage:h(i)},null,8,["items-count","page","onPage"])]),default:_(()=>[v(m,{class:"events-table",rows:u.events,columns:["Type",{label:"Amount",align:"end"},"","Provider",{label:"Time",align:"end"}]},{row:_(({item:O})=>[d("div",null,$(r(O)),1),d("div",ot,$(l(O)),1),p[2]||(p[2]=d("div",null,null,-1)),d("div",null,[d("a",{target:"_blank",href:`https://etherscan.io/address/${O.provider}`,onClick:p[0]||(p[0]=K(()=>{},["stop"]))},$(("addressShort"in u?u.addressShort:h(j))(O.provider)),9,nt)]),d("div",it,[d("a",{target:"_blank",href:`https://etherscan.io/tx/${O.txHash}`,onClick:p[1]||(p[1]=K(()=>{},["stop"]))},$(h(n)(O.timestamp.getUTCTimestamp())),9,lt)])]),_:1},8,["rows"])]),_:1})}}}),Yt=B(rt,[["__scopeId","data-v-7ae8399c"]]),ct={class:"end"},ut=["href"],dt={class:"end"},mt=["href"],pt=["href"],_t={class:"end"},ht=["href"],vt=w({__name:"TableTrades",props:{trades:{},count:{},chain:{}},emits:["page"],setup(e,{emit:o}){const s=o,{page:a,onPage:i}=ee(),c=X(a,200);Y(c,l=>{s("page",l)});const{relativeTime:n}=ae(),t=l=>l<1?l.toFixed(4):l>1e3?l.toFixed(0):l.toFixed(2);return(l,r)=>{const u=te,p=me,y=I,m=C;return q(),b(m,{title:"Trades"},{actions:_(()=>[v(u,{"items-count":l.count,"items-per-page":10,page:h(a),onPage:h(i)},null,8,["items-count","page","onPage"])]),default:_(()=>[v(y,{class:"trades-table",rows:l.trades,columns:[{label:"Bought",align:"end"},"","",{label:"Sold",align:"end"},"","","Market Maker",{label:"Time",align:"end"}]},{row:_(({item:g})=>[d("div",ct,$(t(g.amountBought)),1),v(p,{chain:l.chain,address:g.tokenBought.address},null,8,["chain","address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${g.tokenBought.address}`},$(g.tokenBought.symbol),9,ut)]),d("div",dt,$(t(g.amountSold)),1),v(p,{chain:l.chain,address:g.tokenSold.address},null,8,["chain","address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${g.tokenSold.address}`},$(g.tokenSold.symbol),9,mt)]),d("div",null,[d("a",{target:"_blank",href:`https://etherscan.io/address/${g.buyer}`,onClick:r[0]||(r[0]=K(()=>{},["stop"]))},$(("addressShort"in l?l.addressShort:h(j))(g.buyer)),9,pt)]),d("div",_t,[d("a",{target:"_blank",href:`https://etherscan.io/tx/${g.txHash}`,onClick:r[1]||(r[1]=K(()=>{},["stop"]))},$(h(n)(g.timestamp.getUTCTimestamp())),9,ht)])]),_:1},8,["rows"])]),_:1})}}}),Gt=B(vt,[["__scopeId","data-v-6212d8d5"]]);export{Xt as C,Ft as T,Vt as _,zt as a,It as b,jt as c,Qt as d,Nt as e,Et as f,Rt as g,At as h,Ht as i,Pt as j,Mt as k,Kt as l,Wt as m,Bt as n,Ut as o,Gt as p,Yt as q,Ot as u};
