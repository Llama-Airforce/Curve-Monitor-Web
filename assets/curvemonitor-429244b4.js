import{_ as P,m as ie,p as y,B as S,x as w,I as h,v as x,V as Ke,q as B,X as Xe,ag as Ye,l as z,f as I,g as k,h as L,w as R,D as O,t as $,y as d,U as ce,Y as U,F as Le,K as Ce,a6 as Ze,ac as F,G as W,Q as et,a5 as Ve,ai as tt,a4 as re,ah as Pe,M as Te,N as De,bh as Ie,ae as N,ad as nt,ab as ze,R as Me,ar as ue,a9 as de,a0 as Re,aj as J,ak as K,a3 as D,al as X,bi as Y,j as Z,u as ee,C as te,J as ot,bj as Be,E as at,ao as st,$ as rt,a1 as lt,a2 as it,aO as ct,aP as ut,aQ as dt,aR as pt,aS as _t}from"./lightweight-charts.production-e12c3aa7.js";import{aw as C,ax as mt,ay as V}from"./index-52cb6942-302b6965.js";import{o as ft,t as ht,d as vt,r as bt}from"./tap-fad1e3a5.js";import"./async-4a413d62.js";const gt={},yt={class:"root"},wt={class:"main"},St={class:"content"};function $t(n,t){const e=ie("notifications"),o=ie("router-view");return y(),S("div",yt,[w(e,{width:600,duration:-1}),h("main",wt,[h("div",St,[w(o,null,{default:x(({Component:s})=>[w(Ke,{name:"fade",mode:"out-in"},{default:x(()=>[(y(),B(Xe(s)))]),_:2},1024)]),_:1})])])])}const xt=P(gt,[["render",$t],["__scopeId","data-v-ba48bf35"]]),M=Ye({id:"curveMonitorStore",state:()=>({socket:null,socketPool:null,pool:null,pools:[],poolsLoadingError:!1,prices:[],balances:[],volumes:[],transactions:[],tvl:[],bonding:{curve:[],balanceCoin0:0,balanceCoin1:0},coins:[],pair:null,timeRange:"month",sandwiches:[]})}),kt="/assets/crv-ca6314ed.png";class Lt{constructor(t){this.get$=new C(e=>{let o=1/0,s=!1;const a=()=>{e.next(Date.now()-o),s=!1};t.on("pong",a);const r=ft({}).pipe(ht(()=>{if(s){e.next(1/0);return}s=!0,o=Date.now(),t.emit("ping")}),vt(5e3),bt()).subscribe();return()=>{r.unsubscribe(),t.off("pong",a)}}).pipe(mt({refCount:!0,bufferSize:1}))}}class Ct{constructor(t){this.socket=t}get(t){const e=new Promise(o=>{this.socket.once("search_res",s=>{const a=Object.entries(s).map(([r,_])=>({id:r.toLocaleLowerCase(),name:_}));o(a)})});return this.socket.emit("search",t),e}}class Vt{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>pe(r));e.next(a)};return t.on("price_chart",o),()=>{t.off("price_chart",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=pe(s);e.next(a)};return t.on("Update Price-Chart",o),()=>{t.off("Update Price-Chart",o)}}).pipe(V())}}function pe(n){const t=Object.keys(n)[0],e=parseInt(t,10),o=n[t];return{timestamp:e,value:o}}class Pt{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>_e(r));e.next(a)};return t.on("balances_chart",o),()=>{t.off("balances_chart",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=_e(s);e.next(a)};return t.on("Update Balance-Chart",o),()=>{t.off("Update Balance-Chart",o)}}).pipe(V())}}function _e(n){const t=Object.keys(n)[0],e=parseInt(t,10),o=n[t];return{timestamp:e,balances:o}}class Tt{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>me(r));e.next(a)};return t.on("volume_chart",o),()=>{t.off("volume_chart",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=me(s);e.next(a)};return t.on("Update Volume-Chart",o),()=>{t.off("Update Volume-Chart",o)}}).pipe(V())}}function me(n){const t=Object.keys(n)[0],e=parseInt(t,10),o=n[t];return{timestamp:e,volume:o}}class Dt{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>se(r)).flat(1);e.next(a)};return t.on("table_all",o),()=>{t.off("table_all",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=se(s);for(const r of a)e.next(r)};return t.on("Update Table-ALL",o),()=>{t.off("Update Table-ALL",o)}}).pipe(V())}}function se(n){let t;if(n.type==="swap")t="swap";else if(n.type==="deposit")t="deposit";else if(n.type==="remove")t="withdraw";else return[];const e=n.txHash.toLocaleLowerCase(),o=n.blockNumber,s=n.trader.toLocaleLowerCase(),a=n.unixtime;let r;if(t==="swap"){const _=n;return r=[{type:t,txHash:e,blockNumber:o,trader:s,timestamp:a,fee:_.tradeDetails.feeUSD,value:_.tradeDetails.valueUSD,amountIn:_.tradeDetails.amountIn,amountOut:_.tradeDetails.amountOut,tokenIn:_.tradeDetails.nameIn,tokenOut:_.tradeDetails.nameOut}],r}else t==="deposit"?r=n.tradeDetails.map(f=>({type:"deposit",txHash:e,blockNumber:o,trader:s,timestamp:a,value:f.valueUSD,amountIn:f.amountIn,tokenIn:f.nameIn})):r=n.tradeDetails.map(f=>({type:"withdraw",txHash:e,blockNumber:o,trader:s,timestamp:a,value:f.valueUSD,amountOut:f.amountOut,tokenOut:f.nameOut}));return r}class It{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>fe(r));e.next(a)};return t.on("tvl_chart",o),()=>{t.off("tvl_chart",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=fe(s);e.next(a)};return t.on("Update TVL-Chart",o),()=>{t.off("Update TVL-Chart",o)}}).pipe(V())}}function fe(n){const t=Object.keys(n)[0],e=parseInt(t,10),o=n[t];return{timestamp:e,tvl:o}}class zt{constructor(t){this.get$=new C(e=>{const o=s=>{const a=Mt(s);e.next(a)};return t.on("bonding_curve",o),()=>{t.off("bonding_curve",o)}}).pipe(V())}}function Mt(n){return{curve:z.zipWith(n.x,n.y,(e,o)=>({x:e,y:o})),balanceCoin0:n.balance0,balanceCoin1:n.balance1}}class Rt{constructor(t){this.get$=new C(e=>{const o=s=>{const a=Bt(s);e.next(a)};return t.on("token names inside pool",o),()=>{t.off("token names inside pool",o)}}).pipe(V())}}function Bt(n){return n.map(t=>({name:t}))}class Ue{constructor(t){this.socket=t,this.update$=new C(e=>{const o=s=>{e.next(s)};return t.on("price_chart_combination",o),()=>{t.off("price_chart_combination",o)}}).pipe(V())}update(t,e){this.socket.emit("new combination",[t,e[0],e[1]])}}class Ut{constructor(t){this.socket=t}update(t){this.socket.emit(t)}}class Ft{constructor(t){this.init$=new C(e=>{const o=s=>{const a=s.map(r=>he(r));e.next(a)};return t.on("table_mev",o),()=>{t.off("table_mev",o)}}).pipe(V()),this.update$=new C(e=>{const o=s=>{const a=he(s);e.next(a)};return t.on("Update Table-MEV",o),()=>{t.off("Update Table-MEV",o)}}).pipe(V())}}function he(n){const t=n.blockNumber,e=n.unixtime,o=n.tx.map(s=>se(s)).flat(1);return{blockNumber:t,timestamp:e,profit:n.profit,profitUnit:n.profitUnit,loss:n.loss,lossUnit:n.lossUnit,txs:o}}const Et={class:"pair"},Ot={class:"item"},Wt=["src"],Nt={class:"label"},At={class:"item"},Ht=["src"],jt={class:"label"},qt=I({__name:"SelectorPair",setup(n){const t=M(),e=k([!1,!1]),o=k([null,null]),s=L(()=>t.coins.map(c=>({label:c.name}))),a=L(()=>t.pair?[{label:t.pair[0]},{label:t.pair[1]}]:null),r=c=>c!=null&&c.logo?`${c.logo}`:"",_=c=>c?`${c.label}`:"?",f=c=>{e.value[c]=!e.value[c]},g=(c,i,l)=>{var m,p;const v=c===0?1:0,b=o.value[c],u=i;(b==null?void 0:b.label)!==u.label&&(o.value[c]=u,((m=o.value[c])==null?void 0:m.label)===((p=o.value[v])==null?void 0:p.label)&&(o.value[v]=b),l&&t.socketPool&&o.value[0]&&o.value[1]&&new Ue(t.socketPool).update(t.timeRange,[o.value[0].label,o.value[1].label]))};return R(a,()=>{g(0,a.value?a.value[0]:null,!1),g(1,a.value?a.value[1]:null,!1)}),(c,i)=>(y(),S("div",Et,[w(d(ce),{class:"select",options:d(s),selected:o.value[0],open:e.value[0],onOpen:i[0]||(i[0]=l=>f(0)),onClose:i[1]||(i[1]=l=>e.value[0]=!1),onInput:i[2]||(i[2]=l=>g(0,l,!0))},{item:x(l=>{var v;return[h("div",Ot,[(v=l.item)!=null&&v.logo?(y(),S("img",{key:0,src:r(l.item)},null,8,Wt)):O("",!0),h("div",Nt,$(_(l.item)),1)])]}),_:1},8,["options","selected","open"]),w(d(ce),{class:"select",options:d(s),selected:o.value[1],open:e.value[1],onOpen:i[3]||(i[3]=l=>f(1)),onClose:i[4]||(i[4]=l=>e.value[1]=!1),onInput:i[5]||(i[5]=l=>g(1,l,!0))},{item:x(l=>{var v;return[h("div",At,[(v=l.item)!=null&&v.logo?(y(),S("img",{key:0,src:r(l.item)},null,8,Ht)):O("",!0),h("div",jt,$(_(l.item)),1)])]}),_:1},8,["options","selected","open"])]))}});const Qt=P(qt,[["__scopeId","data-v-e7d1f291"]]),Gt=["day","week","month"],Jt={class:"ranges"},Fe=I({__name:"SelectorRange",setup(n){const{t}=U(),e=M(),o=s=>{e.timeRange!==s&&(e.timeRange=s,e.pair&&new Ut(e.socketPool).update(s))};return(s,a)=>(y(),S("div",Jt,[(y(!0),S(Le,null,Ce(d(Gt),r=>(y(),B(d(Ze),{key:r,"model-value":d(e).timeRange===r,value:d(t)(r),onClick:_=>o(r)},null,8,["model-value","value","onClick"]))),128))]))}});function ve(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{day:t=>{const{normalize:e}=t;return e(["Day"])},week:t=>{const{normalize:e}=t;return e(["Week"])},month:t=>{const{normalize:e}=t;return e(["Month"])}}})}typeof ve=="function"&&ve(Fe);const Kt=P(Fe,[["__scopeId","data-v-f4174cca"]]),Xt={class:"status"},Yt={class:"ping"},Zt=I({__name:"Status",props:{statusService:null},setup(n){const t=k(1/0),e=k("bad");return F(()=>{n.statusService.get$.subscribe(o=>{t.value=o,e.value=o<=50?"good":o<=500?"meh":"bad"})}),(o,s)=>(y(),S("div",Xt,[w(d(et),{class:"tooltip"},{item:x(()=>[h("div",{class:W(["indicator",e.value])},null,2)]),default:x(()=>[h("div",Yt,"Ping: "+$(t.value===1/0?"?":t.value)+"ms",1)]),_:1})]))}});const en=P(Zt,[["__scopeId","data-v-c2f620ae"]]);function tn(n){return Ve(`${n}/`,{autoConnect:!1,secure:!0})}function nn(n,t){return Ve(`${n}/${t}`,{autoConnect:!1,secure:!0})}function on(n,t,e){const o=nn(t,e),s=new Tt(o),a=new Vt(o),r=new Dt(o),_=new Pt(o),f=new It(o),g=new zt(o),c=new Rt(o),i=new Ue(o),l=new Ft(o);return un(n,r),ln(n,a),sn(n,_),rn(n,f),cn(n,s),dn(n,g),pn(n,c),_n(n,i),mn(n,l),o.connect(),o}async function an(n,t,e){const o=await t.get(e);o?n.pools=o:n.poolsLoadingError=!0}let A=null;function sn(n,t){A&&A.unsubscribe();try{A=t.init$.subscribe({next:e=>{n.balances=e},error:e=>console.error(e)}),A.add(t.update$.subscribe({next:e=>{n.balances.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}let H=null;function rn(n,t){H&&H.unsubscribe();try{H=t.init$.subscribe({next:e=>{n.tvl=e},error:e=>console.error(e)}),H.add(t.update$.subscribe({next:e=>{n.tvl.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}let j=null;function ln(n,t){j&&j.unsubscribe();try{j=t.init$.subscribe({next:e=>{n.prices=e},error:e=>console.error(e)}),j.add(t.update$.subscribe({next:e=>{n.prices.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}let q=null;function cn(n,t){q&&q.unsubscribe();try{q=t.init$.subscribe({next:e=>{n.volumes=e},error:e=>console.error(e)}),q.add(t.update$.subscribe({next:e=>{n.volumes.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}let Q=null;function un(n,t){Q&&Q.unsubscribe();try{Q=t.init$.subscribe({next:e=>{n.transactions=e},error:e=>console.error(e)}),Q.add(t.update$.subscribe({next:e=>{n.transactions.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}let ne=null;function dn(n,t){ne&&ne.unsubscribe();try{ne=t.get$.subscribe({next:e=>{n.bonding=e},error:e=>console.error(e)})}catch{n.poolsLoadingError=!0}}let oe=null;function pn(n,t){oe&&oe.unsubscribe();try{oe=t.get$.subscribe({next:e=>{n.coins=e},error:e=>console.error(e)})}catch{n.poolsLoadingError=!0}}let ae=null;function _n(n,t){ae&&ae.unsubscribe();try{ae=t.update$.subscribe({next:e=>{n.pair=e},error:e=>console.error(e)})}catch{n.poolsLoadingError=!0}}let G=null;function mn(n,t){G&&G.unsubscribe();try{G=t.init$.subscribe({next:e=>{n.sandwiches=e},error:e=>console.error(e)}),G.add(t.update$.subscribe({next:e=>{n.sandwiches.push(e)},error:e=>console.error(e)}))}catch{n.poolsLoadingError=!0}}const fn={key:0,class:"item"},hn=["src"],vn={class:"label"},Ee=I({__name:"SearchPool",props:{modelValue:null,poolService:null},emits:["update:modelValue","select"],setup(n,{emit:t}){const{t:e}=U(),o=M(),s=k(!1),a=k(e("search-placeholder")),r=L(()=>o.pools),_=i=>{const l=Pe(i.name);return l.substring(0,9)==="Curve.fi "?l.slice(9):l},f=z.debounce(an,200,{maxWait:1e3}),g=i=>{f(o,n.poolService,i),s.value=!!i},c=i=>{const l=i;s.value=!1,t("select",l)};return R(()=>o.poolsLoadingError,i=>{i?a.value=e("search-error"):a.value=e("search-placeholder")}),(i,l)=>(y(),B(d(re),{class:"select-pool","model-value":n.modelValue,placeholder:a.value,search:!0,"auto-complete":s.value,options:d(r),"onUpdate:modelValue":l[0]||(l[0]=v=>t("update:modelValue",v)),onInput:g,onSelect:c},{item:x(v=>[v.item?(y(),S("div",fn,[h("img",{src:d(tt)(v.item.name,!1)},null,8,hn),h("div",vn,$(_(v.item)),1)])):O("",!0)]),_:1},8,["model-value","placeholder","auto-complete","options"]))}});function be(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{"search-loading":t=>{const{normalize:e}=t;return e(["Loading pools, please wait..."])},"search-placeholder":t=>{const{normalize:e}=t;return e(["Search for Curve pools"])},"search-error":t=>{const{normalize:e}=t;return e(["Failed loading Curve pools"])}}})}typeof be=="function"&&be(Ee);const bn=P(Ee,[["__scopeId","data-v-ce076206"]]),gn=n=>(Te("data-v-4279fedc"),n=n(),De(),n),yn=gn(()=>h("div",{class:"logo"},[h("img",{src:kt}),h("span",null,"Curve")],-1)),wn=I({__name:"Controls",props:{statusService:null,poolService:null},setup(n){const t=M(),e=k(""),o=L(()=>t.pool!==null),s=a=>{const r=a;e.value=Pe(r.name),t.pool=r};return(a,r)=>(y(),S("div",{class:W(["controls",{hasPool:d(o)}])},[yn,w(bn,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=_=>e.value=_),class:"search","pool-service":n.poolService,onSelect:s},null,8,["modelValue","pool-service"]),w(Qt),w(Kt),w(en,{"status-service":n.statusService},null,8,["status-service"])],2))}});const Sn=P(wn,[["__scopeId","data-v-4279fedc"]]);function $n(n){return n.type==="swap"}function xn(n){return n.type==="deposit"}function kn(n){return n.type==="withdraw"}function Oe(n,t){const o=Math.round(n.value/1e3)-t;return o<60?`${Math.round(o)} seconds ago`:o<60*60?`${Math.round(o/60)} minutes ago`:o<60*60*24?`${Math.round(o/(60*60))} hours ago`:`${Math.round(o/(60*60*24))} days ago`}const Ln={class:"title"},Cn={key:0,class:"fas fa-arrow-up"},Vn={key:1,class:"fas fa-arrow-down"},Pn={key:2,class:"fas fa-exchange-alt"},Tn={key:0,class:"number"},Dn=["href"],In=["href"],zn=["href"],Mn=["innerHTML"],Rn={key:0},Bn={key:1,class:"number"},We=I({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(n){const{t}=U(),e=10,o=M(),s=k(""),a=k(["swap","deposit","withdraw"]),r=k(1),_=k(Date.now()),f=L(()=>n.time?["Type","Block","Tx","Trader","Assets","Fees","Time"]:["Type","Tx","Trader","Assets","Fees"]),g=L(()=>z.chain(n.txs?n.txs:o.transactions).filter(u=>a.value.includes(u.type)).filter(u=>{const m=s.value.toLocaleLowerCase().split(" "),p=T=>m.some(E=>T.toLocaleLowerCase().includes(E));return p(u.blockNumber.toString())||p(u.trader)||p(u.txHash)}).reverse().value()),c=L(()=>z.chain(g.value).drop((r.value-1)*e).take(e).value());F(()=>{setInterval(()=>{_.value=Date.now()})});const i=u=>Oe(_,u),l=u=>{if($n(u)){const m=u.amountIn.toLocaleString(),p=u.amountOut.toLocaleString(),T=`<span>${m} ${u.tokenIn}</span>`,E="<i class='fas fa-arrow-right'></i>",Je=`<span style='justify-self: end;'>${p} ${u.tokenOut}</span>`;return`${T}${E}${Je}`}else{if(xn(u))return`${u.amountIn.toLocaleString()} ${u.tokenIn}`;if(kn(u))return`${u.amountOut.toLocaleString()} ${u.tokenOut}`}return"???"},v=u=>{r.value=u},b=u=>{u===0?a.value=["swap","deposit","withdraw"]:u===1?a.value=["swap"]:u===2?a.value=["deposit"]:u===3?a.value=["withdraw"]:a.value=[]};return R(c,u=>{u.length===0&&(r.value=Math.max(1,Math.ceil(g.value.length/e)))}),(u,m)=>(y(),B(d(Re),{class:W(["datatable-trades",{compact:n.compact,time:n.time}]),"columns-header":"auto auto 1fr","columns-data":"trades-columns-data",rows:d(c),columns:d(f)},Ie({row:x(p=>[h("div",{class:W(["type",{deposit:p.item.type==="deposit",withdraw:p.item.type==="withdraw",swap:p.item.type==="swap"}])},[p.item.type==="deposit"?(y(),S("i",Cn)):p.item.type==="withdraw"?(y(),S("i",Vn)):(y(),S("i",Pn)),Me(" "+$(d(t)(p.item.type)),1)],2),n.time?(y(),S("div",Tn,[h("a",{class:"vote-link",href:`https://etherscan.io/block/${p.item.blockNumber}`,target:"_blank"},$(p.item.blockNumber),9,Dn)])):O("",!0),h("div",{onClick:m[2]||(m[2]=de(()=>{},["stop"]))},[h("a",{class:"vote-link",href:`https://etherscan.io/tx/${p.item.txHash}`,target:"_blank"},$(d(ue)(p.item.txHash)),9,In)]),h("div",{onClick:m[3]||(m[3]=de(()=>{},["stop"]))},[h("a",{class:"vote-link",href:`https://etherscan.io/address/${p.item.trader}`,target:"_blank"},$(d(ue)(p.item.trader)),9,zn)]),h("div",{class:W(["assets",{swap:p.item.type==="swap"}]),innerHTML:l(p.item)},null,10,Mn),h("div",{class:W({number:n.time})},[p.item.type==="swap"?(y(),S("span",Rn," $"+$(d(z.round)(p.item.fee).toLocaleString()),1)):O("",!0)],2),n.time?(y(),S("div",Bn,$(i(p.item.timestamp)),1)):O("",!0)]),_:2},[n.header?{name:"header-title",fn:x(()=>[h("div",Ln,$(d(t)("title")),1),w(d(nt),{class:"types",onTab:m[0]||(m[0]=p=>b(p.index))},{default:x(()=>[w(d(N),{header:"All"}),w(d(N),{header:"Swaps"}),w(d(N),{header:"Deposits"}),w(d(N),{header:"Withdrawals"})]),_:1}),w(d(re),{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=p=>s.value=p),class:"search",search:!0,placeholder:d(t)("search-placeholder")},null,8,["modelValue","placeholder"])]),key:"0"}:void 0,n.header?{name:"header-actions",fn:x(()=>[w(d(ze),{class:"pagination","items-count":d(g).length,"items-per-page":e,page:r.value,onPage:v},null,8,["items-count","page"])]),key:"1"}:void 0]),1032,["class","rows","columns"]))}});function ge(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["Transactions"])},swap:t=>{const{normalize:e}=t;return e(["Swap"])},withdraw:t=>{const{normalize:e}=t;return e(["Withdraw"])},deposit:t=>{const{normalize:e}=t;return e(["Deposit"])},"search-placeholder":t=>{const{normalize:e}=t;return e(["Search for..."])}}})}typeof ge=="function"&&ge(We);const Ne=P(We,[["__scopeId","data-v-a4082a84"]]),Un={class:"title"},Fn={class:"number"},En=["href"],On={class:"number"},Wn={class:"number"},Nn={class:"number"},Ae=I({__name:"Sandwiches",setup(n){const{t}=U(),e=6,o=M(),s=k(""),a=k(1),r=k([]),_=k(Date.now()),f=L(()=>z.chain(o.sandwiches).filter(b=>{const u=s.value.toLocaleLowerCase().split(" ");return(p=>u.some(T=>p.toLocaleLowerCase().includes(T)))(b.blockNumber.toString())}).reverse().value()),g=L(()=>z.chain(f.value).drop((a.value-1)*e).take(e).value());F(()=>{setInterval(()=>{_.value=Date.now()})});const c=b=>Oe(_,b),i=b=>r.value.includes(b)?(r.value=r.value.filter(u=>u!==b),!1):(r.value.push(b),!0),l=b=>{a.value=b},v=b=>{i(b)};return R(g,b=>{b.length===0&&(a.value=Math.max(1,Math.ceil(f.value.length/e)))}),(b,u)=>(y(),B(d(Re),{class:"datatable-sandwiches","columns-header":"auto 1fr auto","columns-data":"sandwiches-columns-data",rows:d(g),columns:["Block","Profit","Loss","Time"],expanded:r.value,onSelected:v},Ie({"header-title":x(()=>[h("div",Un,$(d(t)("title")),1),w(d(re),{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),class:"search",search:!0,placeholder:d(t)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:x(m=>[h("div",Fn,[h("a",{class:"vote-link",href:`https://etherscan.io/block/${m.item.blockNumber}`,target:"_blank"},$(m.item.blockNumber),9,En)]),h("div",On,[h("span",null,$(m.item.profit.toLocaleString())+" "+$(m.item.profitUnit),1)]),h("div",Wn,[h("span",null,$(m.item.loss.toLocaleString())+" "+$(m.item.lossUnit),1)]),h("div",Nn,$(c(m.item.timestamp)),1)]),"row-details":x(m=>[w(Ne,{class:"transactions",txs:m.item.txs,header:!1,compact:!0,time:!1},null,8,["txs"])]),_:2},[d(f).length>e?{name:"header-actions",fn:x(()=>[w(d(ze),{class:"pagination","items-count":d(f).length,"items-per-page":e,page:a.value,onPage:l},null,8,["items-count","page"])]),key:"0"}:void 0]),1032,["rows","expanded"]))}});function ye(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["Sandwiches"])},"search-placeholder":t=>{const{normalize:e}=t;return e(["Search for..."])}}})}typeof ye=="function"&&ye(Ae);const An=P(Ae,[["__scopeId","data-v-70ce91c6"]]),He=I({__name:"TVL",setup(n){const{t}=U();let e,o;const s=M(),a=k(null),r=L(()=>s.tvl);F(()=>{a.value&&(e=J(a.value,{width:a.value.clientWidth,height:a.value.clientHeight,layout:{background:{type:K.Solid,color:"rgba(255, 255, 255, 0)"},textColor:D.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:D.level4,style:X.Solid}},rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1,localization:{priceFormatter:c=>g(c)}}),_(),f(r.value))}),R(r,c=>{f(c)});const _=()=>{e&&(o=e.addAreaSeries({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:Y.WithSteps,lineColor:D.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},f=c=>{if(!e||!o)return;const i=z.chain(c).map(l=>({time:l.timestamp,value:l.tvl})).uniqWith((l,v)=>l.time===v.time).orderBy(l=>l.time,"asc").value();i.length>0&&o.setData(i),e.timeScale().fitContent()},g=c=>`$${Z(c,1,"dollar")}${ee(c,"dollar")}`;return(c,i)=>(y(),B(d(te),{class:"tvl",title:d(t)("title")},{default:x(()=>[h("div",{ref_key:"chartRef",ref:a,class:"chart"},null,512)]),_:1},8,["title"]))}});function we(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["TVL"])}}})}typeof we=="function"&&we(He);const Hn=P(He,[["__scopeId","data-v-c3ddef57"]]),je=I({__name:"Bonding",setup(n){const{t}=U();let e,o;const s=M(),a=k(null),r=L(()=>s.bonding);F(()=>{a.value&&(e=J(a.value,{width:a.value.clientWidth,height:a.value.clientHeight,layout:{background:{type:K.Solid,color:"rgba(255, 255, 255, 0)"},textColor:D.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:D.level4,style:X.Solid}},rightPriceScale:{visible:!1},leftPriceScale:{visible:!0,borderVisible:!1,scaleMargins:{top:.1,bottom:0}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0,tickMarkFormatter:c=>g(c)},handleScale:!1,handleScroll:!1,localization:{priceFormatter:c=>g(c),timeFormatter:c=>g(c)}}),_(),f(r.value))}),R(r,c=>{f(c)});const _=()=>{e&&(o=e.addLineSeries({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:Y.WithSteps,color:D.blue,lastValueVisible:!1,priceLineVisible:!1}))},f=c=>{if(!e||!o)return;const i=z.chain(c.curve).map(v=>({time:v.x,value:v.y})).value(),l=[{time:c.balanceCoin1,position:"inBar",color:D.yellow,shape:"circle"}];i.length>0&&(o.setData(i),o.setMarkers(l)),e.timeScale().fitContent()},g=c=>c<0?"":`${Z(Math.abs(c),0,"dollar")}${ee(c,"dollar")}`;return(c,i)=>(y(),B(d(te),{class:"bondings",title:d(t)("title")},{default:x(()=>[h("div",{ref_key:"chartRef",ref:a,class:"chart"},null,512)]),_:1},8,["title"]))}});function Se(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["Bonding Curve"])}}})}typeof Se=="function"&&Se(je);const jn=P(je,[["__scopeId","data-v-0c273b00"]]),qn={class:"legend"},Qn={class:"label"},Gn=I({__name:"Legend",setup(n){const t=M(),e=L(()=>t.coins);return(o,s)=>(y(),S("div",qn,[(y(!0),S(Le,null,Ce(d(e),(a,r)=>(y(),S("div",{key:a.name,class:"coin"},[h("div",{class:"color",style:ot({"background-color":d(Be)[r]})},null,4),h("div",Qn,$(a.name),1)]))),128))]))}});const Jn=P(Gn,[["__scopeId","data-v-c4b017ef"]]),qe=I({__name:"Balances",setup(n){const{t}=U();let e,o=[];const s=M(),a=k(null),r=L(()=>s.balances),_=L(()=>{var i,l;return((l=(i=s.balances[0])==null?void 0:i.balances)==null?void 0:l.length)??0});F(()=>{a.value&&(e=J(a.value,{width:a.value.clientWidth,height:a.value.clientHeight,layout:{background:{type:K.Solid,color:"rgba(255, 255, 255, 0)"},textColor:D.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:D.level4,style:X.Solid}},rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1,localization:{priceFormatter:i=>c(i)}}),f(),g(r.value))}),R(r,i=>{f(),g(i)});const f=()=>{if(e){for(const i of o)e.removeSeries(i);o=[];for(let i=0;i<_.value;i++){const l=e.addLineSeries({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:Y.WithSteps,color:Be[i],lastValueVisible:!1,priceLineVisible:!1});o.push(l)}}},g=i=>{if(!(!e||o.length<0)){for(let l=0;l<_.value;l++){const v=z.chain(i).map(b=>({time:b.timestamp,value:b.balances[l]})).uniqWith((b,u)=>b.time===u.time).orderBy(b=>b.time,"asc").value();v.length>0&&o[l].setData(v)}e.timeScale().fitContent()}},c=i=>`${Z(i,1,"dollar")}${ee(i,"dollar")}`;return(i,l)=>(y(),B(d(te),{class:"balances",title:d(t)("title")},{default:x(()=>[w(Jn),h("div",{ref_key:"chartRef",ref:a,class:"chart"},null,512)]),_:1},8,["title"]))}});function $e(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["Balances"])}}})}typeof $e=="function"&&$e(qe);const Kn=P(qe,[["__scopeId","data-v-dab251e1"]]),Qe=I({__name:"Prices",setup(n){const{t}=U();let e,o,s,a=1,r=0;const _=M(),f=k(null),g=L(()=>_.prices),c=L(()=>_.volumes);F(()=>{f.value&&(e=J(f.value,{width:f.value.clientWidth,height:f.value.clientHeight,layout:{background:{type:K.Solid,color:"rgba(255, 255, 255, 0)"},textColor:D.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:D.level4,style:X.Solid}},leftPriceScale:{borderVisible:!1,scaleMargins:{top:.6,bottom:0}},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1,localization:{priceFormatter:u=>b(u)}}),i(),l(g.value),v(c.value))}),R(g,u=>{l(u)}),R(c,u=>{v(u)});const i=()=>{e&&(o=e.addAreaSeries({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:Y.WithSteps,lineColor:D.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}),s=e.addHistogramSeries({color:D.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceScaleId:"left",priceLineVisible:!1}))},l=u=>{if(!e||!o)return;const m=z.chain(u).map(p=>({time:p.timestamp,value:p.value})).uniqWith((p,T)=>p.time===T.time).orderBy(p=>p.time,"asc").value();if(m.length>0){o.setData(m);const p=m[0].time,T=m[m.length-1].time;e.timeScale().setVisibleRange({from:p,to:T}),r=Math.min(...m.map(E=>E.value)),a=Math.max(...m.map(E=>E.value))}},v=u=>{if(!e||!s)return;const m=z.chain(u).map(p=>({time:p.timestamp,value:p.volume,color:D.yellow})).uniqWith((p,T)=>p.time===T.time).orderBy(p=>p.time,"asc").value();m.length>0&&s.setData(m)},b=u=>{const m=a-r,p=m>1?m-Math.floor(m):m,T=-Math.floor(Math.log10(p)+1)+2;return`${Z(u,T,"dollar")}${ee(u,"dollar")}`};return(u,m)=>(y(),B(d(te),{class:"prices",title:d(t)("title")},{default:x(()=>[h("div",{ref_key:"chartRef",ref:f,class:"chart"},null,512)]),_:1},8,["title"]))}});function xe(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{title:t=>{const{normalize:e}=t;return e(["Price"])}}})}typeof xe=="function"&&xe(Qe);const Xn=P(Qe,[["__scopeId","data-v-f338ba3f"]]),Yn={class:"curve-monitor"},Zn={class:"dashboard"},eo={key:0,class:"data"},to=I({__name:"Dashboard",setup(n){const t="https://ws.llama.airforce:2053",e=tn(t),o=new Lt(e),s=new Ct(e),a=at(),r=st(),_=M();_.socket=e;const f=L(()=>_.pool!==null);let g="";F(async()=>{const l=a.params.pool;await i(l),e.connect()});const c=async(l,v)=>{var u;g!==l.id&&(_.pool={id:"0xA5407eAE9Ba41422680e2e00537571bcC53efBfD",name:"susd"},(u=_.socketPool)==null||u.close(),_.socketPool=on(_,t,_.pool.id),g=_.pool.id,v&&await r.push({name:"curvemonitor",params:{pool:_.pool.id}}))},i=async l=>{l&&typeof l=="string"&&await c({id:l,name:"???"},!1)};return R(()=>_.pool,async l=>{await c(l,!0)}),R(()=>a.params,async l=>{const v=l.pool;await i(v)}),(l,v)=>(y(),S("div",Yn,[h("div",Zn,[w(Sn,{"status-service":d(o),"pool-service":d(s)},null,8,["status-service","pool-service"]),d(f)?(y(),S("div",eo,[w(An,{class:"sandwiches"}),w(Xn,{class:"prices"}),w(Ne,{class:"transactions"}),w(Kn,{class:"balances"}),w(Hn,{class:"tvl"}),w(jn,{class:"bonding"})])):O("",!0)])]))}});const no=P(to,[["__scopeId","data-v-a1001567"]]),oo=n=>(Te("data-v-343a8328"),n=n(),De(),n),ao={class:"not-found"},so=oo(()=>h("img",{src:rt},null,-1)),Ge=I({__name:"NotFound",setup(n){const{t}=U();return(e,o)=>(y(),S("div",ao,[Me($(d(t)("404"))+" ",1),so]))}});function ke(n){n.__i18n=n.__i18n||[],n.__i18n.push({locale:"en",resource:{404:t=>{const{normalize:e}=t;return e(["Where are you going, pilot? Page not found, please return home fren."])}}})}typeof ke=="function"&&ke(Ge);const ro=P(Ge,[["__scopeId","data-v-343a8328"]]);function lo(){const n=[{path:"/:pool?",name:"curvemonitor",component:no},{path:"/:pathMatch(.*)*",name:"NotFound",component:ro}];return lt({history:it(),routes:n})}const le=ct(xt),io=ut({legacy:!1,locale:"en",fallbackLocale:"en"});le.use(io);const co=dt();le.use(co);const uo=lo();le.use(uo).use(pt).use(_t).mount("#app");
