import{G as ae,f as d,H as z,al as Ue,am as ze,d as $,Z as oe,c as w,o as y,a as s,F as U,l as J,u as o,X as x,t as b,b as c,Q as ne,e as S,g as O,r as D,L as Ke,W as N,j as V,an as re,ao as le,w as h,h as k,I as We,J as He,U as ie,ap as Xe,aq as Ye,ar as T,as as je,at as Ge,a2 as R,S as Je,k as Ze,_ as ue,O as et,au as tt,a8 as P,av as q,aw as st,ax as at,i as ot}from"./index-CJ72FfhI.js";import{r as nt,d as ce,u as de,a as pe,e as rt,X as lt,C as it}from"./proposal-BFFhGA6K.js";import{_ as F}from"./AsyncValue-CbYy8a0C.js";import{_ as E,a as ut}from"./KPI-gvg_QKrq.js";import{b as ct,n as dt}from"./Number-8faaTcbD.js";import{h as pt}from"./getAction-CUL3ySeK.js";import{w as vt,a as mt}from"./writeContract-C9yGUOuR.js";import{c as ft}from"./String-TwmdtJxb.js";import{L as yt}from"./link-D8JovX7g.js";function gt(e,t){const{chainId:l,...n}=t,u=e.getClient({chainId:l});return pt(u,nt,"readContract")(n)}function _t(e,t={}){return{async queryFn({queryKey:l}){const n=t.abi;if(!n)throw new Error("abi is required");const{functionName:u,scopeKey:a,...i}=l[1],r=(()=>{const p=l[1];if(p.address)return{address:p.address};if(p.code)return{code:p.code};throw new Error("address or code is required")})();if(!u)throw new Error("functionName is required");return gt(e,{abi:n,functionName:u,args:i.args,...r,...i})},queryKey:ht(t)}}function ht(e={}){const{abi:t,...l}=e;return["readContract",ae(l)]}function bt(e,t={}){return{async queryFn({queryKey:l}){const{hash:n,...u}=l[1];if(!n)throw new Error("hash is required");return vt(e,{...u,onReplaced:t.onReplaced,hash:n})},queryKey:wt(t)}}function wt(e={}){const{onReplaced:t,...l}=e;return["waitForTransactionReceipt",ae(l)]}function Ct(e){return{mutationFn(t){return mt(e,t)},mutationKey:["writeContract"]}}function M(e={}){const t=d(()=>ce(e)),l=z(t),n=de({config:l}),u=d(()=>{const{abi:a,address:i,chainId:r=n.value,code:p,functionName:g,query:v={}}=t.value,_=_t(l,{...t.value,chainId:r}),B=!!((i||p)&&a&&g&&(v.enabled??!0));return{...v,..._,enabled:B,structuralSharing:v.structuralSharing??Ue}});return pe(u)}function Z(e={}){const t=d(()=>ce(e)),l=z(e),n=de(),u=d(()=>{const{chainId:a=n.value,hash:i,query:r={}}=t.value,p=bt(l,{...t.value,chainId:a}),g=!!(i&&(r.enabled??!0));return{...r,...p,enabled:g}});return pe(u)}function ee(e={}){const{mutation:t}=e,l=z(e),n=Ct(l),{mutate:u,mutateAsync:a,...i}=ze({...t,...n});return{...i,writeContract:u,writeContractAsync:a}}function A(e){return e.executed?"executed":e.end>Date.now()/1e3?"active":fe(e)&&me(e)&&ve(e)?"passed":"denied"}function ve(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function me(e){return e.votesFor>e.quorum*e.totalSupply}function fe(e){const t=e.votesFor+e.votesAgainst;return e.votesFor>t*.51}const $t={class:"voters"},xt={class:"for"},Vt={class:"address"},St=["href"],Dt={class:"amount"},kt={class:"percentage"},Pt={class:"against"},It={class:"percentage"},At={class:"amount"},Mt={class:"address"},Tt=["href"],Et=$({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=oe(),l=d(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>r.supports).orderBy(r=>r.votingPower,"desc"):null),n=d(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>!r.supports).orderBy(r=>r.votingPower,"desc"):null),u=r=>{const p=r.toLocaleLowerCase();return p==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":p==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":p==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":ne(r,12)},a=r=>r/(e.proposal.votesFor+e.proposal.votesAgainst)*100,i=r=>r===t.value;return(r,p)=>{const g=F;return y(),w("div",$t,[s("div",xt,[p[0]||(p[0]=s("div",{class:"title"},"For",-1)),(y(!0),w(U,null,J(o(l),v=>(y(),w("div",{key:v.voter,class:"vote font-mono"},[s("div",Vt,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:x({you:i(v.voter)})},b(u(v.voter)),11,St)]),s("div",Dt,[c(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",kt,[c(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])])]))),128))]),s("div",Pt,[p[1]||(p[1]=s("div",{class:"title"},"Against",-1)),(y(!0),w(U,null,J(o(n),v=>(y(),w("div",{key:v.voter,class:"vote font-mono"},[s("div",It,[c(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])]),s("div",At,[c(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",Mt,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:x({you:i(v.voter)})},b(u(v.voter)),11,Tt)])]))),128))])])}}}),Bt=S(Et,[["__scopeId","data-v-37f5a3e4"]]),Rt={class:"technicals"},qt={class:"technical"},Nt={class:"description"},Ft={class:"technical"},Lt={class:"technical"},Qt=["href"],Ot={key:0,class:"technical"},Ut=["href"],zt={class:"technical"},Kt=["innerHTML"],Wt=$({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean}},setup(e){const{data:t}=rt(O(()=>e.proposal.id),O(()=>e.proposal.type),O(()=>e.expanded)),l=D(!0),n=D(e.proposal.voteCount>0),u=d(()=>t.value?t.value.votes.uniqWith((i,r)=>i.voter===r.voter).length:null),a=d(()=>t.value?t.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,i=>/[A-F]/g.test(i)&&Ke(i)?`<a target='_blank' href='https://etherscan.io/address/${i}'>${i}</a>`:i):null);return(i,r)=>{var v;const p=re,g=le;return y(),w("div",Rt,[s("div",qt,[r[2]||(r[2]=s("div",{class:"heading"},"Description",-1)),s("div",Nt,b(i.proposal.metadata),1)]),s("div",Ft,[s("div",{class:"heading",onClick:r[0]||(r[0]=_=>n.value=!o(n))},[V(" Voters ("+b(o(u)??"?")+") ",1),c(p,{class:x(["expander",{expandedVoters:o(n)}])},null,8,["class"])]),c(g,{expanded:o(n)},{default:h(()=>[o(t)?(y(),k(Bt,{key:0,class:"voters",proposal:i.proposal,"proposal-details":o(t)},null,8,["proposal","proposal-details"])):N("",!0)]),_:1},8,["expanded"])]),s("div",Lt,[r[3]||(r[3]=s("div",{class:"heading"},"Creation transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${i.proposal.txCreation}`},b(i.proposal.txCreation),9,Qt)]),(v=o(t))!=null&&v.txExecution?(y(),w("div",Ot,[r[4]||(r[4]=s("div",{class:"heading"},"Execution transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${o(t).txExecution}`},b(o(t).txExecution),9,Ut)])):N("",!0),s("div",zt,[s("div",{class:"heading",onClick:r[1]||(r[1]=_=>l.value=!o(l))},[r[5]||(r[5]=V(" Calldata ")),c(p,{class:x(["expander",{expandedCallData:o(l)}])},null,8,["class"])]),c(g,{expanded:o(l)},{default:h(()=>[o(t)?(y(),w("div",{key:0,class:"calldata font-mono",innerHTML:o(a)},null,8,Kt)):N("",!0)]),_:1},8,["expanded"])])])}}}),Ht=S(Wt,[["__scopeId","data-v-6ce248ae"]]),Xt=["min","max","step","disabled"],Yt=$({__name:"Slider",props:We({min:{},max:{},step:{},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=He(e,"modelValue",{set(i){return Number(i)}}),l=d(()=>(t.value-e.min)/(e.max-e.min)*100),n=D(!1),u=ie("slider"),a=i=>{if(!u.value)return;const r=u.value.getBoundingClientRect(),p=r.left+r.width*l.value/100,g=Math.abs(i.clientX-p);n.value=g<30};return(i,r)=>(y(),w("div",{class:"slider-hitbox",onMousemove:a,onMouseleave:r[1]||(r[1]=p=>n.value=!1)},[Xe(s("input",{ref_key:"slider",ref:u,"onUpdate:modelValue":r[0]||(r[0]=p=>t.value=p),type:"range",min:i.min,max:i.max,step:i.step,disabled:i.disabled,style:T({"--progress":`${o(l)}%`,"--thumb-scale":o(n)?"1.2":"1"})},null,12,Xt),[[Ye,t.value]])],32))}}),jt=S(Yt,[["__scopeId","data-v-55011580"]]),Gt=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],I=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],Jt={class:"buttons"},Zt={class:"vecrv"},es={class:"info"},ts={class:"kpis"},ss={class:"description"},as={class:"options button-group"},os={class:"middle"},ns=["contenteditable","textContent"],rs=$({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=oe(),l=D(!1),n=D(50),u=ie("editor"),a=D(!1),i=d(()=>{var f;return a.value?`${n.value}.`:n.value===0&&((f=u.value)==null?void 0:f.textContent)!=="0"?"":n.value.toString()}),r=d(()=>(X.value??0n)>0n&&!Y.value&&v.value&&H.value===0),p=d(()=>r.value?"Submit":Y.value?"Voting...":v.value?H.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),g=d(()=>ct(X.value??0n,18n)),v=d(()=>A(e.proposal)==="active"),_=d(()=>{switch(e.proposal.type){case"ownership":return Ge;case"parameter":return je;default:return null}}),B=d(()=>!!_.value&&A(e.proposal)==="passed"),ye=()=>{const f=window.getSelection();return f&&f.rangeCount>0?f.getRangeAt(0).startOffset:0},K=f=>{if(u.value){const m=document.createRange();m.setStart(u.value.firstChild??u.value,f),m.collapse(!0);const C=window.getSelection();C&&(C.removeAllRanges(),C.addRange(m))}},ge=()=>{n.value=0,u.value&&(u.value.textContent="0")},_e=()=>{n.value=100,u.value&&(u.value.textContent="100")},he=f=>{f.target===f.currentTarget&&u.value&&u.value.focus()},be=()=>{if(u.value){const f=u.value.textContent??"",m=ye();if(/^\d*(\.\d*)?$/.test(f))if(a.value=f.endsWith("."),f){const C=parseFloat(f);C>=0&&C<=100?n.value=C:(u.value.textContent=i.value,K(m-1))}else n.value=0;else u.value.textContent=i.value,K(m-1)}},{data:W}=M({abi:I,address:_.value,functionName:"token",query:{enabled:d(()=>l.value&&!!_.value)}}),{data:H}=M({abi:I,address:_.value,functionName:"getVoterState",args:d(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:d(()=>!!t.value&&l.value&&!!_.value),initialData:0,initialDataUpdatedAt:0}}),{data:X}=M({abi:Gt,address:W,functionName:"balanceOfAt",args:d(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:d(()=>!!W.value&&!!t.value&&l.value),initialData:0n,initialDataUpdatedAt:0}}),{data:we,refetch:Ce}=M({abi:I,address:_.value,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:d(()=>B.value&&!!_.value),initialData:!1,initialDataUpdatedAt:0}}),{data:L}=M({abi:I,address:_.value,functionName:"PCT_BASE",query:{enabled:d(()=>l.value&&!!_.value)}}),{data:$e,error:xe,isPending:Ve,writeContract:Se}=ee(),{isLoading:De,isSuccess:ke}=Z({hash:$e}),Y=d(()=>Ve.value||De.value);function Pe(){if(!L.value){P({text:q("Missing PCT_BASE"),type:"error"});return}if(!_.value){P({text:q("Missing voting contract address, not ownership or parameter vote?"),type:"error"});return}const f=BigInt(Math.log10(Number(L.value))),m=dt(n.value/100,f),C=L.value-m;Se({abi:I,address:_.value,functionName:"votePct",args:[BigInt(e.proposal.id),m,C,!1]})}R(xe,f=>{P({text:q(f),type:"error"})}),R(ke,()=>{P({text:"Voted",type:"success"})});const{data:Ie,error:Ae,isPending:Me,writeContract:Te}=ee(),{isLoading:Ee,isSuccess:Be}=Z({hash:Ie}),j=d(()=>Me.value||Ee.value);function Re(){Te({abi:I,address:_.value,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),Ce()}return R(Ae,f=>{P({text:q(f),type:"error"})}),R(Be,()=>{P({text:"Executed proposal",type:"success"})}),(f,m)=>{const C=Je,qe=F,G=E,Ne=lt,Fe=it,Le=jt,Qe=ue,Oe=Ze;return y(),w(U,null,[s("div",Jt,[c(C,{class:"primary",disabled:!o(v),onClick:m[0]||(m[0]=Q=>l.value=!0)},{default:h(()=>[V(b(o(v)?"Vote":"Voting closed"),1)]),_:1},8,["disabled"]),o(B)?(y(),k(C,{key:0,class:"primary",disabled:!o(we)||o(j),onClick:Re},{default:h(()=>[V(b(o(j)?"Executing...":"Execute"),1)]),_:1},8,["disabled"])):N("",!0)]),c(Oe,{show:o(l),onClose:m[2]||(m[2]=Q=>l.value=!1)},{default:h(()=>[c(Qe,{title:"Vote with veCRV",class:"vote-content"},{default:h(()=>[s("div",Zt,[s("div",es,[s("div",ts,[c(G,{"has-value":"",label:"Voting power"},{default:h(()=>[c(qe,{"show-zero":"",type:"dollar",value:o(g),precision:2,"show-symbol":!1},null,8,["value"]),m[3]||(m[3]=V(" veCRV "))]),_:1}),c(G,{"has-value":"",label:"Block",value:f.proposal.block},null,8,["value"])]),s("div",ss,[m[4]||(m[4]=s("span",{class:"title"},"Description: ",-1)),s("span",null,b(f.proposal.metadata),1)])]),s("div",as,[c(C,{class:x(["no",{winning:o(n)<50}]),disabled:!o(r),onClick:ge},{default:h(()=>m[5]||(m[5]=[s("span",{class:"label"},"No",-1)])),_:1},8,["class","disabled"]),s("div",os,[c(Ne,{class:x({winning:o(n)<50})},null,8,["class"]),s("div",{class:x(["value",{disabled:!o(r)}]),onClick:he},[s("span",{ref_key:"editor",ref:u,contenteditable:o(r),onInput:be,textContent:b(o(i))},null,40,ns),m[6]||(m[6]=V(" % "))],2),c(Fe,{class:x({winning:o(n)>50})},null,8,["class"])]),c(C,{class:x(["yes",{winning:o(n)>50}]),disabled:!o(r),onClick:_e},{default:h(()=>m[7]||(m[7]=[s("span",{class:"label"},"Yes",-1)])),_:1},8,["class","disabled"])]),c(Le,{modelValue:o(n),"onUpdate:modelValue":m[1]||(m[1]=Q=>et(n)?n.value=Q:null),class:"slider",disabled:!o(r),min:0,max:100},null,8,["modelValue","disabled"]),c(C,{class:"submit primary",disabled:!o(r),"chain-id":o(tt).id,onClick:Pe},{default:h(()=>[V(b(o(p)),1)]),_:1},8,["disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),ls=S(rs,[["__scopeId","data-v-9039c1b3"]]),is={class:"quorum"},us={class:"amount"},cs={class:"bar"},ds={class:"percentages"},ps={class:"quorum"},vs=$({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=d(()=>e.proposal.votesFor),l=d(()=>e.proposal.quorum*e.proposal.totalSupply),n=d(()=>t.value/l.value*100);return(u,a)=>{const i=F;return y(),w("div",is,[a[3]||(a[3]=s("div",{class:"heading"},"Quorum",-1)),s("div",us,[c(i,{type:"dollar",value:o(t),precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=V(" / ")),c(i,{type:"dollar",value:o(l),precision:0,"show-symbol":!1},null,8,["value"]),a[1]||(a[1]=V(" veCRV "))]),s("div",cs,[s("div",{class:"support",style:T({width:`${o(n)}%`})},null,4),s("div",{class:"quorum",style:T({width:`${100-o(n)}%`})},null,4)]),s("div",ds,[a[2]||(a[2]=s("div",{class:"zero"},"0%",-1)),s("div",ps,[c(i,{type:"percentage",value:u.proposal.quorum*100,precision:0},null,8,["value"])])])])}}}),ms=S(vs,[["__scopeId","data-v-ae12b0a2"]]),fs={class:"results"},ys={class:"choice"},gs={class:"amount"},_s={class:"left"},hs={class:"right"},bs={class:"choice"},ws={class:"amount"},Cs={class:"left"},$s={class:"right"},te=4,xs=$({__name:"VotingResults",props:{proposal:{}},setup(e){const t=d(()=>e.proposal.votesFor+e.proposal.votesAgainst),l=d(()=>e.proposal.votesFor/t.value*100),n=d(()=>e.proposal.votesAgainst/t.value*100);return(u,a)=>{const i=F;return y(),w("div",fs,[a[8]||(a[8]=s("div",{class:"heading"},"Results",-1)),s("div",ys,[a[3]||(a[3]=s("div",{class:"label"},"For",-1)),s("div",gs,[s("div",_s,[c(i,{"show-zero":"",type:"dollar",value:u.proposal.votesFor,precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=s("span",null," veCRV",-1))]),s("div",hs,[a[1]||(a[1]=s("span",null,"(",-1)),c(i,{"show-zero":"",type:"percentage",value:o(l),precision:2},null,8,["value"]),a[2]||(a[2]=s("span",null,")",-1))])]),s("div",{class:"bar",style:T({width:`${Math.max(te,o(l))}%`})},null,4)]),s("div",bs,[a[7]||(a[7]=s("div",{class:"label"},"Against",-1)),s("div",ws,[s("div",Cs,[c(i,{"show-zero":"",type:"dollar",value:u.proposal.votesAgainst,precision:0,"show-symbol":!1},null,8,["value"]),a[4]||(a[4]=s("span",null," veCRV",-1))]),s("div",$s,[a[5]||(a[5]=s("span",null,"(",-1)),c(i,{"show-zero":"",type:"percentage",value:o(n),precision:2},null,8,["value"]),a[6]||(a[6]=s("span",null,")",-1))])]),s("div",{class:"bar",style:T({width:`${Math.max(te,o(n))}%`})},null,4)])])}}}),Vs=S(xs,[["__scopeId","data-v-e033efa3"]]),Ss={class:"voting"},Ds=$({__name:"Voting",props:{proposal:{}},setup(e){return(t,l)=>(y(),w("div",Ss,[c(ms,{proposal:t.proposal},null,8,["proposal"]),c(Vs,{proposal:t.proposal},null,8,["proposal"]),c(ls,{proposal:t.proposal},null,8,["proposal"])]))}}),ks=S(Ds,[["__scopeId","data-v-88ffc218"]]),Ps={class:"proposal-details"},Is={class:"proposal-details-container"},As=$({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean}},setup(e){return(t,l)=>(y(),w("div",Ps,[s("div",Is,[c(Ht,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),c(ks,{proposal:t.proposal},null,8,["proposal"])])]))}}),Ms=S(As,[["__scopeId","data-v-5c406238"]]);function Ts(e){function t(_){return _<10?"0"+_.toString():_.toString()}const l=e.getTime()-new Date().getTime();if(l<=0)return"00:00:00:00";const n=1e3,u=n*60,a=u*60,i=a*24,r=Math.floor(l/i),p=Math.floor(l%i/a),g=Math.floor(l%a/u),v=Math.floor(l%u/n);return t(r)+":"+t(p)+":"+t(g)+":"+t(v)}const se=$({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const l=D(""),n=d(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),u=d(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const r=new Date(e.proposal.end*1e3);return r>new Date?l.value:r.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),a=d(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});st(()=>{i()});const i=()=>{const r=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{l.value=Ts(r)})};return(r,p)=>{const g=E;return y(),k(g,{"has-value":"",class:"date","tooltip-type":"underline",label:o(n),value:o(u),tooltip:o(a)},null,8,["label","value","tooltip"])}}}),Es=["href"],Bs=$({__name:"Proposer",props:{proposal:{}},setup(e){return(t,l)=>{const n=E;return y(),k(n,{"has-value":"",class:"proposer",label:"Proposer"},{default:h(()=>[s("a",{target:"_blank",href:`https://etherscan.io/address/${t.proposal.proposer}`},b(("addressShort"in t?t.addressShort:o(ne))(t.proposal.proposer)),9,Es)]),_:1})}}}),Rs=$({__name:"Status",props:{proposal:{}},setup(e){const t=d(()=>{if(A(e.proposal)==="denied")if(me(e.proposal))if(fe(e.proposal)){if(!ve(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes, or 'for' votes did not exceed 51%";else return"Quorum was not reached (yes votes need to pass this number)";return""}),l=d(()=>{switch(A(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";case"all":default:return"Unk. Status"}});return(n,u)=>{const a=ut,i=E;return y(),k(i,{"has-value":"",class:"status","tooltip-type":"underline",label:"Status",tooltip:o(t)},{default:h(()=>[o(t)?(y(),k(a,{key:0},{trigger:h(()=>[s("span",{class:x(["status-value",o(A)(n.proposal)])},b(o(l)),3)]),default:h(()=>[V(" "+b(o(t)),1)]),_:1})):(y(),w("span",{key:1,class:x(["status-value",o(A)(n.proposal)])},b(o(l)),3))]),_:1},8,["tooltip"])}}}),qs=S(Rs,[["__scopeId","data-v-2cb6ff34"]]),Ns=$({__name:"Type",props:{proposal:{}},setup(e){return(t,l)=>{const n=E;return y(),k(n,{"has-value":"",class:"type",label:"Type",value:("capitalize"in t?t.capitalize:o(ft))(t.proposal.type)},null,8,["value"])}}}),Fs={class:"row"},Ls=$({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const l=t,n=d(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),u=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/dao/proposal/${e.proposal.type}/${e.proposal.id}`),P({text:`Copied url for proposal ${e.proposal.id}`,type:"success"})};return(a,i)=>{const r=yt,p=at("router-link"),g=re;return y(),w("div",{class:"proposal-summary",onClick:i[0]||(i[0]=v=>l("toggleExpand"))},[s("div",{class:x(["title",{"no-title":!a.proposal.metadata}])},[s("span",{class:"id",onClick:ot(u,["stop"])},[c(r),V(" "+b(a.proposal.id),1)]),c(p,{class:"metadata",to:o(n)},{default:h(()=>[V(b(a.proposal.metadata||"< No Title >"),1)]),_:1},8,["to"])],2),s("div",Fs,[c(qs,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(Ns,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(Bs,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(se,{class:"item",type:"start",proposal:a.proposal},null,8,["proposal"]),c(se,{class:"item",type:"end",proposal:a.proposal},null,8,["proposal"]),s("div",{class:x(["item expander",{expanded:a.expanded}])},[c(g)],2)])])}}}),Qs=S(Ls,[["__scopeId","data-v-9fc1c1a7"]]),Os=$({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=D(e.initExpanded);return(l,n)=>{const u=le,a=ue;return y(),k(a,{compact:"",class:"proposal"},{default:h(()=>[c(Qs,{proposal:l.proposal,expanded:o(t),onToggleExpand:n[0]||(n[0]=i=>t.value=!o(t))},null,8,["proposal","expanded"]),c(u,{class:"proposal-details-collapsible",expanded:o(t)},{default:h(()=>[c(Ms,{proposal:l.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),Js=S(Os,[["__scopeId","data-v-3d5caf73"]]);export{Js as P};
