import{G as ae,c as d,H as U,ai as ze,aj as Ue,d as $,e as D,o as y,u as o,w as h,a as w,j as V,i as b,f as s,T as x,_ as S,Q as oe,r as k,ak as Ke,al as We,b as c,am as ne,an as E,I as He,J as Xe,X as re,ao as Ye,ap as je,Z as le,aq as Ge,ar as Je,a1 as R,F as z,V as N,S as Ze,k as et,g as ie,O as tt,as as st,a7 as P,at as q,l as J,t as O,L as at,au as ue}from"./index-aGD7oz-u.js";import{_ as M,a as ot}from"./KPI-DGW8n61r.js";import{c as nt}from"./String-TwmdtJxb.js";import{L as rt}from"./link-BdJV1u6S.js";import{_ as F}from"./AsyncValue-D2chhg9L.js";import{b as lt,n as it}from"./Number-CJjP1isT.js";import{r as ut,d as ce,u as de,a as pe,X as ct,C as dt,e as pt}from"./proposal-D14mKw_S.js";import{h as vt}from"./getAction-B5FLWXMm.js";import{w as mt,a as ft}from"./writeContract-DOh7ffmT.js";function yt(e,t){const{chainId:l,...n}=t,u=e.getClient({chainId:l});return vt(u,ut,"readContract")(n)}function gt(e,t={}){return{async queryFn({queryKey:l}){const n=t.abi;if(!n)throw new Error("abi is required");const{functionName:u,scopeKey:a,...i}=l[1],r=(()=>{const p=l[1];if(p.address)return{address:p.address};if(p.code)return{code:p.code};throw new Error("address or code is required")})();if(!u)throw new Error("functionName is required");return yt(e,{abi:n,functionName:u,args:i.args,...r,...i})},queryKey:_t(t)}}function _t(e={}){const{abi:t,...l}=e;return["readContract",ae(l)]}function ht(e,t={}){return{async queryFn({queryKey:l}){const{hash:n,...u}=l[1];if(!n)throw new Error("hash is required");return mt(e,{...u,onReplaced:t.onReplaced,hash:n})},queryKey:bt(t)}}function bt(e={}){const{onReplaced:t,...l}=e;return["waitForTransactionReceipt",ae(l)]}function wt(e){return{mutationFn(t){return ft(e,t)},mutationKey:["writeContract"]}}function A(e={}){const t=d(()=>ce(e)),l=U(t),n=de({config:l}),u=d(()=>{const{abi:a,address:i,chainId:r=n.value,code:p,functionName:g,query:v={}}=t.value,_=gt(l,{...t.value,chainId:r}),B=!!((i||p)&&a&&g&&(v.enabled??!0));return{...v,..._,enabled:B,structuralSharing:v.structuralSharing??ze}});return pe(u)}function Z(e={}){const t=d(()=>ce(e)),l=U(e),n=de(),u=d(()=>{const{chainId:a=n.value,hash:i,query:r={}}=t.value,p=ht(l,{...t.value,chainId:a}),g=!!(i&&(r.enabled??!0));return{...r,...p,enabled:g}});return pe(u)}function ee(e={}){const{mutation:t}=e,l=U(e),n=wt(l),{mutate:u,mutateAsync:a,...i}=Ue({...t,...n});return{...i,writeContract:u,writeContractAsync:a}}function T(e){return e.executed?"executed":e.end>new Date().getTime()/1e3?"active":fe(e)&&me(e)&&ve(e)?"passed":"denied"}function ve(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function me(e){return e.votesFor>e.quorum*e.totalSupply}function fe(e){const t=e.votesFor+e.votesAgainst;return e.votesFor>t*.51}const Ct=$({__name:"Status",props:{proposal:{}},setup(e){const t=d(()=>{if(T(e.proposal)==="denied")if(me(e.proposal))if(fe(e.proposal)){if(!ve(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes, or 'for' votes did not exceed 51%";else return"Quorum was not reached (yes votes need to pass this number)";return""}),l=d(()=>{switch(T(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";case"all":default:return"Unk. Status"}});return(n,u)=>{const a=ot,i=M;return y(),D(i,{"has-value":"",class:"status","tooltip-type":"underline",label:"Status",tooltip:o(t)},{default:h(()=>[o(t)?(y(),D(a,{key:0},{trigger:h(()=>[s("span",{class:x(["status-value",o(T)(n.proposal)])},b(o(l)),3)]),default:h(()=>[V(" "+b(o(t)),1)]),_:1})):(y(),w("span",{key:1,class:x(["status-value",o(T)(n.proposal)])},b(o(l)),3))]),_:1},8,["tooltip"])}}}),$t=S(Ct,[["__scopeId","data-v-8a47053c"]]),xt=$({__name:"Type",props:{proposal:{}},setup(e){return(t,l)=>{const n=M;return y(),D(n,{"has-value":"",class:"type",label:"Type",value:("capitalize"in t?t.capitalize:o(nt))(t.proposal.type)},null,8,["value"])}}}),Vt=["href"],St=$({__name:"Proposer",props:{proposal:{}},setup(e){return(t,l)=>{const n=M;return y(),D(n,{"has-value":"",class:"proposer",label:"Proposer"},{default:h(()=>[s("a",{target:"_blank",href:`https://etherscan.io/address/${t.proposal.proposer}`},b(("addressShort"in t?t.addressShort:o(oe))(t.proposal.proposer)),9,Vt)]),_:1})}}});function kt(e){function t(_){return _<10?"0"+_.toString():_.toString()}const l=e.getTime()-new Date().getTime();if(l<=0)return"00:00:00:00";const n=1e3,u=n*60,a=u*60,i=a*24,r=Math.floor(l/i),p=Math.floor(l%i/a),g=Math.floor(l%a/u),v=Math.floor(l%u/n);return t(r)+":"+t(p)+":"+t(g)+":"+t(v)}const te=$({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const l=k(""),n=d(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),u=d(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const r=new Date(e.proposal.end*1e3);return r>new Date?l.value:r.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),a=d(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});Ke(()=>{i()});const i=()=>{const r=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{l.value=kt(r)})};return(r,p)=>{const g=M;return y(),D(g,{"has-value":"",class:"date","tooltip-type":"underline",label:o(n),value:o(u),tooltip:o(a)},null,8,["label","value","tooltip"])}}}),Dt={class:"metadata"},Pt={class:"row"},It=$({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const l=t,n=d(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),u=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/#/dao/proposal/${e.proposal.type}/${e.proposal.id}`)};return(a,i)=>{const r=rt,p=We("router-link"),g=ne;return y(),w("div",{class:"proposal-summary",onClick:i[0]||(i[0]=v=>l("toggleExpand"))},[s("div",{class:x(["title",{"no-title":!a.proposal.metadata}])},[c(p,{class:"id",to:o(n),onClick:u},{default:h(()=>[c(r),V(" "+b(a.proposal.id),1)]),_:1},8,["to"]),s("div",Dt,b(a.proposal.metadata||"< No Title >"),1)],2),s("div",Pt,[c($t,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(xt,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(St,{class:"item",proposal:a.proposal},null,8,["proposal"]),c(te,{class:"item",type:"start",proposal:a.proposal},null,8,["proposal"]),c(te,{class:"item",type:"end",proposal:a.proposal},null,8,["proposal"]),s("div",{class:x(["item expander",{expanded:a.expanded}])},[c(g)],2)])])}}}),Tt=S(It,[["__scopeId","data-v-deea3d44"]]),At={class:"results"},Et={class:"choice"},Mt={class:"amount"},Bt={class:"left"},Rt={class:"right"},qt={class:"choice"},Nt={class:"amount"},Ft={class:"left"},Lt={class:"right"},se=4,Qt=$({__name:"VotingResults",props:{proposal:{}},setup(e){const t=d(()=>e.proposal.votesFor+e.proposal.votesAgainst),l=d(()=>e.proposal.votesFor/t.value*100),n=d(()=>e.proposal.votesAgainst/t.value*100);return(u,a)=>{const i=F;return y(),w("div",At,[a[8]||(a[8]=s("div",{class:"heading"},"Results",-1)),s("div",Et,[a[3]||(a[3]=s("div",{class:"label"},"For",-1)),s("div",Mt,[s("div",Bt,[c(i,{"show-zero":"",type:"dollar",value:u.proposal.votesFor,precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=s("span",null," veCRV",-1))]),s("div",Rt,[a[1]||(a[1]=s("span",null,"(",-1)),c(i,{"show-zero":"",type:"percentage",value:o(l),precision:2},null,8,["value"]),a[2]||(a[2]=s("span",null,")",-1))])]),s("div",{class:"bar",style:E({width:`${Math.max(se,o(l))}%`})},null,4)]),s("div",qt,[a[7]||(a[7]=s("div",{class:"label"},"Against",-1)),s("div",Nt,[s("div",Ft,[c(i,{"show-zero":"",type:"dollar",value:u.proposal.votesAgainst,precision:0,"show-symbol":!1},null,8,["value"]),a[4]||(a[4]=s("span",null," veCRV",-1))]),s("div",Lt,[a[5]||(a[5]=s("span",null,"(",-1)),c(i,{"show-zero":"",type:"percentage",value:o(n),precision:2},null,8,["value"]),a[6]||(a[6]=s("span",null,")",-1))])]),s("div",{class:"bar",style:E({width:`${Math.max(se,o(n))}%`})},null,4)])])}}}),Ot=S(Qt,[["__scopeId","data-v-6b2e489a"]]),zt={class:"quorum"},Ut={class:"amount"},Kt={class:"bar"},Wt={class:"percentages"},Ht={class:"quorum"},Xt=$({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=d(()=>e.proposal.votesFor),l=d(()=>e.proposal.quorum*e.proposal.totalSupply),n=d(()=>t.value/l.value*100);return(u,a)=>{const i=F;return y(),w("div",zt,[a[3]||(a[3]=s("div",{class:"heading"},"Quorum",-1)),s("div",Ut,[c(i,{type:"dollar",value:o(t),precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=V(" / ")),c(i,{type:"dollar",value:o(l),precision:0,"show-symbol":!1},null,8,["value"]),a[1]||(a[1]=V(" veCRV "))]),s("div",Kt,[s("div",{class:"support",style:E({width:`${o(n)}%`})},null,4),s("div",{class:"quorum",style:E({width:`${100-o(n)}%`})},null,4)]),s("div",Wt,[a[2]||(a[2]=s("div",{class:"zero"},"0%",-1)),s("div",Ht,[c(i,{type:"percentage",value:u.proposal.quorum*100,precision:0},null,8,["value"])])])])}}}),Yt=S(Xt,[["__scopeId","data-v-1c1b6a26"]]),jt=["min","max","step","disabled"],Gt=$({__name:"Slider",props:He({min:{},max:{},step:{},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Xe(e,"modelValue",{set(i){return Number(i)}}),l=d(()=>(t.value-e.min)/(e.max-e.min)*100),n=k(!1),u=re("slider"),a=i=>{if(!u.value)return;const r=u.value.getBoundingClientRect(),p=r.left+r.width*l.value/100,g=Math.abs(i.clientX-p);n.value=g<30};return(i,r)=>(y(),w("div",{class:"slider-hitbox",onMousemove:a,onMouseleave:r[1]||(r[1]=p=>n.value=!1)},[Ye(s("input",{ref_key:"slider",ref:u,"onUpdate:modelValue":r[0]||(r[0]=p=>t.value=p),type:"range",min:i.min,max:i.max,step:i.step,disabled:i.disabled,style:E({"--progress":`${o(l)}%`,"--thumb-scale":o(n)?"1.2":"1"})},null,12,jt),[[je,t.value]])],32))}}),Jt=S(Gt,[["__scopeId","data-v-55011580"]]),Zt=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],I=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],es={class:"buttons"},ts={class:"vecrv"},ss={class:"info"},as={class:"kpis"},os={class:"description"},ns={class:"options button-group"},rs={class:"middle"},ls=["contenteditable","textContent"],is=$({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=le(),l=k(!1),n=k(50),u=re("editor"),a=k(!1),i=d(()=>{var f;return a.value?`${n.value}.`:n.value===0&&((f=u.value)==null?void 0:f.textContent)!=="0"?"":n.value.toString()}),r=d(()=>(X.value??0n)>0n&&!Y.value&&v.value&&H.value===0),p=d(()=>r.value?"Submit":Y.value?"Voting...":v.value?H.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),g=d(()=>lt(X.value??0n,18n)),v=d(()=>T(e.proposal)==="active"),_=d(()=>{switch(e.proposal.type){case"ownership":return Je;case"parameter":return Ge;default:return null}}),B=d(()=>!!_.value&&T(e.proposal)==="passed"),ye=()=>{const f=window.getSelection();return f&&f.rangeCount>0?f.getRangeAt(0).startOffset:0},K=f=>{if(u.value){const m=document.createRange();m.setStart(u.value.firstChild??u.value,f),m.collapse(!0);const C=window.getSelection();C&&(C.removeAllRanges(),C.addRange(m))}},ge=()=>{n.value=0,u.value&&(u.value.textContent="0")},_e=()=>{n.value=100,u.value&&(u.value.textContent="100")},he=f=>{f.target===f.currentTarget&&u.value&&u.value.focus()},be=()=>{if(u.value){const f=u.value.textContent??"",m=ye();if(/^\d*(\.\d*)?$/.test(f))if(a.value=f.endsWith("."),f){const C=parseFloat(f);C>=0&&C<=100?n.value=C:(u.value.textContent=i.value,K(m-1))}else n.value=0;else u.value.textContent=i.value,K(m-1)}},{data:W}=A({abi:I,address:_.value,functionName:"token",query:{enabled:d(()=>l.value&&!!_.value)}}),{data:H}=A({abi:I,address:_.value,functionName:"getVoterState",args:d(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:d(()=>!!t.value&&l.value&&!!_.value),initialData:0,initialDataUpdatedAt:0}}),{data:X}=A({abi:Zt,address:W,functionName:"balanceOfAt",args:d(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:d(()=>!!W.value&&!!t.value&&l.value),initialData:0n,initialDataUpdatedAt:0}}),{data:we,refetch:Ce}=A({abi:I,address:_.value,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:d(()=>B.value&&!!_.value),initialData:!1,initialDataUpdatedAt:0}}),{data:L}=A({abi:I,address:_.value,functionName:"PCT_BASE",query:{enabled:d(()=>l.value&&!!_.value)}}),{data:$e,error:xe,isPending:Ve,writeContract:Se}=ee(),{isLoading:ke,isSuccess:De}=Z({hash:$e}),Y=d(()=>Ve.value||ke.value);function Pe(){if(!L.value){P({text:q("Missing PCT_BASE"),type:"error"});return}if(!_.value){P({text:q("Missing voting contract address, not ownership or parameter vote?"),type:"error"});return}const f=BigInt(Math.log10(Number(L.value))),m=it(n.value/100,f),C=L.value-m;Se({abi:I,address:_.value,functionName:"votePct",args:[BigInt(e.proposal.id),m,C,!1]})}R(xe,f=>{P({text:q(f),type:"error"})}),R(De,()=>{P({text:"Voted",type:"success"})});const{data:Ie,error:Te,isPending:Ae,writeContract:Ee}=ee(),{isLoading:Me,isSuccess:Be}=Z({hash:Ie}),j=d(()=>Ae.value||Me.value);function Re(){Ee({abi:I,address:_.value,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),Ce()}return R(Te,f=>{P({text:q(f),type:"error"})}),R(Be,()=>{P({text:"Executed proposal",type:"success"})}),(f,m)=>{const C=Ze,qe=F,G=M,Ne=ct,Fe=dt,Le=Jt,Qe=ie,Oe=et;return y(),w(z,null,[s("div",es,[c(C,{class:"primary",disabled:!o(v),onClick:m[0]||(m[0]=Q=>l.value=!0)},{default:h(()=>[V(b(o(v)?"Vote":"Voting closed"),1)]),_:1},8,["disabled"]),o(B)?(y(),D(C,{key:0,class:"primary",disabled:!o(we)||o(j),onClick:Re},{default:h(()=>[V(b(o(j)?"Executing...":"Execute"),1)]),_:1},8,["disabled"])):N("",!0)]),c(Oe,{show:o(l),onClose:m[2]||(m[2]=Q=>l.value=!1)},{default:h(()=>[c(Qe,{title:"Vote with veCRV",class:"vote-content"},{default:h(()=>[s("div",ts,[s("div",ss,[s("div",as,[c(G,{"has-value":"",label:"Voting power"},{default:h(()=>[c(qe,{"show-zero":"",type:"dollar",value:o(g),precision:2,"show-symbol":!1},null,8,["value"]),m[3]||(m[3]=V(" veCRV "))]),_:1}),c(G,{"has-value":"",label:"Block",value:f.proposal.block},null,8,["value"])]),s("div",os,[m[4]||(m[4]=s("span",{class:"title"},"Description: ",-1)),s("span",null,b(f.proposal.metadata),1)])]),s("div",ns,[c(C,{class:x(["no",{winning:o(n)<50}]),disabled:!o(r),onClick:ge},{default:h(()=>m[5]||(m[5]=[s("span",{class:"label"},"No",-1)])),_:1},8,["class","disabled"]),s("div",rs,[c(Ne,{class:x({winning:o(n)<50})},null,8,["class"]),s("div",{class:x(["value",{disabled:!o(r)}]),onClick:he},[s("span",{ref_key:"editor",ref:u,contenteditable:o(r),onInput:be,textContent:b(o(i))},null,40,ls),m[6]||(m[6]=V(" % "))],2),c(Fe,{class:x({winning:o(n)>50})},null,8,["class"])]),c(C,{class:x(["yes",{winning:o(n)>50}]),disabled:!o(r),onClick:_e},{default:h(()=>m[7]||(m[7]=[s("span",{class:"label"},"Yes",-1)])),_:1},8,["class","disabled"])]),c(Le,{modelValue:o(n),"onUpdate:modelValue":m[1]||(m[1]=Q=>tt(n)?n.value=Q:null),class:"slider",disabled:!o(r),min:0,max:100},null,8,["modelValue","disabled"]),c(C,{class:"submit primary",disabled:!o(r),"chain-id":o(st).id,onClick:Pe},{default:h(()=>[V(b(o(p)),1)]),_:1},8,["disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),us=S(is,[["__scopeId","data-v-49394120"]]),cs={class:"voting"},ds=$({__name:"Voting",props:{proposal:{}},setup(e){return(t,l)=>(y(),w("div",cs,[c(Yt,{proposal:t.proposal},null,8,["proposal"]),c(Ot,{proposal:t.proposal},null,8,["proposal"]),c(us,{proposal:t.proposal},null,8,["proposal"])]))}}),ps=S(ds,[["__scopeId","data-v-23deebd1"]]),vs={class:"voters"},ms={class:"for"},fs={class:"address"},ys=["href"],gs={class:"amount"},_s={class:"percentage"},hs={class:"against"},bs={class:"percentage"},ws={class:"amount"},Cs={class:"address"},$s=["href"],xs=$({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=le(),l=d(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>r.supports).orderBy(r=>r.votingPower,"desc"):null),n=d(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>!r.supports).orderBy(r=>r.votingPower,"desc"):null),u=r=>{const p=r.toLocaleLowerCase();return p==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":p==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":p==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":oe(r,12)},a=r=>r/(e.proposal.votesFor+e.proposal.votesAgainst)*100,i=r=>r===t.value;return(r,p)=>{const g=F;return y(),w("div",vs,[s("div",ms,[p[0]||(p[0]=s("div",{class:"title"},"For",-1)),(y(!0),w(z,null,J(o(l),v=>(y(),w("div",{key:v.voter,class:"vote font-mono"},[s("div",fs,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:x({you:i(v.voter)})},b(u(v.voter)),11,ys)]),s("div",gs,[c(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",_s,[c(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])])]))),128))]),s("div",hs,[p[1]||(p[1]=s("div",{class:"title"},"Against",-1)),(y(!0),w(z,null,J(o(n),v=>(y(),w("div",{key:v.voter,class:"vote font-mono"},[s("div",bs,[c(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])]),s("div",ws,[c(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",Cs,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:x({you:i(v.voter)})},b(u(v.voter)),11,$s)])]))),128))])])}}}),Vs=S(xs,[["__scopeId","data-v-02a526df"]]),Ss={class:"technicals"},ks={class:"technical"},Ds={class:"description"},Ps={class:"technical"},Is={class:"technical"},Ts=["href"],As={key:0,class:"technical"},Es=["href"],Ms={class:"technical"},Bs=["innerHTML"],Rs=$({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){const{data:t}=pt(O(()=>e.proposal.id),O(()=>e.proposal.type),O(()=>e.expanded)),l=k(!0),n=k(e.proposal.voteCount>0),u=d(()=>t.value?t.value.votes.uniqWith((i,r)=>i.voter===r.voter).length:null),a=d(()=>t.value?t.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,i=>/[A-F]/g.test(i)&&at(i)?`<a target='_blank' href='https://etherscan.io/address/${i}'>${i}</a>`:i):null);return(i,r)=>{var v;const p=ne,g=ue;return y(),w("div",Ss,[s("div",ks,[r[2]||(r[2]=s("div",{class:"heading"},"Description",-1)),s("div",Ds,b(i.proposal.metadata),1)]),s("div",Ps,[s("div",{class:"heading",onClick:r[0]||(r[0]=_=>n.value=!o(n))},[V(" Voters ("+b(o(u)??"?")+") ",1),c(p,{class:x(["expander",{expandedVoters:o(n)}])},null,8,["class"])]),c(g,{expanded:o(n)},{default:h(()=>[o(t)?(y(),D(Vs,{key:0,class:"voters",proposal:i.proposal,"proposal-details":o(t)},null,8,["proposal","proposal-details"])):N("",!0)]),_:1},8,["expanded"])]),s("div",Is,[r[3]||(r[3]=s("div",{class:"heading"},"Creation transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${i.proposal.txCreation}`},b(i.proposal.txCreation),9,Ts)]),(v=o(t))!=null&&v.txExecution?(y(),w("div",As,[r[4]||(r[4]=s("div",{class:"heading"},"Execution transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${o(t).txExecution}`},b(o(t).txExecution),9,Es)])):N("",!0),s("div",Ms,[s("div",{class:"heading",onClick:r[1]||(r[1]=_=>l.value=!o(l))},[r[5]||(r[5]=V(" Calldata ")),c(p,{class:x(["expander",{expandedCallData:o(l)}])},null,8,["class"])]),c(g,{expanded:o(l)},{default:h(()=>[o(t)?(y(),w("div",{key:0,class:"calldata font-mono",innerHTML:o(a)},null,8,Bs)):N("",!0)]),_:1},8,["expanded"])])])}}}),qs=S(Rs,[["__scopeId","data-v-f2800609"]]),Ns={class:"proposal-details"},Fs={class:"proposal-details-container"},Ls=$({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){return(t,l)=>(y(),w("div",Ns,[s("div",Fs,[c(qs,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),c(ps,{proposal:t.proposal},null,8,["proposal"])])]))}}),Qs=S(Ls,[["__scopeId","data-v-68dfa6bd"]]),Os=$({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=k(e.initExpanded);return(l,n)=>{const u=ue,a=ie;return y(),D(a,{compact:"",class:"proposal"},{default:h(()=>[c(Tt,{proposal:l.proposal,expanded:o(t),onToggleExpand:n[0]||(n[0]=i=>t.value=!o(t))},null,8,["proposal","expanded"]),c(u,{class:"proposal-details-collapsible",expanded:o(t)},{default:h(()=>[c(Qs,{proposal:l.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),Js=S(Os,[["__scopeId","data-v-908a1280"]]);export{Js as P};
