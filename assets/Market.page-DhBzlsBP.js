import{_ as ie,a as ce}from"./TabItem.vue_vue_type_script_setup_true_lang-CnaorDaT.js";import{d as L,T as I,U as E,f as b,V as Q,h as $,o as y,_ as O,w as d,a as u,b as a,j as W,u as e,g as w,r as T,c as D,e as A,t as B,W as U,S as G,i as le,Q as de,X as ue,a5 as me,a6 as pe,N as he,R as _e,a2 as j}from"./index-LXGoiU-K.js";import{e as M,f as ve,c as ge}from"./llamalend-CJM4OvTq.js";import{c as fe,d as ye,b as be,a as ke,f as we,e as $e,T as Ce,_ as Le,g as Te,h as qe,i as Be,k as Fe,l as Ve,m as Ue,j as Ae,u as Se,n as Pe,o as We,C as De,p as Oe,q as Re}from"./TableTrades-CpOKzF0E.js";import"./ChartStylesApex-Bb_72EcS.js";import{a as Me,_ as Z}from"./KPI-Cu_gXBZT.js";import{_ as X}from"./AsyncValue-vklsg9cD.js";import{u as N,a as H,_ as K,b as Y,f as ze,J as R,y as Ie}from"./UseLightweightChart-miolA3Q8.js";import{r as z,u as J}from"./Number-ymNWJv-c.js";import{t as Ee}from"./util-M70Hx2OY.js";import{u as x,_ as ee}from"./UseLegend-DUtMzLML.js";import{_ as ne}from"./ButtonToggle-Dd1z78pA.js";import{_ as ae,a as Qe}from"./Table-BoR1xNLo.js";import{L as te}from"./link-DKoh6c2Q.js";import{_ as Ne}from"./TokenIcon-B8OSB6NZ.js";import{_ as He}from"./Checkbox-WZJKlfNk.js";import{u as Ke,_ as Ye}from"./UsePagination-BNYdZ5vS.js";import{u as je}from"./UseRelativeTime-DdQHwmxE.js";import{u as Je}from"./UseSort-DXp0N6j2.js";import{a as se}from"./index-CLuxbeFb.js";import{u as Xe}from"./UseTabNavigation-tZjQO1NS.js";import"./timestamp-X9wFVw8g.js";import"./timestamp-DkvXAN4c.js";import"./useQuery-EB5VIyWb.js";import"./Object-DOSYkgA0.js";const Ge={style:{display:"flex","align-items":"center"}},Ze={ref:"chartRef",class:"chart"},xe=L({__name:"ChartEquity",props:{equity:{}},setup(l){const r=I(),_=E("card"),{chart:g,series:i}=N({createChartOptions:H(),series:{type:ze,name:"equity",options:b(()=>{const{colors:s}=r.value;return{priceFormat:{type:"custom",formatter:o=>`$${z(o,0,"dollar")}${J(o)}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:s.green,bottomLineColor:s.red,lastValueVisible:!1,priceLineVisible:!1}})}});Q(t);function t(){!g.value||!i.equity||(i.equity.setData(l.equity.map(s=>({time:s.timestamp.getUTCTimestamp(),value:s.equity})).uniqWith((s,o)=>s.time===o.time).orderBy(s=>s.time,"asc")),g.value.timeScale().fitContent())}return(s,o)=>{const p=Me,v=K,c=Y,h=O;return y(),$(h,{ref_key:"card",ref:_,title:"Equity"},{actions:d(()=>[u("div",Ge,[a(p,{style:{"margin-right":"1rem"}},{default:d(()=>o[0]||(o[0]=[u("span",null,[W(" This chart shows the difference between the value of the collateral and the debt."),u("br"),u("br"),W(" Positive values indicate net equity (collateral exceeds debt),"),u("br"),W(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)])),_:1,__:[0]}),a(v,{filename:"equity",series:e(i)},null,8,["series"]),a(c,{chart:e(g),target:e(_)},null,8,["chart","target"])])]),default:d(()=>[u("div",Ze,null,512)]),_:1},512)}}}),ea={class:"dashboard-grid"},aa=L({__name:"Liquidations",props:{market:{},chain:{}},setup(l){const r=b(()=>l.market?.controller),{isFetching:_,data:g}=M(w(()=>l.market),w(()=>l.chain)),i=b(()=>g.value.map(({timestamp:q,priceOracle:V})=>({timestamp:q,priceOracle:V}))),t=b(()=>g.value.map(({timestamp:q,discountLiquidation:V})=>({timestamp:q,discount:V}))),{isFetching:s,data:o}=fe(T("lending"),w(()=>l.chain),r),{isFetching:p,data:v}=ye(T("lending"),w(()=>l.chain),r),{isFetching:c,data:h}=be(T("lending"),w(()=>l.chain),r),m=b(()=>h.value.map(({timestamp:q,proportion:V})=>({timestamp:q,proportion:V*100}))),{isFetching:f,data:n}=ke(T("lending"),w(()=>l.chain),r),{isFetching:k,data:S}=we(T("lending"),w(()=>l.chain),r),{isFetching:P,data:F}=$e(T("lending"),w(()=>l.chain),r);return(q,V)=>(y(),D("div",ea,[a(e(Ce),{overview:e(n),loading:e(f)},null,8,["overview","loading"]),a(e(Le),{ratios:e(m),"prices-oracle":e(i),loading:e(c)||e(_)},null,8,["ratios","prices-oracle","loading"]),a(e(Te),{losses:e(S),loading:e(k)},null,8,["losses","loading"]),a(e(qe),{losses:e(S),loading:e(k)},null,8,["losses","loading"]),a(e(Be),{deciles:e(F),loading:e(P)},null,8,["deciles","loading"]),a(e(Fe),{liqs:e(o),loading:e(s)},null,8,["liqs","loading"]),a(e(Ve),{liqs:e(v),loading:e(p)},null,8,["liqs","loading"]),a(e(Ue),{discounts:e(t),liqs:e(v),loading:e(_)||e(p)},null,8,["discounts","liqs","loading"])]))}}),ta=A(aa,[["__scopeId","data-v-d3d09c2f"]]),la={style:{display:"flex"}},sa={ref:"chartRef",class:"chart"},oa=L({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(l){const r=I(),{items:_,toggles:g,disabled:i}=x(()=>{const{blue:h,yellow:m,purple:f}=r.value.colors;return[{id:"supply",label:"Supply",color:h},{id:"debt",label:"Debt",color:m},{id:"util",label:"Util %",color:f,togglable:!0}]}),{isFetching:t,data:s}=M(w(()=>l.market),w(()=>l.chain)),o=E("card"),{chart:p,series:v}=N({createChartOptions:H(b(()=>({leftPriceScale:{visible:g.util.value}}))),series:[{type:R,name:"supply",options:b(()=>({priceFormat:{type:"custom",formatter:h=>`$${z(h,0,"dollar")}${J(h)}`,minMove:.01},lineWidth:2,color:r.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:R,name:"debt",options:b(()=>({priceFormat:{type:"custom",formatter:h=>`$${z(h,0,"dollar")}${J(h)}`,minMove:.01},lineWidth:2,color:r.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:R,name:"util",options:b(()=>({priceFormat:{type:"custom",formatter:h=>`${Math.round(h*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:r.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});Q(c);function c(){if(!p.value||!v.supply||!v.debt||!v.util)return;const h=s.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.totalAssetsUsd})).uniqWith((n,k)=>n.time===k.time).orderBy(n=>n.time,"asc"),m=s.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.totalDebtUsd})).uniqWith((n,k)=>n.time===k.time).orderBy(n=>n.time,"asc"),f=h.zip(m).map(([n,k])=>({time:k.time,value:n.value>0?k.value/n.value:0})).uniqWith((n,k)=>n.time===k.time).orderBy(n=>n.time,"asc");v.supply.setData(h),v.debt.setData(m),v.util.setData(f),v.util.applyOptions({visible:g.util.value}),p.value.timeScale().fitContent()}return(h,m)=>{const f=K,n=Y,k=ee,S=O;return y(),$(S,{ref_key:"card",ref:o,title:"Supply & Debt",loading:e(t)},{actions:d(()=>[u("div",la,[a(f,{filename:"supply_debt_util",series:e(v)},null,8,["series"]),a(n,{chart:e(p),target:e(o)},null,8,["chart","target"])])]),"actions-secondary":d(()=>[a(k,{items:e(_),disabled:e(i),onToggle:m[0]||(m[0]=P=>e(g)[P].value=!e(g)[P].value)},null,8,["items","disabled"])]),default:d(()=>[u("div",sa,null,512)]),_:1},8,["loading"])}}}),na={style:{display:"flex"}},ra={ref:"chartRef",class:"chart"},ia=L({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(l){const{isFetching:r,data:_}=M(w(()=>l.market),w(()=>l.chain)),g=I(),i=b(()=>l.market?l.market.collateralToken.symbol:"?"),t=b(()=>l.market?l.market.borrowedToken.symbol:"?"),{items:s}=x(()=>[{id:i.value,label:i.value,color:g.value.colors.blue},{id:t.value,label:t.value,color:g.value.colors.yellow}]),o=T(!0),p=E("card"),{chart:v,series:c}=N({createChartOptions:H(),series:[{type:R,name:"collateral",options:b(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:g.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:R,name:"borrowed",options:b(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:g.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});Q(h);function h(){if(!v.value||!c.collateral||!c.borrowed)return;const f=o.value;c.collateral.setData(_.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:f?n.collateralBalanceUsd:n.collateralBalance})).uniqWith((n,k)=>n.time===k.time).orderBy(n=>n.time,"asc")),c.borrowed.setData(_.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:f?n.borrowedBalanceUsd:n.borrowedBalance})).uniqWith((n,k)=>n.time===k.time).orderBy(n=>n.time,"asc")),v.value.timeScale().fitContent()}function m(f){return`${o.value?"$":""}${z(f,0,"dollar")}${J(f)}`}return(f,n)=>{const k=ne,S=K,P=Y,F=ee,q=O;return y(),$(q,{ref_key:"card",ref:p,title:"Collateral",loading:e(r)},{actions:d(()=>[u("div",na,[a(k,{style:{"margin-right":"1rem"},"model-value":e(o),onClick:n[0]||(n[0]=V=>o.value=!e(o))},{default:d(()=>n[1]||(n[1]=[W(" Dollars ",-1)])),_:1,__:[1]},8,["model-value"]),a(S,{filename:"collateral",series:e(c)},null,8,["series"]),a(P,{chart:e(v),target:e(p)},null,8,["chart","target"])])]),"actions-secondary":d(()=>[a(F,{items:e(s)},null,8,["items"])]),default:d(()=>[u("div",ra,null,512)]),_:1},8,["loading"])}}}),ca={style:{display:"flex"}},da={ref:"chartRef",class:"chart"},ua=L({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(l){const{isFetching:r,data:_}=M(w(()=>l.market),w(()=>l.chain)),g=I(),i=E("card"),{chart:t,series:s}=N({createChartOptions:H(),series:{type:Ie,name:"loans",options:b(()=>({color:g.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});Q(o);function o(){!t.value||!s.loans||(s.loans.setData(_.value.map(p=>({time:p.timestamp.getUTCTimestamp(),value:p.numLoans})).uniqWith((p,v)=>p.time===v.time).orderBy(p=>p.time,"asc")),t.value.timeScale().fitContent())}return(p,v)=>{const c=K,h=Y,m=O;return y(),$(m,{ref_key:"card",ref:i,title:"Loans",loading:e(r)},{actions:d(()=>[u("div",ca,[a(c,{filename:"loans",series:e(s)},null,8,["series"]),a(h,{chart:e(t),target:e(i)},null,8,["chart","target"])])]),default:d(()=>[u("div",da,null,512)]),_:1},8,["loading"])}}}),ma={style:{display:"flex"}},pa={ref:"chartRef",class:"chart"},ha=L({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(l){const r=I(),{items:_}=x(()=>[{id:"borrow",label:"Borrow APY",color:r.value.colors.red},{id:"lend",label:"Lend APY",color:r.value.colors.green}]),{isFetching:g,data:i}=M(w(()=>l.market),w(()=>l.chain)),t=E("card"),{chart:s,series:o}=N({createChartOptions:H({localization:{priceFormatter:c=>v(c)}}),series:[{type:R,name:"borrowApy",options:b(()=>({priceFormat:{type:"custom",formatter:v},lineWidth:2,color:r.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:R,name:"lendApy",options:b(()=>({priceFormat:{type:"custom",formatter:v},lineWidth:2,color:r.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});Q(p);function p(){!s.value||!o.borrowApy||!o.lendApy||(o.borrowApy.setData(i.value.map(c=>({time:c.timestamp.getUTCTimestamp(),value:c.borrowApy})).uniqWith((c,h)=>c.time===h.time).orderBy(c=>c.time,"asc")),o.lendApy.setData(i.value.map(c=>({time:c.timestamp.getUTCTimestamp(),value:c.lendApy})).uniqWith((c,h)=>c.time===h.time).orderBy(c=>c.time,"asc")),s.value.timeScale().fitContent())}function v(c){return`${z(c*100,0,"percentage")}%`}return(c,h)=>{const m=K,f=Y,n=ee,k=O;return y(),$(k,{ref_key:"card",ref:t,title:"Rates",loading:e(g)},{actions:d(()=>[u("div",ma,[a(m,{filename:"rates",series:e(o)},null,8,["series"]),a(f,{chart:e(s),target:e(t)},null,8,["chart","target"])])]),"actions-secondary":d(()=>[a(n,{items:e(_)},null,8,["items"])]),default:d(()=>[u("div",pa,null,512)]),_:1},8,["loading"])}}}),_a=["href"],va={key:1},ga=L({__name:"Addresses",props:{market:{}},setup(l){const r=b(()=>[{description:"Controller",address:l.market?.controller},{description:"Vault",address:l.market?.vault},{description:"Llamma",address:l.market?.llamma},{description:"Policy",address:l.market?.policy},{description:"Oracle",address:l.market?.oracle}]),_=i=>`https://etherscan.io/address/${i}`,g=async i=>{await navigator.clipboard.writeText(i)};return(i,t)=>{const s=te,o=G,p=ae,v=O;return y(),$(v,{title:"Addresses",class:"addresses"},{default:d(()=>[a(p,{class:"addresses-table",rows:e(r)},{row:d(({item:{description:c,address:h}})=>[u("div",null,B(c),1),u("div",null,[h?(y(),D("a",{key:0,class:"font-mono",target:"_blank",href:_(h)},B(h),9,_a)):(y(),D("span",va,"?"))]),u("div",null,[h?(y(),$(o,{key:0,onClick:m=>g(h)},{default:d(()=>[a(s)]),_:2},1032,["onClick"])):U("",!0)])]),_:1},8,["rows"])]),_:1})}}}),fa=A(ga,[["__scopeId","data-v-f805545c"]]),ya={class:"usage"},ba={class:"two-sides"},ka={class:"collateral"},wa={class:"two-sides"},$a={class:"two-sides"},Ca=L({__name:"KPIUsage",props:{market:{}},setup(l){const r=b(()=>(l.market?.collateralBalanceUsd??0)+(l.market?.borrowedBalanceUsd??0)),_=b(()=>{const i="Collateral",t=l.market?.collateralToken.symbol??"?",s=l.market?.borrowedToken.symbol??"?";return`${i} (${t} / ${s})`}),g=b(()=>l.market?l.market.totalAssetsUsd===0?0:l.market.totalDebtUsd/l.market.totalAssetsUsd:0);return(i,t)=>{const s=X,o=Z;return y(),D("div",ya,[a(o,{style:{"grid-area":"kpi1"},label:e(_),"has-value":!!i.market},{default:d(()=>[u("div",ba,[u("div",ka,[a(s,{"show-zero":"",type:"dollar",value:i.market?.collateralBalance,"show-symbol":!1},null,8,["value"]),t[0]||(t[0]=u("span",{style:{color:"var(--c-lvl5)"}},"/",-1)),a(s,{"show-zero":"",type:"dollar",value:i.market?.borrowedBalance,"show-symbol":!1},null,8,["value"])]),a(s,{"show-zero":"",type:"dollar",value:e(r)},null,8,["value"])])]),_:1},8,["label","has-value"]),a(o,{style:{"grid-area":"kpi2"},label:`Borrowed (${i.market?.borrowedToken.symbol??"?"})`,"has-value":!!i.market},{default:d(()=>[u("div",wa,[a(s,{"show-zero":"",type:"dollar",value:i.market?.totalDebt,"show-symbol":!1},null,8,["value"]),a(s,{"show-zero":"",type:"dollar",value:i.market?.totalDebtUsd},null,8,["value"])])]),_:1},8,["label","has-value"]),a(o,{style:{"grid-area":"kpi3"},label:`Supplied (${i.market?.collateralToken.symbol??"?"})`,"has-value":!!i.market},{default:d(()=>[u("div",$a,[a(s,{"show-zero":"",type:"dollar",value:i.market?.totalAssets,"show-symbol":!1},null,8,["value"]),a(s,{"show-zero":"",type:"dollar",value:i.market?.totalAssetsUsd},null,8,["value"])])]),_:1},8,["label","has-value"]),a(o,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!i.market},{default:d(()=>[a(s,{"show-zero":"",type:"percentage",value:e(g)*100},null,8,["value"])]),_:1},8,["has-value"])])}}}),La=A(Ca,[["__scopeId","data-v-09943df6"]]),Ta={class:"token-info"},qa=["href"],Ba={class:"token-info"},Fa=["href"],Va=L({__name:"Properties",props:{market:{},chain:{}},setup(l){const r=b(()=>({type:"token",symbol:l.market?.collateralToken?.symbol??"?",address:l.market?.collateralToken?.address??"?"})),_=b(()=>({type:"token",symbol:l.market?.borrowedToken?.symbol??"?",address:l.market?.borrowedToken?.address??"?"})),g=t=>`https://etherscan.io/address/${t}`,i=async t=>{await navigator.clipboard.writeText(t)};return(t,s)=>{const o=Ne,p=te,v=G,c=Qe,h=ae,m=O;return y(),$(m,{class:"properties",title:"Properties"},{default:d(()=>[a(h,{class:"properties-table"},{default:d(()=>[a(c,null,{default:d(()=>[s[2]||(s[2]=u("div",null,"Collateral",-1)),u("div",Ta,[a(o,{chain:t.chain,address:e(r).address},null,8,["chain","address"]),u("div",null,B(e(r).symbol),1),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:g(e(r).address)},B(e(r).address),9,qa)]),u("div",null,[a(v,{onClick:s[0]||(s[0]=f=>i(e(r).address))},{default:d(()=>[a(p)]),_:1})])])]),_:1,__:[2]}),a(c,null,{default:d(()=>[s[3]||(s[3]=u("div",null,"Borrowed",-1)),u("div",Ba,[a(o,{chain:t.chain,address:e(_).address},null,8,["chain","address"]),u("div",null,B(e(_).symbol),1),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:g(e(_).address)},B(e(_).address),9,Fa)]),u("div",null,[a(v,{onClick:s[1]||(s[1]=f=>i(e(_).address))},{default:d(()=>[a(p)]),_:1})])])]),_:1,__:[3]})]),_:1})]),_:1})}}}),Ua=A(Va,[["__scopeId","data-v-fc596782"]]),Aa={class:"dashboard-grid"},Sa=L({__name:"MarketOverview",props:{market:{},chain:{}},setup(l){const{isFetching:r,data:_}=M(w(()=>l.market),w(()=>l.chain)),g=b(()=>_.value.map(({timestamp:t,collateralBalanceUsd:s,borrowedBalanceUsd:o,totalDebtUsd:p})=>({timestamp:t,ratio:p>0?(s+o)/p:0}))),i=b(()=>_.value.map(({timestamp:t,collateralBalanceUsd:s,borrowedBalanceUsd:o,totalDebtUsd:p})=>({timestamp:t,equity:s+o-p})));return(t,s)=>{const o=X,p=Z;return y(),D("div",Aa,[a(p,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!t.market},{default:d(()=>[a(o,{type:"percentage",value:t.market?.apyBorrow},null,8,["value"])]),_:1},8,["has-value"]),a(p,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!t.market},{default:d(()=>[a(o,{type:"percentage",value:t.market?.apyLend},null,8,["value"])]),_:1},8,["has-value"]),a(p,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!t.market},{default:d(()=>[W(B(t.market?.nLoans??0),1)]),_:1},8,["has-value"]),a(p,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!t.market},{default:d(()=>[a(o,{type:"dollar",value:e(Ee)(t.market)},null,8,["value"])]),_:1},8,["has-value"]),a(e(oa),{style:{"grid-area":"supply"},market:t.market,chain:t.chain},null,8,["market","chain"]),a(e(ia),{style:{"grid-area":"collateral"},market:t.market,chain:t.chain},null,8,["market","chain"]),a(e(Ae),{style:{"grid-area":"colratio"},ratios:e(g),loading:e(r)},null,8,["ratios","loading"]),a(e(xe),{style:{"grid-area":"equity"},equity:e(i),loading:e(r)},null,8,["equity","loading"]),a(e(ha),{style:{"grid-area":"rates"},market:t.market,chain:t.chain},null,8,["market","chain"]),a(e(ua),{style:{"grid-area":"loans"},market:t.market,chain:t.chain},null,8,["market","chain"]),a(e(fa),{style:{"grid-area":"addresses"},market:t.market},null,8,["market"]),a(e(Ua),{style:{"grid-area":"properties"},market:t.market,chain:t.chain},null,8,["market","chain"]),a(e(La),{style:{"grid-area":"usage"},market:t.market},null,8,["market"])])}}}),Pa=A(Sa,[["__scopeId","data-v-c4af7549"]]),Wa={class:"dashboard-grid"},Da=L({__name:"Trading",props:{market:{},chain:{}},setup(l){const r=b(()=>l.market?.llamma),{isFetching:_,data:g}=Se("lending",r,w(()=>l.chain)),i=T(1),{isFetching:t,data:s}=Pe("lending",r,w(()=>l.chain),i),o=T(1),{isFetching:p,data:v}=We("lending",r,w(()=>l.chain),o);return(c,h)=>{const m=X,f=Z;return y(),D("div",Wa,[a(f,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!c.market},{default:d(()=>[a(m,{type:"dollar",value:c.market?.priceOracle},null,8,["value"])]),_:1},8,["has-value"]),a(f,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!c.market},{default:d(()=>[a(m,{type:"dollar",value:c.market?.ammPrice},null,8,["value"])]),_:1},8,["has-value"]),a(e(De),{style:{"grid-area":"ohlc"},ohlc:e(g)??[],loading:e(_)},null,8,["ohlc","loading"]),a(e(Oe),{style:{"grid-area":"trades"},trades:e(s)?.trades??[],count:e(s)?.count??0,chain:c.chain,loading:e(t),onPage:h[0]||(h[0]=n=>i.value=n)},null,8,["trades","count","chain","loading"]),a(e(Re),{style:{"grid-area":"events"},events:e(v)?.events??[],count:e(v)?.count??0,loading:e(p),onPage:h[1]||(h[1]=n=>o.value=n)},null,8,["events","count","loading"])])}}}),Oa=A(Da,[["__scopeId","data-v-ae2f31ac"]]),Ra={style:{display:"flex",gap:"1rem"}},Ma=["href"],za={class:"end"},Ia={class:"end"},Ea={class:"end",style:{display:"flex",gap:"1ch"}},Qa={class:"end"},Na={class:"end"},oe=20,Ha=L({__name:"TableUsers",props:{users:{},collateralSymbol:{}},setup(l){const r=T(!0),_=T(!1),{relativeTime:g}=je(),i=["",{id:"user",label:"User",sort:!1},{id:"debt",label:"Debt",sort:!0,align:"end"},{id:"borrowed",label:"Borrowed",sort:!0,align:"end"},{id:"collateral",label:"Collateral",sort:!0,align:"end"},{id:"loss",label:"Loss",sort:!0,align:"end"},{id:"health_full",label:"Health (Full)",sort:!0,align:"end"},{id:"softLiq",label:"Soft Liq",sort:!1,align:"center"},{id:"lastUpdate",label:"Last Update",sort:!0,align:"end"}],{sorting:t,onSort:s}=Je("debt"),o=b(()=>l.users.filter(m=>r.value?!0:m.healthFull>0).filter(m=>_.value?m.softLiquidation:!0).orderBy(m=>{switch(t.value.column){case"debt":return m.debt;case"borrowed":return m.borrowed;case"collateral":return m.collateral;case"loss":return m.loss;case"health_full":return m.healthFull;case"lastUpdate":return m.last.getTime()}},t.value.order)),{page:p,rowsPage:v,onPage:c}=Ke(o,oe),h=async m=>{await navigator.clipboard.writeText(m)};return(m,f)=>{const n=Ye,k=ne,S=te,P=G,F=X,q=He,V=ae,re=O;return y(),$(re,{title:"Users"},{actions:d(()=>[a(n,{"items-count":e(o).length,"items-per-page":oe,page:e(p),onPage:e(c)},null,8,["items-count","page","onPage"])]),"actions-secondary":d(()=>[u("div",Ra,[a(k,{"model-value":e(r),onClick:f[0]||(f[0]=C=>r.value=!e(r))},{default:d(()=>f[4]||(f[4]=[W(" Hard Liq'able ",-1)])),_:1,__:[4]},8,["model-value"]),a(k,{"model-value":e(_),onClick:f[1]||(f[1]=C=>_.value=!e(_))},{default:d(()=>f[5]||(f[5]=[W(" Soft Liq Only ",-1)])),_:1,__:[5]},8,["model-value"])])]),default:d(()=>[a(V,{rows:e(v),columns:i,sorting:e(t),onSortColumn:e(s)},{row:d(({item:C})=>[u("div",null,[a(P,{onClick:Za=>h(C.user)},{default:d(()=>[a(S)]),_:2},1032,["onClick"])]),u("div",null,[u("a",{target:"_blank",href:`https://etherscan.io/address/${C.user}`,onClick:f[2]||(f[2]=le(()=>{},["stop"]))},B(("addressShort"in m?m.addressShort:e(de))(C.user)),9,Ma)]),u("div",za,[a(F,{"show-zero":"",type:"dollar",value:C.debt,precision:2},null,8,["value"])]),u("div",Ia,[C.borrowed>0?(y(),$(F,{key:0,"show-zero":"",type:"dollar",value:C.borrowed,precision:2},null,8,["value"])):U("",!0)]),u("div",Ea,[C.collateral>0?(y(),$(F,{key:0,"show-zero":"",type:"dollar",value:C.collateral,precision:2,"show-symbol":!1},null,8,["value"])):U("",!0),W(" "+B(m.collateralSymbol),1)]),u("div",Qa,[C.loss>0?(y(),$(F,{key:0,"show-zero":"",type:"dollar",value:C.loss,precision:2},null,8,["value"])):U("",!0)]),u("div",{class:ue(["end",{bad:C.healthFull<=5,danger:C.healthFull<=15&&C.healthFull>5,good:C.healthFull>15}])},[a(F,{"show-zero":"",type:"percentage",value:C.healthFull,precision:2},null,8,["value"])],2),u("div",{class:"center",onClick:f[3]||(f[3]=le(()=>{},["stop"]))},[a(q,{readonly:"","model-value":C.softLiquidation},null,8,["model-value"])]),u("div",Na,B(e(g)(C.last.getUTCTimestamp())),1)]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Ka=A(Ha,[["__scopeId","data-v-bda23fbb"]]),Ya={class:"dashboard-grid"},ja=L({__name:"Users",props:{market:{},chain:{}},setup(l){const r=b(()=>l.market?.controller),{isFetching:_,data:g}=ve(w(()=>l.chain),r);return(i,t)=>(y(),D("div",Ya,[a(Ka,{style:{"grid-area":"users"},users:e(g)??[],"collateral-symbol":i.market?.collateralToken?.symbol??"?",chain:i.chain,loading:e(_)},null,8,["users","collateral-symbol","chain","loading"])]))}}),Ja=A(ja,[["__scopeId","data-v-818c5e34"]]),Xa={class:"dashboard"},Ga=L({__name:"Market.page",setup(l){const r=se("chain"),_=se("marketAddr"),{isFetching:g,data:i}=ge(r),t=b(()=>i.value?.find(v=>v.controller===_.value)),{crumbs:s}=me(pe());he(t,v=>{s.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:r.value})},{id:"market",label:`Market: ${v?.name??"?"}`}]},{immediate:!0});const{tabActive:o,tabActiveIndex:p}=Xe(["overview","trading","liquidations","users"],"llamalendmarket",()=>({chain:r.value,marketAddr:_.value}));return(v,c)=>{const h=_e,m=ie,f=ce;return y(),D("div",Xa,[a(h,{loading:e(g)},null,8,["loading"]),!e(g)&&e(t)?(y(),$(f,{key:0,active:e(p),onTab:c[0]||(c[0]=n=>p.value=n.index)},{default:d(()=>[a(m,{header:"Overview"},{default:d(()=>[(y(),$(j,null,[e(o)==="overview"?(y(),$(Pa,{key:0,market:e(t),chain:e(r)},null,8,["market","chain"])):U("",!0)],1024))]),_:1}),a(m,{header:"Trading"},{default:d(()=>[(y(),$(j,null,[e(o)==="trading"?(y(),$(Oa,{key:0,market:e(t),chain:e(r)},null,8,["market","chain"])):U("",!0)],1024))]),_:1}),a(m,{header:"Liquidations"},{default:d(()=>[(y(),$(j,null,[e(o)==="liquidations"?(y(),$(ta,{key:0,market:e(t),chain:e(r)},null,8,["market","chain"])):U("",!0)],1024))]),_:1}),a(m,{header:"Users"},{default:d(()=>[(y(),$(j,null,[e(o)==="users"?(y(),$(Ja,{key:0,market:e(t),chain:e(r)},null,8,["market","chain"])):U("",!0)],1024))]),_:1})]),_:1},8,["active"])):U("",!0)])}}}),Ct=A(Ga,[["__scopeId","data-v-0d37f1a9"]]);export{Ct as default};
