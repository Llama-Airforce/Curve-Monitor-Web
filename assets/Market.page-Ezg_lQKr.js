import{_ as te,a as le}from"./TabItem.vue_vue_type_script_setup_true_lang-BjCCVpmf.js";import{d as T,W as M,X as I,c as y,Y as z,e as L,o as w,g as F,w as h,f as g,b as t,j as R,u as e,t as $,r as q,i as A,a as S,V as O,S as x,_ as U,a4 as se,a5 as ne,N as oe,R as ie,a2 as Y}from"./index-uzkAuSSn.js";import{e as P,c as re}from"./llamalend-t5cGsrUw.js";import{a as ce,_ as j}from"./KPI-CWqEvb5n.js";import{_ as X}from"./AsyncValue-BT1LuNBu.js";import{t as de}from"./util-M70Hx2OY.js";import{u as G,_ as J}from"./UseLegend-PUe8IkEf.js";import{u as Q,c as E,_ as N,a as K}from"./UseLightweightChart-B7JQDgiK.js";import{r as W,u as H}from"./Number-Bf5yu2lS.js";import{_ as ue}from"./ButtonToggle-xHZhANjr.js";import{_ as ee,a as me}from"./Table-DNieR9NU.js";import{L as ae}from"./link-8Cswe_dI.js";import{_ as pe}from"./TokenIcon-BmDW00ev.js";import{j as he,u as ve,n as ge,o as fe,C as _e,p as ye,q as ke,c as be,d as we,b as $e,a as Le,f as Ce,e as qe,T as Te,_ as Be,g as Ve,h as Ae,i as Se,k as Fe,l as Ue,m as De}from"./TableTrades-Cw_VVlIl.js";import"./ChartStylesApex-B2CgV7ZF.js";import{a as Z}from"./index-CCkSewY0.js";import{u as Pe}from"./UseTabNavigation-BB3Wihah.js";import"./timestamp-C4C6eGnP.js";import"./useQuery-BUiyQRaV.js";import"./Object-DOSYkgA0.js";import"./UsePagination-rGLIUZEX.js";import"./UseRelativeTime-Cah9gO57.js";const Oe={style:{display:"flex","align-items":"center"}},Re={ref:"chartRef",class:"chart"},We=T({__name:"ChartEquity",props:{equity:{}},setup(o){const d=M(),f=I("card"),{chart:v,series:r}=Q({createChartOptions:E(),series:{type:"Baseline",name:"equity",options:y(()=>{const{colors:s}=d.value;return{priceFormat:{type:"custom",formatter:l=>`$${W(l,0,"dollar")}${H(l)}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:s.green,bottomLineColor:s.red,lastValueVisible:!1,priceLineVisible:!1}})}});z(a);function a(){if(!v.value||!r.equity)return;const s=o.equity.map(l=>({time:l.timestamp.getUTCTimestamp(),value:l.equity})).uniqWith((l,i)=>l.time===i.time).orderBy(l=>l.time,"asc");s.length>0&&r.equity.setData(s),v.value.timeScale().fitContent()}return(s,l)=>{const i=ce,n=F;return w(),L(n,{ref_key:"card",ref:f,title:"Equity"},{actions:h(()=>[g("div",Oe,[t(i,{style:{"margin-right":"1rem"}},{default:h(()=>l[0]||(l[0]=[g("span",null,[R(" This chart shows the difference between the value of the collateral and the debt."),g("br"),g("br"),R(" Positive values indicate net equity (collateral exceeds debt),"),g("br"),R(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)])),_:1}),t(e(N),{filename:"equity",series:e(r)},null,8,["series"]),t(e(K),{chart:e(v),target:e(f)},null,8,["chart","target"])])]),default:h(()=>[g("div",Re,null,512)]),_:1},512)}}}),Me={style:{display:"flex"}},Ie={ref:"chartRef",class:"chart"},ze=T({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(o){const d=M(),{items:f,toggles:v,disabled:r}=G(()=>{const{blue:u,yellow:m,purple:_}=d.value.colors;return[{id:"supply",label:"Supply",color:u},{id:"debt",label:"Debt",color:m},{id:"util",label:"Util %",color:_,togglable:!0}]}),{isFetching:a,data:s}=P($(()=>o.market),$(()=>o.chain)),l=I("card"),{chart:i,series:n}=Q({createChartOptions:E(y(()=>({leftPriceScale:{visible:v.util.value}}))),series:[{type:"Line",name:"supply",options:y(()=>({priceFormat:{type:"custom",formatter:u=>`$${W(u,0,"dollar")}${H(u)}`,minMove:.01},lineWidth:2,color:d.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:y(()=>({priceFormat:{type:"custom",formatter:u=>`$${W(u,0,"dollar")}${H(u)}`,minMove:.01},lineWidth:2,color:d.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"util",options:y(()=>({priceFormat:{type:"custom",formatter:u=>`${Math.round(u*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:d.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});z(c);function c(){if(!i.value||!n.supply||!n.debt||!n.util)return;const u=s.value.map(p=>({time:p.timestamp.getUTCTimestamp(),value:p.totalAssetsUsd})).uniqWith((p,k)=>p.time===k.time).orderBy(p=>p.time,"asc"),m=s.value.map(p=>({time:p.timestamp.getUTCTimestamp(),value:p.totalDebtUsd})).uniqWith((p,k)=>p.time===k.time).orderBy(p=>p.time,"asc"),_=u.zip(m).map(([p,k])=>({time:k.time,value:p.value>0?k.value/p.value:0})).uniqWith((p,k)=>p.time===k.time).orderBy(p=>p.time,"asc");n.supply.setData(u),n.debt.setData(m),n.util.setData(_),n.util.applyOptions({visible:v.util.value}),i.value.timeScale().fitContent()}return(u,m)=>{const _=J,p=F;return w(),L(p,{ref_key:"card",ref:l,title:"Supply & Debt",loading:e(a)},{actions:h(()=>[g("div",Me,[t(e(N),{filename:"supply_debt_util",series:e(n)},null,8,["series"]),t(e(K),{chart:e(i),target:e(l)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(_,{items:e(f),disabled:e(r),onToggle:m[0]||(m[0]=k=>e(v)[k].value=!e(v)[k].value)},null,8,["items","disabled"])]),default:h(()=>[g("div",Ie,null,512)]),_:1},8,["loading"])}}}),Qe={style:{display:"flex"}},Ee={ref:"chartRef",class:"chart"},Ne=T({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(o){const{isFetching:d,data:f}=P($(()=>o.market),$(()=>o.chain)),v=M(),r=y(()=>o.market?o.market.tokenCollateral.symbol:"?"),a=y(()=>o.market?o.market.tokenBorrowed.symbol:"?"),{items:s}=G(()=>[{id:r.value,label:r.value,color:v.value.colors.blue},{id:a.value,label:a.value,color:v.value.colors.yellow}]),l=q(!0),i=I("card"),{chart:n,series:c}=Q({createChartOptions:E(),series:[{type:"Line",name:"collateral",options:y(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:v.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"borrowed",options:y(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:v.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});z(u);function u(){if(!n.value||!c.collateral||!c.borrowed)return;const _=l.value,p=f.value.map(b=>({time:b.timestamp.getUTCTimestamp(),value:_?b.collateralBalanceUsd:b.collateralBalance})).uniqWith((b,B)=>b.time===B.time).orderBy(b=>b.time,"asc"),k=f.value.map(b=>({time:b.timestamp.getUTCTimestamp(),value:_?b.borrowedBalanceUsd:b.borrowedBalance})).uniqWith((b,B)=>b.time===B.time).orderBy(b=>b.time,"asc");p.length>0&&c.collateral.setData(p),k.length>0&&c.borrowed.setData(k),(p.length>0||k.length>0)&&n.value.timeScale().fitContent()}function m(_){return`${l.value?"$":""}${W(_,0,"dollar")}${H(_)}`}return(_,p)=>{const k=ue,b=J,B=F;return w(),L(B,{ref_key:"card",ref:i,title:"Collateral",loading:e(d)},{actions:h(()=>[g("div",Qe,[t(k,{style:{"margin-right":"1rem"},"model-value":e(l),onClick:p[0]||(p[0]=C=>l.value=!e(l))},{default:h(()=>p[1]||(p[1]=[R(" Dollars ")])),_:1},8,["model-value"]),t(e(N),{filename:"collateral",series:e(c)},null,8,["series"]),t(e(K),{chart:e(n),target:e(i)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(b,{items:e(s)},null,8,["items"])]),default:h(()=>[g("div",Ee,null,512)]),_:1},8,["loading"])}}}),Ke={style:{display:"flex"}},He={ref:"chartRef",class:"chart"},Ye=T({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(o){const{isFetching:d,data:f}=P($(()=>o.market),$(()=>o.chain)),v=M(),r=I("card"),{chart:a,series:s}=Q({createChartOptions:E(),series:{type:"Histogram",name:"loans",options:y(()=>({color:v.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});z(l);function l(){if(!a.value||!s.loans)return;const i=f.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.numLoans})).uniqWith((n,c)=>n.time===c.time).orderBy(n=>n.time,"asc");i.length>0&&(s.loans.setData(i),a.value.timeScale().fitContent())}return(i,n)=>{const c=F;return w(),L(c,{ref_key:"card",ref:r,title:"Loans",loading:e(d)},{actions:h(()=>[g("div",Ke,[t(e(N),{filename:"loans",series:e(s)},null,8,["series"]),t(e(K),{chart:e(a),target:e(r)},null,8,["chart","target"])])]),default:h(()=>[g("div",He,null,512)]),_:1},8,["loading"])}}}),je={style:{display:"flex"}},Xe={ref:"chartRef",class:"chart"},Ge=T({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(o){const d=M(),{items:f}=G(()=>[{id:"borrow",label:"Borrow APY",color:d.value.colors.red},{id:"lend",label:"Lend APY",color:d.value.colors.green}]),{isFetching:v,data:r}=P($(()=>o.market),$(()=>o.chain)),a=I("card"),{chart:s,series:l}=Q({createChartOptions:E({localization:{priceFormatter:c=>n(c)}}),series:[{type:"Line",name:"borrowApy",options:y(()=>({priceFormat:{type:"custom",formatter:n},lineWidth:2,color:d.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"lendApy",options:y(()=>({priceFormat:{type:"custom",formatter:n},lineWidth:2,color:d.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});z(i);function i(){if(!s.value||!l.borrowApy||!l.lendApy)return;const c=r.value.map(m=>({time:m.timestamp.getUTCTimestamp(),value:m.borrowApy})).uniqWith((m,_)=>m.time===_.time).orderBy(m=>m.time,"asc"),u=r.value.map(m=>({time:m.timestamp.getUTCTimestamp(),value:m.lendApy})).uniqWith((m,_)=>m.time===_.time).orderBy(m=>m.time,"asc");c.length>0&&l.borrowApy.setData(c),u.length>0&&l.lendApy.setData(u),(c.length>0||u.length>0)&&s.value.timeScale().fitContent()}function n(c){return`${W(c*100,0,"percentage")}%`}return(c,u)=>{const m=J,_=F;return w(),L(_,{ref_key:"card",ref:a,title:"Rates",loading:e(v)},{actions:h(()=>[g("div",je,[t(e(N),{filename:"rates",series:e(l)},null,8,["series"]),t(e(K),{chart:e(s),target:e(a)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(m,{items:e(f)},null,8,["items"])]),default:h(()=>[g("div",Xe,null,512)]),_:1},8,["loading"])}}}),Je=["href"],Ze={key:1},xe=T({__name:"Addresses",props:{market:{}},setup(o){const d=y(()=>{var r,a,s,l,i;return[{description:"Controller",address:(r=o.market)==null?void 0:r.controller},{description:"Vault",address:(a=o.market)==null?void 0:a.vault},{description:"Llamma",address:(s=o.market)==null?void 0:s.llamma},{description:"Policy",address:(l=o.market)==null?void 0:l.policy},{description:"Oracle",address:(i=o.market)==null?void 0:i.oracle}]}),f=r=>`https://etherscan.io/address/${r}`,v=async r=>{await navigator.clipboard.writeText(r)};return(r,a)=>{const s=ae,l=x,i=ee,n=F;return w(),L(n,{title:"Addresses",class:"addresses"},{default:h(()=>[t(i,{class:"addresses-table",rows:e(d)},{row:h(({item:{description:c,address:u}})=>[g("div",null,A(c),1),g("div",null,[u?(w(),S("a",{key:0,class:"font-mono",target:"_blank",href:f(u)},A(u),9,Je)):(w(),S("span",Ze,"?"))]),g("div",null,[u?(w(),L(l,{key:0,onClick:m=>v(u)},{default:h(()=>[t(s)]),_:2},1032,["onClick"])):O("",!0)])]),_:1},8,["rows"])]),_:1})}}}),ea=U(xe,[["__scopeId","data-v-d5412739"]]),aa={class:"usage"},ta={class:"two-sides"},la={class:"collateral"},sa={class:"two-sides"},na={class:"two-sides"},oa=T({__name:"KPIUsage",props:{market:{}},setup(o){const d=y(()=>{var r,a;return(((r=o.market)==null?void 0:r.collateralBalanceUsd)??0)+(((a=o.market)==null?void 0:a.borrowedBalanceUsd)??0)}),f=y(()=>{var l,i;const r="Collateral",a=((l=o.market)==null?void 0:l.tokenCollateral.symbol)??"?",s=((i=o.market)==null?void 0:i.tokenBorrowed.symbol)??"?";return`${r} (${a} / ${s})`}),v=y(()=>o.market?o.market.totalAssetsUsd===0?0:o.market.totalDebtUsd/o.market.totalAssetsUsd:0);return(r,a)=>{var i,n;const s=X,l=j;return w(),S("div",aa,[t(l,{style:{"grid-area":"kpi1"},label:e(f),"has-value":!!r.market},{default:h(()=>{var c,u;return[g("div",ta,[g("div",la,[t(s,{"show-zero":"",type:"dollar",value:(c=r.market)==null?void 0:c.collateralBalance,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=g("span",{style:{color:"var(--c-lvl5)"}},"/",-1)),t(s,{"show-zero":"",type:"dollar",value:(u=r.market)==null?void 0:u.borrowedBalance,"show-symbol":!1},null,8,["value"])]),t(s,{"show-zero":"",type:"dollar",value:e(d)},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi2"},label:`Borrowed (${((i=r.market)==null?void 0:i.tokenBorrowed.symbol)??"?"})`,"has-value":!!r.market},{default:h(()=>{var c,u;return[g("div",sa,[t(s,{"show-zero":"",type:"dollar",value:(c=r.market)==null?void 0:c.totalDebt,"show-symbol":!1},null,8,["value"]),t(s,{"show-zero":"",type:"dollar",value:(u=r.market)==null?void 0:u.totalDebtUsd},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi3"},label:`Supplied (${((n=r.market)==null?void 0:n.tokenBorrowed.symbol)??"?"})`,"has-value":!!r.market},{default:h(()=>{var c,u;return[g("div",na,[t(s,{"show-zero":"",type:"dollar",value:(c=r.market)==null?void 0:c.totalAssets,"show-symbol":!1},null,8,["value"]),t(s,{"show-zero":"",type:"dollar",value:(u=r.market)==null?void 0:u.totalAssetsUsd},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!r.market},{default:h(()=>[t(s,{"show-zero":"",type:"percentage",value:e(v)*100},null,8,["value"])]),_:1},8,["has-value"])])}}}),ia=U(oa,[["__scopeId","data-v-3a23e829"]]),ra={class:"token-info"},ca=["href"],da={class:"token-info"},ua=["href"],ma=T({__name:"Properties",props:{market:{},chain:{}},setup(o){const d=y(()=>{var a,s,l,i;return{type:"token",symbol:((s=(a=o.market)==null?void 0:a.tokenCollateral)==null?void 0:s.symbol)??"?",address:((i=(l=o.market)==null?void 0:l.tokenCollateral)==null?void 0:i.address)??"?"}}),f=y(()=>{var a,s,l,i;return{type:"token",symbol:((s=(a=o.market)==null?void 0:a.tokenBorrowed)==null?void 0:s.symbol)??"?",address:((i=(l=o.market)==null?void 0:l.tokenBorrowed)==null?void 0:i.address)??"?"}}),v=a=>`https://etherscan.io/address/${a}`,r=async a=>{await navigator.clipboard.writeText(a)};return(a,s)=>{const l=pe,i=ae,n=x,c=me,u=ee,m=F;return w(),L(m,{class:"properties",title:"Properties"},{default:h(()=>[t(u,{class:"properties-table"},{default:h(()=>[t(c,null,{default:h(()=>[s[2]||(s[2]=g("div",null,"Collateral",-1)),g("div",ra,[t(l,{chain:a.chain,address:e(d).address},null,8,["chain","address"]),g("div",null,A(e(d).symbol),1),g("div",null,[g("a",{class:"font-mono",target:"_blank",href:v(e(d).address)},A(e(d).address),9,ca)]),g("div",null,[t(n,{onClick:s[0]||(s[0]=_=>r(e(d).address))},{default:h(()=>[t(i)]),_:1})])])]),_:1}),t(c,null,{default:h(()=>[s[3]||(s[3]=g("div",null,"Borrowed",-1)),g("div",da,[t(l,{chain:a.chain,address:e(f).address},null,8,["chain","address"]),g("div",null,A(e(f).symbol),1),g("div",null,[g("a",{class:"font-mono",target:"_blank",href:v(e(f).address)},A(e(f).address),9,ua)]),g("div",null,[t(n,{onClick:s[1]||(s[1]=_=>r(e(f).address))},{default:h(()=>[t(i)]),_:1})])])]),_:1})]),_:1})]),_:1})}}}),pa=U(ma,[["__scopeId","data-v-0520f43a"]]),ha={class:"dashboard-grid"},va=T({__name:"MarketOverview",props:{market:{},chain:{}},setup(o){const{isFetching:d,data:f}=P($(()=>o.market),$(()=>o.chain)),v=y(()=>f.value.map(({timestamp:a,collateralBalanceUsd:s,borrowedBalanceUsd:l,totalDebtUsd:i})=>({timestamp:a,ratio:i>0?(s+l)/i:0}))),r=y(()=>f.value.map(({timestamp:a,collateralBalanceUsd:s,borrowedBalanceUsd:l,totalDebtUsd:i})=>({timestamp:a,equity:s+l-i})));return(a,s)=>{const l=X,i=j;return w(),S("div",ha,[t(i,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!a.market},{default:h(()=>{var n;return[t(l,{type:"percentage",value:(n=a.market)==null?void 0:n.apyBorrow},null,8,["value"])]}),_:1},8,["has-value"]),t(i,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!a.market},{default:h(()=>{var n;return[t(l,{type:"percentage",value:(n=a.market)==null?void 0:n.apyLend},null,8,["value"])]}),_:1},8,["has-value"]),t(i,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!a.market},{default:h(()=>{var n;return[R(A(((n=a.market)==null?void 0:n.nLoans)??0),1)]}),_:1},8,["has-value"]),t(i,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!a.market},{default:h(()=>[t(l,{type:"dollar",value:e(de)(a.market)},null,8,["value"])]),_:1},8,["has-value"]),t(e(ze),{style:{"grid-area":"supply"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(Ne),{style:{"grid-area":"collateral"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(he),{style:{"grid-area":"colratio"},ratios:e(v),loading:e(d)},null,8,["ratios","loading"]),t(e(We),{style:{"grid-area":"equity"},equity:e(r),loading:e(d)},null,8,["equity","loading"]),t(e(Ge),{style:{"grid-area":"rates"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(Ye),{style:{"grid-area":"loans"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(ea),{style:{"grid-area":"addresses"},market:a.market},null,8,["market"]),t(e(pa),{style:{"grid-area":"properties"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(ia),{style:{"grid-area":"usage"},market:a.market},null,8,["market"])])}}}),ga=U(va,[["__scopeId","data-v-63306e2b"]]),fa={class:"dashboard-grid"},_a=T({__name:"Trading",props:{market:{},chain:{}},setup(o){const d=y(()=>{var c;return(c=o.market)==null?void 0:c.llamma}),{isFetching:f,data:v}=ve(q("lending"),d,$(()=>o.chain)),r=q(1),{isFetching:a,data:s}=ge(q("lending"),d,$(()=>o.chain),r),l=q(1),{isFetching:i,data:n}=fe(q("lending"),d,$(()=>o.chain),l);return(c,u)=>{var p,k,b,B;const m=X,_=j;return w(),S("div",fa,[t(_,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!c.market},{default:h(()=>{var C;return[t(m,{type:"dollar",value:(C=c.market)==null?void 0:C.priceOracle},null,8,["value"])]}),_:1},8,["has-value"]),t(_,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!c.market},{default:h(()=>{var C;return[t(m,{type:"dollar",value:(C=c.market)==null?void 0:C.ammPrice},null,8,["value"])]}),_:1},8,["has-value"]),t(e(_e),{style:{"grid-area":"ohlc"},ohlc:e(v)??[],loading:e(f)},null,8,["ohlc","loading"]),t(e(ye),{style:{"grid-area":"trades"},trades:((p=e(s))==null?void 0:p.trades)??[],count:((k=e(s))==null?void 0:k.count)??0,chain:c.chain,loading:e(a),onPage:u[0]||(u[0]=C=>r.value=C)},null,8,["trades","count","chain","loading"]),t(e(ke),{style:{"grid-area":"events"},events:((b=e(n))==null?void 0:b.events)??[],count:((B=e(n))==null?void 0:B.count)??0,loading:e(i),onPage:u[1]||(u[1]=C=>l.value=C)},null,8,["events","count","loading"])])}}}),ya=U(_a,[["__scopeId","data-v-d6da08d1"]]),ka={class:"dashboard-grid"},ba=T({__name:"Liquidations",props:{market:{},chain:{}},setup(o){const d=y(()=>{var V;return(V=o.market)==null?void 0:V.controller}),{isFetching:f,data:v}=P($(()=>o.market),$(()=>o.chain)),r=y(()=>v.value.map(({timestamp:V,priceOracle:D})=>({timestamp:V,priceOracle:D}))),a=y(()=>v.value.map(({timestamp:V,discountLiquidation:D})=>({timestamp:V,discount:D}))),{isFetching:s,data:l}=be(q("lending"),$(()=>o.chain),d),{isFetching:i,data:n}=we(q("lending"),$(()=>o.chain),d),{isFetching:c,data:u}=$e(q("lending"),$(()=>o.chain),d),m=y(()=>u.value.map(({timestamp:V,proportion:D})=>({timestamp:V,proportion:D*100}))),{isFetching:_,data:p}=Le(q("lending"),$(()=>o.chain),d),{isFetching:k,data:b}=Ce(q("lending"),$(()=>o.chain),d),{isFetching:B,data:C}=qe(q("lending"),$(()=>o.chain),d);return(V,D)=>(w(),S("div",ka,[t(e(Te),{overview:e(p),loading:e(_)},null,8,["overview","loading"]),t(e(Be),{ratios:e(m),"prices-oracle":e(r),loading:e(c)||e(f)},null,8,["ratios","prices-oracle","loading"]),t(e(Ve),{losses:e(b),loading:e(k)},null,8,["losses","loading"]),t(e(Ae),{losses:e(b),loading:e(k)},null,8,["losses","loading"]),t(e(Se),{deciles:e(C),loading:e(B)},null,8,["deciles","loading"]),t(e(Fe),{liqs:e(l),loading:e(s)},null,8,["liqs","loading"]),t(e(Ue),{liqs:e(n),loading:e(i)},null,8,["liqs","loading"]),t(e(De),{discounts:e(a),liqs:e(n),loading:e(f)||e(i)},null,8,["discounts","liqs","loading"])]))}}),wa=U(ba,[["__scopeId","data-v-ad6d9e1d"]]),$a={class:"dashboard"},La=T({__name:"Market.page",setup(o){const d=Z("chain"),f=Z("marketAddr"),{isFetching:v,data:r}=re(d),a=y(()=>{var n;return(n=r.value)==null?void 0:n.find(c=>c.controller===f.value)}),{crumbs:s}=se(ne());oe(a,n=>{s.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:d.value})},{id:"market",label:`Market: ${(n==null?void 0:n.name)??"?"}`}]},{immediate:!0});const{tabActive:l,tabActiveIndex:i}=Pe(["overview","trading","liquidations"],"llamalendmarket",()=>({chain:d.value,marketAddr:f.value}));return(n,c)=>{const u=ie,m=te,_=le;return w(),S("div",$a,[t(u,{loading:e(v)},null,8,["loading"]),!e(v)&&e(a)?(w(),L(_,{key:0,active:e(i),onTab:c[0]||(c[0]=p=>i.value=p.index)},{default:h(()=>[t(m,{header:"Overview"},{default:h(()=>[(w(),L(Y,null,[e(l)==="overview"?(w(),L(ga,{key:0,market:e(a),chain:e(d)},null,8,["market","chain"])):O("",!0)],1024))]),_:1}),t(m,{header:"Trading"},{default:h(()=>[(w(),L(Y,null,[e(l)==="trading"?(w(),L(ya,{key:0,market:e(a),chain:e(d)},null,8,["market","chain"])):O("",!0)],1024))]),_:1}),t(m,{header:"Liquidations"},{default:h(()=>[(w(),L(Y,null,[e(l)==="liquidations"?(w(),L(wa,{key:0,market:e(a),chain:e(d)},null,8,["market","chain"])):O("",!0)],1024))]),_:1})]),_:1},8,["active"])):O("",!0)])}}}),Ya=U(La,[["__scopeId","data-v-2192922a"]]);export{Ya as default};
