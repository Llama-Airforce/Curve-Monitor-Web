const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-apexcharts-C_KQS7J0.js","assets/vendor-BzFTHO7_.js"])))=>i.map(i=>d[i]);
var Za=Object.defineProperty;var Ya=(e,t,s)=>t in e?Za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var wt=(e,t,s)=>Ya(e,typeof t!="symbol"?t+"":t,s);import{o as h,c as A,a as u,d as T,b as L,n as U,e as F,r as Z,f as R,t as V,w as b,g as m,T as Ja,F as Y,h as re,i as ls,j as rs,k as q,u as Je,l as Ye,m as o,V as eo,p as to,q as so,s as ao,D as Ce,v as is,x as w,y as G,z as oo,A as no,B as Us,C as fe,E as cs,G as qt,H as ye,I as lo,J as ro,K as io,L as co,M as Oe,N as me,O as uo,P as he,Q as Rs,R as po,S as mo,U as W,W as Kt,X as Ee,Y as mt,Z as E,_ as O,$ as vo,a0 as ho,a1 as Os,a2 as dt,a3 as fo,a4 as _o,a5 as ee,a6 as J,a7 as ie,a8 as go,a9 as yo,aa as bo,ab as wo,ac as be,ad as Pt,ae as ko,af as us,ag as $o,ah as ce,ai as Es,aj as It,ak as Co,al as Ao,am as So,an as Lo,ao as ct,ap as ks,aq as $s,ar as ds,as as Ws,at as To,au as xs,av as Ks,aw as Cs,ax as Vo,ay as Io,az as Ns,aA as Nt,aB as qo,aC as As,aD as Po,aE as Ss,aF as Fo,aG as Bo,aH as Do,aI as Mo,aJ as Uo,aK as Ro,aL as Oo,aM as Eo,aN as Wo}from"./vendor-BzFTHO7_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();class xo{constructor(t){this.value=t}entries(){return Object.entries(this.value)}}Array.prototype.take=function(e){return this.slice(0,e)};Array.prototype.takeRight=function(e){return this.slice(-e)};Array.prototype.drop=function(e=1){return this.slice(Math.max(0,e))};Array.prototype.dropWhile=function(e){const t=this.findIndex((s,a,n)=>!e(s,a,n));return t===-1?[]:this.slice(t)};Array.prototype.zip=function(...e){return this.map((t,s)=>[t,...e.map(a=>a[s])])};Array.prototype.uniq=function(){return[...new Set(this)]};Array.prototype.uniqWith=function(e){return this.filter((t,s)=>this.findIndex(a=>e(t,a))===s)};Array.prototype.orderBy=function(e,t="asc"){const s=Array.isArray(e)?e:[e],a=Array.isArray(t)?t:[t];return[...this].sort((n,l)=>{for(let r=0;r<s.length;r++){const i=s[r],c=Array.isArray(t)?a[r]||"asc":t,d=i(n),p=i(l);if(d!==p)return(d>p?1:-1)*(c==="asc"?1:-1)}return 0})};Array.prototype.groupBy=function(e){const t=Object.groupBy(this,e);return new xo(t)};Array.prototype.sumBy=function(e){return this.reduce((t,s)=>t+e(s),0)};Array.prototype.meanBy=function(e){const t=this.sumBy(e);return this.length>0?t/this.length:0};Array.prototype.maxBy=function(e){return this.reduce((t,s)=>e(s)>e(t)?s:t)};Array.prototype.difference=function(...e){const t=new Set(e.flat());return this.filter(s=>!t.has(s))};const I=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},Ko={},No={class:"lds-ripple"};function Ho(e,t){return h(),A("div",No,t[0]||(t[0]=[u("div",null,null,-1),u("div",null,null,-1)]))}const et=I(Ko,[["render",Ho],["__scopeId","data-v-66c6ff87"]]),Qo=["inert"],zo={key:0,class:"title"},jo=T({__name:"Card",props:{title:{default:""},icon:{default:""},compact:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(e){return(t,s)=>{const a=et;return h(),A("div",{class:U(["card",{loading:t.loading}]),inert:!!t.loading},[t.loading!==null?(h(),L(a,{key:0,class:U(["loader",{loading:t.loading}])},null,8,["class"])):F("",!0),t.title||t.$slots.title||t.$slots.actions?(h(),A("div",{key:1,class:U(["card-header",{collapsible:t.collapsible}])},[Z(t.$slots,"title",{},()=>[t.title?(h(),A("div",zo,[t.icon?(h(),A("i",{key:0,class:U(["icon",t.icon])},null,2)):F("",!0),R(" "+V(t.title),1)])):F("",!0)],!0),Z(t.$slots,"actions",{},void 0,!0)],2)):(h(),A("div",{key:2,class:U(["card-no-header",{compact:t.compact}])},null,2)),u("div",{class:U(["card-body",{compact:t.compact,collapsed:t.collapsed}])},[Z(t.$slots,"default",{},void 0,!0)],2)],10,Qo)}}}),D=I(jo,[["__scopeId","data-v-b294e7b2"]]),Go={key:0,class:"fas fa-chevron-right"},Xo=T({__name:"Breadcrumb",props:{crumbs:{},active:{}},emits:["crumb"],setup(e,{emit:t}){const s=t,a=l=>{var i;const r=e.active?e.active.id===l.id:((i=e.crumbs.filter(c=>!c.hint).at(-1))==null?void 0:i.id)===l.id;return l.hint??r},n=l=>{var r;return((r=e.crumbs.at(-1))==null?void 0:r.id)===l.id};return(l,r)=>{const i=D;return h(),L(i,null,{default:b(()=>[m(Ja,{name:"fade",tag:"ul"},{default:b(()=>[(h(!0),A(Y,null,re(l.crumbs,c=>(h(),A("li",{key:c.id},[(h(),L(ls(a(c)?"span":"a"),{class:U({active:a(c),hint:c.hint}),onClick:d=>s("crumb",c)},{default:b(()=>[R(V(c.label),1)]),_:2},1032,["class","onClick"])),!n(c)||l.crumbs.length===1?(h(),A("i",Go)):F("",!0)]))),128))]),_:1})]),_:1})}}}),Zo=I(Xo,[["__scopeId","data-v-29d0e2c1"]]),Te=rs("breadcrumbStore",()=>{const e=q([]),t=q(!1);return{crumbs:e,show:t}}),Yo={class:"root"},Jo={class:"toolbar-container"},en={class:"content"},tn=T({__name:"Layout",setup(e){const t=Te(),s=Je(),a=async n=>{n.pathName&&await s.push({name:n.pathName,...n.params&&{params:n.params()}})};return(n,l)=>{const r=Ye("notifications"),i=Zo,c=Ye("router-view");return h(),A("div",Yo,[m(r,{width:600,duration:-1}),m(o(eo)),Z(n.$slots,"navigation",{},void 0,!0),u("main",null,[u("div",Jo,[o(t).show?(h(),L(i,{key:0,class:"breadcrumb",crumbs:o(t).crumbs,onCrumb:a},null,8,["crumbs"])):F("",!0),l[0]||(l[0]=u("div",{id:"toolbar",class:"toolbar-teleport"},null,-1))]),u("div",en,[m(c,null,{default:b(({Component:d})=>[m(to,{name:"fade",mode:"out-in"},{default:b(()=>[(h(),L(ls(d)))]),_:2},1024)]),_:1})])])])}}}),sn=I(tn,[["__scopeId","data-v-e4c02f1b"]]),an={class:"collapsible-inside"},on=T({__name:"Collapsible",props:{expanded:{type:Boolean,default:!0}},setup(e){return(t,s)=>(h(),A("div",{class:U(["collapsible-outside",{expanded:t.expanded}])},[u("div",an,[Z(t.$slots,"default",{},void 0,!0)])],2))}}),vt=I(on,[["__scopeId","data-v-b9d6fcca"]]),nn={class:"badge"},ln={class:"label"},rn=T({__name:"Badge",props:{label:{default:""}},setup(e){return(t,s)=>(h(),A("div",nn,[u("div",ln,V(t.label),1)]))}}),cn=I(rn,[["__scopeId","data-v-123a4fe2"]]);function ut(e){return!!e.children}function Ht(e){return!!e.to}function un(e){return!!e.url}function dn(e){return e!=null}function pn(e){function t(v){return v<10?"0"+v.toString():v.toString()}const s=e.getTime()-new Date().getTime();if(s<=0)return"00:00:00:00";const a=1e3,n=a*60,l=n*60,r=l*24,i=Math.floor(s/r),c=Math.floor(s%r/l),d=Math.floor(s%l/n),p=Math.floor(s%n/a);return t(i)+":"+t(c)+":"+t(d)+":"+t(p)}function Ke(e,t=0,s=".",a=","){const n=isFinite(+e)?+e:0,l=isFinite(+t)?Math.abs(t):0,r=typeof a>"u"?",":a,i=typeof s>"u"?".":s,c=function(p,v){const g=Math.pow(10,v);return Math.round(p*g)/g},d=(l?c(n,l):Math.round(n)).toString().split(".");return d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(d[1]||"").length<l&&(d[1]=d[1]||"",d[1]+=new Array(l-d[1].length+1).join("0")),d.join(i)}function H(e,t){const s=Math.abs(e);return t==="percentage"?"%":t==="dollar"?s>=1*10**12?"t":s>=1*10**9?"b":s>=1*10**6?"m":s>=1*10**3?"k":"":""}function Q(e,t,s){const a=Math.abs(e);return t===1/0?e.toLocaleString():s==="percentage"?Ke(e,t):s==="dollar"?a>=1*10**12?Ke(e/10**12,t):a>=1*10**9?Ke(e/10**9,t):a>=1*10**6?Ke(e/10**6,t):a>=1*10**3?Ke(e/10**3,t):Ke(e,t):e.toString()}function Re(e){return Number(e.toFixed(e>100?0:2)).toLocaleString()}function Ue(e,t){return parseFloat(ao(e,Number(t)))}function Hs(e,t){const s=Number(t),a=Number.isInteger(e)?e.toString():e.toFixed(s);return so(a,s)}function ps(e,t){const s={...e};for(const a in t)Array.isArray(t[a])?s[a]=[...t[a]]:typeof t[a]=="object"&&t[a]!==null?s[a]=ps(s[a],t[a]):s[a]=t[a];return s}async function Qs(e,t=0,s=1e3){const a=await e(t,s),n=await(a.length>=s?Qs(e,t+1,s):Promise.resolve([]));return a.concat(n)}function At(e,t){return(Array.isArray(e)?e:[e]).some(a=>t.path.startsWith(a))}function ht(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}const zs="0x9bc7c6ad7e7cf3a6fcb58fb21e27752ac1e53f99",mn="0xf939e0a03fb07f59a73314e73794be0e57ac1b4e",js="0x696B5D296a8AeF7482B726FCf0616E32fe72A53d",Gs="0x2f50d538606fa9edd2b11e2446beb18c9d5846bb",Ne="0xe478de485ad2fe566d49342cbd03e49ed7db3356",vn={laf:"https://api.llama.airforce",cb:void 0,cm:"https://api2.curvemonitor.com",pm:void 0,"pm-lrt":void 0};class hn extends Error{constructor(t,s){super(s),this.status=t}}async function fn(e,t,s){try{const a=await fetch(e,{method:t?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),signal:s});if(a.ok)return a;throw new hn(a.status,`Fetch error ${a.status} for URL: ${e}`)}catch(a){throw a instanceof Error?a:new Error("Unknown fetch error")}}async function _n(e,t,s){return await(await fn(e,t,s)).json()}class Ae{async fetch(t,s,a){return _n(t,s,a)}}class Xs extends Ae{constructor(s){super();wt(this,"host");this.host=s}async getHost(){return await this.host}}class gn extends Ae{async getPrice(t){const s=`ethereum:${t}`;return this.fetch(`https://coins.llama.fi/prices/current/${s}`).then(a=>a.coins[s])}async getPrices(t){const s=t.map(a=>`ethereum:${a}`).join(",");return this.fetch(`https://coins.llama.fi/prices/current/${s}`).then(a=>a.coins)}}function St(e){return e instanceof Error?e.message.includes("Exchange resulted in fewer coins than expected")||e.message.includes("Slippage")?"Transaction failed because slippage was set too low. A slight increase of one or two percent could help, but don't make it too high to ensure your protection. We also highly recommend using MEVBlocker for extra safety.":e.message.includes("HTTP request failed")&&e.message.includes("eth_call")?"The RPC returned an error, probably a rate-limit. Try again layer or try a different wallet.":e.message:JSON.stringify(e)}async function Zs(e,t){e.value=!0;try{return await t()}catch(s){Ce({text:St(s),type:"error"});return}finally{e.value=!1}}const Qt={};function yn(e="$llama$"){Qt[e]||(Qt[e]=0);const t=++Qt[e];return e==="$llama$"?`${t}`:`${e}${t}`}const bn={key:0},wn=["href"],kn={class:"nav-link-container"},$n={key:1},Cn={class:"nav-link-container"},An={class:"left"},Sn={key:0,class:"icon"},Ln={class:"right"},Tn={key:2},Vn={class:"nav-link-container"},In={class:"nav-link-container"},qn={class:"left"},Pn={key:0,class:"icon"},Fn={class:"right"},Bn=T({__name:"MenuItem",props:{item:{}},emits:["navigated"],setup(e,{emit:t}){const s=t,a=is(),n=q(!0),l=w(()=>Ht(e.item)?[e.item]:ut(e.item)?e.item.children:[]),r=()=>{ut(e.item)&&e.item.children.filter(p=>At(p.to,a)).length>0&&(n.value=!0)},i=d=>typeof d.label=="string"?d.label:d.label();G(()=>e.item,d=>{ut(d)&&(n.value=!d.initCollapsed),r()},{immediate:!0}),G(()=>a.fullPath,()=>{r()},{immediate:!0});const c=()=>{n.value=!n.value};return(d,p)=>{const v=cn,g=Ye("router-link"),_=vt;return h(),A(Y,null,[o(un)(d.item)?(h(),A("li",bn,[u("a",{class:"nav-link root",href:d.item.url,target:"_blank"},[u("div",kn,V(d.item.label),1)],8,wn)])):o(Ht)(d.item)?(h(),A("li",$n,[m(g,{to:d.item.to,class:U(["nav-link root",{"router-link-active":o(At)(d.item.to,o(a))}]),onClick:p[0]||(p[0]=f=>s("navigated"))},{default:b(()=>[u("div",Cn,[u("div",An,[d.item.icon?(h(),A("div",Sn,[u("i",{class:U(d.item.icon)},null,2)])):F("",!0),R(" "+V(i(d.item)),1)]),u("div",Ln,[d.item.tag?(h(),L(v,{key:0,label:d.item.tag},null,8,["label"])):F("",!0)])])]),_:1},8,["to","class"])])):o(ut)(d.item)?(h(),A("li",Tn,[u("a",{class:"nav-link root",onClick:c},[u("div",Vn,[R(V(d.item.label)+" ",1),u("i",{class:U(["expander fas fa-chevron-up",{expanded:o(n)}])},null,2)])])])):F("",!0),o(ut)(d.item)?(h(),L(_,{key:3,class:"items",expanded:o(n)},{default:b(()=>[u("ul",null,[(h(!0),A(Y,null,re(o(l),f=>(h(),A("li",{key:i(f)},[o(Ht)(f)?(h(),L(g,{key:0,to:f.to,class:U(["nav-link",{"router-link-active":o(At)(f.to,o(a))}]),onClick:p[1]||(p[1]=y=>s("navigated"))},{default:b(()=>[u("div",In,[u("div",qn,[f.icon?(h(),A("div",Pn,[u("i",{class:U(f.icon)},null,2)])):F("",!0),R(" "+V(i(f)),1)]),u("div",Fn,[f.tag?(h(),L(v,{key:0,label:f.tag},null,8,["label"])):F("",!0)])])]),_:2},1032,["to","class"])):F("",!0)]))),128))])]),_:1},8,["expanded"])):F("",!0)],64)}}}),Dn=I(Bn,[["__scopeId","data-v-42a8b6bb"]]),Mn=T({__name:"Menu",props:{pages:{default:()=>[]}},emits:["navigated"],setup(e,{emit:t}){const s=t,a=is(),n=w(()=>e.pages.find(i=>At(i.titleRoute,a))),l=w(()=>{var i;return((i=n.value)==null?void 0:i.menuItems)??[]}),r=i=>typeof i.label=="string"?i.label:i.label();return(i,c)=>(h(),A("nav",null,[(h(!0),A(Y,null,re(o(l),d=>(h(),A("ul",{key:r(d)},[m(Dn,{item:d,onNavigated:c[0]||(c[0]=p=>s("navigated"))},null,8,["item"])]))),128))]))}}),Un=I(Mn,[["__scopeId","data-v-085b540a"]]);function Ft(){const{address:e,isConnected:t,chainId:s}=oo(),a=no(),n=w(()=>a.data.value&&e.value?e.value.toLocaleLowerCase():void 0);return{isConnected:t,chainId:s,address:n}}function we(e,t=6){if(!e)return"0x000...000";const s=t/2+2,a=e.length-t/2;return`${e.substring(0,s)}...${e.substring(a)}`}function Lt(e,t=6){if(!e)return"0x000";const s=Math.min(e.length,t+2);return e.length>s?`${e.substring(0,s)}...`:e}const Rn=T({__name:"Button",props:{icon:{default:""},value:{default:""},primary:{type:Boolean,default:!1},chainId:{}},emits:["click"],setup(e,{emit:t}){const s=t,{chainId:a}=Ft(),{switchChain:n}=Us(),l=r=>{if(r.stopImmediatePropagation(),e.chainId){if(a.value===void 0){Ce({text:"Wallet not connected",type:"error"});return}a.value!==e.chainId&&n({chainId:e.chainId})}s("click")};return(r,i)=>(h(),A("button",{class:U({primary:r.primary}),onClick:l},[Z(r.$slots,"default",{},()=>[r.icon?(h(),A("i",{key:0,class:U(["icon",[r.icon,{noValue:!!r.value}]])},null,2)):F("",!0),R(" "+V(r.value),1)],!0)],2))}}),ve=I(Rn,[["__scopeId","data-v-569ef689"]]),On="/assets/crv-CKEIQw2g.png",En="/assets/hat-D1qfnSjv.png",Wn={},xn={class:"logo"};function Kn(e,t){return h(),A("div",xn,t[0]||(t[0]=[u("div",{class:"visual"},[u("img",{src:On}),u("img",{src:En})],-1),u("span",null,"curve.monitor",-1)]))}const Nn=I(Wn,[["render",Kn],["__scopeId","data-v-757199dd"]]),Hn={class:"header"},Qn={class:"buttons"},zn=T({__name:"Header",emits:["toggle-expansion","navigated"],setup(e,{emit:t}){const s=t;return(a,n)=>{const l=Ye("router-link"),r=ve;return h(),A("div",Hn,[m(l,{class:"logo",to:"/",onClick:n[0]||(n[0]=i=>s("navigated"))},{default:b(()=>[m(Nn,{class:"logo"})]),_:1}),u("div",Qn,[m(r,{icon:"fas fa-bars",onClick:n[1]||(n[1]=i=>s("toggle-expansion"))})])])}}}),jn=I(zn,[["__scopeId","data-v-52ac1053"]]),Gn={key:0,class:"modal"},Xn={class:"modal-popup"},Zn=T({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const s=t,a=n=>{n.code==="Escape"&&s("close")};return fe(()=>{document.addEventListener("keydown",a)}),cs(()=>{document.removeEventListener("keydown",a)}),G(()=>e.show,n=>{document.body.style.overflow=n?"hidden":""}),(n,l)=>(h(),L(qt,{to:"body"},[n.show?(h(),A("div",Gn,[u("div",{class:"modal-mask",onClick:l[0]||(l[0]=r=>s("close"))}),u("div",Xn,[Z(n.$slots,"default",{},void 0,!0)])])):F("",!0)]))}}),Bt=I(Zn,[["__scopeId","data-v-dcff4709"]]),Yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTM0A1t6AAACSklEQVRIS7WVTUhUURTHT4sWgZS4aNFGSgqTmUqiKNAoFMWhqbQ2gX1BGdKUChW1EEqiULEsDNSFOBJiaZHQ9EE1pGik6DAzYYsUochFoEExCIGPf/e8e4d5b+ZJb4bxwm/x3j3n/O69j3cPidEomF4hOgU0/Wec8DeUZoIEUfuXLuAXnVcJBx2Ery8I+JIac+8JblGjpVo+mwQ8ceUI4e6FWMLPYXvwajm+t4FQVUQozrEQ8MpbPXJ7PFldStiTtwWufQX/xZFJ+D1G0KYID2sJ4QELAb+IwsWv11yE3THs98OpJMY6loLvbwkF2xwqVY6O+62oO3/OxLVLHkQiERUBdLe349YZG4JvbwgVJcUqDQhOTmB/NmGky0yL+FYsio6Xg4NoOJ2CYGx0FB6XOZEJ9ImjPHVCRSUp2JSVibbmJp3aqrOWgk89KQoWJwneejPhp3LuQQ1hcxZhV85q7MjOQCgQUOUB3/Nn9gTLwcXLiwqhaZoqGRsL8/PYup4QFMdmzLEt+PGOkL9xg6n4x6EhPO7xos/r1YuPP0rMsy2Y8REqD7tVaWAqHIJznfwxmeiPFU/KgpEPflyusI41kpRg7SrCyaPlOgd25qdXsBgg+O6ZmX1lHWvEtoB3kCF2cNzt0inc7kj/ERm/AV9uSQu4WfTeJCyJKzc+kAVriHCsrERnb16upUATPLkdOz6T4JBTNos2cZ/HJy59lgswEplIjBu4I45x9zINhzsZT4T6ExPtMvta1rhRKZ9jAtXy0k1U0CFYWBmo/x+ShmnKzYg0NQAAAABJRU5ErkJggg==",Jn={key:1,src:Yn},el=T({__name:"Tooltip",props:{icon:{default:""}},emits:["show"],setup(e,{emit:t}){const s=t,a=q(!1),n=ye("trigger"),l=ye("content");G(a,p=>{s("show",p),p&&lo(()=>{d()})});let r;function i(){r&&(clearTimeout(r),r=void 0),a.value=!0}function c(){r&&clearTimeout(r),r=setTimeout(()=>{a.value=!1,r=void 0},50)}fe(()=>{d(),window.addEventListener("resize",d)}),cs(()=>{window.removeEventListener("resize",d)});function d(){if(!n.value||!l.value)return;const p=n.value.getBoundingClientRect(),v=l.value.getBoundingClientRect(),g=14,_=g,f=window.innerHeight-v.height-g,y=Math.min(Math.max(_,p.top-v.height-g),f),k=g,C=window.innerWidth-v.width-g,S=Math.min(Math.max(k,p.left+p.width/2-v.width/2),C);l.value.style.top=`${y}px`,l.value.style.left=`${S}px`}return(p,v)=>(h(),A("div",{class:U(["tooltip",{show:o(a)}])},[u("div",{ref:"trigger",class:"trigger",onMouseover:i,onMouseleave:c,onTouchstart:i,onTouchend:c},[Z(p.$slots,"trigger",{},()=>[p.icon?(h(),A("i",{key:0,class:U(p.icon)},null,2)):(h(),A("img",Jn))],!0)],544),u("div",{ref:"content",class:"content",onMouseover:i,onMouseleave:c,onTouchstart:i,onTouchend:c},[Z(p.$slots,"default",{},void 0,!0)],544)],2))}}),ms=I(el,[["__scopeId","data-v-4ff8e0d7"]]),tl="/assets/injected-DW80ouY-.webp",sl="/assets/rabby-CG__llS3.svg",al="/assets/walletconnect-BCBhrtde.webp",ol="/assets/coinbase-CsqSq8Nj.webp",nl="data:image/webp;base64,UklGRuIJAABXRUJQVlA4INYJAABQTwCdASqQAZABPkkgi0WioYlv2BQCQllbuFzQQgaf+g1rnpf5Gfur/ouv54K8GftNl2/Iv+A/Lv+3/Az1Ffcz7gf6Qf4LqV+YD+Z/2j/X/5v3gP83/o/ap6AH6q9aL6AH6semp+ynwiftr+y3s0/f/sx/jj/K9rf94xtMRTr//O/0r3AdkOwdvIcINKVNH8k/1iFbtMZi3As2twLNrcCza3As2twLNrcCza3As2twLNrcCza3As2tv86K1Sn/lbircVbircVbircVvo+IuhKkUafH59MV0gaw7C4+BzmPvHSW19fTgrGhKkSavYZD9pi/odhBF0JUijT47/hKMBg+fEb2gVzAs2tv88VcYiCllb49nsYQU1OCoBuAYWxJTK6cAvmfF6ToV7TGYkChDXyhoIkIRefRbJzvwLNrcCgnFP2Q/qkUafZFGn2P2US1ujrAirQMy1GK9Rjtp3BWNCVIkguMYjQL8M0GC7rHYbpNhf7Pw/cNK9pjMW4InVWnB4X/Kux77oDrFRGA+nT9H3cLoHzKdTqvBI0ZmiFTZzgrGhe7JLHUqtRM0GoBm2fCx0NugEP4Rn0lYykUafZFEMb9XAMGmNg8NzQm1BviRj+a6sMp+fEqfnxKtY/jPIfd/PiVPz4lT89GHSxN0ChpiKYqCfZSKNPr0Cy/vRpI4ZobI5q9FrQ7HbiAYSfscvCdtHiI1LF0afZFEPlvIHHNrbK+oZB6WMmD/NwLNpR9oFY0HwmFm1uBZtZ4tcDAyFpj3As2s8cdym6UbW4Fm1uBPk2pFmhsjmr0Xk0kBP/PGNCVIo0+yKNPsijT7Io0+yKNPsijT7Io0+yKNPsijT7Io0+yKNNwAP7+Aa32O9NQP//+aiQ85uGbqX8qAMi2gBYHvABBejSCKVRwlwknSwekmWw/oN2DsM0EyRQhkdL8kDDzLGrtwD6vLGeABMYegTk2Uhde+N7ONK/joLprkk/CDZQKaf54kh4UalPgPeBRnphxNDfOSDkDVCjac4840+IEuJYs5IkjOs6sImPzP0b8iCttGKBb+kij60c3ifxYrl/3Xv0hjWIIbeyJ2o61OrdedMz7G8Y+V4d9G9FLwH4MaY8Y8GCnyJMfxZ/ULhYb9VE+x6juTHAyXvX0FlIEFkNBTxfTwLvKkP+0UCZqgugNIBLQog7iPFBonuG3MFiSKD6lVo+qTy4vaslgcrz/GSqAwXnyPxj6CxBfLlZb0ij+0uKoaIGm9ZUEFPEaXdz+BeVqg1I/os1mC7iKu5/rbDGjzB6c3akCTpY0OHZ4wR5PSRELDEuHkb6phpM+RGlLuVN8v26i5wH2ak8KmhBqp3SL8shBam1arJwsvNX69fdGsJSjMBX5NQZZCENAuE9vUvdMwSfJz9D3nS3aDmtVmxKjE6qy0Qsdtpcp0jWe1gU46CQbpsIDYqafR7LzcRxMTEoEGE5H8xdsFKPU/KG3jtjtylNoYQiqmdXcQokdTTxrjLzdzwWB9RiSKFM5v22/GI09Yr8fYSBKmGyQbaBUor/bu578Nm9OI5RhfMKnO09YxqD3x0/cTv53sZVEU7c/jELa5JY+uFXVME91SWsLQOTI63bx+3BV8gt7fCiHffGMMr4/SLihamFOtV+QYZUWHd5XuLXKEQTNG9GCtDao7iJVnWLlxqfnhP5kn54xJCx/gADSvAEDQwIomE3NQANF6/ZkVDu/MVcXcHOw8c3bGk+vuhT6f3Tr4NnUPPpa8+hG7YsyedNHK7l4qjvRnFSDhXEhuLq0Ah9hv8Sdlo1R6Sn/Ag112n1U82sWkpSk5IU6PdNFfaBXK8GR7C2Nm/KMWhnQ9pELP9TVr2XpJfuLJOB4Ttqh2aro90aus+ZPOyTlimgP8jVgUzy5hdO9HMwCPjxHGeyTJKQlxScBGPnU1PjBEgEyOWts0CE8V9x7E1+ee3gjyOCiDLhnYELTSKgdhhCbsf6NMjutWZ5XL1O/+Dd06WT62e38YKgGhhGBI07PXacDqA/XTdThkPYNCOFF26Dz2HMCt2/9Rel4gnmQKJjVIQLnEZeF2Nka2MsRuKmjNAAvaWTbVZe91xRYaCd2ml43cOr1YfxmlJ9hCpBPUZIkE6u07L8owldqs4TigKOZK0I7sng62s8U95/t3/oo6sA2eUUmedjAefrskjQjH5qsbhLJyesMEv9jxGV+GOtLyrtsxaWkPNcHBXXj3iZYGxZN6nIcLqaLlHPLPMnZjQQ8BojhDnKHz1lXMfMEHFe4hkgIyYE4KANL9hLLuv69qnxteZIG9m41ampmUsQlEpx3GFeIMX682UDHk1MHDLGoacoeaYSvz5rZF/WWYAlwl0nsB6gkKRihBrxfbKRJWbOQkodXo9nFAHN55srKEDIkskmsFAhtB8JlWPNfjOILKEFwQ2+LTmoG1KLs/Z6ltBt5TvPtEPzcGsLhbjXYk9Mnx7fWMkjrXZ+E0zX38b3zr9OjFrbOf+GZeo0PLtD+ZxcjEf5XqHI+ptX1Sj9yt27SwlUh2Pc9+QHOag7bIYxKtmp8wV39OP8RJb8Ag5x7IAXkgCSOxdcjFb0PKVaxWKyHQJf68yCmeyzp5vGQ/z1Mxgo8CmZl3OKn0onEfx2GWQgRCFQd7t5jx6j0JEET/agi2LjNP2FvxLe3d+6VlTrs+AGqrBPrK1v4bLgqvYwdPUgwDkeJ1gY/y+d4AuoSo8tkciHJQ/RQ//G0yHoqE/HoH6QfVTaZaXR68fqHs6uCDKayag/cIlpHpr31w1QBHu17ohviYmrFjwJ16jGU5hvY+wfq2w1s20oI9emMn0GkxN5IYpm57T8e0ntXyu1xKfsokhV+HWRUF3uC+mZHMVKCT194/Gz2DVqRfi3W8wvYwilf/bWjHFksIGs3HEaW+hESm6ciT3tfLhohZB9NnVtHS/aUk39m9cNCfFx/zzHzqZXOfLrSs0+rfugDRzcz7/vP93ksdi0Ks8xLNInhwkKzmmG8Dbyvw9p1osUJ/jxCjQtG1DxDBJIkD8AWIHnzPVugs+uZ47tknMAEfstIKysdwA/y3uep1Nfl2IZtm6NgIEZfQbTiEbWeXLX5DVgN+wG8TRnpGvH5Bkiuh1OCkaVtDapxLkFplC11AFeIPMSI2lwFalrsCGHC0obfjxkqbNcF3fPXO2KKbMLYG1ub7jWhiwhjMLPPPp2bzQPV89uu2MW0ZwcPPg7FzufEJPxJ/0RNeHAtpWafTVSeYerO76P+whWDfkOsC0UpaqMIceALU2CB+bc66l6aRePCvq+JW5q6SQYanHeHkhKZKiShTc7zKkksZXIyuRlcjKaUUkKEFrCTYCBipRk3lgB8IZ24X/CwgQAAAAAAAAAA",ll={class:"buttons"},rl={class:"connectors-body"},il={class:"connectors"},cl=["src"],ul={key:1,class:"empty"},dl={class:"name"},pl=T({__name:"WalletConnectButton",setup(e){const{connect:t}=ro(),s=io(),a=["injected","walletConnect","coinbaseWalletSDK","safe"],n=w(()=>s.value.filter(d=>a.includes(d.id))),l=q(!1);function r(d){switch(d.id){case"injected":return tl;case"walletConnect":return al;case"coinbaseWalletSDK":return ol;case"safe":return nl;case"io.rabby":return sl;default:return""}}function i(d){return d.id==="injected"?"Browser Extension":d.name}function c(d){t({connector:d}),l.value=!1}return(d,p)=>{const v=ve,g=D,_=Bt;return h(),A("div",ll,[m(v,{class:"button",primary:!0,onClick:p[0]||(p[0]=f=>l.value=!0)},{default:b(()=>p[2]||(p[2]=[R(" Connect Wallet ")])),_:1}),F("",!0),m(_,{show:o(l),onClose:p[1]||(p[1]=f=>l.value=!1)},{default:b(()=>[m(g,null,{default:b(()=>[u("div",rl,[p[5]||(p[5]=u("div",{class:"title"},"Connect Your Wallet",-1)),u("div",il,[(h(!0),A(Y,null,re(o(n),f=>(h(),A("div",{key:f.id,class:"connector"},[m(v,{onClick:y=>c(f)},{default:b(()=>[r(f)?(h(),A("img",{key:0,src:r(f)},null,8,cl)):(h(),A("div",ul)),u("div",dl,V(i(f)),1)]),_:2},1032,["onClick"])]))),128))])])]),_:1})]),_:1},8,["show"])])}}}),ml=I(pl,[["__scopeId","data-v-cae4603a"]]),vl={class:"wallet"},hl={key:0},fl={key:1},_l={key:0,class:"info"},gl=T({__name:"Wallet",props:{labelPleaseConnect:{}},setup(e){const{disconnect:t}=co(),{isConnected:s,chainId:a,address:n}=Ft(),{switchChain:l}=Us(),r=w(()=>a.value===Oe.id),i=()=>{l({chainId:Oe.id})};return(c,d)=>{const p=ve;return h(),A("div",vl,[o(s)?(h(),A("div",hl,[o(r)?(h(),L(p,{key:1,class:"disconnect",icon:"fas fa-check",value:o(we)(o(n)),onClick:o(t)},null,8,["value","onClick"])):(h(),L(p,{key:0,class:"change",value:"Change Network",primary:!0,onClick:i}))])):(h(),A("div",fl,[m(ml),c.labelPleaseConnect?(h(),A("span",_l,V(c.labelPleaseConnect),1)):F("",!0)]))])}}}),yl=I(gl,[["__scopeId","data-v-b4435a8f"]]),bl={class:"selected"},wl={class:"item"},kl={key:0,class:"label"},$l=["onClick"],Cl=T({__name:"Select",props:{options:{},selected:{},label:{}},emits:["input"],setup(e,{emit:t}){const s=t,a=q(!1);return(n,l)=>(h(),A("div",{tabindex:"0",class:U(["select",{open:o(a)}]),onBlur:l[0]||(l[0]=r=>a.value=!1),onClick:l[1]||(l[1]=me(r=>a.value=!o(a),["stop"]))},[u("div",bl,[Z(n.$slots,"item",{item:n.selected},()=>[u("div",wl,V(n.selected),1)],!0),n.label?(h(),A("div",kl,V(n.label),1)):F("",!0)]),u("div",{class:U(["items",{open:o(a)}])},[(h(!0),A(Y,null,re(n.options,(r,i)=>(h(),A("div",{key:i,class:"item",onClick:me(c=>{a.value=!1,s("input",r)},["stop"])},[Z(n.$slots,"item",{item:r},()=>[R(V(r),1)],!0)],8,$l))),128))],2),l[2]||(l[2]=u("div",{class:"chevrons"},[u("i",{class:"fas fa-chevron-up"}),u("i",{class:"fas fa-chevron-down"})],-1))],34))}}),tt=I(Cl,[["__scopeId","data-v-3315a9d1"]]),ze={blue:"#5a74f6",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#292929",level1:"#292929",level2:"#3c3c3c",level3:"#535353",level4:"#6a6a6a",level5:"#949494",level6:"#aea8af",text:"#ffffff"},Al=[ze.blue,ze.yellow,ze.green,ze.red,ze.purple],je={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"},Sl=[je.blue,je.yellow,je.green,je.red,je.purple],Ge={blue:"#1a8df9",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f5f5f5",level1:"#fafafa",level2:"#f2f2f2",level3:"#ebebeb",level4:"#a1a1a1",level5:"#27272a",level6:"#212124",text:"#333333"},Ll=[Ge.blue,Ge.yellow,Ge.green,Ge.red,Ge.purple];function Tt(e){switch(e){case"chad":return Ge;case"light":return je;default:return ze}}function Tl(e){switch(e){case"chad":return Ll;case"light":return Sl;default:return Al}}const N=rs("settingsStore",()=>{const e=q("light"),t=w(()=>({colors:Tt(e.value),colorsArray:Tl(e.value)}));return{themeId:e,theme:t}}),Vl={class:"theme"},Il={class:"label"},ql={class:"colors"},Pl="theme",Fl=T({__name:"SelectTheme",setup(e){const t=[{id:"chad",colors:Tt("chad")},{id:"dark",colors:Tt("dark")},{id:"light",colors:Tt("light")}],s=N(),n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",l=uo(Pl,t.find(i=>i.id===n)??t[0],void 0,{serializer:{read:i=>t.find(c=>c.id===i)??t[0],write:i=>i.id}});fe(()=>{r(l.value)});const r=i=>{l.value=i,window.document.documentElement.setAttribute("data-theme",i.id),s.themeId=i.id};return(i,c)=>{const d=tt;return h(),L(d,{class:"direction-up",options:t.map(p=>p),selected:o(l),onInput:r},{item:b(({item:p})=>[u("div",Vl,[u("div",Il,V(p.id),1),u("div",ql,[u("div",{class:"color",style:he({"background-color":p.colors.backgroundColor})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.level1})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.level2})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.blue})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.yellow})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.green})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.red})},null,4),u("div",{class:"color",style:he({"background-color":p.colors.purple})},null,4)])])]),_:1},8,["options","selected"])}}}),Bl=I(Fl,[["__scopeId","data-v-266dc065"]]),Dl={class:"bottom"},Ml={class:"buttons"},Ul={href:"https://twitter.com/0xAlunara",target:"_blank"},Rl=T({__name:"Bottom",setup(e){const t=Je();return(s,a)=>{const n=ve;return h(),A("div",Dl,[u("div",Ml,[u("a",Ul,[m(n,{icon:"fab fa-twitter"})]),m(n,{icon:"fas fa-code",onClick:a[0]||(a[0]=l=>o(t).push("/code"))})]),m(Bl,{class:"themes"}),m(yl)])}}}),Ol=I(Rl,[["__scopeId","data-v-16b6c341"]]),vs=()=>rs("pageStore",()=>{const e=q([]),t=q([]);return{pages:e,routes:t}})(),El=T({__name:"Navigation",emits:["navigated"],setup(e,{emit:t}){const s=t,a=vs(),n=q(!1),l=()=>{n.value=!1,s("navigated")};return(r,i)=>{const c=Un,d=vt;return h(),A("div",{class:U(["menu-desktop",{expanded:o(n)}])},[m(jn,{onToggleExpansion:i[0]||(i[0]=p=>n.value=!o(n)),onNavigated:l}),m(d,{class:"menu-content",expanded:o(n)},{default:b(()=>[m(c,{pages:o(a).pages,onNavigated:l},null,8,["pages"]),m(Ol,{onNavigated:l})]),_:1},8,["expanded"])],2)}}}),Wl=I(El,[["__scopeId","data-v-b8163268"]]),xl=T({__name:"App",setup(e){const t=Te(),s=is();return G(()=>s.fullPath,a=>{["/platform/crvusd","/platform/lending","/platform/pools"].some(l=>a.startsWith(l))||(t.show=!1)}),(a,n)=>{const l=sn;return h(),L(l,null,{navigation:b(()=>[m(Wl,{class:"navigation"})]),_:1})}}}),Kl=I(xl,[["__scopeId","data-v-20311da9"]]),Nl="/assets/404-DGbqGNxT.png",Hl={},Ql={class:"not-found"},zl={class:"not-found-container"};function jl(e,t){const s=D;return h(),A("div",Ql,[u("div",zl,[m(s,null,{default:b(()=>t[0]||(t[0]=[R(" Where are you going, pilot? Page not found, please return home fren. ")])),_:1}),t[1]||(t[1]=u("img",{src:Nl},null,-1))])])}const Gl=I(Hl,[["render",jl],["__scopeId","data-v-b15b1b06"]]),Xl={key:0,class:"expander"},Zl={key:1,class:"expander"},Yl={class:"row-details"},Jl=T({__name:"TableRow",props:{data:{},selected:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},expandSide:{default:"right"}},emits:["click"],setup(e,{emit:t}){const s=t,a=Rs(),n=w(()=>{var i;const r=a["row-details"];if(r){const c=(i=r()[0])==null?void 0:i.children;if(c)return Array.isArray(c)&&c.length>0}return!1}),l=()=>{s("click",e.data)};return(r,i)=>{const c=vt;return h(),A("div",{class:U(["row",{expanded:r.expanded}])},[u("div",{class:U(["row-data",{active:r.selected,expandable:o(n),"has-data":!!r.data}]),onClick:l},[r.data&&o(n)&&r.expandSide==="left"?(h(),A("div",Xl,i[0]||(i[0]=[u("i",{class:"fas fa-chevron-up"},null,-1)]))):F("",!0),Z(r.$slots,"row",{},void 0,!0),r.data&&o(n)&&r.expandSide!=="left"?(h(),A("div",Zl,i[1]||(i[1]=[u("i",{class:"fas fa-chevron-up"},null,-1)]))):F("",!0)],2),r.data?(h(),L(c,{key:0,expanded:r.expanded},{default:b(()=>[u("div",Yl,[Z(r.$slots,"row-details",{},void 0,!0)])]),_:3},8,["expanded"])):F("",!0)],2)}}}),er=I(Jl,[["__scopeId","data-v-78ed21ee"]]),tr={class:"table"},sr=["onClick"],ar={key:1,class:"no-data"},or=T({__name:"Table",props:{columns:{default:()=>[]},rows:{default:()=>[]},rowsMin:{default:null},selectedRow:{default:null},expanded:{default:()=>[]},expandSide:{default:"right"},sorting:{default:()=>({order:"asc"})},icon:{}},emits:["selected","sortColumn"],setup(e,{emit:t}){const s=t,a=w(()=>{if(e.rowsMin===null)return[];const p=Math.max(0,e.rowsMin-e.rows.length);return new Array(p)}),n=w(()=>e.columns.map(p=>typeof p=="string"?{id:p,label:p}:p)),l=p=>{p&&s("selected",p)},r=p=>{const v=p+1;return!!(e.rows[p+1]&&e.rows.findIndex(f=>f===e.selectedRow)===v)},i=p=>e.sorting.column===p.id&&e.sorting.order==="asc",c=p=>e.sorting.column===p.id&&e.sorting.order==="desc",d=p=>{if(!p.sort)return;const v=p.id===e.sorting.column&&e.sorting.order==="asc"?"desc":"asc";s("sortColumn",p.id,v)};return(p,v)=>{const g=er;return h(),A("div",tr,[p.columns.length>0?(h(),L(g,{key:0,class:U({"selected-below":r(-1)})},{row:b(()=>[(h(!0),A(Y,null,re(o(n),_=>(h(),A("div",{key:_.id,class:U(["column-header",{sortable:_.sort,sorting:_.sort&&p.sorting.column===_.id,[_.align||""]:!!_.align}]),onClick:f=>d(_)},[u("span",null,V(_.label),1),_.sort?(h(),A("i",{key:0,class:U(["sorting-arrow fa fa-caret-right",{asc:i(_),desc:c(_)}])},null,2)):F("",!0)],10,sr))),128))]),_:1},8,["class"])):F("",!0),(h(!0),A(Y,null,re(p.rows,(_,f)=>(h(),L(g,{key:_,data:_,class:U({"selected-below":r(f)}),selected:p.selectedRow===_,expanded:p.expanded.includes(_),"expand-side":p.expandSide,onClick:l},{row:b(()=>[Z(p.$slots,"row",{item:_},void 0,!0)]),"row-details":b(()=>[Z(p.$slots,"row-details",{item:_},void 0,!0)]),_:2},1032,["data","class","selected","expanded","expand-side"]))),128)),(h(!0),A(Y,null,re(o(a),_=>(h(),L(g,{key:_}))),128)),!p.rowsMin&&(!p.rows||p.rows.length===0)?(h(),A("div",ar,[Z(p.$slots,"no-data",{},()=>[v[0]||(v[0]=R("No data"))],!0)])):F("",!0),p.$slots["row-aggregation"]&&p.rows.length>0?(h(),L(g,{key:2,class:"aggregation"},{row:b(()=>[Z(p.$slots,"row-aggregation",{},void 0,!0)]),_:3})):F("",!0)])}}}),ae=I(or,[["__scopeId","data-v-c77bd45e"]]),nr={class:"code"},lr=["href"],rr=["href"],ir=["href"],cr=T({__name:"Code.page",setup(e){const s=[{name:"veFunder",contracts:[{contract:js,description:"Gauge Factory"},{contract:Gs,description:"Gauge Controller"}]}],a=[{name:"Llama Airforce",url:"https://github.com/Llama-Airforce/Llama-Airforce",description:"This website's front-end, excluding the Union"},{name:"Phil's CurveMonitor",url:"https://github.com/phil-svg/CurveMonitor",description:"Phil's code for CurveMonitor"},{name:"Subgraphs",url:"https://github.com/convex-community/convex-subgraph",description:"The Graph subgraphs related to Curve, Convex, Votium and more"},{name:"Tickets",url:"https://github.com/orgs/curve-data-analytics/projects",description:"Tickets"}],n=[{name:"Curve Prices API",url:"https://prices.curve.fi/feeds-docs",description:"Curve utility API co-developed by CurveMonitor"},{name:"LAF / Curve API (Legacy)",url:"https://api-py.llama.airforce/curve/v1/docs",description:"Custom analytics API"}],l=r=>{switch(r.network){case"arbitrum":return r.gnosis?`https://app.safe.global/home?safe=arb1:${r.contract}`:`https://arbiscan.io/address/${r.contract}`;case"ethereum":default:return r.gnosis?`https://app.safe.global/home?safe=eth:${r.contract}`:`https://etherscan.io/address/${r.contract}`}};return(r,i)=>{const c=ae,d=D;return h(),A("div",nr,[m(d,{title:"Repositories"},{default:b(()=>[m(c,{class:"repositories-table",rows:a,columns:["Repository","Description"],title:"Yolo"},{row:b(({item:p})=>[u("div",null,[u("a",{href:p.url,target:"_blank"},V(p.name),9,lr)]),u("div",null,V(p.description),1)]),_:1})]),_:1}),m(d,{title:"APIs"},{default:b(()=>[m(c,{class:"apis-table","columns-data":"apis-columns-data",rows:n,columns:["API","Description"]},{row:b(({item:p})=>[u("div",null,[u("a",{href:p.url,target:"_blank"},V(p.name),9,rr)]),u("div",null,V(p.description),1)]),_:1})]),_:1}),(h(),A(Y,null,re(s,p=>m(d,{key:p.name,title:p.name},{default:b(()=>[m(c,{class:"contracts-table","columns-header":"1fr","columns-data":"contracts-columns-data",rows:p.contracts,columns:["Contract","Description"]},{row:b(({item:v})=>[u("div",null,[u("a",{href:l(v),target:"_blank"},V(v.contract),9,ir)]),u("div",null,V(v.description),1)]),_:2},1032,["rows"])]),_:2},1032,["title"])),64)),m(d,null,{default:b(()=>i[0]||(i[0]=[u("div",{class:"notices"},[R(" TradingView Lightweight Charts™ Copyright (с) 2023 TradingView, Inc. "),u("span",null,[u("a",{href:"https://www.tradingview.com/",target:"_blank"}," https://www.tradingview.com ")])],-1)])),_:1})])}}}),ur=I(cr,[["__scopeId","data-v-f2065552"]]);function dr(){const e=vs(),t=[{path:"/code",component:ur},...e.routes.flatMap(a=>a),{path:"/:pathMatch(.*)*",name:"NotFound",component:Gl}];return po({history:mo(),routes:t})}const pr="/assets/llama-cloud-transparant-BquaG1Iu.png",mr={key:0,class:"value"},vr={key:1,class:"value"},hr=["innerHTML"],fr={key:0,class:"value"},_r={key:1,class:"value"},gr=["innerHTML"],yr={class:"labels"},br={class:"label"},wr={class:"label-second"},kr=T({__name:"KPI",props:{label:{default:""},labelSecond:{default:""},tooltip:{default:""},tooltipType:{default:"icon"},value:{},hasValue:{type:Boolean,default:!1}},setup(e){return(t,s)=>{const a=ms;return h(),A("div",{class:U(["kpi",{disabled:!t.hasValue}])},[u("div",{class:U(["value-container",{underline:t.tooltip&&t.tooltipType==="underline"}])},[Z(t.$slots,"default",{},()=>[t.tooltip&&t.tooltipType==="underline"?(h(),L(a,{key:0},{trigger:b(()=>[t.hasValue?(h(),A("span",mr,V(t.value),1)):(h(),A("span",vr," ? "))]),default:b(()=>[Z(t.$slots,"tooltip",{},()=>[u("span",{innerHTML:t.tooltip},null,8,hr)],!0)]),_:3})):(h(),A(Y,{key:1},[t.hasValue?(h(),A("span",fr,V(t.value),1)):(h(),A("span",_r," ? "))],64))],!0),t.tooltip&&t.tooltipType==="icon"?(h(),L(a,{key:0},{default:b(()=>[u("span",{innerHTML:t.tooltip},null,8,gr)]),_:1})):F("",!0)],2),u("div",yr,[Z(t.$slots,"label",{},()=>[u("div",br,V(t.label),1)],!0),Z(t.$slots,"label-second",{},()=>[u("div",wr,V(t.labelSecond),1)],!0)])],2)}}}),de=I(kr,[["__scopeId","data-v-7412bab7"]]),$r={key:0,class:"async-value"},Cr="|/-\\",X=T({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1},inline:{type:Boolean,default:!0}},setup(e){let t=0,s=0;const a=q("|"),n=w(()=>e.value?Q(e.value,typeof e.precision=="function"?e.precision(e.value):e.precision,e.type??""):e.value===0&&e.showZero?"0":e.value===null||e.value===void 0?a.value:"?"),l=w(()=>e.precision===1/0?"":!e.value||!e.type||!isFinite(e.value)?e.showUnit&&e.type?H(0,e.type):"":H(e.value,e.type));return G(()=>e.value,r=>{if(clearInterval(s),t=0,r)return;const i=()=>{t=(t+1)%4,a.value=Cr[t]};s=window.setInterval(i,250)},{immediate:!0}),(r,i)=>r.inline?(h(),A(Y,{key:1},[R(V(r.showSymbol&&r.type==="dollar"?"$":"")+V(o(n))+V(r.showUnit?o(l):""),1)],64)):(h(),A("div",$r,V(r.showSymbol&&r.type==="dollar"?"$":"")+V(o(n))+V(r.showUnit?o(l):""),1))}}),Ar=["crvusd","lending","pools","router","dao"];function ke(e){const[t,s]=e.split("T"),[a,n,l]=t.split("-").map(Number),[r,i,c]=s.split(":").map(Number);return Date.UTC(a,n-1,l,r,i,c)/1e3}const Sr=["ethereum","arbitrum","optimism","fantom","avalanche","xdai","matic","harmony","moonbeam","base","polygon","fraxtal"],Lr="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_103_26)'%3e%3cpath%20d='M11.9974%200L11.8364%200.546928V16.4161L11.9974%2016.5767L19.3636%2012.2225L11.9974%200Z'%20fill='%23343434'/%3e%3cpath%20d='M11.9977%200L4.63135%2012.2225L11.9977%2016.5767V8.87428V0Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9975%2017.9713L11.9067%2018.082V23.7348L11.9975%2023.9997L19.3681%2013.6194L11.9975%2017.9713Z'%20fill='%233C3C3B'/%3e%3cpath%20d='M11.9977%2023.9997V17.9713L4.63135%2013.6194L11.9977%2023.9997Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9976%2016.5767L19.3637%2012.2225L11.9976%208.87427V16.5767Z'%20fill='%23141414'/%3e%3cpath%20d='M4.63135%2012.2225L11.9977%2016.5767V8.87427L4.63135%2012.2225Z'%20fill='%23393939'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_103_26'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Tr="data:image/svg+xml,%3csvg%20width='1503'%20height='1504'%20viewBox='0%200%201503%201504'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='287'%20y='258'%20width='928'%20height='844'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M1502.5%20752C1502.5%201166.77%201166.27%201503%20751.5%201503C336.734%201503%200.5%201166.77%200.5%20752C0.5%20337.234%20336.734%201%20751.5%201C1166.27%201%201502.5%20337.234%201502.5%20752ZM538.688%201050.86H392.94C362.314%201050.86%20347.186%201050.86%20337.962%201044.96C327.999%201038.5%20321.911%201027.8%20321.173%201015.99C320.619%201005.11%20328.184%20991.822%20343.312%20965.255L703.182%20330.935C718.495%20303.999%20726.243%20290.531%20736.021%20285.55C746.537%20280.2%20759.083%20280.2%20769.599%20285.55C779.377%20290.531%20787.126%20303.999%20802.438%20330.935L876.42%20460.079L876.797%20460.738C893.336%20489.635%20901.723%20504.289%20905.385%20519.669C909.443%20536.458%20909.443%20554.169%20905.385%20570.958C901.695%20586.455%20893.393%20601.215%20876.604%20630.549L687.573%20964.702L687.084%20965.558C670.436%20994.693%20661.999%201009.46%20650.306%201020.6C637.576%201032.78%20622.263%201041.63%20605.474%201046.62C590.161%201050.86%20573.004%201050.86%20538.688%201050.86ZM906.75%201050.86H1115.59C1146.4%201050.86%201161.9%201050.86%201171.13%201044.78C1181.09%201038.32%201187.36%201027.43%201187.92%201015.63C1188.45%201005.1%201181.05%20992.33%201166.55%20967.307C1166.05%20966.455%201165.55%20965.588%201165.04%20964.706L1060.43%20785.75L1059.24%20783.735C1044.54%20758.877%201037.12%20746.324%201027.59%20741.472C1017.08%20736.121%201004.71%20736.121%20994.199%20741.472C984.605%20746.453%20976.857%20759.552%20961.544%20785.934L857.306%20964.891L856.949%20965.507C841.69%20991.847%20834.064%201005.01%20834.614%201015.81C835.352%201027.62%20841.44%201038.5%20851.402%201044.96C860.443%201050.86%20875.94%201050.86%20906.75%201050.86Z'%20fill='%23E84142'/%3e%3c/svg%3e",Vr="/assets/arbitrum-Z8VMulXH.png",Ir="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23fff;fill-rule:evenodd;}.cls-2{fill:%2313b5ec;}.cls-3{mask:url(%23mask);}%3c/style%3e%3cmask%20id='mask'%20x='10'%20y='6'%20width='93.1'%20height='20'%20maskUnits='userSpaceOnUse'%3e%3cg%20id='a'%3e%3cpath%20class='cls-1'%20d='M10,6h93.1V26H10Z'/%3e%3c/g%3e%3c/mask%3e%3c/defs%3e%3ctitle%3efa%3c/title%3e%3cg%20id='Layer_2'%20data-name='Layer%202'%3e%3cg%20id='Layer_1-2'%20data-name='Layer%201'%3e%3ccircle%20class='cls-2'%20cx='16'%20cy='16'%20r='16'/%3e%3cg%20class='cls-3'%3e%3cpath%20class='cls-1'%20d='M17.2,12.9l3.6-2.1V15Zm3.6,9L16,24.7l-4.8-2.8V17L16,19.8,20.8,17ZM11.2,10.8l3.6,2.1L11.2,15Zm5.4,3.1L20.2,16l-3.6,2.1Zm-1.2,4.2L11.8,16l3.6-2.1Zm4.8-8.3L16,12.2,11.8,9.8,16,7.3ZM10,9.4V22.5l6,3.4,6-3.4V9.4L16,6Z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",qr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoESURBVHgB7Z3PTxzZEcerXoNBOc0eN5KhfYgUrY2MN9iyLBvP3pLTQpRgJ5fFh0iwewD/BYZbcjIrJVmUHAyXxGZXMpyinDzAKrEUogySiXzbBuWeueyKX91vq970DDP983VPT9NgPpLFuH/3d6rr1at6rwehINyeGjN7obeMgKYUOAgSTAQw3dWmZ/Ma/5MAFv9FKbcl2lX7WFj/+POXVSgACKeEEtLpGwMD7tNFlGlRCbKBBa+CDWu2dCqnJXSuwpZnx0rO4aUZKbHsipkHFqBcOnTE8uvF5xbkRC7C3p36RRnReJKjmIGQJVdAOsubi18uQZfpqrBFETQAS0pnvpsCd0XYjAS1VOOEqoFqRyp/XEKQ9BeHIT2WtOXjzT+trELGZCqs8qEHfU/o42yiHUFWQcp1CUb1iB7XpL7wzm9+PWz0HJsUHZQliutJv1CJsHTk4HyWPjgzYe9NT4xRqPQMNFt35e+o5TZ+cLBUWVitQYaUpx6aNouL8mO6wTHN3TJ1Dx0Lm9BKa2Qen4v+/YWsxQyjITKi5Gs047Zn6zUuHTzu9Po6EpYv2hHOS7qaOD+Xu6BB3Jt6OKkpsHUo8aNOXENqYdmv9fTYLyH6IgshqJd70w9m6cZnIPrareNjZzxtByOVsNzqCzRY1FB/yj70SOKjPIPyJKinDZw5QPwkckMhJzf+sLIMCUks7OhnE5+Ag0sRm3CXcn7zixcLcAZw3cNTiGp0U4ibSFj38f9PxCb0+Bj0+PylEIkQXZT1onwFUa4hobjawronZ1GDv1mUVXHp8KMi+dIkcHRjH/Q9iwrPHGrQvl58XgENtISN/UYlLlMDNXtWRW1ldOrBAqkyE7K6RtHCDZ12Q0vY0ekH30CYqGSpG39cuQHnCIoaXkX03izRd3AjzogE6EAWGbFuePTTiSdwTuB7iewSkxY6T6YBGuxuvakMjgxRjzXshFgevHUVdv+1sw5nGGUgEudCN5A4v7H4fA400BKWOe/iZikqE+oKuJX0LlMHphNA+MnnzqJbSCtqkEYNAi2We1Zg9/7t/ZGhtf9tvWnzJ+fNclOLypGSbfzz8sjQ9t7WG8u7PtBiqbvK6T/zEoVYt+kA3vXnxXI7EtUNPwXKZ0G7+iy23sWDSfe/JQNh7DxabhaiuotKAyMf7O5t/bett+mzWDet1sq5s9wMRVUgCt89tlmsWwWYAj/nxnKzFtWlNPDh1e29f++8bSzwWCyGdeWYM2+5XRK1jtGundG6M1ldXKpPWe6Vuz9atl6/3W9dUXTL7SSk4tYfYqoOPByKIoT1RoTQtFjbkXpFt4guXVEtt5Pgn++V8sufgwYC7KaGTYs1b137K8RXWK2NxRfjURsUzXKz6FHtbe28Hrh5rYxxtTLEH+9u7fyOPyqLLdf9ZvROfA1UHgYNimK5WXZTZdT9nFC6O/WwzB+UxV7+8OokCvhpzE7W5uLKo9YF/IVcvnn15Q/JtxQtWuikoRq49cGr938y9PfWe2LfqWO1CHKXrLZS97EGfAwxBFkrtZQznGIrWrTQcetPqdDegB6VjtVKxPv8VwlL4sSOfzoCo+K9CDgZpFGYUCyrkIoN5s5nPx9s3aanf597V5G5WNaSIwlx59NfsqhxjVbVW46w/cngUxc36zi1x+5pc31uhBBXKC3Bt72mMCSaEIeEXe8igU6Q+zg1cbsT/PtH+KCEbYjBNmCYkjPxbkCNBvTgAIZZee7idq1HhXDddygnYFipbzcWNmBnHUR065ibuF3tpga5SIEalWhhigjL65Sui9tlUZl05XyEQSE0OgagRk77lumMdumauDmIyviFdaSOIZaE1BooLEzvEqnhxF0yFzcnUXmsrM94qCNlxu9JwoKOsAj3vYscEBXQJzNx8xJVcSzX/IfXapNKODr9QGpsGDhuKWbESBChA3pHpx7Ogb96cQLKOfU3L1E54fTFiysBx/lGZ2e9kTBqQ6fsXaaZmGilI8vNUdTALrydwIi0haWU2Iy3jq4sWOrlKltIL24YWYuKsBQ0yQOjnigPAiE+4HUpOfuXZr0LKT87Gzm2K5jsxM1YVB7kx5M7vIu5ep3gWDV9i1UnxZkQMSZTWS5PDAlAW9yIfKpdz06ZkAQejhowxpe/pCTWCiyso2+xTKk3ZIACWy75XE5aWKABP26HjgitRmj43MgktcHXIqXuk2RJkONsIEFlJ1qnNZXpZHuwcHRqYil2goOfBWoxH4et5Cw613/cWYJmywl5uvt6kklzgdFCgsx/+2Q6aUKzpylrPBvSAWM1apR2bHgXhIQ1FpZnjqTJKkWKmyVt4iYQtePzphGVkXIe3VkjzyAFWU45UlOchHjK7iE0zgXXRXhw34PwilzRchazdfh48rDvKfUuJyEF0pbjmCToDaGjOajqJvbpJk7GiyWaFdgQtTE7stMvO8HsxVDEsXMD+QP1vv4Pnb86RAnMJRydm6pPwhOULMfJgHNriesVtRVuHKVjL3+9+FUFYlAzZr7rm+TaX8KeZBA1cpHvKWHvT0+8lIB6AzZ0oFiQjldFR+5Si2o1FwOaVGy7rvkOmEhxo0T1oMopyNP2HcqlCqfeaDqihIYcVFXk+GPoQw0XRUhjPeocNq6jAdkJSxeqCpTI1W9sW4X6R2l0InziJhCVKakvErGMqtjvhu6GezVamRJ9JDirzbMYAlehmPh6aAlFzZ1GNbtpQCkyVXmi3EJ//36tyKISVfKvas5bs0vLPgiKi7LcgovKGbFmt74prOg/7Dj+6zJmkUVlWge1NIV1ByNU4IJUcHjX2si2ZbdkmlzoBQoK5doSPr7op+CNWFHxlXF8+dgLq01OUBknMF6/sNoEhLxWILCCcGG1+oQl6wOFrRcJtbPv7yzeSKCV0JoXxbVcOEw3dundwOL3IYatDBW2HtfKR3BBINxgRaU1I18Esbe183Zw5Np71MTdhgtOoIr05uLKb6M2iS1/i/6DOc2Rhe8KlhpLEUOssOwShFQtnwUXqCybzobaeWf3LXE8sqRbA5WLjvY7txjtkTD8Wr13uTFzJI4nKVBqv8WI4cZsYGRolyou2ZVxzgA8wodi+0RVlkTCMntbb6oDN69uUy2Lp4j2w/mmRpb6s6SiMglqe+1ovpj3LNPRm0VTC8ukHipZdCixEjYiR/sQkAExb7A8W1Dwz7H7qb78vJUshuacMpZTb6QqkAGJG68wuFG7MjK0RiEZdYGLXfTzUbfSX238/qu3kBGZWWwrdd/Lo7WLLTAXTzn3nJWVttIVYRsU1T10U9AGXRW2QX2EtzOZYuR4puQhaINchG1w8vMkzkxebqKbv2kTRa7CtuL5oR0W2YRsqFHJZBWOYTtvMVs5NWG9KKHRGeYXU5z8GKX6vS71211wklWruf/qk0WQPpOIYEjrSIpqUX4p5HsIBnqmjYFrhwAAAABJRU5ErkJggg==",Pr="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20180%20179.51'%3e%3cdefs%3e%3clinearGradient%20id='linear-gradient'%20x1='202.93'%20y1='544.7'%20x2='203.8'%20y2='545.57'%20gradientTransform='matrix(180,%200,%200,%20-179.51,%20-36456,%2098005.23)'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2300aee9'/%3e%3cstop%20offset='1'%20stop-color='%2369fabd'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle%3eharmony-one-logo%3c/title%3e%3cpath%20id='Shape'%20d='M201.17,60a38.81,38.81,0,0,0-38.84,38.71v42.92c-4,.27-8.09.44-12.33,0.44s-8.31.17-12.33,0.41V98.71a38.84,38.84,0,0,0-77.67,0V201.29a38.84,38.84,0,0,0,77.67,0V158.37c4-.27,8.09-0.44,12.33-0.44s8.31-.17,12.33-0.41v43.77a38.84,38.84,0,0,0,77.67,0V98.71A38.81,38.81,0,0,0,201.17,60ZM98.83,75.86a22.91,22.91,0,0,1,22.92,22.85v45.45a130.64,130.64,0,0,0-33,9.33,60,60,0,0,0-12.8,7.64V98.71A22.91,22.91,0,0,1,98.83,75.86Zm22.92,125.43a22.92,22.92,0,1,1-45.84,0V191c0-9.09,7.2-17.7,19.27-23.06a113,113,0,0,1,26.57-7.77v41.12Zm79.42,22.85a22.91,22.91,0,0,1-22.92-22.85V155.84a130.64,130.64,0,0,0,33-9.33,60,60,0,0,0,12.8-7.64v62.42A22.91,22.91,0,0,1,201.17,224.14ZM204.82,132a113,113,0,0,1-26.57,7.77V98.71a22.92,22.92,0,1,1,45.84,0V109C224.09,118.05,216.89,126.66,204.82,132Z'%20transform='translate(-60%20-60)'%20style='fill:url(%23linear-gradient)'/%3e%3c/svg%3e",Fr="/assets/moonbeam-CHDPiRRO.png",Br="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2038.4%2033.5'%20style='enable-background:new%200%200%2038.4%2033.5;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%238247E5;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M29,10.2c-0.7-0.4-1.6-0.4-2.4,0L21,13.5l-3.8,2.1l-5.5,3.3c-0.7,0.4-1.6,0.4-2.4,0L5,16.3%20c-0.7-0.4-1.2-1.2-1.2-2.1v-5c0-0.8,0.4-1.6,1.2-2.1l4.3-2.5c0.7-0.4,1.6-0.4,2.4,0L16,7.2c0.7,0.4,1.2,1.2,1.2,2.1v3.3l3.8-2.2V7%20c0-0.8-0.4-1.6-1.2-2.1l-8-4.7c-0.7-0.4-1.6-0.4-2.4,0L1.2,5C0.4,5.4,0,6.2,0,7v9.4c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l5.5-3.2l3.8-2.2l5.5-3.2c0.7-0.4,1.6-0.4,2.4,0l4.3,2.5c0.7,0.4,1.2,1.2,1.2,2.1v5c0,0.8-0.4,1.6-1.2,2.1%20L29,28.8c-0.7,0.4-1.6,0.4-2.4,0l-4.3-2.5c-0.7-0.4-1.2-1.2-1.2-2.1V21l-3.8,2.2v3.3c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l8.1-4.7c0.7-0.4,1.2-1.2,1.2-2.1V17c0-0.8-0.4-1.6-1.2-2.1L29,10.2z'/%3e%3c/g%3e%3c/svg%3e",Dr="/assets/optimism-CcABTbCu.png",Mr="/assets/base-AohAhS4D.webp",Ur="/assets/polygon-GPEdhIuq.png",Rr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABI1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAD////8/PzHx8fb29swMDDz8/P19fWzs7NHR0fm5ua2trYdHR3R0dHY2NhdXV3t7e3p6end3d2Ojo47Ozv5+fnNzc2/v78iIiJbW1tzc3P39/fk5ORZWVkzMzMVFRWtra2lpaXh4eHT09OGhoZOTk4/Pz84ODjw8PCioqKfn5+SkpJ5eXm7u7t6enpxcXFoaGihoaFjY2Po6OjLy8soKCgLCwuAgIDCwsKXl5dsbGzr6+vV1dVQUFBM4z+pAAAAI3RSTlMAzvr08ejf2dW3lJGNTUlGIA0KBiTIxLqsppZxX1tTLiwnGBXchpcAAAbqSURBVHjavJdpW9pQEIXDpsiireC+tDongQCypBEiKCggbohKta1Ln/r/f0UTQgEJIeQS+n6FJ+fcyZ05E46FSDS8FVxf9fu8bsDt9flX14Nb4WiE+x982gmseDASz0pg5xM3S5YXA/OwYD6wuMzNhEh4w4seihw7KqZr9cfHei1dPIrJCnp4N8LOv429kA9dbhrJ/HGVhqge55ONG3TxhfYclV9agE4i25RoDFIzm4DOwpJj8rsudBCFiwxZkrkQRHRw7Toiv6jL87lWiSak1MrxuoXFqeW/rumlL0pkC6mYgMba16nkP4fcUBGTV2Sbq6QIFXfo8xR3bw4q5XSBmCiky1CZW2IdO5tQ4YVLYuZS4KGyyTSavvihUrmjqbirQMX/xb7+tkc7frJEU1JK8gA823b1g1D50SYHaP+AStDe7e9MPiFOjhAXOpPRRjfsuwAot+QYtwoA1/7Eka9lrvhADvIgakk94bIQ1bpflshRJBnAXHSi82v65ylymNS55mCCGuxr9T+8Jse5PtTewr7l/Xdp+nG2q/ZTp2nSDJoDl1UvLGj1Zzy/AJ0jsxqca91oPX/kFM3GAKVkq4m0DUCUaFYGSBIBbI/JHw+gPNDsDNCDAnhMk2lZy79bmqUButWy0SydtfwXyHEDxj9tmuw/Wv7FZ20grmXj0sgJMAfwbZq1AWrzwNyoaRACkKTZG6AkgNCI/dsNHJT+h4HSAeA2butrAD/d/vc9NpkBuuOBNcP3z5QdUKjJ+Acfa1UtSzX8zeQCyuz793NdxAcOXsZu62XANfT9CSDNnvU5GCiWyJw0gN3hAogFYuRUxghiY55XEIdKsDRNCx5/gxGLrSI5NI0WgMSVw/pA9pnMuEp82Az2ABQd1weaZEoRwN7gEOQlxvc/qC8L6fusiB4J876S+IFxGPEBOVZ9Q+v9avYtjClrDvBFOJ0wgBaxcDmgn/1FXd4r6FI23y5bAMKczgYgsqXAzwH9zMAV6/Vl7aRP9WMiiMBGdxHysk7hZ7GvXxqa9kYKhnnsXe7FwAWxkFGM59dpWBu46AVCAEhkiImKiT69WRvIJIAApzEPZImNNxN9OrY2QFlgXtP/pE8MNuplgH811u+atzbQBKB9rO4AkIiVq3zrlIy8T1ABCcCOfgVuyGkuJjBAN/olWAEaLEe/a73lT84s1kPwfQwGGsCKOoc9DEl88irz0OAr99/JyJMCnVi8z6hM9kS4KIA82eLlEIPkTmiIs/PeJKQx5AFEO0FwTDY4EzAE/xr/+I9Y75f3sUneiYMtQKnayb8DGKmcGvWtF/SqAmxxQUBmzf8+305H6StPNBYZCHLrQGz6/ae/T8T7+paXOwasc6vAEfP5+/Apo37MKmGOgFXODxTZzl8Wy+jze7j+OLBcc4uAn/MBaQZ9MflUpUz7PgEd5dqgnyIr0oCP8wI1+/X/8+/plzl0EBj0qQZ4OTdQt3F+Q/5mBKg04tr7t6lPdcDNAXi0c35j/rdryRdi0adHAH9ZNdechKEoCO/ATcj7lRBEDAaIQMFISEq0SRHE/e/CH0pHL7f5PCd0AzNt7z2PmREB4/uP0lNzqBpu/P4ioF9gw3+afd/0fTGCmPD1C3QIAT+Yf9vn05j9NKg7E74Ooa6h7f8nkkPa2206q9jwdQ3/U4g6p8vzF7QkM74KEZfieT3A18jD+FyKuRktYvcvmzrxw2bE7bjTit7/dZTBLMDndswDSa9k//uIKEOrcPDkgQRHsvmmbP9rpMH20XyLaDI0kuFQuiu+bn55PQ8twQ/ahtfXUBofy4+94ikkwKiO+7hO+93BYLZq70xvr7E8vphEhMfkmouTFhOtZkQgvSa0VjMtp0RgGdEnlv2k9uqB1nKq9dxGQP3/wSOuaD2XQAEE1DDC/r/JzdASKCTRIIFuHN+lL0mikUiFBCrvJfiVo19CuCmT6dKhHhWiAF8bgfmRTMdC5f5UbJpqGZo/nSKvhEqWaheCej6X4MTQf0GqZbF61NQyNp7kt/lkPDXgo1jNcv3yzxLaqprmD5br2bCY193zHxgWbNlIlPfjs2XDplW28eGDaQW2HQpDQ9r/wbYzGZeNQzWURFLSP8i4NFq3k8/qb/gV1T+0bu3mdVYrqnIvIww2rx32/f3ZjWMItu/tAQY/AQ4wcITDT4AjHBxi8RPgEAvHePwEOMbDQSY/AQ4ycZTLTwCjXMYwm58Ah9k4zucnwHE+DjT6CXCgkSOdfgIQ6XSHWl++mrdjGwBgGIZhR/b/Xzp06B4gEP2EF/G8TY7gR6161tuHzX3a3cftfd7fA4eeeADIpWc+PXTqqReA3XruB4BHgHwC6BVgvwB8Bui3gN83+P8FeDI7nekABC8AAAAASUVORK5CYII=";function Ls(e){return{ethereum:Lr,arbitrum:Vr,optimism:Dr,fantom:Ir,avalanche:Tr,xdai:qr,matic:Br,harmony:Pr,moonbeam:Fr,base:Mr,polygon:Ur,fraxtal:Rr,all:""}[e]}const Or=e=>e.data.map(t=>t.name).filter(t=>Sr.includes(t)),Er=e=>({chain:e.chain,total:{tvl:e.total.total_tvl,tradingVolume24h:e.total.trading_volume_24h,tradingFee24h:e.total.trading_fee_24h,liquidityVolume24h:e.total.liquidity_volume_24h,liquidityFee24h:e.total.liquidity_fee_24h}}),Wr=e=>e.data.flatMap(t=>t.transactions.map(s=>({chain:t.chain,timestamp:ke(s.timestamp),type:s.type,transactions:s.transactions}))),xr=e=>e.data.flatMap(t=>t.users.map(s=>({chain:t.chain,timestamp:ke(s.timestamp),type:s.type,users:s.users}))),kt="https://prices.curve.fi";class Kr extends Ae{async getSupportedChains(){const t=await this.fetch(`${kt}/v1/chains/`);return Or(t)}async getChainInfo(t){const s=await this.fetch(`${kt}/v1/chains/${t}?page=1&per_page=1`);return Er(s)}async getTxs(){const t=await this.fetch(`${kt}/v1/chains/activity/transactions`);return Wr(t)}async getUsers(){const t=await this.fetch(`${kt}/v1/chains/activity/users`);return xr(t)}}const Dt=new Kr;function Ys(){return{initialData:[],initialDataUpdatedAt:0}}function Nr(){return W({queryKey:["chains-supported"],queryFn:()=>Dt.getSupportedChains(),initialData:["ethereum"],initialDataUpdatedAt:0})}function Js(e){return W({queryKey:["chain-info",e],queryFn:({queryKey:[,t]})=>Dt.getChainInfo(t),enabled:w(()=>!!e.value)})}function Hr(){return W({queryKey:["chains-txs"],queryFn:()=>Dt.getTxs(),...Ys()})}function Qr(){return W({queryKey:["chains-users"],queryFn:()=>Dt.getUsers(),...Ys()})}const zr=e=>({name:e.collateral_token.symbol,address:e.address.toLocaleLowerCase(),factory:e.factory_address.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),rate:e.rate,borrowed:e.total_debt,borrowable:e.borrowable,collateral:e.collateral_amount,collateralUsd:e.collateral_amount_usd,loans:e.n_loans,collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},stablecoin_token:{symbol:e.stablecoin_token.symbol,address:e.stablecoin_token.address.toLocaleLowerCase()},fees:{pending:e.pending_fees,collected:e.collected_fees}}),jr=e=>({timestamp:new Date(e.dt).getTime()/1e3,rate:e.rate,nLoans:e.n_loans,minted:e.minted,redeemed:e.redeemed,totalCollateral:e.total_collateral,totalCollateralUsd:e.total_collateral_usd,totalStablecoin:e.total_stablecoin,totalDebt:e.total_debt,priceAMM:e.amm_price,priceOracle:e.price_oracle,borrowable:e.borrowable,discountLiquidation:e.liquidation_discount,discountLoan:e.loan_discount}),Gr=e=>({address:e.address.toLocaleLowerCase(),pool:e.pool,pool_address:e.pool_address.toLocaleLowerCase(),pair:e.pair.map(t=>({symbol:t.symbol,address:t.address.toLocaleLowerCase()})),active:e.active,total_debt:e.total_debt,total_profit:e.total_profit}),Xr=e=>({timestamp:ke(e.timestamp),market:e.market,supply:e.supply,borrowable:e.borrowable}),$t="https://prices.curve.fi";class Zr extends Ae{async getMarkets(t,s){return(await this.fetch(`${$t}/v1/crvusd/markets/${t}?fetch_on_chain=true&page=${s}&per_page=10`)).data.map(zr)}async getSnapshots(t,s){return(await this.fetch(`${$t}/v1/crvusd/markets/${t}/${s}/snapshots?fetch_on_chain=true&agg=day`)).data.map(jr)}async getCrvUsdSupply(t){return(await this.fetch(`${$t}/v1/crvusd/markets/${t}/supply`)).data.map(Xr)}async getKeepers(t){return(await this.fetch(`${$t}/v1/crvusd/pegkeepers/${t}`)).keepers.map(Gr)}}const Yr=e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}),Jr="https://prices.curve.fi";class ea extends Ae{async getOHLC(t,s,a,n){const r=Math.floor(new Date().getTime()/1e3),i=Math.floor(r-72e5),c=`${Jr}/v1/ohlc/${t}/${Kt(s)}?main_token=${Kt(a)}&reference_token=${Kt(n)}&agg_number=1&agg_units=day&start=${i}&end=${r}`;return(await this.fetch(c)).data.map(Yr)}}const Mt=new Zr,ei=new ea;function ti(e){return w(()=>{var t;return(t=e.value)==null?void 0:t.address})}function Ut(){return{initialData:[],initialDataUpdatedAt:0}}function si(e,t){return{enabled:w(()=>!!e.value&&!0)}}function ai(){return W({queryKey:["crvusd-supply"],queryFn:()=>Mt.getCrvUsdSupply("ethereum"),...Ut()})}function Rt(e){return W({queryKey:["crvusd-market-snapshots",ti(e)],queryFn:({queryKey:[,t]})=>Mt.getSnapshots("ethereum",t),...si(e),...Ut()})}function oi(e){return W({queryKey:["crvusd-keepers-prices",w(()=>e.value.map(t=>t.pool_address))],queryFn:async()=>{const t=e.value.map(async n=>{const l=n.pair.find(c=>c.symbol!=="crvUSD"),r=n.pair.find(c=>c.symbol==="crvUSD");return!l||!r?[]:(await ei.getOHLC("ethereum",n.pool_address,l.address,r.address)).map(c=>({time:c.time,price:(c.high+c.low)/2,coin:l.symbol}))}),a=(await Promise.all(t)).flat().groupBy(n=>n.time).entries().map(([n,l])=>({timestamp:Number(n),...Object.fromEntries(l.map(r=>[r.coin,r.price]))}));return a.length>0?a:[{timestamp:0}]},initialData:[{timestamp:0}],initialDataUpdatedAt:0})}function hs(){return W({queryKey:["crvusd-markets"],queryFn:()=>Mt.getMarkets("ethereum",1),...Ut()})}function ta(){return W({queryKey:["crvusd-keepers"],queryFn:()=>Mt.getKeepers("ethereum"),...Ut()})}const ni={class:"kpis"},li=T({__name:"KPIs",setup(e){const t=new gn,{data:s}=hs(),a=w(()=>s.value.reduce((c,d)=>c+d.borrowed,0)),{data:n}=Js(q("ethereum")),l=w(()=>{var c;return((c=n.value)==null?void 0:c.total.tvl)??0}),r=w(()=>{var c;return((c=n.value)==null?void 0:c.total.tradingVolume24h)??0}),{data:i}=W({queryKey:["crv-price"],queryFn:()=>t.getPrice("0xd533a949740bb3306d119cc777fa900ba034cd52").then(c=>c.price),initialData:0,initialDataUpdatedAt:0});return(c,d)=>{const p=X,v=de;return h(),A("div",ni,[m(v,{label:"CRV Price","has-value":!!o(i)},{default:b(()=>[m(p,{value:o(i),precision:3,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"crvUSD Borrowed","has-value":!!o(a)},{default:b(()=>[m(p,{value:o(a),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"Total Value Locked","has-value":!!o(l)},{default:b(()=>[m(p,{value:o(l),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"24h Volume","has-value":!!o(r)},{default:b(()=>[m(p,{value:o(r),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"])])}}}),ri=I(li,[["__scopeId","data-v-9439060c"]]),ii="/assets/telegram-DU4d4zRw.webp",ci={class:"telegram-body"},ui={class:"item crvUSD"},zt="https://t.me/curve_monitor_backup",jt="https://t.me/crvUSD_community_bot",di=T({__name:"TelegramModal",emits:["close"],setup(e,{emit:t}){const s=t;function a(n){window.open(n,"_blank")}return(n,l)=>{const r=D,i=Ye("emph"),c=Bt;return h(),L(c,{onClose:l[2]||(l[2]=d=>s("close"))},{default:b(()=>[u("div",ci,[m(r,{title:"Curve Monitor",onClick:l[0]||(l[0]=me(d=>a(zt),["prevent"]))},{actions:b(()=>[u("a",{href:zt},V(zt))]),default:b(()=>[l[3]||(l[3]=u("div",{class:"item crvUSD"}," This Telegram channel provides real-time updates on crvUSD transactions, including loan activity, collateral movements, peg maintenance, and major asset swaps on the Ethereum blockchain. It's a valuable resource for staying informed about crvUSD market dynamics and related metrics. ",-1))]),_:1}),m(r,{title:"crvUSD",onClick:l[1]||(l[1]=me(d=>a(jt),["prevent"]))},{actions:b(()=>[u("a",{href:jt},V(jt))]),default:b(()=>[u("div",ui,[l[14]||(l[14]=R(" Health Monitoring bot for Curve LlamaLend positions: ")),u("ul",null,[u("li",null,[l[5]||(l[5]=R("/add ")),m(i,null,{default:b(()=>l[4]||(l[4]=[R("address")])),_:1}),l[6]||(l[6]=R(" - Add an Ethereum address"))]),u("li",null,[l[8]||(l[8]=R("/remove ")),m(i,null,{default:b(()=>l[7]||(l[7]=[R("address")])),_:1}),l[9]||(l[9]=R(" - Remove an Ethereum address"))]),l[10]||(l[10]=u("li",null,"/list - List all your Ethereum addresses",-1)),l[11]||(l[11]=u("li",null,"/removeAll - Remove all your Ethereum addresses",-1)),l[12]||(l[12]=u("li",null,"/gib - Prints all your health stats",-1)),l[13]||(l[13]=u("li",null,"/help - Show help message and some QoL commands",-1))])])]),_:1})])]),_:1})}}}),pi=I(di,[["__scopeId","data-v-0e8784a1"]]),mi={class:"telegram"},vi=T({__name:"Telegram",setup(e){const t=q(!1);return(s,a)=>{const n=D;return h(),A("div",mi,[m(n,{onClick:a[0]||(a[0]=l=>t.value=!0)},{default:b(()=>a[2]||(a[2]=[u("div",{class:"telegram-card"},[u("picture",null,[u("img",{class:"llama",src:ii})]),u("div",{class:"info"},[R(" Try our "),u("strong",null,"Telegram"),R(" bots and monitor channels to get notified about the latest liquidations and events. ")])],-1)])),_:1}),m(pi,{show:o(t),onClose:a[1]||(a[1]=l=>t.value=!1)},null,8,["show"])])}}}),hi=I(vi,[["__scopeId","data-v-b54a4475"]]),fi=[{unit:"year",seconds:365*24*60*60},{unit:"month",seconds:30*24*60*60},{unit:"week",seconds:7*24*60*60},{unit:"day",seconds:24*60*60},{unit:"hour",seconds:60*60},{unit:"minute",seconds:60},{unit:"second",seconds:1}];function _i(e,t){const s=Math.round(e.value/1e3)-t;for(const{unit:a,seconds:n}of fi)if(s>=n){const l=Math.round(s/n);return`${l} ${l===1?a:a+"s"} ago`}return"just now"}function Pe(){const e=q(Date.now());return fe(()=>{setInterval(()=>{e.value=Date.now()})}),{relativeTime:s=>_i(e,s)}}const gi={class:"articles"},yi={class:"articles-cards"},bi={class:"article"},wi={class:"date"},ki={class:"article"},$i={class:"date"},Ci={class:"article"},Ai={class:"date"},Si={class:"article"},Li={class:"date"},Ti=T({__name:"Articles",setup(e){const{relativeTime:t}=Pe();function s(a){window.open(a,"_blank")}return(a,n)=>{const l=D;return h(),A("div",gi,[n[16]||(n[16]=u("div",{class:"title"},"Articles",-1)),u("div",yi,[m(l,{onClick:n[0]||(n[0]=r=>s("https://blog.curvemonitor.com/posts/curve-users/"))},{default:b(()=>[u("div",bi,[n[4]||(n[4]=u("div",{class:"title"},"Who are Curve's Users?",-1)),n[5]||(n[5]=u("div",{class:"description"}," A look at the differences between users of Curve's products ",-1)),u("div",wi,V(o(t)(1723586400)),1),n[6]||(n[6]=u("div",{class:"read"},[u("a",{href:"https://blog.curvemonitor.com/posts/curve-users/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(l,{onClick:n[1]||(n[1]=r=>s("https://blog.curvemonitor.com/posts/exchange-received/"))},{default:b(()=>[u("div",ki,[n[7]||(n[7]=u("div",{class:"title"},"How to Do Cheaper, Approval-Free Swaps",-1)),n[8]||(n[8]=u("div",{class:"description"}," A deep dive into the exchange_received function on NG pools which allows users to trade without approvals and can significantly reduce transaction gas costs. ",-1)),u("div",$i,V(o(t)(1711234800)),1),n[9]||(n[9]=u("div",{class:"read"},[u("a",{href:"https://blog.curvemonitor.com/posts/exchange-received/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(l,{onClick:n[2]||(n[2]=r=>s("https://blog.curvemonitor.com/posts/ng-mev/"))},{default:b(()=>[u("div",Ci,[n[10]||(n[10]=u("div",{class:"title"},"Impact of Dynamic Fees on MEV Activity",-1)),n[11]||(n[11]=u("div",{class:"description"}," This post compares MEV activity on StableSwap NG pools and pools with the original implementation. It explains dynamic fees and their impact on certain types of MEV activity. ",-1)),u("div",Ai,V(o(t)(1710025200)),1),n[12]||(n[12]=u("div",{class:"read"},[u("a",{href:"https://blog.curvemonitor.com/posts/ng-mev/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(l,{onClick:n[3]||(n[3]=r=>s("https://blog.curvemonitor.com/posts/parameter-ramping/"))},{default:b(()=>[u("div",Si,[n[13]||(n[13]=u("div",{class:"title"},"Parameter Ramping",-1)),n[14]||(n[14]=u("div",{class:"description"}," Why aren't parameter changes on Curve pools applied instantly? This post dwelves into the reasons behind gradual parameter changes. ",-1)),u("div",Li,V(o(t)(1707606e3)),1),n[15]||(n[15]=u("div",{class:"read"},[u("a",{href:"https://blog.curvemonitor.com/posts/parameter-ramping/",target:"_blank"}," Read now ")],-1))])]),_:1})])])}}}),Vi=I(Ti,[["__scopeId","data-v-e85444a6"]]),Ii={class:"home"},qi={class:"highlights"},Pi=T({__name:"Home.page",setup(e){return(t,s)=>(h(),A("div",Ii,[s[0]||(s[0]=u("div",{class:"description"},[u("span",{class:"title"},"Curve Monitor"),u("span",{class:"tag"}," Airdropping knowledge bombs about the Curve ecosystem. ")],-1)),s[1]||(s[1]=u("img",{class:"llama",src:pr},null,-1)),u("div",qi,[m(ri),m(hi)]),m(Vi,{style:{"grid-area":"articles"}})]))}}),Fi=I(Pi,[["__scopeId","data-v-ef7b1d91"]]),Bi={class:"item"},Di=["src"],Mi={key:1,class:"empty"},Ui={class:"label"},Ri=T({__name:"SelectChain",props:{chain:{},chains:{},all:{type:Boolean,default:!1}},emits:["select-chain"],setup(e,{emit:t}){const s=t,a=w(()=>[...e.all?[{chain:"all",label:"All Chains"}]:[],{chain:"ethereum",label:"Ethereum"},{chain:"avalanche",label:"Avalanche"},{chain:"arbitrum",label:"Arbitrum"},{chain:"fantom",label:"Fantom"},{chain:"xdai",label:"Gnosis (xDai)"},{chain:"harmony",label:"Harmony"},{chain:"moonbeam",label:"Moonbeam"},{chain:"matic",label:"Polygon"},{chain:"optimism",label:"Optimism"},{chain:"base",label:"Base"},{chain:"polygon",label:"Polygon"},{chain:"fraxtal",label:"Fraxtal"}].filter(i=>e.chains.includes(i.chain))),n=w(()=>a.value.find(i=>i.chain===e.chain)??a.value[0]),l=i=>i.label,r=i=>{s("select-chain",i.chain)};return(i,c)=>{const d=tt;return h(),L(d,{options:o(a),selected:o(n),onInput:r},{item:b(({item:p})=>[u("div",Bi,[o(Ls)(p.chain)?(h(),A("img",{key:0,src:o(Ls)(p.chain)},null,8,Di)):(h(),A("div",Mi)),u("div",Ui,V(l(p)),1)])]),_:1},8,["options","selected"])}}}),Ot=I(Ri,[["__scopeId","data-v-2ebf83d6"]]),Oi={ref:"modal",class:"fullscreen-content"},Ei=T({__name:"ModalFullscreen",props:{target:{}},emits:["enterBefore","enter","exitBefore","exit"],setup(e,{emit:t}){const s=t,a=ye("modal");let n=null,l=null;G(a,(c,d)=>{e.target&&(c?r(e.target,c):d&&n&&i(e.target,n,d))});function r(c,d){n=c.parentNode,l=c.nextSibling,n&&(s("enterBefore",d),n.removeChild(c),d.appendChild(c),s("enter",d))}function i(c,d,p){s("exitBefore",p),p.removeChild(c),l?d.insertBefore(c,l):d.appendChild(c),s("exit",p)}return(c,d)=>{const p=Bt;return h(),L(p,null,{default:b(()=>[u("div",Oi,null,512)]),_:1})}}}),sa=I(Ei,[["__scopeId","data-v-453f292b"]]),st=T({__name:"BtnChartLWFullscreen",props:Ee({chart:{},target:{default:null}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=mt(e,"modelValue");let s=0,a=0;function n(){const r=e.chart.chartElement().parentElement;s=(r==null?void 0:r.clientHeight)??0,a=(r==null?void 0:r.clientWidth)??0}function l(){e.chart.applyOptions({height:s,width:a})}return(r,i)=>{const c=sa,d=ve;return h(),L(d,{disabled:!r.chart,onClick:i[1]||(i[1]=p=>t.value=!t.value)},{default:b(()=>[i[2]||(i[2]=u("i",{class:"fas fa-expand"},null,-1)),m(c,{target:r.target,show:t.value,onClose:i[0]||(i[0]=p=>t.value=!1),onEnterBefore:n,onExit:l},null,8,["target","show"])]),_:1},8,["disabled"])}}}),Wi=(e,t)=>{const{colors:s}=t;return{width:e.clientWidth,height:e.clientHeight||300,rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},layout:{background:{type:vo.Solid,color:s.backgroundColor},textColor:s.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",attributionLogo:!1},grid:{vertLines:{visible:!1},horzLines:{color:s.level4,style:ho.SparseDotted}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1}};function te(e){const{theme:t}=E(N());return s=>w(()=>{const a=Wi(s,t.value);return e?ps(a,O(e).value):a})}function se(e){const{createChartOptions:t,series:s}=e,a={},n=Array.isArray(s)?s:[s],l=ye("chartRef"),r=Os(void 0);dt(l,(i,c,d)=>{const p=t(i);r.value=fo(i,p.value);for(const g of n){const _=xi(r.value,g);a[g.name]=_}const v=G(p,g=>{var _;(_=r.value)==null||_.applyOptions(g)});d(()=>{v(),r.value=void 0})}),_o(w(()=>{var i;return(i=l.value)==null?void 0:i.parentElement}),i=>{var d,p;const c=i[0].target;(d=r.value)==null||d.applyOptions({width:c.clientWidth,height:c.clientHeight}),(p=r.value)==null||p.timeScale().fitContent()});for(const{name:i,options:c}of n)G(c,d=>{const p=a[i];p==null||p.applyOptions(d)});return{chart:r,chartRef:l,series:a}}function xi(e,{type:t,options:s}){return{Area:e.addAreaSeries.bind(e),Bar:e.addBarSeries.bind(e),Baseline:e.addBaselineSeries.bind(e),Line:e.addLineSeries.bind(e),Candlestick:e.addCandlestickSeries.bind(e),Histogram:e.addHistogramSeries.bind(e)}[t](s.value)}const Ki={class:"actions"},Ni={ref:"chartRef",class:"chart"},Hi=T({__name:"ChartTxs",props:{txs:{}},setup(e){const{theme:t}=E(N()),s=q(!1),a=ye("card"),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Area",name:"txs",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`${Q(i,0,"dollar")}${H(i,"dollar")}`,minMove:.01},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.txs)return;const i=e.txs.map(c=>({time:c.timestamp,value:c.count})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc");l.txs.setData(i),n.value.timeScale().fitContent()}return(i,c)=>{const d=D;return h(),L(d,{ref_key:"card",ref:a,title:"Transactions"},{actions:b(()=>{var p;return[u("div",Ki,[m(o(st),{modelValue:o(s),"onUpdate:modelValue":c[0]||(c[0]=v=>J(s)?s.value=v:null),chart:o(n),target:(p=o(a))==null?void 0:p.$el},null,8,["modelValue","chart","target"])])]}),default:b(()=>[u("div",Ni,null,512)]),_:1},512)}}}),Qi=I(Hi,[["__scopeId","data-v-b07fd49f"]]),zi={class:"actions"},ji={ref:"chartRef",class:"chart"},Gi=T({__name:"ChartUsers",props:{users:{}},setup(e){const{theme:t}=E(N()),s=q(!1),a=ye("card"),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Area",name:"users",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`${Q(i,0,"dollar")}${H(i,"dollar")}`,minMove:.01},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.users)return;const i=e.users.map(c=>({time:c.timestamp,value:c.count})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc");l.users.setData(i),n.value.timeScale().fitContent()}return(i,c)=>{const d=D;return h(),L(d,{ref_key:"card",ref:a,title:"Users"},{actions:b(()=>{var p;return[u("div",zi,[m(o(st),{modelValue:o(s),"onUpdate:modelValue":c[0]||(c[0]=v=>J(s)?s.value=v:null),chart:o(n),target:(p=o(a))==null?void 0:p.$el},null,8,["modelValue","chart","target"])])]}),default:b(()=>[u("div",ji,null,512)]),_:1},512)}}}),Xi=I(Gi,[["__scopeId","data-v-f24374a4"]]),Zi=T({__name:"ChartApex",props:{options:{},series:{}},setup(e){const t=go(()=>yo(()=>import("./vue3-apexcharts-C_KQS7J0.js"),__vite__mapDeps([0,1])));return(s,a)=>(h(),L(o(t),{class:"chart",height:"100%",options:s.options,series:s.series},null,8,["options","series"]))}}),Ve=I(Zi,[["__scopeId","data-v-1b534003"]]),Yi={class:"legend"},Ji=["onClick"],ec={class:"label"},tc=T({__name:"Legend",props:{items:{},disabled:{default:()=>[]}},emits:["toggle"],setup(e,{emit:t}){const s=t;return(a,n)=>(h(),A("div",Yi,[(h(!0),A(Y,null,re(a.items,l=>(h(),A("div",{key:l.id,class:U(["item",{togglable:l.togglable,disabled:a.disabled.includes(l.id)}]),onClick:r=>{l.togglable&&s("toggle",l.id)}},[u("div",{class:"color",style:he({"background-color":l.color})},null,4),u("div",ec,V(l.label),1)],10,Ji))),128))]))}}),Se=I(tc,[["__scopeId","data-v-438d8ed8"]]),sc=e=>({chart:{id:"chart",background:"transparant",foreColor:e.colors.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",toolbar:{autoSelected:"zoom",tools:{download:!1,pan:!1}},zoom:{autoScaleYaxis:!0}},colors:e.colorsArray,grid:{borderColor:e.colors.level5,strokeDashArray:4,xaxis:{lines:{show:!1}}},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:2},theme:{mode:"dark"},xaxis:{type:"category",axisBorder:{color:e.colors.level5,height:1},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}},yaxis:{tickAmount:4,axisBorder:{color:e.colors.level5},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}}});function Ie(e,t){const s=sc(e);return t?ps(s,t):s}function Le(e){const t=w(e),s=bo(wo(Object.fromEntries(t.value.map(n=>[n.id,!0])))),a=w(()=>t.value.filter(n=>!s[n.id].value).map(n=>n.id));return{items:t,toggles:s,disabled:a}}const ac={class:"actions"},oc=T({__name:"ChartRankingChains",props:{type:{},txs:{},users:{}},setup(e){const{theme:t}=E(N()),s=w(()=>`Top Chains (${e.type==="all"?"All Types":ht(e.type)})`),{items:a,toggles:n,disabled:l}=Le(()=>{const{blue:f,yellow:y}=t.value.colors;return[{id:"txs",label:"Transactions",color:f,togglable:!0},{id:"users",label:"Users",color:y,togglable:!0}]});function r(f){return f.groupBy(y=>y.chain).entries().map(([y,k])=>{const C=k.reduce((S,$)=>S+$.value,0);return{chain:y,count:C}}).orderBy(y=>y.count,"desc")}const i=w(()=>{const{colors:f}=t.value;return Ie(t.value,{chart:{type:"bar",animations:{enabled:!1}},colors:[f.blue,f.yellow],xaxis:{categories:p.value,labels:{formatter:g}},yaxis:{labels:{formatter:_}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),c=w(()=>n.txs.value?r(e.txs):[]),d=w(()=>n.users.value?r(e.users):[]),p=w(()=>c.value.concat(d.value).orderBy(f=>f.count,"desc").map(f=>f.chain).uniq()),v=w(()=>{const f=p.value.map(k=>{const C=c.value.find(S=>S.chain===k);return C?C.count:0}),y=p.value.map(k=>{const C=d.value.find(S=>S.chain===k);return C?C.count:0});return[{data:n.txs.value?f:[]},{data:n.users.value?y:[]}]}),g=f=>f,_=f=>`${Q(f,0,"dollar")}${H(f,"dollar")}`;return(f,y)=>{const k=Se,C=Ve,S=D;return h(),L(S,{title:o(s)},{actions:b(()=>[u("div",ac,[m(k,{items:o(a),disabled:o(l),onToggle:y[0]||(y[0]=$=>o(n)[$].value=!o(n)[$].value)},null,8,["items","disabled"])])]),default:b(()=>[m(C,{options:o(i),series:o(v)},null,8,["options","series"])]),_:1},8,["title"])}}}),nc=I(oc,[["__scopeId","data-v-228ea430"]]),lc={class:"actions"},rc=T({__name:"ChartRankingTypes",props:{chain:{},txs:{},users:{}},setup(e){const{theme:t}=E(N()),s=w(()=>`Top Types (${e.chain==="all"?"All Chains":ht(e.chain)})`),{items:a,toggles:n,disabled:l}=Le(()=>{const{blue:f,yellow:y}=t.value.colors;return[{id:"txs",label:"Transactions",color:f,togglable:!0},{id:"users",label:"Users",color:y,togglable:!0}]});function r(f){return f.groupBy(y=>y.type).entries().map(([y,k])=>{const C=k.reduce((S,$)=>S+$.value,0);return{type:y,count:C}}).orderBy(y=>y.count,"desc")}const i=w(()=>{const{colors:f}=t.value;return Ie(t.value,{chart:{type:"bar",animations:{enabled:!1}},colors:[f.blue,f.yellow],xaxis:{categories:p.value,labels:{formatter:g}},yaxis:{labels:{formatter:_}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),c=w(()=>n.txs.value?r(e.txs):[]),d=w(()=>n.users.value?r(e.users):[]),p=w(()=>c.value.concat(d.value).orderBy(f=>f.count,"desc").map(f=>f.type).uniq()),v=w(()=>{const f=p.value.map(k=>{const C=c.value.find(S=>S.type===k);return C?C.count:0}),y=p.value.map(k=>{const C=d.value.find(S=>S.type===k);return C?C.count:0});return[{data:n.txs.value?f:[]},{data:n.users.value?y:[]}]}),g=f=>f,_=f=>`${Q(f,0,"dollar")}${H(f,"dollar")}`;return(f,y)=>{const k=Se,C=Ve,S=D;return h(),L(S,{title:o(s)},{actions:b(()=>[u("div",lc,[m(k,{items:o(a),disabled:o(l),onToggle:y[0]||(y[0]=$=>o(n)[$].value=!o(n)[$].value)},null,8,["items","disabled"])])]),default:b(()=>[m(C,{options:o(i),series:o(v)},null,8,["options","series"])]),_:1},8,["title"])}}}),ic=I(rc,[["__scopeId","data-v-0df09413"]]),cc={class:"item"},uc={class:"label"},dc=T({__name:"ActivityTypeSelect",emits:["select"],setup(e,{emit:t}){const s=t,a=["all",...Ar],n=q("all");function l(i){switch(i){case"all":return"All Types";case"crvusd":return"crvUSD";case"lending":return"Lending";case"pools":return"Pools";case"router":return"Router";case"dao":return"DAO"}}function r(i){n.value=i,s("select",n.value)}return(i,c)=>{const d=tt;return h(),L(d,{options:a,selected:o(n),onInput:r},{item:b(({item:p})=>[u("div",cc,[u("div",uc,V(l(p)),1)])]),_:1},8,["selected"])}}}),pc=I(dc,[["__scopeId","data-v-d8129200"]]),mc={class:"chains"},vc={class:"toolbar"},hc={class:"activity"},fc=T({__name:"Chains.page",setup(e){const{show:t}=E(Te());fe(()=>{t.value=!1});const s=be("chain"),a=w({get(){return s.value?s.value:"all"},set(M){s.value=M}}),n=w(()=>{const M=d.value.map(oe=>oe.chain).concat(v.value.map(oe=>oe.chain)).concat(a.value!=="all"?[a.value]:[]).uniq().orderBy(oe=>oe,"asc"),le=["ethereum"],ue=M.difference(le).orderBy(oe=>oe,"asc");return["all",...le,...ue]}),l=be("type"),r=w({get(){return l.value?l.value:"all"},set(M){l.value=M}}),i=M=>{r.value=M},{isFetching:c,data:d}=Hr(),{isFetching:p,data:v}=Qr();function g(M,le,ue,oe){return M.filter(ne=>le==="all"?!0:ne.chain===le).filter(ne=>ue==="all"?!0:ne.type===ue).groupBy(ne=>ne.timestamp).entries().map(([ne,xe])=>{const Me=xe.reduce((it,Wt)=>it+oe(Wt),0);return{timestamp:Number(ne),count:Me}})}const _=w(()=>g(d.value,a.value,r.value,M=>M.transactions)),f=w(()=>g(v.value,a.value,r.value,M=>M.users));function y(M){const oe=Math.floor(Date.now()/1e3)-7*24*60*60,xe=M.filter(Me=>Me.timestamp>=oe).reduce((Me,it)=>Me+it.count,0);return Math.round(xe/7)}const k=w(()=>{var M;return((M=_.value.at(-1))==null?void 0:M.count)??0}),C=w(()=>y(_.value)),S=w(()=>{var M;return((M=f.value.at(-1))==null?void 0:M.count)??0}),$=w(()=>y(f.value));function P(M,le,ue,oe){return M.filter(ne=>le==="all"?!0:ne.chain===le).filter(ne=>ue==="all"?!0:ne.type===ue).map(ne=>({chain:ne.chain,type:ne.type,value:oe(ne)}))}const B=w(()=>P(d.value,"all",r.value,M=>M.transactions)),K=w(()=>P(v.value,"all",r.value,M=>M.users)),x=w(()=>P(d.value,a.value,"all",M=>M.transactions)),De=w(()=>P(v.value,a.value,"all",M=>M.users));return(M,le)=>{const ue=X,oe=de;return h(),A("div",mc,[(h(),L(qt,{to:"#toolbar"},[u("div",vc,[m(o(pc),{style:{"grid-area":"type"},onSelect:i}),m(Ot,{style:{"grid-area":"chain"},class:"chain-select",chain:o(a),chains:o(n),all:!0,onSelectChain:le[0]||(le[0]=ne=>a.value=ne)},null,8,["chain","chains"])])])),u("div",hc,[m(oe,{style:{"grid-area":"kpi1"},label:"Transactions Today","has-value":!!o(c)},{default:b(()=>[m(ue,{type:"dollar",value:o(k),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi2"},label:"Avg Transactions / 7 Days","has-value":!!o(c)},{default:b(()=>[m(ue,{type:"dollar",value:o(C),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi3"},label:"Avg Users / 7 Days","has-value":!!o(p)},{default:b(()=>[m(ue,{type:"dollar",value:o(S),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi4"},label:"Users Today","has-value":!!o(p)},{default:b(()=>[m(ue,{type:"dollar",value:o($),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(o(Qi),{style:{"grid-area":"txs"},txs:o(_),loading:o(c)},null,8,["txs","loading"]),m(o(Xi),{style:{"grid-area":"users"},users:o(f),loading:o(p)},null,8,["users","loading"]),m(o(nc),{style:{"grid-area":"top-chains"},type:o(r),txs:o(B),users:o(K),loading:o(c)||o(p)},null,8,["type","txs","users","loading"]),m(o(ic),{style:{"grid-area":"top-types"},chain:o(a),txs:o(x),users:o(De),loading:o(c)||o(p)},null,8,["chain","txs","users","loading"])])])}}}),_c=I(fc,[["__scopeId","data-v-d951844b"]]),gc={class:"input-text"},yc={key:0,class:"icon"},bc=["type","value","placeholder"],wc=["onClick"],kc=T({__name:"InputText",props:Ee({placeholder:{default:""},options:{default:()=>[]},search:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},filter:{type:Function,default:()=>()=>!0},sort:{type:Function,default:null}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ee(["input","select"],["update:modelValue"]),setup(e,{emit:t}){const s=mt(e,"modelValue"),a=t,n=w(()=>{const r=e.options.filter(c=>e.filter(s.value,c));return e.sort?[...r].sort(e.sort):r}),l=r=>{const i=r.target.value;s.value=i,a("input",i)};return(r,i)=>(h(),A("div",gc,[r.search?(h(),A("span",yc,i[1]||(i[1]=[u("i",{class:"fas fa-search"},null,-1)]))):F("",!0),u("input",{type:r.search?"search":"text",value:s.value,placeholder:r.placeholder,onInput:me(l,["stop"]),onSelect:i[0]||(i[0]=me(()=>{},["stop"]))},null,40,bc),r.options&&r.autoComplete?(h(),A("div",{key:1,class:U(["items",{selectHide:!r.autoComplete}])},[(h(!0),A(Y,null,re(o(n),(c,d)=>(h(),A("div",{key:d,onClick:p=>a("select",c)},[Z(r.$slots,"item",{item:c,idx:d},()=>[R(V(c),1)],!0)],8,wc))),128))],2)):F("",!0)]))}}),$e=I(kc,[["__scopeId","data-v-1e32d7a8"]]),$c=e=>({tvl:e.total_tvl,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h}),Ts=e=>{var t,s;return{name:e.name,address:e.address.toLocaleLowerCase(),numCoins:e.n_coins,tvlUsd:e.tvl_usd,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h,coins:((t=e.coins)==null?void 0:t.map(a=>({poolIndex:a.pool_index,symbol:a.symbol,address:a.address.toLocaleLowerCase()})))??[],baseDailyApr:e.base_daily_apr,baseWeeklyApr:e.base_weekly_apr,virtualPrice:e.virtual_price,poolMethods:((s=e.pool_methods)==null?void 0:s.map(a=>a))??[]}},Cc=e=>({timestamp:e.timestamp,volume:e.volume,fees:e.fees}),Ac=e=>({timestamp:e.timestamp,tvlUSD:e.tvl_usd??0}),Gt="https://prices.curve.fi";class Sc extends Xs{async getPools(t){const s=await this.getHost(),a=await this.fetch(`${s}/chains/${t}`);return{chain:a.chain,totals:$c(a.total),pools:a.data.map(Ts)}}async getPool(t,s){const a=await this.fetch(`${Gt}/v1/pools/${t}/${s}`);return Ts(a)}async getVolume(t,s){const n=Math.floor(new Date().getTime()/1e3),l=Math.floor(n-72e5);return(await this.fetch(`${Gt}/v1/volume/usd/${t}/${s}?interval=day&start=${l}&end=${n}`)).data.map(Cc)}async getTvl(t,s){const n=Math.floor(new Date().getTime()/1e3),l=Math.floor(n-72e5);return(await this.fetch(`${Gt}/v1/snapshots/${t}/${s}/tvl?interval=day&start=${l}&end=${n}`)).data.map(Ac)}}const Lc=["cb","laf","cm","pm","pm-lrt"];function Tc(){const e="cm";if(!Lc.includes(e)){const t=`Unknown app for useApp(): ${e}`;throw Ce({text:t,type:"error"}),new Error(t)}return e}const Ct={};function Vc(e){return vn[e]}async function aa(e){const t=Tc(),s=t;if(Ct[s])return Promise.resolve(Ct[s]);const a=Vc(t);return Ct[s]=a,Ct[s]}const ft=new Sc(aa());function Ic(e){return W({queryKey:["curve-pools",e],queryFn:async({queryKey:[,t]})=>ft.getPools(t),placeholderData:Pt,enabled:w(()=>!!e.value)})}function qc(e,t){return W({queryKey:["curve-pool",t],queryFn:async({queryKey:[,s]})=>ft.getPool(e.value,s),enabled:w(()=>!!e.value)})}function Pc(e,t){const s=w(()=>t.value.map(a=>({queryKey:["curve-pool",a],queryFn:()=>ft.getPool(e.value,a),enabled:w(()=>!!e.value)})));return ko({queries:s})}function Fc(e,t){return W({queryKey:["curve-pool-volume",t],queryFn:async({queryKey:[,s]})=>ft.getVolume(e.value,s),enabled:w(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}function Bc(e,t){return W({queryKey:["curve-pool-tvl",t],queryFn:async({queryKey:[,s]})=>ft.getTvl(e.value,s),enabled:w(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}const Dc=["src"],Mc=["href"],Uc=["src"],Rc=T({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(e){const t=q("");function s(l){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${e.chain!=="ethereum"?`-${e.chain}`:""}/${l}.png`}const a=()=>{t.value="https://lend.curve.fi/images/default-crypto.png"};G(()=>e.address,l=>{t.value=s(l.toLowerCase())},{immediate:!0});const n=w(()=>{switch(e.chain){case"arbitrum":return`https://arbiscan.io/address/${e.address}`;case"ethereum":default:return`https://etherscan.io/address/${e.address}`}});return(l,r)=>l.clickable?(h(),A("a",{key:1,target:"_blank",href:o(n)},[u("img",{src:o(t),onError:a},null,40,Uc)],8,Mc)):(h(),A("img",{key:0,src:o(t),onError:a},null,40,Dc))}}),_e=I(Rc,[["__scopeId","data-v-cd98ecf0"]]),Oc={key:0},Ec=["onClick"],Wc=T({__name:"Pagination",props:{page:{},itemsCount:{},itemsPerPage:{}},emits:["page"],setup(e,{emit:t}){const s=t,a=w(()=>Math.ceil(e.itemsCount/e.itemsPerPage)),n=w(()=>{const v=[...Array(12).keys()].map(C=>C-6+e.page).filter(C=>C>=1&&C<=a.value),g=v.findIndex(C=>C===e.page),_=[],f=[],y=e.page!==1&&e.page!==a.value?[e.page]:[];let k=1;for(;;){const C=v[g-k];if(C&&C!==1&&_.unshift(C),_.length+f.length+y.length>=5||k>v.length)break;const S=v[g+k];if(S&&S!==a.value&&f.push(S),k++,_.length+f.length+y.length>=5||k>v.length)break}return[..._,...y,...f]});G(n,()=>{const d=l(e.page,1,a.value);e.page!==d&&s("page",d)});const l=(d,p,v)=>(v<p&&(v=p),Math.min(Math.max(d,p),v)),r=()=>{s("page",l(e.page-1,1,a.value))},i=()=>{s("page",l(e.page+1,1,a.value))},c=d=>{s("page",l(d,1,a.value))};return(d,p)=>o(a)>1?(h(),A("ul",Oc,[u("li",{class:U({active:d.page===1}),onClick:p[0]||(p[0]=v=>c(1))},p[2]||(p[2]=[u("button",null,"1",-1)]),2),o(a)>2?(h(),A("li",{key:0,onClick:r},p[3]||(p[3]=[u("button",null,[u("i",{class:"fas fa-chevron-left"})],-1)]))):F("",!0),(h(!0),A(Y,null,re(o(n),v=>(h(),A("li",{key:v,class:U({active:v===d.page}),onClick:g=>c(v)},[u("button",null,V(v),1)],10,Ec))),128)),o(a)>2?(h(),A("li",{key:1,onClick:i},p[4]||(p[4]=[u("button",null,[u("i",{class:"fas fa-chevron-right"})],-1)]))):F("",!0),o(a)>1?(h(),A("li",{key:2,class:U({active:d.page===o(a)}),onClick:p[1]||(p[1]=v=>c(o(a)))},[u("button",null,V(o(a)),1)],2)):F("",!0)])):F("",!0)}}),qe=I(Wc,[["__scopeId","data-v-b85c42a3"]]);function _t(e,t){const s=q(e),a=q("desc"),n=(r,i)=>{s.value=r,a.value=i},l=w(()=>({column:s.value,order:a.value}));return{sortColumn:s,sortOrder:a,sorting:l,onSort:n}}function gt(e,t){const s=q(1),a=w(()=>e.value.drop((s.value-1)*t).take(t)),n=l=>{s.value=l};return G(a,l=>{l.length===0&&(s.value=Math.max(1,Math.ceil(e.value.length/t)))}),{page:s,rowsPage:a,onPage:n}}function fs(){const e=q(1);return{page:e,onPage:s=>{e.value=s}}}const xc={class:"tokens"},Kc={class:"end"},Nc={class:"end"},Hc={class:"end"},Vs=20,Qc=T({__name:"TablePools",props:{chain:{},pools:{}},emits:["selected"],setup(e,{emit:t}){const s=t,a=["","",{id:"name",label:"Name",sort:!0},{id:"volume",label:"Volume (24h)",sort:!0,align:"end"},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:n,onSort:l}=_t("tvl"),r=w(()=>e.pools.orderBy(v=>{switch(n.value.column){case"name":return v.name;case"volume":return v.tradingVolume24h;case"tvl":return v.tvlUsd;case"util":return p(v)}},n.value.order)),{page:i,rowsPage:c,onPage:d}=gt(r,Vs);function p(v){return v.tvlUsd!==0?100*v.tradingVolume24h/v.tvlUsd:0}return(v,g)=>{const _=qe,f=_e,y=X,k=ae,C=D;return h(),L(C,{title:"Pools"},{actions:b(()=>[m(_,{"items-count":v.pools.length,"items-per-page":Vs,page:o(i),onPage:o(d)},null,8,["items-count","page","onPage"])]),default:b(()=>[m(k,{class:"pools-table","expand-side":"left",rows:o(c),columns:a,sorting:o(n),onSortColumn:o(l),onSelected:g[0]||(g[0]=S=>s("selected",S))},{row:b(({item:S})=>[u("div",xc,[(h(!0),A(Y,null,re(S.coins,$=>(h(),L(f,{key:$.address,chain:v.chain,address:$.address},null,8,["chain","address"]))),128))]),u("div",null,V(S.name),1),u("div",Kc,[m(y,{value:S.tradingVolume24h,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",Nc,[m(y,{value:S.tvlUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",Hc,[m(y,{value:p(S),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"])])]),"row-details":b(()=>g[1]||(g[1]=[R("   ")])),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),zc=I(Qc,[["__scopeId","data-v-933bf9be"]]),jc={class:"pools"},Gc={class:"toolbar"},Xc=T({__name:"Pools.page",setup(e){const t=["ethereum","arbitrum"],s=be("chain"),a=w({get(){return s.value?s.value:"ethereum"},set(f){s.value=f}}),n=q(""),{isFetching:l,data:r}=Js(a),{isFetching:i,data:c}=Ic(a),d=w(()=>{var f;return(((f=c.value)==null?void 0:f.pools)??[]).filter(y=>{const k=n.value.toLocaleLowerCase().split(" "),C=S=>k.some($=>S.toLocaleLowerCase().includes($));return C(y.name)||C(y.address)})}),{show:p,crumbs:v}=E(Te());fe(()=>{p.value=!0,v.value=[{id:"pools",label:"Pools",pathName:"pools"},{id:"pool",label:"Select pool for details",hint:!0}]});const g=Je(),_=async f=>{await g.push({name:"poolspool",params:{tab:"",chain:a.value,poolAddr:f.address}})};return(f,y)=>{const k=$e,C=X,S=de;return h(),A("div",jc,[(h(),L(qt,{to:"#toolbar"},[u("div",Gc,[m(k,{modelValue:o(n),"onUpdate:modelValue":y[0]||(y[0]=$=>J(n)?n.value=$:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Ot,{class:"chain-select",chain:o(a),chains:t,onSelectChain:y[1]||(y[1]=$=>a.value=$==="all"?"ethereum":$)},null,8,["chain"])])])),m(S,{style:{"grid-area":"kpi1"},label:"TVL","has-value":!o(l)},{default:b(()=>{var $;return[m(C,{value:(($=o(r))==null?void 0:$.total.tvl)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(S,{style:{"grid-area":"kpi2"},label:"Volume (24h)","has-value":!o(l)},{default:b(()=>{var $;return[m(C,{value:(($=o(r))==null?void 0:$.total.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(S,{style:{"grid-area":"kpi3"},label:"Fees Trading (24h)","has-value":!o(l)},{default:b(()=>{var $;return[m(C,{value:(($=o(r))==null?void 0:$.total.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(S,{style:{"grid-area":"kpi4"},label:"Fees Liquidity (24h)","has-value":!o(l)},{default:b(()=>{var $;return[m(C,{value:(($=o(r))==null?void 0:$.total.liquidityFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(zc),{style:{"grid-area":"pools"},chain:o(a),pools:o(d),loading:o(i),onSelected:_},null,8,["chain","pools","loading"])])}}}),Zc=I(Xc,[["__scopeId","data-v-c5404b72"]]),Yc={class:"tab-view"},Jc={class:"tab-headers"},eu=["onClick"],tu={class:"tabs"},su=T({__name:"TabView",props:{active:{default:0}},emits:["tab"],setup(e,{emit:t}){const s=t,a=q(null),n=Rs(),l=w(()=>(n.default?n.default():[]).filter(c=>c.props));G(()=>e.active,i=>{a.value=i,s("tab",{tab:l.value[i],index:a.value})},{immediate:!0});const r=(i,c)=>{i.props.disabled||(a.value=c,s("tab",{tab:l.value[c],index:a.value}))};return(i,c)=>(h(),A("div",Yc,[u("ul",Jc,[(h(!0),A(Y,null,re(o(l),(d,p)=>(h(),A("li",{key:p,class:U(["tab-header",{active:o(a)===p,disabled:d.props.disabled}]),onClick:v=>r(d,p)},V(d.props.header),11,eu))),128))]),u("div",tu,[(h(!0),A(Y,null,re(o(l),(d,p)=>us((h(),A("div",{key:p,class:"tab"},[(h(),L(ls(d)))])),[[$o,o(a)===p]])),128))])]))}}),Fe=I(su,[["__scopeId","data-v-fd270255"]]),Be=T({__name:"TabItem",props:{header:{default:""},disabled:{type:Boolean,default:!1}},setup(e){return(t,s)=>Z(t.$slots,"default")}}),au=new ea;function ou(e,t,s,a){return W({queryKey:["curve-token-price",t,s,a],queryFn:({queryKey:[,n,l,r]})=>au.getOHLC(e.value,n,l,r),enabled:w(()=>!!e.value&&!!t.value&&!!s.value&&!!a.value),initialData:[],initialDataUpdatedAt:0})}const nu=T({__name:"ButtonToggle",props:Ee({icon:{default:""},value:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Ee(["change"],["update:modelValue"]),setup(e,{emit:t}){const s=mt(e,"modelValue"),a=t,n=()=>{const l=!s.value;s.value=l,a("change",l)};return(l,r)=>(h(),A("button",{class:U({toggled:s.value}),onClick:n},[Z(l.$slots,"default",{},()=>[l.icon?(h(),A("i",{key:0,class:U(["icon",l.icon])},null,2)):F("",!0),R(" "+V(l.value),1)],!0)],2))}}),yt=I(nu,[["__scopeId","data-v-c3bb0294"]]),lu={class:"controls"},ru={ref:"chartRef",class:"chart"},iu=T({__name:"ChartPrice",props:{ohlc:{}},setup(e){const{theme:t}=E(N()),s=q(!1);let a=1,n=0;const{chart:l,series:r}=se({createChartOptions:te(),series:{type:"Candlestick",name:"ohlc",options:w(()=>{const{colors:d}=t.value;return{priceFormat:{type:"custom",formatter:c},upColor:d.green,borderUpColor:d.green,wickUpColor:d.green,downColor:d.red,borderDownColor:d.red,wickDownColor:d.red}})}});ee(i);function i(){if(!l.value||!r.ohlc)return;const d=s.value?-1:1,p=e.ohlc.map(v=>({time:v.time,open:Math.pow(v.open,d),high:Math.pow(v.high,d),low:Math.pow(v.low,d),close:Math.pow(v.close,d)})).uniqWith((v,g)=>v.time===g.time).orderBy(v=>v.time,"asc");p.length>0&&(r.ohlc.setData(p),n=Math.min(...p.map(v=>v.low)),a=Math.max(...p.map(v=>v.high))),l.value.timeScale().fitContent()}function c(d){const p=a-n,v=p>1?p-Math.floor(p):p,g=-Math.floor(Math.log10(v)+1)+2;return`${Q(d,g,"dollar")}${H(d,"dollar")}`}return(d,p)=>{const v=yt,g=D;return h(),L(g,{title:"Price"},{actions:b(()=>[u("div",lu,[m(v,{value:"Invert","model-value":o(s),onClick:p[0]||(p[0]=_=>s.value=!o(s))},null,8,["model-value"])])]),default:b(()=>[u("div",ru,null,512)]),_:1})}}}),cu=I(iu,[["__scopeId","data-v-8aadb59d"]]),uu={ref:"chartRef",class:"chart"},du=T({__name:"ChartVolume",props:{volume:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Area",name:"volume",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${Q(l,1,"dollar")}${H(l,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(n);function n(){if(!s.value||!a.volume)return;const l=e.volume.map(r=>({time:r.timestamp,value:r.volume})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.volume.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=D;return h(),L(i,{title:"Volume"},{default:b(()=>[u("div",uu,null,512)]),_:1})}}}),pu={ref:"chartRef",class:"chart"},mu=T({__name:"ChartTvl",props:{tvl:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Area",name:"tvl",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${Q(l,1,"dollar")}${H(l,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(n);function n(){if(!s.value||!a.tvl)return;const l=e.tvl.map(r=>({time:r.timestamp,value:r.tvl})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.tvl.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=D;return h(),L(i,{title:"TVL"},{default:b(()=>[u("div",pu,null,512)]),_:1})}}}),vu={class:"pool-overview"},hu={class:"tokens"},fu=T({__name:"PoolOverview",props:{pool:{},chain:{}},setup(e){const t=w(()=>{var g;return(g=e.pool)==null?void 0:g.address}),s=w(()=>{var g;return(g=e.pool)==null?void 0:g.coins[0].address}),a=w(()=>{var g;return(g=e.pool)==null?void 0:g.coins[1].address}),{isFetching:n,data:l}=ou(O(()=>e.chain),t,s,a),{isFetching:r,data:i}=Fc(O(()=>e.chain),t),{isFetching:c,data:d}=Bc(O(()=>e.chain),t),p=w(()=>i.value.map(g=>({timestamp:g.timestamp,volume:g.volume}))),v=w(()=>d.value.map(g=>({timestamp:g.timestamp,tvl:g.tvlUSD})));return(g,_)=>{const f=_e,y=de,k=X;return h(),A("div",vu,[m(y,{style:{"grid-area":"kpi1"},label:"Tokens","has-value":!!g.pool},{default:b(()=>{var C;return[u("div",hu,[(h(!0),A(Y,null,re(((C=g.pool)==null?void 0:C.coins)??[],S=>(h(),L(f,{key:S.address,chain:g.chain,address:S.address,clickable:!0},null,8,["chain","address"]))),128))])]}),_:1},8,["has-value"]),m(y,{style:{"grid-area":"kpi2"},label:"TVL","has-value":!!g.pool},{default:b(()=>{var C;return[m(k,{value:((C=g.pool)==null?void 0:C.tvlUsd)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(y,{style:{"grid-area":"kpi3"},label:"Volume (24h)","has-value":!!g.pool},{default:b(()=>{var C;return[m(k,{value:((C=g.pool)==null?void 0:C.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(y,{style:{"grid-area":"kpi4"},label:"Fees (24h)","has-value":!!g.pool},{default:b(()=>{var C;return[m(k,{value:((C=g.pool)==null?void 0:C.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(cu),{style:{"grid-area":"price"},ohlc:o(l),loading:o(n)},null,8,["ohlc","loading"]),m(o(du),{style:{"grid-area":"volume"},volume:o(p),loading:o(r)},null,8,["volume","loading"]),m(o(mu),{style:{"grid-area":"tvl"},tvl:o(v),loading:o(c)},null,8,["tvl","loading"])])}}}),_u=I(fu,[["__scopeId","data-v-7bbe5d84"]]),gu={},yu={class:"mev"};function bu(e,t){return h(),A("div",yu,"MEV goes here")}const wu=I(gu,[["render",bu],["__scopeId","data-v-1b58cb9c"]]);function at(e,t,s){const a=Je(),n=be("tab",e[0]),l=q(-1);return G(n,r=>l.value=e.findIndex(i=>i===r),{immediate:!0}),G(l,async r=>{r===-1&&(r=0),await a.push({name:t,params:{tab:e[r],...(s==null?void 0:s())??{}},replace:n.value===""})},{immediate:!0}),{tabActive:n,tabActiveIndex:l}}const ku={class:"pool"},$u=T({__name:"Pool.page",setup(e){const{show:t,crumbs:s}=E(Te()),a=be("chain"),n=be("poolAddr"),{isFetching:l,data:r}=qc(a,n.value);G(r,d=>{s.value=[{id:"pools",label:"Pools",pathName:"pools",params:()=>({chain:a.value})},{id:"pool",label:`Pool: ${(d==null?void 0:d.name)??"?"}`}]},{immediate:!0}),fe(()=>{t.value=!0});const{tabActive:i,tabActiveIndex:c}=at(["overview","mev"],"poolspool",()=>({chain:a.value,poolAddr:n.value}));return(d,p)=>{const v=et,g=Be,_=Fe;return h(),A("div",ku,[m(v,{class:U(["spinner",{loading:o(l)}])},null,8,["class"]),!o(l)&&o(r)?(h(),L(_,{key:0,active:o(c),onTab:p[0]||(p[0]=f=>c.value=f.index)},{default:b(()=>[m(g,{header:"Overview"},{default:b(()=>[(h(),L(ce,null,[o(i)==="overview"?(h(),L(_u,{key:0,pool:o(r),chain:o(a)},null,8,["pool","chain"])):F("",!0)],1024))]),_:1}),m(g,{header:"MEV"},{default:b(()=>[(h(),L(ce,null,[o(i)==="mev"?(h(),L(wu,{key:0,pool:o(r),chain:o(a)},null,8,["pool","chain"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),Cu=I($u,[["__scopeId","data-v-5ee3289f"]]),Au=e=>({chain:e.chain,totalDailyFeesUSD:e.totalDailyFeesUSD}),Su=e=>({name:e.name,totalDailyFeesUSD:e.totalDailyFeesUSD}),Lu=e=>({timestamp:ke(e.timestamp),controller:e.controller.toLocaleLowerCase(),collateral:e.collateral,feesUsd:e.fees_usd}),Tu=e=>({timestamp:ke(e.timestamp),chain:e.chain,feesUsd:e.fees_usd}),Vu=e=>({pool:e.pool.toLocaleLowerCase(),name:e.name,adminFees:e.admin_fees,usdValue:e.usd_value}),Iu=e=>({timestamp:ke(e.timestamp),feesUsd:e.fees_usd}),qu=e=>({timestamp:ke(e.dt),coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),precision:e.coin.precision},amount:BigInt(e.amount),amountFee:BigInt(e.fee_amount),amountReceived:e.amount_received,routerReceived:e.router_received,epoch:e.epoch,txHash:e.tx_hash.toLocaleLowerCase(),blockNumber:e.block_number}),Pu=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),Fu=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),Is="https://api-py.llama.airforce/curve/v1",Xt="https://prices.curve.fi";class Bu extends Xs{async getByChain(t){return(await this.fetch(`${Is}/protocol/revenue/chains`,void 0,t)).revenue.map(Au)}async getTopPools(t,s=10){const a=t==="ethereum"?"mainnet":t;return(await this.fetch(`${Is}/protocol/revenue/${a}/toppools/${s}`)).revenue.map(Su)}async getCrvUsdWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/crvusdweekly`)).fees.map(Lu)}async getPoolsWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/pools`)).fees.map(Tu)}async getCushions(t){return(await this.fetch(`${Xt}/v1/dao/fees/${t}/pending`)).data.map(Vu)}async getDistributions(){return await Qs(a=>this.fetch(`${Xt}/v1/dao/fees/distributions?page=${a}&per_page=100`).then(n=>n.distributions.map(Iu)),1,100)}async getCowSwapSettlements(t){return(await this.fetch(`${Xt}/v1/dao/fees/settlements${t?"?timestamp="+t.toString():""}`)).data.map(qu)}async getFeesCollected(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-collected`)).data.map(Pu)}async getFeesStaged(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-staged`)).data.map(Fu)}}const We=new Bu(aa());function ot(){return{initialData:[],initialDataUpdatedAt:0}}function Du(e){return W({queryKey:["curve-cushions",e],queryFn:({queryKey:[,t]})=>We.getCushions(t).then(s=>s.sort((a,n)=>n.usdValue-a.usdValue)),...ot()})}function Mu(){return W({queryKey:["curve-revenue-distributions"],queryFn:()=>We.getDistributions(),initialData:[],initialDataUpdatedAt:0})}function Uu(){return W({queryKey:["curve-revenue-cow-settlements"],queryFn:()=>We.getCowSwapSettlements(),...ot()})}function Ru(){return W({queryKey:["curve-revenue-crvusd-weekly"],queryFn:()=>We.getCrvUsdWeekly(),...ot()})}function Ou(){return W({queryKey:["curve-revenue-pools-weekly"],queryFn:()=>We.getPoolsWeekly(),...ot()})}function Eu(){return W({queryKey:["curve-revenue-fees-collected"],queryFn:()=>We.getFeesCollected(),...ot()})}function Wu(){return W({queryKey:["curve-revenue-fees-staged"],queryFn:()=>We.getFeesStaged(),...ot()})}const xu={class:"actions"},Ku=T({__name:"ChartBreakdown",setup(e){const{theme:t}=E(N()),{items:s}=Le(()=>[{id:"crvusd",label:"crvUSD",color:t.value.colorsArray[0]},{id:"pools",label:"Pools",color:t.value.colorsArray[1]}]),{isFetching:a,data:n}=Ru(),{isFetching:l,data:r}=Ou(),i=w(()=>a.value||l.value),c=w(()=>{const{colors:f,colorsArray:y}={colors:t.value.colors,colorsArray:[t.value.colorsArray[0],t.value.colorsArray[1]]};return Ie({colors:f,colorsArray:y},{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:g.value,labels:{formatter:k=>k,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:k=>`$${Q(k,0,"dollar")}${H(k,"dollar")}`},min:0},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})});function d(f){return f.groupBy(y=>y.timestamp).entries().map(([y,k])=>{const C=k.reduce((S,$)=>S+$.feesUsd,0);return{timestamp:Number(y),feesUsd:C}}).orderBy(y=>y.timestamp,"asc")}const p=w(()=>{const f=d(n.value),y=d(r.value);return f.concat(y).groupBy(k=>k.timestamp).entries().map(([,k])=>({timestamp:k[0].timestamp,numLabels:k.length})).orderBy(k=>k.timestamp,"asc").dropWhile(k=>k.numLabels<2).map(k=>k.timestamp)});function v(f){return new Date(f*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"short"})}const g=w(()=>p.value.map(f=>v(f))),_=w(()=>{function f(C){return d(C).map(S=>({x:v(S.timestamp),y:S.feesUsd}))}const y={name:"crvusd",data:f(n.value)},k={name:"pools",data:f(r.value)};return[y,k]});return(f,y)=>{const k=Se,C=Ve,S=D;return h(),L(S,{title:"Revenue breakdown by source",loading:o(i)},{actions:b(()=>[u("div",xu,[m(k,{items:o(s)},null,8,["items"])])]),default:b(()=>[m(C,{options:o(c),series:o(_)},null,8,["options","series"])]),_:1},8,["loading"])}}}),Nu=I(Ku,[["__scopeId","data-v-64fe1b42"]]),Hu={class:"overview"},Qu=T({__name:"Overview",setup(e){return(t,s)=>(h(),A("div",Hu,[m(Nu,{style:{"grid-area":"breakdown"},class:"breakdown"})]))}}),zu=I(Qu,[["__scopeId","data-v-9842f493"]]),ju={class:"end"},Gu=T({__name:"TableDistributions",props:{distributions:{}},setup(e){const t=[{id:"timestamp",label:"Date",sort:!0},{id:"fees",label:"Fees",sort:!0,align:"end"}],{sorting:s,onSort:a}=_t("timestamp"),n=w(()=>e.distributions.orderBy(r=>{switch(s.value.column){case"timestamp":return r.timestamp;case"fees":return r.feesUsd}},s.value.order));function l(r){return new Date(r*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(r,i)=>{const c=X,d=ae,p=D;return h(),L(p,{title:"Distributions"},{default:b(()=>[m(d,{class:"distributions-table",rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:b(({item:{timestamp:v,feesUsd:g}})=>[u("div",null,V(l(v)),1),u("div",ju,[m(c,{value:g,precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Xu=I(Gu,[["__scopeId","data-v-02e84c57"]]),Zu={class:"actions"},Yu={ref:"chartRef",class:"chart"},Ju=T({__name:"ChartDistributions",props:{distributions:{}},setup(e){const{theme:t}=E(N()),s=q(!1),a=ye("card"),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Histogram",name:"distributions",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`$${Q(i,0,"dollar")}${H(i,"dollar")}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.distributions)return;const i=e.distributions.map(c=>({time:c.timestamp,value:c.feesUsd})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc").takeRight(52);if(i.length>0){l.distributions.setData(i);const c=i[0].time,d=i[i.length-1].time;n.value.timeScale().setVisibleRange({from:c,to:d})}}return(i,c)=>{const d=D;return h(),L(d,{ref_key:"card",ref:a,title:"Distributions (1y)"},{actions:b(()=>{var p;return[u("div",Zu,[m(o(st),{modelValue:o(s),"onUpdate:modelValue":c[0]||(c[0]=v=>J(s)?s.value=v:null),chart:o(n),target:(p=o(a))==null?void 0:p.$el},null,8,["modelValue","chart","target"])])]}),default:b(()=>[u("div",Yu,null,512)]),_:1},512)}}}),ed=I(Ju,[["__scopeId","data-v-dbc26173"]]),td={class:"actions"},sd={ref:"chartRef",class:"chart"},ad=T({__name:"ChartDistributionsDelta",props:{distributions:{}},setup(e){const{theme:t}=E(N()),s=q(!1),a=ye("card"),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Histogram",name:"deltas",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`$${Q(i,0,"dollar")}${H(i,"dollar")}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.deltas)return;const{colors:i}=t.value,c=e.distributions.map(d=>({time:d.timestamp,value:d.feesUsd})).uniqWith((d,p)=>d.time===p.time).orderBy(d=>d.time,"asc").takeRight(53).reduce((d,p,v,g)=>{if(v===0)return d;const _=p.value-g[v-1].value,f=_<0?i.red:i.green;return d.push({time:p.time,value:_,color:f}),d},[]);if(c.length>0){l.deltas.setData(c);const d=c[0].time,p=c[c.length-1].time;n.value.timeScale().setVisibleRange({from:d,to:p})}}return(i,c)=>{const d=D;return h(),L(d,{ref_key:"card",ref:a,title:"Distributions Change (1y)"},{actions:b(()=>{var p;return[u("div",td,[m(o(st),{modelValue:o(s),"onUpdate:modelValue":c[0]||(c[0]=v=>J(s)?s.value=v:null),chart:o(n),target:(p=o(a))==null?void 0:p.$el},null,8,["modelValue","chart","target"])])]}),default:b(()=>[u("div",sd,null,512)]),_:1},512)}}}),od=I(ad,[["__scopeId","data-v-c4807dce"]]),nd={class:"distributions"},ld=T({__name:"Distributions",setup(e){const{isFetching:t,data:s}=Mu(),a=w(()=>s.value.sumBy(r=>r.feesUsd)),n=w(()=>s.value.orderBy(r=>r.timestamp,"desc").take(52).meanBy(r=>r.feesUsd)),l=w(()=>{const r=s.value.orderBy(d=>d.timestamp,"desc").take(52).map(d=>d.feesUsd),i=r.meanBy(d=>d),c=r.map(d=>Math.pow(d-i,2));return Math.sqrt(c.sumBy(d=>d)/(r.length-1))});return(r,i)=>{const c=X,d=de;return h(),A("div",nd,[m(d,{style:{"grid-area":"kpi1"},label:"Total","has-value":o(s).length>0},{default:b(()=>[m(c,{value:o(a),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{style:{"grid-area":"kpi2"},label:"Average (1y)","has-value":o(s).length>0},{default:b(()=>[m(c,{value:o(n),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{style:{"grid-area":"kpi3"},label:"Standard Deviation (1y)","has-value":o(s).length>0},{default:b(()=>[m(c,{value:o(l),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(ed,{style:{"grid-area":"chart"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),m(od,{style:{"grid-area":"delta"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),m(Xu,{style:{"grid-area":"table"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"])])}}}),rd=I(ld,[["__scopeId","data-v-323bca14"]]),id=["href"],cd={class:"end"},ud={class:"end"},dd=T({__name:"TableCushions",setup(e){const t=q(""),s=w(()=>l.value||c.value),a=q("ethereum"),{data:n,isFetching:l}=Nr(),r=w(()=>i.value.filter(p=>p.usdValue>100).filter(p=>{const v=t.value.toLocaleLowerCase().split(" "),g=_=>v.some(f=>_.toLocaleLowerCase().includes(f));return g(p.pool)||g(p.name)})),{data:i,isFetching:c}=Du(a),d=p=>`https://etherscan.io/address/${p}`;return(p,v)=>{const g=$e,_=X,f=ae,y=D;return h(),L(y,{class:"cushions-card",title:"Cushions",loading:o(s)},{actions:b(()=>[m(Ot,{class:"chain-select",chain:o(a),chains:o(n),onSelectChain:v[0]||(v[0]=k=>a.value=k==="all"?"ethereum":k)},null,8,["chain","chains"]),m(g,{modelValue:o(t),"onUpdate:modelValue":v[1]||(v[1]=k=>J(t)?t.value=k:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:b(()=>[m(f,{class:"cushions-table",rows:o(r),columns:["Name","Address",{label:"Fees ($)",align:"end"}]},{row:b(({item:k})=>[u("div",null,V(k.name),1),u("div",null,[u("a",{class:"font-mono",href:d(k.pool),target:"_blank"},V(k.pool),9,id)]),u("div",cd,[m(_,{value:k.usdValue,precision:2,type:"dollar"},null,8,["value"])])]),"row-aggregation":b(()=>[v[2]||(v[2]=u("div",null,null,-1)),v[3]||(v[3]=u("div",null,null,-1)),u("div",ud,[m(_,{value:o(r).reduce((k,C)=>k+C.usdValue,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),pd=I(dd,[["__scopeId","data-v-2c759ace"]]),md={class:"cushions"},vd=T({__name:"Cushions",setup(e){return(t,s)=>(h(),A("div",md,[m(pd)]))}}),hd=I(vd,[["__scopeId","data-v-78dd0726"]]),fd=e=>({auctionStartBlock:e.auctionStartBlock,orders:e.auction.orders.map(t=>t),prices:Object.entries(e.auction.prices).reduce((t,[s,a])=>(t[s]=BigInt(a),t),{}),solutions:e.solutions.map(t=>({solver:t.solver,solverAddress:t.solverAddress,score:BigInt(t.score),ranking:t.ranking,clearingPrices:Object.entries(t.clearingPrices).reduce((s,[a,n])=>(s[a]=BigInt(n),s),{}),orders:t.orders.map(s=>({id:s.id,sellAmount:BigInt(s.sellAmount),buyAmount:BigInt(s.buyAmount)}))}))}),_d="https://api.cow.fi";class gd extends Ae{async getCompetition(t){const s=await this.fetch(`${_d}/mainnet/api/v1/solver_competition/by_tx_hash/${t}`);return fd(s)}}const yd=new gd;function bd(e){return W({queryKey:["solver-competition",e],queryFn:({queryKey:[,t]})=>yd.getCompetition(t)})}const wd={class:"settlement-details-body"},kd={class:"info col"},$d={class:"buttons"},Cd={class:"font-mono json"},Ad={key:0,class:"fas fa-trophy"},Sd={key:1},Ld=["href"],Td=T({__name:"SettlementDetails",props:{settlement:{}},setup(e){const{data:t,isPending:s}=bd(O(()=>e.settlement.txHash)),a=w(()=>t.value?JSON.stringify(t.value,(v,g)=>typeof g=="bigint"?g.toString():g,2):"no data"),n=w(()=>t.value?t.value.solutions.orderBy(v=>v.ranking,"asc"):[]);function l(v){return`https://etherscan.io/address/${v}`}async function r(v){await navigator.clipboard.writeText(v)}async function i(){await navigator.clipboard.writeText(a.value)}function c(v){switch(v){case 1:return"gold";case 2:return"silver";case 3:return"bronze";default:return""}}const d=q(!1),p=ye("cardJson");return(v,g)=>{const _=de,f=ve,y=sa,k=D,C=ae;return h(),L(k,{class:"settlement-details"},{default:b(()=>[u("div",wd,[u("div",kd,[m(_,{label:"Auction Start Block","has-value":!o(s)},{default:b(()=>{var S;return[R(V(((S=o(t))==null?void 0:S.auctionStartBlock)??0),1)]}),_:1},8,["has-value"]),m(_,{label:"Solvers","has-value":!o(s)},{default:b(()=>{var S,$;return[R(V((($=(S=o(t))==null?void 0:S.solutions)==null?void 0:$.length)??0),1)]}),_:1},8,["has-value"]),m(_,{label:"Orders","has-value":!o(s)},{default:b(()=>{var S,$;return[R(V((($=(S=o(t))==null?void 0:S.orders)==null?void 0:$.length)??0),1)]}),_:1},8,["has-value"]),m(k,{ref_key:"cardJson",ref:p,class:"card-json col",title:"Json"},{actions:b(()=>[u("div",$d,[m(f,{icon:"fas fa-link",onClick:g[0]||(g[0]=S=>i())}),m(f,{onClick:g[2]||(g[2]=S=>d.value=!o(d))},{default:b(()=>{var S;return[g[3]||(g[3]=u("i",{class:"fas fa-expand"},null,-1)),m(y,{target:(S=o(p))==null?void 0:S.$el,show:o(d),onClose:g[1]||(g[1]=$=>d.value=!1)},null,8,["target","show"])]}),_:1})])]),default:b(()=>[u("div",Cd,V(o(a)),1)]),_:1},512)]),m(k,{class:"col",title:"Solvers"},{default:b(()=>[m(C,{class:"solvers-table col",rows:o(n)},{row:b(({item:{solver:S,solverAddress:$,ranking:P,score:B}})=>[u("div",{class:U(["trophy",c(P)])},[P<=3?(h(),A("i",Ad)):(h(),A("span",Sd,V(P),1))],2),u("div",null,[u("a",{class:"font-mono",href:l($),target:"_blank"},V(S),9,Ld)]),u("div",null,V(B),1),u("div",null,[m(f,{icon:"fas fa-link",onClick:K=>r($)},null,8,["onClick"])])]),_:1},8,["rows"])]),_:1})])]),_:1})}}}),Vd=I(Td,[["__scopeId","data-v-fb6fc430"]]);function oa(){const e=q([]);return{expanded:e,toggleExpansion:s=>{const a=e.value.findIndex(n=>n===s);return a===-1?(e.value.push(s),!0):(e.value.splice(a,1),!1)}}}const Id={class:"header-content"},qd={class:"token"},Pd=["href"],Fd={class:"end"},Bd={class:"end"},Dd={class:"end"},Md={class:"end profit"},Ud={class:"end"},Rd=["href"],Od={class:"end"},qs=15,Ed=T({__name:"TableSettlements",props:{settlements:{}},setup(e){const t=[{id:"token",label:"Token",sort:!1},{id:"amount",label:"Amount",sort:!0,align:"end"},{id:"quote",label:"Quote",sort:!0,align:"end"},{id:"profit",label:"Profit",sort:!0,align:"end"},{id:"profitPct",label:"(%)",sort:!0,align:"end"},{id:"tx",label:"Transaction",sort:!1,align:"end"},{id:"timestamp",label:"Time",sort:!0,align:"end"}],{sorting:s,onSort:a}=_t("timestamp"),n=w(()=>e.settlements.orderBy(f=>{switch(s.value.column){case"amount":return f.amountReceived;case"quote":return f.routerReceived;case"profit":return v(f);case"profitPct":return g(f);case"timestamp":return f.timestamp}},s.value.order)),{page:l,rowsPage:r,onPage:i}=gt(n,qs),{expanded:c,toggleExpansion:d}=oa(),{relativeTime:p}=Pe();function v(f){return f.amountReceived-f.routerReceived}function g(f){return 100*f.amountReceived/f.routerReceived-100}function _(f){const y=f.coin.symbol;return y.includes(":")?y.split(":")[1]:y}return(f,y)=>{const k=qe,C=_e,S=X,$=ae,P=D;return h(),L(P,{title:"CowSwap Settlements"},{actions:b(()=>[u("div",Id,[m(k,{"items-count":o(n).length,"items-per-page":qs,page:o(l),onPage:o(i)},null,8,["items-count","page","onPage"])])]),default:b(()=>[m($,{class:"settlements-table",rows:o(r),columns:t,sorting:o(s),expanded:o(c),"expand-side":"right",onSortColumn:o(a),onSelected:o(d)},{row:b(({item:B})=>[u("div",qd,[m(C,{address:B.coin.address},null,8,["address"]),u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${B.coin.address}`},V(_(B)),9,Pd)]),u("div",Fd,[m(S,{value:B.amountReceived,precision:2,type:"dollar"},null,8,["value"])]),u("div",Bd,[m(S,{value:B.routerReceived,precision:2,type:"dollar"},null,8,["value"])]),u("div",Dd,[B.routerReceived>1?(h(),L(S,{key:0,value:v(B),precision:2,inline:!1,type:"dollar"},null,8,["value"])):F("",!0)]),u("div",Md,[B.routerReceived>1?(h(),L(S,{key:0,class:U(["pct",{green:g(B)>0}]),value:g(B),precision:2,inline:!1,type:"percentage"},null,8,["value","class"])):F("",!0)]),u("div",Ud,[u("a",{class:"font-mono",href:`https://explorer.cow.fi/tx/${B.txHash}`,target:"_blank",onClick:y[0]||(y[0]=me(()=>{},["stop"]))},V(o(we)(B.txHash)),9,Rd)]),u("div",Od,V(o(p)(B.timestamp)),1)]),"row-details":b(({item:B})=>[y[1]||(y[1]=u("div",{class:"empty"},null,-1)),o(c).includes(B)?(h(),L(Vd,{key:0,settlement:B},null,8,["settlement"])):F("",!0)]),_:1},8,["rows","sorting","expanded","onSortColumn","onSelected"])]),_:1})}}}),Wd=I(Ed,[["__scopeId","data-v-d802bf88"]]),xd={class:"settlements"},Kd=T({__name:"Settlements",setup(e){const{isFetching:t,data:s}=Uu();return(a,n)=>(h(),A("div",xd,[m(Wd,{style:{"grid-area":"table"},settlements:o(s),loading:o(t)},null,8,["settlements","loading"])]))}}),Nd=I(Kd,[["__scopeId","data-v-3297d635"]]),Hd=["href"],Qd={class:"end"},zd={class:"end"},jd={class:"end"},Gd=T({__name:"TableFeesCollected",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:a}=_t("amountUsd"),n=w(()=>e.fees.orderBy(l=>{switch(s.value.column){case"symbol":return l.coin.symbol;case"amount":return l.amount;default:return l.amountUsd}},s.value.order));return(l,r)=>{const i=_e,c=X,d=ae,p=D;return h(),L(p,{title:"Fees Collected"},{default:b(()=>[m(d,{rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:b(({item:v})=>[m(i,{address:v.coin.address},null,8,["address"]),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},V(v.coin.symbol),9,Hd)]),u("div",Qd,[m(c,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",zd,[m(c,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":b(()=>[r[0]||(r[0]=u("div",null,null,-1)),r[1]||(r[1]=u("div",null,null,-1)),r[2]||(r[2]=u("div",null,null,-1)),u("div",jd,[m(c,{value:o(n).reduce((v,g)=>v+g.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Xd=I(Gd,[["__scopeId","data-v-3753f4b2"]]),Zd=["href"],Yd={class:"end"},Jd={class:"end"},ep={class:"end"},tp=T({__name:"TableFeesStaged",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:a}=_t("amountUsd"),n=w(()=>e.fees.orderBy(l=>{switch(s.value.column){case"symbol":return l.coin.symbol;case"amount":return l.amount;default:return l.amountUsd}},s.value.order));return(l,r)=>{const i=_e,c=X,d=ae,p=D;return h(),L(p,{title:"Fees Staged"},{default:b(()=>[m(d,{rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:b(({item:v})=>[m(i,{address:v.coin.address},null,8,["address"]),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},V(v.coin.symbol),9,Zd)]),u("div",Yd,[m(c,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",Jd,[m(c,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":b(()=>[r[0]||(r[0]=u("div",null,null,-1)),r[1]||(r[1]=u("div",null,null,-1)),r[2]||(r[2]=u("div",null,null,-1)),u("div",ep,[m(c,{value:o(n).reduce((v,g)=>v+g.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),sp=I(tp,[["__scopeId","data-v-95ca85e3"]]),ap={class:"harvesting"},op=T({__name:"Harvesting",setup(e){const{isFetching:t,data:s}=Eu(),{isFetching:a,data:n}=Wu();return(l,r)=>(h(),A("div",ap,[m(Xd,{style:{"grid-area":"collected"},fees:o(s),loading:o(t)},null,8,["fees","loading"]),m(sp,{style:{"grid-area":"staged"},fees:o(n),loading:o(a)},null,8,["fees","loading"])]))}}),np=I(op,[["__scopeId","data-v-2bec8864"]]),lp={class:"revenue"},rp=T({__name:"Revenue.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["overview","distributions","cushions","settlements","harvesting"],"revenue");return(a,n)=>{const l=Be,r=Fe;return h(),A("div",lp,[m(r,{active:o(s),onTab:n[0]||(n[0]=i=>s.value=i.index)},{default:b(()=>[m(l,{header:"Revenue"},{default:b(()=>[(h(),L(ce,null,[o(t)==="overview"?(h(),L(zu,{key:0})):F("",!0)],1024))]),_:1}),m(l,{header:"Distributions"},{default:b(()=>[(h(),L(ce,null,[o(t)==="distributions"?(h(),L(rd,{key:0})):F("",!0)],1024))]),_:1}),m(l,{header:"Cushions"},{default:b(()=>[(h(),L(ce,null,[o(t)==="cushions"?(h(),L(hd,{key:0})):F("",!0)],1024))]),_:1}),m(l,{header:"Settlements"},{default:b(()=>[(h(),L(ce,null,[o(t)==="settlements"?(h(),L(Nd,{key:0})):F("",!0)],1024))]),_:1}),m(l,{header:"Harvesting"},{default:b(()=>[(h(),L(ce,null,[o(t)==="harvesting"?(h(),L(np,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),ip=I(rp,[["__scopeId","data-v-995223b6"]]),cp={class:"end"},up={class:"end"},dp={class:"end"},pp={class:"end"},mp={class:"end"},vp={class:"end"},hp={class:"end"},fp={class:"end"},_p=T({__name:"TablePegkeepers",setup(e){const t=q(""),s=w(()=>p.value||l.value),a=w(()=>r.value.map(f=>{const y=v.value.find(k=>f.pool_address===k.address);if(y)return{...y,...f}}).filter(dn).orderBy(f=>f.tvlUsd,"desc")),n=w(()=>a.value.filter(f=>{const y=t.value.toLocaleLowerCase().split(" "),k=C=>y.some(S=>C.toLocaleLowerCase().includes(S));return k(f.name)||k(f.address)})),{isFetching:l,data:r}=ta(),i=f=>`${f.pair[1].symbol} / ${f.pair[0].symbol}`,c=w(()=>r.value.map(f=>f.pool_address)),d=Pc(q("ethereum"),c),p=w(()=>d.value.some(f=>f.isFetching)),v=w(()=>d.value.filter(f=>f.data).map(f=>f.data)),g=f=>f>=1e6?2:0,_=f=>f.pair.filter(y=>y.address!==mn)[0].address;return(f,y)=>{const k=$e,C=_e,S=X,$=ae,P=D;return h(),L(P,{class:"pegkeepers-card",title:"Pegkeepers",loading:o(s)},{actions:b(()=>[m(k,{modelValue:o(t),"onUpdate:modelValue":y[0]||(y[0]=B=>J(t)?t.value=B:null),placeholder:"Search for..",search:!0},null,8,["modelValue"])]),default:b(()=>[m($,{class:"pegkeepers-table",rows:o(n),columns:["","Name",{label:"Debt",align:"end"},{label:"TVL",align:"end"},{label:"Volume",align:"end"},{label:"Fees",align:"end"}]},{row:b(({item:B})=>[m(C,{chain:"ethereum",address:_(B)},null,8,["address"]),u("div",null,V(i(B)),1),u("div",cp,[m(S,{value:B.total_debt,precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",up,[m(S,{value:B.tvlUsd,precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",dp,[m(S,{value:B.tradingVolume24h,precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",pp,[m(S,{value:B.total_profit,precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":b(()=>[y[1]||(y[1]=u("div",null,null,-1)),y[2]||(y[2]=u("div",null,null,-1)),u("div",mp,[m(S,{value:o(n).reduce((B,K)=>B+K.total_debt,0),precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",vp,[m(S,{value:o(n).reduce((B,K)=>B+K.tvlUsd,0),precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",hp,[m(S,{value:o(n).reduce((B,K)=>B+K.tradingVolume24h,0),precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])]),u("div",fp,[m(S,{value:o(n).reduce((B,K)=>B+K.total_profit,0),precision:g,"show-zero":!0,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),gp=I(_p,[["__scopeId","data-v-d4367a06"]]),yp={class:"end"},bp={class:"end"},wp={class:"end"},kp={class:"end"},$p={class:"end"},Cp={class:"end"},Ap={class:"end"},Sp={class:"end"},Lp={class:"end"},Tp={class:"end"},Vp={class:"end"},Ip=T({__name:"TableMarkets",emits:["selected"],setup(e,{emit:t}){const s=t,a=q(""),n=w(()=>r.value.filter(c=>{const d=a.value.toLocaleLowerCase().split(" "),p=v=>d.some(g=>v.toLocaleLowerCase().includes(g));return p(c.name)||p(c.address)}).orderBy(c=>c.borrowed,"desc")),{isFetching:l,data:r}=hs(),i=c=>c>=1e6?2:0;return(c,d)=>{const p=$e,v=_e,g=X,_=ae,f=D;return h(),L(f,{class:"markets-card",title:"Markets",loading:o(l)},{actions:b(()=>[m(p,{modelValue:o(a),"onUpdate:modelValue":d[0]||(d[0]=y=>J(a)?a.value=y:null),placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:b(()=>[m(_,{class:"markets-table","expand-side":"left",rows:o(n),columns:["","","Name",{label:"Loans",align:"end"},{label:"Rate",align:"end"},{label:"Borrowed",align:"end"},{label:"Collateral",align:"end"},{label:"Fees Pending",align:"end"},{label:"Fees Collected",align:"end"}],onSelected:d[1]||(d[1]=y=>s("selected",y))},{row:b(({item:y})=>[m(v,{chain:"ethereum",address:y.collateral_token.address},null,8,["address"]),u("div",null,V(y.name),1),u("div",yp,V(y.loans),1),u("div",bp,[m(g,{value:y.rate*100,precision:2,type:"percentage"},null,8,["value"])]),u("div",wp,[m(g,{value:y.borrowed,precision:i,"show-symbol":!1,type:"dollar"},null,8,["value"])]),u("div",kp,[m(g,{value:y.collateralUsd,precision:i,type:"dollar"},null,8,["value"])]),u("div",$p,[m(g,{value:y.fees.pending,precision:i,type:"dollar"},null,8,["value"])]),u("div",Cp,[m(g,{value:y.fees.collected,precision:i,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":b(()=>[d[2]||(d[2]=u("div",null,null,-1)),d[3]||(d[3]=u("div",null,null,-1)),d[4]||(d[4]=u("div",null,null,-1)),u("div",Ap,V(o(n).reduce((y,k)=>y+k.loans,0)),1),d[5]||(d[5]=u("div",null,null,-1)),u("div",Sp,[m(g,{value:o(n).reduce((y,k)=>y+k.borrowed,0),precision:i,"show-symbol":!1,type:"dollar"},null,8,["value"])]),u("div",Lp,[m(g,{value:o(n).reduce((y,k)=>y+k.collateralUsd,0),precision:i,type:"dollar"},null,8,["value"])]),u("div",Tp,[m(g,{value:o(n).reduce((y,k)=>y+k.fees.pending,0),precision:i,type:"dollar"},null,8,["value"])]),u("div",Vp,[m(g,{value:o(n).reduce((y,k)=>y+k.fees.collected,0),precision:i,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-details":b(()=>d[6]||(d[6]=[R("   ")])),_:1},8,["rows"])]),_:1},8,["loading"])}}}),qp=I(Ip,[["__scopeId","data-v-1b30d4b7"]]),Pp={class:"actions"},Fp={class:"chart-types"},Bp=T({__name:"ChartCrvUsdSupply",setup(e){const{theme:t}=E(N()),s=q("line"),{items:a}=Le(()=>[{id:"supply",label:"Supply",color:t.value.colorsArray[0]},{id:"borrowed",label:"Borrowed",color:t.value.colorsArray[1]}]),{isFetching:n,data:l}=ai(),r=i=>{s.value!==i&&(s.value=i)};return(i,c)=>{const d=Se,p=yt,v=D;return h(),L(v,{title:"crvUSD Supply",loading:o(n)},{actions:b(()=>[u("div",Pp,[o(s)==="line"?(h(),L(d,{key:0,items:o(a)},null,8,["items"])):F("",!0),u("div",Fp,[m(p,{value:"Line","model-value":o(s)==="line",onClick:c[0]||(c[0]=g=>r("line"))},null,8,["model-value"]),m(p,{value:"Breakdown","model-value":o(s)==="breakdown",onClick:c[1]||(c[1]=g=>r("breakdown"))},null,8,["model-value"])])])]),default:b(()=>[(h(),L(ce,null,[o(s)==="line"?(h(),L(o(Op),{key:0,data:o(l)},null,8,["data"])):F("",!0)],1024)),(h(),L(ce,null,[o(s)==="breakdown"?(h(),L(o(Up),{key:0,data:o(l)},null,8,["data"])):F("",!0)],1024))]),_:1},8,["loading"])}}}),Dp=I(Bp,[["__scopeId","data-v-ac5d90ed"]]),Mp=T({__name:"ChartCrvUsdSupplyBreakdown",props:{data:{default:()=>[]}},setup(e){const{theme:t}=E(N()),s=w(()=>Ie(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:a.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:i},min:0,max:l.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),a=w(()=>e.data.orderBy(c=>c.timestamp,"asc").groupBy(c=>c.timestamp).entries().map(([c])=>new Date(parseInt(c,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((c,d)=>d%8===0?c:"")),n=w(()=>e.data.groupBy(c=>c.market).entries().map(([c,d])=>({name:c,data:d.groupBy(p=>p.timestamp).entries().map(([p,v])=>({x:new Date(parseInt(p,10)*1e3).toLocaleDateString(),y:v.reduce((g,_)=>g+_.supply,0)})).orderBy(p=>p.x,"asc")}))),l=w(()=>Math.max(...e.data.groupBy(c=>c.timestamp).entries().map(([,c])=>c.reduce((d,p)=>d+p.supply,0)))*1.1),r=c=>c,i=c=>`${Q(c,1,"dollar")}${H(c,"dollar")}`;return(c,d)=>{const p=Ve;return h(),L(p,{options:o(s),series:o(n)},null,8,["options","series"])}}}),Up=I(Mp,[["__scopeId","data-v-a3ef57c5"]]),Rp={ref:"chartRef",class:"chart"},Op=T({__name:"ChartCrvUsdSupplyLine",props:{data:{default:()=>[]}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:[{type:"Area",name:"supply",options:w(()=>({priceFormat:{type:"custom",formatter:l},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:w(()=>({priceFormat:{type:"custom",formatter:l},lineWidth:2,lineType:ie.WithSteps,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(n);function n(){if(!s.value||!a.debt||!a.supply)return;const r=e.data.groupBy(c=>c.timestamp).entries().map(([,c])=>{var d;return{time:c[0].timestamp,value:c.reduce((p,v)=>p+v.supply,0),debt:((d=c.find(p=>p.market==="Keepers debt"))==null?void 0:d.supply)??0}}).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc"),i=r.map(c=>({time:c.time,value:c.value-c.debt}));r.length>0&&a.supply.setData(r),i.length>0&&a.debt.setData(i),s.value.timeScale().fitContent()}function l(r){return`${Q(r,0,"dollar")}${H(r,"dollar")}`}return(r,i)=>(h(),A("div",Rp,null,512))}}),Ep={ref:"chartRef",class:"chart"},Wp=T({__name:"ChartMarketAvailableCap",props:{market:{}},setup(e){const{isFetching:t,data:s}=Rt(O(()=>e.market)),{theme:a}=E(N()),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Area",name:"available",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`$${Q(i,0,"dollar")}${H(i,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.available)return;const i=s.value.map(c=>({time:c.timestamp,value:c.borrowable})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc").dropWhile(c=>c.value===0);i.length>0&&l.available.setData(i),n.value.timeScale().fitContent()}return(i,c)=>{const d=D;return h(),L(d,{title:"Borrowable & Debt Ceiling",loading:o(t)},{default:b(()=>[u("div",Ep,null,512)]),_:1},8,["loading"])}}}),xp={ref:"chartRef",class:"chart"},Kp=T({__name:"ChartMarketLoans",props:{market:{}},setup(e){const{isFetching:t,data:s}=Rt(O(()=>e.market)),{theme:a}=E(N()),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Histogram",name:"loans",options:w(()=>({color:a.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.loans)return;const i=s.value.map(c=>({time:c.timestamp,value:c.nLoans})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc");if(i.length>0){l.loans.setData(i);const c=i[0].time,d=i[i.length-1].time;n.value.timeScale().setVisibleRange({from:c,to:d})}}return(i,c)=>{const d=D;return h(),L(d,{title:"Loans",loading:o(t)},{default:b(()=>[u("div",xp,null,512)]),_:1},8,["loading"])}}}),Np=["min","max"],Hp=T({__name:"InputNumber",props:Ee({min:{default:()=>-1/0},max:{default:()=>1/0}},{modelValue:{required:!0,default:null},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=mt(e,"modelValue");return G(t,s=>{s===""?t.value=null:typeof s=="number"&&(t.value=Math.min(Math.max(s,e.min),e.max))}),(s,a)=>us((h(),A("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),type:"number",min:s.min,max:s.max},null,8,Np)),[[Es,t.value]])}}),Et=I(Hp,[["__scopeId","data-v-f5938ab8"]]),Qp={class:"actions"},zp={ref:"chartRef",class:"chart"},jp=T({__name:"ChartMarketRates",props:{market:{}},setup(e){const{isFetching:t,data:s}=Rt(O(()=>e.market)),{theme:a}=E(N()),n=q(null),{chart:l,series:r}=se({createChartOptions:te(),series:[{type:"Area",name:"rates",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,lineType:ie.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"ema",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,lineType:ie.WithSteps,color:a.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(i);function i(){if(!l.value||!r.rates||!r.ema)return;const p=s.value.map(_=>({time:_.timestamp,value:_.rate})).uniqWith((_,f)=>_.time===f.time).orderBy(_=>_.time,"asc"),g=d(p.map(_=>_.value),n.value??31).zip(p).map(_=>({time:_[1].time,value:_[0]}));if(g.length>0&&r.ema.setData(g),p.length>0){r.rates.setData(p);const _=p[0].time,f=p[p.length-1].time;l.value.timeScale().setVisibleRange({from:_,to:f})}}function c(p){return`${Q(p*100,0,"percentage")}${H(p,"percentage")}`}const d=(p,v=7)=>p.map((g,_)=>{const f=Math.max(_-(v-1),0),y=_+1,k=p.slice(f,y);return k.reduce((S,$)=>S+$,0)/k.length});return(p,v)=>{const g=Et,_=D;return h(),L(_,{title:"Rates",loading:o(t)},{actions:b(()=>[u("div",Qp,[m(g,{modelValue:o(n),"onUpdate:modelValue":v[0]||(v[0]=f=>J(n)?n.value=f:null),class:"avg-span",placeholder:"Avg span (days)",min:1,max:1/0},null,8,["modelValue"])])]),default:b(()=>[u("div",zp,null,512)]),_:1},8,["loading"])}}}),Gp=I(jp,[["__scopeId","data-v-10aeaea4"]]),Xp=e=>{const t=e.provider.toLocaleLowerCase(),s=e.deposit?{amount:e.deposit.amount,n1:e.deposit.n1,n2:e.deposit.n2}:null,a=e.withdrawal?{amount_borrowed:e.withdrawal.amount_borrowed,amount_collateral:e.withdrawal.amount_collateral}:null,n=e.block_number,l=e.timestamp,r=e.transaction_hash.toLocaleLowerCase();return{provider:t,deposit:s,withdrawal:a,block_number:n,timestamp:l,transaction_hash:r}},Zp=e=>({sold_id:e.sold_id,bought_id:e.bought_id,token_sold:{symbol:e.token_sold.symbol,address:e.token_sold.address.toLocaleLowerCase()},token_bought:{symbol:e.token_bought.symbol,address:e.token_bought.address.toLocaleLowerCase()},amount_sold:e.amount_sold,amount_bought:e.amount_bought,price:e.price,buyer:e.buyer.toLocaleLowerCase(),fee_x:e.fee_x,fee_y:e.fee_y,block_number:e.block_number,timestamp:e.timestamp,transaction_hash:e.transaction_hash}),Yp=e=>({time:e.time,open:e.open,close:e.close,high:e.high,low:e.low,base_price:e.base_price,oracle_price:e.oracle_price,volume:e.volume}),Zt="https://prices.curve.fi";class Jp extends Ae{async getEvents(t,s,a,n){const l=await this.fetch(`${Zt}/v1/${t}/llamma_events/${s}/${a}?page=${n}&per_page=10`);return{events:l.data.map(Xp),count:l.count}}async getTrades(t,s,a,n){const l=await this.fetch(`${Zt}/v1/${t}/llamma_trades/${s}/${a}?page=${n}&per_page=10`);return{trades:l.data.map(Zp),count:l.count}}async getOHLC(t,s,a){const n=Math.floor(new Date().getTime()/1e3),l=n-10*24*60*60;return(await this.fetch(`${Zt}/v1/${t}/llamma_ohlc/${s}/${a}?agg_number=1&agg_units=hour&start=${l}&end=${n}`)).data.map(Yp)}}const _s=new Jp;function na(e,t,s,a){return W({queryKey:["llamma-market-events",t,a],queryFn:({queryKey:[,n,l]})=>_s.getEvents(e.value,s.value,n,l),placeholderData:Pt,enabled:w(()=>!!t.value&&!!s.value)})}function la(e,t,s,a){return W({queryKey:["llamma-market-trades",t,a],queryFn:({queryKey:[,n,l]})=>_s.getTrades(e.value,s.value,n,l),placeholderData:Pt,enabled:w(()=>!!t.value&&!!s.value)})}function gs(e,t,s){return W({queryKey:["llamma-market-ohlc",t],queryFn:({queryKey:[,a]})=>_s.getOHLC(e.value,s.value,a),enabled:w(()=>!!t.value&&!!s.value)})}const em={ref:"chartRef",class:"chart"},tm=T({__name:"ChartMarketVolume",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=gs(O("crvusd"),w(()=>{var i;return(i=e.market)==null?void 0:i.llamma}),O(()=>e.chain)),{theme:a}=E(N()),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Area",name:"volume",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`$${Q(i,0,"dollar")}${H(i,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.volume)return;const i=(s.value??[]).map(c=>({time:c.time,value:c.volume})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc");i.length>0&&l.volume.setData(i),n.value.timeScale().fitContent()}return(i,c)=>{const d=D;return h(),L(d,{title:"Volume",loading:o(t)},{default:b(()=>[u("div",em,null,512)]),_:1},8,["loading"])}}}),sm={class:"actions"},am={ref:"chartRef",class:"chart"},om=T({__name:"ChartKeeperPrices",setup(e){const{theme:t}=E(N()),s=["USDC","USDT","TUSD","USDP"],{items:a,toggles:n,disabled:l}=Le(()=>s.map((k,C)=>({id:k,label:k,color:t.value.colorsArray[C],togglable:!0}))),r=w(()=>i.value||d.value),{isFetching:i,data:c}=ta(),{isFetching:d,data:p}=oi(c),v=q(!1),g=ye("card"),{chart:_,series:f}=se({createChartOptions:te(),series:s.map((k,C)=>({type:"Line",name:k,options:w(()=>({priceFormat:{type:"custom",formatter:S=>`${Q(S,3,"dollar")}${H(S,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,color:t.value.colorsArray[C],lastValueVisible:!1,priceLineVisible:!1,autoscaleInfoProvider:S=>{const $=S();return $!==null&&($.priceRange.minValue=Math.max(.98,$.priceRange.minValue),$.priceRange.maxValue=Math.min(1.02,$.priceRange.maxValue)),$}}))}))});ee(y);function y(){var k,C;if(!(!_.value||Object.values(f).length<0)){for(const[,S]of s.entries()){if(!n[S].value){(k=f[S])==null||k.setData([]);continue}const $=p.value.map(P=>({time:P.timestamp,value:P[S]})).uniqWith((P,B)=>P.time===B.time).orderBy(P=>P.time,"asc");$.length>0&&((C=f[S])==null||C.setData($))}_.value.timeScale().fitContent()}}return(k,C)=>{const S=Se,$=D;return h(),L($,{ref_key:"card",ref:g,title:"Stablecoin Prices of Pegkeepers",loading:o(r)},{actions:b(()=>{var P;return[u("div",sm,[m(S,{items:o(a),disabled:o(l),onToggle:C[0]||(C[0]=B=>o(n)[B].value=!o(n)[B].value)},null,8,["items","disabled"]),m(o(st),{modelValue:o(v),"onUpdate:modelValue":C[1]||(C[1]=B=>J(v)?v.value=B:null),chart:o(_),target:(P=o(g))==null?void 0:P.$el},null,8,["modelValue","chart","target"])])]}),default:b(()=>[u("div",am,null,512)]),_:1},8,["loading"])}}}),nm=I(om,[["__scopeId","data-v-b425ad91"]]),lm={class:"crvusd"},rm={class:"col"},im={class:"col"},cm=T({__name:"CrvUsd.page",setup(e){const{show:t,crumbs:s}=E(Te());fe(()=>{t.value=!0,s.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:"Select market for details",hint:!0}]});const a=Je(),n=async l=>{await a.push({name:"crvusdmarket",params:{tab:"",marketAddr:l.address}})};return(l,r)=>(h(),A("div",lm,[m(o(qp),{style:{"grid-column":"1 / -1"},onSelected:n}),u("div",rm,[m(o(gp))]),u("div",im,[m(o(Dp)),m(o(nm))])]))}}),um=I(cm,[["__scopeId","data-v-8aedfed5"]]),dm=["href"],pm={key:1},mm=T({__name:"Addresses",props:{market:{}},setup(e){const t=w(()=>{var n,l,r;return[{description:"Controller",address:(n=e.market)==null?void 0:n.address},{description:"Factory",address:(l=e.market)==null?void 0:l.factory},{description:"Llamma",address:(r=e.market)==null?void 0:r.llamma}]}),s=n=>`https://etherscan.io/address/${n}`,a=async n=>{await navigator.clipboard.writeText(n)};return(n,l)=>{const r=ve,i=ae,c=D;return h(),L(c,{class:"addresses",title:"Addresses"},{default:b(()=>[m(i,{class:"addresses-table",rows:o(t)},{row:b(({item:{description:d,address:p}})=>[u("div",null,V(d),1),u("div",null,[p?(h(),A("a",{key:0,class:"font-mono",href:s(p),target:"_blank"},V(p),9,dm)):(h(),A("span",pm,"?"))]),u("div",null,[p?(h(),L(r,{key:0,icon:"fas fa-link",onClick:v=>a(p)},null,8,["onClick"])):F("",!0)])]),_:1},8,["rows"])]),_:1})}}}),vm=I(mm,[["__scopeId","data-v-92443207"]]),hm={key:0},fm={class:"token-info"},_m=["href"],gm={key:1},ym=T({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(r){return typeof r=="object"&&r.type==="token"}function s(r,i){return i?r==="collateral"?{type:"token",symbol:i.collateral_token.symbol,address:i.collateral_token.address}:{type:"token",symbol:i.stablecoin_token.symbol,address:i.stablecoin_token.address}:{type:"token",symbol:"?",address:"?"}}const a=w(()=>[{description:"Collateral",value:s("collateral",e.market)},{description:"Borrowed",value:s("borrowed",e.market)}]),n=r=>`https://etherscan.io/address/${r}`,l=async r=>{await navigator.clipboard.writeText(r)};return(r,i)=>{const c=_e,d=ve,p=ae,v=D;return h(),L(v,{class:"properties",title:"Properties"},{default:b(()=>[m(p,{class:"properties-table",rows:o(a)},{row:b(({item:{description:g,value:_}})=>[u("div",null,V(g),1),t(_)?(h(),A("div",hm,[u("div",fm,[m(c,{chain:r.chain,address:_.address},null,8,["chain","address"]),u("div",null,V(_.symbol),1),u("div",null,[u("a",{class:"font-mono",href:n(_.address),target:"_blank"},V(_.address),9,_m)]),u("div",null,[m(d,{icon:"fas fa-link",onClick:f=>l(_.address)},null,8,["onClick"])])])])):(h(),A("div",gm,V(_),1))]),_:1},8,["rows"])]),_:1})}}}),bm=I(ym,[["__scopeId","data-v-91258c3c"]]),wm={class:"market"},km=T({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){return(t,s)=>{const a=X,n=de;return h(),A("div",wm,[m(n,{style:{"grid-area":"kpi1"},label:"Borrow Rate","has-value":!!t.market},{default:b(()=>{var l;return[m(a,{value:100*(((l=t.market)==null?void 0:l.rate)??0),type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi2"},label:"Borrowed","has-value":!!t.market},{default:b(()=>{var l;return[m(a,{value:(l=t.market)==null?void 0:l.borrowed,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi3"},label:"Borrowable","has-value":!!t.market},{default:b(()=>{var l;return[m(a,{value:(l=t.market)==null?void 0:l.borrowable,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi4"},label:"Loans","has-value":!!t.market},{default:b(()=>{var l;return[R(V(((l=t.market)==null?void 0:l.loans)??0),1)]}),_:1},8,["has-value"]),m(o(Gp),{style:{"grid-area":"rates"},market:t.market},null,8,["market"]),m(o(Wp),{style:{"grid-area":"cap"},market:t.market},null,8,["market"]),m(o(Kp),{style:{"grid-area":"loans"},market:t.market},null,8,["market"]),m(o(tm),{style:{"grid-area":"volume"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(bm),{style:{"grid-area":"properties"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(vm),{style:{"grid-area":"addresses"},market:t.market,chain:t.chain},null,8,["market","chain"])])}}}),$m=I(km,[["__scopeId","data-v-e9d6fb69"]]),Cm=e=>({timestamp:ke(e.timestamp),proportion:e.proportion/100}),Am=e=>({timestamp:ke(e.dt),user:e.user.toLocaleLowerCase(),liquidator:e.liquidator.toLocaleLowerCase(),self:e.self,collateralReceived:e.collateral_received,collateralReceivedUsd:e.collateral_received_usd,stablecoinReceived:e.stablecoin_received,priceOracle:e.oracle_price,debt:e.debt,n1:e.n1,n2:e.n2,tx:e.tx.toLocaleLowerCase(),block:e.block}),Sm=e=>({timestamp:ke(e.timestamp),selfCount:e.self_count,hardCount:e.hard_count,selfValue:e.self_value,hardValue:e.hard_value,price:e.price}),Lm=e=>({softLiqUsers:e.soft_liquidation_users,liqablePositions:e.liquidatable_positions,liqableDebtUsd:e.liquidatable_pos_debt_usd,liqableCollatUsd:e.liquidatable_collateral_usd,liqableBorrowedUsd:e.liquidatable_borrowed_usd,medianHealth:e.median_health,avgHealth:e.average_health,collatRatio:e.collat_ratio}),Tm=e=>({timestamp:ke(e.timestamp),pctLossAverage:e.avg_pct_loss,pctLossMedian:e.median_pct_loss,absoluteLossAverage:e.avg_abs_loss,absoluteLossMedian:e.median_abs_loss,numTotalUsers:e.total_users,numUsersWithLosses:e.users_with_losses,ratio:e.ratio}),Vm=e=>({decile:e.health_decile,collateralUsdValue:e.collateral,debt:e.debt,stablecoin:e.stablecoin}),He="https://prices.curve.fi";class Im extends Ae{async getSoftLiqRatios(t,s,a){return(await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/soft_liquidation_ratio`)).data.map(Cm)}async getLiqsDetailed(t,s,a){return(await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/history/detailed`)).data.map(Am)}async getLiqsAggregate(t,s,a){return(await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/history/aggregated`)).data.map(Sm)}async getLiqOverview(t,s,a){const n=await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/overview?fetch_on_chain=true`);return Lm(n)}async getLiqLosses(t,s,a){return(await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/losses/history`)).data.map(Tm)}async getLiqHealthDeciles(t,s,a){return(await this.fetch(`${He}/v1/${t}/liquidations/${s}/${a}/health/distribution`)).data.map(Vm)}}const nt=new Im;function bt(){return{initialData:[],initialDataUpdatedAt:0}}function lt(e,t){return{enabled:w(()=>!!e.value&&(t?!!t.value:!0))}}function ra(e,t,s){return W({queryKey:["liqs-soft-liqs",s],queryFn:({queryKey:[,a]})=>nt.getSoftLiqRatios(e.value,t.value,a),...lt(s,t),...bt()})}function ia(e,t,s){return W({queryKey:["liqs-detailed",s],queryFn:({queryKey:[,a]})=>nt.getLiqsDetailed(e.value,t.value,a),...lt(s,t),...bt()})}function ca(e,t,s){return W({queryKey:["liqs-aggregate",s],queryFn:({queryKey:[,a]})=>nt.getLiqsAggregate(e.value,t.value,a),...lt(s,t),...bt()})}function ua(e,t,s){return W({queryKey:["liqs-overview",s],queryFn:({queryKey:[,a]})=>nt.getLiqOverview(e.value,t.value,a),...lt(s,t)})}function da(e,t,s){return W({queryKey:["liqs-losses",s],queryFn:({queryKey:[,a]})=>nt.getLiqLosses(e.value,t.value,a),...lt(s,t),...bt()})}function pa(e,t,s){return W({queryKey:["liqs-health-deciles",s],queryFn:({queryKey:[,a]})=>nt.getLiqHealthDeciles(e.value,t.value,a),...lt(s,t),...bt()})}const qm={class:"actions"},Pm={class:"chart-types"},Fm=T({__name:"ChartLiqs",props:{liqs:{default:()=>[]}},setup(e){const t=q("count"),s=a=>{t.value!==a&&(t.value=a)};return(a,n)=>{const l=yt,r=D;return h(),L(r,{title:"Self & Hard Liquidations"},{actions:b(()=>[u("div",qm,[u("div",Pm,[m(l,{value:"Count","model-value":o(t)==="count",onClick:n[0]||(n[0]=i=>s("count"))},null,8,["model-value"]),m(l,{value:"Value","model-value":o(t)==="value",onClick:n[1]||(n[1]=i=>s("value"))},null,8,["model-value"])])])]),default:b(()=>[o(t)==="count"?(h(),L(o(Dm),{key:0,liqs:a.liqs},null,8,["liqs"])):(h(),L(o(Um),{key:1,liqs:a.liqs},null,8,["liqs"]))]),_:1})}}}),ma=I(Fm,[["__scopeId","data-v-1efd8a12"]]),Bm=T({__name:"ChartLiqsCount",props:{liqs:{default:()=>[]}},setup(e){const{theme:t}=E(N()),s=w(()=>Ie(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:a.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:i},min:0,max:l.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),a=w(()=>e.liqs.orderBy(c=>c.timestamp,"asc").groupBy(c=>c.timestamp).entries().map(([c])=>new Date(parseInt(c,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((c,d)=>d%8===0?c:"")),n=w(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(c=>({x:new Date(c.timestamp*1e3).toLocaleDateString(),y:c.selfCount}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(c=>({x:new Date(c.timestamp*1e3).toLocaleDateString(),y:c.hardCount}))}]),l=w(()=>Math.max(...e.liqs.groupBy(c=>c.timestamp).entries().map(([,c])=>c.reduce((d,p)=>d+p.selfCount+p.hardCount,0)))*1.1),r=c=>c,i=c=>`${Q(c,1,"dollar")}${H(c,"dollar")}`;return(c,d)=>{const p=Ve;return h(),L(p,{options:o(s),series:o(n)},null,8,["options","series"])}}}),Dm=I(Bm,[["__scopeId","data-v-48a56e21"]]),Mm=T({__name:"ChartLiqsValue",props:{liqs:{default:()=>[]}},setup(e){const{theme:t}=E(N()),s=w(()=>Ie(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:a.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:i},min:0,max:l.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),a=w(()=>e.liqs.orderBy(c=>c.timestamp,"asc").groupBy(c=>c.timestamp).entries().map(([c])=>new Date(parseInt(c,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((c,d)=>d%8===0?c:"")),n=w(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(c=>({x:new Date(c.timestamp*1e3).toLocaleDateString(),y:c.selfValue}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(c=>({x:new Date(c.timestamp*1e3).toLocaleDateString(),y:c.hardValue}))}]),l=w(()=>Math.max(...e.liqs.groupBy(c=>c.timestamp).entries().map(([,c])=>c.reduce((d,p)=>d+p.selfValue+p.hardValue,0)))*1.1),r=c=>c,i=c=>`${Q(c,1,"dollar")}${H(c,"dollar")}`;return(c,d)=>{const p=Ve;return h(),L(p,{options:o(s),series:o(n)},null,8,["options","series"])}}}),Um=I(Mm,[["__scopeId","data-v-e39352fc"]]),Rm={ref:"chartRef",class:"chart"},va=T({__name:"ChartLiqsMedianLoss",props:{losses:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Area",name:"losses",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${Q(l,0,"percentage")}${H(l,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(n);function n(){if(!s.value||!a.losses)return;const l=e.losses.map(r=>({time:r.timestamp,value:r.pctLossMedian})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.losses.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=D;return h(),L(i,{title:"Median Loss % Among Loans with Losses"},{default:b(()=>[u("div",Rm,null,512)]),_:1})}}}),Om={ref:"chartRef",class:"chart"},ha=T({__name:"ChartLiqsLosersProportion",props:{losses:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Area",name:"losses",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${Q(l,0,"percentage")}${H(l,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(n);function n(){if(!s.value||!a.losses)return;const l=e.losses.map(r=>({time:r.timestamp,value:r.numTotalUsers>0?100*r.numUsersWithLosses/r.numTotalUsers:0})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.losses.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=D;return h(),L(i,{title:"Proportion of Loans with Losses"},{default:b(()=>[u("div",Om,null,512)]),_:1})}}}),fa=T({__name:"ChartLiqsHealthDeciles",props:{deciles:{}},setup(e){const{theme:t}=E(N()),s=w(()=>Ie(t.value,{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:a.value,labels:{formatter:l,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:r}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:i=>{const c=i.series[0][i.dataPointIndex],d=i.series[1][i.dataPointIndex],p=i.series[2][i.dataPointIndex];return[`<div><b>Collat. (USD)</b>: ${r(d)}</div>`,`<div><b>Debt</b>: ${r(c)}</div>`,`<div><b>Stablecoin</b>: ${r(p)}</div>`].join("")}}})),a=w(()=>e.deciles.map(i=>i.decile)),n=w(()=>[{name:"Debt",data:Object.values(e.deciles).map(i=>i.debt)},{name:"Collateral",data:Object.values(e.deciles).map(i=>i.collateralUsdValue)},{name:"Stablecoin",data:Object.values(e.deciles).map(i=>i.stablecoin)}]),l=i=>i,r=i=>`$${Q(i,0,"dollar")}${H(i,"dollar")}`;return(i,c)=>{const d=Ve,p=D;return h(),L(p,{title:"Debt & Assets per Health Deciles"},{default:b(()=>[m(d,{options:o(s),series:o(n)},null,8,["options","series"])]),_:1})}}}),Em={class:"actions"},Wm={ref:"chartRef",class:"chart"},_a=T({__name:"ChartLiqsSoftLiqRatio",props:{ratios:{},pricesOracle:{}},setup(e){const{theme:t}=E(N()),{items:s}=Le(()=>[{id:"percentage",label:"% of loans in soft liquidation",color:t.value.colorsArray[0]},{id:"collateral-price",label:"Collateral price ($)",color:t.value.colorsArray[1]}]),{chart:a,series:n}=se({createChartOptions:te({leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"price",options:w(()=>({priceFormat:{type:"custom",formatter:r=>`$${Q(r,2,"dollar")}${H(r,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.yellow,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"ratio",options:w(()=>({priceFormat:{type:"custom",formatter:r=>`${Q(r,0,"percentage")}${H(r,"percentage")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});ee(l);function l(){if(!a.value||!n.price||!n.ratio)return;const r=e.ratios.map(d=>({time:d.timestamp,value:d.proportion})).uniqWith((d,p)=>d.time===p.time).orderBy(d=>d.time,"asc"),i=r.length>0?r[0].time:0,c=e.pricesOracle.filter(d=>d.timestamp>=i).map(d=>({time:d.timestamp,value:d.priceOracle})).uniqWith((d,p)=>d.time===p.time).orderBy(d=>d.time,"asc");c.length>0&&n.price.setData(c),r.length>0&&n.ratio.setData(r),a.value.timeScale().fitContent()}return(r,i)=>{const c=Se,d=D;return h(),L(d,{title:"Soft Liquidations Ratio"},{actions:b(()=>[u("div",Em,[m(c,{items:o(s)},null,8,["items"])])]),default:b(()=>[u("div",Wm,null,512)]),_:1})}}}),xm={class:"actions"},Km={ref:"chartRef",class:"chart"},ga=T({__name:"ChartLiquidatorRevenue",props:{discounts:{},liqs:{}},setup(e){const{theme:t}=E(N()),{items:s}=Le(()=>[{id:"revenue",label:"Liquidator Revenue",color:t.value.colorsArray[0]},{id:"discount",label:"Discount",color:t.value.colorsArray[1]}]),{chart:a,series:n}=se({createChartOptions:te({leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"revenue",options:w(()=>({priceFormat:{type:"price",precision:0,minMove:1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"discount",options:w(()=>({priceFormat:{type:"percent",precision:6,minMove:1e-6},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.yellow,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});ee(l);function l(){if(!a.value||!n.discount||!n.revenue)return;const r=e.liqs.map(d=>({time:d.timestamp,value:d.debt})).uniqWith((d,p)=>d.time===p.time).orderBy(d=>d.time,"asc").reduce((d,p)=>{const v=d.length>0?d[d.length-1].value:0;return d.push({time:p.time,value:p.value+v}),d},[]),i=r.length>0?r[0].time:0,c=e.discounts.filter(d=>d.timestamp>=i).map(d=>({time:d.timestamp,value:d.discount*100})).uniqWith((d,p)=>d.time===p.time).orderBy(d=>d.time,"asc");r.length>0&&n.revenue.setData(r),c.length>0&&n.discount.setData(c),a.value.timeScale().fitContent()}return(r,i)=>{const c=Se,d=D;return h(),L(d,{title:"Liquidator Revenue"},{actions:b(()=>[u("div",xm,[m(c,{items:o(s)},null,8,["items"])])]),default:b(()=>[u("div",Km,null,512)]),_:1})}}}),Nm={key:0,class:"end"},Hm={key:1,class:"end"},Qm={key:2},zm=T({__name:"TableLiqOverview",props:{overview:{}},setup(e){const t=w(()=>{if(!e.overview)return[];const a=e.overview.liqableDebtUsd,n=e.overview.liqableCollatUsd+e.overview.liqableBorrowedUsd,l=a-n;return l<=0?[]:[{description:"Bad debt",value:l,type:"bad-debt"}]}),s=w(()=>{var a,n,l,r,i,c,d;return[{description:"Users in soft liquidation",value:((a=e.overview)==null?void 0:a.softLiqUsers)??0,type:"number"},{description:"Median health",value:((n=e.overview)==null?void 0:n.medianHealth)??0,type:"percentage"},{description:"Collaterization ratio",value:((l=e.overview)==null?void 0:l.collatRatio)??0,type:"percentage"},{description:"Liquidatable positions",value:((r=e.overview)==null?void 0:r.liqablePositions)??0,type:"number"},{description:"Liquidatable positions' debt",value:((i=e.overview)==null?void 0:i.liqableDebtUsd)??0,type:"dollar"},{description:"Liquidatable collateral (token / crvUSD)",value:[((c=e.overview)==null?void 0:c.liqableCollatUsd)??0,((d=e.overview)==null?void 0:d.liqableBorrowedUsd)??0],type:"collateral"},...t.value]});return(a,n)=>{const l=X,r=ae,i=D;return h(),L(i,{title:"General Health Metrics"},{default:b(()=>[m(r,{class:"liq-overview-table",rows:o(s)},{row:b(({item:{description:c,value:d,type:p}})=>[u("div",null,V(c),1),p==="collateral"?(h(),A("div",Nm,[m(l,{value:d[0],"show-zero":!0,type:"dollar"},null,8,["value"]),n[0]||(n[0]=R(" / ")),m(l,{value:d[1],"show-zero":!0,type:"dollar"},null,8,["value"])])):(h(),A("div",Hm,[p==="bad-debt"?(h(),L(l,{key:0,class:"red",value:d,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])):p!=="number"?(h(),L(l,{key:1,value:d,"show-zero":!0,type:p},null,8,["value","type"])):(h(),A("span",Qm,V(d),1))]))]),_:1},8,["rows"])]),_:1})}}}),ya=I(zm,[["__scopeId","data-v-3a365c8d"]]),jm={class:"address"},Gm=["href"],Xm={class:"end"},Zm={class:"end"},Ym=T({__name:"TableTopLiquidators",props:{liqs:{}},setup(e){const t=w(()=>e.liqs.groupBy(s=>s.liquidator).entries().map(([s,a])=>({liquidator:s,count:a.length,value:a.reduce((n,l)=>n+l.collateralReceivedUsd,0)})).orderBy(s=>s.value,"desc").take(5));return(s,a)=>{const n=X,l=ae,r=D;return h(),L(r,{title:"Top Liquidators"},{default:b(()=>[m(l,{class:"liquidators-table",rows:o(t),columns:["Address",{label:"Count",align:"end"},{label:"Value",align:"end"}]},{row:b(({item:i})=>[u("div",jm,[u("a",{href:`https://etherscan.io/address/${i.liquidator}`,target:"_blank"},V(o(we)(i.liquidator,8)),9,Gm)]),u("div",Xm,[m(n,{value:i.count,precision:0,"show-zero":!0},null,8,["value"])]),u("div",Zm,[m(n,{value:i.value,precision:1,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1})}}}),ba=I(Ym,[["__scopeId","data-v-87c50c2f"]]),Jm={ref:"chartRef",class:"chart"},wa=T({__name:"ChartCollateralRatio",props:{ratios:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Area",name:"ratios",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${Q(l,0,"percentage")}${H(l,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});ee(n);function n(){if(!s.value||!a.ratios)return;const l=e.ratios.map(r=>({time:r.timestamp,value:r.ratio*100})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.ratios.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=D;return h(),L(i,{title:"Collateral Ratio"},{default:b(()=>[u("div",Jm,null,512)]),_:1})}}}),ev={class:"actions"},tv={ref:"chartRef",class:"chart"},sv=T({__name:"ChartEquity",props:{equity:{}},setup(e){const{theme:t}=E(N()),{chart:s,series:a}=se({createChartOptions:te(),series:{type:"Baseline",name:"equity",options:w(()=>{const{colors:l}=t.value;return{priceFormat:{type:"custom",formatter:r=>`$${Q(r,0,"dollar")}${H(r,"dollar")}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:l.green,bottomLineColor:l.red,lastValueVisible:!1,priceLineVisible:!1}})}});ee(n);function n(){if(!s.value||!a.equity)return;const l=e.equity.map(r=>({time:r.timestamp,value:r.equity})).uniqWith((r,i)=>r.time===i.time).orderBy(r=>r.time,"asc");l.length>0&&a.equity.setData(l),s.value.timeScale().fitContent()}return(l,r)=>{const i=ms,c=D;return h(),L(c,{title:"Equity"},{actions:b(()=>[u("div",ev,[m(i,null,{default:b(()=>r[0]||(r[0]=[u("span",null,[R(" This chart shows the difference between the value of the collateral and the debt."),u("br"),u("br"),R(" Positive values indicate net equity (collateral exceeds debt),"),u("br"),R(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)])),_:1})])]),default:b(()=>[u("div",tv,null,512)]),_:1})}}}),av={class:"liquidations"},ov=T({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=w(()=>{var $;return($=e.market)==null?void 0:$.address}),{isFetching:s,data:a}=ua(q("crvusd"),O(()=>e.chain),t),{isFetching:n,data:l}=Rt(O(()=>e.market)),r=w(()=>l.value.map(({timestamp:$,priceOracle:P})=>({timestamp:$,priceOracle:P}))),i=w(()=>l.value.map(({timestamp:$,discountLiquidation:P})=>({timestamp:$,discount:P}))),c=w(()=>l.value.map(({timestamp:$,totalCollateralUsd:P,totalDebt:B})=>({timestamp:$,ratio:P/B}))),{isFetching:d,data:p}=ra(q("crvusd"),O(()=>e.chain),t),{isFetching:v,data:g}=ca(q("crvusd"),O(()=>e.chain),t),{isFetching:_,data:f}=ia(q("crvusd"),O(()=>e.chain),t),{isFetching:y,data:k}=pa(q("crvusd"),O(()=>e.chain),t),{isFetching:C,data:S}=da(q("crvusd"),O(()=>e.chain),t);return($,P)=>(h(),A("div",av,[m(o(ya),{overview:o(a),loading:o(s)},null,8,["overview","loading"]),m(o(_a),{ratios:o(p),"prices-oracle":o(r),loading:o(d)||o(n)},null,8,["ratios","prices-oracle","loading"]),m(o(va),{losses:o(S),loading:o(C)},null,8,["losses","loading"]),m(o(ha),{losses:o(S),loading:o(C)},null,8,["losses","loading"]),m(o(fa),{deciles:o(k),loading:o(y)},null,8,["deciles","loading"]),m(o(wa),{ratios:o(c),loading:o(n)},null,8,["ratios","loading"]),m(o(ma),{liqs:o(g),loading:o(v)},null,8,["liqs","loading"]),m(o(ba),{liqs:o(f),loading:o(_)},null,8,["liqs","loading"]),m(o(ga),{discounts:o(i),liqs:o(f),loading:o(n)||o(_)},null,8,["discounts","liqs","loading"])]))}}),nv=I(ov,[["__scopeId","data-v-de793ea0"]]),lv={class:"controls"},rv={ref:"chartRef",class:"chart"},iv=T({__name:"ChartOHLC",props:{ohlc:{}},setup(e){const{theme:t}=E(N()),s=q(!1),a=q(!1);let n=1,l=0;const{chart:r,series:i}=se({createChartOptions:te({localization:{priceFormatter:p=>d(p)}}),series:[{type:"Candlestick",name:"ohlc",options:w(()=>{const{colors:p}=t.value;return{priceFormat:{type:"price",precision:6,minMove:1e-6},upColor:p.green,borderUpColor:p.green,wickUpColor:p.green,downColor:p.red,borderDownColor:p.red,wickDownColor:p.red}})},{type:"Line",name:"oracle",options:w(()=>({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ie.WithSteps,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(c);function c(){if(!r.value||!i.ohlc||!i.oracle)return;const p=s.value?-1:1,v=e.ohlc.map(_=>({time:_.time,open:Math.pow(_.open,p),high:Math.pow(_.high,p),low:Math.pow(_.low,p),close:Math.pow(_.close,p)})).uniqWith((_,f)=>_.time===f.time).orderBy(_=>_.time,"asc");v.length>0&&(i.ohlc.setData(v),l=Math.min(...v.map(_=>_.low)),n=Math.max(...v.map(_=>_.high)));const g=e.ohlc.map(_=>({time:_.time,value:Math.pow(_.oracle_price,p)})).uniqWith((_,f)=>_.time===f.time).orderBy(_=>_.time,"asc");g.length>0&&i.oracle.setData(g),i.oracle.applyOptions({visible:a.value}),r.value.timeScale().fitContent()}function d(p){const v=n-l,g=v>1?v-Math.floor(v):v,_=-Math.floor(Math.log10(g)+1)+2;return`${Q(p,_,"dollar")}${H(p,"dollar")}`}return(p,v)=>{const g=yt,_=D;return h(),L(_,{title:"Price"},{actions:b(()=>[u("div",lv,[m(g,{value:"Oracle Price","model-value":o(a),onClick:v[0]||(v[0]=f=>a.value=!o(a))},null,8,["model-value"]),m(g,{value:"Invert","model-value":o(s),onClick:v[1]||(v[1]=f=>s.value=!o(s))},null,8,["model-value"])])]),default:b(()=>[u("div",rv,null,512)]),_:1})}}}),ka=I(iv,[["__scopeId","data-v-6241b4ce"]]),cv={class:"end"},uv=["href"],dv={class:"end"},pv=["href"],mv=T({__name:"TableEvents",props:{events:{},count:{}},emits:["page"],setup(e,{emit:t}){const s=t,{page:a,onPage:n}=fs(),l=It(a,200);G(l,p=>{s("page",p)});const{relativeTime:r}=Pe(),i=p=>p<1?p.toFixed(4):p>1e3?p.toFixed(0):p.toFixed(2),c=p=>{var v,g;return i(((v=p.deposit)==null?void 0:v.amount)??((g=p.withdrawal)==null?void 0:g.amount_collateral)??0)},d=p=>p.deposit?"Deposit":p.withdrawal?"Withdrawal":"Unknown";return(p,v)=>{const g=qe,_=ae,f=D;return h(),L(f,{title:"Events"},{actions:b(()=>[m(g,{"items-count":p.count,"items-per-page":10,page:o(a),onPage:o(n)},null,8,["items-count","page","onPage"])]),default:b(()=>[m(_,{class:"events-table",rows:p.events,columns:["Type",{label:"Amount",align:"end"},"","Provider",{label:"Time",align:"end"}]},{row:b(({item:y})=>[u("div",null,V(d(y)),1),u("div",cv,V(c(y)),1),v[2]||(v[2]=u("div",null,null,-1)),u("div",null,[u("a",{href:`https://etherscan.io/address/${y.provider}`,target:"_blank",onClick:v[0]||(v[0]=me(()=>{},["stop"]))},V(o(we)(y.provider)),9,uv)]),u("div",dv,[u("a",{href:`https://etherscan.io/tx/${y.transaction_hash}`,target:"_blank",onClick:v[1]||(v[1]=me(()=>{},["stop"]))},V(o(r)(y.timestamp)),9,pv)])]),_:1},8,["rows"])]),_:1})}}}),$a=I(mv,[["__scopeId","data-v-0743ff0f"]]),vv={class:"end"},hv=["href"],fv={class:"end"},_v=["href"],gv=["href"],yv={class:"end"},bv=["href"],wv=T({__name:"TableTrades",props:{trades:{},count:{},chain:{}},emits:["page"],setup(e,{emit:t}){const s=t,{page:a,onPage:n}=fs(),l=It(a,200);G(l,c=>{s("page",c)});const{relativeTime:r}=Pe(),i=c=>c<1?c.toFixed(4):c>1e3?c.toFixed(0):c.toFixed(2);return(c,d)=>{const p=qe,v=_e,g=ae,_=D;return h(),L(_,{title:"Trades"},{actions:b(()=>[m(p,{"items-count":c.count,"items-per-page":10,page:o(a),onPage:o(n)},null,8,["items-count","page","onPage"])]),default:b(()=>[m(g,{class:"trades-table",rows:c.trades,columns:[{label:"Bought",align:"end"},"","",{label:"Sold",align:"end"},"","","Market Maker",{label:"Time",align:"end"}]},{row:b(({item:f})=>[u("div",vv,V(i(f.amount_bought)),1),m(v,{chain:c.chain,address:f.token_bought.address},null,8,["chain","address"]),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${f.token_bought.address}`},V(f.token_bought.symbol),9,hv)]),u("div",fv,V(i(f.amount_sold)),1),m(v,{chain:c.chain,address:f.token_sold.address},null,8,["chain","address"]),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${f.token_sold.address}`},V(f.token_sold.symbol),9,_v)]),u("div",null,[u("a",{href:`https://etherscan.io/address/${f.buyer}`,target:"_blank",onClick:d[0]||(d[0]=me(()=>{},["stop"]))},V(o(we)(f.buyer)),9,gv)]),u("div",yv,[u("a",{href:`https://etherscan.io/tx/${f.transaction_hash}`,target:"_blank",onClick:d[1]||(d[1]=me(()=>{},["stop"]))},V(o(r)(f.timestamp)),9,bv)])]),_:1},8,["rows"])]),_:1})}}}),Ca=I(wv,[["__scopeId","data-v-cf1dafaf"]]),kv={class:"trading"},$v=T({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=w(()=>{var p;return(p=e.market)==null?void 0:p.llamma}),{isFetching:s,data:a}=gs(q("crvusd"),t,O(()=>e.chain)),n=q(1),{isFetching:l,data:r}=la(q("crvusd"),t,O(()=>e.chain),n),i=q(1),{isFetching:c,data:d}=na(q("crvusd"),t,O(()=>e.chain),i);return(p,v)=>{var g,_,f,y;return h(),A("div",kv,[m(o(ka),{style:{"grid-area":"ohlc"},ohlc:o(a)??[],loading:o(s)},null,8,["ohlc","loading"]),m(o(Ca),{style:{"grid-area":"trades"},trades:((g=o(r))==null?void 0:g.trades)??[],count:((_=o(r))==null?void 0:_.count)??0,chain:p.chain,loading:o(l),onPage:v[0]||(v[0]=k=>n.value=k)},null,8,["trades","count","chain","loading"]),m(o($a),{style:{"grid-area":"events"},events:((f=o(d))==null?void 0:f.events)??[],count:((y=o(d))==null?void 0:y.count)??0,loading:o(c),onPage:v[1]||(v[1]=k=>i.value=k)},null,8,["events","count","loading"])])}}}),Cv=I($v,[["__scopeId","data-v-74b07d2f"]]),Av={class:"market-overview"},Sv=T({__name:"Market.page",setup(e){const{show:t,crumbs:s}=E(Te()),a=be("marketAddr"),{isFetching:n,data:l}=hs(),r=w(()=>l.value.find(d=>d.address===a.value));G(r,d=>{s.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:`Market: ${(d==null?void 0:d.name)??"?"}`}]},{immediate:!0}),fe(()=>{t.value=!0});const{tabActive:i,tabActiveIndex:c}=at(["overview","trading","liquidations"],"crvusdmarket",()=>({marketAddr:a.value}));return(d,p)=>{const v=et,g=Be,_=Fe;return h(),A("div",Av,[m(v,{class:U(["spinner",{loading:o(n)}])},null,8,["class"]),!o(n)&&o(r)?(h(),L(_,{key:0,active:o(c),onTab:p[0]||(p[0]=f=>c.value=f.index)},{default:b(()=>[m(g,{header:"Overview"},{default:b(()=>[(h(),L(ce,null,[o(i)==="overview"?(h(),L($m,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1}),m(g,{header:"Trading"},{default:b(()=>[(h(),L(ce,null,[o(i)==="trading"?(h(),L(Cv,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1}),m(g,{header:"Liquidations"},{default:b(()=>[(h(),L(ce,null,[o(i)==="liquidations"?(h(),L(nv,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),Lv=I(Sv,[["__scopeId","data-v-9ba821e5"]]);function Xe(e){return e?e.total_assets_usd+e.collateral_balance_usd:0}const Tv=e=>({name:e.name,controller:e.controller.toLocaleLowerCase(),vault:e.vault.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),policy:e.policy.toLocaleLowerCase(),oracle:e.oracle.toLocaleLowerCase(),rate:parseFloat(e.rate),borrow_apy:parseFloat(e.borrow_apy),lend_apy:parseFloat(e.lend_apy),n_loans:e.n_loans,price_oracle:parseFloat(e.price_oracle),amm_price:parseFloat(e.amm_price),total_debt:parseFloat(e.total_debt),total_assets:parseFloat(e.total_assets),total_debt_usd:parseFloat(e.total_debt_usd),total_assets_usd:parseFloat(e.total_assets_usd),minted:parseFloat(e.minted),redeemed:parseFloat(e.redeemed),minted_usd:parseFloat(e.minted_usd),redeemed_usd:parseFloat(e.redeemed_usd),collateral_balance:parseFloat(e.collateral_balance),borrowed_balance:parseFloat(e.borrowed_balance),collateral_balance_usd:parseFloat(e.collateral_balance_usd),borrowed_balance_usd:parseFloat(e.borrowed_balance_usd),collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},borrowed_token:{symbol:e.borrowed_token.symbol,address:e.borrowed_token.address.toLocaleLowerCase()}}),Vv=e=>{const t=parseFloat(e.rate),s=parseFloat(e.borrow_apy)/100,a=parseFloat(e.lend_apy)/100,n=e.n_loans,l=parseFloat(e.price_oracle),r=parseFloat(e.amm_price),i=parseFloat(e.total_debt),c=parseFloat(e.total_debt_usd),d=parseFloat(e.total_assets),p=parseFloat(e.total_assets_usd),v=parseFloat(e.minted),g=parseFloat(e.redeemed),_=parseFloat(e.collateral_balance),f=parseFloat(e.collateral_balance_usd),y=parseFloat(e.borrowed_balance),k=parseFloat(e.borrowed_balance_usd),C=ke(e.timestamp),S=e.liquidation_discount,$=e.loan_discount;return{rate:t,borrowApy:s,lendApy:a,numLoans:n,priceOracle:l,ammPrice:r,totalDebt:i,totalDebtUsd:c,totalAssets:d,totalAssetsUsd:p,minted:v,redeemed:g,collateralBalance:_,collateralBalanceUsd:f,borrowedBalance:y,borrowedBalanceUsd:k,timestamp:C,discountLiquidation:S,discountLoan:$}},Yt="https://prices.curve.fi";class Iv extends Ae{async getChains(){return this.fetch(`${Yt}/v1/lending/chains`).then(t=>t.data)}async getMarkets(t){return(await this.fetch(`${Yt}/v1/lending/markets/${t}?fetch_on_chain=true&page=1&per_page=100`)).data.map(Tv)}async getSnapshots(t,s){return(await this.fetch(`${Yt}/v1/lending/markets/${t}/${s}/snapshots?fetch_on_chain=true&agg=day`)).data.map(Vv)}}const ys=new Iv;function qv(e){return w(()=>{var t;return(t=e.value)==null?void 0:t.controller})}function Pv(){return{initialData:[],initialDataUpdatedAt:0}}function Fv(){return W({queryKey:["llama-markets-chains"],queryFn:()=>ys.getChains(),initialData:["ethereum","arbitrum"],initialDataUpdatedAt:0})}function Aa(e){return W({queryKey:["llama-markets",e],queryFn:({queryKey:[,t]})=>ys.getMarkets(t)})}function rt(e,t){return W({queryKey:["llama-market-snapshots",qv(e)],queryFn:({queryKey:[,s]})=>ys.getSnapshots(t.value,s),...Pv(),enabled:w(()=>!!e.value&&!!t.value)})}const Bv={class:"end"},Dv={class:"end"},Mv={class:"end"},Uv={class:"end"},Rv={class:"end"},Ov={class:"end"},Ev=T({__name:"TableMarkets",props:{pairs:{default:()=>[]},loading:{type:Boolean},type:{},chain:{}},emits:["selected"],setup(e,{emit:t}){const s=t,a=w(()=>e.type==="long"?"Markets - Long":"Markets - Short"),n=w(()=>e.pairs.map(i=>({count:(i.long?1:0)+(i.short?1:0),...i})).orderBy([i=>i.count,({long:i,short:c})=>Xe(i)+Xe(c)],["desc","desc"]).map(({long:i,short:c})=>e.type==="long"?i:c));function l(i){return i.name.replace(/(-long|-short)/i,"")}const r=i=>e.type==="long"?i.collateral_token.address:i.borrowed_token.address;return(i,c)=>{const d=_e,p=X,v=ae,g=D;return h(),L(g,{title:o(a),loading:i.loading},{default:b(()=>[m(v,{class:"markets-table","expand-side":"left",rows:o(n),columns:["","","Name",{label:"Borrow Rate",align:"end"},{label:"Lend Rate",align:"end"},{label:"TVL",align:"end"},{label:"Loans",align:"end"}],onSelected:c[0]||(c[0]=_=>s("selected",_))},{row:b(({item:_})=>[_?(h(),A(Y,{key:0},[m(d,{chain:i.chain,address:r(_)},null,8,["chain","address"]),u("div",null,V(l(_)),1),u("div",Bv,[_.borrow_apy?(h(),L(p,{key:0,value:_.borrow_apy,type:"percentage"},null,8,["value"])):F("",!0)]),u("div",Dv,[_.lend_apy?(h(),L(p,{key:0,value:_.lend_apy,type:"percentage"},null,8,["value"])):F("",!0)]),u("div",Mv,[o(Xe)(_)?(h(),L(p,{key:0,value:o(Xe)(_),type:"dollar"},null,8,["value"])):F("",!0)]),u("div",Uv,V(_.n_loans),1)],64)):F("",!0)]),"row-aggregation":b(()=>[c[1]||(c[1]=u("div",null,null,-1)),c[2]||(c[2]=u("div",null,null,-1)),c[3]||(c[3]=u("div",null,null,-1)),c[4]||(c[4]=u("div",null,null,-1)),c[5]||(c[5]=u("div",null,null,-1)),u("div",Rv,[m(p,{value:o(n).filter(_=>_).map(_=>_).reduce((_,f)=>_+o(Xe)(f),0),type:"dollar"},null,8,["value"])]),u("div",Ov,V(o(n).filter(_=>_).map(_=>_).reduce((_,f)=>_+f.n_loans,0)),1)]),"row-details":b(()=>c[6]||(c[6]=[R("   ")])),_:1},8,["rows"])]),_:1},8,["title","loading"])}}}),Ps=I(Ev,[["__scopeId","data-v-0983b275"]]),Wv={class:"llamalend"},xv={class:"toolbar"},Kv={class:"markets"},Nv={class:"kpis"},Hv={class:"markets"},Qv={class:"kpis"},zv=T({__name:"LlamaLend.page",setup(e){const t=be("chain"),s=w({get(){return t.value?t.value:"ethereum"},set(y){t.value=y}}),a=q(""),n=w(()=>l.value.filter(({long:y,short:k})=>{const C=a.value.toLocaleLowerCase().split(" ");return($=>C.some(P=>$.toLocaleLowerCase().includes(P)))(`${(y==null?void 0:y.name)??""}${(k==null?void 0:k.name)??""}`)})),l=w(()=>{const y=["crvusd"],k=(i.value??[]).map($=>({market:$,isLong:y.includes($.borrowed_token.symbol.toLocaleLowerCase()),isShort:y.includes($.collateral_token.symbol.toLocaleLowerCase())})).filter(({isLong:$,isShort:P})=>$||P),C=[],S=new Set;for(const{market:$,isLong:P,isShort:B}of k){if(S.has($.controller))continue;S.add($.controller);const K=k.find(x=>x.market.borrowed_token.address===$.collateral_token.address&&x.market.collateral_token.address===$.borrowed_token.address);K&&S.add(K.market.controller),C.push({long:P?$:K==null?void 0:K.market,short:B?$:K==null?void 0:K.market})}return C}),{isFetching:r,data:i}=Aa(s),{data:c}=Fv(),{show:d,crumbs:p}=E(Te());fe(()=>{d.value=!0,p.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:s.value})},{id:"market",label:"Select market for details",hint:!0}]});const v=Je(),g=async y=>{y&&await v.push({name:"llamalendmarket",params:{tab:"",chain:s.value,marketAddr:y.controller}})},_=y=>n.value.map(k=>y==="long"?k.long:k.short).filter(k=>!!k).reduce((k,C)=>k+C.total_debt_usd,0),f=y=>{const k=n.value.map(C=>y==="long"?C.long:C.short).filter(C=>!!C).reduce(({debt:C,assets:S},$)=>({debt:C+$.total_debt_usd,assets:S+$.total_assets_usd}),{debt:0,assets:0});return k.assets===0?0:k.debt/k.assets*100};return(y,k)=>{const C=$e,S=X,$=de;return h(),A("div",Wv,[(h(),L(qt,{to:"#toolbar"},[u("div",xv,[m(C,{modelValue:o(a),"onUpdate:modelValue":k[0]||(k[0]=P=>J(a)?a.value=P:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Ot,{class:"chain-select",chain:o(s),chains:o(c),onSelectChain:k[1]||(k[1]=P=>s.value=P==="all"?"ethereum":P)},null,8,["chain","chains"])])])),u("div",Kv,[u("div",Nv,[m($,{label:"Open Interest","has-value":!o(r)},{default:b(()=>[m(S,{value:_("long"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m($,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(r),tooltip:"Aggregate debt divided by aggregate assets"},{default:b(()=>[m(S,{value:f("long"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(Ps),{style:{"grid-column":"1"},type:"long",pairs:o(n),loading:o(r),chain:o(s),onSelected:g},null,8,["pairs","loading","chain"])]),u("div",Hv,[u("div",Qv,[m($,{label:"Open Interest","has-value":!o(r)},{default:b(()=>[m(S,{value:_("short"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m($,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(r),tooltip:"Aggregate debt divided by aggregate assets"},{default:b(()=>[m(S,{value:f("short"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(Ps),{style:{"grid-column":"2"},type:"short",pairs:o(n),loading:o(r),chain:o(s),onSelected:g},null,8,["pairs","loading","chain"])])])}}}),jv=I(zv,[["__scopeId","data-v-26901192"]]),Gv={class:"actions"},Xv={class:"buttons"},Zv={ref:"chartRef",class:"chart"},Yv=T({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(e){const{theme:t}=E(N()),{items:s,toggles:a,disabled:n}=Le(()=>{const{blue:_,yellow:f,purple:y}=t.value.colors;return[{id:"supply",label:"Supply",color:_},{id:"debt",label:"Debt",color:f},{id:"util",label:"Util %",color:y,togglable:!0}]}),{isFetching:l,data:r}=rt(O(()=>e.market),O(()=>e.chain)),i=q(!1),c=ye("card"),{chart:d,series:p}=se({createChartOptions:te(w(()=>({leftPriceScale:{visible:a.util.value}}))),series:[{type:"Line",name:"supply",options:w(()=>({priceFormat:{type:"custom",formatter:_=>`$${Q(_,0,"dollar")}${H(_,"dollar")}`,minMove:.01},lineWidth:2,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:w(()=>({priceFormat:{type:"custom",formatter:_=>`$${Q(_,0,"dollar")}${H(_,"dollar")}`,minMove:.01},lineWidth:2,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"util",options:w(()=>({priceFormat:{type:"custom",formatter:_=>`${Math.round(_*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:t.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(v);function v(){var k,C,S,$;if(!d.value||!p.supply||!p.debt||!p.util)return;const _=r.value.map(P=>({time:P.timestamp,value:P.totalAssetsUsd})).uniqWith((P,B)=>P.time===B.time).orderBy(P=>P.time,"asc"),f=r.value.map(P=>({time:P.timestamp,value:P.totalDebtUsd})).uniqWith((P,B)=>P.time===B.time).orderBy(P=>P.time,"asc"),y=(a.util.value?_:[]).zip(f).map(([P,B])=>({time:B.time,value:P.value>0?B.value/P.value:0})).uniqWith((P,B)=>P.time===B.time).orderBy(P=>P.time,"asc");if(p.supply.setData(_),p.debt.setData(f),p.util.setData(y),p.util.applyOptions({visible:a.util.value}),_.length>0||f.length>0){const P=Math.min(((k=_.at(0))==null?void 0:k.time)??1/0,((C=f.at(0))==null?void 0:C.time)??1/0),B=Math.max(((S=_.at(-1))==null?void 0:S.time)??-1/0,(($=f.at(-1))==null?void 0:$.time)??-1/0);d.value.timeScale().setVisibleRange({from:P,to:B})}}function g(){const _=[...Object.entries(p).map(([$,P])=>((P==null?void 0:P.data())??[]).map(B=>({name:$,data:B})))].flat().groupBy($=>$.data.time).entries().orderBy(([$])=>Number($)).map(([$,P])=>{const B=P.orderBy(K=>K.name).map(K=>K.data.value).join(";");return`${$};${B}`}),y=["time;"+Object.keys(p).orderBy($=>$).join(";"),..._].join(`
`),k=new Blob([y],{type:"text/csv;charset=utf-8"}),C=URL.createObjectURL(k),S=document.createElement("a");S.href=C,S.download="market_supply_data.csv",S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(C)}return(_,f)=>{const y=Se,k=ve,C=D;return h(),L(C,{ref_key:"card",ref:c,title:"Supply & Debt",loading:o(l)},{actions:b(()=>{var S;return[u("div",Gv,[m(y,{items:o(s),disabled:o(n),onToggle:f[0]||(f[0]=$=>o(a)[$].value=!o(a)[$].value)},null,8,["items","disabled"]),u("div",Xv,[m(k,{onClick:g},{default:b(()=>f[2]||(f[2]=[u("i",{class:"fas fa-download"},null,-1)])),_:1}),m(o(st),{modelValue:o(i),"onUpdate:modelValue":f[1]||(f[1]=$=>J(i)?i.value=$:null),chart:o(d),target:(S=o(c))==null?void 0:S.$el},null,8,["modelValue","chart","target"])])])]}),default:b(()=>[u("div",Zv,null,512)]),_:1},8,["loading"])}}}),Jv=I(Yv,[["__scopeId","data-v-2dfe4a89"]]),eh={class:"actions"},th={ref:"chartRef",class:"chart"},sh=T({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(O(()=>e.market),O(()=>e.chain)),{theme:a}=E(N()),n=w(()=>e.market?e.market.collateral_token.symbol:"?"),l=w(()=>e.market?e.market.borrowed_token.symbol:"?"),{items:r}=Le(()=>[{id:n.value,label:n.value,color:a.value.colors.blue},{id:l.value,label:l.value,color:a.value.colors.yellow}]),i=q(!0),{chart:c,series:d}=se({createChartOptions:te(),series:[{type:"Line",name:"collateral",options:w(()=>({priceFormat:{type:"custom",formatter:v},lineWidth:2,color:a.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"borrowed",options:w(()=>({priceFormat:{type:"custom",formatter:v},lineWidth:2,color:a.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(p);function p(){var y,k,C,S;if(!c.value||!d.collateral||!d.borrowed)return;const g=i.value,_=s.value.map($=>({time:$.timestamp,value:g?$.collateralBalanceUsd:$.collateralBalance})).uniqWith(($,P)=>$.time===P.time).orderBy($=>$.time,"asc"),f=s.value.map($=>({time:$.timestamp,value:g?$.borrowedBalanceUsd:$.borrowedBalance})).uniqWith(($,P)=>$.time===P.time).orderBy($=>$.time,"asc");if(_.length>0&&d.collateral.setData(_),f.length>0&&d.borrowed.setData(f),_.length>0||f.length>0){const $=Math.min(((y=_.at(0))==null?void 0:y.time)??1/0,((k=f.at(0))==null?void 0:k.time)??1/0),P=Math.max(((C=_.at(-1))==null?void 0:C.time)??-1/0,((S=f.at(-1))==null?void 0:S.time)??-1/0);c.value.timeScale().setVisibleRange({from:$,to:P})}}function v(g){return`${i.value?"$":""}${Q(g,0,"dollar")}${H(g,"dollar")}`}return(g,_)=>{const f=Se,y=yt,k=D;return h(),L(k,{title:"Collateral",loading:o(t)},{actions:b(()=>[u("div",eh,[m(f,{items:o(r)},null,8,["items"]),m(y,{value:"Dollars","model-value":o(i),onClick:_[0]||(_[0]=C=>i.value=!o(i))},null,8,["model-value"])])]),default:b(()=>[u("div",th,null,512)]),_:1},8,["loading"])}}}),ah=I(sh,[["__scopeId","data-v-539bbe45"]]),oh={ref:"chartRef",class:"chart"},nh=T({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(O(()=>e.market),O(()=>e.chain)),{theme:a}=E(N()),{chart:n,series:l}=se({createChartOptions:te(),series:{type:"Histogram",name:"loans",options:w(()=>({color:a.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});ee(r);function r(){if(!n.value||!l.loans)return;const i=s.value.map(c=>({time:c.timestamp,value:c.numLoans})).uniqWith((c,d)=>c.time===d.time).orderBy(c=>c.time,"asc");if(i.length>0){l.loans.setData(i);const c=i[0].time,d=i[i.length-1].time;n.value.timeScale().setVisibleRange({from:c,to:d})}}return(i,c)=>{const d=D;return h(),L(d,{title:"Loans",loading:o(t)},{default:b(()=>[u("div",oh,null,512)]),_:1},8,["loading"])}}}),lh={class:"actions"},rh={ref:"chartRef",class:"chart"},ih=T({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(e){const{theme:t}=E(N()),{items:s}=Le(()=>[{id:"borrow",label:"Borrow APY",color:t.value.colors.red},{id:"lend",label:"Lend APY",color:t.value.colors.green}]),{isFetching:a,data:n}=rt(O(()=>e.market),O(()=>e.chain)),{chart:l,series:r}=se({createChartOptions:te({localization:{priceFormatter:d=>c(d)}}),series:[{type:"Line",name:"borrowApy",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,color:t.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"lendApy",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,color:t.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});ee(i);function i(){var v,g,_,f;if(!l.value||!r.borrowApy||!r.lendApy)return;const d=n.value.map(y=>({time:y.timestamp,value:y.borrowApy})).uniqWith((y,k)=>y.time===k.time).orderBy(y=>y.time,"asc"),p=n.value.map(y=>({time:y.timestamp,value:y.lendApy})).uniqWith((y,k)=>y.time===k.time).orderBy(y=>y.time,"asc");if(d.length>0&&r.borrowApy.setData(d),p.length>0&&r.lendApy.setData(p),d.length>0||p.length>0){const y=Math.min(((v=d.at(0))==null?void 0:v.time)??1/0,((g=p.at(0))==null?void 0:g.time)??1/0),k=Math.max(((_=d.at(-1))==null?void 0:_.time)??-1/0,((f=p.at(-1))==null?void 0:f.time)??-1/0);l.value.timeScale().setVisibleRange({from:y,to:k})}}function c(d){return`${Q(d*100,0,"percentage")}${H(d,"percentage")}`}return(d,p)=>{const v=Se,g=D;return h(),L(g,{title:"Rates",loading:o(a)},{actions:b(()=>[u("div",lh,[m(v,{items:o(s)},null,8,["items"])])]),default:b(()=>[u("div",rh,null,512)]),_:1},8,["loading"])}}}),ch=["href"],uh={key:1},dh=T({__name:"Addresses",props:{market:{}},setup(e){const t=w(()=>{var n,l,r,i,c;return[{description:"Controller",address:(n=e.market)==null?void 0:n.controller},{description:"Vault",address:(l=e.market)==null?void 0:l.vault},{description:"Llamma",address:(r=e.market)==null?void 0:r.llamma},{description:"Policy",address:(i=e.market)==null?void 0:i.policy},{description:"Oracle",address:(c=e.market)==null?void 0:c.oracle}]}),s=n=>`https://etherscan.io/address/${n}`,a=async n=>{await navigator.clipboard.writeText(n)};return(n,l)=>{const r=ve,i=ae,c=D;return h(),L(c,{title:"Addresses",class:"addresses"},{default:b(()=>[m(i,{class:"addresses-table",rows:o(t)},{row:b(({item:{description:d,address:p}})=>[u("div",null,V(d),1),u("div",null,[p?(h(),A("a",{key:0,class:"font-mono",href:s(p),target:"_blank"},V(p),9,ch)):(h(),A("span",uh,"?"))]),u("div",null,[p?(h(),L(r,{key:0,icon:"fas fa-link",onClick:v=>a(p)},null,8,["onClick"])):F("",!0)])]),_:1},8,["rows"])]),_:1})}}}),ph=I(dh,[["__scopeId","data-v-f7ba3474"]]),mh={class:"usage"},vh={class:"two-sides"},hh={class:"collateral"},fh={class:"two-sides"},_h={class:"two-sides"},gh=T({__name:"KPIUsage",props:{market:{}},setup(e){const t=w(()=>{var n,l;return(((n=e.market)==null?void 0:n.collateral_balance_usd)??0)+(((l=e.market)==null?void 0:l.borrowed_balance_usd)??0)}),s=w(()=>{var i,c;const n="Collateral",l=((i=e.market)==null?void 0:i.collateral_token.symbol)??"?",r=((c=e.market)==null?void 0:c.borrowed_token.symbol)??"?";return`${n} (${l} / ${r})`}),a=w(()=>e.market?e.market.total_assets_usd===0?0:e.market.total_debt_usd/e.market.total_assets_usd:0);return(n,l)=>{var c,d;const r=X,i=de;return h(),A("div",mh,[m(i,{style:{"grid-area":"kpi1"},label:o(s),"has-value":!!n.market},{default:b(()=>{var p,v;return[u("div",vh,[u("div",hh,[m(r,{value:(p=n.market)==null?void 0:p.collateral_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),l[0]||(l[0]=R(" / ")),m(r,{value:(v=n.market)==null?void 0:v.borrowed_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),m(r,{value:o(t),"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(i,{style:{"grid-area":"kpi2"},label:`Borrowed (${((c=n.market)==null?void 0:c.borrowed_token.symbol)??"?"})`,"has-value":!!n.market},{default:b(()=>{var p,v;return[u("div",fh,[m(r,{value:(p=n.market)==null?void 0:p.total_debt,"show-symbol":!1,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"]),m(r,{value:(v=n.market)==null?void 0:v.total_debt_usd,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(i,{style:{"grid-area":"kpi3"},label:`Supplied (${((d=n.market)==null?void 0:d.borrowed_token.symbol)??"?"})`,"has-value":!!n.market},{default:b(()=>{var p,v;return[u("div",_h,[m(r,{value:(p=n.market)==null?void 0:p.total_assets,"show-symbol":!1,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"]),m(r,{value:(v=n.market)==null?void 0:v.total_assets_usd,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(i,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!n.market},{default:b(()=>[m(r,{value:o(a)*100,"show-zero":!0,type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])])}}}),yh=I(gh,[["__scopeId","data-v-17a4c30b"]]),bh={key:0},wh={class:"token-info"},kh=["href"],$h={key:1},Ch=T({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(r){return typeof r=="object"&&r.type==="token"}function s(r,i){return i?r==="collateral"?{type:"token",symbol:i.collateral_token.symbol,address:i.collateral_token.address}:{type:"token",symbol:i.borrowed_token.symbol,address:i.borrowed_token.address}:{type:"token",symbol:"?",address:"?"}}const a=w(()=>[{description:"Collateral",value:s("collateral",e.market)},{description:"Borrowed",value:s("borrowed",e.market)}]),n=r=>`https://etherscan.io/address/${r}`,l=async r=>{await navigator.clipboard.writeText(r)};return(r,i)=>{const c=_e,d=ve,p=ae,v=D;return h(),L(v,{class:"properties",title:"Properties"},{default:b(()=>[m(p,{class:"properties-table",rows:o(a)},{row:b(({item:{description:g,value:_}})=>[u("div",null,V(g),1),t(_)?(h(),A("div",bh,[u("div",wh,[m(c,{chain:r.chain,address:_.address},null,8,["chain","address"]),u("div",null,V(_.symbol),1),u("div",null,[u("a",{class:"font-mono",href:n(_.address),target:"_blank"},V(_.address),9,kh)]),u("div",null,[m(d,{icon:"fas fa-link",onClick:f=>l(_.address)},null,8,["onClick"])])])])):(h(),A("div",$h,V(_),1))]),_:1},8,["rows"])]),_:1})}}}),Ah=I(Ch,[["__scopeId","data-v-2ba76998"]]),Sh={class:"market"},Lh=T({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(O(()=>e.market),O(()=>e.chain)),a=w(()=>s.value.map(({timestamp:l,collateralBalanceUsd:r,borrowedBalanceUsd:i,totalDebtUsd:c})=>({timestamp:l,ratio:c>0?(r+i)/c:0}))),n=w(()=>s.value.map(({timestamp:l,collateralBalanceUsd:r,borrowedBalanceUsd:i,totalDebtUsd:c})=>({timestamp:l,equity:r+i-c})));return(l,r)=>{const i=X,c=de;return h(),A("div",Sh,[m(c,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!l.market},{default:b(()=>{var d;return[m(i,{value:(d=l.market)==null?void 0:d.borrow_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!l.market},{default:b(()=>{var d;return[m(i,{value:(d=l.market)==null?void 0:d.lend_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!l.market},{default:b(()=>{var d;return[R(V(((d=l.market)==null?void 0:d.n_loans)??0),1)]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!l.market},{default:b(()=>[m(i,{value:o(Xe)(l.market),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(o(Jv),{style:{"grid-area":"supply"},market:l.market,chain:l.chain},null,8,["market","chain"]),m(o(ah),{style:{"grid-area":"collateral"},market:l.market,chain:l.chain},null,8,["market","chain"]),m(o(wa),{style:{"grid-area":"colratio"},ratios:o(a),loading:o(t)},null,8,["ratios","loading"]),m(o(sv),{style:{"grid-area":"equity"},equity:o(n),loading:o(t)},null,8,["equity","loading"]),m(o(ih),{style:{"grid-area":"rates"},market:l.market,chain:l.chain},null,8,["market","chain"]),m(o(nh),{style:{"grid-area":"loans"},market:l.market,chain:l.chain},null,8,["market","chain"]),m(o(ph),{style:{"grid-area":"addresses"},market:l.market},null,8,["market"]),m(o(Ah),{style:{"grid-area":"properties"},market:l.market,chain:l.chain},null,8,["market","chain"]),m(o(yh),{style:{"grid-area":"usage"},market:l.market},null,8,["market"])])}}}),Th=I(Lh,[["__scopeId","data-v-8929a2da"]]),Vh={class:"trading"},Ih=T({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=w(()=>{var p;return(p=e.market)==null?void 0:p.llamma}),{isFetching:s,data:a}=gs(q("lending"),t,O(()=>e.chain)),n=q(1),{isFetching:l,data:r}=la(q("lending"),t,O(()=>e.chain),n),i=q(1),{isFetching:c,data:d}=na(q("lending"),t,O(()=>e.chain),i);return(p,v)=>{var f,y,k,C;const g=X,_=de;return h(),A("div",Vh,[m(_,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!p.market},{default:b(()=>{var S;return[m(g,{value:(S=p.market)==null?void 0:S.price_oracle,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(_,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!p.market},{default:b(()=>{var S;return[m(g,{value:(S=p.market)==null?void 0:S.amm_price,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(ka),{style:{"grid-area":"ohlc"},ohlc:o(a)??[],loading:o(s)},null,8,["ohlc","loading"]),m(o(Ca),{style:{"grid-area":"trades"},trades:((f=o(r))==null?void 0:f.trades)??[],count:((y=o(r))==null?void 0:y.count)??0,chain:p.chain,loading:o(l),onPage:v[0]||(v[0]=S=>n.value=S)},null,8,["trades","count","chain","loading"]),m(o($a),{style:{"grid-area":"events"},events:((k=o(d))==null?void 0:k.events)??[],count:((C=o(d))==null?void 0:C.count)??0,loading:o(c),onPage:v[1]||(v[1]=S=>i.value=S)},null,8,["events","count","loading"])])}}}),qh=I(Ih,[["__scopeId","data-v-36e59e27"]]),Ph={class:"liquidations"},Fh=T({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=w(()=>{var $;return($=e.market)==null?void 0:$.controller}),{isFetching:s,data:a}=rt(O(()=>e.market),O(()=>e.chain)),n=w(()=>a.value.map(({timestamp:$,priceOracle:P})=>({timestamp:$,priceOracle:P}))),l=w(()=>a.value.map(({timestamp:$,discountLiquidation:P})=>({timestamp:$,discount:P}))),{isFetching:r,data:i}=ca(q("lending"),O(()=>e.chain),t),{isFetching:c,data:d}=ia(q("lending"),O(()=>e.chain),t),{isFetching:p,data:v}=ra(q("lending"),O(()=>e.chain),t),g=w(()=>v.value.map(({timestamp:$,proportion:P})=>({timestamp:$,proportion:P*100}))),{isFetching:_,data:f}=ua(q("lending"),O(()=>e.chain),t),{isFetching:y,data:k}=da(q("lending"),O(()=>e.chain),t),{isFetching:C,data:S}=pa(q("lending"),O(()=>e.chain),t);return($,P)=>(h(),A("div",Ph,[m(o(ya),{overview:o(f),loading:o(_)},null,8,["overview","loading"]),m(o(_a),{ratios:o(g),"prices-oracle":o(n),loading:o(p)||o(s)},null,8,["ratios","prices-oracle","loading"]),m(o(va),{losses:o(k),loading:o(y)},null,8,["losses","loading"]),m(o(ha),{losses:o(k),loading:o(y)},null,8,["losses","loading"]),m(o(fa),{deciles:o(S),loading:o(C)},null,8,["deciles","loading"]),m(o(ma),{liqs:o(i),loading:o(r)},null,8,["liqs","loading"]),m(o(ba),{liqs:o(d),loading:o(c)},null,8,["liqs","loading"]),m(o(ga),{discounts:o(l),liqs:o(d),loading:o(s)||o(c)},null,8,["discounts","liqs","loading"])]))}}),Bh=I(Fh,[["__scopeId","data-v-eb81c034"]]),Dh={class:"market-overview"},Mh=T({__name:"Market.page",setup(e){const{show:t,crumbs:s}=E(Te()),a=be("chain"),n=be("marketAddr"),{isFetching:l,data:r}=Aa(a),i=w(()=>{var p;return(p=r.value)==null?void 0:p.find(v=>v.controller===n.value)});G(i,p=>{s.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:a.value})},{id:"market",label:`Market: ${(p==null?void 0:p.name)??"?"}`}]},{immediate:!0}),fe(()=>{t.value=!0});const{tabActive:c,tabActiveIndex:d}=at(["overview","trading","liquidations"],"llamalendmarket",()=>({chain:a.value,marketAddr:n.value}));return(p,v)=>{const g=et,_=Be,f=Fe;return h(),A("div",Dh,[m(g,{class:U(["spinner",{loading:o(l)}])},null,8,["class"]),!o(l)&&o(i)?(h(),L(f,{key:0,active:o(d),onTab:v[0]||(v[0]=y=>d.value=y.index)},{default:b(()=>[m(_,{header:"Overview"},{default:b(()=>[(h(),L(ce,null,[o(c)==="overview"?(h(),L(Th,{key:0,market:o(i),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1}),m(_,{header:"Trading"},{default:b(()=>[(h(),L(ce,null,[o(c)==="trading"?(h(),L(qh,{key:0,market:o(i),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1}),m(_,{header:"Liquidations"},{default:b(()=>[(h(),L(ce,null,[o(c)==="liquidations"?(h(),L(Bh,{key:0,market:o(i),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),Uh=I(Mh,[["__scopeId","data-v-5c0a9226"]]);function Sa(e){const{url:t,connectOnMount:s=!0}=e,a=Os(null),n=q("");function l(){return a.value&&v(),n.value=typeof t=="function"?t():t,Co(n.value,{autoConnect:!1,secure:!0,reconnection:!1}).on("error",_=>{Ce({text:`Socket.IO error: ${_.message}`,type:"error"})})}const r=q(!1),i=q(!1);function c(){r.value=!1,i.value=!0}function d(){Ce({text:`Failed to connect to ${n.value}`,type:"error"}),r.value=!1}function p(){a.value=null,i.value=!1}function v(){var _,f,y,k;(_=a.value)==null||_.off("connect",c),(f=a.value)==null||f.off("connect_error",d),(y=a.value)==null||y.off("disconnect",p),(k=a.value)==null||k.disconnect(),p()}function g(){r.value||(a.value&&v(),a.value=l(),a.value.on("connect",c),a.value.on("connect_error",d),a.value.on("disconnect",p),r.value=!0,a.value.connect())}return s&&fe(g),{socket:a,connecting:r,isConnected:i,connect:g,disconnect:v,url:n}}var ge=(e=>(e.Swap="swap",e.Deposit="deposit",e.Remove="remove",e))(ge||{});let Jt;function La(){return Jt||(Jt=Sa({url:"wss://api.curvemonitor.com/main"})),Jt}function es(e,t,s,...a){return new Promise(n=>{e.once(s,n),e.emit(t,...a)})}function ns(e,t,s){return new Ao(a=>{const n=l=>{a.next(l)};return e.on(t,n),()=>e.off(t,n)}).pipe(So())}class Ta{constructor(t){this.socket=t}getSandwiches(){return es(this.socket,"getFullSandwichTableContent","fullSandwichTableContent","full",1)}getLabels(){return es(this.socket,"getSandwichLabelOccurrences","sandwichLabelOccurrences")}getLabelsRanking(){return es(this.socket,"getAbsoluteLabelsRanking","absoluteLabelsRanking")}}function Va(){const{socket:e,isConnected:t,url:s}=La(),a=w(()=>e.value?new Ta(e.value):null),n=w(()=>["mev-labels",s.value]);return W({queryKey:n,queryFn:()=>{var l;return(l=a.value)==null?void 0:l.getLabels()},enabled:t})}function Rh(){const{socket:e,isConnected:t,url:s}=La(),a=w(()=>e.value?new Ta(e.value):null),n=w(()=>["mev-sandwiches-tx",s.value]);return W({queryKey:n,queryFn:()=>{var l;return(l=a.value)==null?void 0:l.getSandwiches()},enabled:t})}const Oh=T({__name:"LabelsWorstRelative",setup(e){const{theme:t}=E(N()),{data:s,isFetching:a}=Va(),n=d=>(d??[]).filter(p=>p.numOfAllTx>=12).map(p=>({...p,ratio:Number((p.occurrences/p.numOfAllTx*100).toFixed(2))})).sort((p,v)=>v.ratio-p.ratio).slice(0,10),l=w(()=>n(s.value).map(d=>d.label)),r=w(()=>n(s.value).map(d=>d.ratio)),i=w(()=>Ie(t.value,{chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:d=>{const p=d.w.globals.labels[d.seriesIndex],v=d.series[d.seriesIndex];return[`<div><b>${p}</b>:</div><div>Ratio: ${c(v)}</div>`].join("")}},labels:l.value})),c=d=>`${d}%`;return(d,p)=>{const v=Ve,g=D;return h(),L(g,{title:"Worst relative offenders",loading:o(a)},{default:b(()=>[m(v,{options:o(i),series:o(r)},null,8,["options","series"])]),_:1},8,["loading"])}}}),Eh=I(Oh,[["__scopeId","data-v-84c38638"]]),Wh=T({__name:"LabelsWorstAbsolute",setup(e){const{theme:t}=E(N()),{data:s,isFetching:a}=Va(),n=d=>(d??[]).filter(p=>p.numOfAllTx>=12).map(p=>({...p,occurrences:p.occurrences})).sort((p,v)=>v.occurrences-p.occurrences).slice(0,10),l=w(()=>n(s.value).map(d=>d.label)),r=w(()=>n(s.value).map(d=>d.occurrences)),i=w(()=>Ie(t.value,{chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:d=>{const p=d.w.globals.labels[d.seriesIndex],v=d.series[d.seriesIndex];return[`<div><b>${p}</b>:</div><div>Occurences: ${c(v)}</div>`].join("")}},labels:l.value})),c=d=>`${d}`;return(d,p)=>{const v=Ve,g=D;return h(),L(g,{title:"Worst absolute offenders",loading:o(a)},{default:b(()=>[m(v,{options:o(i),series:o(r)},null,8,["options","series"])]),_:1},8,["loading"])}}}),xh=I(Wh,[["__scopeId","data-v-f3d39c78"]]),Kh={style:{display:"grid","grid-template-columns":"auto auto"}},Nh={style:{display:"flex",gap:"1rem"}},Hh={key:0,class:"fas fa-arrow-up"},Qh={key:1,class:"fas fa-arrow-down"},zh={key:2,class:"fas fa-exchange-alt"},jh={key:0,class:"end"},Gh=["href"],Xh=["href"],Zh=["href"],Yh=["innerHTML"],Jh={key:1,class:"end"},Fs=10,ef=T({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(e){const{relativeTime:t}=Pe(),s=q(""),a=q([ge.Swap,ge.Deposit,ge.Remove]),n=w(()=>e.time?["Type","Block","Tx","Trader","Assets","Time"]:["Type","Tx","Trader","Assets"]),l=w(()=>(e.txs??[]).filter(v=>a.value.includes(v.transaction_type)).filter(v=>{const g=s.value.toLocaleLowerCase().split(" "),_=f=>g.some(y=>f.toLocaleLowerCase().includes(y));return _(v.block_number.toString())||_(v.trader)||_(v.tx_hash)})),{page:r,rowsPage:i,onPage:c}=gt(l,Fs),d=v=>{if(v.transaction_type===ge.Swap){const g=v.coins_leaving_wallet[0],_=v.coins_entering_wallet[0],f=Re(parseFloat(g.amount.toString())),y=Re(parseFloat(_.amount.toString())),k=`<span>${f} ${g.name}</span>`,C="<i class='fas fa-arrow-right'></i>",S=`<span style='justify-self: end;'>${y} ${_.name}</span>`;return`${k}${C}${S}`}else if(v.transaction_type===ge.Deposit){const g=v.coins_entering_wallet[0];return`${Re(parseFloat(g.amount.toString()))} ${g.name}`}else{const g=v.coins_leaving_wallet[0];return`${Re(parseFloat(g.amount.toString()))} ${g.name}`}},p=v=>{v===0?a.value=[ge.Swap,ge.Deposit,ge.Remove]:v===1?a.value=[ge.Swap]:v===2?a.value=[ge.Deposit]:v===3?a.value=[ge.Remove]:a.value=[]};return(v,g)=>{const _=Be,f=Fe,y=$e,k=qe,C=ae,S=D;return h(),L(S,{class:"trades-card",title:"Transactions"},Lo({default:b(()=>[m(C,{class:U(["trades-table",{compact:v.compact,time:v.time}]),rows:o(i),columns:o(n)},{row:b(({item:$})=>[u("div",{class:U(["type",{deposit:$.transaction_type==="deposit",remove:$.transaction_type==="remove",swap:$.transaction_type==="swap"}])},[$.transaction_type==="deposit"?(h(),A("i",Hh)):$.transaction_type==="remove"?(h(),A("i",Qh)):(h(),A("i",zh)),R(" "+V(o(ht)($.transaction_type)),1)],2),v.time?(h(),A("div",jh,[u("a",{class:"vote-link",href:`https://etherscan.io/block/${$.block_number}`,target:"_blank"},V($.block_number),9,Gh)])):F("",!0),u("div",null,[u("a",{class:"vote-link",href:`https://etherscan.io/tx/${$.tx_hash}`,target:"_blank",onClick:g[2]||(g[2]=me(()=>{},["stop"]))},V(o(we)($.tx_hash)),9,Xh)]),u("div",null,[u("a",{class:"vote-link",href:`https://etherscan.io/address/${$.trader}`,target:"_blank",onClick:g[3]||(g[3]=me(()=>{},["stop"]))},V(o(we)($.trader)),9,Zh)]),u("div",{class:U(["assets",{swap:$.transaction_type==="swap"}]),innerHTML:d($)},null,10,Yh),v.time?(h(),A("div",Jh,V(o(t)($.block_unixtime)),1)):F("",!0)]),_:1},8,["class","rows","columns"])]),_:2},[v.header?{name:"actions",fn:b(()=>[u("div",Kh,[m(f,{class:"types",onTab:g[0]||(g[0]=$=>p($.index))},{default:b(()=>[m(_,{header:"All"}),m(_,{header:"Swaps"}),m(_,{header:"Deposits"}),m(_,{header:"Removals"})]),_:1})]),u("div",Nh,[m(y,{modelValue:o(s),"onUpdate:modelValue":g[1]||(g[1]=$=>J(s)?s.value=$:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(k,{class:"pagination","items-count":o(l).length,"items-per-page":Fs,page:o(r),onPage:o(c)},null,8,["items-count","page","onPage"])])]),key:"0"}:void 0]),1024)}}}),tf=I(ef,[["__scopeId","data-v-53202ab6"]]),sf={style:{display:"flex",gap:"1rem"}},af=["href"],of={style:{display:"grid",gap:"1ch","grid-template-columns":"auto 16ch 1fr"}},nf=["href"],lf={class:"end"},ts=10,rf=T({__name:"Sandwiches",setup(e){const t=q(1),{data:s,isFetching:a}=Rh(),{expanded:n,toggleExpansion:l}=oa(),{relativeTime:r}=Pe(),i=q(""),c=w(()=>{var v;return((v=s.value)==null?void 0:v.totalPages)??0*ts}),d=w(()=>{var v;return(((v=s.value)==null?void 0:v.data)??[]).filter(g=>{const _=i.value.toLocaleLowerCase().split(" "),f=y=>_.some(k=>y.toLocaleLowerCase().includes(k));return f(g.poolName)||f(g.poolAddress)||f(g.label)}).orderBy([g=>g.frontrun.block_unixtime,g=>g.frontrun.tx_position],"desc")}),p=v=>[v.frontrun,...v.center,v.backrun].orderBy([g=>g.block_unixtime,g=>g.tx_position]);return(v,g)=>{const _=$e,f=qe,y=ae,k=D;return h(),L(k,{class:"sandwiches-card",title:"Sandwiches",loading:o(a)},{actions:b(()=>[u("div",sf,[m(_,{modelValue:o(i),"onUpdate:modelValue":g[0]||(g[0]=C=>J(i)?i.value=C:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(c)>ts?(h(),L(f,{key:0,class:"pagination","items-count":o(c),"items-per-page":ts,page:o(t),onPage:g[1]||(g[1]=C=>t.value=C)},null,8,["items-count","page"])):F("",!0)])]),default:b(()=>[m(y,{class:"sandwiches-table",rows:o(d),columns:["Pool","Action","Affected Contract",{label:"Time",align:"end"}],expanded:o(n),onSelected:g[2]||(g[2]=C=>o(l)(C))},{row:b(({item:C})=>[u("div",null,[u("a",{class:"vote-link",href:`https://etherscan.io/address/${C.poolAddress}`,target:"_blank"},V(C.poolName),9,af)]),u("div",null,[u("div",of,[u("a",{class:"vote-link font-mono",target:"_blank",href:`https://etherscan.io/address/${C.center[0].trader}`},V(o(we)(C.center[0].trader)),9,nf),u("span",null," lost "+V(o(Re)(C.user_losses_details.reduce((S,$)=>S+$.amount,0)))+" "+V(C.user_losses_details[0].unit),1),u("span",null,V(o(Re)(-C.user_losses_details[0].lossInPercentage))+"% slippage, or $"+V(o(Re)(C.lossInUsd)),1)])]),u("div",null,V(C.label),1),u("div",lf,V(o(r)(C.frontrun.block_unixtime)),1)]),"row-details":b(({item:C})=>[m(tf,{class:"transactions",txs:p(C),header:!1,compact:!0,time:!1},null,8,["txs"])]),_:1},8,["rows","expanded"])]),_:1},8,["loading"])}}}),cf=I(rf,[["__scopeId","data-v-2f0d34d8"]]),uf={class:"mev"},df=T({__name:"MEV",setup(e){return(t,s)=>(h(),A("div",uf,[m(cf,{style:{"grid-area":"sws"}}),m(Eh,{style:{"grid-area":"relative"}}),m(xh,{style:{"grid-area":"absolute"}})]))}}),pf=I(df,[["__scopeId","data-v-861d7244"]]),mf={class:"monitor"},vf=T({__name:"Monitor.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["mev"],"monitor");return(a,n)=>{const l=Be,r=Fe;return h(),A("div",mf,[m(r,{active:o(s),onTab:n[0]||(n[0]=i=>s.value=i.index)},{default:b(()=>[m(l,{header:"MEV"},{default:b(()=>[(h(),L(ce,null,[o(t)==="mev"?(h(),L(pf,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),hf=I(vf,[["__scopeId","data-v-b5d30464"]]),ff=["all","ownership","parameter","other"];function Ze(e){return e.executed?"executed":e.end>new Date().getTime()/1e3?"active":Pa(e)&&qa(e)&&Ia(e)?"passed":"denied"}function Ia(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function qa(e){return e.votesFor>e.quorum*e.totalSupply}function Pa(e){return e.votesFor>e.votesAgainst}const Fa=e=>{var y;const t=e.vote_id,s=e.vote_type.toLocaleLowerCase()==="parameter"?"parameter":"ownership",a=(y=e.metadata)!=null&&y.startsWith('"')?e.metadata.substring(1):e.metadata??"",n=e.creator.toLocaleLowerCase(),l=e.snapshot_block,r=e.start_date,i=r+604800,c=Ue(BigInt(e.min_accept_quorum),18n),d=Ue(BigInt(e.support_required),18n),p=e.vote_count,v=Ue(BigInt(e.votes_for),18n),g=Ue(BigInt(e.votes_against),18n),_=e.executed,f=Ue(BigInt(e.total_supply),18n);return{id:t,type:s,metadata:a,proposer:n,block:l,start:r,end:i,quorum:c,support:d,voteCount:p,votesFor:v,votesAgainst:g,executed:_,totalSupply:f}},_f=e=>{const t=Fa(e),s=e.script,a=e.votes.map(n=>({voter:n.voter.toLocaleLowerCase(),supports:n.supports,votingPower:Ue(BigInt(n.voting_power),18n)}));return{...t,script:s,votes:a}},Bs="https://prices.curve.fi";class gf extends Ae{async getProposals(t,s,a,n){const l=await this.fetch(`${Bs}/v1/dao/proposals?pagination=10&page=${t}&search_string=${s}&type_filter=${a}&status_filter=${n}`);return{proposals:l.proposals.map(Fa),count:l.count}}async getProposal(t,s){const a=await this.fetch(`${Bs}/v1/dao/proposals/details/${s}/${t}`);return _f(a)}}const Ba=new gf;function Da(e,t,s){return W({queryKey:["curve-proposal",e,t],queryFn:({queryKey:[,a,n]})=>Ba.getProposal(a,n),...s&&{enabled:s}})}function yf(e,t,s,a){return W({queryKey:["curve-proposals",e,a,t,s],queryFn:({queryKey:[,n,l,r,i]})=>Ba.getProposals(n,l,r,i),placeholderData:Pt})}const bf=T({__name:"Status",props:{proposal:{}},setup(e){const t=w(()=>{if(Ze(e.proposal)==="denied")if(qa(e.proposal))if(Pa(e.proposal)){if(!Ia(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes";else return"Quorum was not reached (yes votes need to pass this number)";return""}),s=w(()=>{switch(Ze(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";default:return"Unk. Status"}});return(a,n)=>{const l=ms,r=de;return h(),L(r,{class:"status","tooltip-type":"underline",label:"Status","has-value":!0,tooltip:o(t)},{default:b(()=>[o(t)?(h(),L(l,{key:0},{trigger:b(()=>[u("span",{class:U(["status-value",o(Ze)(a.proposal)])},V(o(s)),3)]),default:b(()=>[R(" "+V(o(t)),1)]),_:1})):(h(),A("span",{key:1,class:U(["status-value",o(Ze)(a.proposal)])},V(o(s)),3))]),_:1},8,["tooltip"])}}}),wf=I(bf,[["__scopeId","data-v-5385a527"]]),kf=T({__name:"Type",props:{proposal:{}},setup(e){return(t,s)=>{const a=de;return h(),L(a,{class:"type",label:"Type",value:o(ht)(t.proposal.type),"has-value":!0},null,8,["value"])}}}),$f=["href"],Cf=T({__name:"Proposer",props:{proposal:{}},setup(e){return(t,s)=>{const a=de;return h(),L(a,{class:"proposer",label:"Proposer","has-value":!0},{default:b(()=>[u("a",{href:`https://etherscan.io/address/${t.proposal.proposer}`,target:"_blank"},V(o(we)(t.proposal.proposer)),9,$f)]),_:1})}}}),Ds=T({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const s=q(""),a=w(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),n=w(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const i=new Date(e.proposal.end*1e3);return i>new Date?s.value:i.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),l=w(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});fe(()=>{r()});const r=()=>{const i=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{s.value=pn(i)})};return(i,c)=>{const d=de;return h(),L(d,{class:"date","tooltip-type":"underline",label:o(a),value:o(n),"has-value":!0,tooltip:o(l)},null,8,["label","value","tooltip"])}}}),Af={class:"metadata"},Sf={class:"row"},Lf=T({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const s=t,a=w(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),n=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/#/dao/proposal/${e.proposal.type}/${e.proposal.id}`)};return(l,r)=>{const i=Ye("router-link");return h(),A("div",{class:"proposal-summary",onClick:r[0]||(r[0]=c=>s("toggleExpand"))},[u("div",{class:U(["title",{"no-title":!l.proposal.metadata}])},[m(i,{to:o(a),class:"id",onClick:n},{default:b(()=>[r[1]||(r[1]=u("i",{class:"fas fa-link"},null,-1)),R(" "+V(l.proposal.id),1)]),_:1},8,["to"]),u("div",Af,V(l.proposal.metadata||"< No Title >"),1)],2),u("div",Sf,[m(wf,{class:"item",proposal:l.proposal},null,8,["proposal"]),m(kf,{class:"item",proposal:l.proposal},null,8,["proposal"]),m(Cf,{class:"item",proposal:l.proposal},null,8,["proposal"]),m(Ds,{class:"item",proposal:l.proposal,type:"start"},null,8,["proposal"]),m(Ds,{class:"item",proposal:l.proposal,type:"end"},null,8,["proposal"]),u("div",{class:U(["item expander",{expanded:l.expanded}])},r[2]||(r[2]=[u("i",{class:"fas fa-chevron-up"},null,-1)]),2)])])}}}),Tf=I(Lf,[["__scopeId","data-v-76ab0c27"]]),Vf={class:"results"},If={class:"choice"},qf={class:"amount"},Pf={class:"left"},Ff={class:"right"},Bf={class:"choice"},Df={class:"amount"},Mf={class:"left"},Uf={class:"right"},Ms=4,Rf=T({__name:"VotingResults",props:{proposal:{}},setup(e){const t=w(()=>e.proposal.votesFor+e.proposal.votesAgainst),s=w(()=>e.proposal.votesFor/t.value*100),a=w(()=>e.proposal.votesAgainst/t.value*100);return(n,l)=>{const r=X;return h(),A("div",Vf,[l[8]||(l[8]=u("div",{class:"heading"},"Results",-1)),u("div",If,[l[3]||(l[3]=u("div",{class:"label"},"For",-1)),u("div",qf,[u("div",Pf,[m(r,{value:n.proposal.votesFor,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),l[0]||(l[0]=u("span",null," veCRV",-1))]),u("div",Ff,[l[1]||(l[1]=u("span",null,"(",-1)),m(r,{value:o(s),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),l[2]||(l[2]=u("span",null,")",-1))])]),u("div",{class:"bar",style:he({width:`${Math.max(Ms,o(s))}%`})},null,4)]),u("div",Bf,[l[7]||(l[7]=u("div",{class:"label"},"Against",-1)),u("div",Df,[u("div",Mf,[m(r,{value:n.proposal.votesAgainst,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),l[4]||(l[4]=u("span",null," veCRV",-1))]),u("div",Uf,[l[5]||(l[5]=u("span",null,"(",-1)),m(r,{value:o(a),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),l[6]||(l[6]=u("span",null,")",-1))])]),u("div",{class:"bar",style:he({width:`${Math.max(Ms,o(a))}%`})},null,4)])])}}}),Of=I(Rf,[["__scopeId","data-v-db359ab8"]]),Ef={class:"quorum"},Wf={class:"amount"},xf={class:"bar"},Kf={class:"percentages"},Nf={class:"quorum"},Hf=T({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=w(()=>e.proposal.votesFor),s=w(()=>e.proposal.quorum*e.proposal.totalSupply),a=w(()=>t.value/s.value*100);return(n,l)=>{const r=X;return h(),A("div",Ef,[l[3]||(l[3]=u("div",{class:"heading"},"Quorum",-1)),u("div",Wf,[m(r,{value:o(t),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),l[0]||(l[0]=R(" / ")),m(r,{value:o(s),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),l[1]||(l[1]=R(" veCRV "))]),u("div",xf,[u("div",{class:"support",style:he({width:`${o(a)}%`})},null,4),u("div",{class:"quorum",style:he({width:`${100-o(a)}%`})},null,4)]),u("div",Kf,[l[2]||(l[2]=u("div",{class:"zero"},"0%",-1)),u("div",Nf,[m(r,{value:n.proposal.quorum*100,precision:0,type:"percentage"},null,8,["value"])])])])}}}),Qf=I(Hf,[["__scopeId","data-v-a0968c4c"]]),zf=["min","max"],jf=T({__name:"Slider",props:Ee({min:{},max:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=mt(e,"modelValue",{set(s){return Number(s)}});return(s,a)=>us((h(),A("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),type:"range",min:s.min,max:s.max},null,8,zf)),[[Es,t.value]])}}),Gf=I(jf,[["__scopeId","data-v-11f803b8"]]),Xf=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],Qe=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],Zf={class:"buttons"},Yf={class:"vecrv"},Jf={class:"info"},e_={class:"kpis"},t_={class:"description"},s_={class:"options"},a_={class:"middle"},o_=["contenteditable","textContent"],n_=T({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=Ft(),s=q(!1),a=q(50),n=ye("editor"),l=q(!1),r=w(()=>{var j;return l.value?`${a.value}.`:a.value===0&&((j=n.value)==null?void 0:j.textContent)!=="0"?"":a.value.toString()}),i=w(()=>(P.value??0n)>0n&&!xe.value&&p.value&&$.value===0),c=w(()=>i.value?"Submit":xe.value?"Voting...":p.value?$.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),d=w(()=>Ue(P.value??0n,18n)),p=w(()=>Ze(e.proposal)==="active"),v=w(()=>Ze(e.proposal)==="passed"),g=()=>{const j=window.getSelection();return j&&j.rangeCount>0?j.getRangeAt(0).startOffset:0},_=j=>{if(n.value){const z=document.createRange();z.setStart(n.value.firstChild??n.value,j),z.collapse(!0);const pe=window.getSelection();pe&&(pe.removeAllRanges(),pe.addRange(z))}},f=()=>{a.value=0,n.value&&(n.value.textContent="0")},y=()=>{a.value=100,n.value&&(n.value.textContent="100")},k=j=>{j.target===j.currentTarget&&n.value&&n.value.focus()},C=()=>{if(n.value){const j=n.value.textContent??"",z=g();if(/^\d*(\.\d*)?$/.test(j))if(l.value=j.endsWith("."),j){const pe=parseFloat(j);pe>=0&&pe<=100?a.value=pe:(n.value.textContent=r.value,_(z-1))}else a.value=0;else n.value.textContent=r.value,_(z-1)}},{data:S}=ct({abi:Qe,address:Ne,functionName:"token",query:{enabled:s}}),{data:$}=ct({abi:Qe,address:Ne,functionName:"getVoterState",args:w(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:w(()=>!!t.value&&s.value),initialData:0,initialDataUpdatedAt:0}}),{data:P}=ct({abi:Xf,address:S,functionName:"balanceOfAt",args:w(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:w(()=>!!S.value&&!!t.value&&s.value),initialData:0n,initialDataUpdatedAt:0}}),{data:B,refetch:K}=ct({abi:Qe,address:Ne,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:w(()=>v.value&&s.value),initialData:!1,initialDataUpdatedAt:0}}),{data:x}=ct({abi:Qe,address:Ne,functionName:"PCT_BASE",query:{enabled:s}}),{data:De,error:M,isPending:le,writeContract:ue}=ks(),{isLoading:oe,isSuccess:ne}=$s({hash:De}),xe=w(()=>le.value||oe.value);function Me(){if(!x.value){Ce({text:St("Missing PCT_BASE"),type:"error"});return}const j=BigInt(Math.log10(Number(x.value))),z=Hs(a.value/100,j),pe=x.value-z;ue({abi:Qe,address:Ne,functionName:"votePct",args:[BigInt(e.proposal.id),z,pe,!1]})}dt(M,j=>{Ce({text:St(j),type:"error"})}),dt(ne,()=>{Ce({text:"Voted",type:"success"})});const{data:it,error:Wt,isPending:xa,writeContract:Ka}=ks(),{isLoading:Na,isSuccess:Ha}=$s({hash:it}),bs=w(()=>xa.value||Na.value);function Qa(){Ka({abi:Qe,address:Ne,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),K()}return dt(Wt,j=>{Ce({text:St(j),type:"error"})}),dt(Ha,()=>{Ce({text:"Executed proposal",type:"success"})}),(j,z)=>{const pe=ve,za=X,ws=de,ja=Gf,Ga=D,Xa=Bt;return h(),A(Y,null,[u("div",Zf,[m(pe,{value:"Vote",primary:!0,onClick:z[0]||(z[0]=xt=>s.value=!0)}),o(v)?(h(),L(pe,{key:0,value:o(bs)?"Executing...":"Execute",primary:!0,disabled:!o(B)||o(bs),onClick:Qa},null,8,["value","disabled"])):F("",!0)]),m(Xa,{show:o(s),onClose:z[2]||(z[2]=xt=>s.value=!1)},{default:b(()=>[m(Ga,{title:"Vote with veCRV",class:"vote-content"},{default:b(()=>[u("div",Yf,[u("div",Jf,[u("div",e_,[m(ws,{label:"Voting power","has-value":!0},{default:b(()=>[m(za,{value:o(d),precision:2,type:"dollar","show-symbol":!1,"show-zero":!0},null,8,["value"]),z[3]||(z[3]=R(" veCRV "))]),_:1}),m(ws,{label:"Block",value:j.proposal.block,"has-value":!0},null,8,["value"])]),u("div",t_,[z[4]||(z[4]=u("span",{class:"title"},"Description: ",-1)),u("span",null,V(j.proposal.metadata),1)])]),u("div",s_,[m(pe,{class:U(["no",{winning:o(a)<50}]),disabled:!o(i),onClick:f},{default:b(()=>z[5]||(z[5]=[u("span",{class:"label"},"No",-1)])),_:1},8,["class","disabled"]),u("div",a_,[u("i",{class:U(["fas fa-times",{winning:o(a)<50}])},null,2),u("div",{class:U(["value",{disabled:!o(i)}]),onClick:k},[u("span",{ref_key:"editor",ref:n,contenteditable:o(i),onInput:C,textContent:V(o(r))},null,40,o_),z[6]||(z[6]=R(" % "))],2),u("i",{class:U(["fas fa-check",{winning:o(a)>50}])},null,2)]),m(pe,{class:U(["yes",{winning:o(a)>50}]),disabled:!o(i),onClick:y},{default:b(()=>z[7]||(z[7]=[u("span",{class:"label"},"Yes",-1)])),_:1},8,["class","disabled"])]),m(ja,{modelValue:o(a),"onUpdate:modelValue":z[1]||(z[1]=xt=>J(a)?a.value=xt:null),class:"slider",disabled:!o(i),min:0,max:100},null,8,["modelValue","disabled"]),m(pe,{class:"submit",value:o(c),primary:!0,disabled:!o(i),"chain-id":o(Oe).id,onClick:Me},null,8,["value","disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),l_=I(n_,[["__scopeId","data-v-bd68104f"]]),r_={class:"voting"},i_=T({__name:"Voting",props:{proposal:{}},setup(e){return(t,s)=>(h(),A("div",r_,[m(Qf,{proposal:t.proposal},null,8,["proposal"]),m(Of,{proposal:t.proposal},null,8,["proposal"]),m(l_,{proposal:t.proposal},null,8,["proposal"])]))}}),c_=I(i_,[["__scopeId","data-v-e7664146"]]),u_={class:"voters"},d_={class:"for"},p_={class:"address"},m_=["href"],v_={class:"amount"},h_={class:"percentage"},f_={class:"against"},__={class:"percentage"},g_={class:"amount"},y_={class:"address"},b_=["href"],w_=T({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=Ft(),s=w(()=>e.proposalDetails?e.proposalDetails.votes.filter(i=>i.supports).orderBy(i=>i.votingPower,"desc"):null),a=w(()=>e.proposalDetails?e.proposalDetails.votes.filter(i=>!i.supports).orderBy(i=>i.votingPower,"desc"):null),n=i=>i==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":i==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":i==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":we(i,12),l=i=>i/(e.proposal.votesFor+e.proposal.votesAgainst)*100,r=i=>i===t.value;return(i,c)=>{const d=X;return h(),A("div",u_,[u("div",d_,[c[0]||(c[0]=u("div",{class:"title"},"For",-1)),(h(!0),A(Y,null,re(o(s),p=>(h(),A("div",{key:p.voter,class:"vote"},[u("div",p_,[u("a",{target:"_blank",href:`https://etherscan.io/address/${p.voter}`,class:U({you:r(p.voter)})},V(n(p.voter)),11,m_)]),u("div",v_,[m(d,{value:p.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),u("div",h_,[m(d,{value:l(p.votingPower),precision:0,type:"percentage"},null,8,["value"])])]))),128))]),u("div",f_,[c[1]||(c[1]=u("div",{class:"title"},"Against",-1)),(h(!0),A(Y,null,re(o(a),p=>(h(),A("div",{key:p.voter,class:"vote"},[u("div",__,[m(d,{value:l(p.votingPower),precision:0,type:"percentage"},null,8,["value"])]),u("div",g_,[m(d,{value:p.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),u("div",y_,[u("a",{target:"_blank",href:`https://etherscan.io/address/${p.voter}`,class:U({you:r(p.voter)})},V(n(p.voter)),11,b_)])]))),128))])])}}}),k_=I(w_,[["__scopeId","data-v-843eca94"]]),$_={class:"technicals"},C_={class:"technical"},A_={class:"description"},S_={class:"technical"},L_={class:"technical"},T_=["innerHTML"],V_=T({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){const t=q(!0),s=q(e.proposal.voteCount>0),{data:a}=Da(O(()=>e.proposal.id),O(()=>e.proposal.type),O(()=>e.expanded)),n=w(()=>a.value?a.value.votes.uniqWith((r,i)=>r.voter===i.voter).length:null),l=w(()=>a.value?a.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,r=>/[A-F]/g.test(r)&&ds(r)?`<a href='https://etherscan.io/address/${r}'>${r}</a>`:r):null);return(r,i)=>{const c=vt;return h(),A("div",$_,[u("div",C_,[i[2]||(i[2]=u("div",{class:"heading"},"Description",-1)),u("div",A_,V(r.proposal.metadata),1)]),u("div",S_,[u("div",{class:"heading",onClick:i[0]||(i[0]=d=>s.value=!o(s))},[R(" Voters ("+V(o(n)??"?")+") ",1),u("i",{class:U(["fas fa-chevron-up expander",{expandedVoters:o(s)}])},null,2)]),m(c,{expanded:o(s)},{default:b(()=>[o(a)?(h(),L(k_,{key:0,class:"voters",proposal:r.proposal,"proposal-details":o(a)},null,8,["proposal","proposal-details"])):F("",!0)]),_:1},8,["expanded"])]),u("div",L_,[u("div",{class:"heading",onClick:i[1]||(i[1]=d=>t.value=!o(t))},[i[3]||(i[3]=R(" Calldata ")),u("i",{class:U(["fas fa-chevron-up expander",{expandedCallData:o(t)}])},null,2)]),m(c,{expanded:o(t)},{default:b(()=>[o(a)?(h(),A("div",{key:0,class:"calldata",innerHTML:o(l)},null,8,T_)):F("",!0)]),_:1},8,["expanded"])])])}}}),I_=I(V_,[["__scopeId","data-v-7f7fa7cb"]]),q_={class:"proposal-details"},P_={class:"proposal-details-container"},F_=T({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){return(t,s)=>(h(),A("div",q_,[u("div",P_,[m(I_,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),m(c_,{proposal:t.proposal},null,8,["proposal"])])]))}}),B_=I(F_,[["__scopeId","data-v-f606c930"]]),D_=T({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=q(e.initExpanded);return(s,a)=>{const n=vt,l=D;return h(),L(l,{class:"proposal",compact:!0},{default:b(()=>[m(Tf,{proposal:s.proposal,expanded:o(t),onToggleExpand:a[0]||(a[0]=r=>t.value=!o(t))},null,8,["proposal","expanded"]),m(n,{class:"proposal-details-collapsible",expanded:o(t)},{default:b(()=>[m(B_,{proposal:s.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),Ma=I(D_,[["__scopeId","data-v-e9357ba8"]]),M_={class:"item"},U_={class:"label"},R_=T({__name:"ProposalTypeSelect",emits:["select"],setup(e,{emit:t}){const s=t,a=[...ff].filter(r=>r!=="other"),n=q("all"),l=r=>{n.value=r,s("select",n.value)};return(r,i)=>{const c=tt;return h(),L(c,{options:o(a).map(d=>d),selected:o(n),onInput:l},{item:b(({item:d})=>[u("div",M_,[u("div",U_,V(o(ht)(d)),1)])]),_:1},8,["options","selected"])}}}),O_=I(R_,[["__scopeId","data-v-c5a45cad"]]),E_={class:"proposals"},W_={class:"filters"},x_={style:{display:"flex",gap:"1rem"}},K_={class:"proposals-content"},N_={key:0},H_=T({__name:"Proposals.page",setup(e){const t=q(0),{page:s,onPage:a}=fs(),n=It(s,200),l=q(""),r=It(l,300),i=q("all"),c=w(()=>{switch(t.value){case 0:return"all";case 1:return"active";case 2:return"passed";case 3:return"denied";case 4:return"executed";default:return"all"}}),d=w(()=>r.value.toLocaleLowerCase()),p=w(()=>{var y;return((y=_.value)==null?void 0:y.count)??0}),v=w(()=>{var y;return(((y=_.value)==null?void 0:y.proposals)??[]).orderBy(k=>k.start,"desc")}),{isFetching:g,data:_}=yf(n,i,c,d),f=y=>{i.value=y};return(y,k)=>{const C=Be,S=Fe,$=$e,P=qe,B=et;return h(),A("div",E_,[m(S,{onTab:k[0]||(k[0]=K=>t.value=K.index)},{default:b(()=>[m(C,{header:"All"}),m(C,{header:"Active"}),m(C,{header:"Passed"}),m(C,{header:"Denied"}),m(C,{header:"Executed"})]),_:1}),u("div",W_,[m($,{modelValue:o(l),"onUpdate:modelValue":k[1]||(k[1]=K=>J(l)?l.value=K:null),class:"search",placeholder:"Search for Curve proposals",search:!0},null,8,["modelValue"]),u("div",x_,[m(O_,{style:{"flex-grow":"1"},onSelect:f}),m(P,{class:"pagination","items-count":o(p),"items-per-page":10,page:o(s),onPage:o(a)},null,8,["items-count","page","onPage"])])]),u("div",K_,[(h(!0),A(Y,null,re(o(v),K=>(h(),L(Ma,{key:K.id,proposal:K,class:U({loading:o(g)})},null,8,["proposal","class"]))),128)),m(P,{class:"pagination","items-count":o(p),"items-per-page":10,page:o(s),onPage:o(a)},null,8,["items-count","page","onPage"]),o(v).length===0?(h(),A("div",N_,"No proposals could be found.")):F("",!0),m(B,{class:U(["spinner",{loading:o(g)}])},null,8,["class"])])])}}}),Q_=I(H_,[["__scopeId","data-v-6a7a4ce5"]]),z_={class:"proposal-container"},j_=T({__name:"Proposal.page",setup(e){const t=be("proposalId",0,{transform:Number}),s=be("proposalType"),{isFetching:a,data:n}=Da(t,s);return(l,r)=>{const i=et;return h(),A("div",z_,[m(i,{class:U(["spinner",{loading:o(a)}])},null,8,["class"]),!o(a)&&o(n)?(h(),L(Ma,{key:0,proposal:o(n),"init-expanded":!0},null,8,["proposal"])):F("",!0)])}}}),G_=I(j_,[["__scopeId","data-v-9afd57bb"]]),X_=[{stateMutability:"nonpayable",type:"function",name:"deploy_gauge",inputs:[{name:"_receiver",type:"address"},{name:"_max_emissions",type:"uint256"}],outputs:[{name:"",type:"address"}]}],Z_={class:"form"},Y_={class:"field"},J_={class:"value"},eg={class:"field"},tg={class:"value"},sg=T({__name:"DeployGauge",emits:["gauge"],setup(e,{emit:t}){const s=t,a=q(!1),n=q(""),l=q(0),r=w(()=>zs),i=w(()=>ds(n.value.toLocaleLowerCase())&&typeof l.value=="number"&&l.value>0),c=Ws();async function d(){const p=n.value.toLocaleLowerCase();typeof l.value=="string"&&(l.value=parseFloat(l.value));const v=Hs(l.value,18n);return Zs(a,async()=>{const{result:g,request:_}=await To(c,{abi:X_,address:js,functionName:"deploy_gauge",args:[p,v]}),f=await xs(c,_);await Ks(c,{hash:f}),s("gauge",g)})}return(p,v)=>{const g=$e,_=Et,f=ve,y=D;return h(),L(y,{class:"add-new",title:"Gauge Creation"},{default:b(()=>[u("div",Z_,[u("div",Y_,[v[2]||(v[2]=u("div",{class:"label"},"Receiver:",-1)),u("div",J_,[m(g,{modelValue:o(n),"onUpdate:modelValue":v[0]||(v[0]=k=>J(n)?n.value=k:null),placeholder:o(r)},null,8,["modelValue","placeholder"])])]),u("div",eg,[v[3]||(v[3]=u("div",{class:"label"},"CRV Amount (Max):",-1)),u("div",tg,[m(_,{modelValue:o(l),"onUpdate:modelValue":v[1]||(v[1]=k=>J(l)?l.value=k:null),min:1,max:3303030299},null,8,["modelValue"])])])]),m(f,{class:"action-button request",value:"Create Fundraising Gauge",disabled:!o(i)||o(a),primary:!0,"chain-id":o(Oe).id,onClick:d},null,8,["disabled","chain-id"])]),_:1})}}}),ag=I(sg,[["__scopeId","data-v-5a030c87"]]),og=[{constant:!1,inputs:[{name:"_target",type:"address"},{name:"_ethValue",type:"uint256"},{name:"_data",type:"bytes"}],name:"execute",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],ng=[{constant:!1,inputs:[{name:"_executionScript",type:"bytes"},{name:"_metadata",type:"string"},{name:"_castVote",type:"bool"},{name:"_executesIfDecided",type:"bool"}],name:"newVote",outputs:[{name:"voteId",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"}],lg=[{name:"add_gauge",outputs:[],inputs:[{type:"address",name:"addr"},{type:"int128",name:"gauge_type"},{type:"uint256",name:"weight"}],stateMutability:"nonpayable",type:"function"}],rg={class:"form"},ig={class:"field"},cg={class:"value"},ug={class:"field"},dg={class:"value"},pg=T({__name:"GaugeVote",props:{gauge:{default:""}},emits:["request"],setup(e,{emit:t}){const s=t,a=q(!1),n=q(""),l=q("Add a grant gauge: "),r=w(()=>zs),i=w(()=>ds(n.value)&&!!l.value),c=w(()=>i.value&&!a.value);G(()=>e.gauge,g=>{n.value=g.toLocaleLowerCase()});async function d(){if(n.value)return Zs(a,async()=>{await v(),s("request")})}const p=Ws();async function v(){const g="0xe478de485ad2fe566d49342cbd03e49ed7db3356",_="0x40907540d8a6c65c637785e8f8b742ae6b0b9968",f=(le,ue)=>String(le).padStart(ue,"0"),y=Cs({abi:lg,functionName:"add_gauge",args:[n.value,10n,0n]});let k="0x00000001";const C=Cs({abi:og,functionName:"execute",args:[Gs,0n,y]}).substring(2),S=f((Math.floor(C.length)/2).toString(16),8);k=`${k}${_.substring(2)}${S}${C}`;const $=new FormData,B={text:l.value.replace(/(\r\n|\n|\r)/gm,"")};$.append("file",JSON.stringify(B));const De=(await(await fetch("https://ipfs.infura.io:5001/api/v0/add",{method:"POST",body:$})).json()).Hash,M=await xs(p,{abi:ng,address:g,functionName:"newVote",args:[k,`ipfs:${De}`,!1,!1]});await Ks(p,{hash:M})}return(g,_)=>{const f=$e,y=ve,k=D;return h(),L(k,{class:"add-new",title:"Gauge Addition Vote"},{default:b(()=>[u("div",rg,[u("div",ig,[_[2]||(_[2]=u("div",{class:"label"},"Gauge Address:",-1)),u("div",cg,[m(f,{modelValue:o(n),"onUpdate:modelValue":_[0]||(_[0]=C=>J(n)?n.value=C:null),placeholder:o(r)},null,8,["modelValue","placeholder"])])]),u("div",ug,[_[3]||(_[3]=u("div",{class:"label"},"Vote Description:",-1)),u("div",dg,[m(f,{modelValue:o(l),"onUpdate:modelValue":_[1]||(_[1]=C=>J(l)?l.value=C:null)},null,8,["modelValue"])])])]),m(y,{class:"action-button request",value:"Create Gauge Addition Vote",disabled:!o(c),primary:!0,"chain-id":o(Oe).id,onClick:d},null,8,["disabled","chain-id"])]),_:1})}}}),mg=I(pg,[["__scopeId","data-v-b5d8e3bb"]]),vg={class:"ve-funder"},hg={class:"explanation"},fg={class:"forms"},_g=T({__name:"VeFunder.page",setup(e){const t=q(""),s=a=>{t.value=a};return(a,n)=>{const l=D;return h(),A("div",vg,[u("div",hg,[m(l,null,{default:b(()=>n[0]||(n[0]=[u("div",{class:"step-one"},[u("span",null,[u("strong",null,"veFunder"),R(" process:")]),u("ol",null,[u("li",null," Create a fundraising gauge contract that allows a receiver to get a certain amount of CRV. "),u("li",null,[R(" Request a vote to add the gauge to the controller."),u("br"),R("When passed, the newly created gauge can be voted on during gauge votes and can then receive gauge emissions. ")])])],-1),u("div",{class:"step-two"},[u("span",null,[u("strong",null,"Gauge vote requirements:")]),u("ol",null,[u("li",null,[R(" New gauge votes must have a vote on the governance forum "),u("a",{href:"https://gov.curve.fi/",target:"_blank"}," at this address ")]),u("li",null,"You must have a minimum of 2,500 veCRV to create this vote")])],-1)])),_:1})]),u("div",fg,[m(ag,{onGauge:s}),m(mg,{gauge:o(t)},null,8,["gauge"])])])}}}),gg=I(_g,[["__scopeId","data-v-8bd18cb3"]]);let ss;function Ua(){return ss||(ss=Sa({url:"wss://api.defimonitor.com/main"})),ss}class yg{constructor(t,s){wt(this,"transfers$");if(this.socket=t,s!=null&&s.transfers$)this.transfers$=s.transfers$;else{const a=ns(t,"NewTransfersForToken"),n=ns(t,"NewTransfersForTokenArray");this.transfers$=Vo(a,n)}}subTransfers(t){Array.isArray(t)?this.socket.emit("connectToGeneralErc20ArrayLivestream",t):this.socket.emit("connectToGeneralErc20Livestream",t)}}const pt=new Map,Ra=new Io(void 0),Vt=e=>JSON.stringify(e);function Oa({queryKey:e,queryFn:t,enabled:s,observable:a,setQueryData:n,resetOnSubscribe:l}){const r=Ns(),i=w(()=>s.value&&!!a.value),c=W({queryKey:e,queryFn:()=>new Promise((d,p)=>{l&&r.setQueryData(e.value,null);const v=Vt(e.value);let g=pt.get(v);const _=g==null?void 0:g.subscription;_==null||_.unsubscribe(),g={subscription:a.value.subscribe({next:f=>{const y=r.getQueryData(e),k=n(y,f);r.setQueryData(e.value,k),d(k)},error:f=>{p(f instanceof Error?f:new Error(String(f)))}}),users:new Set},pt.set(v,g),Ra.next({queryKeyString:v,record:g}),t()}),enabled:i,staleTime:1/0});return G(a,async(d,p)=>{p&&d!==p&&await r.invalidateQueries({queryKey:e})}),bg(e,i),c}function bg(e,t){const s=Ns(),a=yn(),n=Ra.pipe(Nt(()=>t.value),Nt(r=>r!==void 0),Nt(r=>r.queryKeyString===Vt(e.value))).subscribe(r=>{r.record.users.add(a)});G(t,async r=>{if(!r)await l(e.value);else{const i=Vt(e.value),c=pt.get(i);c&&c.users.add(a)}}),G(e,async(r,i)=>{await l(i)}),cs(async()=>{await l(e.value),n.unsubscribe()});async function l(r){const i=Vt(r),c=pt.get(i);c&&(c.users.delete(a),c.users.size===0&&(c.subscription.unsubscribe(),pt.delete(i),await s.invalidateQueries({queryKey:r})))}return l}function wg(e){const t=w(()=>Array.isArray(e.value)?e.value:[e.value]),{socket:s,isConnected:a,url:n}=Ua(),l=w(()=>s.value?new yg(s.value):null),r=w(()=>["defimonitor-transfers",n.value,...t.value]);return Oa({queryKey:r,queryFn:()=>{var c;return(c=l.value)==null?void 0:c.subTransfers(e.value)},enabled:a,observable:w(()=>{var c;return(c=l.value)==null?void 0:c.transfers$}),setQueryData:(c,d)=>[...c??[],...d.transfers.flat().filter(p=>t.value.map(v=>v.toLocaleLowerCase()).includes(p.coinAddress.toLocaleLowerCase()))].takeRight(200),resetOnSubscribe:!0})}const kg={style:{display:"flex",gap:"1rem"}},$g={class:"transfers-card-body"},Cg={class:"transfers-options"},Ag={class:"option"},Sg={class:"item"},Lg={class:"label"},Tg={class:"option"},Vg={class:"hash"},Ig=["href"],qg=["href"],Pg=["href"],Fg=["href"],Bg={class:"token"},Dg=["href"],Mg={class:"end"},Ug=["href"],as=10,Rg=T({__name:"TableTransfers",setup(e){const t=[{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT"},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC"},{address:["0xdAC17F958D2ee523a2206206994597C13D831ec7","0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"],symbol:"Both"}],s=q(t[0]),a=q(0),n=w(()=>{const y=a.value;return typeof y=="string"?parseFloat(y)||0:y||0}),{data:l,isFetching:r}=wg(w(()=>s.value.address)),{relativeTime:i}=Pe(),c=q(""),d=w(()=>(l.value??[]).filter(y=>{const k=c.value.toLocaleLowerCase().split(" "),C=S=>k.some($=>S.toLocaleLowerCase().includes($));return(C(y.transferFrom)||C(y.transferTo))&&y.parsedAmount>=n.value}).orderBy([y=>y.blockUnixtime,y=>y.positionInBlock],"desc")),{page:p,rowsPage:v,onPage:g}=gt(d,as),_=y=>y<1?y.toFixed(4):y>1e3?y.toFixed(0):y.toFixed(2),f=async y=>{await navigator.clipboard.writeText(y)};return(y,k)=>{const C=$e,S=qe,$=_e,P=tt,B=Et,K=ve,x=ae,De=D;return h(),L(De,{class:"transfers-card",title:"Transfers",loading:o(r)},{actions:b(()=>[u("div",kg,[m(C,{modelValue:o(c),"onUpdate:modelValue":k[0]||(k[0]=M=>J(c)?c.value=M:null),placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(d).length>as?(h(),L(S,{key:0,"items-count":o(d).length,"items-per-page":as,page:o(p),onPage:o(g)},null,8,["items-count","page","onPage"])):F("",!0)])]),default:b(()=>[u("div",$g,[u("div",Cg,[u("div",Ag,[k[4]||(k[4]=u("div",{class:"label"},"Token",-1)),m(P,{options:t,selected:o(s),onInput:k[1]||(k[1]=M=>s.value=M)},{item:b(({item:{address:M,symbol:le}})=>[u("div",Sg,[Array.isArray(M)?F("",!0):(h(),L($,{key:0,class:"icon",address:M},null,8,["address"])),u("div",Lg,V(le??"?"),1)])]),_:1},8,["selected"])]),u("div",Tg,[k[5]||(k[5]=u("div",{class:"label"},"Min Amount",-1)),m(B,{modelValue:o(a),"onUpdate:modelValue":k[2]||(k[2]=M=>J(a)?a.value=M:null),min:0,max:1/0},null,8,["modelValue"])])]),m(x,{class:"transfers-table",rows:o(v),columns:["Hash","Block","Gas","From","To","Amount","Token",{label:"Age",align:"end"}]},{row:b(({item:M})=>[u("div",Vg,[u("a",{class:"font-mono",href:`https://etherscan.io/tx/${M.txHash}`,target:"_blank"},V(o(Lt)(M.txHash,10)),9,Ig),m(K,{icon:"fas fa-link",onClick:le=>f(M.txHash)},null,8,["onClick"])]),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/block/${M.blockNumber}`,target:"_blank"},V(M.blockNumber),9,qg)]),u("div",null,V(M.gasInGwei),1),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/address/${M.transferFrom}`,target:"_blank"},V(o(we)(M.transferFrom,10)),9,Pg)]),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/addr ess/${M.transferTo}`,target:"_blank"},V(o(we)(M.transferTo,10)),9,Fg)]),u("div",null,V(_(M.parsedAmount)),1),u("div",Bg,[m($,{chain:"ethereum",address:M.coinAddress},null,8,["address"]),u("a",{target:"_blank",href:`https://etherscan.io/address/${M.coinAddress}`},V(M.coinSymbol),9,Dg)]),u("div",Mg,[u("a",{href:`https://etherscan.io/tx/${M.txHash}`,target:"_blank",onClick:k[3]||(k[3]=me(()=>{},["stop"]))},V(o(i)(M.blockUnixtime)),9,Ug)])]),_:1},8,["rows"])])]),_:1},8,["loading"])}}}),Og=I(Rg,[["__scopeId","data-v-4b3454e4"]]),Eg={class:"transfers"},Wg=T({__name:"Transfers",setup(e){return(t,s)=>(h(),A("div",Eg,[m(Og,{style:{"grid-area":"transfers"}})]))}}),xg=I(Wg,[["__scopeId","data-v-74e96c37"]]);class Kg{constructor(t,s){wt(this,"swaps$");this.socket=t,this.swaps$=(s==null?void 0:s.swaps$)??ns(t,"NewSwapDataForAddress")}subSwaps(t){this.socket.emit("connectToGeneralErc20SwapLivestream",t)}}function Ng(e){const{socket:t,isConnected:s,url:a}=Ua(),n=w(()=>t.value?new Kg(t.value):null),l=w(()=>["defimonitor-swaps",a.value,e.value]);return Oa({queryKey:l,queryFn:()=>{var i;return(i=n.value)==null?void 0:i.subSwaps(e.value)},enabled:s,observable:w(()=>{var i;return(i=n.value)==null?void 0:i.swaps$}),setQueryData:(i,c)=>[...i??[],...c.swaps.flat()].takeRight(200),resetOnSubscribe:!0})}const Hg={style:{display:"flex",gap:"1rem"}},Qg={class:"swaps-card-body"},zg={class:"swaps-options"},jg={class:"option"},Gg={class:"item"},Xg={class:"label"},Zg={class:"option"},Yg={class:"hash"},Jg=["href"],e1=["href"],t1=["href"],s1=["href"],a1={class:"token"},o1=["href"],n1={class:"token"},l1=["href"],r1={class:"end"},i1=["href"],os=10,c1=T({__name:"TableSwaps",setup(e){const t=[{address:"0x111111125421ca6dc452d289314280a0f8842a65",name:"1inch V6"},{address:"0x1111111254eeb25477b68fb85ed929f73a960582",name:"1inch V5"}],s=q(t[0]),a=q(0),n=w(()=>{const f=a.value;return typeof f=="string"?parseFloat(f)||0:f||0}),{data:l,isFetching:r}=Ng(w(()=>s.value.address)),{relativeTime:i}=Pe(),c=q(""),d=w(()=>(l.value??[]).filter(f=>{const y=c.value.toLocaleLowerCase().split(" "),k=S=>y.some($=>S.toLocaleLowerCase().includes($)),C=f.parsedBeforeAmount>=n.value||f.parsedAfterAmount>=n.value;return(k(f.coinAfterAddress)||k(f.coinAfterSymbol)||k(f.coinBeforeAddress)||k(f.coinBeforeSymbol))&&C}).orderBy([f=>f.blockUnixtime,f=>f.positionInBlock],"desc")),{page:p,rowsPage:v,onPage:g}=gt(d,os),_=f=>f<1?f.toFixed(4):f>1e3?f.toFixed(0):f.toFixed(2);return(f,y)=>{const k=$e,C=qe,S=tt,$=Et,P=_e,B=ae,K=D;return h(),L(K,{class:"swaps-card",title:"Swaps",loading:o(r)},{actions:b(()=>[u("div",Hg,[m(k,{modelValue:o(c),"onUpdate:modelValue":y[0]||(y[0]=x=>J(c)?c.value=x:null),placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(d).length>os?(h(),L(C,{key:0,"items-count":o(d).length,"items-per-page":os,page:o(p),onPage:o(g)},null,8,["items-count","page","onPage"])):F("",!0)])]),default:b(()=>[u("div",Qg,[u("div",zg,[u("div",jg,[y[4]||(y[4]=u("div",{class:"label"},"Token",-1)),m(S,{options:t,selected:o(s),onInput:y[1]||(y[1]=x=>s.value=x)},{item:b(({item:{name:x}})=>[u("div",Gg,[u("div",Xg,V(x??"?"),1)])]),_:1},8,["selected"])]),u("div",Zg,[y[5]||(y[5]=u("div",{class:"label"},"Min Amount",-1)),m($,{modelValue:o(a),"onUpdate:modelValue":y[2]||(y[2]=x=>J(a)?a.value=x:null),min:0,max:1/0},null,8,["modelValue"])])]),m(B,{class:"swaps-table",rows:o(v),columns:["Hash","Block","Gas","From","To","In","Out",{label:"Age",align:"end"}]},{row:b(({item:x})=>[u("div",Yg,[u("a",{class:"font-mono",href:`https://etherscan.io/tx/${x.txHash}`,target:"_blank"},V(o(Lt)(x.txHash,10)),9,Jg)]),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/block/${x.blockNumber}`,target:"_blank"},V(x.blockNumber),9,e1)]),u("div",null,V(x.gasInGwei),1),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/address/${x.coinBeforeAddress}`,target:"_blank"},V(o(Lt)(x.coinBeforeAddress,5)),9,t1)]),u("div",null,[u("a",{class:"font-mono",href:`https://etherscan.io/address/${x.coinAfterAddress}`,target:"_blank"},V(o(Lt)(x.coinAfterAddress,5)),9,s1)]),u("div",a1,[m(P,{chain:"ethereum",address:x.coinBeforeAddress},null,8,["address"]),R(" "+V(_(x.parsedBeforeAmount))+" ",1),u("a",{target:"_blank",href:`https://etherscan.io/address/${x.coinBeforeAddress}`},V(x.coinBeforeSymbol),9,o1)]),u("div",n1,[m(P,{chain:"ethereum",address:x.coinAfterAddress},null,8,["address"]),R(" "+V(_(x.parsedAfterAmount))+" ",1),u("a",{target:"_blank",href:`https://etherscan.io/address/${x.coinAfterAddress}`},V(x.coinAfterSymbol),9,l1)]),u("div",r1,[u("a",{href:`https://etherscan.io/tx/${x.txHash}`,target:"_blank",onClick:y[3]||(y[3]=me(()=>{},["stop"]))},V(o(i)(x.blockUnixtime)),9,i1)])]),_:1},8,["rows"])])]),_:1},8,["loading"])}}}),u1=I(c1,[["__scopeId","data-v-9cd8fae2"]]),d1={class:"swaps"},p1=T({__name:"Swaps",setup(e){return(t,s)=>(h(),A("div",d1,[m(u1,{style:{"grid-area":"swaps"}})]))}}),m1=I(p1,[["__scopeId","data-v-ad177650"]]),v1={class:"monitor"},h1=T({__name:"DefiMonitor.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["transfers","swaps"],"defimonitor");return(a,n)=>{const l=Be,r=Fe;return h(),A("div",v1,[m(r,{active:o(s),onTab:n[0]||(n[0]=i=>s.value=i.index)},{default:b(()=>[m(l,{header:"Transfers"},{default:b(()=>[(h(),L(ce,null,[o(t)==="transfers"?(h(),L(xg,{key:0})):F("",!0)],1024))]),_:1}),m(l,{header:"Swaps"},{default:b(()=>[(h(),L(ce,null,[o(t)==="swaps"?(h(),L(m1,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),f1=I(h1,[["__scopeId","data-v-cd21d15d"]]),_1=[{path:"/",component:Fi},{path:"/platform",redirect:{name:"revenue"}},{path:"/platform/chains/:chain?/:type?",name:"chains",component:_c},{path:"/platform/pools/:chain?",name:"pools",component:Zc},{path:"/platform/pools/:chain/:poolAddr/:tab?",name:"poolspool",component:Cu},{path:"/platform/revenue/:tab?",name:"revenue",component:ip},{path:"/platform/crvusd",name:"crvusd",component:um},{path:"/platform/crvusd/market/:marketAddr/:tab?",name:"crvusdmarket",component:Lv},{path:"/platform/lending/:chain?",name:"llamalend",component:jv},{path:"/platform/lending/:chain/:marketAddr/:tab?",name:"llamalendmarket",component:Uh},{path:"/platform/monitor",name:"monitor",component:hf},{path:"/dao",redirect:{name:"proposals"}},{path:"/dao/proposals",name:"proposals",component:Q_},{path:"/dao/proposal/:proposalType/:proposalId",component:G_},{path:"/dao/vefunder",component:gg},{path:"/defimonitor/:tab?",name:"defimonitor",component:f1}],g1={titleRoute:"/",menuItems:[{label:"Articles",url:"https://blog.curvemonitor.com/"},{label:"Platform",children:[{to:"/platform/chains",label:"Chains"},{to:"/platform/pools",label:"Pools",tag:"alpha"},{to:"/platform/revenue",label:"Revenue"},{to:"/platform/crvusd",label:"crvUSD"},{to:"/platform/lending",label:"Lending"},{to:"/platform/monitor",label:"Monitor",tag:"beta"}]},{label:"DAO",children:[{to:"/dao/proposals",label:"Proposals"},{to:"/dao/vefunder",label:"VeFunder"}]}]};let Ea="http://localhost:8545";Ea=void 0;function y1(e=[]){return qo({chains:[Oe],connectors:[As(),...e],transports:{[Oe.id]:Po([Ss(Ea,{batch:{wait:100}}),Fo(As),Ss("https://eth.llamarpc.com",{batch:{wait:200}})])}})}function b1(e,t){const s=Bo(e);for(const l of[])s.use(l);const a=Do();s.use(a);const n=new Mo({defaultOptions:{queries:{staleTime:1e3*60*5,queryKeyHashFn:Uo}},queryCache:new Ro({onError:(l,r)=>{l.message.includes("Connector not connected")||l.message.includes("connector2.getAccounts is not a function")||l.message.includes("getAccounts is not a function")||Ce({text:`Failed querying ${r.queryHash} >>> ${l.message}`,type:"error"})}})});return s.use(Oo,{queryClient:n}).use(Eo).use(Wo,{config:y1(t==null?void 0:t.extraWagmiConnectors)}),{app:s,pinia:a}}const{app:w1}=b1(Kl),k1=[g1],$1=[_1],Wa=vs();Wa.pages=k1;Wa.routes=$1;const C1=dr();w1.use(C1).mount("#app");
