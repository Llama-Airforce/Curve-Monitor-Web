import{_ as pe,a as _e}from"./TabItem.vue_vue_type_script_setup_true_lang-BYlRH6_7.js";import{q as ve,d as T,r as K,f as $,h as w,o as f,w as c,b as n,u as o,a as r,t as S,O as fe,_ as A,e as F,c as V,T as j,U as X,V as oe,g as he,j as J,S as ge,X as ne,W as D,i as ye,Q as be,a3 as H}from"./index-_TFeqcMs.js";import{_ as R}from"./Table-Bc-2DkaV.js";import{_ as x}from"./AsyncValue-CX8qpoPL.js";import{_ as we}from"./InputText-BuCLQbVa.js";import{_ as ke}from"./SelectChain-BGkibeja.js";import{c as Ce}from"./chains-DqtHHBd8.js";import{t as O,g as I,f as L}from"./timestamp-DkvXAN4c.js";import{u as P}from"./useQuery-DI0f2pKh.js";import{u as Q}from"./UseHost-TPgblOPK.js";import{_ as ae}from"./KPI-BhaaqFtT.js";import{u as re,a as le,_ as ie,b as ce,y as ue,M as $e,d as Se}from"./UseLightweightChart-CiyJOg3J.js";import{r as Y,u as G}from"./Number-DFPP41yl.js";import{u as E}from"./UseSort-B8Z-0PQo.js";import{_ as Z}from"./TokenIcon-DXNBLGYW.js";import{c as Te,_ as Be}from"./ChartStylesApex-DAmE5Ni0.js";import{u as Fe,_ as Ue}from"./UseLegend-CerZZksm.js";import{_ as Ae}from"./IconExpander-DhrmarO0.js";import{u as De,_ as Ie}from"./UsePagination-C3b4GK8T.js";import{L as Le}from"./link-kUFL_i8j.js";import{u as Pe}from"./UseExpansion-C388odx8.js";import{u as Ve}from"./UseRelativeTime-DnYSEmjY.js";import{u as qe}from"./UseTabNavigation-DrhH7liE.js";import"./ChainIcon-Bw-458SV.js";import"./Object-DOSYkgA0.js";import"./index-DQSWrnbB.js";/**
 * @license lucide-vue-next v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=ve("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),ee=e=>Object.fromEntries(e),te=e=>Object.entries(e);async function de(e,t=0,s=1e3){const i=await e(t,s),u=await(i.length>=s?de(e,t+1,s):Promise.resolve([]));return i.concat(u)}const xe=e=>({timestamp:O(e.timestamp),controller:e.controller,collateral:e.collateral,feesUsd:e.fees_usd}),We=e=>({timestamp:O(e.timestamp),chain:e.chain,feesUsd:e.fees_usd}),Me=e=>({pool:e.pool,name:e.name,adminFees:e.admin_fees,usdValue:e.usd_value}),He=e=>({timestamp:O(e.timestamp),feesUsd:e.fees_usd}),Ke=e=>({timestamp:O(e.dt),coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,precision:e.coin.precision},amount:BigInt(e.amount),amountFee:BigInt(e.fee_amount),amountReceived:e.amount_received,routerReceived:e.router_received,epoch:e.epoch,txHash:e.tx_hash,blockNumber:e.block_number}),Oe=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),Qe=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)});async function Ee(e){const t=I(e);return(await L(`${t}/v1/dao/fees/crvusd/weekly`)).fees.map(xe)}async function ze(e){const t=I(e);return(await L(`${t}/v1/dao/fees/pools/weekly`)).fees.map(We)}async function Ne(e,t){const s=I(t);return(await L(`${s}/v1/dao/fees/${e}/pending`)).data.map(Me)}async function Je(e){const t=I(e);return await de(i=>L(`${t}/v1/dao/fees/distributions?page=${i}&per_page=100`).then(u=>u.distributions.map(He)),1,100)}async function je(e,t){const s=I(t);return(await L(`${s}/v1/dao/fees/settlements`)).data.map(Ke)}async function Xe(e){const t=I(e);return(await L(`${t}/v1/dao/fees/collected`)).data.map(Oe)}async function Ye(e){const t=I(e);return(await L(`${t}/v1/dao/fees/staged`)).data.map(Qe)}function W(){return{initialData:[],initialDataUpdatedAt:0}}function Ge(e){return P({queryKey:["curve-cushions",e],queryFn:({queryKey:[,t]})=>Ne(t).then(s=>s.sort((i,u)=>u.usdValue-i.usdValue)),...W()})}function Ze(){return P({queryKey:["curve-revenue-distributions"],queryFn:()=>Je(),initialData:[],initialDataUpdatedAt:0})}function et(){return P({queryKey:["curve-revenue-cow-settlements"],queryFn:()=>je(),...W()})}function tt(){return P({queryKey:["curve-revenue-crvusd-weekly"],queryFn:async()=>{const e=await Q();return Ee({host:e})},...W()})}function st(){return P({queryKey:["curve-revenue-pools-weekly"],queryFn:async()=>{const e=await Q();return ze({host:e})},...W()})}function ot(){return P({queryKey:["curve-revenue-fees-collected"],queryFn:async()=>{const e=await Q();return Xe({host:e})},...W()})}function nt(){return P({queryKey:["curve-revenue-fees-staged"],queryFn:async()=>{const e=await Q();return Ye({host:e})},...W()})}const at=["href"],rt={class:"end"},lt={class:"end"},it=T({__name:"TableCushions",setup(e){const t=K(""),s=$(()=>_.value||p.value),i=K("ethereum"),{data:u,isFetching:_}=Ce(),a=$(()=>v.value.filter(y=>y.usdValue>100).filter(y=>{const l=t.value.toLocaleLowerCase().split(" "),b=U=>l.some(m=>U.toLocaleLowerCase().includes(m));return b(y.pool)||b(y.name)})),{data:v,isFetching:p}=Ge(i),d=y=>`https://etherscan.io/address/${y}`;return(y,l)=>{const b=ke,U=we,m=x,h=R,g=A;return f(),w(g,{class:"cushions-card",title:"Cushions",loading:o(s)},{actions:c(()=>[n(b,{class:"chain-select",chain:o(i),chains:o(u),onSelectChain:l[0]||(l[0]=k=>i.value=k==="all"?"ethereum":k)},null,8,["chain","chains"]),n(U,{modelValue:o(t),"onUpdate:modelValue":l[1]||(l[1]=k=>fe(t)?t.value=k:null),search:"",placeholder:"Search for..."},null,8,["modelValue"])]),default:c(()=>[n(h,{class:"cushions-table",rows:o(a),columns:["Name","Address",{label:"Fees ($)",align:"end"}]},{row:c(({item:k})=>[r("div",null,S(k.name),1),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:d(k.pool)},S(k.pool),9,at)]),r("div",rt,[n(m,{type:"dollar",value:k.usdValue,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[l[2]||(l[2]=r("div",null,null,-1)),l[3]||(l[3]=r("div",null,null,-1)),r("div",lt,[n(m,{type:"dollar",value:o(a).sumBy(k=>k.usdValue),precision:2},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),ct=F(it,[["__scopeId","data-v-e9387259"]]),ut={class:"cushions"},dt=T({__name:"Cushions",setup(e){return(t,s)=>(f(),V("div",ut,[n(ct)]))}}),mt=F(dt,[["__scopeId","data-v-73379d5e"]]),pt={style:{display:"flex"}},_t={ref:"chartRef",class:"chart"},vt=T({__name:"ChartDistributions",props:{distributions:{}},setup(e){const t=j(),s=X("card"),{chart:i,series:u}=re({createChartOptions:le(),series:{type:ue,name:"distributions",options:$(()=>({priceFormat:{type:"custom",formatter:a=>`$${Y(a,0,"dollar")}${G(a)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});oe(_);function _(){!i.value||!u.distributions||(u.distributions.setData(e.distributions.map(a=>({time:a.timestamp.getUTCTimestamp(),value:a.feesUsd})).uniqWith((a,v)=>a.time===v.time).orderBy(a=>a.time,"asc").takeRight(52)),i.value.timeScale().fitContent())}return(a,v)=>{const p=ie,d=ce,y=A;return f(),w(y,{ref_key:"card",ref:s,title:"Distributions (1y)"},{actions:c(()=>[r("div",pt,[n(p,{filename:"distributions",series:o(u)},null,8,["series"]),n(d,{chart:o(i),target:o(s)},null,8,["chart","target"])])]),default:c(()=>[r("div",_t,null,512)]),_:1},512)}}}),ft={style:{display:"flex"}},ht={ref:"chartRef",class:"chart"},gt=T({__name:"ChartDistributionsDelta",props:{distributions:{}},setup(e){const t=j(),s=X("card"),{chart:i,series:u}=re({createChartOptions:le(),series:{type:ue,name:"deltas",options:$(()=>({priceFormat:{type:"custom",formatter:a=>`$${Y(a,0,"dollar")}${G(a)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});oe(_);function _(){if(!i.value||!u.deltas)return;const{colors:a}=t.value;u.deltas.setData(e.distributions.map(v=>({time:v.timestamp.getUTCTimestamp(),value:v.feesUsd})).uniqWith((v,p)=>v.time===p.time).orderBy(v=>v.time,"asc").takeRight(53).reduce((v,p,d,y)=>{if(d===0)return v;const l=p.value-y[d-1].value,b=l<0?a.red:a.green;return v.push({time:p.time,value:l,color:b}),v},[])),i.value.timeScale().fitContent()}return(a,v)=>{const p=ie,d=ce,y=A;return f(),w(y,{ref_key:"card",ref:s,title:"Distributions Change (1y)"},{actions:c(()=>[r("div",ft,[n(p,{filename:"distributions_delta",series:o(u)},null,8,["series"]),n(d,{chart:o(i),target:o(s)},null,8,["chart","target"])])]),default:c(()=>[r("div",ht,null,512)]),_:1},512)}}}),yt={class:"end"},bt=T({__name:"TableDistributions",props:{distributions:{}},setup(e){const t=[{id:"timestamp",label:"Date",sort:!0},{id:"fees",label:"Fees",sort:!0,align:"end"}],{sorting:s,onSort:i}=E("timestamp"),u=$(()=>e.distributions.orderBy(a=>{switch(s.value.column){case"timestamp":return a.timestamp.getTime();case"fees":return a.feesUsd}},s.value.order));function _(a){return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(a,v)=>{const p=x,d=R,y=A;return f(),w(y,{title:"Distributions"},{default:c(()=>[n(d,{class:"distributions-table",rows:o(u),columns:t,sorting:o(s),onSortColumn:o(i)},{row:c(({item:{timestamp:l,feesUsd:b}})=>[r("div",null,S(_(l)),1),r("div",yt,[n(p,{type:"dollar",value:b,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),wt=F(bt,[["__scopeId","data-v-71c558b9"]]),kt={class:"dashboard-grid"},Ct=T({__name:"Distributions",setup(e){const{isFetching:t,data:s}=Ze(),i=$(()=>s.value.sumBy(a=>a.feesUsd)),u=$(()=>s.value.orderBy(a=>a.timestamp.getTime(),"desc").take(52).meanBy(a=>a.feesUsd)),_=$(()=>{const a=s.value.orderBy(d=>d.timestamp.getTime(),"desc").take(52).map(d=>d.feesUsd),v=a.meanBy(d=>d),p=a.map(d=>Math.pow(d-v,2));return Math.sqrt(p.sumBy(d=>d)/(a.length-1))});return(a,v)=>{const p=x,d=ae;return f(),V("div",kt,[n(d,{style:{"grid-area":"kpi1"},label:"Total","has-value":o(s).length>0},{default:c(()=>[n(p,{type:"dollar",value:o(i)},null,8,["value"])]),_:1},8,["has-value"]),n(d,{style:{"grid-area":"kpi2"},label:"Average (1y)","has-value":o(s).length>0},{default:c(()=>[n(p,{type:"dollar",value:o(u)},null,8,["value"])]),_:1},8,["has-value"]),n(d,{style:{"grid-area":"kpi3"},label:"Standard Deviation (1y)","has-value":o(s).length>0},{default:c(()=>[n(p,{type:"dollar",value:o(_)},null,8,["value"])]),_:1},8,["has-value"]),n(vt,{style:{"grid-area":"chart"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),n(gt,{style:{"grid-area":"delta"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),n(wt,{style:{"grid-area":"table"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"])])}}}),$t=F(Ct,[["__scopeId","data-v-e21ae2fe"]]),St=["href"],Tt={class:"end"},Bt={class:"end"},Ft={class:"end"},Ut=T({__name:"TableFeesCollected",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:i}=E("amountUsd"),u=$(()=>e.fees.orderBy(_=>{switch(s.value.column){case"symbol":return _.coin.symbol;case"amount":return _.amount;case"amountUsd":default:return _.amountUsd}},s.value.order));return(_,a)=>{const v=Z,p=x,d=R,y=A;return f(),w(y,{title:"Fees Collected"},{default:c(()=>[n(d,{rows:o(u),columns:t,sorting:o(s),onSortColumn:o(i)},{row:c(({item:l})=>[n(v,{address:l.coin.address},null,8,["address"]),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${l.coin.address}`},S(l.coin.symbol),9,St)]),r("div",Tt,[n(p,{"show-zero":"",type:"dollar",value:l.amount,precision:2,"show-symbol":!1},null,8,["value"])]),r("div",Bt,[n(p,{"show-zero":"",type:"dollar",value:l.amountUsd,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[a[0]||(a[0]=r("div",null,null,-1)),a[1]||(a[1]=r("div",null,null,-1)),a[2]||(a[2]=r("div",null,null,-1)),r("div",Ft,[n(p,{type:"dollar",value:o(u).sumBy(l=>l.amountUsd),precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),At=F(Ut,[["__scopeId","data-v-02e53cf5"]]),Dt=["href"],It={class:"end"},Lt={class:"end"},Pt={class:"end"},Vt=T({__name:"TableFeesStaged",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:i}=E("amountUsd"),u=$(()=>e.fees.orderBy(_=>{switch(s.value.column){case"symbol":return _.coin.symbol;case"amount":return _.amount;case"amountUsd":default:return _.amountUsd}},s.value.order));return(_,a)=>{const v=Z,p=x,d=R,y=A;return f(),w(y,{title:"Fees Staged"},{default:c(()=>[n(d,{rows:o(u),columns:t,sorting:o(s),onSortColumn:o(i)},{row:c(({item:l})=>[n(v,{address:l.coin.address},null,8,["address"]),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${l.coin.address}`},S(l.coin.symbol),9,Dt)]),r("div",It,[n(p,{"show-zero":"",type:"dollar",value:l.amount,precision:2,"show-symbol":!1},null,8,["value"])]),r("div",Lt,[n(p,{"show-zero":"",type:"dollar",value:l.amountUsd,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[a[0]||(a[0]=r("div",null,null,-1)),a[1]||(a[1]=r("div",null,null,-1)),a[2]||(a[2]=r("div",null,null,-1)),r("div",Pt,[n(p,{type:"dollar",value:o(u).sumBy(l=>l.amountUsd),precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),qt=F(Vt,[["__scopeId","data-v-54db8ef0"]]),Rt={class:"dashboard-grid"},xt=T({__name:"Harvesting",setup(e){const{isFetching:t,data:s}=ot(),{isFetching:i,data:u}=nt();return(_,a)=>(f(),V("div",Rt,[n(At,{style:{"grid-area":"collected"},fees:o(s),loading:o(t)},null,8,["fees","loading"]),n(qt,{style:{"grid-area":"staged"},fees:o(u),loading:o(i)},null,8,["fees","loading"])]))}}),Wt=F(xt,[["__scopeId","data-v-8c81face"]]),Mt=T({__name:"ChartBreakdown",setup(e){const t=j(),{items:s}=Fe(()=>[{id:"crvusd",label:"crvUSD",color:t.value.colorsArray[0]},{id:"pools",label:"Pools",color:t.value.colorsArray[1]}]),{isFetching:i,data:u}=tt(),{isFetching:_,data:a}=st(),v=$(()=>i.value||_.value),p=$(()=>{const{colors:m,colorsArray:h}={colors:t.value.colors,colorsArray:[t.value.colorsArray[0],t.value.colorsArray[1]]};return Te({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:b.value,labels:{formatter:g=>g,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:g=>`$${Y(g,0,"dollar")}${G(g)}`},min:0},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}},K({colors:m,colorsArray:h}))});function d(m){return m.groupBy(h=>h.timestamp.getTime()).entries().map(([h,g])=>({timestamp:Number(h)/1e3,feesUsd:g.sumBy(k=>k.feesUsd)})).orderBy(h=>h.timestamp,"asc")}const y=$(()=>{const m=d(u.value),h=d(a.value);return m.concat(h).groupBy(g=>g.timestamp).entries().map(([,g])=>({timestamp:g[0].timestamp,numLabels:g.length})).orderBy(g=>g.timestamp,"asc").dropWhile(g=>g.numLabels<2).map(g=>g.timestamp)});function l(m){return new Date(m*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"short"})}const b=$(()=>y.value.map(m=>l(m))),U=$(()=>{function m(k){return d(k).map(B=>({x:l(B.timestamp),y:B.feesUsd}))}const h={name:"crvusd",data:m(u.value)},g={name:"pools",data:m(a.value)};return[h,g]});return(m,h)=>{const g=Ue,k=Be,B=A;return f(),w(B,{title:"Revenue breakdown by source",loading:o(v)},{"actions-secondary":c(()=>[n(g,{items:o(s)},null,8,["items"])]),default:c(()=>[n(k,{options:o(p),series:o(U)},null,8,["options","series"])]),_:1},8,["loading"])}}}),Ht=F(Mt,[["__scopeId","data-v-5936d3c6"]]),Kt={class:"dashboard-grid"},Ot=T({__name:"Overview",setup(e){return(t,s)=>(f(),V("div",Kt,[n(Ht,{style:{"grid-area":"breakdown"},class:"breakdown"})]))}}),Qt=F(Ot,[["__scopeId","data-v-b341dd1c"]]),Et=e=>({auctionStartBlock:e.auctionStartBlock,orders:e.auction.orders.map(t=>t),prices:ee(te(e.auction.prices).map(([t,s])=>[t,BigInt(s)])),solutions:e.solutions.map(t=>({solver:t.solver,solverAddress:t.solverAddress,score:BigInt(t.score),ranking:t.ranking,clearingPrices:ee(te(t.clearingPrices).map(([s,i])=>[s,BigInt(i)])),orders:t.orders.map(s=>({id:s.id,sellAmount:BigInt(s.sellAmount),buyAmount:BigInt(s.buyAmount)}))}))});async function zt(e,t){const s=I(t),i=await L(`${s}/mainnet/api/v1/solver_competition/by_tx_hash/${e}`);return Et(i)}const Nt="https://api.cow.fi";function Jt(e){return P({queryKey:["solver-competition",e],queryFn:({queryKey:[,t]})=>zt(t,{host:Nt})})}const jt={class:"settlement-details-body"},Xt={class:"info col"},Yt={class:"buttons"},Gt={class:"font-mono json"},Zt={key:1},es=["href"],ts=T({__name:"SettlementDetails",props:{settlement:{}},setup(e){const{data:t,isPending:s}=Jt(he(()=>e.settlement.txHash)),i=$(()=>t.value?JSON.stringify(t.value,(l,b)=>typeof b=="bigint"?b.toString():b,2):"no data"),u=$(()=>t.value?t.value.solutions.orderBy(l=>l.ranking,"asc"):[]);function _(l){return`https://etherscan.io/address/${l}`}async function a(l){await navigator.clipboard.writeText(l)}async function v(){await navigator.clipboard.writeText(i.value)}function p(l){switch(l){case 1:return"gold";case 2:return"silver";case 3:return"bronze";default:return""}}const d=K(!1),y=X("cardJson");return(l,b)=>{const U=ae,m=Le,h=ge,g=$e,k=Se,B=A,z=Re,N=R;return f(),w(B,{class:"settlement-details"},{default:c(()=>[r("div",jt,[r("div",Xt,[n(U,{label:"Auction Start Block","has-value":!o(s)},{default:c(()=>[J(S(o(t)?.auctionStartBlock??0),1)]),_:1},8,["has-value"]),n(U,{label:"Solvers","has-value":!o(s)},{default:c(()=>[J(S(o(t)?.solutions?.length??0),1)]),_:1},8,["has-value"]),n(U,{label:"Orders","has-value":!o(s)},{default:c(()=>[J(S(o(t)?.orders?.length??0),1)]),_:1},8,["has-value"]),n(B,{ref_key:"cardJson",ref:y,class:"card-json col",title:"Json"},{actions:c(()=>[r("div",Yt,[n(h,{onClick:b[0]||(b[0]=q=>v())},{default:c(()=>[n(m)]),_:1}),n(h,{onClick:b[2]||(b[2]=q=>d.value=!o(d))},{default:c(()=>[n(g),n(k,{target:o(y)?.$el,show:o(d),onClose:b[1]||(b[1]=q=>d.value=!1)},null,8,["target","show"])]),_:1})])]),default:c(()=>[r("div",Gt,S(o(i)),1)]),_:1},512)]),n(B,{class:"col",title:"Solvers"},{default:c(()=>[n(N,{class:"solvers-table col",rows:o(u)},{row:c(({item:{solver:q,solverAddress:C,ranking:M,score:me}})=>[r("div",{class:ne(["trophy",p(M)])},[M<=3?(f(),w(z,{key:0})):(f(),V("span",Zt,S(M),1))],2),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:_(C)},S(q),9,es)]),r("div",null,S(me),1),r("div",null,[n(h,{onClick:bs=>a(C)},{default:c(()=>[n(m)]),_:2},1032,["onClick"])])]),_:1},8,["rows"])]),_:1})])]),_:1})}}}),ss=F(ts,[["__scopeId","data-v-ac9fc03e"]]),os={class:"header-content"},ns={class:"token"},as=["href"],rs={class:"end"},ls={class:"end"},is={class:"end"},cs={class:"end profit"},us={class:"end"},ds=["href"],ms={class:"end"},se=15,ps=T({__name:"TableSettlements",props:{settlements:{}},setup(e){const t=[{id:"token",label:"Token",sort:!1},{id:"amount",label:"Amount",sort:!0,align:"end"},{id:"quote",label:"Quote",sort:!0,align:"end"},{id:"profit",label:"Profit",sort:!0,align:"end"},{id:"profitPct",label:"(%)",sort:!0,align:"end"},{id:"tx",label:"Transaction",sort:!1,align:"end"},{id:"timestamp",label:"Time",sort:!0,align:"end"}],{sorting:s,onSort:i}=E("timestamp"),u=$(()=>e.settlements.orderBy(m=>{switch(s.value.column){case"amount":return m.amountReceived;case"quote":return m.routerReceived;case"profit":return l(m);case"profitPct":return b(m);case"timestamp":return m.timestamp.getTime()}},s.value.order)),{page:_,rowsPage:a,onPage:v}=De(u,se),{expanded:p,toggleExpansion:d}=Pe(),{relativeTime:y}=Ve();function l(m){return m.amountReceived-m.routerReceived}function b(m){return 100*m.amountReceived/m.routerReceived-100}function U(m){const h=m.coin.symbol;return h.includes(":")?h.split(":")[1]:h}return(m,h)=>{const g=Ie,k=Z,B=x,z=Ae,N=R,q=A;return f(),w(q,{title:"CowSwap Settlements"},{actions:c(()=>[r("div",os,[n(g,{"items-count":o(u).length,"items-per-page":se,page:o(_),onPage:o(v)},null,8,["items-count","page","onPage"])])]),default:c(()=>[n(N,{class:"settlements-table",rows:o(a),columns:t,sorting:o(s),expanded:o(p),onSortColumn:o(i),onSelect:o(d)},{row:c(({item:C,expanded:M})=>[r("div",ns,[n(k,{address:C.coin.address},null,8,["address"]),r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${C.coin.address}`},S(U(C)),9,as)]),r("div",rs,[n(B,{type:"dollar",value:C.amountReceived,precision:2},null,8,["value"])]),r("div",ls,[n(B,{type:"dollar",value:C.routerReceived,precision:2},null,8,["value"])]),r("div",is,[C.routerReceived>1?(f(),w(B,{key:0,type:"dollar",value:l(C),precision:2},null,8,["value"])):D("",!0)]),r("div",cs,[C.routerReceived>1?(f(),w(B,{key:0,class:ne(["pct",{green:b(C)>0}]),type:"percentage",value:b(C),precision:2},null,8,["value","class"])):D("",!0)]),r("div",us,[r("a",{class:"font-mono",target:"_blank",href:`https://explorer.cow.fi/tx/${C.txHash}`,onClick:h[0]||(h[0]=ye(()=>{},["stop"]))},S(("addressShort"in m?m.addressShort:o(be))(C.txHash)),9,ds)]),r("div",ms,S(o(y)(C.timestamp.getUTCTimestamp())),1),n(z,{expanded:M},null,8,["expanded"])]),"row-details":c(({item:C})=>[h[1]||(h[1]=r("div",{class:"empty"},null,-1)),o(p).includes(C)?(f(),w(ss,{key:0,settlement:C},null,8,["settlement"])):D("",!0)]),_:1},8,["rows","sorting","expanded","onSortColumn","onSelect"])]),_:1})}}}),_s=F(ps,[["__scopeId","data-v-9335f69c"]]),vs={class:"dashboard-grid"},fs=T({__name:"Settlements",setup(e){const{isFetching:t,data:s}=et();return(i,u)=>(f(),V("div",vs,[n(_s,{style:{"grid-area":"table"},settlements:o(s),loading:o(t)},null,8,["settlements","loading"])]))}}),hs=F(fs,[["__scopeId","data-v-b0b08e65"]]),gs={class:"dashboard"},ys=T({__name:"Revenue.page",setup(e){const{tabActive:t,tabActiveIndex:s}=qe(["overview","distributions","cushions","settlements","harvesting"],"revenue");return(i,u)=>{const _=pe,a=_e;return f(),V("div",gs,[n(a,{active:o(s),onTab:u[0]||(u[0]=v=>s.value=v.index)},{default:c(()=>[n(_,{header:"Revenue"},{default:c(()=>[(f(),w(H,null,[o(t)==="overview"?(f(),w(Qt,{key:0})):D("",!0)],1024))]),_:1}),n(_,{header:"Distributions"},{default:c(()=>[(f(),w(H,null,[o(t)==="distributions"?(f(),w($t,{key:0})):D("",!0)],1024))]),_:1}),n(_,{header:"Cushions"},{default:c(()=>[(f(),w(H,null,[o(t)==="cushions"?(f(),w(mt,{key:0})):D("",!0)],1024))]),_:1}),n(_,{header:"Settlements"},{default:c(()=>[(f(),w(H,null,[o(t)==="settlements"?(f(),w(hs,{key:0})):D("",!0)],1024))]),_:1}),n(_,{header:"Harvesting"},{default:c(()=>[(f(),w(H,null,[o(t)==="harvesting"?(f(),w(Wt,{key:0})):D("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),Ns=F(ys,[["__scopeId","data-v-2184303d"]]);export{Ns as default};
