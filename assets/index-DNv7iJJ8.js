var Lo=Object.defineProperty;var Io=(e,t,a)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Zt=(e,t,a)=>Io(e,typeof t!="symbol"?t+"":t,a);import{o as _,c as $,p as z,a as Q,b as p,d as A,e as S,n as B,f as q,r as X,g as x,t as R,w,h as m,T as Ro,F as Z,i as re,j as ha,k as wt,l as V,u as xe,m as ut,q as o,V as Vo,s as Po,v as Fo,x as qo,y as Do,D as Ae,z as _a,A as y,B as G,C as Bo,E as Mo,G as ls,H as ce,I as Ot,J as Et,K as rs,L as xo,M as Uo,N as Oo,O as Qe,P as Te,Q as Eo,R as ye,S as is,U as Wo,W as Ko,X as H,Y as Jt,Z as Fe,_ as dt,$ as Ho,a0 as No,a1 as pa,a2 as zo,a3 as U,a4 as J,a5 as se,a6 as ie,a7 as Qo,a8 as jo,a9 as fe,aa as Wt,ab as Go,ac as fa,ad as Xo,ae as W,af as me,ag as ga,ah as cs,ai as Ut,aj as Yo,ak as Zo,al as Jo,am as en,an as gt,ao as Wa,ap as Ka,aq as Pt,ar as ya,as as ba,at as tn,au as us,av as ds,aw as Ha,ax as an,ay as sn,az as on,aA as ps,aB as nn,aC as Na,aD as ln,aE as rn,aF as za,aG as cn,aH as un,aI as dn,aJ as pn,aK as mn,aL as vn,aM as hn,aN as _n,aO as fn,aP as gn}from"./vendor-DymJEHXB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();class yn{constructor(t){this.value=t}entries(){return Object.entries(this.value)}}Array.prototype.take=function(e){return this.slice(0,e)};Array.prototype.takeRight=function(e){return this.slice(-e)};Array.prototype.drop=function(e=1){return this.slice(Math.max(0,e))};Array.prototype.dropWhile=function(e){const t=this.findIndex((a,s,l)=>!e(a,s,l));return t===-1?[]:this.slice(t)};Array.prototype.zip=function(...e){return this.map((t,a)=>[t,...e.map(s=>s[a])])};Array.prototype.uniq=function(){return[...new Set(this)]};Array.prototype.uniqWith=function(e){return this.filter((t,a)=>this.findIndex(s=>e(t,s))===a)};Array.prototype.orderBy=function(e,t="asc"){const a=Array.isArray(e)?e:[e],s=Array.isArray(t)?t:[t];return[...this].sort((l,c)=>{for(let r=0;r<a.length;r++){const n=a[r],i=Array.isArray(t)?s[r]||"asc":t,u=n(l),d=n(c);if(u!==d)return(u>d?1:-1)*(i==="asc"?1:-1)}return 0})};Array.prototype.groupBy=function(e){const t=Object.groupBy(this,e);return new yn(t)};Array.prototype.sumBy=function(e){return this.reduce((t,a)=>t+e(a),0)};Array.prototype.meanBy=function(e){const t=this.sumBy(e);return this.length>0?t/this.length:0};Array.prototype.maxBy=function(e){return this.reduce((t,a)=>e(a)>e(t)?a:t)};Array.prototype.difference=function(...e){const t=new Set(e.flat());return this.filter(a=>!t.has(a))};const L=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},bn={},ms=e=>(z("data-v-66c6ff87"),e=e(),Q(),e),wn={class:"lds-ripple"},Cn=ms(()=>p("div",null,null,-1)),$n=ms(()=>p("div",null,null,-1)),kn=[Cn,$n];function Sn(e,t){return _(),$("div",wn,kn)}const Ge=L(bn,[["render",Sn],["__scopeId","data-v-66c6ff87"]]),An=["inert"],Tn={key:0,class:"title"},Ln=A({__name:"Card",props:{title:{default:""},icon:{default:""},compact:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(e){return(t,a)=>{const s=Ge;return _(),$("div",{class:B(["card",{loading:t.loading}]),inert:!!t.loading},[t.loading!==null?(_(),S(s,{key:0,class:B(["loader",{loading:t.loading}])},null,8,["class"])):q("",!0),t.title||t.$slots.title||t.$slots.actions?(_(),$("div",{key:1,class:B(["card-header",{collapsible:t.collapsible}])},[X(t.$slots,"title",{},()=>[t.title?(_(),$("div",Tn,[t.icon?(_(),$("i",{key:0,class:B(["icon",t.icon])},null,2)):q("",!0),x(" "+R(t.title),1)])):q("",!0)],!0),X(t.$slots,"actions",{},void 0,!0)],2)):(_(),$("div",{key:2,class:B(["card-no-header",{compact:t.compact}])},null,2)),p("div",{class:B(["card-body",{compact:t.compact,collapsed:t.collapsed}])},[X(t.$slots,"default",{},void 0,!0)],2)],10,An)}}}),M=L(Ln,[["__scopeId","data-v-ad3de834"]]),In={key:0,class:"fas fa-chevron-right"},Rn=A({__name:"Breadcrumb",props:{crumbs:{},active:{}},emits:["crumb"],setup(e,{emit:t}){const a=t,s=c=>{var n;const r=e.active?e.active.id===c.id:((n=e.crumbs.filter(i=>!i.hint).at(-1))==null?void 0:n.id)===c.id;return c.hint??r},l=c=>{var r;return((r=e.crumbs.at(-1))==null?void 0:r.id)===c.id};return(c,r)=>{const n=M;return _(),S(n,null,{default:w(()=>[m(Ro,{name:"fade",tag:"ul"},{default:w(()=>[(_(!0),$(Z,null,re(c.crumbs,i=>(_(),$("li",{key:i.id},[(_(),S(ha(s(i)?"span":"a"),{class:B({active:s(i),hint:i.hint}),onClick:u=>a("crumb",i)},{default:w(()=>[x(R(i.label),1)]),_:2},1032,["class","onClick"])),!l(i)||c.crumbs.length===1?(_(),$("i",In)):q("",!0)]))),128))]),_:1})]),_:1})}}}),Vn=L(Rn,[["__scopeId","data-v-de1572c6"]]),qe=wt("breadcrumbStore",()=>{const e=V([]),t=V(!1);return{crumbs:e,show:t}}),Pn=e=>(z("data-v-e4c02f1b"),e=e(),Q(),e),Fn={class:"root"},qn={class:"toolbar-container"},Dn=Pn(()=>p("div",{id:"toolbar",class:"toolbar-teleport"},null,-1)),Bn={class:"content"},Mn=A({__name:"Layout",setup(e){const t=qe(),a=xe(),s=async l=>{l.pathName&&await a.push({name:l.pathName,...l.params&&{params:l.params()}})};return(l,c)=>{const r=ut("notifications"),n=Vn,i=ut("router-view");return _(),$("div",Fn,[m(r,{width:600,duration:-1}),m(o(Vo)),X(l.$slots,"navigation",{},void 0,!0),p("main",null,[p("div",qn,[o(t).show?(_(),S(n,{key:0,class:"breadcrumb",crumbs:o(t).crumbs,onCrumb:s},null,8,["crumbs"])):q("",!0),Dn]),p("div",Bn,[m(i,null,{default:w(({Component:u})=>[m(Po,{name:"fade",mode:"out-in"},{default:w(()=>[(_(),S(ha(u)))]),_:2},1024)]),_:1})])])])}}}),xn=L(Mn,[["__scopeId","data-v-e4c02f1b"]]),Un={class:"collapsible-inside"},On=A({__name:"Collapsible",props:{expanded:{type:Boolean,default:!0}},setup(e){return(t,a)=>(_(),$("div",{class:B(["collapsible-outside",{expanded:t.expanded}])},[p("div",Un,[X(t.$slots,"default",{},void 0,!0)])],2))}}),Ct=L(On,[["__scopeId","data-v-f4edd7a4"]]),En={class:"badge"},Wn={class:"label"},Kn=A({__name:"Badge",props:{label:{default:""}},setup(e){return(t,a)=>(_(),$("div",En,[p("div",Wn,R(t.label),1)]))}}),Hn=L(Kn,[["__scopeId","data-v-8a0a03f3"]]);function Ft(e){return!!e.children}function Qa(e){return!!e.to}function Nn(e){return!!e.url}function zn(e,t,a){return e.reduce((s,l)=>({...s,[t(l)]:a(l)}),{})}function Qn(e){return e!=null}function jn(e){function t(v){return v<10?"0"+v.toString():v.toString()}const a=e.getTime()-new Date().getTime();if(a<=0)return"00:00:00:00";const s=1e3,l=s*60,c=l*60,r=c*24,n=Math.floor(a/r),i=Math.floor(a%r/c),u=Math.floor(a%c/l),d=Math.floor(a%l/s);return t(n)+":"+t(i)+":"+t(u)+":"+t(d)}function Ne(e,t=0,a=".",s=","){const l=isFinite(+e)?+e:0,c=isFinite(+t)?Math.abs(t):0,r=typeof s>"u"?",":s,n=typeof a>"u"?".":a,i=function(d,v){const h=Math.pow(10,v);return Math.round(d*h)/h},u=(c?i(l,c):Math.round(l)).toString().split(".");return u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(u[1]||"").length<c&&(u[1]=u[1]||"",u[1]+=new Array(c-u[1].length+1).join("0")),u.join(n)}function E(e,t){const a=Math.abs(e);return t==="percentage"?"%":t==="dollar"?a>=1*10**12?"t":a>=1*10**9?"b":a>=1*10**6?"m":a>=1*10**3?"k":"":""}function K(e,t,a){const s=Math.abs(e);return t===1/0?e.toLocaleString():a==="percentage"?Ne(e,t):a==="dollar"?s>=1*10**12?Ne(e/10**12,t):s>=1*10**9?Ne(e/10**9,t):s>=1*10**6?Ne(e/10**6,t):s>=1*10**3?Ne(e/10**3,t):Ne(e,t):e.toString()}function ze(e){return Number(e.toFixed(e>100?0:2)).toLocaleString()}function Be(e,t){return parseFloat(qo(e,Number(t)))}function wa(e,t){const a=Number(t),s=Number.isInteger(e)?e.toString():e.toFixed(a);return Fo(s,a)}function Ca(e,t){const a={...e};for(const s in t)Array.isArray(t[s])?a[s]=[...t[s]]:typeof t[s]=="object"&&t[s]!==null?a[s]=Ca(a[s],t[s]):a[s]=t[s];return a}async function vs(e,t=0,a=1e3){const s=await e(t,a),l=await(s.length>=a?vs(e,t+1,a):Promise.resolve([]));return s.concat(l)}function Gn(e){return Object.fromEntries(Object.entries(e).map(([t,a])=>[a,t]))}const hs={"Curve.fi Factory USD Metapool: Magic Internet Money 3Pool":"mim","Curve.fi Factory Plain Pool: cvxCRV":"cvxcrv","Curve.fi Factory Plain Pool: ibJPY-sJPY":"ibJPY/sJPY","Curve.fi Factory Plain Pool: ibGBP-sGBP":"ibGBP/sGBP","Curve.fi Factory Plain Pool: ibAUD-sAUD":"ibAUD/sAUD","Curve.fi Factory Plain Pool: ibEUR-sEUR":"ibEUR/sEUR","Curve.fi Factory Plain Pool: ibCHF-sCHF":"ibCHF/sCHF","Curve.fi Factory Plain Pool: ibKRW-sKRW":"ibKRW/sKRW",ib:"ironbank",aeth:"ankreth","Curve.fi Factory USD Metapool: USDM":"usdm","Curve.fi Factory Plain Pool: Neutrino EUR":"eurn","Curve.fi Factory Pool: alETH":"aleth","Curve.fi Factory Plain Pool: MIM-UST":"mim-ust","Curve.fi Factory BTC Metapool: ibBTCT":"ibBTCT","Curve.fi Factory USD Metapool: Paxos Dollar (USDP)":"paxos-dollar","Curve.fi Factory Plain Pool: d3pool":"d3pool","Curve.fi Factory USD Metapool: Origin Dollar":"ousd","Curve.fi Factory USD Metapool: wormhole v2 UST-3Pool":"wormhole-ust","Curve.fi Factory BTC Metapool: ibBTC":"ibBTC","Curve.fi Factory Plain Pool: 3EURpool":"3eur-pool","Curve EURS-USDC":"eursusdc","Curve EURT-3Crv":"eurtusd","Curve CVX-ETH":"cvx","Curve CRV-ETH":"crv",RAI3CRV:"rai","Curve XAUT-3Crv":"xaut","Curve.fi Factory USD Metapool: DOLA-3pool Curve LP":"dola","Curve T-ETH":"teth","Curve.fi Factory Crypto Pool: YFI-ETH":"yfieth","Curve SPELL-ETH":"spelleth","Curve.fi Factory Crypto Pool: FXS-ETH":"fxseth","Curve.fi Factory USD Metapool: FEI Metapool":"FEI Metapool","Curve.fi Factory Plain Pool: agEUR-ibEUR":"agEUR/ibEUR","Curve.fi Factory BTC Metapool: tbtc2":"tbtc2"},ea=["tricrypto","usdm"];function Me(e){const t=hs[e];return t||e}function $a(e){const t=Gn(hs)[e];return t||e}function Xn(e){return!!(ea.find(t=>t===e)??ea.find(t=>t===Me(e))??ea.find(t=>t===$a(e)))}async function bt(e,t=250){const a=new Promise(l=>setTimeout(()=>{l(null)},t)),[,s]=await Promise.all([a,e]);return s}function ma(e,t){return(Array.isArray(e)?e:[e]).some(s=>t.path.startsWith(s))}function $t(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}const _s="0x9bc7c6ad7e7cf3a6fcb58fb21e27752ac1e53f99",ja="0x62b9c7356a2dc64a1969e19c23e4f579f9810aa7",fs="0x696B5D296a8AeF7482B726FCf0616E32fe72A53d",gs="0x2f50d538606fa9edd2b11e2446beb18c9d5846bb",tt="0xe478de485ad2fe566d49342cbd03e49ed7db3356",Yn="0xadd2f542f9ff06405fabf8cae4a74bd0fe29c673",Zn=[{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"accountExtraRewardRates",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rates",type:"uint256[]"},{internalType:"uint256[]",name:"groups",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"accountRewardRates",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rates",type:"uint256[]"},{internalType:"uint256[]",name:"groups",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"},{internalType:"uint256",name:"_priceOfReward",type:"uint256"},{internalType:"uint256",name:"_priceOfDeposit",type:"uint256"}],name:"apr",outputs:[{internalType:"uint256",name:"_apr",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"extraRewardRates",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rates",type:"uint256[]"},{internalType:"uint256[]",name:"groups",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"mainRewardRates",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rates",type:"uint256[]"},{internalType:"uint256[]",name:"groups",type:"uint256[]"}],stateMutability:"view",type:"function"}],Jn={laf:"https://api.llama.airforce",cb:void 0,cm:"https://api2.curvemonitor.com",pm:void 0,"pm-lrt":void 0};class el extends Error{constructor(t,a){super(a),this.status=t}}async function tl(e,t,a){try{const s=await fetch(e,{method:t?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),signal:a});if(s.ok)return s;throw new el(s.status,`Fetch error ${s.status} for URL: ${e}`)}catch(s){throw s instanceof Error?s:new Error("Unknown fetch error")}}async function al(e,t,a){return await(await tl(e,t,a)).json()}class $e{async fetch(t,a,s){return al(t,a,s)}}class Xe extends $e{constructor(a){super();Zt(this,"host");this.host=a}async getHost(){return await this.host}}class ys extends $e{async getPrice(t){const a=`ethereum:${t}`;return this.fetch(`https://coins.llama.fi/prices/current/${a}`).then(s=>s.coins[a])}async getPrices(t){const a=t.map(s=>`ethereum:${s}`).join(",");return this.fetch(`https://coins.llama.fi/prices/current/${a}`).then(s=>s.coins)}}async function sl(e,t,a){const s=Do({abi:Zn,address:Yn,client:e}),l=await s.read.mainRewardRates().then(([v,h])=>[...v].zip([...h])),c=await s.read.extraRewardRates().then(([v,h])=>[...v].zip([...h])),r=l.concat(c).filter(v=>v[1]>0).groupBy(v=>v[0]).entries().map(([v,h])=>({address:v,rate:h.reduce((g,f)=>g+f[1],BigInt(0))})),n=r.map(v=>v.address).concat([ja]).uniq(),i=await t.getPrices(n).then(v=>zn(Object.keys(v).map(h=>({address:h.replace("ethereum:","").toLocaleLowerCase(),price:v[h].price})),h=>h.address,h=>wa(h.price,18n))),u=[],d=i[ja];for(const v of r){const h=await s.read.apr([v.rate,i[v.address.toLocaleLowerCase()],d]),g=Be(h,18n);u.push(g)}return u}function Mt(e){return e instanceof Error?e.message.includes("Exchange resulted in fewer coins than expected")||e.message.includes("Slippage")?"Transaction failed because slippage was set too low. A slight increase of one or two percent could help, but don't make it too high to ensure your protection. We also highly recommend using MEVBlocker for extra safety.":e.message.includes("HTTP request failed")&&e.message.includes("eth_call")?"The RPC returned an error, probably a rate-limit. Try again layer or try a different wallet.":e.message:JSON.stringify(e)}async function bs(e,t){e.value=!0;try{return await t()}catch(a){Ae({text:Mt(a),type:"error"});return}finally{e.value=!1}}const ta={};function ol(e="$llama$"){ta[e]||(ta[e]=0);const t=++ta[e];return e==="$llama$"?`${t}`:`${e}${t}`}const nl={key:0},ll={class:"nav-link-container"},rl={key:1},il=["href"],cl={class:"nav-link-container"},ul={class:"nav-link-container"},dl={class:"left"},pl={key:0,class:"icon"},ml={class:"right"},vl=A({__name:"MenuItem",props:{item:{}},emits:["navigated"],setup(e,{emit:t}){const a=t,s=_a(),l=V(!0),c=y(()=>Qa(e.item)?[e.item]:Ft(e.item)?e.item.children:[]),r=()=>{Ft(e.item)&&e.item.children.filter(d=>ma(d.to,s)).length>0&&(l.value=!0)},n=u=>typeof u.label=="string"?u.label:u.label();G(()=>e.item,u=>{Ft(u)&&(l.value=!u.initCollapsed),r()},{immediate:!0}),G(()=>s.fullPath,()=>{r()},{immediate:!0});const i=()=>{l.value=!l.value};return(u,d)=>{const v=Hn,h=ut("router-link"),g=Ct;return _(),$(Z,null,[o(Ft)(u.item)?(_(),$("li",nl,[p("a",{class:"nav-link node",onClick:i},[p("div",ll,[x(R(u.item.label)+" ",1),p("i",{class:B(["expander fas fa-chevron-up",{expanded:o(l)}])},null,2)])])])):q("",!0),o(Nn)(u.item)?(_(),$("li",rl,[p("a",{class:"nav-link node",href:u.item.url,target:"_blank"},[p("div",cl,R(u.item.label),1)],8,il)])):q("",!0),m(g,{class:"items",expanded:o(l)},{default:w(()=>[p("ul",null,[(_(!0),$(Z,null,re(o(c),f=>(_(),$("li",{key:n(f)},[o(Qa)(f)?(_(),S(h,{key:0,to:f.to,class:B(["nav-link leaf",{"router-link-active":o(ma)(f.to,o(s))}]),onClick:d[0]||(d[0]=b=>a("navigated"))},{default:w(()=>[p("div",ul,[p("div",dl,[f.icon?(_(),$("div",pl,[p("i",{class:B(f.icon)},null,2)])):q("",!0),x(" "+R(n(f)),1)]),p("div",ml,[f.tag?(_(),S(v,{key:0,label:f.tag},null,8,["label"])):q("",!0)])])]),_:2},1032,["to","class"])):q("",!0)]))),128))])]),_:1},8,["expanded"])],64)}}}),hl=L(vl,[["__scopeId","data-v-2430c9e7"]]),_l=A({__name:"Menu",props:{pages:{default:()=>[]}},emits:["navigated"],setup(e,{emit:t}){const a=t,s=_a(),l=y(()=>e.pages.find(n=>ma(n.titleRoute,s))),c=y(()=>{var n;return((n=l.value)==null?void 0:n.menuItems)??[]}),r=n=>typeof n.label=="string"?n.label:n.label();return(n,i)=>(_(),$("nav",null,[(_(!0),$(Z,null,re(o(c),u=>(_(),$("ul",{key:r(u)},[m(hl,{item:u,onNavigated:i[0]||(i[0]=d=>a("navigated"))},null,8,["item"])]))),128))]))}}),fl=L(_l,[["__scopeId","data-v-58b98e53"]]);function kt(){const{address:e,isConnected:t,chainId:a}=Bo(),s=Mo(),l=y(()=>s.data.value&&e.value?e.value.toLocaleLowerCase():void 0);return{isConnected:t,chainId:a,address:l}}function Ce(e,t=6){if(!e)return"0x000...000";const a=t/2+2,s=e.length-t/2;return`${e.substring(0,a)}...${e.substring(s)}`}function gl(e,t=6){if(!e)return"0x000";const a=Math.min(e.length,t+2);return e.length>a?`${e.substring(0,a)}...`:e}const yl=A({__name:"Button",props:{icon:{default:""},value:{default:""},primary:{type:Boolean,default:!1},chainId:{}},emits:["click"],setup(e,{emit:t}){const a=t,{chainId:s}=kt(),{switchChain:l}=ls(),c=r=>{if(r.stopImmediatePropagation(),e.chainId){if(s.value===void 0){Ae({text:"Wallet not connected",type:"error"});return}s.value!==e.chainId&&l({chainId:e.chainId})}a("click")};return(r,n)=>(_(),$("button",{class:B({primary:r.primary}),onClick:c},[X(r.$slots,"default",{},()=>[r.icon?(_(),$("i",{key:0,class:B(["icon",[r.icon,{noValue:!!r.value}]])},null,2)):q("",!0),x(" "+R(r.value),1)],!0)],2))}}),ge=L(yl,[["__scopeId","data-v-8db3aeb3"]]),bl="/assets/crv-CKEIQw2g.png",wl="/assets/hat-D1qfnSjv.png",Cl={},ws=e=>(z("data-v-757199dd"),e=e(),Q(),e),$l={class:"logo"},kl=ws(()=>p("div",{class:"visual"},[p("img",{src:bl}),p("img",{src:wl})],-1)),Sl=ws(()=>p("span",null,"curve.monitor",-1)),Al=[kl,Sl];function Tl(e,t){return _(),$("div",$l,Al)}const Ll=L(Cl,[["render",Tl],["__scopeId","data-v-757199dd"]]),Il={class:"header"},Rl={class:"buttons"},Vl=A({__name:"Header",emits:["toggle-expansion","navigated"],setup(e,{emit:t}){const a=t;return(s,l)=>{const c=ut("router-link"),r=ge;return _(),$("div",Il,[m(c,{class:"logo",to:"/",onClick:l[0]||(l[0]=n=>a("navigated"))},{default:w(()=>[m(Ll,{class:"logo"})]),_:1}),p("div",Rl,[m(r,{icon:"fas fa-bars",onClick:l[1]||(l[1]=n=>a("toggle-expansion"))})])])}}}),Pl=L(Vl,[["__scopeId","data-v-e6d3c72b"]]),Fl={key:0,class:"modal"},ql={class:"modal-popup"},Dl=A({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const a=t,s=l=>{l.code==="Escape"&&a("close")};return ce(()=>{document.addEventListener("keydown",s)}),Ot(()=>{document.removeEventListener("keydown",s)}),G(()=>e.show,l=>{document.body.style.overflow=l?"hidden":""}),(l,c)=>(_(),S(Et,{to:"body"},[l.show?(_(),$("div",Fl,[p("div",{class:"modal-mask",onClick:c[0]||(c[0]=r=>a("close"))}),p("div",ql,[X(l.$slots,"default",{},void 0,!0)])])):q("",!0)]))}}),ka=L(Dl,[["__scopeId","data-v-bd5f9d8a"]]),Bl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTM0A1t6AAACSklEQVRIS7WVTUhUURTHT4sWgZS4aNFGSgqTmUqiKNAoFMWhqbQ2gX1BGdKUChW1EEqiULEsDNSFOBJiaZHQ9EE1pGik6DAzYYsUochFoEExCIGPf/e8e4d5b+ZJb4bxwm/x3j3n/O69j3cPidEomF4hOgU0/Wec8DeUZoIEUfuXLuAXnVcJBx2Ery8I+JIac+8JblGjpVo+mwQ8ceUI4e6FWMLPYXvwajm+t4FQVUQozrEQ8MpbPXJ7PFldStiTtwWufQX/xZFJ+D1G0KYID2sJ4QELAb+IwsWv11yE3THs98OpJMY6loLvbwkF2xwqVY6O+62oO3/OxLVLHkQiERUBdLe349YZG4JvbwgVJcUqDQhOTmB/NmGky0yL+FYsio6Xg4NoOJ2CYGx0FB6XOZEJ9ImjPHVCRSUp2JSVibbmJp3aqrOWgk89KQoWJwneejPhp3LuQQ1hcxZhV85q7MjOQCgQUOUB3/Nn9gTLwcXLiwqhaZoqGRsL8/PYup4QFMdmzLEt+PGOkL9xg6n4x6EhPO7xos/r1YuPP0rMsy2Y8REqD7tVaWAqHIJznfwxmeiPFU/KgpEPflyusI41kpRg7SrCyaPlOgd25qdXsBgg+O6ZmX1lHWvEtoB3kCF2cNzt0inc7kj/ERm/AV9uSQu4WfTeJCyJKzc+kAVriHCsrERnb16upUATPLkdOz6T4JBTNos2cZ/HJy59lgswEplIjBu4I45x9zINhzsZT4T6ExPtMvta1rhRKZ9jAtXy0k1U0CFYWBmo/x+ShmnKzYg0NQAAAABJRU5ErkJggg==",Ml={key:1,src:Bl},xl=A({__name:"Tooltip",props:{icon:{default:""}},emits:["show"],setup(e,{emit:t}){const a=t,s=V(!1),l=V(null),c=V(null);G(s,d=>{a("show",d),d&&rs(()=>{u()})});let r;function n(){r&&(clearTimeout(r),r=void 0),s.value=!0}function i(){r&&clearTimeout(r),r=setTimeout(()=>{s.value=!1,r=void 0},50)}ce(()=>{u(),window.addEventListener("resize",u)}),Ot(()=>{window.removeEventListener("resize",u)});function u(){if(!l.value||!c.value)return;const d=l.value.getBoundingClientRect(),v=c.value.getBoundingClientRect(),h=14,g=h,f=window.innerHeight-v.height-h,b=Math.min(Math.max(g,d.top-v.height-h),f),C=h,k=window.innerWidth-v.width-h,I=Math.min(Math.max(C,d.left+d.width/2-v.width/2),k);c.value.style.top=`${b}px`,c.value.style.left=`${I}px`}return(d,v)=>(_(),$("div",{class:B(["tooltip",{show:o(s)}])},[p("div",{ref_key:"triggerRef",ref:l,class:"trigger",onMouseover:n,onMouseleave:i,onTouchstart:n,onTouchend:i},[X(d.$slots,"trigger",{},()=>[d.icon?(_(),$("i",{key:0,class:B(d.icon)},null,2)):(_(),$("img",Ml))],!0)],544),p("div",{ref_key:"contentRef",ref:c,class:"content",onMouseover:n,onMouseleave:i,onTouchstart:n,onTouchend:i},[X(d.$slots,"default",{},void 0,!0)],544)],2))}}),Kt=L(xl,[["__scopeId","data-v-69dad8d5"]]),Ul="/assets/injected-DW80ouY-.webp",Ol="/assets/rabby-CG__llS3.svg",El="/assets/walletconnect-BCBhrtde.webp",Wl="/assets/coinbase-CsqSq8Nj.webp",Kl="data:image/webp;base64,UklGRuIJAABXRUJQVlA4INYJAABQTwCdASqQAZABPkkgi0WioYlv2BQCQllbuFzQQgaf+g1rnpf5Gfur/ouv54K8GftNl2/Iv+A/Lv+3/Az1Ffcz7gf6Qf4LqV+YD+Z/2j/X/5v3gP83/o/ap6AH6q9aL6AH6semp+ynwiftr+y3s0/f/sx/jj/K9rf94xtMRTr//O/0r3AdkOwdvIcINKVNH8k/1iFbtMZi3As2twLNrcCza3As2twLNrcCza3As2twLNrcCza3As2tv86K1Sn/lbircVbircVbircVvo+IuhKkUafH59MV0gaw7C4+BzmPvHSW19fTgrGhKkSavYZD9pi/odhBF0JUijT47/hKMBg+fEb2gVzAs2tv88VcYiCllb49nsYQU1OCoBuAYWxJTK6cAvmfF6ToV7TGYkChDXyhoIkIRefRbJzvwLNrcCgnFP2Q/qkUafZFGn2P2US1ujrAirQMy1GK9Rjtp3BWNCVIkguMYjQL8M0GC7rHYbpNhf7Pw/cNK9pjMW4InVWnB4X/Kux77oDrFRGA+nT9H3cLoHzKdTqvBI0ZmiFTZzgrGhe7JLHUqtRM0GoBm2fCx0NugEP4Rn0lYykUafZFEMb9XAMGmNg8NzQm1BviRj+a6sMp+fEqfnxKtY/jPIfd/PiVPz4lT89GHSxN0ChpiKYqCfZSKNPr0Cy/vRpI4ZobI5q9FrQ7HbiAYSfscvCdtHiI1LF0afZFEPlvIHHNrbK+oZB6WMmD/NwLNpR9oFY0HwmFm1uBZtZ4tcDAyFpj3As2s8cdym6UbW4Fm1uBPk2pFmhsjmr0Xk0kBP/PGNCVIo0+yKNPsijT7Io0+yKNPsijT7Io0+yKNPsijT7Io0+yKNNwAP7+Aa32O9NQP//+aiQ85uGbqX8qAMi2gBYHvABBejSCKVRwlwknSwekmWw/oN2DsM0EyRQhkdL8kDDzLGrtwD6vLGeABMYegTk2Uhde+N7ONK/joLprkk/CDZQKaf54kh4UalPgPeBRnphxNDfOSDkDVCjac4840+IEuJYs5IkjOs6sImPzP0b8iCttGKBb+kij60c3ifxYrl/3Xv0hjWIIbeyJ2o61OrdedMz7G8Y+V4d9G9FLwH4MaY8Y8GCnyJMfxZ/ULhYb9VE+x6juTHAyXvX0FlIEFkNBTxfTwLvKkP+0UCZqgugNIBLQog7iPFBonuG3MFiSKD6lVo+qTy4vaslgcrz/GSqAwXnyPxj6CxBfLlZb0ij+0uKoaIGm9ZUEFPEaXdz+BeVqg1I/os1mC7iKu5/rbDGjzB6c3akCTpY0OHZ4wR5PSRELDEuHkb6phpM+RGlLuVN8v26i5wH2ak8KmhBqp3SL8shBam1arJwsvNX69fdGsJSjMBX5NQZZCENAuE9vUvdMwSfJz9D3nS3aDmtVmxKjE6qy0Qsdtpcp0jWe1gU46CQbpsIDYqafR7LzcRxMTEoEGE5H8xdsFKPU/KG3jtjtylNoYQiqmdXcQokdTTxrjLzdzwWB9RiSKFM5v22/GI09Yr8fYSBKmGyQbaBUor/bu578Nm9OI5RhfMKnO09YxqD3x0/cTv53sZVEU7c/jELa5JY+uFXVME91SWsLQOTI63bx+3BV8gt7fCiHffGMMr4/SLihamFOtV+QYZUWHd5XuLXKEQTNG9GCtDao7iJVnWLlxqfnhP5kn54xJCx/gADSvAEDQwIomE3NQANF6/ZkVDu/MVcXcHOw8c3bGk+vuhT6f3Tr4NnUPPpa8+hG7YsyedNHK7l4qjvRnFSDhXEhuLq0Ah9hv8Sdlo1R6Sn/Ag112n1U82sWkpSk5IU6PdNFfaBXK8GR7C2Nm/KMWhnQ9pELP9TVr2XpJfuLJOB4Ttqh2aro90aus+ZPOyTlimgP8jVgUzy5hdO9HMwCPjxHGeyTJKQlxScBGPnU1PjBEgEyOWts0CE8V9x7E1+ee3gjyOCiDLhnYELTSKgdhhCbsf6NMjutWZ5XL1O/+Dd06WT62e38YKgGhhGBI07PXacDqA/XTdThkPYNCOFF26Dz2HMCt2/9Rel4gnmQKJjVIQLnEZeF2Nka2MsRuKmjNAAvaWTbVZe91xRYaCd2ml43cOr1YfxmlJ9hCpBPUZIkE6u07L8owldqs4TigKOZK0I7sng62s8U95/t3/oo6sA2eUUmedjAefrskjQjH5qsbhLJyesMEv9jxGV+GOtLyrtsxaWkPNcHBXXj3iZYGxZN6nIcLqaLlHPLPMnZjQQ8BojhDnKHz1lXMfMEHFe4hkgIyYE4KANL9hLLuv69qnxteZIG9m41ampmUsQlEpx3GFeIMX682UDHk1MHDLGoacoeaYSvz5rZF/WWYAlwl0nsB6gkKRihBrxfbKRJWbOQkodXo9nFAHN55srKEDIkskmsFAhtB8JlWPNfjOILKEFwQ2+LTmoG1KLs/Z6ltBt5TvPtEPzcGsLhbjXYk9Mnx7fWMkjrXZ+E0zX38b3zr9OjFrbOf+GZeo0PLtD+ZxcjEf5XqHI+ptX1Sj9yt27SwlUh2Pc9+QHOag7bIYxKtmp8wV39OP8RJb8Ag5x7IAXkgCSOxdcjFb0PKVaxWKyHQJf68yCmeyzp5vGQ/z1Mxgo8CmZl3OKn0onEfx2GWQgRCFQd7t5jx6j0JEET/agi2LjNP2FvxLe3d+6VlTrs+AGqrBPrK1v4bLgqvYwdPUgwDkeJ1gY/y+d4AuoSo8tkciHJQ/RQ//G0yHoqE/HoH6QfVTaZaXR68fqHs6uCDKayag/cIlpHpr31w1QBHu17ohviYmrFjwJ16jGU5hvY+wfq2w1s20oI9emMn0GkxN5IYpm57T8e0ntXyu1xKfsokhV+HWRUF3uC+mZHMVKCT194/Gz2DVqRfi3W8wvYwilf/bWjHFksIGs3HEaW+hESm6ciT3tfLhohZB9NnVtHS/aUk39m9cNCfFx/zzHzqZXOfLrSs0+rfugDRzcz7/vP93ksdi0Ks8xLNInhwkKzmmG8Dbyvw9p1osUJ/jxCjQtG1DxDBJIkD8AWIHnzPVugs+uZ47tknMAEfstIKysdwA/y3uep1Nfl2IZtm6NgIEZfQbTiEbWeXLX5DVgN+wG8TRnpGvH5Bkiuh1OCkaVtDapxLkFplC11AFeIPMSI2lwFalrsCGHC0obfjxkqbNcF3fPXO2KKbMLYG1ub7jWhiwhjMLPPPp2bzQPV89uu2MW0ZwcPPg7FzufEJPxJ/0RNeHAtpWafTVSeYerO76P+whWDfkOsC0UpaqMIceALU2CB+bc66l6aRePCvq+JW5q6SQYanHeHkhKZKiShTc7zKkksZXIyuRlcjKaUUkKEFrCTYCBipRk3lgB8IZ24X/CwgQAAAAAAAAAA",Hl=e=>(z("data-v-cae4603a"),e=e(),Q(),e),Nl={class:"buttons"},zl={class:"connectors-body"},Ql=Hl(()=>p("div",{class:"title"},"Connect Your Wallet",-1)),jl={class:"connectors"},Gl=["src"],Xl={key:1,class:"empty"},Yl={class:"name"},Zl=A({__name:"WalletConnectButton",setup(e){const{connect:t}=xo(),a=Uo(),s=["injected","walletConnect","coinbaseWalletSDK","safe"],l=y(()=>a.value.filter(u=>s.includes(u.id))),c=V(!1);function r(u){switch(u.id){case"injected":return Ul;case"walletConnect":return El;case"coinbaseWalletSDK":return Wl;case"safe":return Kl;case"io.rabby":return Ol;default:return""}}function n(u){return u.id==="injected"?"Browser Extension":u.name}function i(u){t({connector:u}),c.value=!1}return(u,d)=>{const v=ge,h=M,g=ka;return _(),$("div",Nl,[m(v,{class:"button",primary:!0,onClick:d[0]||(d[0]=f=>c.value=!0)},{default:w(()=>[x(" Connect Wallet ")]),_:1}),q("",!0),m(g,{show:o(c),onClose:d[1]||(d[1]=f=>c.value=!1)},{default:w(()=>[m(h,null,{default:w(()=>[p("div",zl,[Ql,p("div",jl,[(_(!0),$(Z,null,re(o(l),f=>(_(),$("div",{key:f.id,class:"connector"},[m(v,{onClick:b=>i(f)},{default:w(()=>[r(f)?(_(),$("img",{key:0,src:r(f)},null,8,Gl)):(_(),$("div",Xl)),p("div",Yl,R(n(f)),1)]),_:2},1032,["onClick"])]))),128))])])]),_:1})]),_:1},8,["show"])])}}}),Jl=L(Zl,[["__scopeId","data-v-cae4603a"]]),er={class:"wallet"},tr={key:0},ar={key:1},sr={key:0,class:"info"},or=A({__name:"Wallet",props:{labelPleaseConnect:{}},setup(e){const{disconnect:t}=Oo(),{isConnected:a,chainId:s,address:l}=kt(),{switchChain:c}=ls(),r=y(()=>s.value===Qe.id),n=()=>{c({chainId:Qe.id})};return(i,u)=>{const d=ge;return _(),$("div",er,[o(a)?(_(),$("div",tr,[o(r)?(_(),S(d,{key:1,class:"disconnect",icon:"fas fa-check",value:o(Ce)(o(l)),onClick:o(t)},null,8,["value","onClick"])):(_(),S(d,{key:0,class:"change",value:"Change Network",primary:!0,onClick:n}))])):(_(),$("div",ar,[m(Jl),i.labelPleaseConnect?(_(),$("span",sr,R(i.labelPleaseConnect),1)):q("",!0)]))])}}}),nr=L(or,[["__scopeId","data-v-8fd60889"]]),lr=e=>(z("data-v-f6c127d0"),e=e(),Q(),e),rr={class:"select"},ir={class:"item"},cr={key:0,class:"label"},ur=["onClick"],dr=lr(()=>p("div",{class:"chevrons"},[p("i",{class:"fas fa-chevron-up"}),p("i",{class:"fas fa-chevron-down"})],-1)),pr=A({__name:"Select",props:{options:{default:()=>[]},open:{type:Boolean,default:!1},selected:{default:null},label:{}},emits:["open","close","input"],setup(e,{emit:t}){const a=t;return(s,l)=>(_(),$("div",{class:"select-container",tabindex:"0",onClick:l[0]||(l[0]=Te(c=>a("open"),["stop"])),onBlur:l[1]||(l[1]=c=>a("close"))},[p("div",rr,[p("div",{class:B(["selected",{open:s.open}])},[X(s.$slots,"item",{item:s.selected},()=>[p("div",ir,R(s.selected),1)],!0),s.label?(_(),$("div",cr,R(s.label),1)):q("",!0)],2),p("div",{class:B(["items",{selectHide:!s.open}])},[(_(!0),$(Z,null,re(s.options,(c,r)=>(_(),$("div",{key:r,onClick:n=>a("input",c)},[X(s.$slots,"item",{item:c},()=>[x(R(c),1)],!0)],8,ur))),128))],2)]),dr],32))}}),St=L(pr,[["__scopeId","data-v-f6c127d0"]]),nt={blue:"#5a74f6",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#292929",level1:"#292929",level2:"#3c3c3c",level3:"#535353",level4:"#6a6a6a",level5:"#949494",level6:"#aea8af",text:"#ffffff"},mr=[nt.blue,nt.yellow,nt.green,nt.red,nt.purple],lt={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"},vr=[lt.blue,lt.yellow,lt.green,lt.red,lt.purple],rt={blue:"#1a8df9",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f5f5f5",level1:"#fafafa",level2:"#f2f2f2",level3:"#ebebeb",level4:"#a1a1a1",level5:"#27272a",level6:"#212124",text:"#333333"},hr=[rt.blue,rt.yellow,rt.green,rt.red,rt.purple];function xt(e){switch(e){case"chad":return rt;case"light":return lt;default:return nt}}function _r(e){switch(e){case"chad":return hr;case"light":return vr;default:return mr}}const O=wt("settingsStore",()=>{const e=V("light"),t=y(()=>({colors:xt(e.value),colorsArray:_r(e.value)}));return{themeId:e,theme:t}}),fr={class:"theme"},gr={class:"label"},yr={class:"colors"},br="theme",wr=A({__name:"SelectTheme",setup(e){const t=[{id:"chad",colors:xt("chad")},{id:"dark",colors:xt("dark")},{id:"light",colors:xt("light")}],a=O(),l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",c=Eo(br,t.find(u=>u.id===l)??t[0],void 0,{serializer:{read:u=>t.find(d=>d.id===u)??t[0],write:u=>u.id}});ce(()=>{i(c.value)});const r=V(!1),n=()=>{r.value=!r.value},i=u=>{c.value=u,window.document.documentElement.setAttribute("data-theme",u.id),a.themeId=u.id};return(u,d)=>{const v=St;return _(),S(v,{class:"select direction-up",options:t.map(h=>h),selected:o(c),open:o(r),onOpen:n,onClose:d[0]||(d[0]=h=>r.value=!1),onInput:i},{item:w(h=>[p("div",fr,[p("div",gr,R(h.item.id),1),p("div",yr,[p("div",{class:"color",style:ye({"background-color":h.item.colors.backgroundColor})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.level1})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.level2})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.blue})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.yellow})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.green})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.red})},null,4),p("div",{class:"color",style:ye({"background-color":h.item.colors.purple})},null,4)])])]),_:1},8,["options","selected","open"])}}}),Cr=L(wr,[["__scopeId","data-v-3b33aa87"]]),$r={class:"bottom"},kr={class:"buttons"},Sr={href:"https://twitter.com/0xAlunara",target:"_blank"},Ar=A({__name:"Bottom",setup(e){const t=xe();return(a,s)=>{const l=ge;return _(),$("div",$r,[p("div",kr,[p("a",Sr,[m(l,{icon:"fab fa-twitter"})]),m(l,{icon:"fas fa-code",onClick:s[0]||(s[0]=c=>o(t).push("/code"))})]),m(Cr,{class:"themes"}),m(nr)])}}}),Tr=L(Ar,[["__scopeId","data-v-60358ade"]]),Sa=()=>wt("pageStore",()=>{const e=V([]),t=V([]);return{pages:e,routes:t}})(),Lr=A({__name:"Navigation",emits:["navigated"],setup(e,{emit:t}){const a=t,s=Sa(),l=V(!1),c=()=>{l.value=!1,a("navigated")};return(r,n)=>{const i=fl,u=Ct;return _(),$("div",{class:B(["menu-desktop",{expanded:o(l)}])},[m(Pl,{onToggleExpansion:n[0]||(n[0]=d=>l.value=!o(l)),onNavigated:c}),m(u,{class:"menu-content",expanded:o(l)},{default:w(()=>[m(i,{pages:o(s).pages,onNavigated:c},null,8,["pages"]),m(Tr,{onNavigated:c})]),_:1},8,["expanded"])],2)}}}),Ir=L(Lr,[["__scopeId","data-v-ed03439a"]]),Rr=A({__name:"App",setup(e){const t=qe(),a=_a();return G(()=>a.fullPath,s=>{["/platform/crvusd","/platform/lending","/platform/pools"].some(c=>s.startsWith(c))||(t.show=!1)}),(s,l)=>{const c=xn;return _(),S(c,null,{navigation:w(()=>[m(Ir,{class:"navigation"})]),_:1})}}}),Vr=L(Rr,[["__scopeId","data-v-20311da9"]]),Pr="/assets/404-DGbqGNxT.png",Fr={},qr=e=>(z("data-v-b15b1b06"),e=e(),Q(),e),Dr={class:"not-found"},Br={class:"not-found-container"},Mr=qr(()=>p("img",{src:Pr},null,-1));function xr(e,t){const a=M;return _(),$("div",Dr,[p("div",Br,[m(a,null,{default:w(()=>[x(" Where are you going, pilot? Page not found, please return home fren. ")]),_:1}),Mr])])}const Ur=L(Fr,[["render",xr],["__scopeId","data-v-b15b1b06"]]),Cs=e=>(z("data-v-7dbdbcc8"),e=e(),Q(),e),Or={key:0,class:"expander"},Er=Cs(()=>p("i",{class:"fas fa-chevron-up"},null,-1)),Wr=[Er],Kr={key:1,class:"expander"},Hr=Cs(()=>p("i",{class:"fas fa-chevron-up"},null,-1)),Nr=[Hr],zr={class:"row-details"},Qr=A({__name:"TableRow",props:{data:{},selected:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},expandSide:{default:"right"}},emits:["click"],setup(e,{emit:t}){const a=t,s=is(),l=y(()=>{var n;const r=s["row-details"];if(r){const i=(n=r()[0])==null?void 0:n.children;if(i)return i.length>0}return!1}),c=()=>{a("click",e.data)};return(r,n)=>{const i=Ct;return _(),$("div",{class:B(["row",{expanded:r.expanded}])},[p("div",{class:B(["row-data",{active:r.selected,expandable:o(l),"has-data":!!r.data}]),onClick:c},[r.data&&o(l)&&r.expandSide==="left"?(_(),$("div",Or,Wr)):q("",!0),X(r.$slots,"row",{},void 0,!0),r.data&&o(l)&&r.expandSide!=="left"?(_(),$("div",Kr,Nr)):q("",!0)],2),r.data?(_(),S(i,{key:0,expanded:r.expanded},{default:w(()=>[p("div",zr,[X(r.$slots,"row-details",{},void 0,!0)])]),_:3},8,["expanded"])):q("",!0)],2)}}}),jr=L(Qr,[["__scopeId","data-v-7dbdbcc8"]]),Gr={class:"table"},Xr=["onClick"],Yr={key:1,class:"no-data"},Zr=A({__name:"Table",props:{columns:{default:()=>[]},rows:{default:()=>[]},rowsMin:{default:null},selectedRow:{default:null},expanded:{default:()=>[]},expandSide:{default:"right"},sorting:{default:()=>({order:"asc"})},icon:{}},emits:["selected","sortColumn"],setup(e,{emit:t}){const a=t,s=y(()=>{if(e.rowsMin===null)return[];const d=Math.max(0,e.rowsMin-e.rows.length);return new Array(d)}),l=y(()=>e.columns.map(d=>typeof d=="string"?{id:d,label:d}:d)),c=d=>{d&&a("selected",d)},r=d=>{const v=d+1;return!!(e.rows[d+1]&&e.rows.findIndex(f=>f===e.selectedRow)===v)},n=d=>e.sorting.column===d.id&&e.sorting.order==="asc",i=d=>e.sorting.column===d.id&&e.sorting.order==="desc",u=d=>{if(!d.sort)return;const v=d.id===e.sorting.column&&e.sorting.order==="asc"?"desc":"asc";a("sortColumn",d.id,v)};return(d,v)=>{const h=jr;return _(),$("div",Gr,[d.columns.length>0?(_(),S(h,{key:0,class:B({"selected-below":r(-1)})},{row:w(()=>[(_(!0),$(Z,null,re(o(l),g=>(_(),$("div",{key:g.id,class:B(["column-header",{sortable:g.sort,sorting:g.sort&&d.sorting.column===g.id,[g.align||""]:!!g.align}]),onClick:f=>u(g)},[p("span",null,R(g.label),1),g.sort?(_(),$("i",{key:0,class:B(["sorting-arrow fa fa-caret-right",{asc:n(g),desc:i(g)}])},null,2)):q("",!0)],10,Xr))),128))]),_:1},8,["class"])):q("",!0),(_(!0),$(Z,null,re(d.rows,(g,f)=>(_(),S(h,{key:g,data:g,class:B({"selected-below":r(f)}),selected:d.selectedRow===g,expanded:d.expanded.includes(g),"expand-side":d.expandSide,onClick:c},{row:w(()=>[X(d.$slots,"row",{item:g},void 0,!0)]),"row-details":w(()=>[X(d.$slots,"row-details",{item:g},void 0,!0)]),_:2},1032,["data","class","selected","expanded","expand-side"]))),128)),(_(!0),$(Z,null,re(o(s),g=>(_(),S(h,{key:g}))),128)),!d.rowsMin&&(!d.rows||d.rows.length===0)?(_(),$("div",Yr,[X(d.$slots,"no-data",{},()=>[x("No data")],!0)])):q("",!0),d.$slots["row-aggregation"]&&d.rows.length>0?(_(),S(h,{key:2,class:"aggregation"},{row:w(()=>[X(d.$slots,"row-aggregation",{},void 0,!0)]),_:3})):q("",!0)])}}}),ee=L(Zr,[["__scopeId","data-v-07bfbe17"]]),Jr=e=>(z("data-v-6e93c6b1"),e=e(),Q(),e),ei={class:"code"},ti=["href"],ai=["href"],si=["href"],oi=Jr(()=>p("div",{class:"notices"},[x(" TradingView Lightweight Charts™ Copyright (с) 2023 TradingView, Inc. "),p("span",null,[p("a",{href:"https://www.tradingview.com/",target:"_blank"}," https://www.tradingview.com ")])],-1)),ni=A({__name:"Code.page",setup(e){const a=[{name:"veFunder",contracts:[{contract:fs,description:"Gauge Factory"},{contract:gs,description:"Gauge Controller"}]}],s=[{name:"Llama Airforce",url:"https://github.com/Llama-Airforce/Llama-Airforce",description:"This website's front-end, excluding the Union"},{name:"Phil's CurveMonitor",url:"https://github.com/phil-svg/CurveMonitor",description:"Phil's code for CurveMonitor"},{name:"Subgraphs",url:"https://github.com/convex-community/convex-subgraph",description:"The Graph subgraphs related to Curve, Convex, Votium and more"},{name:"Tickets",url:"https://github.com/orgs/curve-data-analytics/projects",description:"Tickets"}],l=[{name:"Curve Prices API",url:"https://prices.curve.fi/feeds-docs",description:"Curve utility API co-developed by CurveMonitor"},{name:"LAF / Curve API (Legacy)",url:"https://api-py.llama.airforce/curve/v1/docs",description:"Custom analytics API"}],c=r=>{switch(r.network){case"arbitrum":return r.gnosis?`https://app.safe.global/home?safe=arb1:${r.contract}`:`https://arbiscan.io/address/${r.contract}`;case"ethereum":default:return r.gnosis?`https://app.safe.global/home?safe=eth:${r.contract}`:`https://etherscan.io/address/${r.contract}`}};return(r,n)=>{const i=ee,u=M;return _(),$("div",ei,[m(u,{title:"Repositories"},{default:w(()=>[m(i,{class:"repositories-table",rows:s,columns:["Repository","Description"],title:"Yolo"},{row:w(d=>[p("div",null,[p("a",{href:d.item.url,target:"_blank"},R(d.item.name),9,ti)]),p("div",null,R(d.item.description),1)]),_:1})]),_:1}),m(u,{title:"APIs"},{default:w(()=>[m(i,{class:"apis-table","columns-data":"apis-columns-data",rows:l,columns:["API","Description"]},{row:w(d=>[p("div",null,[p("a",{href:d.item.url,target:"_blank"},R(d.item.name),9,ai)]),p("div",null,R(d.item.description),1)]),_:1})]),_:1}),(_(),$(Z,null,re(a,(d,v)=>m(u,{key:v,title:d.name},{default:w(()=>[m(i,{class:"contracts-table","columns-header":"1fr","columns-data":"contracts-columns-data",rows:d.contracts,columns:["Contract","Description"]},{row:w(h=>[p("div",null,[p("a",{href:c(h.item),target:"_blank"},R(h.item.contract),9,si)]),p("div",null,R(h.item.description),1)]),_:2},1032,["rows"])]),_:2},1032,["title"])),64)),m(u,null,{default:w(()=>[oi]),_:1})])}}}),li=L(ni,[["__scopeId","data-v-6e93c6b1"]]);function ri(){const e=Sa(),t=[{path:"/code",component:li},...e.routes.flatMap(s=>s),{path:"/:pathMatch(.*)*",name:"NotFound",component:Ur}];return Wo({history:Ko(),routes:t})}const ii="/assets/llama-cloud-transparant-BquaG1Iu.png",ci={key:0,class:"value"},ui={key:1,class:"value"},di=["innerHTML"],pi={key:0,class:"value"},mi={key:1,class:"value"},vi=["innerHTML"],hi={class:"labels"},_i={class:"label"},fi={class:"label-second"},gi=A({__name:"KPI",props:{label:{default:""},labelSecond:{default:""},tooltip:{default:""},tooltipType:{default:"icon"},value:{},hasValue:{type:Boolean,default:!1}},setup(e){return(t,a)=>{const s=Kt;return _(),$("div",{class:B(["kpi",{disabled:!t.hasValue}])},[p("div",{class:B(["value-container",{underline:t.tooltip&&t.tooltipType==="underline"}])},[X(t.$slots,"default",{},()=>[t.tooltip&&t.tooltipType==="underline"?(_(),S(s,{key:0},{trigger:w(()=>[t.hasValue?(_(),$("span",ci,R(t.value),1)):(_(),$("span",ui," ? "))]),default:w(()=>[X(t.$slots,"tooltip",{},()=>[p("span",{innerHTML:t.tooltip},null,8,di)],!0)]),_:3})):(_(),$(Z,{key:1},[t.hasValue?(_(),$("span",pi,R(t.value),1)):(_(),$("span",mi," ? "))],64))],!0),t.tooltip&&t.tooltipType==="icon"?(_(),S(s,{key:0},{default:w(()=>[p("span",{innerHTML:t.tooltip},null,8,vi)]),_:1})):q("",!0)],2),p("div",hi,[X(t.$slots,"label",{},()=>[p("div",_i,R(t.label),1)],!0),X(t.$slots,"label-second",{},()=>[p("div",fi,R(t.labelSecond),1)],!0)])],2)}}}),ve=L(gi,[["__scopeId","data-v-ce995eb5"]]),yi={key:0,class:"async-value"},bi="|/-\\",j=A({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1},inline:{type:Boolean,default:!0}},setup(e){let t=0,a=0;const s=V("|"),l=y(()=>e.value?K(e.value,typeof e.precision=="function"?e.precision(e.value):e.precision,e.type??""):e.value===0&&e.showZero?"0":e.value===null||e.value===void 0?s.value:"?"),c=y(()=>e.precision===1/0?"":!e.value||!e.type||!isFinite(e.value)?e.showUnit&&e.type?E(0,e.type):"":E(e.value,e.type));return G(()=>e.value,r=>{if(clearInterval(a),t=0,r)return;const n=()=>{t=(t+1)%4,s.value=bi[t]};a=window.setInterval(n,250)},{immediate:!0}),(r,n)=>r.inline?(_(),$(Z,{key:1},[x(R(r.showSymbol&&r.type==="dollar"?"$":"")+R(o(l))+R(r.showUnit?o(c):""),1)],64)):(_(),$("div",yi,R(r.showSymbol&&r.type==="dollar"?"$":"")+R(o(l))+R(r.showUnit?o(c):""),1))}}),wi=["crvusd","lending","pools","router","dao"];function ke(e){const[t,a]=e.split("T"),[s,l,c]=t.split("-").map(Number),[r,n,i]=a.split(":").map(Number);return Date.UTC(s,l-1,c,r,n,i)/1e3}const Ci=["ethereum","arbitrum","optimism","fantom","avalanche","xdai","matic","harmony","moonbeam","base","polygon","fraxtal"],$i="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_103_26)'%3e%3cpath%20d='M11.9974%200L11.8364%200.546928V16.4161L11.9974%2016.5767L19.3636%2012.2225L11.9974%200Z'%20fill='%23343434'/%3e%3cpath%20d='M11.9977%200L4.63135%2012.2225L11.9977%2016.5767V8.87428V0Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9975%2017.9713L11.9067%2018.082V23.7348L11.9975%2023.9997L19.3681%2013.6194L11.9975%2017.9713Z'%20fill='%233C3C3B'/%3e%3cpath%20d='M11.9977%2023.9997V17.9713L4.63135%2013.6194L11.9977%2023.9997Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9976%2016.5767L19.3637%2012.2225L11.9976%208.87427V16.5767Z'%20fill='%23141414'/%3e%3cpath%20d='M4.63135%2012.2225L11.9977%2016.5767V8.87427L4.63135%2012.2225Z'%20fill='%23393939'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_103_26'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ki="data:image/svg+xml,%3csvg%20width='1503'%20height='1504'%20viewBox='0%200%201503%201504'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='287'%20y='258'%20width='928'%20height='844'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M1502.5%20752C1502.5%201166.77%201166.27%201503%20751.5%201503C336.734%201503%200.5%201166.77%200.5%20752C0.5%20337.234%20336.734%201%20751.5%201C1166.27%201%201502.5%20337.234%201502.5%20752ZM538.688%201050.86H392.94C362.314%201050.86%20347.186%201050.86%20337.962%201044.96C327.999%201038.5%20321.911%201027.8%20321.173%201015.99C320.619%201005.11%20328.184%20991.822%20343.312%20965.255L703.182%20330.935C718.495%20303.999%20726.243%20290.531%20736.021%20285.55C746.537%20280.2%20759.083%20280.2%20769.599%20285.55C779.377%20290.531%20787.126%20303.999%20802.438%20330.935L876.42%20460.079L876.797%20460.738C893.336%20489.635%20901.723%20504.289%20905.385%20519.669C909.443%20536.458%20909.443%20554.169%20905.385%20570.958C901.695%20586.455%20893.393%20601.215%20876.604%20630.549L687.573%20964.702L687.084%20965.558C670.436%20994.693%20661.999%201009.46%20650.306%201020.6C637.576%201032.78%20622.263%201041.63%20605.474%201046.62C590.161%201050.86%20573.004%201050.86%20538.688%201050.86ZM906.75%201050.86H1115.59C1146.4%201050.86%201161.9%201050.86%201171.13%201044.78C1181.09%201038.32%201187.36%201027.43%201187.92%201015.63C1188.45%201005.1%201181.05%20992.33%201166.55%20967.307C1166.05%20966.455%201165.55%20965.588%201165.04%20964.706L1060.43%20785.75L1059.24%20783.735C1044.54%20758.877%201037.12%20746.324%201027.59%20741.472C1017.08%20736.121%201004.71%20736.121%20994.199%20741.472C984.605%20746.453%20976.857%20759.552%20961.544%20785.934L857.306%20964.891L856.949%20965.507C841.69%20991.847%20834.064%201005.01%20834.614%201015.81C835.352%201027.62%20841.44%201038.5%20851.402%201044.96C860.443%201050.86%20875.94%201050.86%20906.75%201050.86Z'%20fill='%23E84142'/%3e%3c/svg%3e",Si="/assets/arbitrum-Z8VMulXH.png",Ai="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23fff;fill-rule:evenodd;}.cls-2{fill:%2313b5ec;}.cls-3{mask:url(%23mask);}%3c/style%3e%3cmask%20id='mask'%20x='10'%20y='6'%20width='93.1'%20height='20'%20maskUnits='userSpaceOnUse'%3e%3cg%20id='a'%3e%3cpath%20class='cls-1'%20d='M10,6h93.1V26H10Z'/%3e%3c/g%3e%3c/mask%3e%3c/defs%3e%3ctitle%3efa%3c/title%3e%3cg%20id='Layer_2'%20data-name='Layer%202'%3e%3cg%20id='Layer_1-2'%20data-name='Layer%201'%3e%3ccircle%20class='cls-2'%20cx='16'%20cy='16'%20r='16'/%3e%3cg%20class='cls-3'%3e%3cpath%20class='cls-1'%20d='M17.2,12.9l3.6-2.1V15Zm3.6,9L16,24.7l-4.8-2.8V17L16,19.8,20.8,17ZM11.2,10.8l3.6,2.1L11.2,15Zm5.4,3.1L20.2,16l-3.6,2.1Zm-1.2,4.2L11.8,16l3.6-2.1Zm4.8-8.3L16,12.2,11.8,9.8,16,7.3ZM10,9.4V22.5l6,3.4,6-3.4V9.4L16,6Z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ti="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoESURBVHgB7Z3PTxzZEcerXoNBOc0eN5KhfYgUrY2MN9iyLBvP3pLTQpRgJ5fFh0iwewD/BYZbcjIrJVmUHAyXxGZXMpyinDzAKrEUogySiXzbBuWeueyKX91vq970DDP983VPT9NgPpLFuH/3d6rr1at6rwehINyeGjN7obeMgKYUOAgSTAQw3dWmZ/Ma/5MAFv9FKbcl2lX7WFj/+POXVSgACKeEEtLpGwMD7tNFlGlRCbKBBa+CDWu2dCqnJXSuwpZnx0rO4aUZKbHsipkHFqBcOnTE8uvF5xbkRC7C3p36RRnReJKjmIGQJVdAOsubi18uQZfpqrBFETQAS0pnvpsCd0XYjAS1VOOEqoFqRyp/XEKQ9BeHIT2WtOXjzT+trELGZCqs8qEHfU/o42yiHUFWQcp1CUb1iB7XpL7wzm9+PWz0HJsUHZQliutJv1CJsHTk4HyWPjgzYe9NT4xRqPQMNFt35e+o5TZ+cLBUWVitQYaUpx6aNouL8mO6wTHN3TJ1Dx0Lm9BKa2Qen4v+/YWsxQyjITKi5Gs047Zn6zUuHTzu9Po6EpYv2hHOS7qaOD+Xu6BB3Jt6OKkpsHUo8aNOXENqYdmv9fTYLyH6IgshqJd70w9m6cZnIPrareNjZzxtByOVsNzqCzRY1FB/yj70SOKjPIPyJKinDZw5QPwkckMhJzf+sLIMCUks7OhnE5+Ag0sRm3CXcn7zixcLcAZw3cNTiGp0U4ibSFj38f9PxCb0+Bj0+PylEIkQXZT1onwFUa4hobjawronZ1GDv1mUVXHp8KMi+dIkcHRjH/Q9iwrPHGrQvl58XgENtISN/UYlLlMDNXtWRW1ldOrBAqkyE7K6RtHCDZ12Q0vY0ekH30CYqGSpG39cuQHnCIoaXkX03izRd3AjzogE6EAWGbFuePTTiSdwTuB7iewSkxY6T6YBGuxuvakMjgxRjzXshFgevHUVdv+1sw5nGGUgEudCN5A4v7H4fA400BKWOe/iZikqE+oKuJX0LlMHphNA+MnnzqJbSCtqkEYNAi2We1Zg9/7t/ZGhtf9tvWnzJ+fNclOLypGSbfzz8sjQ9t7WG8u7PtBiqbvK6T/zEoVYt+kA3vXnxXI7EtUNPwXKZ0G7+iy23sWDSfe/JQNh7DxabhaiuotKAyMf7O5t/bett+mzWDet1sq5s9wMRVUgCt89tlmsWwWYAj/nxnKzFtWlNPDh1e29f++8bSzwWCyGdeWYM2+5XRK1jtGundG6M1ldXKpPWe6Vuz9atl6/3W9dUXTL7SSk4tYfYqoOPByKIoT1RoTQtFjbkXpFt4guXVEtt5Pgn++V8sufgwYC7KaGTYs1b137K8RXWK2NxRfjURsUzXKz6FHtbe28Hrh5rYxxtTLEH+9u7fyOPyqLLdf9ZvROfA1UHgYNimK5WXZTZdT9nFC6O/WwzB+UxV7+8OokCvhpzE7W5uLKo9YF/IVcvnn15Q/JtxQtWuikoRq49cGr938y9PfWe2LfqWO1CHKXrLZS97EGfAwxBFkrtZQznGIrWrTQcetPqdDegB6VjtVKxPv8VwlL4sSOfzoCo+K9CDgZpFGYUCyrkIoN5s5nPx9s3aanf597V5G5WNaSIwlx59NfsqhxjVbVW46w/cngUxc36zi1x+5pc31uhBBXKC3Bt72mMCSaEIeEXe8igU6Q+zg1cbsT/PtH+KCEbYjBNmCYkjPxbkCNBvTgAIZZee7idq1HhXDddygnYFipbzcWNmBnHUR065ibuF3tpga5SIEalWhhigjL65Sui9tlUZl05XyEQSE0OgagRk77lumMdumauDmIyviFdaSOIZaE1BooLEzvEqnhxF0yFzcnUXmsrM94qCNlxu9JwoKOsAj3vYscEBXQJzNx8xJVcSzX/IfXapNKODr9QGpsGDhuKWbESBChA3pHpx7Ogb96cQLKOfU3L1E54fTFiysBx/lGZ2e9kTBqQ6fsXaaZmGilI8vNUdTALrydwIi0haWU2Iy3jq4sWOrlKltIL24YWYuKsBQ0yQOjnigPAiE+4HUpOfuXZr0LKT87Gzm2K5jsxM1YVB7kx5M7vIu5ep3gWDV9i1UnxZkQMSZTWS5PDAlAW9yIfKpdz06ZkAQejhowxpe/pCTWCiyso2+xTKk3ZIACWy75XE5aWKABP26HjgitRmj43MgktcHXIqXuk2RJkONsIEFlJ1qnNZXpZHuwcHRqYil2goOfBWoxH4et5Cw613/cWYJmywl5uvt6kklzgdFCgsx/+2Q6aUKzpylrPBvSAWM1apR2bHgXhIQ1FpZnjqTJKkWKmyVt4iYQtePzphGVkXIe3VkjzyAFWU45UlOchHjK7iE0zgXXRXhw34PwilzRchazdfh48rDvKfUuJyEF0pbjmCToDaGjOajqJvbpJk7GiyWaFdgQtTE7stMvO8HsxVDEsXMD+QP1vv4Pnb86RAnMJRydm6pPwhOULMfJgHNriesVtRVuHKVjL3+9+FUFYlAzZr7rm+TaX8KeZBA1cpHvKWHvT0+8lIB6AzZ0oFiQjldFR+5Si2o1FwOaVGy7rvkOmEhxo0T1oMopyNP2HcqlCqfeaDqihIYcVFXk+GPoQw0XRUhjPeocNq6jAdkJSxeqCpTI1W9sW4X6R2l0InziJhCVKakvErGMqtjvhu6GezVamRJ9JDirzbMYAlehmPh6aAlFzZ1GNbtpQCkyVXmi3EJ//36tyKISVfKvas5bs0vLPgiKi7LcgovKGbFmt74prOg/7Dj+6zJmkUVlWge1NIV1ByNU4IJUcHjX2si2ZbdkmlzoBQoK5doSPr7op+CNWFHxlXF8+dgLq01OUBknMF6/sNoEhLxWILCCcGG1+oQl6wOFrRcJtbPv7yzeSKCV0JoXxbVcOEw3dundwOL3IYatDBW2HtfKR3BBINxgRaU1I18Esbe183Zw5Np71MTdhgtOoIr05uLKb6M2iS1/i/6DOc2Rhe8KlhpLEUOssOwShFQtnwUXqCybzobaeWf3LXE8sqRbA5WLjvY7txjtkTD8Wr13uTFzJI4nKVBqv8WI4cZsYGRolyou2ZVxzgA8wodi+0RVlkTCMntbb6oDN69uUy2Lp4j2w/mmRpb6s6SiMglqe+1ovpj3LNPRm0VTC8ukHipZdCixEjYiR/sQkAExb7A8W1Dwz7H7qb78vJUshuacMpZTb6QqkAGJG68wuFG7MjK0RiEZdYGLXfTzUbfSX238/qu3kBGZWWwrdd/Lo7WLLTAXTzn3nJWVttIVYRsU1T10U9AGXRW2QX2EtzOZYuR4puQhaINchG1w8vMkzkxebqKbv2kTRa7CtuL5oR0W2YRsqFHJZBWOYTtvMVs5NWG9KKHRGeYXU5z8GKX6vS71211wklWruf/qk0WQPpOIYEjrSIpqUX4p5HsIBnqmjYFrhwAAAABJRU5ErkJggg==",Li="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20180%20179.51'%3e%3cdefs%3e%3clinearGradient%20id='linear-gradient'%20x1='202.93'%20y1='544.7'%20x2='203.8'%20y2='545.57'%20gradientTransform='matrix(180,%200,%200,%20-179.51,%20-36456,%2098005.23)'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2300aee9'/%3e%3cstop%20offset='1'%20stop-color='%2369fabd'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle%3eharmony-one-logo%3c/title%3e%3cpath%20id='Shape'%20d='M201.17,60a38.81,38.81,0,0,0-38.84,38.71v42.92c-4,.27-8.09.44-12.33,0.44s-8.31.17-12.33,0.41V98.71a38.84,38.84,0,0,0-77.67,0V201.29a38.84,38.84,0,0,0,77.67,0V158.37c4-.27,8.09-0.44,12.33-0.44s8.31-.17,12.33-0.41v43.77a38.84,38.84,0,0,0,77.67,0V98.71A38.81,38.81,0,0,0,201.17,60ZM98.83,75.86a22.91,22.91,0,0,1,22.92,22.85v45.45a130.64,130.64,0,0,0-33,9.33,60,60,0,0,0-12.8,7.64V98.71A22.91,22.91,0,0,1,98.83,75.86Zm22.92,125.43a22.92,22.92,0,1,1-45.84,0V191c0-9.09,7.2-17.7,19.27-23.06a113,113,0,0,1,26.57-7.77v41.12Zm79.42,22.85a22.91,22.91,0,0,1-22.92-22.85V155.84a130.64,130.64,0,0,0,33-9.33,60,60,0,0,0,12.8-7.64v62.42A22.91,22.91,0,0,1,201.17,224.14ZM204.82,132a113,113,0,0,1-26.57,7.77V98.71a22.92,22.92,0,1,1,45.84,0V109C224.09,118.05,216.89,126.66,204.82,132Z'%20transform='translate(-60%20-60)'%20style='fill:url(%23linear-gradient)'/%3e%3c/svg%3e",Ii="/assets/moonbeam-CHDPiRRO.png",Ri="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2038.4%2033.5'%20style='enable-background:new%200%200%2038.4%2033.5;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%238247E5;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M29,10.2c-0.7-0.4-1.6-0.4-2.4,0L21,13.5l-3.8,2.1l-5.5,3.3c-0.7,0.4-1.6,0.4-2.4,0L5,16.3%20c-0.7-0.4-1.2-1.2-1.2-2.1v-5c0-0.8,0.4-1.6,1.2-2.1l4.3-2.5c0.7-0.4,1.6-0.4,2.4,0L16,7.2c0.7,0.4,1.2,1.2,1.2,2.1v3.3l3.8-2.2V7%20c0-0.8-0.4-1.6-1.2-2.1l-8-4.7c-0.7-0.4-1.6-0.4-2.4,0L1.2,5C0.4,5.4,0,6.2,0,7v9.4c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l5.5-3.2l3.8-2.2l5.5-3.2c0.7-0.4,1.6-0.4,2.4,0l4.3,2.5c0.7,0.4,1.2,1.2,1.2,2.1v5c0,0.8-0.4,1.6-1.2,2.1%20L29,28.8c-0.7,0.4-1.6,0.4-2.4,0l-4.3-2.5c-0.7-0.4-1.2-1.2-1.2-2.1V21l-3.8,2.2v3.3c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l8.1-4.7c0.7-0.4,1.2-1.2,1.2-2.1V17c0-0.8-0.4-1.6-1.2-2.1L29,10.2z'/%3e%3c/g%3e%3c/svg%3e",Vi="/assets/optimism-CcABTbCu.png",Pi="/assets/base-AohAhS4D.webp",Fi="/assets/polygon-GPEdhIuq.png",qi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABI1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAD////8/PzHx8fb29swMDDz8/P19fWzs7NHR0fm5ua2trYdHR3R0dHY2NhdXV3t7e3p6end3d2Ojo47Ozv5+fnNzc2/v78iIiJbW1tzc3P39/fk5ORZWVkzMzMVFRWtra2lpaXh4eHT09OGhoZOTk4/Pz84ODjw8PCioqKfn5+SkpJ5eXm7u7t6enpxcXFoaGihoaFjY2Po6OjLy8soKCgLCwuAgIDCwsKXl5dsbGzr6+vV1dVQUFBM4z+pAAAAI3RSTlMAzvr08ejf2dW3lJGNTUlGIA0KBiTIxLqsppZxX1tTLiwnGBXchpcAAAbqSURBVHjavJdpW9pQEIXDpsiireC+tDongQCypBEiKCggbohKta1Ln/r/f0UTQgEJIeQS+n6FJ+fcyZ05E46FSDS8FVxf9fu8bsDt9flX14Nb4WiE+x982gmseDASz0pg5xM3S5YXA/OwYD6wuMzNhEh4w4seihw7KqZr9cfHei1dPIrJCnp4N8LOv429kA9dbhrJ/HGVhqge55ONG3TxhfYclV9agE4i25RoDFIzm4DOwpJj8rsudBCFiwxZkrkQRHRw7Toiv6jL87lWiSak1MrxuoXFqeW/rumlL0pkC6mYgMba16nkP4fcUBGTV2Sbq6QIFXfo8xR3bw4q5XSBmCiky1CZW2IdO5tQ4YVLYuZS4KGyyTSavvihUrmjqbirQMX/xb7+tkc7frJEU1JK8gA823b1g1D50SYHaP+AStDe7e9MPiFOjhAXOpPRRjfsuwAot+QYtwoA1/7Eka9lrvhADvIgakk94bIQ1bpflshRJBnAXHSi82v65ylymNS55mCCGuxr9T+8Jse5PtTewr7l/Xdp+nG2q/ZTp2nSDJoDl1UvLGj1Zzy/AJ0jsxqca91oPX/kFM3GAKVkq4m0DUCUaFYGSBIBbI/JHw+gPNDsDNCDAnhMk2lZy79bmqUButWy0SydtfwXyHEDxj9tmuw/Wv7FZ20grmXj0sgJMAfwbZq1AWrzwNyoaRACkKTZG6AkgNCI/dsNHJT+h4HSAeA2butrAD/d/vc9NpkBuuOBNcP3z5QdUKjJ+Acfa1UtSzX8zeQCyuz793NdxAcOXsZu62XANfT9CSDNnvU5GCiWyJw0gN3hAogFYuRUxghiY55XEIdKsDRNCx5/gxGLrSI5NI0WgMSVw/pA9pnMuEp82Az2ABQd1weaZEoRwN7gEOQlxvc/qC8L6fusiB4J876S+IFxGPEBOVZ9Q+v9avYtjClrDvBFOJ0wgBaxcDmgn/1FXd4r6FI23y5bAMKczgYgsqXAzwH9zMAV6/Vl7aRP9WMiiMBGdxHysk7hZ7GvXxqa9kYKhnnsXe7FwAWxkFGM59dpWBu46AVCAEhkiImKiT69WRvIJIAApzEPZImNNxN9OrY2QFlgXtP/pE8MNuplgH811u+atzbQBKB9rO4AkIiVq3zrlIy8T1ABCcCOfgVuyGkuJjBAN/olWAEaLEe/a73lT84s1kPwfQwGGsCKOoc9DEl88irz0OAr99/JyJMCnVi8z6hM9kS4KIA82eLlEIPkTmiIs/PeJKQx5AFEO0FwTDY4EzAE/xr/+I9Y75f3sUneiYMtQKnayb8DGKmcGvWtF/SqAmxxQUBmzf8+305H6StPNBYZCHLrQGz6/ae/T8T7+paXOwasc6vAEfP5+/Apo37MKmGOgFXODxTZzl8Wy+jze7j+OLBcc4uAn/MBaQZ9MflUpUz7PgEd5dqgnyIr0oCP8wI1+/X/8+/plzl0EBj0qQZ4OTdQt3F+Q/5mBKg04tr7t6lPdcDNAXi0c35j/rdryRdi0adHAH9ZNdechKEoCO/ATcj7lRBEDAaIQMFISEq0SRHE/e/CH0pHL7f5PCd0AzNt7z2PmREB4/uP0lNzqBpu/P4ioF9gw3+afd/0fTGCmPD1C3QIAT+Yf9vn05j9NKg7E74Ooa6h7f8nkkPa2206q9jwdQ3/U4g6p8vzF7QkM74KEZfieT3A18jD+FyKuRktYvcvmzrxw2bE7bjTit7/dZTBLMDndswDSa9k//uIKEOrcPDkgQRHsvmmbP9rpMH20XyLaDI0kuFQuiu+bn55PQ8twQ/ahtfXUBofy4+94ikkwKiO+7hO+93BYLZq70xvr7E8vphEhMfkmouTFhOtZkQgvSa0VjMtp0RgGdEnlv2k9uqB1nKq9dxGQP3/wSOuaD2XQAEE1DDC/r/JzdASKCTRIIFuHN+lL0mikUiFBCrvJfiVo19CuCmT6dKhHhWiAF8bgfmRTMdC5f5UbJpqGZo/nSKvhEqWaheCej6X4MTQf0GqZbF61NQyNp7kt/lkPDXgo1jNcv3yzxLaqprmD5br2bCY193zHxgWbNlIlPfjs2XDplW28eGDaQW2HQpDQ9r/wbYzGZeNQzWURFLSP8i4NFq3k8/qb/gV1T+0bu3mdVYrqnIvIww2rx32/f3ZjWMItu/tAQY/AQ4wcITDT4AjHBxi8RPgEAvHePwEOMbDQSY/AQ4ycZTLTwCjXMYwm58Ah9k4zucnwHE+DjT6CXCgkSOdfgIQ6XSHWl++mrdjGwBgGIZhR/b/Xzp06B4gEP2EF/G8TY7gR6161tuHzX3a3cftfd7fA4eeeADIpWc+PXTqqReA3XruB4BHgHwC6BVgvwB8Bui3gN83+P8FeDI7nekABC8AAAAASUVORK5CYII=";function Ga(e){return{ethereum:$i,arbitrum:Si,optimism:Vi,fantom:Ai,avalanche:ki,xdai:Ti,matic:Ri,harmony:Li,moonbeam:Ii,base:Pi,polygon:Fi,fraxtal:qi,all:""}[e]}const Di=e=>e.data.map(t=>t.name).filter(t=>Ci.includes(t)),Bi=e=>({chain:e.chain,total:{tvl:e.total.total_tvl,tradingVolume24h:e.total.trading_volume_24h,tradingFee24h:e.total.trading_fee_24h,liquidityVolume24h:e.total.liquidity_volume_24h,liquidityFee24h:e.total.liquidity_fee_24h}}),Mi=e=>e.data.flatMap(t=>t.transactions.map(a=>({chain:t.chain,timestamp:ke(a.timestamp),type:a.type,transactions:a.transactions}))),xi=e=>e.data.flatMap(t=>t.users.map(a=>({chain:t.chain,timestamp:ke(a.timestamp),type:a.type,users:a.users}))),qt="https://prices.curve.fi";class Ui extends $e{async getSupportedChains(){const t=await this.fetch(`${qt}/v1/chains/`);return Di(t)}async getChainInfo(t){const a=await this.fetch(`${qt}/v1/chains/${t}?page=1&per_page=1`);return Bi(a)}async getTxs(){const t=await this.fetch(`${qt}/v1/chains/activity/transactions`);return Mi(t)}async getUsers(){const t=await this.fetch(`${qt}/v1/chains/activity/users`);return xi(t)}}const Ht=new Ui;function Aa(){return{initialData:[],initialDataUpdatedAt:0}}function Oi(){return H({queryKey:["chains-supported"],queryFn:()=>Ht.getSupportedChains(),...Aa()})}function $s(e){return H({queryKey:["chain-info",e],queryFn:({queryKey:[,t]})=>Ht.getChainInfo(t),enabled:y(()=>!!e.value)})}function Ei(){return H({queryKey:["chains-txs"],queryFn:()=>Ht.getTxs(),...Aa()})}function Wi(){return H({queryKey:["chains-users"],queryFn:()=>Ht.getUsers(),...Aa()})}const Ki=e=>({name:e.collateral_token.symbol,address:e.address.toLocaleLowerCase(),factory:e.factory_address.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),rate:e.rate,borrowed:e.total_debt,borrowable:e.borrowable,collateral:e.collateral_amount,collateralUsd:e.collateral_amount_usd,loans:e.n_loans,collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},stablecoin_token:{symbol:e.stablecoin_token.symbol,address:e.stablecoin_token.address.toLocaleLowerCase()},fees:{pending:e.pending_fees,collected:e.collected_fees}}),Hi=e=>({timestamp:new Date(e.dt).getTime()/1e3,rate:e.rate,nLoans:e.n_loans,minted:e.minted,redeemed:e.redeemed,totalCollateral:e.total_collateral,totalCollateralUsd:e.total_collateral_usd,totalStablecoin:e.total_stablecoin,totalDebt:e.total_debt,priceAMM:e.amm_price,priceOracle:e.price_oracle,borrowable:e.borrowable,discountLiquidation:e.liquidation_discount,discountLoan:e.loan_discount}),Ni=e=>({address:e.address.toLocaleLowerCase(),pool:e.pool,pool_address:e.pool_address.toLocaleLowerCase(),pair:e.pair.map(t=>({symbol:t.symbol,address:t.address.toLocaleLowerCase()})),active:e.active,total_debt:e.total_debt,total_profit:e.total_profit}),zi=e=>({timestamp:ke(e.timestamp),market:e.market,supply:e.supply,borrowable:e.borrowable}),Xa="https://api-py.llama.airforce/curve",Dt="https://prices.curve.fi";class Qi extends $e{async getMarkets(t,a){return(await this.fetch(`${Dt}/v1/crvusd/markets/${t}?fetch_on_chain=true&page=${a}&per_page=10`)).data.map(Ki)}async getSnapshots(t,a){return(await this.fetch(`${Dt}/v1/crvusd/markets/${t}/${a}/snapshots?fetch_on_chain=true&agg=day`)).data.map(Hi)}async getCrvUsdPriceHistogram(){return this.fetch(`${Xa}/v1/crvusd/prices/hist`)}async getCrvUsdSupply(t){return(await this.fetch(`${Dt}/v1/crvusd/markets/${t}/supply`)).data.map(zi)}async getKeepers(t){return(await this.fetch(`${Dt}/v1/crvusd/pegkeepers/${t}`)).keepers.map(Ni)}async getYield(){return this.fetch(`${Xa}/v1/crvusd/yield`).then(t=>t.yields)}}const ji=e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}),Gi="https://prices.curve.fi";class ks extends $e{async getOHLC(t,a,s,l){const r=Math.floor(new Date().getTime()/1e3),n=Math.floor(r-72e5),i=`${Gi}/v1/ohlc/${t}/${Jt(a)}?main_token=${Jt(s)}&reference_token=${Jt(l)}&agg_number=1&agg_units=day&start=${n}&end=${r}`;return(await this.fetch(i)).data.map(ji)}}const At=new Qi,Xi=new ks;function Yi(e){return y(()=>{var t;return(t=e.value)==null?void 0:t.address})}function Nt(){return{initialData:[],initialDataUpdatedAt:0}}function Zi(e,t){return{enabled:y(()=>!!e.value&&!0)}}function Ji(){return H({queryKey:["crvusd-supply"],queryFn:()=>At.getCrvUsdSupply("ethereum"),...Nt()})}function ec(){return H({queryKey:["crvusd-price-deviation"],queryFn:()=>At.getCrvUsdPriceHistogram(),initialData:{x:[],y:[]},initialDataUpdatedAt:0})}function zt(e){return H({queryKey:["crvusd-market-snapshots",Yi(e)],queryFn:({queryKey:[,t]})=>At.getSnapshots("ethereum",t),...Zi(e),...Nt()})}function tc(e){return H({queryKey:["crvusd-keepers-prices",y(()=>e.value.map(t=>t.pool_address))],queryFn:async()=>{const t=e.value.map(async l=>{const c=l.pair.find(i=>i.symbol!=="crvUSD"),r=l.pair.find(i=>i.symbol==="crvUSD");return!c||!r?[]:(await Xi.getOHLC("ethereum",l.pool_address,c.address,r.address)).map(i=>({time:i.time,price:(i.high+i.low)/2,coin:c.symbol}))}),s=(await Promise.all(t)).flat().groupBy(l=>l.time).entries().map(([l,c])=>({timestamp:Number(l),...Object.fromEntries(c.map(r=>[r.coin,r.price]))}));return s.length>0?s:[{timestamp:0}]},initialData:[{timestamp:0}],initialDataUpdatedAt:0})}function Ta(){return H({queryKey:["crvusd-markets"],queryFn:()=>At.getMarkets("ethereum",1),...Nt()})}function Ss(){return H({queryKey:["crvusd-keepers"],queryFn:()=>At.getKeepers("ethereum"),...Nt()})}const ac={class:"kpis"},sc=A({__name:"KPIs",setup(e){const t=new ys,{data:a}=Ta(),s=y(()=>a.value.reduce((i,u)=>i+u.borrowed,0)),{data:l}=$s(V("ethereum")),c=y(()=>{var i;return((i=l.value)==null?void 0:i.total.tvl)??0}),r=y(()=>{var i;return((i=l.value)==null?void 0:i.total.tradingVolume24h)??0}),{data:n}=H({queryKey:["crv-price"],queryFn:()=>t.getPrice("0xd533a949740bb3306d119cc777fa900ba034cd52").then(i=>i.price),initialData:0,initialDataUpdatedAt:0});return(i,u)=>{const d=j,v=ve;return _(),$("div",ac,[m(v,{label:"CRV Price","has-value":!!o(n)},{default:w(()=>[m(d,{value:o(n),precision:3,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"crvUSD Borrowed","has-value":!!o(s)},{default:w(()=>[m(d,{value:o(s),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"Total Value Locked","has-value":!!o(c)},{default:w(()=>[m(d,{value:o(c),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{label:"24h Volume","has-value":!!o(r)},{default:w(()=>[m(d,{value:o(r),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"])])}}}),oc=L(sc,[["__scopeId","data-v-f9e37dd3"]]),nc=[{unit:"year",seconds:365*24*60*60},{unit:"month",seconds:30*24*60*60},{unit:"week",seconds:7*24*60*60},{unit:"day",seconds:24*60*60},{unit:"hour",seconds:60*60},{unit:"minute",seconds:60},{unit:"second",seconds:1}];function lc(e,t){const a=Math.round(e.value/1e3)-t;for(const{unit:s,seconds:l}of nc)if(a>=l){const c=Math.round(a/l);return`${c} ${c===1?s:s+"s"} ago`}return"just now"}function Ye(){const e=V(Date.now());return ce(()=>{setInterval(()=>{e.value=Date.now()})}),{relativeTime:a=>lc(e,a)}}const be=e=>(z("data-v-6ce19daf"),e=e(),Q(),e),rc={class:"articles"},ic=be(()=>p("div",{class:"title"},"Articles",-1)),cc={class:"articles-cards"},uc={class:"article"},dc=be(()=>p("div",{class:"title"},"Who are Curve's Users?",-1)),pc=be(()=>p("div",{class:"description"}," A look at the differences between users of Curve's products ",-1)),mc={class:"date"},vc=be(()=>p("div",{class:"read"},[p("a",{href:"https://blog.curvemonitor.com/posts/curve-users/",target:"_blank"}," Read now ")],-1)),hc={class:"article"},_c=be(()=>p("div",{class:"title"},"How to Do Cheaper, Approval-Free Swaps",-1)),fc=be(()=>p("div",{class:"description"}," A deep dive into the exchange_received function on NG pools which allows users to trade without approvals and can significantly reduce transaction gas costs. ",-1)),gc={class:"date"},yc=be(()=>p("div",{class:"read"},[p("a",{href:"https://blog.curvemonitor.com/posts/exchange-received/",target:"_blank"}," Read now ")],-1)),bc={class:"article"},wc=be(()=>p("div",{class:"title"},"Impact of Dynamic Fees on MEV Activity",-1)),Cc=be(()=>p("div",{class:"description"}," This post compares MEV activity on StableSwap NG pools and pools with the original implementation. It explains dynamic fees and their impact on certain types of MEV activity. ",-1)),$c={class:"date"},kc=be(()=>p("div",{class:"read"},[p("a",{href:"https://blog.curvemonitor.com/posts/ng-mev/",target:"_blank"}," Read now ")],-1)),Sc={class:"article"},Ac=be(()=>p("div",{class:"title"},"Parameter Ramping",-1)),Tc=be(()=>p("div",{class:"description"}," Why aren't parameter changes on Curve pools applied instantly? This post dwelves into the reasons behind gradual parameter changes. ",-1)),Lc={class:"date"},Ic=be(()=>p("div",{class:"read"},[p("a",{href:"https://blog.curvemonitor.com/posts/parameter-ramping/",target:"_blank"}," Read now ")],-1)),Rc=A({__name:"Articles",setup(e){const{relativeTime:t}=Ye();function a(s){window.open(s,"_blank")}return(s,l)=>{const c=M;return _(),$("div",rc,[ic,p("div",cc,[m(c,{onClick:l[0]||(l[0]=r=>a("https://blog.curvemonitor.com/posts/curve-users/"))},{default:w(()=>[p("div",uc,[dc,pc,p("div",mc,R(o(t)(1723586400)),1),vc])]),_:1}),m(c,{onClick:l[1]||(l[1]=r=>a("https://blog.curvemonitor.com/posts/exchange-received/"))},{default:w(()=>[p("div",hc,[_c,fc,p("div",gc,R(o(t)(1711234800)),1),yc])]),_:1}),m(c,{onClick:l[2]||(l[2]=r=>a("https://blog.curvemonitor.com/posts/ng-mev/"))},{default:w(()=>[p("div",bc,[wc,Cc,p("div",$c,R(o(t)(1710025200)),1),kc])]),_:1}),m(c,{onClick:l[3]||(l[3]=r=>a("https://blog.curvemonitor.com/posts/parameter-ramping/"))},{default:w(()=>[p("div",Sc,[Ac,Tc,p("div",Lc,R(o(t)(1707606e3)),1),Ic])]),_:1})])])}}}),Vc=L(Rc,[["__scopeId","data-v-6ce19daf"]]),As=e=>(z("data-v-625a5f2a"),e=e(),Q(),e),Pc={class:"home"},Fc=As(()=>p("div",{class:"description"},[p("span",{class:"title"},"Curve Monitor"),p("span",{class:"tag"}," Airdropping knowledge bombs about the Curve ecosystem. ")],-1)),qc=As(()=>p("img",{class:"llama",src:ii},null,-1)),Dc=A({__name:"Home.page",setup(e){return(t,a)=>(_(),$("div",Pc,[Fc,qc,m(oc,{style:{"grid-area":"kpis"}}),m(Vc,{style:{"grid-area":"articles"}})]))}}),Bc=L(Dc,[["__scopeId","data-v-625a5f2a"]]),Mc={key:0,class:"item"},xc=["src"],Uc={key:1,class:"empty"},Oc={class:"label"},Ec=A({__name:"SelectChain",props:{chain:{default:null},chains:{default:null},all:{type:Boolean,default:!1}},emits:["select-chain"],setup(e,{emit:t}){const a=t,s=V(!1),l=y(()=>[...e.all?[{chain:"all",label:"All Chains"}]:[],{chain:"ethereum",label:"Ethereum"},{chain:"avalanche",label:"Avalanche"},{chain:"arbitrum",label:"Arbitrum"},{chain:"fantom",label:"Fantom"},{chain:"xdai",label:"Gnosis (xDai)"},{chain:"harmony",label:"Harmony"},{chain:"moonbeam",label:"Moonbeam"},{chain:"matic",label:"Polygon"},{chain:"optimism",label:"Optimism"},{chain:"base",label:"Base"},{chain:"polygon",label:"Polygon"},{chain:"fraxtal",label:"Fraxtal"}].filter(u=>!e.chains||e.chains.includes(u.chain))),c=y(()=>l.value.find(u=>u.chain===e.chain)??null),r=u=>u.label,n=()=>{s.value=!s.value},i=u=>{a("select-chain",u.chain)};return(u,d)=>{const v=St;return _(),S(v,{class:"select",options:o(l),selected:o(c),open:o(s),onOpen:n,onClose:d[0]||(d[0]=h=>s.value=!1),onInput:i},{item:w(h=>[h.item?(_(),$("div",Mc,[o(Ga)(h.item.chain)?(_(),$("img",{key:0,src:o(Ga)(h.item.chain)},null,8,xc)):(_(),$("div",Uc)),p("div",Oc,R(r(h.item)),1)])):q("",!0)]),_:1},8,["options","selected","open"])}}}),Tt=L(Ec,[["__scopeId","data-v-72f8e421"]]),Wc=A({__name:"ModalFullscreen",props:{target:{}},emits:["enterBefore","enter","exitBefore","exit"],setup(e,{emit:t}){const a=t,s=V(void 0);let l,c=null;G(s,(i,u)=>{e.target&&(i?r(e.target,i):u&&l&&n(e.target,l,u))});function r(i,u){l=i.parentNode,c=i.nextSibling,l&&(a("enterBefore",u),l.removeChild(i),u.appendChild(i),a("enter",u))}function n(i,u,d){a("exitBefore",d),d.removeChild(i),c?u.insertBefore(i,c):u.appendChild(i),a("exit",d)}return(i,u)=>{const d=ka;return _(),S(d,null,{default:w(()=>[p("div",{ref_key:"modalRef",ref:s,class:"fullscreen-content"},null,512)]),_:1})}}}),Ts=L(Wc,[["__scopeId","data-v-08e2932c"]]),Kc=p("i",{class:"fas fa-expand"},null,-1),pt=A({__name:"BtnChartLWFullscreen",props:Fe({chart:{},target:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=dt(e,"modelValue");let a=0,s=0;function l(){const r=e.chart.chartElement().parentElement;a=(r==null?void 0:r.clientHeight)??0,s=(r==null?void 0:r.clientWidth)??0}function c(){e.chart.applyOptions({height:a,width:s})}return(r,n)=>{const i=Ts,u=ge;return _(),S(u,{disabled:!r.chart,onClick:n[1]||(n[1]=d=>t.value=!t.value)},{default:w(()=>[Kc,m(i,{target:r.target,show:t.value,onClose:n[0]||(n[0]=d=>t.value=!1),onEnterBefore:l,onExit:c},null,8,["target","show"])]),_:1},8,["disabled"])}}}),Hc=(e,t)=>{const{colors:a}=t;return{width:e.clientWidth,height:e.clientHeight||300,rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},layout:{background:{type:Ho.Solid,color:a.backgroundColor},textColor:a.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",attributionLogo:!1},grid:{vertLines:{visible:!1},horzLines:{color:a.level4,style:No.SparseDotted}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1}};function te(e,t,a){const s=Hc(e,t);return a?Ca(s,a):s}function ae(e){const{recreateChartTrigger:t,createChartOptions:a,series:s}=e,l={},c=Array.isArray(s)?s:[s],r=pa(void 0),n=pa(void 0);let i=null;ce(async()=>{if(!r.value)return;await rs();const u=zo(r.value,a(r.value));n.value=u;for(const d of c){const v=Nc(u,d);l[d.name]=v}i=new ResizeObserver(d=>{const v=d[0].target;n.value&&r.value&&(n.value.applyOptions({width:v.clientWidth,height:v.clientHeight}),n.value.timeScale().fitContent())}),r.value.parentElement&&i.observe(r.value.parentElement)}),Ot(()=>{n.value&&(n.value.remove(),n.value=void 0),i&&(i.disconnect(),i=null)}),G(t,()=>{r.value&&n.value&&n.value.applyOptions(a(r.value))});for(const{name:u,options:d}of c)G(d,v=>{const h=l[u];h==null||h.applyOptions(v)});return{chart:n,chartRef:r,series:l}}function Nc(e,{type:t,options:a}){return{Area:e.addAreaSeries.bind(e),Bar:e.addBarSeries.bind(e),Baseline:e.addBaselineSeries.bind(e),Line:e.addLineSeries.bind(e),Candlestick:e.addCandlestickSeries.bind(e),Histogram:e.addHistogramSeries.bind(e)}[t](a.value)}const zc={class:"actions"},Qc=A({__name:"ChartTxs",props:{txs:{}},setup(e){const{theme:t}=U(O()),a=V(!1),s=V(void 0),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:t,createChartOptions:i=>te(i,t.value),series:{type:"Area",name:"txs",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`${K(i,0,"dollar")}${E(i,"dollar")}`,minMove:.01},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.txs)return;const i=e.txs.map(u=>({time:u.timestamp,value:u.count})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc");r.txs.setData(i),l.value.timeScale().fitContent()}return(i,u)=>{const d=M;return _(),S(d,{ref_key:"chartCard",ref:s,class:"chart-card",title:"Transactions"},{actions:w(()=>{var v;return[p("div",zc,[m(o(pt),{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=h=>se(a)?a.value=h:null),chart:o(l),target:(v=o(s))==null?void 0:v.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},512)}}}),jc=L(Qc,[["__scopeId","data-v-db2dcf06"]]),Gc={class:"actions"},Xc=A({__name:"ChartUsers",props:{users:{}},setup(e){const{theme:t}=U(O()),a=V(!1),s=V(void 0),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:t,createChartOptions:i=>te(i,t.value),series:{type:"Area",name:"users",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`${K(i,0,"dollar")}${E(i,"dollar")}`,minMove:.01},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.users)return;const i=e.users.map(u=>({time:u.timestamp,value:u.count})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc");r.users.setData(i),l.value.timeScale().fitContent()}return(i,u)=>{const d=M;return _(),S(d,{ref_key:"chartCard",ref:s,class:"chart-card",title:"Users"},{actions:w(()=>{var v;return[p("div",Gc,[m(o(pt),{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=h=>se(a)?a.value=h:null),chart:o(l),target:(v=o(s))==null?void 0:v.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},512)}}}),Yc=L(Xc,[["__scopeId","data-v-3e796ee5"]]),Zc=A({__name:"ChartApex",props:{options:{},series:{}},setup(e){return(t,a)=>{const s=ut("apexchart");return _(),S(s,{class:"chart",height:"100%",options:t.options,series:t.series},null,8,["options","series"])}}}),Qt=L(Zc,[["__scopeId","data-v-b55fca0c"]]),Jc=A({__name:"CardChart",props:{title:{default:""},loading:{type:Boolean,default:!1},options:{},series:{}},setup(e){return(t,a)=>{const s=Qt,l=M;return _(),S(l,{class:"cart-chart",title:t.title,loading:t.loading},{actions:w(()=>[X(t.$slots,"actions",{},void 0,!0)]),default:w(()=>[m(s,{height:"100%",options:t.options,series:t.series},null,8,["options","series"]),X(t.$slots,"default",{},void 0,!0)]),_:3},8,["title","loading"])}}}),he=L(Jc,[["__scopeId","data-v-25a61ef4"]]),eu={class:"legend"},tu=["onClick"],au={class:"label"},su=A({__name:"Legend",props:{items:{},disabled:{default:()=>[]}},emits:["toggle"],setup(e,{emit:t}){const a=t;return(s,l)=>(_(),$("div",eu,[(_(!0),$(Z,null,re(s.items,c=>(_(),$("div",{key:c.id,class:B(["item",{togglable:c.togglable,disabled:s.disabled.includes(c.id)}]),onClick:r=>{c.togglable&&a("toggle",c.id)}},[p("div",{class:"color",style:ye({"background-color":c.color})},null,4),p("div",au,R(c.label),1)],10,tu))),128))]))}}),Ve=L(su,[["__scopeId","data-v-c53e0ed6"]]),ou=e=>({chart:{id:"chart",background:"transparant",foreColor:e.colors.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",toolbar:{autoSelected:"zoom",tools:{download:!1,pan:!1}},zoom:{autoScaleYaxis:!0}},colors:e.colorsArray,grid:{borderColor:e.colors.level5,strokeDashArray:4,xaxis:{lines:{show:!1}}},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:2},theme:{mode:"dark"},xaxis:{type:"category",axisBorder:{color:e.colors.level5,height:1},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}},yaxis:{tickAmount:4,axisBorder:{color:e.colors.level5},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}}});function le(e,t){const a=ou(e);return t?Ca(a,t):a}function Pe(e){const t=y(e),a=Qo(jo(Object.fromEntries(t.value.map(l=>[l.id,!0])))),s=y(()=>t.value.filter(l=>!a[l.id].value).map(l=>l.id));return{items:t,toggles:a,disabled:s}}const nu={class:"actions"},lu=A({__name:"ChartRankingChains",props:{type:{},txs:{},users:{}},setup(e){const{theme:t}=U(O()),a=y(()=>`Top Chains (${e.type==="all"?"All Types":$t(e.type)})`),{items:s,toggles:l,disabled:c}=Pe(()=>{const{blue:f,yellow:b}=t.value.colors;return[{id:"txs",label:"Transactions",color:f,togglable:!0},{id:"users",label:"Users",color:b,togglable:!0}]});function r(f){return f.groupBy(b=>b.chain).entries().map(([b,C])=>{const k=C.reduce((I,T)=>I+T.value,0);return{chain:b,count:k}}).orderBy(b=>b.count,"desc")}const n=y(()=>{const{colors:f}=t.value;return le(t.value,{chart:{type:"bar",animations:{enabled:!1}},colors:[f.blue,f.yellow],xaxis:{categories:d.value,labels:{formatter:h}},yaxis:{labels:{formatter:g}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),i=y(()=>l.txs.value?r(e.txs):[]),u=y(()=>l.users.value?r(e.users):[]),d=y(()=>i.value.concat(u.value).orderBy(f=>f.count,"desc").map(f=>f.chain).uniq()),v=y(()=>{const f=d.value.map(C=>{const k=i.value.find(I=>I.chain===C);return k?k.count:0}),b=d.value.map(C=>{const k=u.value.find(I=>I.chain===C);return k?k.count:0});return[{data:l.txs.value?f:[]},{data:l.users.value?b:[]}]}),h=f=>f,g=f=>`${K(f,0,"dollar")}${E(f,"dollar")}`;return(f,b)=>{const C=Ve,k=he;return _(),S(k,{class:"chart",title:o(a),options:o(n),series:o(v)},{actions:w(()=>[p("div",nu,[m(C,{items:o(s),disabled:o(c),onToggle:b[0]||(b[0]=I=>o(l)[I].value=!o(l)[I].value)},null,8,["items","disabled"])])]),_:1},8,["title","options","series"])}}}),ru=L(lu,[["__scopeId","data-v-53c98af5"]]),iu={class:"actions"},cu=A({__name:"ChartRankingTypes",props:{chain:{},txs:{},users:{}},setup(e){const{theme:t}=U(O()),a=y(()=>`Top Types (${e.chain==="all"?"All Chains":$t(e.chain)})`),{items:s,toggles:l,disabled:c}=Pe(()=>{const{blue:f,yellow:b}=t.value.colors;return[{id:"txs",label:"Transactions",color:f,togglable:!0},{id:"users",label:"Users",color:b,togglable:!0}]});function r(f){return f.groupBy(b=>b.type).entries().map(([b,C])=>{const k=C.reduce((I,T)=>I+T.value,0);return{type:b,count:k}}).orderBy(b=>b.count,"desc")}const n=y(()=>{const{colors:f}=t.value;return le(t.value,{chart:{type:"bar",animations:{enabled:!1}},colors:[f.blue,f.yellow],xaxis:{categories:d.value,labels:{formatter:h}},yaxis:{labels:{formatter:g}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),i=y(()=>l.txs.value?r(e.txs):[]),u=y(()=>l.users.value?r(e.users):[]),d=y(()=>i.value.concat(u.value).orderBy(f=>f.count,"desc").map(f=>f.type).uniq()),v=y(()=>{const f=d.value.map(C=>{const k=i.value.find(I=>I.type===C);return k?k.count:0}),b=d.value.map(C=>{const k=u.value.find(I=>I.type===C);return k?k.count:0});return[{data:l.txs.value?f:[]},{data:l.users.value?b:[]}]}),h=f=>f,g=f=>`${K(f,0,"dollar")}${E(f,"dollar")}`;return(f,b)=>{const C=Ve,k=he;return _(),S(k,{class:"chart",title:o(a),options:o(n),series:o(v)},{actions:w(()=>[p("div",iu,[m(C,{items:o(s),disabled:o(c),onToggle:b[0]||(b[0]=I=>o(l)[I].value=!o(l)[I].value)},null,8,["items","disabled"])])]),_:1},8,["title","options","series"])}}}),uu=L(cu,[["__scopeId","data-v-199b23b5"]]),du={class:"item"},pu={class:"label"},mu=A({__name:"ActivityTypeSelect",emits:["select"],setup(e,{emit:t}){const a=["all",...wi],s=t,l=V(!1),c=V("all");function r(u){switch(u){case"all":return"All Types";case"crvusd":return"crvUSD";case"lending":return"Lending";case"pools":return"Pools";case"router":return"Router";case"dao":return"DAO"}}function n(){l.value=!l.value}function i(u){c.value=u,s("select",c.value)}return(u,d)=>{const v=St;return _(),S(v,{class:"select",options:a.map(h=>h),selected:o(c),open:o(l),onOpen:n,onClose:d[0]||(d[0]=h=>l.value=!1),onInput:i},{item:w(h=>[p("div",du,[p("div",pu,R(r(h.item)),1)])]),_:1},8,["options","selected","open"])}}}),vu=L(mu,[["__scopeId","data-v-abdd9a72"]]),hu={class:"chains"},_u={class:"toolbar"},fu={class:"activity"},gu=A({__name:"Chains.page",setup(e){const{show:t}=U(qe());ce(()=>{t.value=!1});const a=fe("chain"),s=y({get(){return a.value?a.value:"all"},set(D){a.value=D}}),l=y(()=>{const D=u.value.map(oe=>oe.chain).concat(v.value.map(oe=>oe.chain)).concat(s.value!=="all"?[s.value]:[]).uniq().orderBy(oe=>oe,"asc"),ue=["ethereum"],de=D.difference(ue).orderBy(oe=>oe,"asc");return["all",...ue,...de]}),c=fe("type"),r=y({get(){return c.value?c.value:"all"},set(D){c.value=D}}),n=D=>{r.value=D},{isFetching:i,data:u}=Ei(),{isFetching:d,data:v}=Wi();function h(D,ue,de,oe){return D.filter(ne=>ue==="all"?!0:ne.chain===ue).filter(ne=>de==="all"?!0:ne.type===de).groupBy(ne=>ne.timestamp).entries().map(([ne,et])=>{const He=et.reduce((ft,Xt)=>ft+oe(Xt),0);return{timestamp:Number(ne),count:He}})}const g=y(()=>h(u.value,s.value,r.value,D=>D.transactions)),f=y(()=>h(v.value,s.value,r.value,D=>D.users));function b(D){const oe=Math.floor(Date.now()/1e3)-7*24*60*60,et=D.filter(He=>He.timestamp>=oe).reduce((He,ft)=>He+ft.count,0);return Math.round(et/7)}const C=y(()=>{var D;return((D=g.value.at(-1))==null?void 0:D.count)??0}),k=y(()=>b(g.value)),I=y(()=>{var D;return((D=f.value.at(-1))==null?void 0:D.count)??0}),T=y(()=>b(f.value));function P(D,ue,de,oe){return D.filter(ne=>ue==="all"?!0:ne.chain===ue).filter(ne=>de==="all"?!0:ne.type===de).map(ne=>({chain:ne.chain,type:ne.type,value:oe(ne)}))}const F=y(()=>P(u.value,"all",r.value,D=>D.transactions)),N=y(()=>P(v.value,"all",r.value,D=>D.users)),Se=y(()=>P(u.value,s.value,"all",D=>D.transactions)),Ke=y(()=>P(v.value,s.value,"all",D=>D.users));return(D,ue)=>{const de=j,oe=ve;return _(),$("div",hu,[(_(),S(Et,{to:"#toolbar"},[p("div",_u,[m(o(vu),{style:{"grid-area":"type"},onSelect:n}),m(Tt,{style:{"grid-area":"chain"},class:"chain-select",chain:o(s),chains:o(l),all:!0,onSelectChain:ue[0]||(ue[0]=ne=>s.value=ne)},null,8,["chain","chains"])])])),p("div",fu,[m(oe,{style:{"grid-area":"kpi1"},label:"Transactions Today","has-value":!!o(i)},{default:w(()=>[m(de,{type:"dollar",value:o(C),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi2"},label:"Avg Transactions / 7 Days","has-value":!!o(i)},{default:w(()=>[m(de,{type:"dollar",value:o(k),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi3"},label:"Avg Users / 7 Days","has-value":!!o(d)},{default:w(()=>[m(de,{type:"dollar",value:o(I),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(oe,{style:{"grid-area":"kpi4"},label:"Users Today","has-value":!!o(d)},{default:w(()=>[m(de,{type:"dollar",value:o(T),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(o(jc),{style:{"grid-area":"txs"},txs:o(g),loading:o(i)},null,8,["txs","loading"]),m(o(Yc),{style:{"grid-area":"users"},users:o(f),loading:o(d)},null,8,["users","loading"]),m(o(ru),{style:{"grid-area":"top-chains"},type:o(r),txs:o(F),users:o(N),loading:o(i)||o(d)},null,8,["type","txs","users","loading"]),m(o(uu),{style:{"grid-area":"top-types"},chain:o(s),txs:o(Se),users:o(Ke),loading:o(i)||o(d)},null,8,["chain","txs","users","loading"])])])}}}),yu=L(gu,[["__scopeId","data-v-d951844b"]]),bu=e=>(z("data-v-a8bfcf8d"),e=e(),Q(),e),wu={class:"input-text"},Cu={key:0,class:"icon"},$u=bu(()=>p("i",{class:"fas fa-search"},null,-1)),ku=[$u],Su=["type","value","placeholder"],Au=["onClick"],Tu=A({__name:"InputText",props:Fe({placeholder:{default:""},options:{default:()=>[]},search:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},filter:{type:Function,default:()=>()=>!0},sort:{type:Function,default:null}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["input","select"],["update:modelValue"]),setup(e,{emit:t}){const a=dt(e,"modelValue"),s=t,l=y(()=>{const r=e.options.filter(i=>e.filter(a.value,i));return e.sort?[...r].sort(e.sort):r}),c=r=>{const n=r.target.value;a.value=n,s("input",n)};return(r,n)=>(_(),$("div",wu,[r.search?(_(),$("span",Cu,ku)):q("",!0),p("input",{type:r.search?"search":"text",value:a.value,placeholder:r.placeholder,onInput:Te(c,["stop"]),onSelect:n[0]||(n[0]=Te(()=>{},["stop"]))},null,40,Su),r.options&&r.autoComplete?(_(),$("div",{key:1,class:B(["items",{selectHide:!r.autoComplete}])},[(_(!0),$(Z,null,re(o(l),(i,u)=>(_(),$("div",{key:u,onClick:d=>s("select",i)},[X(r.$slots,"item",{item:i,idx:u},()=>[x(R(i),1)],!0)],8,Au))),128))],2)):q("",!0)]))}}),Le=L(Tu,[["__scopeId","data-v-a8bfcf8d"]]),Lu=e=>({tvl:e.total_tvl,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h}),Ya=e=>{var t,a;return{name:e.name,address:e.address.toLocaleLowerCase(),numCoins:e.n_coins,tvlUsd:e.tvl_usd,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h,coins:((t=e.coins)==null?void 0:t.map(s=>({poolIndex:s.pool_index,symbol:s.symbol,address:s.address.toLocaleLowerCase()})))??[],baseDailyApr:e.base_daily_apr,baseWeeklyApr:e.base_weekly_apr,virtualPrice:e.virtual_price,poolMethods:((a=e.pool_methods)==null?void 0:a.map(s=>s))??[]}},Iu=e=>({timestamp:e.timestamp,volume:e.volume,fees:e.fees}),Ru=e=>({timestamp:e.timestamp,tvlUSD:e.tvl_usd??0}),aa="https://prices.curve.fi";let Vu=class extends Xe{async getPools(t){const a=await this.getHost(),s=await this.fetch(`${a}/chains/${t}`);return{chain:s.chain,totals:Lu(s.total),pools:s.data.map(Ya)}}async getPool(t,a){const s=await this.fetch(`${aa}/v1/pools/${t}/${a}`);return Ya(s)}async getVolume(t,a){const l=Math.floor(new Date().getTime()/1e3),c=Math.floor(l-72e5);return(await this.fetch(`${aa}/v1/volume/usd/${t}/${a}?interval=day&start=${c}&end=${l}`)).data.map(Iu)}async getTvl(t,a){const l=Math.floor(new Date().getTime()/1e3),c=Math.floor(l-72e5);return(await this.fetch(`${aa}/v1/snapshots/${t}/${a}/tvl?interval=day&start=${c}&end=${l}`)).data.map(Ru)}};const Pu=["cb","laf","cm","pm","pm-lrt"];function Fu(){const e="cm";if(!Pu.includes(e)){const t=`Unknown app for useApp(): ${e}`;throw Ae({text:t,type:"error"}),new Error(t)}return e}const Bt={};function qu(e){return Jn[e]}async function je(e){const t=Fu(),a=t;if(Bt[a])return Promise.resolve(Bt[a]);const s=qu(t);return Bt[a]=s,Bt[a]}const Lt=new Vu(je());function Du(e){return H({queryKey:["curve-pools",e],queryFn:async({queryKey:[,t]})=>Lt.getPools(t),placeholderData:Wt,enabled:y(()=>!!e.value)})}function Bu(e,t){return H({queryKey:["curve-pool",t],queryFn:async({queryKey:[,a]})=>Lt.getPool(e.value,a),enabled:y(()=>!!e.value)})}function Mu(e,t){const a=y(()=>t.value.map(s=>({queryKey:["curve-pool",s],queryFn:()=>Lt.getPool(e.value,s),enabled:y(()=>!!e.value)})));return Go({queries:a})}function xu(e,t){return H({queryKey:["curve-pool-volume",t],queryFn:async({queryKey:[,a]})=>Lt.getVolume(e.value,a),enabled:y(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}function Uu(e,t){return H({queryKey:["curve-pool-tvl",t],queryFn:async({queryKey:[,a]})=>Lt.getTvl(e.value,a),enabled:y(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}const Ou=["src"],Eu=["href"],Wu=["src"],Ku=A({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(e){const t=V("");function a(c){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${e.chain!=="ethereum"?`-${e.chain}`:""}/${c}.png`}const s=()=>{t.value="https://lend.curve.fi/images/default-crypto.png"};G(()=>e.address,c=>{t.value=a(c.toLowerCase())},{immediate:!0});const l=y(()=>{switch(e.chain){case"arbitrum":return`https://arbiscan.io/address/${e.address}`;case"ethereum":default:return`https://etherscan.io/address/${e.address}`}});return(c,r)=>c.clickable?(_(),$("a",{key:1,target:"_blank",href:o(l)},[p("img",{src:t.value,onError:s},null,40,Wu)],8,Eu)):(_(),$("img",{key:0,src:t.value,onError:s},null,40,Ou))}}),Ie=L(Ku,[["__scopeId","data-v-e852da0c"]]),La=e=>(z("data-v-1322d4c0"),e=e(),Q(),e),Hu={key:0},Nu=La(()=>p("button",null,"1",-1)),zu=[Nu],Qu=La(()=>p("button",null,[p("i",{class:"fas fa-chevron-left"})],-1)),ju=[Qu],Gu=["onClick"],Xu=La(()=>p("button",null,[p("i",{class:"fas fa-chevron-right"})],-1)),Yu=[Xu],Zu=A({__name:"Pagination",props:{page:{},itemsCount:{},itemsPerPage:{}},emits:["page"],setup(e,{emit:t}){const a=t,s=y(()=>Math.ceil(e.itemsCount/e.itemsPerPage)),l=y(()=>{const v=[...Array(12).keys()].map(k=>k-6+e.page).filter(k=>k>=1&&k<=s.value),h=v.findIndex(k=>k===e.page),g=[],f=[],b=e.page!==1&&e.page!==s.value?[e.page]:[];let C=1;for(;;){const k=v[h-C];if(k&&k!==1&&g.unshift(k),g.length+f.length+b.length>=5||C>v.length)break;const I=v[h+C];if(I&&I!==s.value&&f.push(I),C++,g.length+f.length+b.length>=5||C>v.length)break}return[...g,...b,...f]});G(l,()=>{const u=c(e.page,1,s.value);e.page!==u&&a("page",u)});const c=(u,d,v)=>(v<d&&(v=d),Math.min(Math.max(u,d),v)),r=()=>a("page",c(e.page-1,1,s.value)),n=()=>a("page",c(e.page+1,1,s.value)),i=u=>a("page",c(u,1,s.value));return(u,d)=>o(s)>1?(_(),$("ul",Hu,[p("li",{class:B({active:u.page===1}),onClick:d[0]||(d[0]=v=>i(1))},zu,2),o(s)>2?(_(),$("li",{key:0,onClick:r},ju)):q("",!0),(_(!0),$(Z,null,re(o(l),(v,h)=>(_(),$("li",{key:h,class:B({active:v===u.page}),onClick:g=>i(v)},[p("button",null,R(v),1)],10,Gu))),128)),o(s)>2?(_(),$("li",{key:1,onClick:n},Yu)):q("",!0),o(s)>1?(_(),$("li",{key:2,class:B({active:u.page===o(s)}),onClick:d[1]||(d[1]=v=>i(o(s)))},[p("button",null,R(o(s)),1)],2)):q("",!0)])):q("",!0)}}),Ue=L(Zu,[["__scopeId","data-v-1322d4c0"]]);function Ze(e,t){const a=V(e),s=V("desc"),l=(r,n)=>{a.value=r,s.value=n},c=y(()=>({column:a.value,order:s.value}));return{sortColumn:a,sortOrder:s,sorting:c,onSort:l}}function jt(e,t){const a=V(1),s=y(()=>e.value.drop((a.value-1)*t).take(t)),l=c=>{a.value=c};return G(s,c=>{c.length===0&&(a.value=Math.max(1,Math.ceil(e.value.length/t)))}),{page:a,rowsPage:s,onPage:l}}function Ia(){const e=V(1);return{page:e,onPage:a=>{e.value=a}}}const Ju={class:"tokens"},ed={class:"end"},td={class:"end"},ad={class:"end"},Za=20,sd=A({__name:"TablePools",props:{chain:{},pools:{}},emits:["selected"],setup(e,{emit:t}){const a=t,s=["","",{id:"name",label:"Name",sort:!0},{id:"volume",label:"Volume (24h)",sort:!0,align:"end"},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:l,onSort:c}=Ze("tvl"),r=y(()=>e.pools.orderBy(v=>{switch(l.value.column){case"name":return v.name;case"volume":return v.tradingVolume24h;case"tvl":return v.tvlUsd;case"util":return d(v)}},l.value.order)),{page:n,rowsPage:i,onPage:u}=jt(r,Za);function d(v){return v.tvlUsd!==0?100*v.tradingVolume24h/v.tvlUsd:0}return(v,h)=>{const g=Ue,f=Ie,b=j,C=ee,k=M;return _(),S(k,{title:"Pools"},{actions:w(()=>[m(g,{"items-count":v.pools.length,"items-per-page":Za,page:o(n),onPage:o(u)},null,8,["items-count","page","onPage"])]),default:w(()=>[m(C,{class:"pools-table","expand-side":"left",rows:o(i),columns:s,sorting:o(l),onSortColumn:o(c),onSelected:h[0]||(h[0]=I=>a("selected",I))},{row:w(({item:I})=>[p("div",Ju,[(_(!0),$(Z,null,re(I.coins,T=>(_(),S(f,{key:T.address,chain:v.chain,address:T.address},null,8,["chain","address"]))),128))]),p("div",null,R(I.name),1),p("div",ed,[m(b,{value:I.tradingVolume24h,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",td,[m(b,{value:I.tvlUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",ad,[m(b,{value:d(I),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"])])]),"row-details":w(()=>[x("   ")]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),od=L(sd,[["__scopeId","data-v-2f78c210"]]),nd={class:"pools"},ld={class:"toolbar"},rd=A({__name:"Pools.page",setup(e){const t=["ethereum","arbitrum"],a=fe("chain"),s=y({get(){return a.value?a.value:"ethereum"},set(f){a.value=f}}),l=V(""),{isFetching:c,data:r}=$s(s),{isFetching:n,data:i}=Du(s),u=y(()=>{var f;return(((f=i.value)==null?void 0:f.pools)??[]).filter(b=>{const C=l.value.toLocaleLowerCase().split(" "),k=I=>C.some(T=>I.toLocaleLowerCase().includes(T));return k(b.name)||k(b.address)})}),{show:d,crumbs:v}=U(qe());ce(()=>{d.value=!0,v.value=[{id:"pools",label:"Pools",pathName:"pools"},{id:"pool",label:"Select pool for details",hint:!0}]});const h=xe(),g=async f=>{await h.push({name:"poolspool",params:{tab:"",chain:s.value,poolAddr:f.address}})};return(f,b)=>{const C=Le,k=j,I=ve;return _(),$("div",nd,[(_(),S(Et,{to:"#toolbar"},[p("div",ld,[m(C,{modelValue:o(l),"onUpdate:modelValue":b[0]||(b[0]=T=>se(l)?l.value=T:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Tt,{class:"chain-select",chain:o(s),chains:t,onSelectChain:b[1]||(b[1]=T=>s.value=T==="all"?"ethereum":T)},null,8,["chain"])])])),m(I,{style:{"grid-area":"kpi1"},label:"TVL","has-value":!o(c)},{default:w(()=>{var T;return[m(k,{value:((T=o(r))==null?void 0:T.total.tvl)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(I,{style:{"grid-area":"kpi2"},label:"Volume (24h)","has-value":!o(c)},{default:w(()=>{var T;return[m(k,{value:((T=o(r))==null?void 0:T.total.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(I,{style:{"grid-area":"kpi3"},label:"Fees Trading (24h)","has-value":!o(c)},{default:w(()=>{var T;return[m(k,{value:((T=o(r))==null?void 0:T.total.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(I,{style:{"grid-area":"kpi4"},label:"Fees Liquidity (24h)","has-value":!o(c)},{default:w(()=>{var T;return[m(k,{value:((T=o(r))==null?void 0:T.total.liquidityFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(od),{style:{"grid-area":"pools"},chain:o(s),pools:o(u),loading:o(n),onSelected:g},null,8,["chain","pools","loading"])])}}}),id=L(rd,[["__scopeId","data-v-c5404b72"]]),cd={class:"tab-view"},ud={class:"tab-headers"},dd=["onClick"],pd={class:"tabs"},md=A({__name:"TabView",props:{active:{default:0}},emits:["tab"],setup(e,{emit:t}){const a=t,s=V(null),l=is(),c=y(()=>(l.default?l.default():[]).filter(i=>i.props));G(()=>e.active,n=>{s.value=n,a("tab",{tab:c.value[n],index:s.value})},{immediate:!0});const r=(n,i)=>{n.props.disabled||(s.value=i,a("tab",{tab:c.value[i],index:s.value}))};return(n,i)=>(_(),$("div",cd,[p("ul",ud,[(_(!0),$(Z,null,re(o(c),(u,d)=>(_(),$("li",{key:d,class:B(["tab-header",{active:o(s)===d,disabled:u.props.disabled}]),onClick:v=>r(u,d)},R(u.props.header),11,dd))),128))]),p("div",pd,[(_(!0),$(Z,null,re(o(c),(u,d)=>fa((_(),$("div",{key:d,class:"tab"},[(_(),S(ha(u)))])),[[Xo,o(s)===d]])),128))])]))}}),Oe=L(md,[["__scopeId","data-v-0fb1a0bc"]]),Ee=A({__name:"TabItem",props:{header:{default:""},disabled:{type:Boolean,default:!1}},setup(e){return(t,a)=>X(t.$slots,"default")}}),vd=new ks;function hd(e,t,a,s){return H({queryKey:["curve-token-price",t,a,s],queryFn:({queryKey:[,l,c,r]})=>vd.getOHLC(e.value,l,c,r),enabled:y(()=>!!e.value&&!!t.value&&!!a.value&&!!s.value),initialData:[],initialDataUpdatedAt:0})}const _d=A({__name:"ButtonToggle",props:Fe({icon:{default:""},value:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Fe(["change"],["update:modelValue"]),setup(e,{emit:t}){const a=dt(e,"modelValue"),s=t,l=()=>{const c=!a.value;a.value=c,s("change",c)};return(c,r)=>(_(),$("button",{class:B({toggled:a.value}),onClick:l},[X(c.$slots,"default",{},()=>[c.icon?(_(),$("i",{key:0,class:B(["icon",c.icon])},null,2)):q("",!0),x(" "+R(c.value),1)],!0)],2))}}),It=L(_d,[["__scopeId","data-v-b6760b51"]]),fd={class:"controls"},gd=A({__name:"ChartPrice",props:{ohlc:{}},setup(e){const{theme:t}=U(O()),a=V(!1);let s=1,l=0;const{chart:c,chartRef:r,series:n}=ae({recreateChartTrigger:t,createChartOptions:d=>te(d,t.value),series:{type:"Candlestick",name:"ohlc",options:y(()=>{const{colors:d}=t.value;return{priceFormat:{type:"custom",formatter:u},upColor:d.green,borderUpColor:d.green,wickUpColor:d.green,downColor:d.red,borderDownColor:d.red,wickDownColor:d.red}})}});J(i);function i(){if(!c.value||!n.ohlc)return;const d=a.value?-1:1,v=e.ohlc.map(h=>({time:h.time,open:Math.pow(h.open,d),high:Math.pow(h.high,d),low:Math.pow(h.low,d),close:Math.pow(h.close,d)})).uniqWith((h,g)=>h.time===g.time).orderBy(h=>h.time,"asc");v.length>0&&(n.ohlc.setData(v),l=Math.min(...v.map(h=>h.low)),s=Math.max(...v.map(h=>h.high))),c.value.timeScale().fitContent()}function u(d){const v=s-l,h=v>1?v-Math.floor(v):v,g=-Math.floor(Math.log10(h)+1)+2;return`${K(d,g,"dollar")}${E(d,"dollar")}`}return(d,v)=>{const h=It,g=M;return _(),S(g,{class:"chart-container",title:"Price"},{actions:w(()=>[p("div",fd,[m(h,{value:"Invert","model-value":o(a),onClick:v[0]||(v[0]=f=>a.value=!o(a))},null,8,["model-value"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:r,class:"chart"},null,512)]),_:1})}}}),yd=L(gd,[["__scopeId","data-v-208f081b"]]),bd=A({__name:"ChartVolume",props:{volume:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Area",name:"volume",options:y(()=>({priceFormat:{type:"custom",formatter:r=>`$${K(r,1,"dollar")}${E(r,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(c);function c(){if(!a.value||!l.volume)return;const r=e.volume.map(n=>({time:n.timestamp,value:n.volume})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.volume.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=M;return _(),S(i,{class:"chart-container",title:"Volume"},{default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),wd=L(bd,[["__scopeId","data-v-05a20892"]]),Cd=A({__name:"ChartTvl",props:{tvl:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Area",name:"tvl",options:y(()=>({priceFormat:{type:"custom",formatter:r=>`$${K(r,1,"dollar")}${E(r,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(c);function c(){if(!a.value||!l.tvl)return;const r=e.tvl.map(n=>({time:n.timestamp,value:n.tvl})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.tvl.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=M;return _(),S(i,{class:"chart-container",title:"TVL"},{default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),$d=L(Cd,[["__scopeId","data-v-d072e37a"]]),kd={class:"pool-overview"},Sd={class:"tokens"},Ad=A({__name:"PoolOverview",props:{pool:{},chain:{}},setup(e){const t=y(()=>{var h;return(h=e.pool)==null?void 0:h.address}),a=y(()=>{var h;return(h=e.pool)==null?void 0:h.coins[0].address}),s=y(()=>{var h;return(h=e.pool)==null?void 0:h.coins[1].address}),{isFetching:l,data:c}=hd(W(()=>e.chain),t,a,s),{isFetching:r,data:n}=xu(W(()=>e.chain),t),{isFetching:i,data:u}=Uu(W(()=>e.chain),t),d=y(()=>n.value.map(h=>({timestamp:h.timestamp,volume:h.volume}))),v=y(()=>u.value.map(h=>({timestamp:h.timestamp,tvl:h.tvlUSD})));return(h,g)=>{const f=Ie,b=ve,C=j;return _(),$("div",kd,[m(b,{style:{"grid-area":"kpi1"},label:"Tokens","has-value":!!h.pool},{default:w(()=>{var k;return[p("div",Sd,[(_(!0),$(Z,null,re(((k=h.pool)==null?void 0:k.coins)??[],I=>(_(),S(f,{key:I.address,chain:h.chain,address:I.address,clickable:!0},null,8,["chain","address"]))),128))])]}),_:1},8,["has-value"]),m(b,{style:{"grid-area":"kpi2"},label:"TVL","has-value":!!h.pool},{default:w(()=>{var k;return[m(C,{value:((k=h.pool)==null?void 0:k.tvlUsd)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(b,{style:{"grid-area":"kpi3"},label:"Volume (24h)","has-value":!!h.pool},{default:w(()=>{var k;return[m(C,{value:((k=h.pool)==null?void 0:k.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(b,{style:{"grid-area":"kpi4"},label:"Fees (24h)","has-value":!!h.pool},{default:w(()=>{var k;return[m(C,{value:((k=h.pool)==null?void 0:k.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(yd),{style:{"grid-area":"price"},ohlc:o(c),loading:o(l)},null,8,["ohlc","loading"]),m(o(wd),{style:{"grid-area":"volume"},volume:o(d),loading:o(r)},null,8,["volume","loading"]),m(o($d),{style:{"grid-area":"tvl"},tvl:o(v),loading:o(i)},null,8,["tvl","loading"])])}}}),Td=L(Ad,[["__scopeId","data-v-d0ed3f63"]]),Ld={},Id={class:"mev"};function Rd(e,t){return _(),$("div",Id,"MEV goes here")}const Vd=L(Ld,[["render",Rd],["__scopeId","data-v-1b58cb9c"]]);function mt(e,t,a){const s=xe(),l=fe("tab",e[0]),c=V(-1);return G(l,r=>c.value=e.findIndex(n=>n===r),{immediate:!0}),G(c,async r=>{r===-1&&(r=0),await s.push({name:t,params:{tab:e[r],...(a==null?void 0:a())??{}},replace:l.value===""})},{immediate:!0}),{tabActive:l,tabActiveIndex:c}}const Pd={class:"pool"},Fd=A({__name:"Pool.page",setup(e){const{show:t,crumbs:a}=U(qe()),s=fe("chain"),l=fe("poolAddr"),{isFetching:c,data:r}=Bu(s,l.value);G(r,u=>{a.value=[{id:"pools",label:"Pools",pathName:"pools",params:()=>({chain:s.value})},{id:"pool",label:`Pool: ${(u==null?void 0:u.name)??"?"}`}]},{immediate:!0}),ce(()=>{t.value=!0});const{tabActive:n,tabActiveIndex:i}=mt(["overview","mev"],"poolspool",()=>({chain:s.value,poolAddr:l.value}));return(u,d)=>{const v=Ge,h=Ee,g=Oe;return _(),$("div",Pd,[m(v,{class:B(["spinner",{loading:o(c)}])},null,8,["class"]),!o(c)&&o(r)?(_(),S(g,{key:0,active:o(i),onTab:d[0]||(d[0]=f=>i.value=f.index)},{default:w(()=>[m(h,{header:"Overview"},{default:w(()=>[(_(),S(me,null,[o(n)==="overview"?(_(),S(Td,{key:0,pool:o(r),chain:o(s)},null,8,["pool","chain"])):q("",!0)],1024))]),_:1}),m(h,{header:"MEV"},{default:w(()=>[(_(),S(me,null,[o(n)==="mev"?(_(),S(Vd,{key:0,pool:o(r),chain:o(s)},null,8,["pool","chain"])):q("",!0)],1024))]),_:1})]),_:1},8,["active"])):q("",!0)])}}}),qd=L(Fd,[["__scopeId","data-v-5ee3289f"]]),Ra=wt("curveStore",()=>{const e=V([]),t=V({}),a=V({});function s(c,r){t.value[c]=r}function l(c,r){a.value[c]=r}return{gauges:e,emissions:t,fees:a,setEmissions:s,setFees:l}});function at(e){const t=e.reduce((a,{timeStamp:s,value:l})=>a.set(s,(a.get(s)??0)+l),new Map);return Array.from(t).map(a=>({timeStamp:a[0],value:a[1]}))}const Dd=A({__name:"ChartEmissions",props:{gaugeSelected:{}},setup(e){const t=Ra(),{theme:a}=U(O()),s=y(()=>{let g="Emissions & Revenues";return g+=` - ${Me(e.gaugeSelected.name)}`,g}),l=y(()=>t.emissions[e.gaugeSelected.name]??[]),c=y(()=>t.fees[e.gaugeSelected.name]??[]),r=y(()=>Math.min(...at(l.value).map(g=>g.value).concat(at(c.value).map(g=>g.value)))),n=y(()=>Math.max(...at(l.value).map(g=>g.value).concat(at(c.value).map(g=>g.value)).map(g=>Math.abs(g)))),i=y(()=>le(a.value,{chart:{id:"curve-emissions",animations:{enabled:!1},toolbar:{tools:{download:!0}}},xaxis:{type:"datetime"},yaxis:[{seriesName:"emissions",tickAmount:4,labels:{formatter:g=>d(g)},min:r,max:n},{seriesName:"emissions",tickAmount:4,labels:{formatter:g=>v(g)},show:!1,min:r,max:n}],plotOptions:{bar:{distributed:!1,dataLabels:{position:"top",hideOverflowingLabels:!1}}},tooltip:{followCursor:!1,enabled:!0,intersect:!1,custom:g=>{const f=g.w.globals.initialSeries[0].data[g.dataPointIndex].y,b=g.w.globals.initialSeries[1].data[g.dataPointIndex]?g.w.globals.initialSeries[1].data[g.dataPointIndex].y:0;return[`<div><b>Emissions</b>:</div><div>${d(f)}</div>`,`<div><b>Fees</b>:</div><div>${v(b)}</div>`,`<div><b>Ratio</b>:</div><div>${h(b/f)}</div>`].join("")}},dataLabels:{enabled:!1},csv:{filename:"emissions.csv",columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter(g){return g}}})),u=y(()=>{const g=at(l.value),f=at(c.value),b=Object.assign({},...f.map(C=>({[C.timeStamp]:C.value})));return[{name:"Emissions",type:"line",data:g.map(C=>({x:C.timeStamp*1e3,y:C.value}))},{name:"Fees",type:"line",data:g.map(C=>({x:C.timeStamp*1e3,y:b[C.timeStamp]?Math.abs(b[C.timeStamp]):0}))}]}),d=g=>`$${K(Math.abs(g),1,"dollar")}${E(g,"dollar")}`,v=g=>`$${K(g,1,"dollar")}${E(g,"dollar")}`,h=g=>Ne(g,2);return(g,f)=>{const b=he;return _(),S(b,{class:"emissions",title:o(s),options:o(i),series:o(u)},null,8,["title","options","series"])}}}),Bd=L(Dd,[["__scopeId","data-v-9f707d66"]]),Md={class:"end"},xd={key:0,class:"charts"},Ud={key:1},Od=A({__name:"TableGauges",props:{expanded:{default:()=>[]}},emits:["selected"],setup(e,{emit:t}){const a=t,s=Ra(),l=y(()=>["",{id:"name",label:"Name",sort:!0},{id:"tvl",label:"TVL",sort:!0,align:"end"}]),{sorting:c,onSort:r}=Ze("tvl"),n=y(()=>s.gauges.orderBy(i=>{switch(c.value.column){case"name":return Me(i.name);case"tvl":return i.tvl}},c.value.order));return(i,u)=>{const d=j,v=ee,h=M;return _(),S(h,{title:"Curve Pools"},{default:w(()=>[m(v,{class:"gauges-tables",rows:o(n),columns:o(l),sorting:o(c),expanded:i.expanded,onSortColumn:o(r),onSelected:u[0]||(u[0]=g=>a("selected",g))},{row:w(g=>[p("div",null,R(o(Me)(g.item.name)),1),p("div",Md,[m(d,{value:g.item.tvl,precision:1,type:"dollar"},null,8,["value"])])]),"row-details":w(g=>[i.expanded.includes(g.item)?(_(),$("div",xd,[m(Bd,{class:"fees-and-emissions","gauge-selected":g.item},null,8,["gauge-selected"])])):(_(),$("span",Ud))]),_:1},8,["rows","columns","sorting","expanded","onSortColumn"])]),_:1})}}}),Ed=L(Od,[["__scopeId","data-v-60d21d9f"]]);class Wd extends Xe{async get(){const t=await this.getHost();return this.fetch(`${t}/curvepool`)}}class Kd extends Xe{async get(t){const a=await this.getHost();return this.fetch(`${a}/curvepoolsnapshots`,{pool:t.name})}}function Gt(){const e=V([]);return{expanded:e,toggleExpansion:a=>{const s=e.value.findIndex(l=>l===a);return s===-1?(e.value.push(a),!0):(e.value.splice(s,1),!1)}}}const Hd={class:"gauges"},Nd=A({__name:"Gauges.page",setup(e){let t=!1;const a=new Wd(je()),s=new Kd(je()),l=Ra(),c=xe(),r=fe("gauge"),{expanded:n,toggleExpansion:i}=Gt();ce(async()=>{t=!0;const h=await bt(a.get());if(h){const g=h.pools;if(g.sort((f,b)=>b.tvl-f.tvl),l.gauges=g,!t)return;r.value&&d(r.value)}}),ga(()=>{t=!1});const u=async h=>{if(!h||l.fees[h.name]&&l.emissions[h.name])return;const g=await bt(s.get(h),500);if(g){const f=g.data.feeSnapshots,b=g.data.emissionSnapshots;l.setFees(h.name,f),l.setEmissions(h.name,b)}},d=h=>{const g=$a(h),f=l.gauges.find(b=>b.name===g);f&&i(f)&&u(f)},v=async h=>{i(h)&&(u(h),await c.push({name:"curvegauges",params:{gauge:Me(h.name)}}))};return(h,g)=>(_(),$("div",Hd,[m(Ed,{class:"gauges-table",expanded:o(n),onSelected:v},null,8,["expanded"])]))}}),zd=L(Nd,[["__scopeId","data-v-1efce19e"]]),Qd=e=>({week:e.week,label:e.label,total_fees:e.total_fees}),jd=e=>({chain:e.chain,totalDailyFeesUSD:e.totalDailyFeesUSD}),Gd=e=>({name:e.name,totalDailyFeesUSD:e.totalDailyFeesUSD}),Xd=e=>({timestamp:ke(e.timestamp),controller:e.controller.toLocaleLowerCase(),collateral:e.collateral,feesUsd:e.fees_usd}),Yd=e=>({timestamp:ke(e.timestamp),chain:e.chain,feesUsd:e.fees_usd}),Zd=e=>({pool:e.pool.toLocaleLowerCase(),name:e.name,adminFees:e.admin_fees,usdValue:e.usd_value}),Jd=e=>({timestamp:ke(e.timestamp),feesUsd:e.fees_usd}),ep=e=>({timestamp:ke(e.dt),coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),precision:e.coin.precision},amount:BigInt(e.amount),amountFee:BigInt(e.fee_amount),amountReceived:e.amount_received,routerReceived:e.router_received,epoch:e.epoch,txHash:e.tx_hash.toLocaleLowerCase(),blockNumber:e.block_number}),tp=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),ap=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),sa="https://api-py.llama.airforce/curve/v1",oa="https://prices.curve.fi";class sp extends Xe{async getBreakdown(t){return(await this.fetch(`${sa}/protocol/revenue/historical/breakdown?from=1686750777`,void 0,t)).revenue.map(Qd)}async getByChain(t){return(await this.fetch(`${sa}/protocol/revenue/chains`,void 0,t)).revenue.map(jd)}async getTopPools(t,a=10){const s=t==="ethereum"?"mainnet":t;return(await this.fetch(`${sa}/protocol/revenue/${s}/toppools/${a}`)).revenue.map(Gd)}async getCrvUsdWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/crvusdweekly`)).fees.map(Xd)}async getPoolsWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/pools`)).fees.map(Yd)}async getCushions(t){return(await this.fetch(`${oa}/v1/dao/fees/${t}/pending`)).data.map(Zd)}async getDistributions(){return await vs(s=>this.fetch(`${oa}/v1/dao/fees/distributions?page=${s}&per_page=100`).then(l=>l.distributions.map(Jd)),1,100)}async getCowSwapSettlements(t){return(await this.fetch(`${oa}/v1/dao/fees/settlements${t?"?timestamp="+t.toString():""}`)).data.map(ep)}async getFeesCollected(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-collected`)).data.map(tp)}async getFeesStaged(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-staged`)).data.map(ap)}}const We=new sp(je());function Je(){return{initialData:[],initialDataUpdatedAt:0}}function op(e){return H({queryKey:["curve-cushions",e],queryFn:({queryKey:[,t]})=>We.getCushions(t).then(a=>a.sort((s,l)=>l.usdValue-s.usdValue)),...Je()})}function np(e){return H({queryKey:["curve-revenue-top-pools",e],queryFn:({queryKey:[,t]})=>We.getTopPools(t),...Je()})}function lp(){return H({queryKey:["curve-revenue-chain"],queryFn:()=>We.getByChain().then(e=>e.sort((t,a)=>a.totalDailyFeesUSD-t.totalDailyFeesUSD)),...Je()})}function rp(){return H({queryKey:["curve-revenue-breakdown"],queryFn:()=>We.getBreakdown(),...Je()})}function ip(){return H({queryKey:["curve-revenue-distributions"],queryFn:()=>We.getDistributions(),initialData:[],initialDataUpdatedAt:0})}function cp(){return H({queryKey:["curve-revenue-cow-settlements"],queryFn:()=>We.getCowSwapSettlements(),...Je()})}function up(){return H({queryKey:["curve-revenue-fees-collected"],queryFn:()=>We.getFeesCollected(),...Je()})}function dp(){return H({queryKey:["curve-revenue-fees-staged"],queryFn:()=>We.getFeesStaged(),...Je()})}const pp=e=>(z("data-v-8fedb755"),e=e(),Q(),e),mp={class:"actions"},vp=pp(()=>p("div",null," DAO revenue goes to veCRV lockers, Liquidity Provider revenue goes to people that LP ",-1)),hp=A({__name:"ChartBreakdown",setup(e){const{theme:t}=U(O()),{items:a}=Pe(()=>[{id:"dao",label:"DAO",color:t.value.colorsArray[0]},{id:"lps",label:"Liquidity Providers",color:t.value.colorsArray[1]}]),{isFetching:s,data:l}=rp(),c=y(()=>{const{colors:h,colorsArray:g}={colors:t.value.colors,colorsArray:[t.value.colorsArray[0],v(t.value.colorsArray[0],10),v(t.value.colorsArray[0],20),t.value.colorsArray[1],v(t.value.colorsArray[1],10)]};return le({colors:h,colorsArray:g},{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:n.value,labels:{formatter:u,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:d},min:0},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})}),r=y(()=>l.value.groupBy(h=>h.week).entries().map(([,h])=>({week:h[0].week,numLabels:h.length})).orderBy(h=>h.week,"asc").dropWhile(h=>h.numLabels<3).map(h=>h.week)),n=y(()=>r.value.map(h=>new Date(h*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),i=y(()=>l.value.groupBy(h=>h.label).entries().map(([h,g])=>({name:h,data:r.value.map(f=>({week:f,breakdown:g.find(b=>b.week===f)})).map(f=>{var b;return{x:new Date(f.week*1e3).toLocaleDateString(),y:((b=f.breakdown)==null?void 0:b.total_fees)??0}})})).orderBy(h=>h.name,"asc")),u=h=>h,d=h=>`$${K(h,0,"dollar")}${E(h,"dollar")}`,v=(h,g)=>{let[f,b,C]=[h.slice(1,3),h.slice(3,5),h.slice(5,7)].map(I=>parseInt(I,16));const k=(I,T)=>Math.min(255,Math.max(0,T+Math.round(2.55*I)));return f=k(g,f),b=k(g,b),C=k(g,C),`#${f.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${C.toString(16).padStart(2,"0")}`};return(h,g)=>{const f=Ve,b=Kt,C=he;return _(),S(C,{class:"chart",title:"Revenue breakdown by source",options:o(c),series:o(i),loading:o(s)},{actions:w(()=>[p("div",mp,[m(f,{items:o(a)},null,8,["items"]),m(b,null,{default:w(()=>[vp]),_:1})])]),_:1},8,["options","series","loading"])}}}),_p=L(hp,[["__scopeId","data-v-8fedb755"]]),fp=A({__name:"ChartChain",setup(e){const{theme:t}=U(O()),{isFetching:a,data:s}=lp(),l=y(()=>le(t.value,{chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!0},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:n=>{const i=n.w.globals.labels[n.seriesIndex],u=n.series[n.seriesIndex][0];return[`<div><b>${i}</b>:</div><div>${r(u)}</div>`].join("")}},labels:s.value.map(n=>n.chain)})),c=y(()=>s.value.map(n=>n.totalDailyFeesUSD)),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"chart",title:"Total revenue by chain",options:o(l),series:o(c),loading:o(a)},null,8,["options","series","loading"])}}}),gp=L(fp,[["__scopeId","data-v-b03db282"]]),yp=A({__name:"ChartTopPools",setup(e){const{theme:t}=U(O()),a=V("ethereum"),{isFetching:s,data:l}=np(a),c=y(()=>le(t.value,{chart:{id:"chainRevenues",type:"bar",animations:{enabled:!1}},xaxis:{categories:l.value.map(u=>u.name),labels:{formatter:n}},plotOptions:{bar:{horizontal:!0}},dataLabels:{style:{fontSize:"11px"},formatter:n,dropShadow:!1},grid:{yaxis:{lines:{show:!1}},xaxis:{lines:{show:!0}}},tooltip:{enabled:!1}}));ce(()=>{i("ethereum")});const r=y(()=>[{data:l.value.map(u=>u.totalDailyFeesUSD)}]),n=u=>`$${K(Math.abs(u),1,"dollar")}${E(u,"dollar")}`,i=u=>{u!=="all"&&(a.value=u)};return(u,d)=>{const v=he;return _(),S(v,{class:"graph",title:"Top 10 pools by revenue (last 7 days)",options:o(c),series:o(r),loading:o(s)},{actions:w(()=>[p("div",{class:B(["selector",{loading:o(s)}])},[m(Tt,{chain:o(a),onSelectChain:i},null,8,["chain"])],2)]),_:1},8,["options","series","loading"])}}}),bp=L(yp,[["__scopeId","data-v-bca33465"]]),wp={class:"revenue-charts"},Cp=A({__name:"Dashboard",setup(e){return(t,a)=>(_(),$("div",wp,[m(_p,{style:{"grid-area":"breakdown"},class:"breakdown"}),m(gp,{style:{"grid-area":"chain"},class:"chain"}),m(bp,{style:{"grid-area":"top-pools"}})]))}}),$p=L(Cp,[["__scopeId","data-v-603b54ec"]]),kp={class:"end"},Sp=A({__name:"TableDistributions",props:{distributions:{}},setup(e){const t=[{id:"timestamp",label:"Date",sort:!0},{id:"fees",label:"Fees",sort:!0,align:"end"}],{sorting:a,onSort:s}=Ze("timestamp"),l=y(()=>e.distributions.orderBy(r=>{switch(a.value.column){case"timestamp":return r.timestamp;case"fees":return r.feesUsd}},a.value.order));function c(r){return new Date(r*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(r,n)=>{const i=j,u=ee,d=M;return _(),S(d,{title:"Distributions"},{default:w(()=>[m(u,{class:"distributions-table",rows:o(l),columns:t,sorting:o(a),onSortColumn:o(s)},{row:w(({item:{timestamp:v,feesUsd:h}})=>[p("div",null,R(c(v)),1),p("div",kp,[m(i,{value:h,precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Ap=L(Sp,[["__scopeId","data-v-7e3c6121"]]),Tp={class:"actions"},Lp=A({__name:"ChartDistributions",props:{distributions:{}},setup(e){const{theme:t}=U(O()),a=V(!1),s=V(void 0),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:t,createChartOptions:i=>te(i,t.value),series:{type:"Histogram",name:"distributions",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`$${K(i,0,"dollar")}${E(i,"dollar")}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.distributions)return;const i=e.distributions.map(u=>({time:u.timestamp,value:u.feesUsd})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc").takeRight(52);if(i.length>0){r.distributions.setData(i);const u=i[0].time,d=i[i.length-1].time;l.value.timeScale().setVisibleRange({from:u,to:d})}}return(i,u)=>{const d=M;return _(),S(d,{ref_key:"chartCard",ref:s,class:"chart-card",title:"Distributions (1y)"},{actions:w(()=>{var v;return[p("div",Tp,[m(o(pt),{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=h=>se(a)?a.value=h:null),chart:o(l),target:(v=o(s))==null?void 0:v.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},512)}}}),Ip=L(Lp,[["__scopeId","data-v-6eb65d1c"]]),Rp={class:"actions"},Vp=A({__name:"ChartDistributionsDelta",props:{distributions:{}},setup(e){const{theme:t}=U(O()),a=V(!1),s=V(void 0),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:t,createChartOptions:i=>te(i,t.value),series:{type:"Histogram",name:"deltas",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`$${K(i,0,"dollar")}${E(i,"dollar")}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.deltas)return;const{colors:i}=t.value,u=e.distributions.map(d=>({time:d.timestamp,value:d.feesUsd})).uniqWith((d,v)=>d.time===v.time).orderBy(d=>d.time,"asc").takeRight(53).reduce((d,v,h,g)=>{if(h===0)return d;const f=v.value-g[h-1].value,b=f<0?i.red:i.green;return d.push({time:v.time,value:f,color:b}),d},[]);if(u.length>0){r.deltas.setData(u);const d=u[0].time,v=u[u.length-1].time;l.value.timeScale().setVisibleRange({from:d,to:v})}}return(i,u)=>{const d=M;return _(),S(d,{ref_key:"chartCard",ref:s,class:"chart-card",title:"Distributions Change (1y)"},{actions:w(()=>{var v;return[p("div",Rp,[m(o(pt),{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=h=>se(a)?a.value=h:null),chart:o(l),target:(v=o(s))==null?void 0:v.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},512)}}}),Pp=L(Vp,[["__scopeId","data-v-84bafe91"]]),Fp={class:"distributions"},qp=A({__name:"Distributions",setup(e){const{isFetching:t,data:a}=ip(),s=y(()=>a.value.sumBy(r=>r.feesUsd)),l=y(()=>a.value.orderBy(r=>r.timestamp,"desc").take(52).meanBy(r=>r.feesUsd)),c=y(()=>{const r=a.value.orderBy(u=>u.timestamp,"desc").take(52).map(u=>u.feesUsd),n=r.meanBy(u=>u),i=r.map(u=>Math.pow(u-n,2));return Math.sqrt(i.sumBy(u=>u)/(r.length-1))});return(r,n)=>{const i=j,u=ve;return _(),$("div",Fp,[m(u,{style:{"grid-area":"kpi1"},label:"Total","has-value":o(a).length>0},{default:w(()=>[m(i,{value:o(s),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(u,{style:{"grid-area":"kpi2"},label:"Average (1y)","has-value":o(a).length>0},{default:w(()=>[m(i,{value:o(l),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(u,{style:{"grid-area":"kpi3"},label:"Standard Deviation (1y)","has-value":o(a).length>0},{default:w(()=>[m(i,{value:o(c),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(Ip,{style:{"grid-area":"chart"},distributions:o(a),loading:o(t)},null,8,["distributions","loading"]),m(Pp,{style:{"grid-area":"delta"},distributions:o(a),loading:o(t)},null,8,["distributions","loading"]),m(Ap,{style:{"grid-area":"table"},distributions:o(a),loading:o(t)},null,8,["distributions","loading"])])}}}),Dp=L(qp,[["__scopeId","data-v-323bca14"]]),Ls=e=>(z("data-v-657998a2"),e=e(),Q(),e),Bp=["href"],Mp={class:"end"},xp=Ls(()=>p("div",null,null,-1)),Up=Ls(()=>p("div",null,null,-1)),Op={class:"end"},Ep=A({__name:"TableCushions",setup(e){const t=V(""),a=y(()=>c.value||i.value),s=V("ethereum"),{data:l,isFetching:c}=Oi(),r=y(()=>n.value.filter(d=>d.usdValue>100).filter(d=>{const v=t.value.toLocaleLowerCase().split(" "),h=g=>v.some(f=>g.toLocaleLowerCase().includes(f));return h(d.pool)||h(d.name)})),{data:n,isFetching:i}=op(s),u=d=>`https://etherscan.io/address/${d}`;return(d,v)=>{const h=Le,g=j,f=ee,b=M;return _(),S(b,{class:"cushions-card",title:"Cushions",loading:o(a)},{actions:w(()=>[m(Tt,{class:"chain-select",chain:o(s),chains:o(l),onSelectChain:v[0]||(v[0]=C=>s.value=C==="all"?"ethereum":C)},null,8,["chain","chains"]),m(h,{modelValue:o(t),"onUpdate:modelValue":v[1]||(v[1]=C=>se(t)?t.value=C:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:w(()=>[m(f,{class:"cushions-table",rows:o(r),columns:["Name","Address",{label:"Fees ($)",align:"end"}]},{row:w(C=>[p("div",null,R(C.item.name),1),p("div",null,[p("a",{class:"font-mono",href:u(C.item.pool),target:"_blank"},R(C.item.pool),9,Bp)]),p("div",Mp,[m(g,{value:C.item.usdValue,precision:2,type:"dollar"},null,8,["value"])])]),"row-aggregation":w(()=>[xp,Up,p("div",Op,[m(g,{value:o(r).reduce((C,k)=>C+k.usdValue,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),Wp=L(Ep,[["__scopeId","data-v-657998a2"]]),Kp={class:"cushions"},Hp=A({__name:"Cushions",setup(e){return(t,a)=>(_(),$("div",Kp,[m(Wp)]))}}),Np=L(Hp,[["__scopeId","data-v-78dd0726"]]),zp=e=>({auctionStartBlock:e.auctionStartBlock,orders:e.auction.orders.map(t=>t),prices:Object.entries(e.auction.prices).reduce((t,[a,s])=>(t[a]=BigInt(s),t),{}),solutions:e.solutions.map(t=>({solver:t.solver,solverAddress:t.solverAddress,score:BigInt(t.score),ranking:t.ranking,clearingPrices:Object.entries(t.clearingPrices).reduce((a,[s,l])=>(a[s]=BigInt(l),a),{}),orders:t.orders.map(a=>({id:a.id,sellAmount:BigInt(a.sellAmount),buyAmount:BigInt(a.buyAmount)}))}))}),Qp="https://api.cow.fi";class jp extends $e{async getCompetition(t){const a=await this.fetch(`${Qp}/mainnet/api/v1/solver_competition/by_tx_hash/${t}`);return zp(a)}}const Gp=new jp;function Xp(e){return H({queryKey:["solver-competition",e],queryFn:({queryKey:[,t]})=>Gp.getCompetition(t)})}const Yp=e=>(z("data-v-e66b8ca2"),e=e(),Q(),e),Zp={class:"settlement-details-body"},Jp={class:"info col"},em={class:"buttons"},tm=Yp(()=>p("i",{class:"fas fa-expand"},null,-1)),am={class:"font-mono json"},sm={key:0,class:"fas fa-trophy"},om={key:1},nm=["href"],lm=A({__name:"SettlementDetails",props:{settlement:{}},setup(e){const{data:t,isPending:a}=Xp(W(()=>e.settlement.txHash)),s=y(()=>t.value?JSON.stringify(t.value,(v,h)=>typeof h=="bigint"?h.toString():h,2):"no data"),l=y(()=>t.value?t.value.solutions.orderBy(v=>v.ranking,"asc"):[]);function c(v){return`https://etherscan.io/address/${v}`}async function r(v){await navigator.clipboard.writeText(v)}async function n(){await navigator.clipboard.writeText(s.value)}function i(v){switch(v){case 1:return"gold";case 2:return"silver";case 3:return"bronze";default:return""}}const u=V(!1),d=V(void 0);return(v,h)=>{const g=ve,f=ge,b=Ts,C=M,k=ee;return _(),S(C,{class:"settlement-details"},{default:w(()=>[p("div",Zp,[p("div",Jp,[m(g,{label:"Auction Start Block","has-value":!o(a)},{default:w(()=>{var I;return[x(R(((I=o(t))==null?void 0:I.auctionStartBlock)??0),1)]}),_:1},8,["has-value"]),m(g,{label:"Solvers","has-value":!o(a)},{default:w(()=>{var I,T;return[x(R(((T=(I=o(t))==null?void 0:I.solutions)==null?void 0:T.length)??0),1)]}),_:1},8,["has-value"]),m(g,{label:"Orders","has-value":!o(a)},{default:w(()=>{var I,T;return[x(R(((T=(I=o(t))==null?void 0:I.orders)==null?void 0:T.length)??0),1)]}),_:1},8,["has-value"]),m(C,{ref_key:"cardJson",ref:d,class:"card-json col",title:"Json"},{actions:w(()=>[p("div",em,[m(f,{icon:"fas fa-link",onClick:h[0]||(h[0]=I=>n())}),m(f,{onClick:h[2]||(h[2]=I=>u.value=!o(u))},{default:w(()=>{var I;return[tm,m(b,{target:(I=o(d))==null?void 0:I.$el,show:o(u),onClose:h[1]||(h[1]=T=>u.value=!1)},null,8,["target","show"])]}),_:1})])]),default:w(()=>[p("div",am,R(o(s)),1)]),_:1},512)]),m(C,{class:"col",title:"Solvers"},{default:w(()=>[m(k,{class:"solvers-table col",rows:o(l)},{row:w(({item:{solver:I,solverAddress:T,ranking:P,score:F}})=>[p("div",{class:B(["trophy",i(P)])},[P<=3?(_(),$("i",sm)):(_(),$("span",om,R(P),1))],2),p("div",null,[p("a",{class:"font-mono",href:c(T),target:"_blank"},R(I),9,nm)]),p("div",null,R(F),1),p("div",null,[m(f,{icon:"fas fa-link",onClick:N=>r(T)},null,8,["onClick"])])]),_:1},8,["rows"])]),_:1})])]),_:1})}}}),rm=L(lm,[["__scopeId","data-v-e66b8ca2"]]),im=e=>(z("data-v-8ab7e470"),e=e(),Q(),e),cm={class:"header-content"},um={class:"token"},dm=["href"],pm={class:"end"},mm={class:"end"},vm={class:"end"},hm={class:"end profit"},_m={class:"end"},fm=["href"],gm={class:"end"},ym=im(()=>p("div",{class:"empty"},null,-1)),Ja=15,bm=A({__name:"TableSettlements",props:{settlements:{}},setup(e){const t=[{id:"token",label:"Token",sort:!1},{id:"amount",label:"Amount",sort:!0,align:"end"},{id:"quote",label:"Quote",sort:!0,align:"end"},{id:"profit",label:"Profit",sort:!0,align:"end"},{id:"profitPct",label:"(%)",sort:!0,align:"end"},{id:"tx",label:"Transaction",sort:!1,align:"end"},{id:"timestamp",label:"Time",sort:!0,align:"end"}],{sorting:a,onSort:s}=Ze("timestamp"),l=y(()=>e.settlements.orderBy(f=>{switch(a.value.column){case"amount":return f.amountReceived;case"quote":return f.routerReceived;case"profit":return v(f);case"profitPct":return h(f);case"timestamp":return f.timestamp}},a.value.order)),{page:c,rowsPage:r,onPage:n}=jt(l,Ja),{expanded:i,toggleExpansion:u}=Gt(),{relativeTime:d}=Ye();function v(f){return f.amountReceived-f.routerReceived}function h(f){return 100*f.amountReceived/f.routerReceived-100}function g(f){const b=f.coin.symbol;return b.includes(":")?b.split(":")[1]:b}return(f,b)=>{const C=Ue,k=Ie,I=j,T=ee,P=M;return _(),S(P,{title:"CowSwap Settlements"},{actions:w(()=>[p("div",cm,[m(C,{"items-count":o(l).length,"items-per-page":Ja,page:o(c),onPage:o(n)},null,8,["items-count","page","onPage"])])]),default:w(()=>[m(T,{class:"settlements-table",rows:o(r),columns:t,sorting:o(a),expanded:o(i),"expand-side":"right",onSortColumn:o(s),onSelected:o(u)},{row:w(({item:F})=>[p("div",um,[m(k,{address:F.coin.address},null,8,["address"]),p("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${F.coin.address}`},R(g(F)),9,dm)]),p("div",pm,[m(I,{value:F.amountReceived,precision:2,type:"dollar"},null,8,["value"])]),p("div",mm,[m(I,{value:F.routerReceived,precision:2,type:"dollar"},null,8,["value"])]),p("div",vm,[F.routerReceived>1?(_(),S(I,{key:0,value:v(F),precision:2,inline:!1,type:"dollar"},null,8,["value"])):q("",!0)]),p("div",hm,[F.routerReceived>1?(_(),S(I,{key:0,class:B(["pct",{green:h(F)>0}]),value:h(F),precision:2,inline:!1,type:"percentage"},null,8,["value","class"])):q("",!0)]),p("div",_m,[p("a",{class:"font-mono",href:`https://explorer.cow.fi/tx/${F.txHash}`,target:"_blank",onClick:b[0]||(b[0]=Te(()=>{},["stop"]))},R(o(Ce)(F.txHash)),9,fm)]),p("div",gm,R(o(d)(F.timestamp)),1)]),"row-details":w(({item:F})=>[ym,o(i).includes(F)?(_(),S(rm,{key:0,settlement:F},null,8,["settlement"])):q("",!0)]),_:1},8,["rows","sorting","expanded","onSortColumn","onSelected"])]),_:1})}}}),wm=L(bm,[["__scopeId","data-v-8ab7e470"]]),Cm={class:"settlements"},$m=A({__name:"Settlements",setup(e){const{isFetching:t,data:a}=cp();return(s,l)=>(_(),$("div",Cm,[m(wm,{style:{"grid-area":"table"},settlements:o(a),loading:o(t)},null,8,["settlements","loading"])]))}}),km=L($m,[["__scopeId","data-v-3297d635"]]),Va=e=>(z("data-v-6adacae7"),e=e(),Q(),e),Sm=["href"],Am={class:"end"},Tm={class:"end"},Lm=Va(()=>p("div",null,null,-1)),Im=Va(()=>p("div",null,null,-1)),Rm=Va(()=>p("div",null,null,-1)),Vm={class:"end"},Pm=A({__name:"TableFeesCollected",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:a,onSort:s}=Ze("amountUsd"),l=y(()=>e.fees.orderBy(c=>{switch(a.value.column){case"symbol":return c.coin.symbol;case"amount":return c.amount;default:return c.amountUsd}},a.value.order));return(c,r)=>{const n=Ie,i=j,u=ee,d=M;return _(),S(d,{title:"Fees Collected"},{default:w(()=>[m(u,{rows:o(l),columns:t,sorting:o(a),onSortColumn:o(s)},{row:w(({item:v})=>[m(n,{address:v.coin.address},null,8,["address"]),p("div",null,[p("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},R(v.coin.symbol),9,Sm)]),p("div",Am,[m(i,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",Tm,[m(i,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":w(()=>[Lm,Im,Rm,p("div",Vm,[m(i,{value:o(l).reduce((v,h)=>v+h.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Fm=L(Pm,[["__scopeId","data-v-6adacae7"]]),Pa=e=>(z("data-v-a71a8f4a"),e=e(),Q(),e),qm=["href"],Dm={class:"end"},Bm={class:"end"},Mm=Pa(()=>p("div",null,null,-1)),xm=Pa(()=>p("div",null,null,-1)),Um=Pa(()=>p("div",null,null,-1)),Om={class:"end"},Em=A({__name:"TableFeesStaged",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:a,onSort:s}=Ze("amountUsd"),l=y(()=>e.fees.orderBy(c=>{switch(a.value.column){case"symbol":return c.coin.symbol;case"amount":return c.amount;default:return c.amountUsd}},a.value.order));return(c,r)=>{const n=Ie,i=j,u=ee,d=M;return _(),S(d,{title:"Fees Staged"},{default:w(()=>[m(u,{rows:o(l),columns:t,sorting:o(a),onSortColumn:o(s)},{row:w(({item:v})=>[m(n,{address:v.coin.address},null,8,["address"]),p("div",null,[p("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},R(v.coin.symbol),9,qm)]),p("div",Dm,[m(i,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",Bm,[m(i,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":w(()=>[Mm,xm,Um,p("div",Om,[m(i,{value:o(l).reduce((v,h)=>v+h.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Wm=L(Em,[["__scopeId","data-v-a71a8f4a"]]),Km={class:"harvesting"},Hm=A({__name:"Harvesting",setup(e){const{isFetching:t,data:a}=up(),{isFetching:s,data:l}=dp();return(c,r)=>(_(),$("div",Km,[m(Fm,{style:{"grid-area":"collected"},fees:o(a),loading:o(t)},null,8,["fees","loading"]),m(Wm,{style:{"grid-area":"staged"},fees:o(l),loading:o(s)},null,8,["fees","loading"])]))}}),Nm=L(Hm,[["__scopeId","data-v-2bec8864"]]),zm={class:"revenue"},Qm=A({__name:"Revenue.page",setup(e){const{tabActive:t,tabActiveIndex:a}=mt(["overview","distributions","cushions","settlements","harvesting"],"revenue");return(s,l)=>{const c=Ee,r=Oe;return _(),$("div",zm,[m(r,{active:o(a),onTab:l[0]||(l[0]=n=>a.value=n.index)},{default:w(()=>[m(c,{header:"Revenue"},{default:w(()=>[(_(),S(me,null,[o(t)==="overview"?(_(),S($p,{key:0})):q("",!0)],1024))]),_:1}),m(c,{header:"Distributions"},{default:w(()=>[(_(),S(me,null,[o(t)==="distributions"?(_(),S(Dp,{key:0})):q("",!0)],1024))]),_:1}),m(c,{header:"Cushions"},{default:w(()=>[(_(),S(me,null,[o(t)==="cushions"?(_(),S(Np,{key:0})):q("",!0)],1024))]),_:1}),m(c,{header:"Settlements"},{default:w(()=>[(_(),S(me,null,[o(t)==="settlements"?(_(),S(km,{key:0})):q("",!0)],1024))]),_:1}),m(c,{header:"Harvesting"},{default:w(()=>[(_(),S(me,null,[o(t)==="harvesting"?(_(),S(Nm,{key:0})):q("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),jm=L(Qm,[["__scopeId","data-v-cb282f5b"]]),Gm=e=>(z("data-v-2597b74b"),e=e(),Q(),e),Xm={class:"end"},Ym={class:"end"},Zm={class:"end"},Jm={class:"end"},ev=Gm(()=>p("div",null,null,-1)),tv={class:"end"},av={class:"end"},sv={class:"end"},ov={class:"end"},nv=A({__name:"TablePegkeepers",setup(e){const t=V(""),a=y(()=>d.value||c.value),s=y(()=>r.value.map(g=>{const f=v.value.find(b=>g.pool_address===b.address);if(f)return{...f,...g}}).filter(Qn).orderBy(g=>g.tvlUsd,"desc")),l=y(()=>s.value.filter(g=>{const f=t.value.toLocaleLowerCase().split(" "),b=C=>f.some(k=>C.toLocaleLowerCase().includes(k));return b(g.name)||b(g.address)})),{isFetching:c,data:r}=Ss(),n=g=>`${g.pair[1].symbol} / ${g.pair[0].symbol}`,i=y(()=>r.value.map(g=>g.pool_address)),u=Mu(V("ethereum"),i),d=y(()=>u.value.some(g=>g.isFetching)),v=y(()=>u.value.filter(g=>g.data).map(g=>g.data)),h=g=>g>=1e6?2:0;return(g,f)=>{const b=Le,C=j,k=ee,I=M;return _(),S(I,{class:"pegkeepers-card",title:"Pegkeepers",loading:o(a)},{actions:w(()=>[m(b,{modelValue:o(t),"onUpdate:modelValue":f[0]||(f[0]=T=>se(t)?t.value=T:null),placeholder:"Search for..",search:!0},null,8,["modelValue"])]),default:w(()=>[m(k,{class:"pegkeepers-table",rows:o(l),columns:["Name",{label:"Debt",align:"end"},{label:"TVL",align:"end"},{label:"Volume",align:"end"},{label:"Fees",align:"end"}]},{row:w(T=>[p("div",null,R(n(T.item)),1),p("div",Xm,[m(C,{value:T.item.total_debt,precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",Ym,[m(C,{value:T.item.tvlUsd,precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",Zm,[m(C,{value:T.item.tradingVolume24h,precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",Jm,[m(C,{value:T.item.total_profit,precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":w(()=>[ev,p("div",tv,[m(C,{value:o(l).reduce((T,P)=>T+P.total_debt,0),precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",av,[m(C,{value:o(l).reduce((T,P)=>T+P.tvlUsd,0),precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",sv,[m(C,{value:o(l).reduce((T,P)=>T+P.tradingVolume24h,0),precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])]),p("div",ov,[m(C,{value:o(l).reduce((T,P)=>T+P.total_profit,0),precision:h,"show-zero":!0,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),lv=L(nv,[["__scopeId","data-v-2597b74b"]]),Fa=e=>(z("data-v-6dd6abdd"),e=e(),Q(),e),rv={class:"end"},iv={class:"end"},cv={class:"end"},uv={class:"end"},dv={class:"end"},pv={class:"end"},mv=Fa(()=>p("div",null,null,-1)),vv=Fa(()=>p("div",null,null,-1)),hv={class:"end"},_v=Fa(()=>p("div",null,null,-1)),fv={class:"end"},gv={class:"end"},yv={class:"end"},bv={class:"end"},wv=A({__name:"TableMarkets",emits:["selected"],setup(e,{emit:t}){const a=t,s=V(""),l=y(()=>r.value.filter(i=>{const u=s.value.toLocaleLowerCase().split(" "),d=v=>u.some(h=>v.toLocaleLowerCase().includes(h));return d(i.name)||d(i.address)}).orderBy(i=>i.borrowed,"desc")),{isFetching:c,data:r}=Ta(),n=i=>i>=1e6?2:0;return(i,u)=>{const d=Le,v=j,h=ee,g=M;return _(),S(g,{class:"markets-card",title:"Markets",loading:o(c)},{actions:w(()=>[m(d,{modelValue:o(s),"onUpdate:modelValue":u[0]||(u[0]=f=>se(s)?s.value=f:null),placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:w(()=>[m(h,{class:"markets-table","expand-side":"left",rows:o(l),columns:["","Name",{label:"Loans",align:"end"},{label:"Rate",align:"end"},{label:"Borrowed",align:"end"},{label:"Collateral",align:"end"},{label:"Fees Pending",align:"end"},{label:"Fees Collected",align:"end"}],onSelected:u[1]||(u[1]=f=>a("selected",f))},{row:w(f=>[p("div",null,R(f.item.name),1),p("div",rv,R(f.item.loans),1),p("div",iv,[m(v,{value:f.item.rate*100,precision:2,type:"percentage"},null,8,["value"])]),p("div",cv,[m(v,{value:f.item.borrowed,precision:n,"show-symbol":!1,type:"dollar"},null,8,["value"])]),p("div",uv,[m(v,{value:f.item.collateralUsd,precision:n,type:"dollar"},null,8,["value"])]),p("div",dv,[m(v,{value:f.item.fees.pending,precision:n,type:"dollar"},null,8,["value"])]),p("div",pv,[m(v,{value:f.item.fees.collected,precision:n,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":w(()=>[mv,vv,p("div",hv,R(o(l).reduce((f,b)=>f+b.loans,0)),1),_v,p("div",fv,[m(v,{value:o(l).reduce((f,b)=>f+b.borrowed,0),precision:n,"show-symbol":!1,type:"dollar"},null,8,["value"])]),p("div",gv,[m(v,{value:o(l).reduce((f,b)=>f+b.collateralUsd,0),precision:n,type:"dollar"},null,8,["value"])]),p("div",yv,[m(v,{value:o(l).reduce((f,b)=>f+b.fees.pending,0),precision:n,type:"dollar"},null,8,["value"])]),p("div",bv,[m(v,{value:o(l).reduce((f,b)=>f+b.fees.collected,0),precision:n,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-details":w(()=>[x("   ")]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),Cv=L(wv,[["__scopeId","data-v-6dd6abdd"]]),$v=A({__name:"ChartCrvUsdPriceHistogram",setup(e){const{theme:t}=U(O()),{isFetching:a,data:s}=ec(),l=y(()=>le(t.value,{chart:{type:"bar",animations:{enabled:!1}},xaxis:{categories:c.value,labels:{formatter:n},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:i}},plotOptions:{bar:{columnWidth:"75%"}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,custom:u=>{const d=c.value[u.dataPointIndex],v=u.series[0][u.dataPointIndex];return[`<div><b>${d}</b>:</div><div>${i(v)}</div>`].join("")}}})),c=y(()=>s.value.x.map(u=>u.toString())),r=y(()=>[{data:s.value.y}]),n=u=>{const d=u-1;return d<0?`-$${d.toString().substring(2,7)}`:`$${d.toString().substring(1,6)}`},i=u=>{var h,g;const d=((g=(h=r.value[0])==null?void 0:h.data)==null?void 0:g.reduce((f,b)=>f+b,0))??1,v=u/d*100;return`${K(v,0,"dollar")}${E(v,"percentage")}`};return(u,d)=>{const v=he;return _(),S(v,{class:"chart",title:"crvUSD Price Deviation from $1 Histogram",loading:o(a),options:o(l),series:o(r)},null,8,["loading","options","series"])}}}),kv=L($v,[["__scopeId","data-v-c5b8eb50"]]),Sv={class:"actions"},Av={class:"chart-types"},Tv=A({__name:"ChartCrvUsdSupply",setup(e){const{theme:t}=U(O()),a=V("line"),{items:s}=Pe(()=>[{id:"supply",label:"Supply",color:t.value.colorsArray[0]},{id:"borrowed",label:"Borrowed",color:t.value.colorsArray[1]}]),{isFetching:l,data:c}=Ji(),r=n=>{a.value!==n&&(a.value=n)};return(n,i)=>{const u=Ve,d=It,v=M;return _(),S(v,{class:"chart-container",title:"crvUSD Supply",loading:o(l)},{actions:w(()=>[p("div",Sv,[o(a)==="line"?(_(),S(u,{key:0,items:o(s)},null,8,["items"])):q("",!0),p("div",Av,[m(d,{value:"Line","model-value":o(a)==="line",onClick:i[0]||(i[0]=h=>r("line"))},null,8,["model-value"]),m(d,{value:"Breakdown","model-value":o(a)==="breakdown",onClick:i[1]||(i[1]=h=>r("breakdown"))},null,8,["model-value"])])])]),default:w(()=>[(_(),S(me,null,[o(a)==="line"?(_(),S(o(Vv),{key:0,data:o(c)},null,8,["data"])):q("",!0)],1024)),(_(),S(me,null,[o(a)==="breakdown"?(_(),S(o(Rv),{key:0,data:o(c)},null,8,["data"])):q("",!0)],1024))]),_:1},8,["loading"])}}}),Lv=L(Tv,[["__scopeId","data-v-47d6feeb"]]),Iv=A({__name:"ChartCrvUsdSupplyBreakdown",props:{data:{default:()=>[]}},setup(e){const{theme:t}=U(O()),a=y(()=>le(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:n},min:0,max:c.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=y(()=>e.data.orderBy(i=>i.timestamp,"asc").groupBy(i=>i.timestamp).entries().map(([i])=>new Date(parseInt(i,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((i,u)=>u%8===0?i:"")),l=y(()=>e.data.groupBy(i=>i.market).entries().map(([i,u])=>({name:i,data:u.groupBy(d=>d.timestamp).entries().map(([d,v])=>({x:new Date(parseInt(d,10)*1e3).toLocaleDateString(),y:v.reduce((h,g)=>h+g.supply,0)})).orderBy(d=>d.x,"asc")}))),c=y(()=>Math.max(...e.data.groupBy(i=>i.timestamp).entries().map(([,i])=>i.reduce((u,d)=>u+d.supply,0)))*1.1),r=i=>i,n=i=>`${K(i,1,"dollar")}${E(i,"dollar")}`;return(i,u)=>{const d=Qt;return _(),S(d,{class:"chart",options:o(a),series:o(l)},null,8,["options","series"])}}}),Rv=L(Iv,[["__scopeId","data-v-1ccdf5c2"]]),Vv=A({__name:"ChartCrvUsdSupplyLine",props:{data:{default:()=>[]}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:n=>te(n,t.value),series:[{type:"Area",name:"supply",options:y(()=>({priceFormat:{type:"custom",formatter:r},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:y(()=>({priceFormat:{type:"custom",formatter:r},lineWidth:2,lineType:ie.WithSteps,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});J(c);function c(){if(!a.value||!l.debt||!l.supply)return;const n=e.data.groupBy(u=>u.timestamp).entries().map(([,u])=>{var d;return{time:u[0].timestamp,value:u.reduce((v,h)=>v+h.supply,0),debt:((d=u.find(v=>v.market==="Keepers debt"))==null?void 0:d.supply)??0}}).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc"),i=n.map(u=>({time:u.time,value:u.value-u.debt}));n.length>0&&l.supply.setData(n),i.length>0&&l.debt.setData(i),a.value.timeScale().fitContent()}function r(n){return`${K(n,0,"dollar")}${E(n,"dollar")}`}return(n,i)=>(_(),$("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512))}}),Pv=A({__name:"ChartMarketAvailableCap",props:{market:{}},setup(e){const{isFetching:t,data:a}=zt(W(()=>e.market)),{theme:s}=U(O()),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:s,createChartOptions:i=>te(i,s.value),series:{type:"Area",name:"available",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`$${K(i,0,"dollar")}${E(i,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:s.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.available)return;const i=a.value.map(u=>({time:u.timestamp,value:u.borrowable})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc").dropWhile(u=>u.value===0);i.length>0&&r.available.setData(i),l.value.timeScale().fitContent()}return(i,u)=>{const d=M;return _(),S(d,{class:"chart-container",title:"Borrowable & Debt Ceiling",loading:o(t)},{default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},8,["loading"])}}}),Fv=L(Pv,[["__scopeId","data-v-c9d93c4c"]]),qv=A({__name:"ChartMarketLoans",props:{market:{}},setup(e){const{isFetching:t,data:a}=zt(W(()=>e.market)),{theme:s}=U(O()),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:s,createChartOptions:i=>te(i,s.value,{localization:{priceFormatter:u=>Math.round(u).toString()}}),series:{type:"Histogram",name:"loans",options:y(()=>({color:s.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.loans)return;const i=a.value.map(u=>({time:u.timestamp,value:u.nLoans})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc");if(i.length>0){r.loans.setData(i);const u=i[0].time,d=i[i.length-1].time;l.value.timeScale().setVisibleRange({from:u,to:d})}}return(i,u)=>{const d=M;return _(),S(d,{class:"chart-container",title:"Loans",loading:o(t)},{default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},8,["loading"])}}}),Dv=L(qv,[["__scopeId","data-v-30e5e2d2"]]),Bv=["min","max"],Mv=A({__name:"InputNumber",props:Fe({min:{default:()=>-1/0},max:{default:()=>1/0}},{modelValue:{required:!0,default:null},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=dt(e,"modelValue");return G(t,a=>{a===""?t.value=null:typeof a=="number"&&(t.value=Math.min(Math.max(a,e.min),e.max))}),(a,s)=>fa((_(),$("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),type:"number",min:a.min,max:a.max},null,8,Bv)),[[cs,t.value]])}}),qa=L(Mv,[["__scopeId","data-v-4bb37a2c"]]),xv={class:"actions"},Uv=A({__name:"ChartMarketRates",props:{market:{}},setup(e){const{isFetching:t,data:a}=zt(W(()=>e.market)),{theme:s}=U(O()),l=V(null),{chart:c,chartRef:r,series:n}=ae({recreateChartTrigger:s,createChartOptions:v=>te(v,s.value),series:[{type:"Area",name:"rates",options:y(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,lineType:ie.WithSteps,lineColor:s.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"ema",options:y(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,lineType:ie.WithSteps,color:s.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});J(i);function i(){if(!c.value||!n.rates||!n.ema)return;const v=a.value.map(f=>({time:f.timestamp,value:f.rate})).uniqWith((f,b)=>f.time===b.time).orderBy(f=>f.time,"asc"),g=d(v.map(f=>f.value),l.value??31).zip(v).map(f=>({time:f[1].time,value:f[0]}));if(g.length>0&&n.ema.setData(g),v.length>0){n.rates.setData(v);const f=v[0].time,b=v[v.length-1].time;c.value.timeScale().setVisibleRange({from:f,to:b})}}function u(v){return`${K(v*100,0,"percentage")}${E(v,"percentage")}`}const d=(v,h=7)=>v.map((g,f)=>{const b=Math.max(f-(h-1),0),C=f+1,k=v.slice(b,C);return k.reduce((T,P)=>T+P,0)/k.length});return(v,h)=>{const g=qa,f=M;return _(),S(f,{class:"chart-container",title:"Rates",loading:o(t)},{actions:w(()=>[p("div",xv,[m(g,{modelValue:o(l),"onUpdate:modelValue":h[0]||(h[0]=b=>se(l)?l.value=b:null),class:"avg-span",placeholder:"Avg span (days)",min:1,max:1/0},null,8,["modelValue"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:r,class:"chart"},null,512)]),_:1},8,["loading"])}}}),Ov=L(Uv,[["__scopeId","data-v-10d7e239"]]),Ev=e=>{const t=e.provider.toLocaleLowerCase(),a=e.deposit?{amount:e.deposit.amount,n1:e.deposit.n1,n2:e.deposit.n2}:null,s=e.withdrawal?{amount_borrowed:e.withdrawal.amount_borrowed,amount_collateral:e.withdrawal.amount_collateral}:null,l=e.block_number,c=e.timestamp,r=e.transaction_hash.toLocaleLowerCase();return{provider:t,deposit:a,withdrawal:s,block_number:l,timestamp:c,transaction_hash:r}},Wv=e=>({sold_id:e.sold_id,bought_id:e.bought_id,token_sold:{symbol:e.token_sold.symbol,address:e.token_sold.address.toLocaleLowerCase()},token_bought:{symbol:e.token_bought.symbol,address:e.token_bought.address.toLocaleLowerCase()},amount_sold:e.amount_sold,amount_bought:e.amount_bought,price:e.price,buyer:e.buyer.toLocaleLowerCase(),fee_x:e.fee_x,fee_y:e.fee_y,block_number:e.block_number,timestamp:e.timestamp,transaction_hash:e.transaction_hash}),Kv=e=>({time:e.time,open:e.open,close:e.close,high:e.high,low:e.low,base_price:e.base_price,oracle_price:e.oracle_price,volume:e.volume}),na="https://prices.curve.fi";class Hv extends $e{async getEvents(t,a,s,l){const c=await this.fetch(`${na}/v1/${t}/llamma_events/${a}/${s}?page=${l}&per_page=10`);return{events:c.data.map(Ev),count:c.count}}async getTrades(t,a,s,l){const c=await this.fetch(`${na}/v1/${t}/llamma_trades/${a}/${s}?page=${l}&per_page=10`);return{trades:c.data.map(Wv),count:c.count}}async getOHLC(t,a,s){const l=Math.floor(new Date().getTime()/1e3),c=l-10*24*60*60;return(await this.fetch(`${na}/v1/${t}/llamma_ohlc/${a}/${s}?agg_number=1&agg_units=hour&start=${c}&end=${l}`)).data.map(Kv)}}const Da=new Hv;function Is(e,t,a,s){return H({queryKey:["llamma-market-events",t,s],queryFn:({queryKey:[,l,c]})=>Da.getEvents(e.value,a.value,l,c),placeholderData:Wt,enabled:y(()=>!!t.value&&!!a.value)})}function Rs(e,t,a,s){return H({queryKey:["llamma-market-trades",t,s],queryFn:({queryKey:[,l,c]})=>Da.getTrades(e.value,a.value,l,c),placeholderData:Wt,enabled:y(()=>!!t.value&&!!a.value)})}function Ba(e,t,a){return H({queryKey:["llamma-market-ohlc",t],queryFn:({queryKey:[,s]})=>Da.getOHLC(e.value,a.value,s),enabled:y(()=>!!t.value&&!!a.value)})}const Nv=A({__name:"ChartMarketVolume",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:a}=Ba(W("crvusd"),y(()=>{var i;return(i=e.market)==null?void 0:i.llamma}),W(()=>e.chain)),{theme:s}=U(O()),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:s,createChartOptions:i=>te(i,s.value),series:{type:"Area",name:"volume",options:y(()=>({priceFormat:{type:"custom",formatter:i=>`$${K(i,0,"dollar")}${E(i,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:s.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.volume)return;const i=(a.value??[]).map(u=>({time:u.time,value:u.volume})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc");i.length>0&&r.volume.setData(i),l.value.timeScale().fitContent()}return(i,u)=>{const d=M;return _(),S(d,{class:"chart-container",title:"Volume",loading:o(t)},{default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},8,["loading"])}}}),zv=L(Nv,[["__scopeId","data-v-4276f7f8"]]),Qv={class:"actions"},jv=A({__name:"ChartKeeperPrices",setup(e){const{theme:t}=U(O()),a=["USDC","USDT","TUSD","USDP"],{items:s,toggles:l,disabled:c}=Pe(()=>a.map((k,I)=>({id:k,label:k,color:t.value.colorsArray[I],togglable:!0}))),r=y(()=>n.value||u.value),{isFetching:n,data:i}=Ss(),{isFetching:u,data:d}=tc(i),v=V(!1),h=V(void 0),{chart:g,chartRef:f,series:b}=ae({recreateChartTrigger:t,createChartOptions:k=>te(k,t.value),series:a.map((k,I)=>({type:"Line",name:k,options:y(()=>({priceFormat:{type:"custom",formatter:T=>`${K(T,3,"dollar")}${E(T,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,color:t.value.colorsArray[I],lastValueVisible:!1,priceLineVisible:!1,autoscaleInfoProvider:T=>{const P=T();return P!==null&&(P.priceRange.minValue=Math.max(.98,P.priceRange.minValue),P.priceRange.maxValue=Math.min(1.02,P.priceRange.maxValue)),P}}))}))});J(C);function C(){var k,I;if(!(!g.value||Object.values(b).length<0)){for(const[,T]of a.entries()){if(!l[T].value){(k=b[T])==null||k.setData([]);continue}const P=d.value.map(F=>({time:F.timestamp,value:F[T]})).uniqWith((F,N)=>F.time===N.time).orderBy(F=>F.time,"asc");P.length>0&&((I=b[T])==null||I.setData(P))}g.value.timeScale().fitContent()}}return(k,I)=>{const T=Ve,P=M;return _(),S(P,{ref_key:"chartCard",ref:h,class:"chart-container",title:"Stablecoin Prices of Pegkeepers",loading:o(r)},{actions:w(()=>{var F;return[p("div",Qv,[m(T,{items:o(s),disabled:o(c),onToggle:I[0]||(I[0]=N=>o(l)[N].value=!o(l)[N].value)},null,8,["items","disabled"]),m(o(pt),{modelValue:o(v),"onUpdate:modelValue":I[1]||(I[1]=N=>se(v)?v.value=N:null),chart:o(g),target:(F=o(h))==null?void 0:F.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:f,class:"chart"},null,512)]),_:1},8,["loading"])}}}),Gv=L(jv,[["__scopeId","data-v-d6623148"]]),Xv={class:"crvusd"},Yv={class:"col"},Zv={class:"col"},Jv=A({__name:"CrvUsd.page",setup(e){const{show:t,crumbs:a}=U(qe());ce(()=>{t.value=!0,a.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:"Select market for details",hint:!0}]});const s=xe(),l=async c=>{await s.push({name:"crvusdmarket",params:{tab:"",marketAddr:c.address}})};return(c,r)=>(_(),$("div",Xv,[m(o(Cv),{style:{"grid-column":"1 / -1"},onSelected:l}),p("div",Yv,[m(o(lv)),m(o(Gv))]),p("div",Zv,[m(o(Lv)),m(o(kv))])]))}}),eh=L(Jv,[["__scopeId","data-v-c459ffd2"]]),th=["href"],ah={key:1},sh=A({__name:"Addresses",props:{market:{}},setup(e){const t=y(()=>{var l,c,r;return[{description:"Controller",address:(l=e.market)==null?void 0:l.address},{description:"Factory",address:(c=e.market)==null?void 0:c.factory},{description:"Llamma",address:(r=e.market)==null?void 0:r.llamma}]}),a=l=>`https://etherscan.io/address/${l}`,s=async l=>{await navigator.clipboard.writeText(l)};return(l,c)=>{const r=ge,n=ee,i=M;return _(),S(i,{class:"addresses",title:"Addresses"},{default:w(()=>[m(n,{class:"addresses-table",rows:o(t)},{row:w(({item:{description:u,address:d}})=>[p("div",null,R(u),1),p("div",null,[d?(_(),$("a",{key:0,class:"font-mono",href:a(d),target:"_blank"},R(d),9,th)):(_(),$("span",ah,"?"))]),p("div",null,[m(r,{icon:"fas fa-link",onClick:v=>s(d)},null,8,["onClick"])])]),_:1},8,["rows"])]),_:1})}}}),oh=L(sh,[["__scopeId","data-v-ab0b00a1"]]),nh={key:0},lh={class:"token-info"},rh=["href"],ih={key:1},ch=A({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(r){return typeof r=="object"&&r.type==="token"}function a(r,n){return n?r==="collateral"?{type:"token",symbol:n.collateral_token.symbol,address:n.collateral_token.address}:{type:"token",symbol:n.stablecoin_token.symbol,address:n.stablecoin_token.address}:{type:"token",symbol:"?",address:"?"}}const s=y(()=>[{description:"Collateral",value:a("collateral",e.market)},{description:"Borrowed",value:a("borrowed",e.market)}]),l=r=>`https://etherscan.io/address/${r}`,c=async r=>{await navigator.clipboard.writeText(r)};return(r,n)=>{const i=Ie,u=ge,d=ee,v=M;return _(),S(v,{class:"properties",title:"Properties"},{default:w(()=>[m(d,{class:"properties-table",rows:o(s)},{row:w(({item:{description:h,value:g}})=>[p("div",null,R(h),1),t(g)?(_(),$("div",nh,[p("div",lh,[m(i,{chain:r.chain,address:g.address},null,8,["chain","address"]),p("div",null,R(g.symbol),1),p("div",null,[p("a",{class:"font-mono",href:l(g.address),target:"_blank"},R(g.address),9,rh)]),p("div",null,[m(u,{icon:"fas fa-link",onClick:f=>c(g.address)},null,8,["onClick"])])])])):(_(),$("div",ih,R(g),1))]),_:1},8,["rows"])]),_:1})}}}),uh=L(ch,[["__scopeId","data-v-f07f33c1"]]),dh={class:"market"},ph=A({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){return(t,a)=>{const s=j,l=ve;return _(),$("div",dh,[m(l,{style:{"grid-area":"kpi1"},label:"Borrow Rate","has-value":!!t.market},{default:w(()=>{var c;return[m(s,{value:100*(((c=t.market)==null?void 0:c.rate)??0),type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(l,{style:{"grid-area":"kpi2"},label:"Borrowed","has-value":!!t.market},{default:w(()=>{var c;return[m(s,{value:(c=t.market)==null?void 0:c.borrowed,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(l,{style:{"grid-area":"kpi3"},label:"Borrowable","has-value":!!t.market},{default:w(()=>{var c;return[m(s,{value:(c=t.market)==null?void 0:c.borrowable,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(l,{style:{"grid-area":"kpi4"},label:"Loans","has-value":!!t.market},{default:w(()=>{var c;return[x(R(((c=t.market)==null?void 0:c.loans)??0),1)]}),_:1},8,["has-value"]),m(o(Ov),{style:{"grid-area":"rates"},market:t.market},null,8,["market"]),m(o(Fv),{style:{"grid-area":"cap"},market:t.market},null,8,["market"]),m(o(Dv),{style:{"grid-area":"loans"},market:t.market},null,8,["market"]),m(o(zv),{style:{"grid-area":"volume"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(uh),{style:{"grid-area":"properties"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(oh),{style:{"grid-area":"addresses"},market:t.market,chain:t.chain},null,8,["market","chain"])])}}}),mh=L(ph,[["__scopeId","data-v-945ab763"]]),vh=e=>({timestamp:ke(e.timestamp),proportion:e.proportion/100}),hh=e=>({timestamp:ke(e.dt),user:e.user.toLocaleLowerCase(),liquidator:e.liquidator.toLocaleLowerCase(),self:e.self,collateralReceived:e.collateral_received,collateralReceivedUsd:e.collateral_received_usd,stablecoinReceived:e.stablecoin_received,priceOracle:e.oracle_price,debt:e.debt,n1:e.n1,n2:e.n2,tx:e.tx.toLocaleLowerCase(),block:e.block}),_h=e=>({timestamp:ke(e.timestamp),selfCount:e.self_count,hardCount:e.hard_count,selfValue:e.self_value,hardValue:e.hard_value,price:e.price}),fh=e=>({softLiqUsers:e.soft_liquidation_users,liqablePositions:e.liquidatable_positions,liqableDebtUsd:e.liquidatable_pos_debt_usd,liqableCollatUsd:e.liquidatable_collateral_usd,liqableBorrowedUsd:e.liquidatable_borrowed_usd,medianHealth:e.median_health,avgHealth:e.average_health,collatRatio:e.collat_ratio}),gh=e=>({timestamp:ke(e.timestamp),pctLossAverage:e.avg_pct_loss,pctLossMedian:e.median_pct_loss,absoluteLossAverage:e.avg_abs_loss,absoluteLossMedian:e.median_abs_loss,numTotalUsers:e.total_users,numUsersWithLosses:e.users_with_losses,ratio:e.ratio}),yh=e=>({decile:e.health_decile,collateralUsdValue:e.collateral,debt:e.debt,stablecoin:e.stablecoin}),st="https://prices.curve.fi";class bh extends $e{async getSoftLiqRatios(t,a,s){return(await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/soft_liquidation_ratio`)).data.map(vh)}async getLiqsDetailed(t,a,s){return(await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/history/detailed`)).data.map(hh)}async getLiqsAggregate(t,a,s){return(await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/history/aggregated`)).data.map(_h)}async getLiqOverview(t,a,s){const l=await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/overview?fetch_on_chain=true`);return fh(l)}async getLiqLosses(t,a,s){return(await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/losses/history`)).data.map(gh)}async getLiqHealthDeciles(t,a,s){return(await this.fetch(`${st}/v1/${t}/liquidations/${a}/${s}/health/distribution`)).data.map(yh)}}const vt=new bh;function Rt(){return{initialData:[],initialDataUpdatedAt:0}}function ht(e,t){return{enabled:y(()=>!!e.value&&(t?!!t.value:!0))}}function Vs(e,t,a){return H({queryKey:["liqs-soft-liqs",a],queryFn:({queryKey:[,s]})=>vt.getSoftLiqRatios(e.value,t.value,s),...ht(a,t),...Rt()})}function Ps(e,t,a){return H({queryKey:["liqs-detailed",a],queryFn:({queryKey:[,s]})=>vt.getLiqsDetailed(e.value,t.value,s),...ht(a,t),...Rt()})}function Fs(e,t,a){return H({queryKey:["liqs-aggregate",a],queryFn:({queryKey:[,s]})=>vt.getLiqsAggregate(e.value,t.value,s),...ht(a,t),...Rt()})}function qs(e,t,a){return H({queryKey:["liqs-overview",a],queryFn:({queryKey:[,s]})=>vt.getLiqOverview(e.value,t.value,s),...ht(a,t)})}function Ds(e,t,a){return H({queryKey:["liqs-losses",a],queryFn:({queryKey:[,s]})=>vt.getLiqLosses(e.value,t.value,s),...ht(a,t),...Rt()})}function Bs(e,t,a){return H({queryKey:["liqs-health-deciles",a],queryFn:({queryKey:[,s]})=>vt.getLiqHealthDeciles(e.value,t.value,s),...ht(a,t),...Rt()})}const wh={class:"actions"},Ch={class:"chart-types"},$h=A({__name:"ChartLiqs",props:{liqs:{default:()=>[]}},setup(e){const t=V("count"),a=s=>{t.value!==s&&(t.value=s)};return(s,l)=>{const c=It,r=M;return _(),S(r,{class:"chart-container",title:"Self & Hard Liquidations"},{actions:w(()=>[p("div",wh,[p("div",Ch,[m(c,{value:"Count","model-value":o(t)==="count",onClick:l[0]||(l[0]=n=>a("count"))},null,8,["model-value"]),m(c,{value:"Value","model-value":o(t)==="value",onClick:l[1]||(l[1]=n=>a("value"))},null,8,["model-value"])])])]),default:w(()=>[o(t)==="count"?(_(),S(o(Sh),{key:0,liqs:s.liqs},null,8,["liqs"])):(_(),S(o(Th),{key:1,liqs:s.liqs},null,8,["liqs"]))]),_:1})}}}),Ms=L($h,[["__scopeId","data-v-55fa1b9b"]]),kh=A({__name:"ChartLiqsCount",props:{liqs:{default:()=>[]}},setup(e){const{theme:t}=U(O()),a=y(()=>le(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:n},min:0,max:c.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=y(()=>e.liqs.orderBy(i=>i.timestamp,"asc").groupBy(i=>i.timestamp).entries().map(([i])=>new Date(parseInt(i,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((i,u)=>u%8===0?i:"")),l=y(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(i=>({x:new Date(i.timestamp*1e3).toLocaleDateString(),y:i.selfCount}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(i=>({x:new Date(i.timestamp*1e3).toLocaleDateString(),y:i.hardCount}))}]),c=y(()=>Math.max(...e.liqs.groupBy(i=>i.timestamp).entries().map(([,i])=>i.reduce((u,d)=>u+d.selfCount+d.hardCount,0)))*1.1),r=i=>i,n=i=>`${K(i,1,"dollar")}${E(i,"dollar")}`;return(i,u)=>{const d=Qt;return _(),S(d,{class:"chart",options:o(a),series:o(l)},null,8,["options","series"])}}}),Sh=L(kh,[["__scopeId","data-v-90b199b1"]]),Ah=A({__name:"ChartLiqsValue",props:{liqs:{default:()=>[]}},setup(e){const{theme:t}=U(O()),a=y(()=>le(t.value,{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:r,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:n},min:0,max:c.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=y(()=>e.liqs.orderBy(i=>i.timestamp,"asc").groupBy(i=>i.timestamp).entries().map(([i])=>new Date(parseInt(i,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((i,u)=>u%8===0?i:"")),l=y(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(i=>({x:new Date(i.timestamp*1e3).toLocaleDateString(),y:i.selfValue}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(i=>({x:new Date(i.timestamp*1e3).toLocaleDateString(),y:i.hardValue}))}]),c=y(()=>Math.max(...e.liqs.groupBy(i=>i.timestamp).entries().map(([,i])=>i.reduce((u,d)=>u+d.selfValue+d.hardValue,0)))*1.1),r=i=>i,n=i=>`${K(i,1,"dollar")}${E(i,"dollar")}`;return(i,u)=>{const d=Qt;return _(),S(d,{class:"chart",options:o(a),series:o(l)},null,8,["options","series"])}}}),Th=L(Ah,[["__scopeId","data-v-11507ff4"]]),Lh=A({__name:"ChartLiqsMedianLoss",props:{losses:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Area",name:"losses",options:y(()=>({priceFormat:{type:"custom",formatter:r=>`${K(r,0,"percentage")}${E(r,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(c);function c(){if(!a.value||!l.losses)return;const r=e.losses.map(n=>({time:n.timestamp,value:n.pctLossMedian})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.losses.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=M;return _(),S(i,{class:"chart-container",title:"Median Loss % Among Loans with Losses"},{default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),xs=L(Lh,[["__scopeId","data-v-a3d777f5"]]),Ih=A({__name:"ChartLiqsLosersProportion",props:{losses:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Area",name:"losses",options:y(()=>({priceFormat:{type:"custom",formatter:r=>`${K(r,0,"percentage")}${E(r,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(c);function c(){if(!a.value||!l.losses)return;const r=e.losses.map(n=>({time:n.timestamp,value:n.numTotalUsers>0?100*n.numUsersWithLosses/n.numTotalUsers:0})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.losses.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=M;return _(),S(i,{class:"chart-container",title:"Proportion of Loans with Losses"},{default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),Us=L(Ih,[["__scopeId","data-v-64aa176d"]]),Rh=A({__name:"ChartLiqsHealthDeciles",props:{deciles:{}},setup(e){const{theme:t}=U(O()),a=y(()=>le(t.value,{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:s.value,labels:{formatter:c,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:r}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:n=>{const i=n.series[0][n.dataPointIndex],u=n.series[1][n.dataPointIndex],d=n.series[2][n.dataPointIndex];return[`<div><b>Collat. (USD)</b>: ${r(u)}</div>`,`<div><b>Debt</b>: ${r(i)}</div>`,`<div><b>Stablecoin</b>: ${r(d)}</div>`].join("")}}})),s=y(()=>e.deciles.map(n=>n.decile)),l=y(()=>[{name:"Debt",data:Object.values(e.deciles).map(n=>n.debt)},{name:"Collateral",data:Object.values(e.deciles).map(n=>n.collateralUsdValue)},{name:"Stablecoin",data:Object.values(e.deciles).map(n=>n.stablecoin)}]),c=n=>n,r=n=>`$${K(n,0,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"chart",title:"Debt & Assets per Health Deciles",options:o(a),series:o(l)},null,8,["options","series"])}}}),Os=L(Rh,[["__scopeId","data-v-7e53d83b"]]),Vh={class:"actions"},Ph=A({__name:"ChartLiqsSoftLiqRatio",props:{ratios:{},pricesOracle:{}},setup(e){const{theme:t}=U(O()),{items:a}=Pe(()=>[{id:"percentage",label:"% of loans in soft liquidation",color:t.value.colorsArray[0]},{id:"collateral-price",label:"Collateral price ($)",color:t.value.colorsArray[1]}]),{chart:s,chartRef:l,series:c}=ae({recreateChartTrigger:t,createChartOptions:n=>te(n,t.value,{leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"price",options:y(()=>({priceFormat:{type:"custom",formatter:n=>`$${K(n,2,"dollar")}${E(n,"dollar")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.yellow,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"ratio",options:y(()=>({priceFormat:{type:"custom",formatter:n=>`${K(n,0,"percentage")}${E(n,"percentage")}`},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});J(r);function r(){if(!s.value||!c.price||!c.ratio)return;const n=e.ratios.map(d=>({time:d.timestamp,value:d.proportion})).uniqWith((d,v)=>d.time===v.time).orderBy(d=>d.time,"asc"),i=n.length>0?n[0].time:0,u=e.pricesOracle.filter(d=>d.timestamp>=i).map(d=>({time:d.timestamp,value:d.priceOracle})).uniqWith((d,v)=>d.time===v.time).orderBy(d=>d.time,"asc");u.length>0&&c.price.setData(u),n.length>0&&c.ratio.setData(n),s.value.timeScale().fitContent()}return(n,i)=>{const u=Ve,d=M;return _(),S(d,{class:"chart-container",title:"Soft Liquidations Ratio"},{actions:w(()=>[p("div",Vh,[m(u,{items:o(a)},null,8,["items"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:l,class:"chart"},null,512)]),_:1})}}}),Es=L(Ph,[["__scopeId","data-v-e2b66e3b"]]),Fh={class:"actions"},qh=A({__name:"ChartLiquidatorRevenue",props:{discounts:{},liqs:{}},setup(e){const{theme:t}=U(O()),{items:a}=Pe(()=>[{id:"revenue",label:"Liquidator Revenue",color:t.value.colorsArray[0]},{id:"discount",label:"Discount",color:t.value.colorsArray[1]}]),{chart:s,chartRef:l,series:c}=ae({recreateChartTrigger:t,createChartOptions:n=>te(n,t.value,{leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"revenue",options:y(()=>({priceFormat:{type:"price",precision:0,minMove:1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"discount",options:y(()=>({priceFormat:{type:"percent",precision:6,minMove:1e-6},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.yellow,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});J(r);function r(){if(!s.value||!c.discount||!c.revenue)return;const n=e.liqs.map(d=>({time:d.timestamp,value:d.debt})).uniqWith((d,v)=>d.time===v.time).orderBy(d=>d.time,"asc").reduce((d,v)=>{const h=d.length>0?d[d.length-1].value:0;return d.push({time:v.time,value:v.value+h}),d},[]),i=n.length>0?n[0].time:0,u=e.discounts.filter(d=>d.timestamp>=i).map(d=>({time:d.timestamp,value:d.discount*100})).uniqWith((d,v)=>d.time===v.time).orderBy(d=>d.time,"asc");n.length>0&&c.revenue.setData(n),u.length>0&&c.discount.setData(u),s.value.timeScale().fitContent()}return(n,i)=>{const u=Ve,d=M;return _(),S(d,{class:"chart-container",title:"Liquidator Revenue"},{actions:w(()=>[p("div",Fh,[m(u,{items:o(a)},null,8,["items"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:l,class:"chart"},null,512)]),_:1})}}}),Ws=L(qh,[["__scopeId","data-v-6e4e397d"]]),Dh={key:0,class:"end"},Bh={key:1,class:"end"},Mh={key:2},xh=A({__name:"TableLiqOverview",props:{overview:{}},setup(e){const t=y(()=>{if(!e.overview)return[];const s=e.overview.liqableDebtUsd,l=e.overview.liqableCollatUsd+e.overview.liqableBorrowedUsd,c=s-l;return c<=0?[]:[{description:"Bad debt",value:c,type:"bad-debt"}]}),a=y(()=>{var s,l,c,r,n,i,u;return[{description:"Users in soft liquidation",value:((s=e.overview)==null?void 0:s.softLiqUsers)??0,type:"number"},{description:"Median health",value:((l=e.overview)==null?void 0:l.medianHealth)??0,type:"percentage"},{description:"Collaterization ratio",value:((c=e.overview)==null?void 0:c.collatRatio)??0,type:"percentage"},{description:"Liquidatable positions",value:((r=e.overview)==null?void 0:r.liqablePositions)??0,type:"number"},{description:"Liquidatable positions' debt",value:((n=e.overview)==null?void 0:n.liqableDebtUsd)??0,type:"dollar"},{description:"Liquidatable collateral (token / crvUSD)",value:[((i=e.overview)==null?void 0:i.liqableCollatUsd)??0,((u=e.overview)==null?void 0:u.liqableBorrowedUsd)??0],type:"collateral"},...t.value]});return(s,l)=>{const c=j,r=ee,n=M;return _(),S(n,{title:"General Health Metrics"},{default:w(()=>[m(r,{class:"liq-overview-table",rows:o(a)},{row:w(({item:{description:i,value:u,type:d}})=>[p("div",null,R(i),1),d==="collateral"?(_(),$("div",Dh,[m(c,{value:u[0],"show-zero":!0,type:"dollar"},null,8,["value"]),x(" / "),m(c,{value:u[1],"show-zero":!0,type:"dollar"},null,8,["value"])])):(_(),$("div",Bh,[d==="bad-debt"?(_(),S(c,{key:0,class:"red",value:u,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])):d!=="number"?(_(),S(c,{key:1,value:u,"show-zero":!0,type:d},null,8,["value","type"])):(_(),$("span",Mh,R(u),1))]))]),_:1},8,["rows"])]),_:1})}}}),Ks=L(xh,[["__scopeId","data-v-ef463f79"]]),Uh={class:"address"},Oh=["href"],Eh={class:"end"},Wh={class:"end"},Kh=A({__name:"TableTopLiquidators",props:{liqs:{}},setup(e){const t=y(()=>e.liqs.groupBy(a=>a.liquidator).entries().map(([a,s])=>({liquidator:a,count:s.length,value:s.reduce((l,c)=>l+c.collateralReceivedUsd,0)})).orderBy(a=>a.value,"desc").take(5));return(a,s)=>{const l=j,c=ee,r=M;return _(),S(r,{title:"Top Liquidators"},{default:w(()=>[m(c,{class:"liquidators-table",rows:o(t),columns:["Address",{label:"Count",align:"end"},{label:"Value",align:"end"}]},{row:w(n=>[p("div",Uh,[p("a",{href:`https://etherscan.io/address/${n.item.liquidator}`,target:"_blank"},R(o(Ce)(n.item.liquidator,8)),9,Oh)]),p("div",Eh,[m(l,{value:n.item.count,precision:0,"show-zero":!0},null,8,["value"])]),p("div",Wh,[m(l,{value:n.item.value,precision:1,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1})}}}),Hs=L(Kh,[["__scopeId","data-v-e5a62507"]]),Hh=A({__name:"ChartCollateralRatio",props:{ratios:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Area",name:"ratios",options:y(()=>({priceFormat:{type:"custom",formatter:r=>`${K(r,0,"percentage")}${E(r,"percentage")}`,minMove:.1},lineWidth:2,lineType:ie.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});J(c);function c(){if(!a.value||!l.ratios)return;const r=e.ratios.map(n=>({time:n.timestamp,value:n.ratio*100})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.ratios.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=M;return _(),S(i,{class:"chart-container",title:"Collateral Ratio"},{default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),Ns=L(Hh,[["__scopeId","data-v-542ef5aa"]]),Nh=e=>(z("data-v-780de7cc"),e=e(),Q(),e),zh={class:"actions"},Qh=Nh(()=>p("span",null,[x(" This chart shows the difference between the value of the collateral and the debt."),p("br"),p("br"),x(" Positive values indicate net equity (collateral exceeds debt),"),p("br"),x(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)),jh=A({__name:"ChartEquity",props:{equity:{}},setup(e){const{theme:t}=U(O()),{chart:a,chartRef:s,series:l}=ae({recreateChartTrigger:t,createChartOptions:r=>te(r,t.value),series:{type:"Baseline",name:"equity",options:y(()=>{const{colors:r}=t.value;return{priceFormat:{type:"custom",formatter:n=>`$${K(n,0,"dollar")}${E(n,"dollar")}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:r.green,bottomLineColor:r.red,lastValueVisible:!1,priceLineVisible:!1}})}});J(c);function c(){if(!a.value||!l.equity)return;const r=e.equity.map(n=>({time:n.timestamp,value:n.equity})).uniqWith((n,i)=>n.time===i.time).orderBy(n=>n.time,"asc");r.length>0&&l.equity.setData(r),a.value.timeScale().fitContent()}return(r,n)=>{const i=Kt,u=M;return _(),S(u,{class:"chart-container",title:"Equity"},{actions:w(()=>[p("div",zh,[m(i,null,{default:w(()=>[Qh]),_:1})])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),_:1})}}}),Gh=L(jh,[["__scopeId","data-v-780de7cc"]]),Xh={class:"liquidations"},Yh=A({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=y(()=>{var T;return(T=e.market)==null?void 0:T.address}),{isFetching:a,data:s}=qs(V("crvusd"),W(()=>e.chain),t),{isFetching:l,data:c}=zt(W(()=>e.market)),r=y(()=>c.value.map(({timestamp:T,priceOracle:P})=>({timestamp:T,priceOracle:P}))),n=y(()=>c.value.map(({timestamp:T,discountLiquidation:P})=>({timestamp:T,discount:P}))),i=y(()=>c.value.map(({timestamp:T,totalCollateralUsd:P,totalDebt:F})=>({timestamp:T,ratio:P/F}))),{isFetching:u,data:d}=Vs(V("crvusd"),W(()=>e.chain),t),{isFetching:v,data:h}=Fs(V("crvusd"),W(()=>e.chain),t),{isFetching:g,data:f}=Ps(V("crvusd"),W(()=>e.chain),t),{isFetching:b,data:C}=Bs(V("crvusd"),W(()=>e.chain),t),{isFetching:k,data:I}=Ds(V("crvusd"),W(()=>e.chain),t);return(T,P)=>(_(),$("div",Xh,[m(o(Ks),{overview:o(s),loading:o(a)},null,8,["overview","loading"]),m(o(Es),{ratios:o(d),"prices-oracle":o(r),loading:o(u)||o(l)},null,8,["ratios","prices-oracle","loading"]),m(o(xs),{losses:o(I),loading:o(k)},null,8,["losses","loading"]),m(o(Us),{losses:o(I),loading:o(k)},null,8,["losses","loading"]),m(o(Os),{deciles:o(C),loading:o(b)},null,8,["deciles","loading"]),m(o(Ns),{ratios:o(i),loading:o(l)},null,8,["ratios","loading"]),m(o(Ms),{liqs:o(h),loading:o(v)},null,8,["liqs","loading"]),m(o(Hs),{liqs:o(f),loading:o(g)},null,8,["liqs","loading"]),m(o(Ws),{discounts:o(n),liqs:o(f),loading:o(l)||o(g)},null,8,["discounts","liqs","loading"])]))}}),Zh=L(Yh,[["__scopeId","data-v-08e46367"]]),Jh={class:"controls"},e_=A({__name:"ChartOHLC",props:{ohlc:{}},setup(e){const{theme:t}=U(O()),a=V(!1),s=V(!1);let l=1,c=0;const{chart:r,chartRef:n,series:i}=ae({recreateChartTrigger:t,createChartOptions:v=>te(v,t.value,{localization:{priceFormatter:h=>d(h)}}),series:[{type:"Candlestick",name:"ohlc",options:y(()=>{const{colors:v}=t.value;return{priceFormat:{type:"price",precision:6,minMove:1e-6},upColor:v.green,borderUpColor:v.green,wickUpColor:v.green,downColor:v.red,borderDownColor:v.red,wickDownColor:v.red}})},{type:"Line",name:"oracle",options:y(()=>({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ie.WithSteps,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}]});J(u);function u(){if(!r.value||!i.ohlc||!i.oracle)return;const v=a.value?-1:1,h=e.ohlc.map(f=>({time:f.time,open:Math.pow(f.open,v),high:Math.pow(f.high,v),low:Math.pow(f.low,v),close:Math.pow(f.close,v)})).uniqWith((f,b)=>f.time===b.time).orderBy(f=>f.time,"asc");h.length>0&&(i.ohlc.setData(h),c=Math.min(...h.map(f=>f.low)),l=Math.max(...h.map(f=>f.high)));const g=e.ohlc.map(f=>({time:f.time,value:Math.pow(f.oracle_price,v)})).uniqWith((f,b)=>f.time===b.time).orderBy(f=>f.time,"asc");g.length>0&&i.oracle.setData(g),i.oracle.applyOptions({visible:s.value}),r.value.timeScale().fitContent()}const d=v=>{const h=l-c,g=h>1?h-Math.floor(h):h,f=-Math.floor(Math.log10(g)+1)+2;return`${K(v,f,"dollar")}${E(v,"dollar")}`};return(v,h)=>{const g=It,f=M;return _(),S(f,{class:"chart-container",title:"Price"},{actions:w(()=>[p("div",Jh,[m(g,{value:"Oracle Price","model-value":o(s),onClick:h[0]||(h[0]=b=>s.value=!o(s))},null,8,["model-value"]),m(g,{value:"Invert","model-value":o(a),onClick:h[1]||(h[1]=b=>a.value=!o(a))},null,8,["model-value"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:n,class:"chart"},null,512)]),_:1})}}}),zs=L(e_,[["__scopeId","data-v-5595004d"]]),t_=e=>(z("data-v-b563290d"),e=e(),Q(),e),a_={class:"end"},s_=t_(()=>p("div",null,null,-1)),o_=["href"],n_={class:"end"},l_=["href"],r_=A({__name:"TableEvents",props:{events:{},count:{}},emits:["page"],setup(e,{emit:t}){const a=t,{page:s,onPage:l}=Ia(),c=Ut(s,200);G(c,d=>{a("page",d)});const{relativeTime:r}=Ye(),n=d=>d<1?d.toFixed(4):d>1e3?d.toFixed(0):d.toFixed(2),i=d=>{var v,h;return n(((v=d.deposit)==null?void 0:v.amount)??((h=d.withdrawal)==null?void 0:h.amount_collateral)??0)},u=d=>d.deposit?"Deposit":d.withdrawal?"Withdrawal":"Unknown";return(d,v)=>{const h=Ue,g=ee,f=M;return _(),S(f,{title:"Events"},{actions:w(()=>[m(h,{"items-count":d.count,"items-per-page":10,page:o(s),onPage:o(l)},null,8,["items-count","page","onPage"])]),default:w(()=>[m(g,{class:"events-table",rows:d.events,columns:["Type",{label:"Amount",align:"end"},"","Provider",{label:"Time",align:"end"}]},{row:w(({item:b})=>[p("div",null,R(u(b)),1),p("div",a_,R(i(b)),1),s_,p("div",null,[p("a",{href:`https://etherscan.io/address/${b.provider}`,target:"_blank",onClick:v[0]||(v[0]=Te(()=>{},["stop"]))},R(o(Ce)(b.provider)),9,o_)]),p("div",n_,[p("a",{href:`https://etherscan.io/tx/${b.transaction_hash}`,target:"_blank",onClick:v[1]||(v[1]=Te(()=>{},["stop"]))},R(o(r)(b.timestamp)),9,l_)])]),_:1},8,["rows"])]),_:1})}}}),Qs=L(r_,[["__scopeId","data-v-b563290d"]]),i_={class:"end"},c_=["href"],u_={class:"end"},d_=["href"],p_=["href"],m_={class:"end"},v_=["href"],h_=A({__name:"TableTrades",props:{trades:{},count:{},chain:{}},emits:["page"],setup(e,{emit:t}){const a=t,{page:s,onPage:l}=Ia(),c=Ut(s,200);G(c,i=>{a("page",i)});const{relativeTime:r}=Ye(),n=i=>i<1?i.toFixed(4):i>1e3?i.toFixed(0):i.toFixed(2);return(i,u)=>{const d=Ue,v=Ie,h=ee,g=M;return _(),S(g,{title:"Trades"},{actions:w(()=>[m(d,{"items-count":i.count,"items-per-page":10,page:o(s),onPage:o(l)},null,8,["items-count","page","onPage"])]),default:w(()=>[m(h,{class:"trades-table",rows:i.trades,columns:[{label:"Bought",align:"end"},"","",{label:"Sold",align:"end"},"","","Market Maker",{label:"Time",align:"end"}]},{row:w(({item:f})=>[p("div",i_,R(n(f.amount_bought)),1),m(v,{chain:i.chain,address:f.token_bought.address},null,8,["chain","address"]),p("div",null,[p("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${f.token_bought.address}`},R(f.token_bought.symbol),9,c_)]),p("div",u_,R(n(f.amount_sold)),1),m(v,{chain:i.chain,address:f.token_sold.address},null,8,["chain","address"]),p("div",null,[p("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${f.token_sold.address}`},R(f.token_sold.symbol),9,d_)]),p("div",null,[p("a",{href:`https://etherscan.io/address/${f.buyer}`,target:"_blank",onClick:u[0]||(u[0]=Te(()=>{},["stop"]))},R(o(Ce)(f.buyer)),9,p_)]),p("div",m_,[p("a",{href:`https://etherscan.io/tx/${f.transaction_hash}`,target:"_blank",onClick:u[1]||(u[1]=Te(()=>{},["stop"]))},R(o(r)(f.timestamp)),9,v_)])]),_:1},8,["rows"])]),_:1})}}}),js=L(h_,[["__scopeId","data-v-f1af0563"]]),__={class:"trading"},f_=A({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=y(()=>{var d;return(d=e.market)==null?void 0:d.llamma}),{isFetching:a,data:s}=Ba(V("crvusd"),t,W(()=>e.chain)),l=V(1),{isFetching:c,data:r}=Rs(V("crvusd"),t,W(()=>e.chain),l),n=V(1),{isFetching:i,data:u}=Is(V("crvusd"),t,W(()=>e.chain),n);return(d,v)=>{var h,g,f,b;return _(),$("div",__,[m(o(zs),{style:{"grid-area":"ohlc"},ohlc:o(s)??[],loading:o(a)},null,8,["ohlc","loading"]),m(o(js),{style:{"grid-area":"trades"},trades:((h=o(r))==null?void 0:h.trades)??[],count:((g=o(r))==null?void 0:g.count)??0,chain:d.chain,loading:o(c),onPage:v[0]||(v[0]=C=>l.value=C)},null,8,["trades","count","chain","loading"]),m(o(Qs),{style:{"grid-area":"events"},events:((f=o(u))==null?void 0:f.events)??[],count:((b=o(u))==null?void 0:b.count)??0,loading:o(i),onPage:v[1]||(v[1]=C=>n.value=C)},null,8,["events","count","loading"])])}}}),g_=L(f_,[["__scopeId","data-v-fb72a747"]]),y_={class:"market-overview"},b_=A({__name:"Market.page",setup(e){const{show:t,crumbs:a}=U(qe()),s=fe("marketAddr"),{isFetching:l,data:c}=Ta(),r=y(()=>c.value.find(u=>u.address===s.value));G(r,u=>{a.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:`Market: ${(u==null?void 0:u.name)??"?"}`}]},{immediate:!0}),ce(()=>{t.value=!0});const{tabActive:n,tabActiveIndex:i}=mt(["overview","trading","liquidations"],"crvusdmarket",()=>({marketAddr:s.value}));return(u,d)=>{const v=Ge,h=Ee,g=Oe;return _(),$("div",y_,[m(v,{class:B(["spinner",{loading:o(l)}])},null,8,["class"]),!o(l)&&o(r)?(_(),S(g,{key:0,active:o(i),onTab:d[0]||(d[0]=f=>i.value=f.index)},{default:w(()=>[m(h,{header:"Overview"},{default:w(()=>[(_(),S(me,null,[o(n)==="overview"?(_(),S(mh,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):q("",!0)],1024))]),_:1}),m(h,{header:"Trading"},{default:w(()=>[(_(),S(me,null,[o(n)==="trading"?(_(),S(g_,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):q("",!0)],1024))]),_:1}),m(h,{header:"Liquidations"},{default:w(()=>[(_(),S(me,null,[o(n)==="liquidations"?(_(),S(Zh,{key:0,market:o(r),chain:"ethereum"},null,8,["market"])):q("",!0)],1024))]),_:1})]),_:1},8,["active"])):q("",!0)])}}}),w_=L(b_,[["__scopeId","data-v-9ba821e5"]]);function it(e){return e?e.total_assets_usd+e.collateral_balance_usd:0}const C_=e=>({name:e.name,controller:e.controller.toLocaleLowerCase(),vault:e.vault.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),policy:e.policy.toLocaleLowerCase(),oracle:e.oracle.toLocaleLowerCase(),rate:parseFloat(e.rate),borrow_apy:parseFloat(e.borrow_apy),lend_apy:parseFloat(e.lend_apy),n_loans:e.n_loans,price_oracle:parseFloat(e.price_oracle),amm_price:parseFloat(e.amm_price),total_debt:parseFloat(e.total_debt),total_assets:parseFloat(e.total_assets),total_debt_usd:parseFloat(e.total_debt_usd),total_assets_usd:parseFloat(e.total_assets_usd),minted:parseFloat(e.minted),redeemed:parseFloat(e.redeemed),minted_usd:parseFloat(e.minted_usd),redeemed_usd:parseFloat(e.redeemed_usd),collateral_balance:parseFloat(e.collateral_balance),borrowed_balance:parseFloat(e.borrowed_balance),collateral_balance_usd:parseFloat(e.collateral_balance_usd),borrowed_balance_usd:parseFloat(e.borrowed_balance_usd),collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},borrowed_token:{symbol:e.borrowed_token.symbol,address:e.borrowed_token.address.toLocaleLowerCase()}}),$_=e=>{const t=parseFloat(e.rate),a=parseFloat(e.borrow_apy)/100,s=parseFloat(e.lend_apy)/100,l=e.n_loans,c=parseFloat(e.price_oracle),r=parseFloat(e.amm_price),n=parseFloat(e.total_debt),i=parseFloat(e.total_debt_usd),u=parseFloat(e.total_assets),d=parseFloat(e.total_assets_usd),v=parseFloat(e.minted),h=parseFloat(e.redeemed),g=parseFloat(e.collateral_balance),f=parseFloat(e.collateral_balance_usd),b=parseFloat(e.borrowed_balance),C=parseFloat(e.borrowed_balance_usd),k=ke(e.timestamp),I=e.liquidation_discount,T=e.loan_discount;return{rate:t,borrowApy:a,lendApy:s,numLoans:l,priceOracle:c,ammPrice:r,totalDebt:n,totalDebtUsd:i,totalAssets:u,totalAssetsUsd:d,minted:v,redeemed:h,collateralBalance:g,collateralBalanceUsd:f,borrowedBalance:b,borrowedBalanceUsd:C,timestamp:k,discountLiquidation:I,discountLoan:T}},la="https://prices.curve.fi";class k_ extends $e{async getChains(){return this.fetch(`${la}/v1/lending/chains`).then(t=>t.data)}async getMarkets(t){return(await this.fetch(`${la}/v1/lending/markets/${t}?fetch_on_chain=true&page=1&per_page=100`)).data.map(C_)}async getSnapshots(t,a){return(await this.fetch(`${la}/v1/lending/markets/${t}/${a}/snapshots?fetch_on_chain=true&agg=day`)).data.map($_)}}const Ma=new k_;function S_(e){return y(()=>{var t;return(t=e.value)==null?void 0:t.controller})}function A_(){return{initialData:[],initialDataUpdatedAt:0}}function T_(){return H({queryKey:["llama-markets-chains"],queryFn:()=>Ma.getChains(),initialData:["ethereum"],initialDataUpdatedAt:0})}function Gs(e){return H({queryKey:["llama-markets",e],queryFn:({queryKey:[,t]})=>Ma.getMarkets(t)})}function _t(e,t){return H({queryKey:["llama-market-snapshots",S_(e)],queryFn:({queryKey:[,a]})=>Ma.getSnapshots(t.value,a),...A_(),enabled:y(()=>!!e.value&&!!t.value)})}const Vt=e=>(z("data-v-06735a04"),e=e(),Q(),e),L_={class:"end"},I_={class:"end"},R_={class:"end"},V_={class:"end"},P_=Vt(()=>p("div",null,null,-1)),F_=Vt(()=>p("div",null,null,-1)),q_=Vt(()=>p("div",null,null,-1)),D_=Vt(()=>p("div",null,null,-1)),B_=Vt(()=>p("div",null,null,-1)),M_={class:"end"},x_={class:"end"},U_=A({__name:"TableMarkets",props:{pairs:{default:()=>[]},loading:{type:Boolean},type:{},chain:{}},emits:["selected"],setup(e,{emit:t}){const a=t,s=y(()=>e.type==="long"?"Markets - Long":"Markets - Short"),l=y(()=>e.pairs.map(n=>({count:(n.long?1:0)+(n.short?1:0),...n})).orderBy([n=>n.count,({long:n,short:i})=>it(n)+it(i)],["desc","desc"]).map(({long:n,short:i})=>e.type==="long"?n:i));function c(n){return n.name.replace(/(-long|-short)/i,"")}const r=n=>e.type==="long"?n.collateral_token.address:n.borrowed_token.address;return(n,i)=>{const u=Ie,d=j,v=ee,h=M;return _(),S(h,{title:o(s),loading:n.loading},{default:w(()=>[m(v,{class:"markets-table","expand-side":"left",rows:o(l),columns:["","","Name",{label:"Borrow Rate",align:"end"},{label:"Lend Rate",align:"end"},{label:"TVL",align:"end"},{label:"Loans",align:"end"}],onSelected:i[0]||(i[0]=g=>a("selected",g))},{row:w(({item:g})=>[g?(_(),$(Z,{key:0},[m(u,{chain:n.chain,address:r(g)},null,8,["chain","address"]),p("div",null,R(c(g)),1),p("div",L_,[g.borrow_apy?(_(),S(d,{key:0,value:g.borrow_apy,type:"percentage"},null,8,["value"])):q("",!0)]),p("div",I_,[g.lend_apy?(_(),S(d,{key:0,value:g.lend_apy,type:"percentage"},null,8,["value"])):q("",!0)]),p("div",R_,[o(it)(g)?(_(),S(d,{key:0,value:o(it)(g),type:"dollar"},null,8,["value"])):q("",!0)]),p("div",V_,R(g.n_loans),1)],64)):q("",!0)]),"row-aggregation":w(()=>[P_,F_,q_,D_,B_,p("div",M_,[m(d,{value:o(l).filter(g=>g).map(g=>g).reduce((g,f)=>g+o(it)(f),0),type:"dollar"},null,8,["value"])]),p("div",x_,R(o(l).filter(g=>g).map(g=>g).reduce((g,f)=>g+f.n_loans,0)),1)]),"row-details":w(()=>[x("   ")]),_:1},8,["rows"])]),_:1},8,["title","loading"])}}}),es=L(U_,[["__scopeId","data-v-06735a04"]]),O_={class:"llamalend"},E_={class:"toolbar"},W_={class:"markets"},K_={class:"kpis"},H_={class:"markets"},N_={class:"kpis"},z_=A({__name:"LlamaLend.page",setup(e){const t=fe("chain"),a=y({get(){return t.value?t.value:"ethereum"},set(b){t.value=b}}),s=V(""),l=y(()=>c.value.filter(({long:b,short:C})=>{const k=s.value.toLocaleLowerCase().split(" ");return(T=>k.some(P=>T.toLocaleLowerCase().includes(P)))(`${(b==null?void 0:b.name)??""}${(C==null?void 0:C.name)??""}`)})),c=y(()=>{const b=["crvusd"],C=(n.value??[]).map(T=>({market:T,isLong:b.includes(T.borrowed_token.symbol.toLocaleLowerCase()),isShort:b.includes(T.collateral_token.symbol.toLocaleLowerCase())})).filter(({isLong:T,isShort:P})=>T||P),k=[],I=new Set;for(const{market:T,isLong:P,isShort:F}of C){if(I.has(T.controller))continue;I.add(T.controller);const N=C.find(Se=>Se.market.borrowed_token.address===T.collateral_token.address&&Se.market.collateral_token.address===T.borrowed_token.address);N&&I.add(N.market.controller),k.push({long:P?T:N==null?void 0:N.market,short:F?T:N==null?void 0:N.market})}return k}),{isFetching:r,data:n}=Gs(a),{data:i}=T_(),{show:u,crumbs:d}=U(qe());ce(()=>{u.value=!0,d.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:a.value})},{id:"market",label:"Select market for details",hint:!0}]});const v=xe(),h=async b=>{b&&await v.push({name:"llamalendmarket",params:{tab:"",chain:a.value,marketAddr:b.controller}})},g=b=>l.value.map(C=>b==="long"?C.long:C.short).filter(C=>!!C).reduce((C,k)=>C+k.total_debt_usd,0),f=b=>{const C=l.value.map(k=>b==="long"?k.long:k.short).filter(k=>!!k).reduce(({debt:k,assets:I},T)=>({debt:k+T.total_debt_usd,assets:I+T.total_assets_usd}),{debt:0,assets:0});return C.assets===0?0:C.debt/C.assets*100};return(b,C)=>{const k=Le,I=j,T=ve;return _(),$("div",O_,[(_(),S(Et,{to:"#toolbar"},[p("div",E_,[m(k,{modelValue:o(s),"onUpdate:modelValue":C[0]||(C[0]=P=>se(s)?s.value=P:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Tt,{class:"chain-select",chain:o(a),chains:o(i),onSelectChain:C[1]||(C[1]=P=>a.value=P==="all"?"ethereum":P)},null,8,["chain","chains"])])])),p("div",W_,[p("div",K_,[m(T,{label:"Open Interest","has-value":!o(r)},{default:w(()=>[m(I,{value:g("long"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(T,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(r),tooltip:"Aggregate debt divided by aggregate assets"},{default:w(()=>[m(I,{value:f("long"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(es),{style:{"grid-column":"1"},type:"long",pairs:o(l),loading:o(r),chain:o(a),onSelected:h},null,8,["pairs","loading","chain"])]),p("div",H_,[p("div",N_,[m(T,{label:"Open Interest","has-value":!o(r)},{default:w(()=>[m(I,{value:g("short"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(T,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(r),tooltip:"Aggregate debt divided by aggregate assets"},{default:w(()=>[m(I,{value:f("short"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(es),{style:{"grid-column":"2"},type:"short",pairs:o(l),loading:o(r),chain:o(a),onSelected:h},null,8,["pairs","loading","chain"])])])}}}),Q_=L(z_,[["__scopeId","data-v-26901192"]]),j_={class:"actions"},G_=A({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(e){const{theme:t,themeId:a}=U(O()),{items:s,toggles:l,disabled:c}=Pe(()=>{const{blue:f,yellow:b,purple:C}=t.value.colors;return[{id:"supply",label:"Supply",color:f},{id:"debt",label:"Debt",color:b},{id:"util",label:"Util %",color:C,togglable:!0}]}),{isFetching:r,data:n}=_t(W(()=>e.market),W(()=>e.chain)),i=V(!1),u=V(void 0),{chart:d,chartRef:v,series:h}=ae({recreateChartTrigger:y(()=>`${a.value}-${l.util.value}`),createChartOptions:f=>te(f,t.value,{leftPriceScale:{visible:l.util.value}}),series:[{type:"Line",name:"supply",options:y(()=>({priceFormat:{type:"custom",formatter:f=>`$${K(f,0,"dollar")}${E(f,"dollar")}`,minMove:.01},lineWidth:2,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:y(()=>({priceFormat:{type:"custom",formatter:f=>`$${K(f,0,"dollar")}${E(f,"dollar")}`,minMove:.01},lineWidth:2,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"util",options:y(()=>({priceFormat:{type:"custom",formatter:f=>`${Math.round(f*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:t.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});J(g);function g(){var k,I,T,P;if(!d.value||!h.supply||!h.debt||!h.util)return;const f=n.value.map(F=>({time:F.timestamp,value:F.totalAssetsUsd})).uniqWith((F,N)=>F.time===N.time).orderBy(F=>F.time,"asc"),b=n.value.map(F=>({time:F.timestamp,value:F.totalDebtUsd})).uniqWith((F,N)=>F.time===N.time).orderBy(F=>F.time,"asc"),C=(l.util.value?f:[]).zip(b).map(([F,N])=>({time:N.time,value:F.value>0?N.value/F.value:0})).uniqWith((F,N)=>F.time===N.time).orderBy(F=>F.time,"asc");if(h.supply.setData(f),h.debt.setData(b),h.util.setData(C),h.util.applyOptions({visible:l.util.value}),f.length>0||b.length>0){const F=Math.min(((k=f.at(0))==null?void 0:k.time)??1/0,((I=b.at(0))==null?void 0:I.time)??1/0),N=Math.max(((T=f.at(-1))==null?void 0:T.time)??-1/0,((P=b.at(-1))==null?void 0:P.time)??-1/0);d.value.timeScale().setVisibleRange({from:F,to:N})}}return(f,b)=>{const C=Ve,k=M;return _(),S(k,{ref_key:"chartCard",ref:u,class:"chart-card",title:"Supply & Debt",loading:o(r)},{actions:w(()=>{var I;return[p("div",j_,[m(C,{items:o(s),disabled:o(c),onToggle:b[0]||(b[0]=T=>o(l)[T].value=!o(l)[T].value)},null,8,["items","disabled"]),m(o(pt),{modelValue:o(i),"onUpdate:modelValue":b[1]||(b[1]=T=>se(i)?i.value=T:null),chart:o(d),target:(I=o(u))==null?void 0:I.$el},null,8,["modelValue","chart","target"])])]}),default:w(()=>[p("div",{ref_key:"chartRef",ref:v,class:"chart"},null,512)]),_:1},8,["loading"])}}}),X_=L(G_,[["__scopeId","data-v-06df5b01"]]),Y_={class:"actions"},Z_=A({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:a}=_t(W(()=>e.market),W(()=>e.chain)),{theme:s}=U(O()),l=y(()=>e.market?e.market.collateral_token.symbol:"?"),c=y(()=>e.market?e.market.borrowed_token.symbol:"?"),{items:r}=Pe(()=>[{id:l.value,label:l.value,color:s.value.colors.blue},{id:c.value,label:c.value,color:s.value.colors.yellow}]),n=V(!0),{chart:i,chartRef:u,series:d}=ae({recreateChartTrigger:s,createChartOptions:g=>te(g,s.value),series:[{type:"Line",name:"collateral",options:y(()=>({priceFormat:{type:"custom",formatter:h},lineWidth:2,color:s.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"borrowed",options:y(()=>({priceFormat:{type:"custom",formatter:h},lineWidth:2,color:s.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});J(v);function v(){var C,k,I,T;if(!i.value||!d.collateral||!d.borrowed)return;const g=n.value,f=a.value.map(P=>({time:P.timestamp,value:g?P.collateralBalanceUsd:P.collateralBalance})).uniqWith((P,F)=>P.time===F.time).orderBy(P=>P.time,"asc"),b=a.value.map(P=>({time:P.timestamp,value:g?P.borrowedBalanceUsd:P.borrowedBalance})).uniqWith((P,F)=>P.time===F.time).orderBy(P=>P.time,"asc");if(f.length>0&&d.collateral.setData(f),b.length>0&&d.borrowed.setData(b),f.length>0||b.length>0){const P=Math.min(((C=f.at(0))==null?void 0:C.time)??1/0,((k=b.at(0))==null?void 0:k.time)??1/0),F=Math.max(((I=f.at(-1))==null?void 0:I.time)??-1/0,((T=b.at(-1))==null?void 0:T.time)??-1/0);i.value.timeScale().setVisibleRange({from:P,to:F})}}function h(g){return`${n.value?"$":""}${K(g,0,"dollar")}${E(g,"dollar")}`}return(g,f)=>{const b=Ve,C=It,k=M;return _(),S(k,{class:"chart-container",title:"Collateral",loading:o(t)},{actions:w(()=>[p("div",Y_,[m(b,{items:o(r)},null,8,["items"]),m(C,{value:"Dollars","model-value":o(n),onClick:f[0]||(f[0]=I=>n.value=!o(n))},null,8,["model-value"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:u,class:"chart"},null,512)]),_:1},8,["loading"])}}}),J_=L(Z_,[["__scopeId","data-v-af52026f"]]),ef=A({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:a}=_t(W(()=>e.market),W(()=>e.chain)),{theme:s}=U(O()),{chart:l,chartRef:c,series:r}=ae({recreateChartTrigger:s,createChartOptions:i=>te(i,s.value,{localization:{priceFormatter:u=>Math.round(u).toString()}}),series:{type:"Histogram",name:"loans",options:y(()=>({color:s.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});J(n);function n(){if(!l.value||!r.loans)return;const i=a.value.map(u=>({time:u.timestamp,value:u.numLoans})).uniqWith((u,d)=>u.time===d.time).orderBy(u=>u.time,"asc");if(i.length>0){r.loans.setData(i);const u=i[0].time,d=i[i.length-1].time;l.value.timeScale().setVisibleRange({from:u,to:d})}}return(i,u)=>{const d=M;return _(),S(d,{class:"chart-container",title:"Loans",loading:o(t)},{default:w(()=>[p("div",{ref_key:"chartRef",ref:c,class:"chart"},null,512)]),_:1},8,["loading"])}}}),tf=L(ef,[["__scopeId","data-v-ca308a0a"]]),af={class:"actions"},sf=A({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(e){const{theme:t}=U(O()),{items:a}=Pe(()=>[{id:"borrow",label:"Borrow APY",color:t.value.colors.red},{id:"lend",label:"Lend APY",color:t.value.colors.green}]),{isFetching:s,data:l}=_t(W(()=>e.market),W(()=>e.chain)),{chart:c,chartRef:r,series:n}=ae({recreateChartTrigger:t,createChartOptions:d=>te(d,t.value,{localization:{priceFormatter:v=>u(v)}}),series:[{type:"Line",name:"borrowApy",options:y(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,color:t.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"lendApy",options:y(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,color:t.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});J(i);function i(){var h,g,f,b;if(!c.value||!n.borrowApy||!n.lendApy)return;const d=l.value.map(C=>({time:C.timestamp,value:C.borrowApy})).uniqWith((C,k)=>C.time===k.time).orderBy(C=>C.time,"asc"),v=l.value.map(C=>({time:C.timestamp,value:C.lendApy})).uniqWith((C,k)=>C.time===k.time).orderBy(C=>C.time,"asc");if(d.length>0&&n.borrowApy.setData(d),v.length>0&&n.lendApy.setData(v),d.length>0||v.length>0){const C=Math.min(((h=d.at(0))==null?void 0:h.time)??1/0,((g=v.at(0))==null?void 0:g.time)??1/0),k=Math.max(((f=d.at(-1))==null?void 0:f.time)??-1/0,((b=v.at(-1))==null?void 0:b.time)??-1/0);c.value.timeScale().setVisibleRange({from:C,to:k})}}function u(d){return`${K(d*100,0,"percentage")}${E(d,"percentage")}`}return(d,v)=>{const h=Ve,g=M;return _(),S(g,{class:"chart-container",title:"Rates",loading:o(s)},{actions:w(()=>[p("div",af,[m(h,{items:o(a)},null,8,["items"])])]),default:w(()=>[p("div",{ref_key:"chartRef",ref:r,class:"chart"},null,512)]),_:1},8,["loading"])}}}),of=L(sf,[["__scopeId","data-v-60a8a6c6"]]),nf=["href"],lf={key:1},rf=A({__name:"Addresses",props:{market:{}},setup(e){const t=y(()=>{var l,c,r,n,i;return[{description:"Controller",address:(l=e.market)==null?void 0:l.controller},{description:"Vault",address:(c=e.market)==null?void 0:c.vault},{description:"Llamma",address:(r=e.market)==null?void 0:r.llamma},{description:"Policy",address:(n=e.market)==null?void 0:n.policy},{description:"Oracle",address:(i=e.market)==null?void 0:i.oracle}]}),a=l=>`https://etherscan.io/address/${l}`,s=async l=>{await navigator.clipboard.writeText(l)};return(l,c)=>{const r=ge,n=ee,i=M;return _(),S(i,{title:"Addresses",class:"addresses"},{default:w(()=>[m(n,{class:"addresses-table",rows:o(t)},{row:w(({item:{description:u,address:d}})=>[p("div",null,R(u),1),p("div",null,[d?(_(),$("a",{key:0,class:"font-mono",href:a(d),target:"_blank"},R(d),9,nf)):(_(),$("span",lf,"?"))]),p("div",null,[m(r,{icon:"fas fa-link",onClick:v=>s(d)},null,8,["onClick"])])]),_:1},8,["rows"])]),_:1})}}}),cf=L(rf,[["__scopeId","data-v-4bc733a1"]]),uf={class:"usage"},df={class:"two-sides"},pf={class:"collateral"},mf={class:"two-sides"},vf={class:"two-sides"},hf=A({__name:"KPIUsage",props:{market:{}},setup(e){const t=y(()=>{var l,c;return(((l=e.market)==null?void 0:l.collateral_balance_usd)??0)+(((c=e.market)==null?void 0:c.borrowed_balance_usd)??0)}),a=y(()=>{var n,i;const l="Collateral",c=((n=e.market)==null?void 0:n.collateral_token.symbol)??"?",r=((i=e.market)==null?void 0:i.borrowed_token.symbol)??"?";return`${l} (${c} / ${r})`}),s=y(()=>e.market?e.market.total_assets_usd===0?0:e.market.total_debt_usd/e.market.total_assets_usd:0);return(l,c)=>{var i,u;const r=j,n=ve;return _(),$("div",uf,[m(n,{style:{"grid-area":"kpi1"},label:o(a),"has-value":!!l.market},{default:w(()=>{var d,v;return[p("div",df,[p("div",pf,[m(r,{value:(d=l.market)==null?void 0:d.collateral_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),x(" / "),m(r,{value:(v=l.market)==null?void 0:v.borrowed_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),m(r,{value:o(t),"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(n,{style:{"grid-area":"kpi2"},label:`Borrowed (${((i=l.market)==null?void 0:i.borrowed_token.symbol)??"?"})`,"has-value":!!l.market},{default:w(()=>{var d,v;return[p("div",mf,[m(r,{value:(d=l.market)==null?void 0:d.total_debt,"show-symbol":!1,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"]),m(r,{value:(v=l.market)==null?void 0:v.total_debt_usd,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(n,{style:{"grid-area":"kpi3"},label:`Supplied (${((u=l.market)==null?void 0:u.borrowed_token.symbol)??"?"})`,"has-value":!!l.market},{default:w(()=>{var d,v;return[p("div",vf,[m(r,{value:(d=l.market)==null?void 0:d.total_assets,"show-symbol":!1,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"]),m(r,{value:(v=l.market)==null?void 0:v.total_assets_usd,"show-zero":!0,inline:!1,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(n,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!l.market},{default:w(()=>[m(r,{value:o(s)*100,"show-zero":!0,type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])])}}}),_f=L(hf,[["__scopeId","data-v-917ee38f"]]),ff={key:0},gf={class:"token-info"},yf=["href"],bf={key:1},wf=A({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(r){return typeof r=="object"&&r.type==="token"}function a(r,n){return n?r==="collateral"?{type:"token",symbol:n.collateral_token.symbol,address:n.collateral_token.address}:{type:"token",symbol:n.borrowed_token.symbol,address:n.borrowed_token.address}:{type:"token",symbol:"?",address:"?"}}const s=y(()=>[{description:"Collateral",value:a("collateral",e.market)},{description:"Borrowed",value:a("borrowed",e.market)}]),l=r=>`https://etherscan.io/address/${r}`,c=async r=>{await navigator.clipboard.writeText(r)};return(r,n)=>{const i=Ie,u=ge,d=ee,v=M;return _(),S(v,{class:"properties",title:"Properties"},{default:w(()=>[m(d,{class:"properties-table",rows:o(s)},{row:w(({item:{description:h,value:g}})=>[p("div",null,R(h),1),t(g)?(_(),$("div",ff,[p("div",gf,[m(i,{chain:r.chain,address:g.address},null,8,["chain","address"]),p("div",null,R(g.symbol),1),p("div",null,[p("a",{class:"font-mono",href:l(g.address),target:"_blank"},R(g.address),9,yf)]),p("div",null,[m(u,{icon:"fas fa-link",onClick:f=>c(g.address)},null,8,["onClick"])])])])):(_(),$("div",bf,R(g),1))]),_:1},8,["rows"])]),_:1})}}}),Cf=L(wf,[["__scopeId","data-v-09259739"]]),$f={class:"market"},kf=A({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:a}=_t(W(()=>e.market),W(()=>e.chain)),s=y(()=>a.value.map(({timestamp:c,collateralBalanceUsd:r,borrowedBalanceUsd:n,totalDebtUsd:i})=>({timestamp:c,ratio:i>0?(r+n)/i:0}))),l=y(()=>a.value.map(({timestamp:c,collateralBalanceUsd:r,borrowedBalanceUsd:n,totalDebtUsd:i})=>({timestamp:c,equity:r+n-i})));return(c,r)=>{const n=j,i=ve;return _(),$("div",$f,[m(i,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!c.market},{default:w(()=>{var u;return[m(n,{value:(u=c.market)==null?void 0:u.borrow_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(i,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!c.market},{default:w(()=>{var u;return[m(n,{value:(u=c.market)==null?void 0:u.lend_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(i,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!c.market},{default:w(()=>{var u;return[x(R(((u=c.market)==null?void 0:u.n_loans)??0),1)]}),_:1},8,["has-value"]),m(i,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!c.market},{default:w(()=>[m(n,{value:o(it)(c.market),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(o(X_),{style:{"grid-area":"supply"},market:c.market,chain:c.chain},null,8,["market","chain"]),m(o(J_),{style:{"grid-area":"collateral"},market:c.market,chain:c.chain},null,8,["market","chain"]),m(o(Ns),{style:{"grid-area":"colratio"},ratios:o(s),loading:o(t)},null,8,["ratios","loading"]),m(o(Gh),{style:{"grid-area":"equity"},equity:o(l),loading:o(t)},null,8,["equity","loading"]),m(o(of),{style:{"grid-area":"rates"},market:c.market,chain:c.chain},null,8,["market","chain"]),m(o(tf),{style:{"grid-area":"loans"},market:c.market,chain:c.chain},null,8,["market","chain"]),m(o(cf),{style:{"grid-area":"addresses"},market:c.market},null,8,["market"]),m(o(Cf),{style:{"grid-area":"properties"},market:c.market,chain:c.chain},null,8,["market","chain"]),m(o(_f),{style:{"grid-area":"usage"},market:c.market},null,8,["market"])])}}}),Sf=L(kf,[["__scopeId","data-v-b4052d65"]]),Af={class:"trading"},Tf=A({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=y(()=>{var d;return(d=e.market)==null?void 0:d.llamma}),{isFetching:a,data:s}=Ba(V("lending"),t,W(()=>e.chain)),l=V(1),{isFetching:c,data:r}=Rs(V("lending"),t,W(()=>e.chain),l),n=V(1),{isFetching:i,data:u}=Is(V("lending"),t,W(()=>e.chain),n);return(d,v)=>{var f,b,C,k;const h=j,g=ve;return _(),$("div",Af,[m(g,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!d.market},{default:w(()=>{var I;return[m(h,{value:(I=d.market)==null?void 0:I.price_oracle,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(g,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!d.market},{default:w(()=>{var I;return[m(h,{value:(I=d.market)==null?void 0:I.amm_price,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(zs),{style:{"grid-area":"ohlc"},ohlc:o(s)??[],loading:o(a)},null,8,["ohlc","loading"]),m(o(js),{style:{"grid-area":"trades"},trades:((f=o(r))==null?void 0:f.trades)??[],count:((b=o(r))==null?void 0:b.count)??0,chain:d.chain,loading:o(c),onPage:v[0]||(v[0]=I=>l.value=I)},null,8,["trades","count","chain","loading"]),m(o(Qs),{style:{"grid-area":"events"},events:((C=o(u))==null?void 0:C.events)??[],count:((k=o(u))==null?void 0:k.count)??0,loading:o(i),onPage:v[1]||(v[1]=I=>n.value=I)},null,8,["events","count","loading"])])}}}),Lf=L(Tf,[["__scopeId","data-v-67a87885"]]),If={class:"liquidations"},Rf=A({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=y(()=>{var T;return(T=e.market)==null?void 0:T.controller}),{isFetching:a,data:s}=_t(W(()=>e.market),W(()=>e.chain)),l=y(()=>s.value.map(({timestamp:T,priceOracle:P})=>({timestamp:T,priceOracle:P}))),c=y(()=>s.value.map(({timestamp:T,discountLiquidation:P})=>({timestamp:T,discount:P}))),{isFetching:r,data:n}=Fs(V("lending"),W(()=>e.chain),t),{isFetching:i,data:u}=Ps(V("lending"),W(()=>e.chain),t),{isFetching:d,data:v}=Vs(V("lending"),W(()=>e.chain),t),h=y(()=>v.value.map(({timestamp:T,proportion:P})=>({timestamp:T,proportion:P*100}))),{isFetching:g,data:f}=qs(V("lending"),W(()=>e.chain),t),{isFetching:b,data:C}=Ds(V("lending"),W(()=>e.chain),t),{isFetching:k,data:I}=Bs(V("lending"),W(()=>e.chain),t);return(T,P)=>(_(),$("div",If,[m(o(Ks),{overview:o(f),loading:o(g)},null,8,["overview","loading"]),m(o(Es),{ratios:o(h),"prices-oracle":o(l),loading:o(d)||o(a)},null,8,["ratios","prices-oracle","loading"]),m(o(xs),{losses:o(C),loading:o(b)},null,8,["losses","loading"]),m(o(Us),{losses:o(C),loading:o(b)},null,8,["losses","loading"]),m(o(Os),{deciles:o(I),loading:o(k)},null,8,["deciles","loading"]),m(o(Ms),{liqs:o(n),loading:o(r)},null,8,["liqs","loading"]),m(o(Hs),{liqs:o(u),loading:o(i)},null,8,["liqs","loading"]),m(o(Ws),{discounts:o(c),liqs:o(u),loading:o(a)||o(i)},null,8,["discounts","liqs","loading"])]))}}),Vf=L(Rf,[["__scopeId","data-v-34d8f6cb"]]),Pf={class:"market-overview"},Ff=A({__name:"Market.page",setup(e){const{show:t,crumbs:a}=U(qe()),s=fe("chain"),l=fe("marketAddr"),{isFetching:c,data:r}=Gs(s),n=y(()=>{var d;return(d=r.value)==null?void 0:d.find(v=>v.controller===l.value)});G(n,d=>{a.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:s.value})},{id:"market",label:`Market: ${(d==null?void 0:d.name)??"?"}`}]},{immediate:!0}),ce(()=>{t.value=!0});const{tabActive:i,tabActiveIndex:u}=mt(["overview","trading","liquidations"],"llamalendmarket",()=>({chain:s.value,marketAddr:l.value}));return(d,v)=>{const h=Ge,g=Ee,f=Oe;return _(),$("div",Pf,[m(h,{class:B(["spinner",{loading:o(c)}])},null,8,["class"]),!o(c)&&o(n)?(_(),S(f,{key:0,active:o(u),onTab:v[0]||(v[0]=b=>u.value=b.index)},{default:w(()=>[m(g,{header:"Overview"},{default:w(()=>[(_(),S(me,null,[o(i)==="overview"?(_(),S(Sf,{key:0,market:o(n),chain:o(s)},null,8,["market","chain"])):q("",!0)],1024))]),_:1}),m(g,{header:"Trading"},{default:w(()=>[(_(),S(me,null,[o(i)==="trading"?(_(),S(Lf,{key:0,market:o(n),chain:o(s)},null,8,["market","chain"])):q("",!0)],1024))]),_:1}),m(g,{header:"Liquidations"},{default:w(()=>[(_(),S(me,null,[o(i)==="liquidations"?(_(),S(Vf,{key:0,market:o(n),chain:o(s)},null,8,["market","chain"])):q("",!0)],1024))]),_:1})]),_:1},8,["active"])):q("",!0)])}}}),qf=L(Ff,[["__scopeId","data-v-5c0a9226"]]);function Xs(e){const{url:t,connectOnMount:a=!0}=e,s=pa(null),l=V("");function c(){return s.value&&v(),l.value=typeof t=="function"?t():t,Yo(l.value,{autoConnect:!1,secure:!0,reconnection:!1}).on("error",g=>{Ae({text:`Socket.IO error: ${g.message}`,type:"error"})})}const r=V(!1),n=V(!1);function i(){r.value=!1,n.value=!0}function u(){Ae({text:`Failed to connect to ${l.value}`,type:"error"}),r.value=!1}function d(){s.value=null,n.value=!1}function v(){var g,f,b,C;(g=s.value)==null||g.off("connect",i),(f=s.value)==null||f.off("connect_error",u),(b=s.value)==null||b.off("disconnect",d),(C=s.value)==null||C.disconnect(),d()}function h(){r.value||(s.value&&v(),s.value=c(),s.value.on("connect",i),s.value.on("connect_error",u),s.value.on("disconnect",d),r.value=!0,s.value.connect())}return a&&ce(h),{socket:s,connecting:r,isConnected:n,connect:h,disconnect:v,url:l}}var we=(e=>(e.Swap="swap",e.Deposit="deposit",e.Remove="remove",e))(we||{});let ra;function Ys(){return ra||(ra=Xs({url:"wss://api.curvemonitor.com/main"})),ra}function ia(e,t,a,...s){return new Promise(l=>{e.once(a,l),e.emit(t,...s)})}function Df(e,t,a){return new Zo(s=>{const l=c=>{s.next(c)};return e.on(t,l),()=>e.off(t,l)}).pipe(Jo())}class Zs{constructor(t){this.socket=t}getSandwiches(){return ia(this.socket,"getFullSandwichTableContent","fullSandwichTableContent","full",1)}getLabels(){return ia(this.socket,"getSandwichLabelOccurrences","sandwichLabelOccurrences")}getLabelsRanking(){return ia(this.socket,"getAbsoluteLabelsRanking","absoluteLabelsRanking")}}function Js(){const{socket:e,isConnected:t,url:a}=Ys(),s=y(()=>e.value?new Zs(e.value):null),l=y(()=>["mev-labels",a.value]);return H({queryKey:l,queryFn:()=>{var c;return(c=s.value)==null?void 0:c.getLabels()},enabled:t})}function Bf(){const{socket:e,isConnected:t,url:a}=Ys(),s=y(()=>e.value?new Zs(e.value):null),l=y(()=>["mev-sandwiches-tx",a.value]);return H({queryKey:l,queryFn:()=>{var c;return(c=s.value)==null?void 0:c.getSandwiches()},enabled:t})}const Mf=A({__name:"LabelsWorstRelative",setup(e){const{theme:t}=U(O()),{data:a,isFetching:s}=Js(),l=u=>(u??[]).filter(d=>d.numOfAllTx>=12).map(d=>({...d,ratio:Number((d.occurrences/d.numOfAllTx*100).toFixed(2))})).sort((d,v)=>v.ratio-d.ratio).slice(0,10),c=y(()=>l(a.value).map(u=>u.label)),r=y(()=>l(a.value).map(u=>u.ratio)),n=y(()=>le(t.value,{chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:u=>{const d=u.w.globals.labels[u.seriesIndex],v=u.series[u.seriesIndex];return[`<div><b>${d}</b>:</div><div>Ratio: ${i(v)}</div>`].join("")}},labels:c.value})),i=u=>`${u}%`;return(u,d)=>{const v=he;return _(),S(v,{class:"mevLabels",title:"Worst relative offenders",options:o(n),series:o(r),loading:o(s)},null,8,["options","series","loading"])}}}),xf=L(Mf,[["__scopeId","data-v-323edaa5"]]),Uf=A({__name:"LabelsWorstAbsolute",setup(e){const{theme:t}=U(O()),{data:a,isFetching:s}=Js(),l=u=>(u??[]).filter(d=>d.numOfAllTx>=12).map(d=>({...d,occurrences:d.occurrences})).sort((d,v)=>v.occurrences-d.occurrences).slice(0,10),c=y(()=>l(a.value).map(u=>u.label)),r=y(()=>l(a.value).map(u=>u.occurrences)),n=y(()=>le(t.value,{chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:u=>{const d=u.w.globals.labels[u.seriesIndex],v=u.series[u.seriesIndex];return[`<div><b>${d}</b>:</div><div>Occurences: ${i(v)}</div>`].join("")}},labels:c.value})),i=u=>`${u}`;return(u,d)=>{const v=he;return _(),S(v,{class:"mevLabels",title:"Worst absolute offenders",options:o(n),series:o(r),loading:o(s)},null,8,["options","series","loading"])}}}),Of=L(Uf,[["__scopeId","data-v-a1d10c28"]]),Ef={style:{display:"grid","grid-template-columns":"auto auto"}},Wf={style:{display:"flex",gap:"1rem"}},Kf={key:0,class:"fas fa-arrow-up"},Hf={key:1,class:"fas fa-arrow-down"},Nf={key:2,class:"fas fa-exchange-alt"},zf={key:0,class:"end"},Qf=["href"],jf=["href"],Gf=["href"],Xf=["innerHTML"],Yf={key:1,class:"end"},ts=10,Zf=A({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(e){const{relativeTime:t}=Ye(),a=V(""),s=V([we.Swap,we.Deposit,we.Remove]),l=y(()=>e.time?["Type","Block","Tx","Trader","Assets","Time"]:["Type","Tx","Trader","Assets"]),c=y(()=>(e.txs??[]).filter(v=>s.value.includes(v.transaction_type)).filter(v=>{const h=a.value.toLocaleLowerCase().split(" "),g=f=>h.some(b=>f.toLocaleLowerCase().includes(b));return g(v.block_number.toString())||g(v.trader)||g(v.tx_hash)})),{page:r,rowsPage:n,onPage:i}=jt(c,ts),u=v=>{if(v.transaction_type===we.Swap){const h=v.coins_leaving_wallet[0],g=v.coins_entering_wallet[0],f=ze(parseFloat(h.amount.toString())),b=ze(parseFloat(g.amount.toString())),C=`<span>${f} ${h.name}</span>`,k="<i class='fas fa-arrow-right'></i>",I=`<span style='justify-self: end;'>${b} ${g.name}</span>`;return`${C}${k}${I}`}else if(v.transaction_type===we.Deposit){const h=v.coins_entering_wallet[0];return`${ze(parseFloat(h.amount.toString()))} ${h.name}`}else{const h=v.coins_leaving_wallet[0];return`${ze(parseFloat(h.amount.toString()))} ${h.name}`}},d=v=>{v===0?s.value=[we.Swap,we.Deposit,we.Remove]:v===1?s.value=[we.Swap]:v===2?s.value=[we.Deposit]:v===3?s.value=[we.Remove]:s.value=[]};return(v,h)=>{const g=Ee,f=Oe,b=Le,C=Ue,k=ee,I=M;return _(),S(I,{class:"trades-card",title:"Transactions"},en({default:w(()=>[m(k,{class:B(["trades-table",{compact:v.compact,time:v.time}]),rows:o(n),columns:o(l)},{row:w(T=>[p("div",{class:B(["type",{deposit:T.item.transaction_type==="deposit",remove:T.item.transaction_type==="remove",swap:T.item.transaction_type==="swap"}])},[T.item.transaction_type==="deposit"?(_(),$("i",Kf)):T.item.transaction_type==="remove"?(_(),$("i",Hf)):(_(),$("i",Nf)),x(" "+R(o($t)(T.item.transaction_type)),1)],2),v.time?(_(),$("div",zf,[p("a",{class:"vote-link",href:`https://etherscan.io/block/${T.item.block_number}`,target:"_blank"},R(T.item.block_number),9,Qf)])):q("",!0),p("div",null,[p("a",{class:"vote-link",href:`https://etherscan.io/tx/${T.item.tx_hash}`,target:"_blank",onClick:h[2]||(h[2]=Te(()=>{},["stop"]))},R(o(Ce)(T.item.tx_hash)),9,jf)]),p("div",null,[p("a",{class:"vote-link",href:`https://etherscan.io/address/${T.item.trader}`,target:"_blank",onClick:h[3]||(h[3]=Te(()=>{},["stop"]))},R(o(Ce)(T.item.trader)),9,Gf)]),p("div",{class:B(["assets",{swap:T.item.transaction_type==="swap"}]),innerHTML:u(T.item)},null,10,Xf),v.time?(_(),$("div",Yf,R(o(t)(T.item.block_unixtime)),1)):q("",!0)]),_:1},8,["class","rows","columns"])]),_:2},[v.header?{name:"actions",fn:w(()=>[p("div",Ef,[m(f,{class:"types",onTab:h[0]||(h[0]=T=>d(T.index))},{default:w(()=>[m(g,{header:"All"}),m(g,{header:"Swaps"}),m(g,{header:"Deposits"}),m(g,{header:"Removals"})]),_:1})]),p("div",Wf,[m(b,{modelValue:o(a),"onUpdate:modelValue":h[1]||(h[1]=T=>se(a)?a.value=T:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(C,{class:"pagination","items-count":o(c).length,"items-per-page":ts,page:o(r),onPage:o(i)},null,8,["items-count","page","onPage"])])]),key:"0"}:void 0]),1024)}}}),Jf=L(Zf,[["__scopeId","data-v-3c3f60b0"]]),eg={style:{display:"flex",gap:"1rem"}},tg=["href"],ag={style:{display:"grid",gap:"1ch","grid-template-columns":"auto 16ch 1fr"}},sg=["href"],og={class:"end"},ca=10,ng=A({__name:"Sandwiches",setup(e){const t=V(1),{data:a,isFetching:s}=Bf(),{expanded:l,toggleExpansion:c}=Gt(),{relativeTime:r}=Ye(),n=V(""),i=y(()=>{var v;return((v=a.value)==null?void 0:v.totalPages)??0*ca}),u=y(()=>{var v;return(((v=a.value)==null?void 0:v.data)??[]).filter(h=>{const g=n.value.toLocaleLowerCase().split(" "),f=b=>g.some(C=>b.toLocaleLowerCase().includes(C));return f(h.poolName)||f(h.poolAddress)||f(h.label)}).orderBy([h=>h.frontrun.block_unixtime,h=>h.frontrun.tx_position],"desc")}),d=v=>[v.frontrun,...v.center,v.backrun].orderBy([h=>h.block_unixtime,h=>h.tx_position]);return(v,h)=>{const g=Le,f=Ue,b=ee,C=M;return _(),S(C,{class:"sandwiches-card",title:"Sandwiches",loading:o(s)},{actions:w(()=>[p("div",eg,[m(g,{modelValue:o(n),"onUpdate:modelValue":h[0]||(h[0]=k=>se(n)?n.value=k:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(i)>ca?(_(),S(f,{key:0,class:"pagination","items-count":o(i),"items-per-page":ca,page:o(t),onPage:h[1]||(h[1]=k=>t.value=k)},null,8,["items-count","page"])):q("",!0)])]),default:w(()=>[m(b,{class:"sandwiches-table",rows:o(u),columns:["Pool","Action","Affected Contract",{label:"Time",align:"end"}],expanded:o(l),onSelected:h[2]||(h[2]=k=>o(c)(k))},{row:w(k=>[p("div",null,[p("a",{class:"vote-link",href:`https://etherscan.io/address/${k.item.poolAddress}`,target:"_blank"},R(k.item.poolName),9,tg)]),p("div",null,[p("div",ag,[p("a",{class:"vote-link font-mono",target:"_blank",href:`https://etherscan.io/address/${k.item.center[0].trader}`},R(o(Ce)(k.item.center[0].trader)),9,sg),p("span",null," lost "+R(o(ze)(k.item.user_losses_details.reduce((I,T)=>I+T.amount,0)))+" "+R(k.item.user_losses_details[0].unit),1),p("span",null,R(o(ze)(-k.item.user_losses_details[0].lossInPercentage))+"% slippage, or $"+R(o(ze)(k.item.lossInUsd)),1)])]),p("div",null,R(k.item.label),1),p("div",og,R(o(r)(k.item.frontrun.block_unixtime)),1)]),"row-details":w(k=>[m(Jf,{class:"transactions",txs:d(k.item),header:!1,compact:!0,time:!1},null,8,["txs"])]),_:1},8,["rows","expanded"])]),_:1},8,["loading"])}}}),lg=L(ng,[["__scopeId","data-v-df4130f4"]]),rg={class:"mev"},ig=A({__name:"MEV",setup(e){return(t,a)=>(_(),$("div",rg,[m(lg,{style:{"grid-area":"sws"}}),m(xf,{style:{"grid-area":"relative"}}),m(Of,{style:{"grid-area":"absolute"}})]))}}),cg=L(ig,[["__scopeId","data-v-861d7244"]]),ug={class:"monitor"},dg=A({__name:"Monitor.page",setup(e){const{tabActive:t,tabActiveIndex:a}=mt(["mev"],"monitor");return(s,l)=>{const c=Ee,r=Oe;return _(),$("div",ug,[m(r,{active:o(a),onTab:l[0]||(l[0]=n=>a.value=n.index)},{default:w(()=>[m(c,{header:"MEV"},{default:w(()=>[(_(),S(me,null,[o(t)==="mev"?(_(),S(cg,{key:0})):q("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),pg=L(dg,[["__scopeId","data-v-b5d30464"]]),mg=["all","ownership","parameter","other"];function ct(e){return e.executed?"executed":e.end>new Date().getTime()/1e3?"active":ao(e)&&to(e)&&eo(e)?"passed":"denied"}function eo(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function to(e){return e.votesFor>e.quorum*e.totalSupply}function ao(e){return e.votesFor>e.votesAgainst}const so=e=>{var b;const t=e.vote_id,a=e.vote_type.toLocaleLowerCase()==="parameter"?"parameter":"ownership",s=(b=e.metadata)!=null&&b.startsWith('"')?e.metadata.substring(1):e.metadata??"",l=e.creator.toLocaleLowerCase(),c=e.snapshot_block,r=e.start_date,n=r+604800,i=Be(BigInt(e.min_accept_quorum),18n),u=Be(BigInt(e.support_required),18n),d=e.vote_count,v=Be(BigInt(e.votes_for),18n),h=Be(BigInt(e.votes_against),18n),g=e.executed,f=Be(BigInt(e.total_supply),18n);return{id:t,type:a,metadata:s,proposer:l,block:c,start:r,end:n,quorum:i,support:u,voteCount:d,votesFor:v,votesAgainst:h,executed:g,totalSupply:f}},vg=e=>{const t=so(e),a=e.script,s=e.votes.map(l=>({voter:l.voter.toLocaleLowerCase(),supports:l.supports,votingPower:Be(BigInt(l.voting_power),18n)}));return{...t,script:a,votes:s}},as="https://prices.curve.fi";class hg extends $e{async getProposals(t,a,s,l){const c=await this.fetch(`${as}/v1/dao/proposals?pagination=10&page=${t}&search_string=${a}&type_filter=${s}&status_filter=${l}`);return{proposals:c.proposals.map(so),count:c.count}}async getProposal(t,a){const s=await this.fetch(`${as}/v1/dao/proposals/details/${a}/${t}`);return vg(s)}}const oo=new hg;function no(e,t,a){return H({queryKey:["curve-proposal",e,t],queryFn:({queryKey:[,s,l]})=>oo.getProposal(s,l),...a&&{enabled:a}})}function _g(e,t,a,s){return H({queryKey:["curve-proposals",e,s,t,a],queryFn:({queryKey:[,l,c,r,n]})=>oo.getProposals(l,c,r,n),placeholderData:Wt})}const fg=A({__name:"Status",props:{proposal:{}},setup(e){const t=y(()=>{if(ct(e.proposal)==="denied")if(to(e.proposal))if(ao(e.proposal)){if(!eo(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes";else return"Quorum was not reached (yes votes need to pass this number)";return""}),a=y(()=>{switch(ct(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";default:return"Unk. Status"}});return(s,l)=>{const c=Kt,r=ve;return _(),S(r,{class:"status","tooltip-type":"underline",label:"Status","has-value":!0,tooltip:o(t)},{default:w(()=>[o(t)?(_(),S(c,{key:0},{trigger:w(()=>[p("span",{class:B(["status-value",o(ct)(s.proposal)])},R(o(a)),3)]),default:w(()=>[x(" "+R(o(t)),1)]),_:1})):(_(),$("span",{key:1,class:B(["status-value",o(ct)(s.proposal)])},R(o(a)),3))]),_:1},8,["tooltip"])}}}),gg=L(fg,[["__scopeId","data-v-2f9513ce"]]),yg=A({__name:"Type",props:{proposal:{}},setup(e){return(t,a)=>{const s=ve;return _(),S(s,{class:"type",label:"Type",value:o($t)(t.proposal.type),"has-value":!0},null,8,["value"])}}}),bg=["href"],wg=A({__name:"Proposer",props:{proposal:{}},setup(e){return(t,a)=>{const s=ve;return _(),S(s,{class:"proposer",label:"Proposer","has-value":!0},{default:w(()=>[p("a",{href:`https://etherscan.io/address/${t.proposal.proposer}`,target:"_blank"},R(o(Ce)(t.proposal.proposer)),9,bg)]),_:1})}}}),ss=A({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const a=V(""),s=y(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),l=y(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const n=new Date(e.proposal.end*1e3);return n>new Date?a.value:n.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),c=y(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});ce(()=>{r()});const r=()=>{const n=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{a.value=jn(n)})};return(n,i)=>{const u=ve;return _(),S(u,{class:"date","tooltip-type":"underline",label:o(s),value:o(l),"has-value":!0,tooltip:o(c)},null,8,["label","value","tooltip"])}}}),lo=e=>(z("data-v-a0e3f25a"),e=e(),Q(),e),Cg=lo(()=>p("i",{class:"fas fa-link"},null,-1)),$g={class:"metadata"},kg={class:"row"},Sg=lo(()=>p("i",{class:"fas fa-chevron-up"},null,-1)),Ag=[Sg],Tg=A({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const a=t,s=y(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),l=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/#/dao/proposal/${e.proposal.type}/${e.proposal.id}`)};return(c,r)=>{const n=ut("router-link");return _(),$("div",{class:"proposal-summary",onClick:r[0]||(r[0]=i=>a("toggleExpand"))},[p("div",{class:B(["title",{"no-title":!c.proposal.metadata}])},[m(n,{to:o(s),class:"id",onClick:l},{default:w(()=>[Cg,x(" "+R(c.proposal.id),1)]),_:1},8,["to"]),p("div",$g,R(c.proposal.metadata||"< No Title >"),1)],2),p("div",kg,[m(gg,{class:"item",proposal:c.proposal},null,8,["proposal"]),m(yg,{class:"item",proposal:c.proposal},null,8,["proposal"]),m(wg,{class:"item",proposal:c.proposal},null,8,["proposal"]),m(ss,{class:"item",proposal:c.proposal,type:"start"},null,8,["proposal"]),m(ss,{class:"item",proposal:c.proposal,type:"end"},null,8,["proposal"]),p("div",{class:B(["item expander",{expanded:c.expanded}])},Ag,2)])])}}}),Lg=L(Tg,[["__scopeId","data-v-a0e3f25a"]]),De=e=>(z("data-v-7df0a29d"),e=e(),Q(),e),Ig={class:"results"},Rg=De(()=>p("div",{class:"heading"},"Results",-1)),Vg={class:"choice"},Pg=De(()=>p("div",{class:"label"},"For",-1)),Fg={class:"amount"},qg={class:"left"},Dg=De(()=>p("span",null," veCRV",-1)),Bg={class:"right"},Mg=De(()=>p("span",null,"(",-1)),xg=De(()=>p("span",null,")",-1)),Ug={class:"choice"},Og=De(()=>p("div",{class:"label"},"Against",-1)),Eg={class:"amount"},Wg={class:"left"},Kg=De(()=>p("span",null," veCRV",-1)),Hg={class:"right"},Ng=De(()=>p("span",null,"(",-1)),zg=De(()=>p("span",null,")",-1)),os=4,Qg=A({__name:"VotingResults",props:{proposal:{}},setup(e){const t=y(()=>e.proposal.votesFor+e.proposal.votesAgainst),a=y(()=>e.proposal.votesFor/t.value*100),s=y(()=>e.proposal.votesAgainst/t.value*100);return(l,c)=>{const r=j;return _(),$("div",Ig,[Rg,p("div",Vg,[Pg,p("div",Fg,[p("div",qg,[m(r,{value:l.proposal.votesFor,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),Dg]),p("div",Bg,[Mg,m(r,{value:o(a),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),xg])]),p("div",{class:"bar",style:ye({width:`${Math.max(os,o(a))}%`})},null,4)]),p("div",Ug,[Og,p("div",Eg,[p("div",Wg,[m(r,{value:l.proposal.votesAgainst,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),Kg]),p("div",Hg,[Ng,m(r,{value:o(s),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),zg])]),p("div",{class:"bar",style:ye({width:`${Math.max(os,o(s))}%`})},null,4)])])}}}),jg=L(Qg,[["__scopeId","data-v-7df0a29d"]]),ro=e=>(z("data-v-d418450d"),e=e(),Q(),e),Gg={class:"quorum"},Xg=ro(()=>p("div",{class:"heading"},"Quorum",-1)),Yg={class:"amount"},Zg={class:"bar"},Jg={class:"percentages"},ey=ro(()=>p("div",{class:"zero"},"0%",-1)),ty={class:"quorum"},ay=A({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=y(()=>e.proposal.votesFor),a=y(()=>e.proposal.quorum*e.proposal.totalSupply),s=y(()=>t.value/a.value*100);return(l,c)=>{const r=j;return _(),$("div",Gg,[Xg,p("div",Yg,[m(r,{value:o(t),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),x(" / "),m(r,{value:o(a),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),x(" veCRV ")]),p("div",Zg,[p("div",{class:"support",style:ye({width:`${o(s)}%`})},null,4),p("div",{class:"quorum",style:ye({width:`${100-o(s)}%`})},null,4)]),p("div",Jg,[ey,p("div",ty,[m(r,{value:l.proposal.quorum*100,precision:0,type:"percentage"},null,8,["value"])])])])}}}),sy=L(ay,[["__scopeId","data-v-d418450d"]]),oy=["min","max"],ny=A({__name:"Slider",props:Fe({min:{},max:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=dt(e,"modelValue",{set(a){return Number(a)}});return(a,s)=>fa((_(),$("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),type:"range",min:a.min,max:a.max},null,8,oy)),[[cs,t.value]])}}),ly=L(ny,[["__scopeId","data-v-f0a8da37"]]),ry=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],ot=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],xa=e=>(z("data-v-8b3d2b54"),e=e(),Q(),e),iy={class:"buttons"},cy={class:"vecrv"},uy={class:"info"},dy={class:"kpis"},py={class:"description"},my=xa(()=>p("span",{class:"title"},"Description: ",-1)),vy={class:"options"},hy=xa(()=>p("span",{class:"label"},"No",-1)),_y={class:"middle"},fy=["contenteditable","textContent"],gy=xa(()=>p("span",{class:"label"},"Yes",-1)),yy=A({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=kt(),a=V(!1),s=V(50),l=V(null),c=V(!1),r=y(()=>{var Y;return c.value?`${s.value}.`:s.value===0&&((Y=l.value)==null?void 0:Y.textContent)!=="0"?"":s.value.toString()}),n=y(()=>(P.value??0n)>0n&&!et.value&&d.value&&T.value===0),i=y(()=>n.value?"Submit":et.value?"Voting...":d.value?T.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),u=y(()=>Be(P.value??0n,18n)),d=y(()=>ct(e.proposal)==="active"),v=y(()=>ct(e.proposal)==="passed"),h=()=>{const Y=window.getSelection();return Y&&Y.rangeCount>0?Y.getRangeAt(0).startOffset:0},g=Y=>{if(l.value){const pe=document.createRange();pe.setStart(l.value.firstChild??l.value,Y),pe.collapse(!0);const _e=window.getSelection();_e&&(_e.removeAllRanges(),_e.addRange(pe))}},f=()=>{s.value=0,l.value&&(l.value.textContent="0")},b=()=>{s.value=100,l.value&&(l.value.textContent="100")},C=Y=>{Y.target===Y.currentTarget&&l.value&&l.value.focus()},k=()=>{if(l.value){const Y=l.value.textContent??"",pe=h();if(/^\d*(\.\d*)?$/.test(Y))if(c.value=Y.endsWith("."),Y){const _e=parseFloat(Y);_e>=0&&_e<=100?s.value=_e:(l.value.textContent=r.value,g(pe-1))}else s.value=0;else l.value.textContent=r.value,g(pe-1)}},{data:I}=gt({abi:ot,address:tt,functionName:"token",query:{enabled:a}}),{data:T}=gt({abi:ot,address:tt,functionName:"getVoterState",args:y(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:y(()=>!!t.value&&a.value),initialData:0,initialDataUpdatedAt:0}}),{data:P}=gt({abi:ry,address:I,functionName:"balanceOfAt",args:y(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:y(()=>!!I.value&&!!t.value&&a.value),initialData:0n,initialDataUpdatedAt:0}}),{data:F,refetch:N}=gt({abi:ot,address:tt,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:y(()=>v.value&&a.value),initialData:!1,initialDataUpdatedAt:0}}),{data:Se}=gt({abi:ot,address:tt,functionName:"PCT_BASE",query:{enabled:a}}),{data:Ke,error:D,isPending:ue,writeContract:de}=Wa(),{isLoading:oe,isSuccess:ne}=Ka({hash:Ke}),et=y(()=>ue.value||oe.value);function He(){if(!Se.value){Ae({text:Mt("Missing PCT_BASE"),type:"error"});return}const Y=BigInt(Math.log10(Number(Se.value))),pe=wa(s.value/100,Y),_e=Se.value-pe;de({abi:ot,address:tt,functionName:"votePct",args:[BigInt(e.proposal.id),pe,_e,!1]})}Pt(D,Y=>{Ae({text:Mt(Y),type:"error"})}),Pt(ne,()=>{Ae({text:"Voted",type:"success"})});const{data:ft,error:Xt,isPending:yo,writeContract:bo}=Wa(),{isLoading:wo,isSuccess:Co}=Ka({hash:ft}),Oa=y(()=>yo.value||wo.value);function $o(){bo({abi:ot,address:tt,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),N()}return Pt(Xt,Y=>{Ae({text:Mt(Y),type:"error"})}),Pt(Co,()=>{Ae({text:"Executed proposal",type:"success"})}),(Y,pe)=>{const _e=ge,ko=j,Ea=ve,So=ly,Ao=M,To=ka;return _(),$(Z,null,[p("div",iy,[m(_e,{value:"Vote",primary:!0,onClick:pe[0]||(pe[0]=Yt=>a.value=!0)}),o(v)?(_(),S(_e,{key:0,value:o(Oa)?"Executing...":"Execute",primary:!0,disabled:!o(F)||o(Oa),onClick:$o},null,8,["value","disabled"])):q("",!0)]),m(To,{show:o(a),onClose:pe[2]||(pe[2]=Yt=>a.value=!1)},{default:w(()=>[m(Ao,{title:"Vote with veCRV",class:"vote-content"},{default:w(()=>[p("div",cy,[p("div",uy,[p("div",dy,[m(Ea,{label:"Voting power","has-value":!0},{default:w(()=>[m(ko,{value:o(u),precision:2,type:"dollar","show-symbol":!1,"show-zero":!0},null,8,["value"]),x(" veCRV ")]),_:1}),m(Ea,{label:"Block",value:Y.proposal.block,"has-value":!0},null,8,["value"])]),p("div",py,[my,p("span",null,R(Y.proposal.metadata),1)])]),p("div",vy,[m(_e,{class:B(["no",{winning:o(s)<50}]),disabled:!o(n),onClick:f},{default:w(()=>[hy]),_:1},8,["class","disabled"]),p("div",_y,[p("i",{class:B(["fas fa-times",{winning:o(s)<50}])},null,2),p("div",{class:B(["value",{disabled:!o(n)}]),onClick:C},[p("span",{ref_key:"editor",ref:l,contenteditable:o(n),onInput:k,textContent:R(o(r))},null,40,fy),x(" % ")],2),p("i",{class:B(["fas fa-check",{winning:o(s)>50}])},null,2)]),m(_e,{class:B(["yes",{winning:o(s)>50}]),disabled:!o(n),onClick:b},{default:w(()=>[gy]),_:1},8,["class","disabled"])]),m(So,{modelValue:o(s),"onUpdate:modelValue":pe[1]||(pe[1]=Yt=>se(s)?s.value=Yt:null),class:"slider",disabled:!o(n),min:0,max:100},null,8,["modelValue","disabled"]),m(_e,{class:"submit",value:o(i),primary:!0,disabled:!o(n),"chain-id":o(Qe).id,onClick:He},null,8,["value","disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),by=L(yy,[["__scopeId","data-v-8b3d2b54"]]),wy={class:"voting"},Cy=A({__name:"Voting",props:{proposal:{}},setup(e){return(t,a)=>(_(),$("div",wy,[m(sy,{proposal:t.proposal},null,8,["proposal"]),m(jg,{proposal:t.proposal},null,8,["proposal"]),m(by,{proposal:t.proposal},null,8,["proposal"])]))}}),$y=L(Cy,[["__scopeId","data-v-8e776315"]]),io=e=>(z("data-v-817e3bb8"),e=e(),Q(),e),ky={class:"voters"},Sy={class:"for"},Ay=io(()=>p("div",{class:"title"},"For",-1)),Ty={class:"address"},Ly=["href"],Iy={class:"amount"},Ry={class:"percentage"},Vy={class:"against"},Py=io(()=>p("div",{class:"title"},"Against",-1)),Fy={class:"percentage"},qy={class:"amount"},Dy={class:"address"},By=["href"],My=A({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=kt(),a=y(()=>e.proposalDetails?e.proposalDetails.votes.filter(n=>n.supports).orderBy(n=>n.votingPower,"desc"):null),s=y(()=>e.proposalDetails?e.proposalDetails.votes.filter(n=>!n.supports).orderBy(n=>n.votingPower,"desc"):null),l=n=>n==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":n==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":n==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":Ce(n,12),c=n=>n/(e.proposal.votesFor+e.proposal.votesAgainst)*100,r=n=>n===t.value;return(n,i)=>{const u=j;return _(),$("div",ky,[p("div",Sy,[Ay,(_(!0),$(Z,null,re(o(a),d=>(_(),$("div",{key:d.voter,class:"vote"},[p("div",Ty,[p("a",{target:"_blank",href:`https://etherscan.io/address/${d.voter}`,class:B({you:r(d.voter)})},R(l(d.voter)),11,Ly)]),p("div",Iy,[m(u,{value:d.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),p("div",Ry,[m(u,{value:c(d.votingPower),precision:0,type:"percentage"},null,8,["value"])])]))),128))]),p("div",Vy,[Py,(_(!0),$(Z,null,re(o(s),d=>(_(),$("div",{key:d.voter,class:"vote"},[p("div",Fy,[m(u,{value:c(d.votingPower),precision:0,type:"percentage"},null,8,["value"])]),p("div",qy,[m(u,{value:d.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),p("div",Dy,[p("a",{target:"_blank",href:`https://etherscan.io/address/${d.voter}`,class:B({you:r(d.voter)})},R(l(d.voter)),11,By)])]))),128))])])}}}),xy=L(My,[["__scopeId","data-v-817e3bb8"]]),Uy=e=>(z("data-v-5705cc25"),e=e(),Q(),e),Oy={class:"technicals"},Ey={class:"technical"},Wy=Uy(()=>p("div",{class:"heading"},"Description",-1)),Ky={class:"description"},Hy={class:"technical"},Ny={class:"technical"},zy=["innerHTML"],Qy=A({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){const t=V(!0),a=V(e.proposal.voteCount>0),{data:s}=no(W(()=>e.proposal.id),W(()=>e.proposal.type),W(()=>e.expanded)),l=y(()=>s.value?s.value.votes.uniqWith((r,n)=>r.voter===n.voter).length:null),c=y(()=>s.value?s.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,r=>/[A-F]/g.test(r)&&ya(r)?`<a href='https://etherscan.io/address/${r}'>${r}</a>`:r):null);return(r,n)=>{const i=Ct;return _(),$("div",Oy,[p("div",Ey,[Wy,p("div",Ky,R(r.proposal.metadata),1)]),p("div",Hy,[p("div",{class:"heading",onClick:n[0]||(n[0]=u=>a.value=!o(a))},[x(" Voters ("+R(o(l)??"?")+") ",1),p("i",{class:B(["fas fa-chevron-up expander",{expandedVoters:o(a)}])},null,2)]),m(i,{expanded:o(a)},{default:w(()=>[o(s)?(_(),S(xy,{key:0,class:"voters",proposal:r.proposal,"proposal-details":o(s)},null,8,["proposal","proposal-details"])):q("",!0)]),_:1},8,["expanded"])]),p("div",Ny,[p("div",{class:"heading",onClick:n[1]||(n[1]=u=>t.value=!o(t))},[x(" Calldata "),p("i",{class:B(["fas fa-chevron-up expander",{expandedCallData:o(t)}])},null,2)]),m(i,{expanded:o(t)},{default:w(()=>[o(s)?(_(),$("div",{key:0,class:"calldata",innerHTML:o(c)},null,8,zy)):q("",!0)]),_:1},8,["expanded"])])])}}}),jy=L(Qy,[["__scopeId","data-v-5705cc25"]]),Gy={class:"proposal-details"},Xy={class:"proposal-details-container"},Yy=A({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){return(t,a)=>(_(),$("div",Gy,[p("div",Xy,[m(jy,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),m($y,{proposal:t.proposal},null,8,["proposal"])])]))}}),Zy=L(Yy,[["__scopeId","data-v-33738e05"]]),Jy=A({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=V(e.initExpanded);return(a,s)=>{const l=Ct,c=M;return _(),S(c,{class:"proposal",compact:!0},{default:w(()=>[m(Lg,{proposal:a.proposal,expanded:o(t),onToggleExpand:s[0]||(s[0]=r=>t.value=!o(t))},null,8,["proposal","expanded"]),m(l,{class:"proposal-details-collapsible",expanded:o(t)},{default:w(()=>[m(Zy,{proposal:a.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),co=L(Jy,[["__scopeId","data-v-c308539c"]]),e1={class:"item"},t1={class:"label"},a1=A({__name:"ProposalTypeSelect",emits:["select"],setup(e,{emit:t}){const a=[...mg].filter(i=>i!=="other"),s=t,l=V(!1),c=V("all"),r=()=>{l.value=!l.value},n=i=>{c.value=i,s("select",c.value)};return(i,u)=>{const d=St;return _(),S(d,{class:"select",options:o(a).map(v=>v),selected:o(c),open:o(l),onOpen:r,onClose:u[0]||(u[0]=v=>l.value=!1),onInput:n},{item:w(v=>[p("div",e1,[p("div",t1,R(o($t)(v.item)),1)])]),_:1},8,["options","selected","open"])}}}),s1=L(a1,[["__scopeId","data-v-ed37546b"]]),o1={class:"proposals"},n1={class:"filters"},l1={style:{display:"flex",gap:"1rem"}},r1={class:"proposals-content"},i1={key:0},c1=A({__name:"Proposals.page",setup(e){const t=V(0),{page:a,onPage:s}=Ia(),l=Ut(a,200),c=V(""),r=Ut(c,300),n=V("all"),i=y(()=>{switch(t.value){case 0:return"all";case 1:return"active";case 2:return"passed";case 3:return"denied";case 4:return"executed";default:return"all"}}),u=y(()=>r.value.toLocaleLowerCase()),d=y(()=>{var b;return((b=g.value)==null?void 0:b.count)??0}),v=y(()=>{var b;return(((b=g.value)==null?void 0:b.proposals)??[]).orderBy(C=>C.start,"desc")}),{isFetching:h,data:g}=_g(l,n,i,u),f=b=>{n.value=b};return(b,C)=>{const k=Ee,I=Oe,T=Le,P=Ue,F=Ge;return _(),$("div",o1,[m(I,{onTab:C[0]||(C[0]=N=>t.value=N.index)},{default:w(()=>[m(k,{header:"All"}),m(k,{header:"Active"}),m(k,{header:"Passed"}),m(k,{header:"Denied"}),m(k,{header:"Executed"})]),_:1}),p("div",n1,[m(T,{modelValue:o(c),"onUpdate:modelValue":C[1]||(C[1]=N=>se(c)?c.value=N:null),class:"search",placeholder:"Search for Curve proposals",search:!0},null,8,["modelValue"]),p("div",l1,[m(s1,{style:{"flex-grow":"1"},onSelect:f}),m(P,{class:"pagination","items-count":o(d),"items-per-page":10,page:o(a),onPage:o(s)},null,8,["items-count","page","onPage"])])]),p("div",r1,[(_(!0),$(Z,null,re(o(v),N=>(_(),S(co,{key:N.id,proposal:N,class:B({loading:o(h)})},null,8,["proposal","class"]))),128)),m(P,{class:"pagination","items-count":o(d),"items-per-page":10,page:o(a),onPage:o(s)},null,8,["items-count","page","onPage"]),o(v).length===0?(_(),$("div",i1,"No proposals could be found.")):q("",!0),m(F,{class:B(["spinner",{loading:o(h)}])},null,8,["class"])])])}}}),u1=L(c1,[["__scopeId","data-v-6a7a4ce5"]]),d1={class:"proposal-container"},p1=A({__name:"Proposal.page",setup(e){const t=fe("proposalId",0,{transform:Number}),a=fe("proposalType"),{isFetching:s,data:l}=no(t,a);return(c,r)=>{const n=Ge;return _(),$("div",d1,[m(n,{class:B(["spinner",{loading:o(s)}])},null,8,["class"]),!o(s)&&o(l)?(_(),S(co,{key:0,proposal:o(l),"init-expanded":!0},null,8,["proposal"])):q("",!0)])}}}),m1=L(p1,[["__scopeId","data-v-9afd57bb"]]),v1=[{stateMutability:"nonpayable",type:"function",name:"deploy_gauge",inputs:[{name:"_receiver",type:"address"},{name:"_max_emissions",type:"uint256"}],outputs:[{name:"",type:"address"}]}],uo=e=>(z("data-v-f41a9b71"),e=e(),Q(),e),h1={class:"form"},_1={class:"field"},f1=uo(()=>p("div",{class:"label"},"Receiver:",-1)),g1={class:"value"},y1={class:"field"},b1=uo(()=>p("div",{class:"label"},"CRV Amount (Max):",-1)),w1={class:"value"},C1=A({__name:"DeployGauge",emits:["gauge"],setup(e,{emit:t}){const a=t,s=V(!1),l=V(""),c=V(0),r=y(()=>_s),n=y(()=>ya(l.value.toLocaleLowerCase())&&typeof c.value=="number"&&c.value>0),i=ba();async function u(){const d=l.value.toLocaleLowerCase();typeof c.value=="string"&&(c.value=parseFloat(c.value));const v=wa(c.value,18n);return bs(s,async()=>{const{result:h,request:g}=await tn(i,{abi:v1,address:fs,functionName:"deploy_gauge",args:[d,v]}),f=await us(i,g);await ds(i,{hash:f}),a("gauge",h)})}return(d,v)=>{const h=Le,g=qa,f=ge,b=M;return _(),S(b,{class:"add-new",title:"Gauge Creation"},{default:w(()=>[p("div",h1,[p("div",_1,[f1,p("div",g1,[m(h,{modelValue:o(l),"onUpdate:modelValue":v[0]||(v[0]=C=>se(l)?l.value=C:null),placeholder:o(r)},null,8,["modelValue","placeholder"])])]),p("div",y1,[b1,p("div",w1,[m(g,{modelValue:o(c),"onUpdate:modelValue":v[1]||(v[1]=C=>se(c)?c.value=C:null),min:1,max:3303030299},null,8,["modelValue"])])])]),m(f,{class:"action-button request",value:"Create Fundraising Gauge",disabled:!o(n)||o(s),primary:!0,"chain-id":o(Qe).id,onClick:u},null,8,["disabled","chain-id"])]),_:1})}}}),$1=L(C1,[["__scopeId","data-v-f41a9b71"]]),k1=[{constant:!1,inputs:[{name:"_target",type:"address"},{name:"_ethValue",type:"uint256"},{name:"_data",type:"bytes"}],name:"execute",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],S1=[{constant:!1,inputs:[{name:"_executionScript",type:"bytes"},{name:"_metadata",type:"string"},{name:"_castVote",type:"bool"},{name:"_executesIfDecided",type:"bool"}],name:"newVote",outputs:[{name:"voteId",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"}],A1=[{name:"add_gauge",outputs:[],inputs:[{type:"address",name:"addr"},{type:"int128",name:"gauge_type"},{type:"uint256",name:"weight"}],stateMutability:"nonpayable",type:"function"}],po=e=>(z("data-v-80d90fe0"),e=e(),Q(),e),T1={class:"form"},L1={class:"field"},I1=po(()=>p("div",{class:"label"},"Gauge Address:",-1)),R1={class:"value"},V1={class:"field"},P1=po(()=>p("div",{class:"label"},"Vote Description:",-1)),F1={class:"value"},q1=A({__name:"GaugeVote",props:{gauge:{default:""}},emits:["request"],setup(e,{emit:t}){const a=t,s=V(!1),l=V(""),c=V("Add a grant gauge: "),r=y(()=>_s),n=y(()=>ya(l.value)&&!!c.value),i=y(()=>n.value&&!s.value);G(()=>e.gauge,h=>{l.value=h.toLocaleLowerCase()});async function u(){if(l.value)return bs(s,async()=>{await v(),a("request")})}const d=ba();async function v(){const h="0xe478de485ad2fe566d49342cbd03e49ed7db3356",g="0x40907540d8a6c65c637785e8f8b742ae6b0b9968",f=(ue,de)=>String(ue).padStart(de,"0"),b=Ha({abi:A1,functionName:"add_gauge",args:[l.value,10n,0n]});let C="0x00000001";const k=Ha({abi:k1,functionName:"execute",args:[gs,0n,b]}).substring(2),I=f((Math.floor(k.length)/2).toString(16),8);C=`${C}${g.substring(2)}${I}${k}`;const T=new FormData,F={text:c.value.replace(/(\r\n|\n|\r)/gm,"")};T.append("file",JSON.stringify(F));const Ke=(await(await fetch("https://ipfs.infura.io:5001/api/v0/add",{method:"POST",body:T})).json()).Hash,D=await us(d,{abi:S1,address:h,functionName:"newVote",args:[C,`ipfs:${Ke}`,!1,!1]});await ds(d,{hash:D})}return(h,g)=>{const f=Le,b=ge,C=M;return _(),S(C,{class:"add-new",title:"Gauge Addition Vote"},{default:w(()=>[p("div",T1,[p("div",L1,[I1,p("div",R1,[m(f,{modelValue:o(l),"onUpdate:modelValue":g[0]||(g[0]=k=>se(l)?l.value=k:null),placeholder:o(r)},null,8,["modelValue","placeholder"])])]),p("div",V1,[P1,p("div",F1,[m(f,{modelValue:o(c),"onUpdate:modelValue":g[1]||(g[1]=k=>se(c)?c.value=k:null)},null,8,["modelValue"])])])]),m(b,{class:"action-button request",value:"Create Gauge Addition Vote",disabled:!o(i),primary:!0,"chain-id":o(Qe).id,onClick:u},null,8,["disabled","chain-id"])]),_:1})}}}),D1=L(q1,[["__scopeId","data-v-80d90fe0"]]),mo=e=>(z("data-v-8bd18cb3"),e=e(),Q(),e),B1={class:"ve-funder"},M1={class:"explanation"},x1=mo(()=>p("div",{class:"step-one"},[p("span",null,[p("strong",null,"veFunder"),x(" process:")]),p("ol",null,[p("li",null," Create a fundraising gauge contract that allows a receiver to get a certain amount of CRV. "),p("li",null,[x(" Request a vote to add the gauge to the controller."),p("br"),x("When passed, the newly created gauge can be voted on during gauge votes and can then receive gauge emissions. ")])])],-1)),U1=mo(()=>p("div",{class:"step-two"},[p("span",null,[p("strong",null,"Gauge vote requirements:")]),p("ol",null,[p("li",null,[x(" New gauge votes must have a vote on the governance forum "),p("a",{href:"https://gov.curve.fi/",target:"_blank"}," at this address ")]),p("li",null,"You must have a minimum of 2,500 veCRV to create this vote")])],-1)),O1={class:"forms"},E1=A({__name:"VeFunder.page",setup(e){const t=V(""),a=s=>{t.value=s};return(s,l)=>{const c=M;return _(),$("div",B1,[p("div",M1,[m(c,null,{default:w(()=>[x1,U1]),_:1})]),p("div",O1,[m($1,{onGauge:a}),m(D1,{gauge:o(t)},null,8,["gauge"])])])}}}),W1=L(E1,[["__scopeId","data-v-8bd18cb3"]]),K1="/assets/header--BhHUuM7.png",H1={},N1=e=>(z("data-v-c2ae5734"),e=e(),Q(),e),z1={class:"header"},Q1=N1(()=>p("img",{class:"header-image",src:K1},null,-1)),j1=[Q1];function G1(e,t){return _(),$("div",z1,j1)}const X1=L(H1,[["render",G1],["__scopeId","data-v-c2ae5734"]]),Y1=e=>(z("data-v-e43f30f8"),e=e(),Q(),e),Z1={class:"general"},J1=Y1(()=>p("div",{class:"title"},"Total locked value, incentives & market cap",-1)),eb=A({__name:"General",props:{model:{}},setup(e){const t=y(()=>{var n;return(n=e.model)==null?void 0:n.crvLockedDollars}),a=y(()=>{var n;return(n=e.model)==null?void 0:n.crvLockedDollarsMonthly}),s=y(()=>{var n;return(n=e.model)==null?void 0:n.cvxTvl}),l=y(()=>{var n;return(n=e.model)==null?void 0:n.cvxVotingPercentage}),c=y(()=>{var n;return(n=e.model)==null?void 0:n.cvxMarketCap}),r=y(()=>{var n;return(n=e.model)==null?void 0:n.cvxMarketCapFullyDiluted});return(n,i)=>{const u=j;return _(),$("div",Z1,[J1,p("ul",null,[p("li",null,[m(u,{value:o(t),precision:0,type:"dollar"},null,8,["value"]),x(" worth of CRV permanently locked in its contract, and is continuing to see a rate of about "),m(u,{value:o(a),precision:0,type:"dollar"},null,8,["value"]),x(" worth of CRV permanently locked in its contract per month. ")]),x(" Convex currently has about "),p("li",null,[m(u,{value:o(s),precision:0,type:"dollar"},null,8,["value"]),x(" TVL and controls close to "),m(u,{value:o(l),precision:0,type:"percentage"},null,8,["value"]),x(" of the voting power of Curve. ")]),p("li",null,[x(" Convex's market cap is just "),m(u,{value:o(c),precision:0,type:"dollar"},null,8,["value"]),x(" with a fully diluted valuation of "),m(u,{value:o(r),precision:0,type:"dollar"},null,8,["value"]),x(". ")])])])}}}),tb=L(eb,[["__scopeId","data-v-e43f30f8"]]),vo=e=>(z("data-v-6d84ceef"),e=e(),Q(),e),ab={class:"bribes"},sb=vo(()=>p("div",{class:"title"},"Incentives",-1)),ob=vo(()=>p("li",null," CVX acts as a union controlling CRV rewards for Curve LP pools. To receive rewards, incentives must be paid to locked CVX holders. ",-1)),nb=A({__name:"Bribes",props:{model:{}},setup(e){const t=y(()=>{var s;return(s=e.model)==null?void 0:s.bribesIncomeAnnually}),a=y(()=>{var s;return(s=e.model)==null?void 0:s.bribesIncomeBiWeekly});return(s,l)=>{const c=j;return _(),$("div",ab,[sb,p("ul",null,[ob,p("li",null,[x(" CVX holders will potentially earn over "),m(c,{value:o(t),precision:0,type:"dollar"},null,8,["value"]),x(" in incentives over a 1 year period. ")]),p("li",null,[x(" Incentives to CVX holders are very likely to reach "),m(c,{value:o(a),precision:0,type:"dollar"},null,8,["value"]),x(" biweekly in the coming weeks (based on total rewards paid by Votium app) ")])])])}}}),lb=L(nb,[["__scopeId","data-v-6d84ceef"]]),rb="/assets/cvx-PJG1_7yb.png",ib="/assets/cvxcrv-B_jSbKBn.png",Ua=e=>(z("data-v-f32160d2"),e=e(),Q(),e),cb={class:"farm"},ub=Ua(()=>p("div",{class:"title"},"Income",-1)),db={class:"values"},pb={class:"cvx"},mb={class:"content"},vb={class:"value"},hb={class:"description"},_b=Ua(()=>p("img",{class:"logo",src:rb},null,-1)),fb={class:"crv"},gb=Ua(()=>p("img",{class:"logo",src:ib},null,-1)),yb={class:"content"},bb={class:"value"},wb={class:"description"},Cb=A({__name:"Farm",props:{model:{}},setup(e){const t=new ys,{address:a}=kt(),s=ba(),l=V(void 0),c=y(()=>{var r;return(r=e.model)==null?void 0:r.cvxApr});return G(a,async()=>{const r=an(s);if(!r)throw Error("Cannot create public viem client");const i=(await sl(r,t)).reduce((u,d)=>u+d,0)/2;l.value=i*100},{immediate:!0}),(r,n)=>{const i=j;return _(),$("div",cb,[ub,p("div",db,[p("div",pb,[p("div",mb,[p("span",vb,[m(i,{value:o(c),precision:0,type:"percentage"},null,8,["value"]),x(" APR ")]),p("span",hb,[x(" Locked CVX earns "),m(i,{value:o(c),precision:0,type:"percentage"},null,8,["value"]),x(" APR with incentives. ")])]),_b]),p("div",fb,[gb,p("div",yb,[p("span",bb,[m(i,{value:o(l),precision:0,type:"percentage"},null,8,["value"]),x(" APR ")]),p("span",wb,[x(" Staked cvxCRV earns "),m(i,{value:o(l),precision:0,type:"percentage"},null,8,["value"]),x(" APR ")])])])])])}}}),$b=L(Cb,[["__scopeId","data-v-f32160d2"]]);class kb extends Xe{async getConvex(){const t="flyer-convex",a=await this.getHost();return this.fetch(`${a}/dashboard/${t}`)}async getAura(){const t="flyer-aura",a=await this.getHost();return this.fetch(`${a}/dashboard/${t}`)}}const Sb={class:"flyer"},Ab={class:"flyer-items"},Tb=A({__name:"Flyer.page",setup(e){const t=new kb(je()),a=V(null);return ce(async()=>{const s=await bt(t.getConvex());s.statusCode===200&&s.dashboard&&(a.value=s.dashboard)}),(s,l)=>(_(),$("div",Sb,[p("div",Ab,[m(X1),m($b,{model:o(a)},null,8,["model"]),m(tb,{model:o(a)},null,8,["model"]),m(lb,{model:o(a)},null,8,["model"])])]))}}),Lb=L(Tb,[["__scopeId","data-v-663596f1"]]),Ib={totalCrvRevenueToLpProviders:0,totalCvxRevenueToLpProviders:0,totalFxsRevenueToLpProviders:0,totalCrvRevenueToCvxCrvStakers:0,totalCvxRevenueToCvxCrvStakers:0,totalThreeCrvRevenueToCvxCrvStakers:0,totalFxsRevenueToCvxFxsStakers:0,totalCrvRevenueToCvxStakers:0,totalFxsRevenueToCvxStakers:0,totalCrvRevenueToCallers:0,totalFxsRevenueToCallers:0,totalCrvRevenueToPlatform:0,totalFxsRevenueToPlatform:0,totalCrvRevenue:0,totalFxsRevenue:0,totalBribeRevenue:0,totalOtherRevenue:0},Rb={crvRevenueToLpProvidersAmount:0,cvxRevenueToLpProvidersAmount:0,crvRevenueToCvxCrvStakersAmount:0,cvxRevenueToCvxCrvStakersAmount:0,threeCrvRevenueToCvxCrvStakersAmount:0,crvRevenueToCvxStakersAmount:0,crvRevenueToCallersAmount:0,crvRevenueToPlatformAmount:0,totalCrvRevenue:0,fxsRevenueToCvxStakersAmount:0,fxsRevenueToCvxFxsStakersAmount:0,fxsRevenueToLpProvidersAmount:0,fxsRevenueToCallersAmount:0,fxsRevenueToPlatformAmount:0,totalFxsRevenue:0,bribeRevenue:0,otherRevenue:0,timestamp:0},Re=wt("convexStore",()=>{const e=V([]),t=V({}),a=V(Ib),s=V([Rb]);function l(c,r){t.value[c.name]=r}return{pools:e,snapshots:t,revenue:a,historicalRevenue:s,setSnapshots:l}});function Vb(e){return e.baseApr+e.crvApr+e.cvxApr+e.extraRewardsApr}const Pb=A({__name:"ChartApr",props:{poolSelected:{}},setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>t.snapshots[e.poolSelected.name]??[]),l=y(()=>le(a.value,{chart:{id:"convex-apr",type:"area",animations:{enabled:!1}},xaxis:{type:"datetime"},yaxis:{labels:{formatter:n=>r(n)}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!1,custom:n=>{const i=n.w.globals.initialSeries[n.seriesIndex].data[n.dataPointIndex].snapshot;return[`<div><b>Base</b>:</div><div>${r(i.baseApr)}</div>`,`<div><b>CRV</b>:</div><div>${r(i.crvApr)}</div>`,`<div><b>CVX</b>:</div><div>${r(i.cvxApr)}</div>`,`<div><b>Extra</b>:</div><div>${r(i.extraRewardsApr)}</div>`].join("")}}})),c=y(()=>[{name:"APR",data:s.value.map(n=>({x:n.timeStamp*1e3,y:Vb(n),snapshot:n}))}]),r=n=>(n*=100,`${K(n,1,"percentage")}${E(n,"percentage")}`);return(n,i)=>{const u=he;return _(),S(u,{class:"apr",title:"Annual Percentage Rate",options:o(l),series:o(c)},null,8,["options","series"])}}}),Fb=L(Pb,[["__scopeId","data-v-87a2bda5"]]),qb=A({__name:"ChartTvl",props:{poolSelected:{}},setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>t.snapshots[e.poolSelected.name]??[]),l=y(()=>le(a.value,{chart:{id:"convex-tvl",type:"area",animations:{enabled:!1}},xaxis:{type:"datetime"},yaxis:{labels:{formatter:n=>r(n)}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!1,custom:n=>{const i=n.w.globals.initialSeries[n.seriesIndex].data[n.dataPointIndex].y;return`<div><b>TVL</b>:</div><div>${r(i)}</div>`}}})),c=y(()=>[{name:"tvl",data:s.value.map(n=>({x:n.timeStamp*1e3,y:n.tvl}))}]),r=n=>`$${K(n,1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"tvl",title:"Total Value Locked",options:o(l),series:o(c)},null,8,["options","series"])}}}),Db=L(qb,[["__scopeId","data-v-be3a7b5b"]]);function ns(e){return e.baseApr+e.crvApr+e.cvxApr+e.extraRewardsApr}const Bb={class:"end"},Mb={class:"end"},xb={key:0,class:"charts"},Ub=A({__name:"TablePools",props:{expanded:{default:()=>[]}},emits:["selected"],setup(e,{emit:t}){const a=t,s=Re(),l=y(()=>["",{id:"name",label:"Name",sort:!0},{id:"apr",label:"APR",sort:!0,align:"end"},{id:"tvl",label:"TVL",sort:!0,align:"end"}]),{sorting:c,onSort:r}=Ze("tvl"),n=y(()=>s.pools.filter(i=>!Xn(i.name)).orderBy(i=>{switch(c.value.column){case"name":return Me(i.name);case"apr":return ns(i);case"tvl":return i.tvl}},c.value.order));return(i,u)=>{const d=j,v=ee,h=M;return _(),S(h,{title:"Convex Pools"},{default:w(()=>[m(v,{class:"pools-table",rows:o(n),columns:o(l),sorting:o(c),expanded:i.expanded,onSortColumn:o(r),onSelected:u[0]||(u[0]=g=>a("selected",g))},{row:w(g=>[p("div",null,R(o(Me)(g.item.name)),1),p("div",Bb,[m(d,{value:o(ns)(g.item)*100,precision:1,type:"percentage"},null,8,["value"])]),p("div",Mb,[m(d,{value:g.item.tvl,precision:1,type:"dollar"},null,8,["value"])])]),"row-details":w(g=>[i.expanded.includes(g.item)?(_(),$("div",xb,[m(o(Db),{class:"tvl","pool-selected":g.item},null,8,["pool-selected"]),m(o(Fb),{class:"apr","pool-selected":g.item},null,8,["pool-selected"])])):q("",!0)]),_:1},8,["rows","columns","sorting","expanded","onSortColumn"])]),_:1})}}}),Ob=L(Ub,[["__scopeId","data-v-f10d4a90"]]);class Eb extends Xe{async get(){const t=await this.getHost();return this.fetch(`${t}/pool`)}}class Wb extends Xe{async get(t){const a=await this.getHost();return this.fetch(`${a}/poolsnapshots`,{pool:t.name})}}const Kb={class:"pools"},Hb={class:"dashboard"},Nb=A({__name:"Pools.page",setup(e){let t=!1;const a=new Eb(je()),s=new Wb(je()),l=Re(),c=fe("pool"),r=xe(),{expanded:n,toggleExpansion:i}=Gt();ce(async()=>{t=!0;const h=await bt(a.get());if(h){const g=h.pools;if(g.sort((f,b)=>b.tvl-f.tvl),l.pools=g.filter(f=>f.tvl>1e3),!t)return;c.value&&d(c.value)}}),ga(()=>{t=!1});const u=async h=>{if(!h||l.snapshots[h.name])return;const g=await bt(s.get(h),500);if(g){const f=g.data.snapshots;l.setSnapshots(h,f)}},d=h=>{const g=$a(h),f=l.pools.find(b=>b.name===g);f&&i(f)&&u(f)},v=async h=>{i(h)&&(u(h),await r.push({name:"convexpools",params:{pool:Me(h.name)}}))};return(h,g)=>(_(),$("div",Kb,[p("div",Hb,[m(Ob,{class:"pools-table",expanded:o(n),onSelected:v},null,8,["expanded"])])]))}}),zb=L(Nb,[["__scopeId","data-v-00ce4f09"]]),Qb="https://api-py.llama.airforce/convex/v1/platform/revenue/snapshots?groupby=m",jb="https://api-py.llama.airforce/convex/v1/platform/revenue";class Gb extends $e{get(){return this.fetch(jb).then(t=>t.revenue[0])}}class Xb extends $e{get(){return this.fetch(Qb).then(t=>t.revenue)}}const Yb=A({__name:"RevenueSources",setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>[{source:"CRV",value:t.revenue.totalCrvRevenue},{source:"3CRV",value:t.revenue.totalThreeCrvRevenueToCvxCrvStakers},{source:"FXS",value:t.revenue.totalFxsRevenue},{source:"Others (POL, Votemarket)",value:t.revenue.totalOtherRevenue},{source:"Bribes",value:t.revenue.totalBribeRevenue}]),l=y(()=>{const{colors:n}=a.value;return le(a.value,{legend:{inverseOrder:!0},stroke:{width:.5},fill:{type:"solid",opacity:.9},plotOptions:{pie:{donut:{size:"60%"},dataLabels:{offset:5,minAngleToShowLabel:3}}},dataLabels:{style:{fontSize:"12px"},formatter:function(i){return Math.round(i).toString()+"%"},dropShadow:!1},tooltip:{inverseOrder:!0,style:{fontSize:"10px"},y:{formatter:r}},chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},colors:[n.blue,n.green,n.purple,n.yellow,n.red],labels:s.value.map(i=>i.source)})}),c=y(()=>s.value.map(n=>n.value)),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"breakdown-revenue",options:o(l),series:o(c)},null,8,["options","series"])}}}),Zb=A({__name:"LPRevenue",setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>[{name:"CRV",data:t.historicalRevenue.map(n=>n.crvRevenueToLpProvidersAmount)},{name:"CVX",data:t.historicalRevenue.map(n=>n.cvxRevenueToLpProvidersAmount)},{name:"FXS",data:t.historicalRevenue.map(n=>n.fxsRevenueToLpProvidersAmount)}]),l=y(()=>t.historicalRevenue.map(n=>new Date(n.timestamp*1e3))),c=y(()=>{const{colors:n}=a.value;return le(a.value,{legend:{inverseOrder:!0},stroke:{width:.5},fill:{type:"solid",opacity:.9},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:l.value.map(i=>i.toISOString().split("T")[0])},yaxis:{labels:{formatter:r}},tooltip:{inverseOrder:!0,style:{fontSize:"10px"},y:{formatter:r}},chart:{id:"chainRevenues",type:"bar",stacked:!0,animations:{enabled:!1}},dataLabels:{enabled:!1},colors:[n.blue,n.yellow,n.purple],labels:s.value.map(i=>i.name)})}),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"lp-revenue",options:o(c),series:o(s)},null,8,["options","series"])}}}),Jb=A({__name:"HolderRevenue",setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>[{name:"CRV",data:t.historicalRevenue.map(n=>n.crvRevenueToCvxStakersAmount)},{name:"FXS",data:t.historicalRevenue.map(n=>n.fxsRevenueToCvxStakersAmount)},{name:"Bribes",data:t.historicalRevenue.map(n=>n.bribeRevenue)}]),l=y(()=>t.historicalRevenue.map(n=>new Date(n.timestamp*1e3))),c=y(()=>{const{colors:n}=a.value;return le(a.value,{legend:{inverseOrder:!0},stroke:{width:.5},fill:{type:"solid",opacity:.9},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:l.value.map(i=>i.toISOString().split("T")[0])},yaxis:{labels:{formatter:r}},tooltip:{inverseOrder:!0,style:{fontSize:"10px"},y:{formatter:r}},chart:{id:"chainRevenues",type:"bar",stacked:!0,animations:{enabled:!1}},dataLabels:{enabled:!1},colors:[n.blue,n.purple,n.red],labels:s.value.map(i=>i.name)})}),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"holder-revenue",options:o(c),series:o(s)},null,8,["options","series"])}}}),e0=A({__name:"HistoricalRevenue",setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>[{name:"CRV",data:t.historicalRevenue.map(n=>n.totalCrvRevenue)},{name:"FXS",data:t.historicalRevenue.map(n=>n.totalFxsRevenue)},{name:"3CRV",data:t.historicalRevenue.map(n=>n.threeCrvRevenueToCvxCrvStakersAmount)},{name:"Bribes",data:t.historicalRevenue.map(n=>n.bribeRevenue)},{name:"Others",data:t.historicalRevenue.map(n=>n.otherRevenue)}]),l=y(()=>t.historicalRevenue.map(n=>new Date(n.timestamp*1e3))),c=y(()=>{const{colors:n}=a.value;return le(a.value,{legend:{inverseOrder:!0},stroke:{width:.5},fill:{type:"solid",opacity:.9},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:l.value.map(i=>i.toISOString().split("T")[0])},yaxis:{labels:{formatter:r}},tooltip:{inverseOrder:!0,style:{fontSize:"10px"},y:{formatter:r}},chart:{id:"chainRevenues",type:"bar",stacked:!0,animations:{enabled:!1}},dataLabels:{enabled:!1},colors:[n.blue,n.purple,n.green,n.red,n.yellow],labels:s.value.map(i=>i.name)})}),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"historical-revenue",options:o(c),series:o(s)},null,8,["options","series"])}}}),t0=A({__name:"LiquidRevenue",setup(e){const t=Re(),{theme:a}=U(O()),s=y(()=>[{name:"CRV",data:t.historicalRevenue.map(n=>n.crvRevenueToCvxCrvStakersAmount)},{name:"CVX",data:t.historicalRevenue.map(n=>n.cvxRevenueToCvxCrvStakersAmount)},{name:"3CRV",data:t.historicalRevenue.map(n=>n.threeCrvRevenueToCvxCrvStakersAmount)},{name:"FXS",data:t.historicalRevenue.map(n=>n.fxsRevenueToCvxFxsStakersAmount)}]),l=y(()=>t.historicalRevenue.map(n=>new Date(n.timestamp*1e3))),c=y(()=>{const{colors:n}=a.value;return le(a.value,{legend:{inverseOrder:!0},stroke:{width:.5},fill:{type:"solid",opacity:.9},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:l.value.map(i=>i.toISOString().split("T")[0])},yaxis:{labels:{formatter:r}},tooltip:{inverseOrder:!0,style:{fontSize:"10px"},y:{formatter:r}},chart:{id:"chainRevenues",type:"bar",stacked:!0,animations:{enabled:!1}},dataLabels:{enabled:!1},colors:[n.blue,n.yellow,n.green,n.purple],labels:s.value.map(i=>i.name)})}),r=n=>`$${K(Math.abs(n),1,"dollar")}${E(n,"dollar")}`;return(n,i)=>{const u=he;return _(),S(u,{class:"liquid-revenue",options:o(c),series:o(s)},null,8,["options","series"])}}}),a0={class:"summary"},s0=A({__name:"Summary",setup(e){const t=Re(),a=y(()=>t.revenue.totalBribeRevenue+t.revenue.totalThreeCrvRevenueToCvxCrvStakers+t.revenue.totalCrvRevenue+t.revenue.totalFxsRevenue+t.revenue.totalOtherRevenue),s=y(()=>t.revenue.totalCrvRevenueToLpProviders+t.revenue.totalFxsRevenueToLpProviders+t.revenue.totalCvxRevenueToLpProviders),l=y(()=>t.revenue.totalCrvRevenueToPlatform+t.revenue.totalFxsRevenueToPlatform+t.revenue.totalFxsRevenueToCallers+t.revenue.totalOtherRevenue),c=y(()=>t.revenue.totalBribeRevenue+t.revenue.totalCrvRevenueToCvxStakers+t.revenue.totalFxsRevenueToCvxStakers),r=y(()=>t.revenue.totalCrvRevenueToCvxCrvStakers+t.revenue.totalCvxRevenueToCvxCrvStakers+t.revenue.totalFxsRevenueToCvxFxsStakers+t.revenue.totalThreeCrvRevenueToCvxCrvStakers);return(n,i)=>{const u=j,d=ve;return _(),$("div",a0,[m(d,{class:"all-time-revenue",label:"All time total revenue","has-value":!!o(a)},{default:w(()=>[m(u,{value:o(a),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{class:"lp-revenue",label:"Revenue for LPs (incl. CVX emissions)","has-value":!!o(s)},{default:w(()=>[m(u,{value:o(s),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{class:"holder",label:"Revenue for CVX lockers","has-value":!!o(c)},{default:w(()=>[m(u,{value:o(c),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{class:"liquid-revenue",label:"Revenue for liquid lockers (cvxCRV, cvxFXS)","has-value":!!o(r)},{default:w(()=>[m(u,{value:o(r),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(d,{class:"protocol-revenue",label:"Revenue directed to Convex treasury","has-value":!!o(l)},{default:w(()=>[m(u,{value:o(l),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"])])}}}),o0=L(s0,[["__scopeId","data-v-8d5bb8bd"]]),n0={class:"revenue"},l0={class:"revenue-charts"},r0=A({__name:"Revenue.page",setup(e){const t=new Gb,a=new Xb;let s=!1;const l=Re(),c=V(!1);return sn(async()=>{if(s)return;s=!0,c.value=!0;const r=await t.get();r&&(l.revenue=r);const n=await a.get();n&&(l.historicalRevenue=n),c.value=!1,s=!1}),ga(()=>{s=!1}),(r,n)=>{const i=Ge;return _(),$("div",n0,[p("div",{class:B(["dashboard",{loading:o(c)}])},[o(c)?(_(),S(i,{key:0,class:"spinner"})):q("",!0),p("div",l0,[m(o0,{class:"summary"}),m(Yb,{class:"chart-revenue-sources",title:"Breakdown of total revenue by source"}),m(e0,{class:"chart-historical-revenue",title:"Historical total revenue breakdown"}),m(Zb,{class:"chart-lp-revenue",title:"Liquidity providers rewards breakdown"}),m(Jb,{class:"chart-holder-revenue",title:"CVX holders rewards breakdown"}),m(t0,{class:"chart-liquid-revenue",title:"Liquid lockers rewards breakdown"})])],2)])}}}),i0=L(r0,[["__scopeId","data-v-e0d0a339"]]),c0={class:"item"},u0={class:"label"},d0=A({__name:"SelectToken",props:Fe({tokens:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["select"],["update:modelValue"]),setup(e,{emit:t}){const a=t,s=dt(e,"modelValue"),l=V(!1),c=()=>{l.value=!l.value},r=n=>{a("select",n)};return G(()=>e.tokens,()=>{e.tokens.length>0&&r(e.tokens[0])},{immediate:!0}),(n,i)=>{const u=Ie,d=St;return _(),S(d,{class:"select",options:n.tokens,selected:s.value,open:o(l),onOpen:c,onClose:i[0]||(i[0]=v=>l.value=!1),onInput:r},{item:w(({item:{address:v,symbol:h}})=>[p("div",c0,[m(u,{class:"icon",address:v},null,8,["address"]),p("div",u0,R(h??"?"),1)])]),_:1},8,["options","selected","open"])}}}),p0=L(d0,[["__scopeId","data-v-3b11c816"]]);let ua;function m0(){return ua||(ua=Xs({url:"wss://api.defimonitor.com/main"})),ua}class v0{constructor(t,a){Zt(this,"transfers$");this.socket=t,this.transfers$=(a==null?void 0:a.transfers$)??Df(t,"NewTransfersForToken")}subTransfers(t){this.socket.emit("connectToGeneralErc20Livestream",t)}}const yt=new Map,ho=new on(void 0),va=e=>JSON.stringify(e);function h0({queryKey:e,queryFn:t,enabled:a,observable:s,setQueryData:l,resetOnSubscribe:c}){const r=ps(),n=y(()=>a.value&&!!s.value),i=H({queryKey:e,queryFn:()=>new Promise((u,d)=>{c&&r.setQueryData(e.value,null);const v=va(e.value);let h=yt.get(v);const g=h==null?void 0:h.subscription;g==null||g.unsubscribe(),h={subscription:s.value.subscribe({next:f=>{const b=r.getQueryData(e),C=l(b,f);r.setQueryData(e.value,C),u(C)},error:f=>{d(f instanceof Error?f:new Error(String(f)))}}),users:new Set},yt.set(v,h),ho.next(h),t()}),enabled:n,staleTime:1/0});return G(s,async(u,d)=>{d&&u!==d&&await r.invalidateQueries({queryKey:e})}),_0(e,n),i}function _0(e,t){const a=ps(),s=ol(),l=ho.subscribe(r=>{r&&t.value&&r.users.add(s)});G(t,async r=>{if(!r)await c(e.value);else{const n=va(e.value),i=yt.get(n);i&&i.users.add(s)}}),G(e,async(r,n)=>{await c(n)}),Ot(async()=>{await c(e.value),l.unsubscribe()});async function c(r){const n=va(r),i=yt.get(n);i&&(i.users.delete(s),i.users.size===0&&(i.subscription.unsubscribe(),yt.delete(n),await a.invalidateQueries({queryKey:r})))}return c}function f0(e){const{socket:t,isConnected:a,url:s}=m0(),l=y(()=>t.value?new v0(t.value):null),c=y(()=>["defimonitor-transfers",s.value,e.value]);return h0({queryKey:c,queryFn:()=>{var n;return(n=l.value)==null?void 0:n.subTransfers(e.value)},enabled:a,observable:y(()=>{var n;return(n=l.value)==null?void 0:n.transfers$}),setQueryData:(n,i)=>[...n??[],...i.transfers.flat().filter(u=>u.coinAddress.toLocaleLowerCase()===e.value.toLocaleLowerCase())].takeRight(200),resetOnSubscribe:!0})}const _o=e=>(z("data-v-900864aa"),e=e(),Q(),e),g0={style:{display:"flex",gap:"1rem"}},y0={class:"transfers-card-body"},b0={class:"transfers-options"},w0={class:"option"},C0=_o(()=>p("div",{class:"label"},"Token",-1)),$0={class:"option"},k0=_o(()=>p("div",{class:"label"},"Min Amount",-1)),S0={class:"hash"},A0=["href"],T0=["href"],L0=["href"],I0=["href"],R0={class:"token"},V0=["href"],P0={class:"end"},F0=["href"],da=10,q0=A({__name:"TableTransfers",setup(e){const t=[{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT"},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC"}],a=V(t[0]),s=V(0),l=y(()=>{const b=s.value;return typeof b=="string"?parseFloat(b)||0:b||0}),{data:c,isFetching:r}=f0(y(()=>a.value.address)),{relativeTime:n}=Ye(),i=V(""),u=y(()=>(c.value??[]).filter(b=>{const C=i.value.toLocaleLowerCase().split(" "),k=I=>C.some(T=>I.toLocaleLowerCase().includes(T));return(k(b.transferFrom)||k(b.transferTo))&&b.parsedAmount>=l.value}).orderBy([b=>b.blockUnixtime,b=>b.positionInBlock],"desc")),{page:d,rowsPage:v,onPage:h}=jt(u,da),g=b=>b<1?b.toFixed(4):b>1e3?b.toFixed(0):b.toFixed(2),f=async b=>{await navigator.clipboard.writeText(b)};return(b,C)=>{const k=Le,I=Ue,T=p0,P=qa,F=ge,N=Ie,Se=ee,Ke=M;return _(),S(Ke,{class:"transfers-card",title:"Transfers",loading:o(r)},{actions:w(()=>[p("div",g0,[m(k,{modelValue:o(i),"onUpdate:modelValue":C[0]||(C[0]=D=>se(i)?i.value=D:null),placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(u).length>da?(_(),S(I,{key:0,"items-count":o(u).length,"items-per-page":da,page:o(d),onPage:o(h)},null,8,["items-count","page","onPage"])):q("",!0)])]),default:w(()=>[p("div",y0,[p("div",b0,[p("div",w0,[C0,m(T,{modelValue:o(a),"onUpdate:modelValue":C[1]||(C[1]=D=>se(a)?a.value=D:null),tokens:t,onSelect:C[2]||(C[2]=D=>a.value=D)},null,8,["modelValue"])]),p("div",$0,[k0,m(P,{modelValue:o(s),"onUpdate:modelValue":C[3]||(C[3]=D=>se(s)?s.value=D:null),min:0,max:1/0},null,8,["modelValue"])])]),m(Se,{class:"transfers-table",rows:o(v),columns:["Hash","Block","Gas","From","To","Amount","Token",{label:"Age",align:"end"}]},{row:w(({item:D})=>[p("div",S0,[p("a",{class:"font-mono",href:`https://etherscan.io/tx/${D.txHash}`,target:"_blank"},R(o(gl)(D.txHash,10)),9,A0),m(F,{icon:"fas fa-link",onClick:ue=>f(D.txHash)},null,8,["onClick"])]),p("div",null,[p("a",{class:"font-mono",href:`https://etherscan.io/block/${D.blockNumber}`,target:"_blank"},R(D.blockNumber),9,T0)]),p("div",null,R(D.gasInGwei),1),p("div",null,[p("a",{class:"font-mono",href:`https://etherscan.io/address/${D.transferFrom}`,target:"_blank"},R(o(Ce)(D.transferFrom,10)),9,L0)]),p("div",null,[p("a",{class:"font-mono",href:`https://etherscan.io/addr ess/${D.transferTo}`,target:"_blank"},R(o(Ce)(D.transferTo,10)),9,I0)]),p("div",null,R(g(D.parsedAmount)),1),p("div",R0,[m(N,{chain:"ethereum",address:D.coinAddress},null,8,["address"]),p("a",{target:"_blank",href:`https://etherscan.io/address/${D.coinAddress}`},R(D.coinSymbol),9,V0)]),p("div",P0,[p("a",{href:`https://etherscan.io/tx/${D.txHash}`,target:"_blank",onClick:C[4]||(C[4]=Te(()=>{},["stop"]))},R(o(n)(D.blockUnixtime)),9,F0)])]),_:1},8,["rows"])])]),_:1},8,["loading"])}}}),D0=L(q0,[["__scopeId","data-v-900864aa"]]),B0={class:"transfers"},M0=A({__name:"Transfers",setup(e){return(t,a)=>(_(),$("div",B0,[m(D0,{style:{"grid-area":"transfers"}})]))}}),x0=L(M0,[["__scopeId","data-v-74e96c37"]]),U0={class:"monitor"},O0=A({__name:"DefiMonitor.page",setup(e){const{tabActive:t,tabActiveIndex:a}=mt(["transfers"],"defimonitor");return(s,l)=>{const c=Ee,r=Oe;return _(),$("div",U0,[m(r,{active:o(a),onTab:l[0]||(l[0]=n=>a.value=n.index)},{default:w(()=>[m(c,{header:"Transfers"},{default:w(()=>[(_(),S(me,null,[o(t)==="transfers"?(_(),S(x0,{key:0})):q("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),E0=L(O0,[["__scopeId","data-v-2a89a41c"]]),W0=[{path:"/",component:Bc},{path:"/platform",redirect:{name:"revenue"}},{path:"/platform/chains/:chain?/:type?",name:"chains",component:yu},{path:"/platform/pools/:chain?",name:"pools",component:id},{path:"/platform/pools/:chain/:poolAddr/:tab?",name:"poolspool",component:qd},{path:"/platform/gauges/old",component:zd},{path:"/platform/revenue/:tab?",name:"revenue",component:jm},{path:"/platform/crvusd",name:"crvusd",component:eh},{path:"/platform/crvusd/market/:marketAddr/:tab?",name:"crvusdmarket",component:w_},{path:"/platform/lending/:chain?",name:"llamalend",component:Q_},{path:"/platform/lending/:chain/:marketAddr/:tab?",name:"llamalendmarket",component:qf},{path:"/platform/monitor",name:"monitor",component:pg},{path:"/dao",redirect:{name:"proposals"}},{path:"/dao/proposals",name:"proposals",component:u1},{path:"/dao/proposal/:proposalType/:proposalId",component:m1},{path:"/dao/vefunder",component:W1},{path:"/convex",redirect:{name:"flyer"}},{path:"/convex/flyer",name:"flyer",component:Lb},{path:"/convex/pools/:pool?",name:"convexpools",component:zb},{path:"/convex/revenue",name:"convexrevenue",component:i0},{path:"/defimonitor",name:"defimonitor",component:E0}],K0={titleRoute:"/",menuItems:[{label:"Articles",url:"https://blog.curvemonitor.com/"},{label:"Platform",children:[{to:"/platform/chains",label:"Chains"},{to:"/platform/pools",label:"Pools",tag:"alpha"},{to:"/platform/revenue",label:"Revenue"},{to:"/platform/crvusd",label:"crvUSD"},{to:"/platform/lending",label:"Lending"},{to:"/platform/monitor",label:"Monitor",tag:"beta"}]},{label:"DAO",children:[{to:"/dao/proposals",label:"Proposals"},{to:"/dao/vefunder",label:"VeFunder"}]},{label:"Convex",initCollapsed:!0,children:[{to:"/convex/flyer",label:"Flyer"},{to:"/convex/pools",label:"Pools"},{to:"/convex/revenue",label:"Revenue"}]}]};let fo="http://localhost:8545";fo=void 0;function H0(e=[]){return nn({chains:[Qe],connectors:[Na(),ln(),...e],transports:{[Qe.id]:rn([za(fo,{batch:{wait:100}}),cn(Na),za("https://eth.llamarpc.com",{batch:{wait:200}})])}})}function N0(e,t){const a=un(e);for(const c of[])a.use(c);const s=dn();a.use(s);const l=new pn({defaultOptions:{queries:{staleTime:1e3*60*5,queryKeyHashFn:mn}},queryCache:new vn({onError:(c,r)=>{c.message.includes("Connector not connected")||c.message.includes("connector2.getAccounts is not a function")||c.message.includes("getAccounts is not a function")||Ae({text:`Failed querying ${r.queryHash} >>> ${c.message}`,type:"error"})}})});return a.use(hn).use(_n,{queryClient:l}).use(fn).use(gn,{config:H0(t==null?void 0:t.extraWagmiConnectors)}),{app:a,pinia:s}}const{app:z0}=N0(Vr),Q0=[K0],j0=[W0],go=Sa();go.pages=Q0;go.routes=j0;const G0=ri();z0.use(G0).mount("#app");
