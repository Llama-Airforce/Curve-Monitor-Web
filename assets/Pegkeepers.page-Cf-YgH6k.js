import{d as $,T as S,f as m,U,V as D,h as z,o as x,w as f,a as c,b as n,u as t,_ as A,r as R,t as K,O as I,aa as O,e as B,c as W}from"./index-DJLwkbA-.js";import{u as E,_ as Q}from"./UseLegend-CV2zBh0n.js";import{u as M,G as N,r as G,a as j,_ as q,b as H}from"./UseLightweightChart-DplHpV8Y.js";import{f as F,g as J}from"./crvusd-DW3A9M02.js";import{r as X,u as Y}from"./Number-_avH7SM-.js";import{_ as Z}from"./Table-9GPPVJFt.js";import{_ as ee}from"./AsyncValue-DN2K4p6-.js";import{_ as se}from"./TokenIcon-Be_7bKey.js";import{_ as oe}from"./InputText-D8szbTda.js";import{d as ae}from"./pools-DsAFC2r8.js";import"./Object-DOSYkgA0.js";import"./timestamp-CoE2HNXc.js";import"./api-BCRV542q.js";import"./useQuery-CrQp0Pby.js";import"./UseHost-CDY26K5R.js";const te={style:{display:"flex"}},le={ref:"chartRef",class:"chart"},ne=$({__name:"ChartKeeperPrices",setup(h){const g=S(),v=["USDC","USDT"],{items:C,toggles:_,disabled:L}=E(()=>v.map((a,r)=>({id:a,label:a,color:g.value.colorsArray[r],togglable:!0}))),b=m(()=>V.value||P.value),{isFetching:V,data:k}=F(),w=m(()=>k.value.filter(a=>a.pair.some(({symbol:r})=>v.map(s=>s.toLocaleLowerCase()).includes(r.toLocaleLowerCase())))),{isFetching:P,data:T}=J(w),d=U("card"),{chart:y,series:e}=M({createChartOptions:j(),series:v.map((a,r)=>({type:N,name:a,options:m(()=>({priceFormat:{type:"custom",formatter:s=>`${X(s,3,"dollar")}${Y(s)}`},lineWidth:2,lineType:G.WithSteps,color:g.value.colorsArray[r],lastValueVisible:!1,priceLineVisible:!1,autoscaleInfoProvider:s=>{const i=s();return i!==null&&i.priceRange&&(i.priceRange.minValue=Math.max(.98,i.priceRange.minValue),i.priceRange.maxValue=Math.min(1.02,i.priceRange.maxValue)),i}}))}))});D(l);function l(){var a,r;if(!(!y.value||Object.values(e).length<0)){for(const[,s]of v.entries()){(a=e[s])==null||a.applyOptions({visible:_[s].value});const i=T.value.map(u=>({time:u.timestamp,value:u[s]})).uniqWith((u,o)=>u.time===o.time).orderBy(u=>u.time,"asc");i.length>0&&((r=e[s])==null||r.setData(i))}y.value.timeScale().fitContent()}}return(a,r)=>{const s=q,i=H,u=Q,o=A;return x(),z(o,{ref_key:"card",ref:d,title:"Pegkeepers Coin Prices",loading:t(b)},{actions:f(()=>[c("div",te,[n(s,{filename:"keeper_prices",series:t(e)},null,8,["series"]),n(i,{chart:t(y),target:t(d)},null,8,["chart","target"])])]),"actions-secondary":f(()=>[n(u,{items:t(C),disabled:t(L),onToggle:r[0]||(r[0]=p=>t(_)[p].value=!t(_)[p].value)},null,8,["items","disabled"])]),default:f(()=>[c("div",le,null,512)]),_:1},8,["loading"])}}});function re(h){return h!=null}const ie={class:"end"},ce={class:"end"},de={class:"end"},ue={class:"end"},pe={class:"end"},_e={class:"end"},me={class:"end"},ge={class:"end"},ve=$({__name:"TablePegkeepers",setup(h){const g=R(""),v=m(()=>P.value||L.value),C=m(()=>b.value.filter(e=>e.active).map(e=>{const l=T.value.find(a=>e.poolAddress===a.address);if(l)return{...l,...e,pool:l.address}}).filter(re).orderBy(e=>e.tvlUsd,"desc")),_=m(()=>C.value.filter(e=>{const l=g.value.toLocaleLowerCase().split(" "),a=r=>l.some(s=>r.toLocaleLowerCase().includes(s));return a(e.name)||a(e.address)})),{isFetching:L,data:b}=F(),V=e=>`${e.pair[1].symbol} / ${e.pair[0].symbol}`,k=m(()=>b.value.map(e=>e.poolAddress)),w=ae(R("ethereum"),k),P=m(()=>w.value.some(e=>e.isFetching)),T=m(()=>w.value.filter(e=>e.data).map(e=>e.data)),d=e=>e>=1e6?2:0,y=e=>e.pair.filter(l=>l.address.toLocaleLowerCase()!==O)[0].address;return(e,l)=>{const a=oe,r=se,s=ee,i=Z,u=A;return x(),z(u,{class:"pegkeepers-card",title:"Pegkeepers",loading:t(v)},{actions:f(()=>[n(a,{modelValue:t(g),"onUpdate:modelValue":l[0]||(l[0]=o=>I(g)?g.value=o:null),search:"",placeholder:"Search for.."},null,8,["modelValue"])]),default:f(()=>[n(i,{class:"pegkeepers-table",rows:t(_),columns:["","Name",{label:"Debt",align:"end"},{label:"TVL",align:"end"},{label:"Volume",align:"end"},{label:"Fees",align:"end"}]},{row:f(({item:o})=>[n(r,{chain:"ethereum",address:y(o)},null,8,["address"]),c("div",null,K(V(o)),1),c("div",ie,[n(s,{"show-zero":"",type:"dollar",value:o.totalDebt,precision:d},null,8,["value"])]),c("div",ce,[n(s,{"show-zero":"",type:"dollar",value:o.tvlUsd,precision:d},null,8,["value"])]),c("div",de,[n(s,{"show-zero":"",type:"dollar",value:o.tradingVolume24h,precision:d},null,8,["value"])]),c("div",ue,[n(s,{"show-zero":"",type:"dollar",value:o.totalProfit,precision:d},null,8,["value"])])]),"row-aggregation":f(()=>[l[1]||(l[1]=c("div",null,null,-1)),l[2]||(l[2]=c("div",null,null,-1)),c("div",pe,[n(s,{"show-zero":"",type:"dollar",value:t(_).reduce((o,p)=>o+p.totalDebt,0),precision:d},null,8,["value"])]),c("div",_e,[n(s,{"show-zero":"",type:"dollar",value:t(_).reduce((o,p)=>o+p.tvlUsd,0),precision:d},null,8,["value"])]),c("div",me,[n(s,{"show-zero":"",type:"dollar",value:t(_).reduce((o,p)=>o+p.tradingVolume24h,0),precision:d},null,8,["value"])]),c("div",ge,[n(s,{"show-zero":"",type:"dollar",value:t(_).reduce((o,p)=>o+p.totalProfit,0),precision:d},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),fe=B(ve,[["__scopeId","data-v-030699ea"]]),he={class:"dashboard"},ye=$({__name:"Pegkeepers.page",setup(h){return(g,v)=>(x(),W("div",he,[n(t(fe),{style:{"grid-area":"table"}}),n(t(ne),{style:{"grid-area":"chart"}})]))}}),Se=B(ye,[["__scopeId","data-v-f4603245"]]);export{Se as default};
