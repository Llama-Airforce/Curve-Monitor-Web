import{_ as E,a as H}from"./TabItem.vue_vue_type_script_setup_true_lang-mQKi9nsi.js";import{d as T,g as N,T as M,U,f as C,V as K,h as f,o as t,_ as S,u as a,w as r,a as u,b as o,L as G,W as w,c as g,t as k,i as $,e as A,F,j,Q as D,l as q,r as z,O as J,a5 as X,a6 as Y,N as Z,R as x,a3 as B}from"./index-CmdpEOf2.js";import{b as ee,c as ae,d as se,e as te}from"./gauge-D74Rme8p.js";import{_ as W}from"./AsyncValue-DBs1jcjK.js";import{_ as oe}from"./TokenIcon-Cec5HZ3R.js";import{_ as ne}from"./KPI-BOHntknC.js";import{u as re,c as le,a as ue,_ as ie,b as de}from"./UseLightweightChart-D9Dl3EjI.js";import{r as ge}from"./Number-D99EWjzz.js";import{_ as R,a as ce}from"./Table-DY_kBkCZ.js";import{_ as _e}from"./InputText-B4Wolguj.js";import{u as pe,_ as me}from"./UsePagination-aBIxGiY2.js";import{u as he}from"./UseSort-D-ddrWJN.js";import{a as fe}from"./index-DIAIssgk.js";import{u as ve}from"./UseTabNavigation-DG-FY98b.js";import"./timestamp-DkvXAN4c.js";import"./useQuery-BSLRV5Ma.js";import"./Object-DOSYkgA0.js";const ke={style:{display:"flex"}},be={ref:"chartRef",class:"chart"},ye=T({__name:"ChartWeightHistory",props:{gaugeAddress:{}},setup(b){const{isFetching:p,data:n}=ee(N(()=>b.gaugeAddress)),d=M(),e=U("card"),{chart:s,series:i}=re({createChartOptions:ue(),series:le({name:"weight",color:C(()=>d.value.colors.blue),formatter:c=>ge(c,1)})});K(l);function l(){if(!s.value||!i.weight)return;const c=n.value.map(_=>({time:_.epoch,value:Number(_.weight)/10**18})).uniqWith((_,v)=>_.time===v.time).orderBy(_=>_.time,"asc");c.length>0&&i.weight.setData(c),s.value.timeScale().fitContent()}return(c,_)=>{const v=ie,m=de,h=S;return t(),f(h,{ref_key:"card",ref:e,title:"Weight",loading:a(p)},{actions:r(()=>[u("div",ke,[o(v,{filename:"weight",series:a(i)},null,8,["series"]),o(m,{chart:a(s),target:a(e)},null,8,["chart","target"])])]),default:r(()=>[u("div",be,null,512)]),_:1},8,["loading"])}}}),$e=["href"],we=["href"],Te=["innerHTML"],Ce=T({__name:"TableDeployment",props:{gaugeAddress:{}},setup(b){const{isFetching:p,data:n}=ae(N(()=>b.gaugeAddress)),d=C(()=>n.value?.calldataDecoded?n.value.calldataDecoded.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,e=>/[A-F]/g.test(e)&&G(e)?`<a target='_blank' href='https://etherscan.io/address/${e}'>${e}</a>`:e):null);return(e,s)=>{const i=ce,l=R,c=S;return t(),f(c,{title:"Deployment",loading:a(p)},{default:r(()=>[a(n)?(t(),f(l,{key:0},{default:r(()=>[o(i,null,{default:r(()=>[s[2]||(s[2]=u("div",null,"Date",-1)),u("div",null,k(a(n).timestamp.toLocaleDateString()),1)]),_:1,__:[2]}),o(i,null,{default:r(()=>[s[3]||(s[3]=u("div",null,"From",-1)),u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${a(n).addressFrom}`,onClick:s[0]||(s[0]=$(()=>{},["stop"]))},k(a(n).addressFrom),9,$e)])]),_:1,__:[3]}),a(n).addressTo?(t(),f(i,{key:0},{default:r(()=>[s[4]||(s[4]=u("div",null,"To",-1)),u("div",null,[u("a",{class:"font-mono trim",target:"_blank",href:`https://etherscan.io/address/${a(n).addressTo}`,onClick:s[1]||(s[1]=$(()=>{},["stop"]))},k(a(n).addressTo),9,we)])]),_:1,__:[4]})):w("",!0)]),_:1})):w("",!0),a(d)?(t(),g("div",{key:1,class:"calldata font-mono",innerHTML:a(d)},null,8,Te)):w("",!0)]),_:1},8,["loading"])}}}),Ae=A(Ce,[["__scopeId","data-v-2856e0e1"]]),Se={class:"dashboard-grid"},Ve=["href"],Le={key:1},De=["href"],Ne={key:1},Pe={key:2},Fe=["href"],Be={key:1},Ie={key:0,class:"tokens"},Ge={key:1},We=["href"],Re=T({__name:"GaugeOverview",props:{gauge:{}},setup(b){const p=C(()=>b.gauge?.address);function n(e){return G(e,{strict:!1})?D(e):e.replace("Curve.fi","").replace("Gauge Deposit","").trim()}function d(e){switch(e){case"arbitrum":return"arbiscan.io";case"ethereum":return"etherscan.io";default:return"etherscan.io"}}return(e,s)=>{const i=S,l=ne,c=oe,_=W;return t(),g(F,null,[e.gauge?.killed?(t(),f(i,{key:0,class:"killed border-flash"},{default:r(()=>s[4]||(s[4]=[j(" This gauge has been killed! ")])),_:1,__:[4]})):w("",!0),u("div",Se,[o(l,{style:{"grid-area":"title"},label:"Gauge","has-value":!!e.gauge},{default:r(()=>[e.gauge?(t(),g("a",{key:0,class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${e.gauge.address}`,onClick:s[0]||(s[0]=$(()=>{},["stop"]))},k(n(e.gauge.name??e.gauge.address)),9,Ve)):(t(),g("span",Le," ?"))]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"underlying"},label:"Market / Pool","has-value":!!e.gauge},{default:r(()=>[e.gauge?.pool?(t(),g("a",{key:0,class:"font-mono",target:"_blank",href:`https://${d(e.gauge.pool.chain)}/address/${e.gauge.pool.address}`,onClick:s[1]||(s[1]=$(()=>{},["stop"]))},k(n(e.gauge.pool.name)),9,De)):e.gauge?.market?(t(),g("span",Ne,k(n(e.gauge.market.name)),1)):(t(),g("span",Pe,"No underlying market or pool"))]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"lp-token"},label:"LP Token","has-value":!!e.gauge},{default:r(()=>[e.gauge?.lpToken&&e.gauge?.pool?(t(),g("a",{key:0,class:"font-mono",target:"_blank",href:`https://${d(e.gauge.pool.chain)}/address/${e.gauge.lpToken}`,onClick:s[2]||(s[2]=$(()=>{},["stop"]))},k(("addressShort"in e?e.addressShort:a(D))(e.gauge.lpToken)),9,Fe)):(t(),g("span",Be,"No LP token"))]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"tokens"},label:"Tokens","has-value":!!e.gauge},{default:r(()=>[e.gauge?.tokens&&e.gauge.tokens.length>0?(t(),g("div",Ie,[(t(!0),g(F,null,q(e.gauge.tokens,v=>(t(),f(c,{key:v.address,clickable:"",class:"token",address:v.address},null,8,["address"]))),128))])):(t(),g("span",Ge,"No tokens"))]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"weight"},label:"Weight","has-value":!!e.gauge},{default:r(()=>[o(_,{value:Number(e.gauge?.weight??0)/10**18},null,8,["value"])]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"emissions"},label:"Emissions","has-value":!!e.gauge},{default:r(()=>[o(_,{value:e.gauge?.emissions??0},null,8,["value"])]),_:1},8,["has-value"]),o(l,{style:{"grid-area":"date"},label:"Creation Date","has-value":!!e.gauge},{default:r(()=>[e.gauge?(t(),g("a",{key:0,class:"font-mono",target:"_blank",href:`https://etherscan.io/tx/${e.gauge.creationTx}`,onClick:s[3]||(s[3]=$(()=>{},["stop"]))},k(e.gauge.creationDate.toLocaleDateString()),9,We)):w("",!0)]),_:1},8,["has-value"]),o(Ae,{style:{"grid-area":"deployment"},"gauge-address":a(p)},null,8,["gauge-address"]),o(ye,{style:{"grid-area":"weight-chart"},"gauge-address":a(p)},null,8,["gauge-address"])])],64)}}}),Oe=A(Re,[["__scopeId","data-v-b5347363"]]),Qe={style:{display:"flex","flex-wrap":"wrap",gap:"1rem"}},Ee=["href"],He={class:"end"},Me={class:"end"},Ue={class:"end"},Ke=["href"],I=15,je=T({__name:"TableVotes",props:{gaugeAddress:{}},setup(b){const{isFetching:p,data:n}=se(N(()=>b.gaugeAddress)),d=[{id:"voter",label:"Voter",sort:!1},{id:"weight",label:"Weight",sort:!0,align:"end"},{id:"block",label:"Block",sort:!0,align:"end"},{id:"time",label:"Timestamp",sort:!0,align:"end"}],{sorting:e,onSort:s}=he("time"),i=z(""),l=C(()=>n.value.filter(m=>{const h=i.value.toLocaleLowerCase().split(" ");return(V=>h.some(L=>V.toLocaleLowerCase().includes(L)))(m.user)}).orderBy(m=>{switch(e.value.column){case"time":return m.timestamp.getTime();case"weight":return m.weight;case"block":return m.blockNumber}},e.value.order)),{page:c,rowsPage:_,onPage:v}=pe(l,I);return(m,h)=>{const P=me,V=_e,L=W,O=R,Q=S;return t(),f(Q,{title:"Votes",loading:a(p)},{actions:r(()=>[u("div",Qe,[o(P,{"items-count":a(l).length,"items-per-page":I,page:a(c),onPage:a(v)},null,8,["items-count","page","onPage"]),o(V,{modelValue:a(i),"onUpdate:modelValue":h[0]||(h[0]=y=>J(i)?i.value=y:null),search:"",placeholder:"Search for..."},null,8,["modelValue"])])]),default:r(()=>[o(O,{rows:a(_),columns:d,sorting:a(e),onSortColumn:a(s)},{row:r(({item:y})=>[u("div",null,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${y.user}`,onClick:h[1]||(h[1]=$(()=>{},["stop"]))},k(("addressShort"in m?m.addressShort:a(D))(y.user)),9,Ee)]),u("div",He,[o(L,{value:y.weight},null,8,["value"])]),u("div",Me,k(y.blockNumber),1),u("div",Ue,[u("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/tx/${y.tx}`,onClick:h[2]||(h[2]=$(()=>{},["stop"]))},k(y.timestamp.toLocaleDateString()),9,Ke)])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),qe=A(je,[["__scopeId","data-v-8779ea09"]]),ze={class:"dashboard-grid"},Je=T({__name:"Votes",props:{gauge:{}},setup(b){const p=C(()=>b.gauge?.address);return(n,d)=>(t(),g("div",ze,[o(qe,{style:{"grid-area":"votes"},"gauge-address":a(p)},null,8,["gauge-address"])]))}}),Xe=A(Je,[["__scopeId","data-v-73ae6153"]]),Ye={class:"dashboard"},Ze=T({__name:"Gauge.page",setup(b){const p=fe("gaugeAddr"),{isFetching:n,data:d}=te(p),{crumbs:e}=X(Y());Z(d,l=>{e.value=[{id:"gauges",label:"Gauges",pathName:"gauges"},{id:"gauge",label:`Gauge: ${l?.name??l?.address??"?"}`}]},{immediate:!0});const{tabActive:s,tabActiveIndex:i}=ve(["overview","votes"],"gauge",()=>({gaugeAddr:p.value}));return(l,c)=>{const _=x,v=E,m=H;return t(),g("div",Ye,[o(_,{loading:a(n)},null,8,["loading"]),!a(n)&&a(d)?(t(),f(m,{key:0,active:a(i),onTab:c[0]||(c[0]=h=>i.value=h.index)},{default:r(()=>[o(v,{header:"Overview"},{default:r(()=>[(t(),f(B,null,[a(s)==="overview"?(t(),f(Oe,{key:0,gauge:a(d)},null,8,["gauge"])):w("",!0)],1024))]),_:1}),o(v,{header:"Votes"},{default:r(()=>[(t(),f(B,null,[a(s)==="votes"?(t(),f(Xe,{key:0,gauge:a(d)},null,8,["gauge"])):w("",!0)],1024))]),_:1})]),_:1},8,["active"])):w("",!0)])}}}),ha=A(Ze,[["__scopeId","data-v-ffcdec4a"]]);export{ha as default};
