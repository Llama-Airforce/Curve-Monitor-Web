import{q as U,d as R,f as y,h as S,o as v,w,b as c,u as t,_ as O,e as x,r as P,ah as Z,a as l,O as q,X as W,c as z,W as M,j as ee,t as u,i as j,Q as N}from"./index-5B2tI7Zc.js";import{c as H,_ as Q}from"./ChartStylesApex-DiqR34V4.js";import{a as X,b as se}from"./queries-BLy2IAik.js";import{_ as G}from"./Table-Br42HHVv.js";import{_ as oe}from"./IconExpander-xZLtL_3V.js";import{u as te,_ as J}from"./UsePagination-Bav67_-y.js";import{_ as K}from"./InputText-PEq0sSRg.js";import{r as I}from"./Number-Bqyeu7gj.js";import{a as ne,_ as ae}from"./TabItem.vue_vue_type_script_setup_true_lang-CCGJjABq.js";import{c as re}from"./String-TwmdtJxb.js";import"./Helper-BAg6jrsy.js";import{u as Y}from"./UseRelativeTime-CazFgpUx.js";import{u as le}from"./UseExpansion-BqYWlF6j.js";import"./Object-DOSYkgA0.js";import"./useQuery-Ds_Sub25.js";/**
 * @license lucide-vue-next v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=U("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=U("ArrowRightLeftIcon",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-vue-next v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=U("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var m=(h=>(h.Swap="swap",h.Deposit="deposit",h.Remove="remove",h))(m||{});const pe=R({__name:"LabelsWorstAbsolute",setup(h){const{data:f,isFetching:_}=X(),p=o=>(o??[]).filter(n=>n.numOfAllTx>=12).map(n=>({...n,occurrences:n.occurrences})).sort((n,d)=>d.occurrences-n.occurrences).slice(0,10),T=y(()=>p(f.value).map(o=>o.label)),$=y(()=>p(f.value).map(o=>o.occurrences)),L=y(()=>H({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:o=>{const n=o.w.globals.labels[o.seriesIndex],d=o.series[o.seriesIndex];return[`<div><b>${n}</b>:</div><div>Occurences: ${b(d)}</div>`].join("")}},labels:T.value})),b=o=>`${o}`;return(o,n)=>{const d=Q,e=O;return v(),S(e,{title:"Worst absolute offenders",loading:t(_)},{default:w(()=>[c(d,{options:t(L),series:t($)},null,8,["options","series"])]),_:1},8,["loading"])}}}),ue=x(pe,[["__scopeId","data-v-b592f2a0"]]),_e=R({__name:"LabelsWorstRelative",setup(h){const{data:f,isFetching:_}=X(),p=o=>(o??[]).filter(n=>n.numOfAllTx>=12).map(n=>({...n,ratio:Number((n.occurrences/n.numOfAllTx*100).toFixed(2))})).sort((n,d)=>d.ratio-n.ratio).slice(0,10),T=y(()=>p(f.value).map(o=>o.label)),$=y(()=>p(f.value).map(o=>o.ratio)),L=y(()=>H({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:o=>{const n=o.w.globals.labels[o.seriesIndex],d=o.series[o.seriesIndex];return[`<div><b>${n}</b>:</div><div>Ratio: ${b(d)}</div>`].join("")}},labels:T.value})),b=o=>`${o}%`;return(o,n)=>{const d=Q,e=O;return v(),S(e,{title:"Worst relative offenders",loading:t(_)},{default:w(()=>[c(d,{options:t(L),series:t($)},null,8,["options","series"])]),_:1},8,["loading"])}}}),me=x(_e,[["__scopeId","data-v-4ec81306"]]),he={style:{display:"grid","grid-template-columns":"auto auto"}},fe={style:{display:"flex",gap:"1rem"}},ge={key:0,class:"end"},ve=["href"],be=["href"],we=["href"],ye=["innerHTML"],ke={key:1,class:"end"},E=10,$e=R({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(h){const{relativeTime:f}=Y(),_=P(""),p=P([m.Swap,m.Deposit,m.Remove]),T=y(()=>h.time?["Type","Block","Tx","Trader","Assets","Time"]:["Type","Tx","Trader","Assets"]),$=y(()=>(h.txs??[]).filter(e=>p.value.includes(e.transaction_type)).filter(e=>{const s=_.value.toLocaleLowerCase().split(" "),i=g=>s.some(k=>g.toLocaleLowerCase().includes(k));return i(e.block_number.toString())||i(e.trader)||i(e.tx_hash)})),{page:L,rowsPage:b,onPage:o}=te($,E),n=e=>{if(e.transaction_type===m.Swap){const s=e.coins_leaving_wallet[0],i=e.coins_entering_wallet[0],g=I(parseFloat(s.amount.toString()),2),k=I(parseFloat(i.amount.toString()),2),A=`<span>${g} ${s.name}</span>`,C="<span>-></span>",a=`<span style='justify-self: end;'>${k} ${i.name}</span>`;return`${A}${C}${a}`}else if(e.transaction_type===m.Deposit){const s=e.coins_entering_wallet[0];return`${I(parseFloat(s.amount.toString()),2)} ${s.name}`}else{const s=e.coins_leaving_wallet[0];return`${I(parseFloat(s.amount.toString()),2)} ${s.name}`}},d=e=>{e===0?p.value=[m.Swap,m.Deposit,m.Remove]:e===1?p.value=[m.Swap]:e===2?p.value=[m.Deposit]:e===3?p.value=[m.Remove]:p.value=[]};return(e,s)=>{const i=ae,g=ne,k=K,A=J,C=de,a=ie,V=ce,B=G,D=O;return v(),S(D,{class:"trades-card",title:"Transactions"},Z({default:w(()=>[c(B,{class:W(["trades-table",{compact:e.compact,time:e.time}]),rows:t(b),columns:t(T)},{row:w(({item:r})=>[l("div",{class:W(["type",{deposit:r.transaction_type==="deposit",remove:r.transaction_type==="remove",swap:r.transaction_type==="swap"}])},[r.transaction_type==="deposit"?(v(),S(C,{key:0})):r.transaction_type==="remove"?(v(),S(a,{key:1})):(v(),S(V,{key:2})),ee(" "+u(("capitalize"in e?e.capitalize:t(re))(r.transaction_type)),1)],2),e.time?(v(),z("div",ge,[l("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/block/${r.block_number}`},u(r.block_number),9,ve)])):M("",!0),l("div",null,[l("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/tx/${r.tx_hash}`,onClick:s[2]||(s[2]=j(()=>{},["stop"]))},u(("addressShort"in e?e.addressShort:t(N))(r.tx_hash)),9,be)]),l("div",null,[l("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/address/${r.trader}`,onClick:s[3]||(s[3]=j(()=>{},["stop"]))},u(("addressShort"in e?e.addressShort:t(N))(r.trader)),9,we)]),l("div",{class:W(["assets",{swap:r.transaction_type==="swap"}]),innerHTML:n(r)},null,10,ye),e.time?(v(),z("div",ke,u(t(f)(r.block_unixtime)),1)):M("",!0)]),_:1},8,["class","rows","columns"])]),_:2},[e.header?{name:"actions",fn:w(()=>[l("div",he,[c(g,{class:"types",onTab:s[0]||(s[0]=r=>d(r.index))},{default:w(()=>[c(i,{header:"All"}),c(i,{header:"Swaps"}),c(i,{header:"Deposits"}),c(i,{header:"Removals"})]),_:1})]),l("div",fe,[c(k,{modelValue:t(_),"onUpdate:modelValue":s[1]||(s[1]=r=>q(_)?_.value=r:null),search:"",placeholder:"Search for..."},null,8,["modelValue"]),c(A,{class:"pagination","items-count":t($).length,"items-per-page":E,page:t(L),onPage:t(o)},null,8,["items-count","page","onPage"])])]),key:"0"}:void 0]),1024)}}}),Se=x($e,[["__scopeId","data-v-8e8f8383"]]),Te={style:{display:"flex",gap:"1rem"}},Le=["href"],Ae={style:{display:"grid",gap:"1ch","grid-template-columns":"auto 16ch 1fr"}},Ie=["href"],Ce={class:"end"},F=10,Re=R({__name:"Sandwiches",setup(h){const f=P(1),{data:_,isFetching:p}=se(),{expanded:T,toggleExpansion:$}=le(),{relativeTime:L}=Y(),b=P(""),o=y(()=>{var e;return((e=_.value)==null?void 0:e.totalPages)??0*F}),n=y(()=>{var e;return(((e=_.value)==null?void 0:e.data)??[]).filter(s=>{const i=b.value.toLocaleLowerCase().split(" "),g=k=>i.some(A=>k.toLocaleLowerCase().includes(A));return g(s.poolName)||g(s.poolAddress)||g(s.label)}).orderBy([s=>s.frontrun.block_unixtime,s=>s.frontrun.tx_position],"desc")}),d=e=>[e.frontrun,...e.center,e.backrun].orderBy([s=>s.block_unixtime,s=>s.tx_position]);return(e,s)=>{const i=K,g=J,k=oe,A=G,C=O;return v(),S(C,{class:"sandwiches-card",title:"Sandwiches",loading:t(p)},{actions:w(()=>[l("div",Te,[c(i,{modelValue:t(b),"onUpdate:modelValue":s[0]||(s[0]=a=>q(b)?b.value=a:null),search:"",placeholder:"Search for..."},null,8,["modelValue"]),t(o)>F?(v(),S(g,{key:0,class:"pagination","items-count":t(o),"items-per-page":F,page:t(f),onPage:s[1]||(s[1]=a=>f.value=a)},null,8,["items-count","page"])):M("",!0)])]),default:w(()=>[c(A,{class:"sandwiches-table",rows:t(n),columns:["Pool","Action","Affected Contract",{label:"Time",align:"end"}],expanded:t(T),onSelect:s[2]||(s[2]=a=>t($)(a))},{row:w(({item:a,expanded:V})=>[l("div",null,[l("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/address/${a.poolAddress}`},u(a.poolName),9,Le)]),l("div",null,[l("div",Ae,[l("a",{class:"vote-link font-mono",target:"_blank",href:`https://etherscan.io/address/${a.center[0].trader}`},u(("addressShort"in e?e.addressShort:t(N))(a.center[0].trader)),9,Ie),l("span",null," lost "+u(("round"in e?e.round:t(I))(a.user_losses_details.reduce((B,D)=>B+D.amount,0),2))+" "+u(a.user_losses_details[0].unit),1),l("span",null,u(("round"in e?e.round:t(I))(-a.user_losses_details[0].lossInPercentage,2))+"% slippage, or $"+u(("round"in e?e.round:t(I))(a.lossInUsd,2)),1)])]),l("div",null,u(a.label),1),l("div",Ce,u(t(L)(a.frontrun.block_unixtime)),1),c(k,{expanded:V},null,8,["expanded"])]),"row-details":w(({item:a})=>[c(Se,{compact:"",class:"transactions",txs:d(a),header:!1,time:!1},null,8,["txs"])]),_:1},8,["rows","expanded"])]),_:1},8,["loading"])}}}),xe=x(Re,[["__scopeId","data-v-a1085f7d"]]),Pe={class:"dashboard"},Oe=R({__name:"Sandwiches.page",setup(h){return(f,_)=>(v(),z("div",Pe,[c(xe,{style:{"grid-area":"sws"}}),c(me,{style:{"grid-area":"relative"}}),c(ue,{style:{"grid-area":"absolute"}})]))}}),Ge=x(Oe,[["__scopeId","data-v-07514d29"]]);export{Ge as default};
