import{G as oe,c,H as K,ai as ze,aj as Ue,d as C,e as D,o as y,u as o,w as _,a as b,j as x,i as h,f as s,T as $,_ as V,Q as ne,r as k,ak as Ke,al as We,b as d,am as le,an as M,I as He,J as Xe,X as re,ao as Ye,ap as je,Z as ie,a1 as R,F as U,V as q,S as Ge,k as Je,g as ue,O as Ze,aq as et,a7 as A,ar as O,as as P,l as Z,t as z,L as tt,at as de}from"./index-CNLf27K2.js";import{_ as B,a as st}from"./KPI-CFnB-4Aw.js";import{c as at}from"./String-TwmdtJxb.js";import{L as ot}from"./link-Dfps372v.js";import{_ as N}from"./AsyncValue-BsSjP6NC.js";import{b as nt,n as lt}from"./Number-CfWKiuRs.js";import{r as rt,d as ce,u as pe,a as ve,X as it,C as ut,e as dt}from"./proposal-xXJprEx-.js";import{h as ct}from"./getAction-Cc8b3R4H.js";import{w as pt,a as vt}from"./writeContract-DKxvPqPB.js";function mt(e,t){const{chainId:n,...l}=t,u=e.getClient({chainId:n});return ct(u,rt,"readContract")(l)}function ft(e,t={}){return{async queryFn({queryKey:n}){const l=t.abi;if(!l)throw new Error("abi is required");const{functionName:u,scopeKey:a,...i}=n[1],r=(()=>{const p=n[1];if(p.address)return{address:p.address};if(p.code)return{code:p.code};throw new Error("address or code is required")})();if(!u)throw new Error("functionName is required");return mt(e,{abi:l,functionName:u,args:i.args,...r,...i})},queryKey:yt(t)}}function yt(e={}){const{abi:t,...n}=e;return["readContract",oe(n)]}function gt(e,t={}){return{async queryFn({queryKey:n}){const{hash:l,...u}=n[1];if(!l)throw new Error("hash is required");return pt(e,{...u,onReplaced:t.onReplaced,hash:l})},queryKey:_t(t)}}function _t(e={}){const{onReplaced:t,...n}=e;return["waitForTransactionReceipt",oe(n)]}function ht(e){return{mutationFn(t){return vt(e,t)},mutationKey:["writeContract"]}}function E(e={}){const t=c(()=>ce(e)),n=K(t),l=pe({config:n}),u=c(()=>{const{abi:a,address:i,chainId:r=l.value,code:p,functionName:g,query:v={}}=t.value,S=ft(n,{...t.value,chainId:r}),F=!!((i||p)&&a&&g&&(v.enabled??!0));return{...v,...S,enabled:F,structuralSharing:v.structuralSharing??ze}});return ve(u)}function ee(e={}){const t=c(()=>ce(e)),n=K(e),l=pe(),u=c(()=>{const{chainId:a=l.value,hash:i,query:r={}}=t.value,p=gt(n,{...t.value,chainId:a}),g=!!(i&&(r.enabled??!0));return{...r,...p,enabled:g}});return ve(u)}function te(e={}){const{mutation:t}=e,n=K(e),l=ht(n),{mutate:u,mutateAsync:a,...i}=Ue({...t,...l});return{...i,writeContract:u,writeContractAsync:a}}function T(e){return e.executed?"executed":e.end>new Date().getTime()/1e3?"active":ye(e)&&fe(e)&&me(e)?"passed":"denied"}function me(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function fe(e){return e.votesFor>e.quorum*e.totalSupply}function ye(e){const t=e.votesFor+e.votesAgainst;return e.votesFor>t*.51}const bt=C({__name:"Status",props:{proposal:{}},setup(e){const t=c(()=>{if(T(e.proposal)==="denied")if(fe(e.proposal))if(ye(e.proposal)){if(!me(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes, or 'for' votes did not exceed 51%";else return"Quorum was not reached (yes votes need to pass this number)";return""}),n=c(()=>{switch(T(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";case"all":default:return"Unk. Status"}});return(l,u)=>{const a=st,i=B;return y(),D(i,{"has-value":"",class:"status","tooltip-type":"underline",label:"Status",tooltip:o(t)},{default:_(()=>[o(t)?(y(),D(a,{key:0},{trigger:_(()=>[s("span",{class:$(["status-value",o(T)(l.proposal)])},h(o(n)),3)]),default:_(()=>[x(" "+h(o(t)),1)]),_:1})):(y(),b("span",{key:1,class:$(["status-value",o(T)(l.proposal)])},h(o(n)),3))]),_:1},8,["tooltip"])}}}),wt=V(bt,[["__scopeId","data-v-8a47053c"]]),Ct=C({__name:"Type",props:{proposal:{}},setup(e){return(t,n)=>{const l=B;return y(),D(l,{"has-value":"",class:"type",label:"Type",value:("capitalize"in t?t.capitalize:o(at))(t.proposal.type)},null,8,["value"])}}}),$t=["href"],xt=C({__name:"Proposer",props:{proposal:{}},setup(e){return(t,n)=>{const l=B;return y(),D(l,{"has-value":"",class:"proposer",label:"Proposer"},{default:_(()=>[s("a",{target:"_blank",href:`https://etherscan.io/address/${t.proposal.proposer}`},h(("addressShort"in t?t.addressShort:o(ne))(t.proposal.proposer)),9,$t)]),_:1})}}});function Vt(e){function t(S){return S<10?"0"+S.toString():S.toString()}const n=e.getTime()-new Date().getTime();if(n<=0)return"00:00:00:00";const l=1e3,u=l*60,a=u*60,i=a*24,r=Math.floor(n/i),p=Math.floor(n%i/a),g=Math.floor(n%a/u),v=Math.floor(n%u/l);return t(r)+":"+t(p)+":"+t(g)+":"+t(v)}const se=C({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const n=k(""),l=c(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),u=c(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const r=new Date(e.proposal.end*1e3);return r>new Date?n.value:r.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),a=c(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});Ke(()=>{i()});const i=()=>{const r=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{n.value=Vt(r)})};return(r,p)=>{const g=B;return y(),D(g,{"has-value":"",class:"date","tooltip-type":"underline",label:o(l),value:o(u),tooltip:o(a)},null,8,["label","value","tooltip"])}}}),St={class:"metadata"},kt={class:"row"},Dt=C({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const n=t,l=c(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),u=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/#/dao/proposal/${e.proposal.type}/${e.proposal.id}`)};return(a,i)=>{const r=ot,p=We("router-link"),g=le;return y(),b("div",{class:"proposal-summary",onClick:i[0]||(i[0]=v=>n("toggleExpand"))},[s("div",{class:$(["title",{"no-title":!a.proposal.metadata}])},[d(p,{class:"id",to:o(l),onClick:u},{default:_(()=>[d(r),x(" "+h(a.proposal.id),1)]),_:1},8,["to"]),s("div",St,h(a.proposal.metadata||"< No Title >"),1)],2),s("div",kt,[d(wt,{class:"item",proposal:a.proposal},null,8,["proposal"]),d(Ct,{class:"item",proposal:a.proposal},null,8,["proposal"]),d(xt,{class:"item",proposal:a.proposal},null,8,["proposal"]),d(se,{class:"item",type:"start",proposal:a.proposal},null,8,["proposal"]),d(se,{class:"item",type:"end",proposal:a.proposal},null,8,["proposal"]),s("div",{class:$(["item expander",{expanded:a.expanded}])},[d(g)],2)])])}}}),Pt=V(Dt,[["__scopeId","data-v-deea3d44"]]),It={class:"results"},Tt={class:"choice"},At={class:"amount"},Et={class:"left"},Mt={class:"right"},Bt={class:"choice"},Rt={class:"amount"},qt={class:"left"},Nt={class:"right"},ae=4,Ft=C({__name:"VotingResults",props:{proposal:{}},setup(e){const t=c(()=>e.proposal.votesFor+e.proposal.votesAgainst),n=c(()=>e.proposal.votesFor/t.value*100),l=c(()=>e.proposal.votesAgainst/t.value*100);return(u,a)=>{const i=N;return y(),b("div",It,[a[8]||(a[8]=s("div",{class:"heading"},"Results",-1)),s("div",Tt,[a[3]||(a[3]=s("div",{class:"label"},"For",-1)),s("div",At,[s("div",Et,[d(i,{"show-zero":"",type:"dollar",value:u.proposal.votesFor,precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=s("span",null," veCRV",-1))]),s("div",Mt,[a[1]||(a[1]=s("span",null,"(",-1)),d(i,{"show-zero":"",type:"percentage",value:o(n),precision:2},null,8,["value"]),a[2]||(a[2]=s("span",null,")",-1))])]),s("div",{class:"bar",style:M({width:`${Math.max(ae,o(n))}%`})},null,4)]),s("div",Bt,[a[7]||(a[7]=s("div",{class:"label"},"Against",-1)),s("div",Rt,[s("div",qt,[d(i,{"show-zero":"",type:"dollar",value:u.proposal.votesAgainst,precision:0,"show-symbol":!1},null,8,["value"]),a[4]||(a[4]=s("span",null," veCRV",-1))]),s("div",Nt,[a[5]||(a[5]=s("span",null,"(",-1)),d(i,{"show-zero":"",type:"percentage",value:o(l),precision:2},null,8,["value"]),a[6]||(a[6]=s("span",null,")",-1))])]),s("div",{class:"bar",style:M({width:`${Math.max(ae,o(l))}%`})},null,4)])])}}}),Lt=V(Ft,[["__scopeId","data-v-6b2e489a"]]),Qt={class:"quorum"},Ot={class:"amount"},zt={class:"bar"},Ut={class:"percentages"},Kt={class:"quorum"},Wt=C({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=c(()=>e.proposal.votesFor),n=c(()=>e.proposal.quorum*e.proposal.totalSupply),l=c(()=>t.value/n.value*100);return(u,a)=>{const i=N;return y(),b("div",Qt,[a[3]||(a[3]=s("div",{class:"heading"},"Quorum",-1)),s("div",Ot,[d(i,{type:"dollar",value:o(t),precision:0,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=x(" / ")),d(i,{type:"dollar",value:o(n),precision:0,"show-symbol":!1},null,8,["value"]),a[1]||(a[1]=x(" veCRV "))]),s("div",zt,[s("div",{class:"support",style:M({width:`${o(l)}%`})},null,4),s("div",{class:"quorum",style:M({width:`${100-o(l)}%`})},null,4)]),s("div",Ut,[a[2]||(a[2]=s("div",{class:"zero"},"0%",-1)),s("div",Kt,[d(i,{type:"percentage",value:u.proposal.quorum*100,precision:0},null,8,["value"])])])])}}}),Ht=V(Wt,[["__scopeId","data-v-1c1b6a26"]]),Xt=["min","max","step","disabled"],Yt=C({__name:"Slider",props:He({min:{},max:{},step:{},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Xe(e,"modelValue",{set(i){return Number(i)}}),n=c(()=>(t.value-e.min)/(e.max-e.min)*100),l=k(!1),u=re("slider"),a=i=>{if(!u.value)return;const r=u.value.getBoundingClientRect(),p=r.left+r.width*n.value/100,g=Math.abs(i.clientX-p);l.value=g<30};return(i,r)=>(y(),b("div",{class:"slider-hitbox",onMousemove:a,onMouseleave:r[1]||(r[1]=p=>l.value=!1)},[Ye(s("input",{ref_key:"slider",ref:u,"onUpdate:modelValue":r[0]||(r[0]=p=>t.value=p),type:"range",min:i.min,max:i.max,step:i.step,disabled:i.disabled,style:M({"--progress":`${o(n)}%`,"--thumb-scale":o(l)?"1.2":"1"})},null,12,Xt),[[je,t.value]])],32))}}),jt=V(Yt,[["__scopeId","data-v-55011580"]]),Gt=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],I=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],Jt={class:"buttons"},Zt={class:"vecrv"},es={class:"info"},ts={class:"kpis"},ss={class:"description"},as={class:"options button-group"},os={class:"middle"},ns=["contenteditable","textContent"],ls=C({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=ie(),n=k(!1),l=k(50),u=re("editor"),a=k(!1),i=c(()=>{var f;return a.value?`${l.value}.`:l.value===0&&((f=u.value)==null?void 0:f.textContent)!=="0"?"":l.value.toString()}),r=c(()=>(Y.value??0n)>0n&&!j.value&&v.value&&X.value===0),p=c(()=>r.value?"Submit":j.value?"Voting...":v.value?X.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),g=c(()=>nt(Y.value??0n,18n)),v=c(()=>T(e.proposal)==="active"),S=c(()=>T(e.proposal)==="passed"),F=()=>{const f=window.getSelection();return f&&f.rangeCount>0?f.getRangeAt(0).startOffset:0},W=f=>{if(u.value){const m=document.createRange();m.setStart(u.value.firstChild??u.value,f),m.collapse(!0);const w=window.getSelection();w&&(w.removeAllRanges(),w.addRange(m))}},ge=()=>{l.value=0,u.value&&(u.value.textContent="0")},_e=()=>{l.value=100,u.value&&(u.value.textContent="100")},he=f=>{f.target===f.currentTarget&&u.value&&u.value.focus()},be=()=>{if(u.value){const f=u.value.textContent??"",m=F();if(/^\d*(\.\d*)?$/.test(f))if(a.value=f.endsWith("."),f){const w=parseFloat(f);w>=0&&w<=100?l.value=w:(u.value.textContent=i.value,W(m-1))}else l.value=0;else u.value.textContent=i.value,W(m-1)}},{data:H}=E({abi:I,address:P,functionName:"token",query:{enabled:n}}),{data:X}=E({abi:I,address:P,functionName:"getVoterState",args:c(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:c(()=>!!t.value&&n.value),initialData:0,initialDataUpdatedAt:0}}),{data:Y}=E({abi:Gt,address:H,functionName:"balanceOfAt",args:c(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:c(()=>!!H.value&&!!t.value&&n.value),initialData:0n,initialDataUpdatedAt:0}}),{data:we,refetch:Ce}=E({abi:I,address:P,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:c(()=>S.value&&n.value),initialData:!1,initialDataUpdatedAt:0}}),{data:L}=E({abi:I,address:P,functionName:"PCT_BASE",query:{enabled:n}}),{data:$e,error:xe,isPending:Ve,writeContract:Se}=te(),{isLoading:ke,isSuccess:De}=ee({hash:$e}),j=c(()=>Ve.value||ke.value);function Pe(){if(!L.value){A({text:O("Missing PCT_BASE"),type:"error"});return}const f=BigInt(Math.log10(Number(L.value))),m=lt(l.value/100,f),w=L.value-m;Se({abi:I,address:P,functionName:"votePct",args:[BigInt(e.proposal.id),m,w,!1]})}R(xe,f=>{A({text:O(f),type:"error"})}),R(De,()=>{A({text:"Voted",type:"success"})});const{data:Ie,error:Te,isPending:Ae,writeContract:Ee}=te(),{isLoading:Me,isSuccess:Be}=ee({hash:Ie}),G=c(()=>Ae.value||Me.value);function Re(){Ee({abi:I,address:P,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),Ce()}return R(Te,f=>{A({text:O(f),type:"error"})}),R(Be,()=>{A({text:"Executed proposal",type:"success"})}),(f,m)=>{const w=Ge,qe=N,J=B,Ne=it,Fe=ut,Le=jt,Qe=ue,Oe=Je;return y(),b(U,null,[s("div",Jt,[d(w,{class:"primary",disabled:!o(v),onClick:m[0]||(m[0]=Q=>n.value=!0)},{default:_(()=>[x(h(o(v)?"Vote":"Voting closed"),1)]),_:1},8,["disabled"]),o(S)?(y(),D(w,{key:0,class:"primary",disabled:!o(we)||o(G),onClick:Re},{default:_(()=>[x(h(o(G)?"Executing...":"Execute"),1)]),_:1},8,["disabled"])):q("",!0)]),d(Oe,{show:o(n),onClose:m[2]||(m[2]=Q=>n.value=!1)},{default:_(()=>[d(Qe,{title:"Vote with veCRV",class:"vote-content"},{default:_(()=>[s("div",Zt,[s("div",es,[s("div",ts,[d(J,{"has-value":"",label:"Voting power"},{default:_(()=>[d(qe,{"show-zero":"",type:"dollar",value:o(g),precision:2,"show-symbol":!1},null,8,["value"]),m[3]||(m[3]=x(" veCRV "))]),_:1}),d(J,{"has-value":"",label:"Block",value:f.proposal.block},null,8,["value"])]),s("div",ss,[m[4]||(m[4]=s("span",{class:"title"},"Description: ",-1)),s("span",null,h(f.proposal.metadata),1)])]),s("div",as,[d(w,{class:$(["no",{winning:o(l)<50}]),disabled:!o(r),onClick:ge},{default:_(()=>m[5]||(m[5]=[s("span",{class:"label"},"No",-1)])),_:1},8,["class","disabled"]),s("div",os,[d(Ne,{class:$({winning:o(l)<50})},null,8,["class"]),s("div",{class:$(["value",{disabled:!o(r)}]),onClick:he},[s("span",{ref_key:"editor",ref:u,contenteditable:o(r),onInput:be,textContent:h(o(i))},null,40,ns),m[6]||(m[6]=x(" % "))],2),d(Fe,{class:$({winning:o(l)>50})},null,8,["class"])]),d(w,{class:$(["yes",{winning:o(l)>50}]),disabled:!o(r),onClick:_e},{default:_(()=>m[7]||(m[7]=[s("span",{class:"label"},"Yes",-1)])),_:1},8,["class","disabled"])]),d(Le,{modelValue:o(l),"onUpdate:modelValue":m[1]||(m[1]=Q=>Ze(l)?l.value=Q:null),class:"slider",disabled:!o(r),min:0,max:100},null,8,["modelValue","disabled"]),d(w,{class:"submit primary",disabled:!o(r),"chain-id":o(et).id,onClick:Pe},{default:_(()=>[x(h(o(p)),1)]),_:1},8,["disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),rs=V(ls,[["__scopeId","data-v-b13d1304"]]),is={class:"voting"},us=C({__name:"Voting",props:{proposal:{}},setup(e){return(t,n)=>(y(),b("div",is,[d(Ht,{proposal:t.proposal},null,8,["proposal"]),d(Lt,{proposal:t.proposal},null,8,["proposal"]),d(rs,{proposal:t.proposal},null,8,["proposal"])]))}}),ds=V(us,[["__scopeId","data-v-23deebd1"]]),cs={class:"voters"},ps={class:"for"},vs={class:"address"},ms=["href"],fs={class:"amount"},ys={class:"percentage"},gs={class:"against"},_s={class:"percentage"},hs={class:"amount"},bs={class:"address"},ws=["href"],Cs=C({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=ie(),n=c(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>r.supports).orderBy(r=>r.votingPower,"desc"):null),l=c(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>!r.supports).orderBy(r=>r.votingPower,"desc"):null),u=r=>{const p=r.toLocaleLowerCase();return p==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":p==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":p==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":ne(r,12)},a=r=>r/(e.proposal.votesFor+e.proposal.votesAgainst)*100,i=r=>r===t.value;return(r,p)=>{const g=N;return y(),b("div",cs,[s("div",ps,[p[0]||(p[0]=s("div",{class:"title"},"For",-1)),(y(!0),b(U,null,Z(o(n),v=>(y(),b("div",{key:v.voter,class:"vote font-mono"},[s("div",vs,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:$({you:i(v.voter)})},h(u(v.voter)),11,ms)]),s("div",fs,[d(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",ys,[d(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])])]))),128))]),s("div",gs,[p[1]||(p[1]=s("div",{class:"title"},"Against",-1)),(y(!0),b(U,null,Z(o(l),v=>(y(),b("div",{key:v.voter,class:"vote font-mono"},[s("div",_s,[d(g,{type:"percentage",value:a(v.votingPower),precision:0},null,8,["value"])]),s("div",hs,[d(g,{type:"dollar",value:v.votingPower,precision:2,"show-symbol":!1},null,8,["value"])]),s("div",bs,[s("a",{target:"_blank",href:`https://etherscan.io/address/${v.voter}`,class:$({you:i(v.voter)})},h(u(v.voter)),11,ws)])]))),128))])])}}}),$s=V(Cs,[["__scopeId","data-v-02a526df"]]),xs={class:"technicals"},Vs={class:"technical"},Ss={class:"description"},ks={class:"technical"},Ds={class:"technical"},Ps=["href"],Is={key:0,class:"technical"},Ts=["href"],As={class:"technical"},Es=["innerHTML"],Ms=C({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){const{data:t}=dt(z(()=>e.proposal.id),z(()=>e.proposal.type),z(()=>e.expanded)),n=k(!0),l=k(e.proposal.voteCount>0),u=c(()=>t.value?t.value.votes.uniqWith((i,r)=>i.voter===r.voter).length:null),a=c(()=>t.value?t.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,i=>/[A-F]/g.test(i)&&tt(i)?`<a target='_blank' href='https://etherscan.io/address/${i}'>${i}</a>`:i):null);return(i,r)=>{var v;const p=le,g=de;return y(),b("div",xs,[s("div",Vs,[r[2]||(r[2]=s("div",{class:"heading"},"Description",-1)),s("div",Ss,h(i.proposal.metadata),1)]),s("div",ks,[s("div",{class:"heading",onClick:r[0]||(r[0]=S=>l.value=!o(l))},[x(" Voters ("+h(o(u)??"?")+") ",1),d(p,{class:$(["expander",{expandedVoters:o(l)}])},null,8,["class"])]),d(g,{expanded:o(l)},{default:_(()=>[o(t)?(y(),D($s,{key:0,class:"voters",proposal:i.proposal,"proposal-details":o(t)},null,8,["proposal","proposal-details"])):q("",!0)]),_:1},8,["expanded"])]),s("div",Ds,[r[3]||(r[3]=s("div",{class:"heading"},"Creation transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${i.proposal.txCreation}`},h(i.proposal.txCreation),9,Ps)]),(v=o(t))!=null&&v.txExecution?(y(),b("div",Is,[r[4]||(r[4]=s("div",{class:"heading"},"Execution transaction",-1)),s("a",{style:{"align-self":"start"},target:"_blank",href:`https://etherscan.io/tx/${o(t).txExecution}`},h(o(t).txExecution),9,Ts)])):q("",!0),s("div",As,[s("div",{class:"heading",onClick:r[1]||(r[1]=S=>n.value=!o(n))},[r[5]||(r[5]=x(" Calldata ")),d(p,{class:$(["expander",{expandedCallData:o(n)}])},null,8,["class"])]),d(g,{expanded:o(n)},{default:_(()=>[o(t)?(y(),b("div",{key:0,class:"calldata font-mono",innerHTML:o(a)},null,8,Es)):q("",!0)]),_:1},8,["expanded"])])])}}}),Bs=V(Ms,[["__scopeId","data-v-f2800609"]]),Rs={class:"proposal-details"},qs={class:"proposal-details-container"},Ns=C({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){return(t,n)=>(y(),b("div",Rs,[s("div",qs,[d(Bs,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),d(ds,{proposal:t.proposal},null,8,["proposal"])])]))}}),Fs=V(Ns,[["__scopeId","data-v-68dfa6bd"]]),Ls=C({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=k(e.initExpanded);return(n,l)=>{const u=de,a=ue;return y(),D(a,{compact:"",class:"proposal"},{default:_(()=>[d(Pt,{proposal:n.proposal,expanded:o(t),onToggleExpand:l[0]||(l[0]=i=>t.value=!o(t))},null,8,["proposal","expanded"]),d(u,{class:"proposal-details-collapsible",expanded:o(t)},{default:_(()=>[d(Fs,{proposal:n.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),js=V(Ls,[["__scopeId","data-v-908a1280"]]);export{js as P};
