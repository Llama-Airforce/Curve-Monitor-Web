import{_ as ue,a as de}from"./TabItem.vue_vue_type_script_setup_true_lang-CCGJjABq.js";import{q as me,d as F,r as W,f as C,h as k,o as f,w as c,b as n,u as s,a as r,t as U,O as pe,_ as A,e as D,c as L,T as J,U as X,V as te,g as _e,j as E,S as ve,X as se,W as I,i as fe,Q as he,a2 as K}from"./index-5B2tI7Zc.js";import{_ as R}from"./Table-Br42HHVv.js";import{_ as x}from"./AsyncValue-BrxM0dB4.js";import{_ as ge}from"./InputText-PEq0sSRg.js";import{_ as ye}from"./SelectChain-DkdlWUBp.js";import{c as be}from"./chains-CphmGk_h.js";import{t as Q,g as V,f as P}from"./timestamp-Dfir0V72.js";import{u as q}from"./useQuery-Ds_Sub25.js";import{u as N}from"./UseHost-Ca9zgvDG.js";import{_ as oe}from"./KPI-DKNNQWeY.js";import{u as ne,c as ae}from"./UseLightweightChart-C1SS2I-H.js";import{_ as re,a as ie,M as we,b as ke}from"./BtnChartLWFullscreen.vue_vue_type_script_setup_true_lang-B0dd4bO7.js";import{r as Y,u as Z}from"./Number-Bqyeu7gj.js";import{u as j}from"./UseSort-DEAzAtGD.js";import{_ as G}from"./TokenIcon-SHuc7s7h.js";import{c as $e,_ as Ce}from"./ChartStylesApex-DiqR34V4.js";import{u as Se,_ as Te}from"./UseLegend-ifWC3xyM.js";import{_ as Ue}from"./IconExpander-xZLtL_3V.js";import{u as Fe,_ as Be}from"./UsePagination-Bav67_-y.js";import{L as De}from"./link-BrTM50fX.js";import{u as Ae}from"./UseExpansion-BqYWlF6j.js";import{u as Ie}from"./UseRelativeTime-CazFgpUx.js";import{u as Ve}from"./UseTabNavigation--tZJLnzK.js";import"./ChainIcon-DimsDjU6.js";import"./Object-DOSYkgA0.js";import"./index-BuXzwwaP.js";/**
 * @license lucide-vue-next v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=me("TrophyIcon",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);async function le(e,t=0,o=1e3){const l=await e(t,o),d=await(l.length>=o?le(e,t+1,o):Promise.resolve([]));return l.concat(d)}const qe=e=>({timestamp:Q(e.timestamp),controller:e.controller,collateral:e.collateral,feesUsd:e.fees_usd}),Le=e=>({timestamp:Q(e.timestamp),chain:e.chain,feesUsd:e.fees_usd}),Re=e=>({pool:e.pool,name:e.name,adminFees:e.admin_fees,usdValue:e.usd_value}),xe=e=>({timestamp:Q(e.timestamp),feesUsd:e.fees_usd}),He=e=>({timestamp:Q(e.dt),coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,precision:e.coin.precision},amount:BigInt(e.amount),amountFee:BigInt(e.fee_amount),amountReceived:e.amount_received,routerReceived:e.router_received,epoch:e.epoch,txHash:e.tx_hash,blockNumber:e.block_number}),Me=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),Oe=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address,decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)});async function Ke(e){const t=V(e);return(await P(`${t}/v1/dao/fees/crvusd/weekly`)).fees.map(qe)}async function We(e){const t=V(e);return(await P(`${t}/v1/dao/fees/pools/weekly`)).fees.map(Le)}async function Qe(e,t){const o=V(t);return(await P(`${o}/v1/dao/fees/${e}/pending`)).data.map(Re)}async function Ne(e){const t=V(e);return await le(l=>P(`${t}/v1/dao/fees/distributions?page=${l}&per_page=100`).then(d=>d.distributions.map(xe)),1,100)}async function je(e,t){const o=V(t);return(await P(`${o}/v1/dao/fees/settlements`)).data.map(He)}async function ze(e){const t=V(e);return(await P(`${t}/v1/dao/fees/collected`)).data.map(Me)}async function Ee(e){const t=V(e);return(await P(`${t}/v1/dao/fees/staged`)).data.map(Oe)}function H(){return{initialData:[],initialDataUpdatedAt:0}}function Je(e){return q({queryKey:["curve-cushions",e],queryFn:({queryKey:[,t]})=>Qe(t).then(o=>o.sort((l,d)=>d.usdValue-l.usdValue)),...H()})}function Xe(){return q({queryKey:["curve-revenue-distributions"],queryFn:()=>Ne(),initialData:[],initialDataUpdatedAt:0})}function Ye(){return q({queryKey:["curve-revenue-cow-settlements"],queryFn:()=>je(),...H()})}function Ze(){return q({queryKey:["curve-revenue-crvusd-weekly"],queryFn:async()=>{const e=await N();return Ke({host:e})},...H()})}function Ge(){return q({queryKey:["curve-revenue-pools-weekly"],queryFn:async()=>{const e=await N();return We({host:e})},...H()})}function et(){return q({queryKey:["curve-revenue-fees-collected"],queryFn:async()=>{const e=await N();return ze({host:e})},...H()})}function tt(){return q({queryKey:["curve-revenue-fees-staged"],queryFn:async()=>{const e=await N();return Ee({host:e})},...H()})}const st=["href"],ot={class:"end"},nt={class:"end"},at=F({__name:"TableCushions",setup(e){const t=W(""),o=C(()=>_.value||u.value),l=W("ethereum"),{data:d,isFetching:_}=be(),a=C(()=>h.value.filter(w=>w.usdValue>100).filter(w=>{const i=t.value.toLocaleLowerCase().split(" "),v=B=>i.some(m=>B.toLocaleLowerCase().includes(m));return v(w.pool)||v(w.name)})),{data:h,isFetching:u}=Je(l),p=w=>`https://etherscan.io/address/${w}`;return(w,i)=>{const v=ye,B=ge,m=x,g=R,y=A;return f(),k(y,{class:"cushions-card",title:"Cushions",loading:s(o)},{actions:c(()=>[n(v,{class:"chain-select",chain:s(l),chains:s(d),onSelectChain:i[0]||(i[0]=$=>l.value=$==="all"?"ethereum":$)},null,8,["chain","chains"]),n(B,{modelValue:s(t),"onUpdate:modelValue":i[1]||(i[1]=$=>pe(t)?t.value=$:null),search:"",placeholder:"Search for..."},null,8,["modelValue"])]),default:c(()=>[n(g,{class:"cushions-table",rows:s(a),columns:["Name","Address",{label:"Fees ($)",align:"end"}]},{row:c(({item:$})=>[r("div",null,U($.name),1),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:p($.pool)},U($.pool),9,st)]),r("div",ot,[n(m,{type:"dollar",value:$.usdValue,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[i[2]||(i[2]=r("div",null,null,-1)),i[3]||(i[3]=r("div",null,null,-1)),r("div",nt,[n(m,{type:"dollar",value:s(a).reduce(($,S)=>$+S.usdValue,0),precision:2},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),rt=D(at,[["__scopeId","data-v-e4c52ecf"]]),it={class:"cushions"},lt=F({__name:"Cushions",setup(e){return(t,o)=>(f(),L("div",it,[n(rt)]))}}),ct=D(lt,[["__scopeId","data-v-73379d5e"]]),ut={style:{display:"flex"}},dt={ref:"chartRef",class:"chart"},mt=F({__name:"ChartDistributions",props:{distributions:{}},setup(e){const t=J(),o=X("card"),{chart:l,series:d}=ne({createChartOptions:ae(),series:{type:"Histogram",name:"distributions",options:C(()=>({priceFormat:{type:"custom",formatter:a=>`$${Y(a,0,"dollar")}${Z(a)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});te(_);function _(){if(!l.value||!d.distributions)return;const a=e.distributions.map(h=>({time:h.timestamp.getUTCTimestamp(),value:h.feesUsd})).uniqWith((h,u)=>h.time===u.time).orderBy(h=>h.time,"asc").takeRight(52);a.length>0&&(d.distributions.setData(a),l.value.timeScale().fitContent())}return(a,h)=>{const u=A;return f(),k(u,{ref_key:"card",ref:o,title:"Distributions (1y)"},{actions:c(()=>[r("div",ut,[n(s(re),{filename:"distributions",series:s(d)},null,8,["series"]),n(s(ie),{chart:s(l),target:s(o)},null,8,["chart","target"])])]),default:c(()=>[r("div",dt,null,512)]),_:1},512)}}}),pt={style:{display:"flex"}},_t={ref:"chartRef",class:"chart"},vt=F({__name:"ChartDistributionsDelta",props:{distributions:{}},setup(e){const t=J(),o=X("card"),{chart:l,series:d}=ne({createChartOptions:ae(),series:{type:"Histogram",name:"deltas",options:C(()=>({priceFormat:{type:"custom",formatter:a=>`$${Y(a,0,"dollar")}${Z(a)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});te(_);function _(){if(!l.value||!d.deltas)return;const{colors:a}=t.value,h=e.distributions.map(u=>({time:u.timestamp.getUTCTimestamp(),value:u.feesUsd})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc").takeRight(53).reduce((u,p,w,i)=>{if(w===0)return u;const v=p.value-i[w-1].value,B=v<0?a.red:a.green;return u.push({time:p.time,value:v,color:B}),u},[]);h.length>0&&(d.deltas.setData(h),l.value.timeScale().fitContent())}return(a,h)=>{const u=A;return f(),k(u,{ref_key:"card",ref:o,title:"Distributions Change (1y)"},{actions:c(()=>[r("div",pt,[n(s(re),{filename:"distributions_delta",series:s(d)},null,8,["series"]),n(s(ie),{chart:s(l),target:s(o)},null,8,["chart","target"])])]),default:c(()=>[r("div",_t,null,512)]),_:1},512)}}}),ft={class:"end"},ht=F({__name:"TableDistributions",props:{distributions:{}},setup(e){const t=[{id:"timestamp",label:"Date",sort:!0},{id:"fees",label:"Fees",sort:!0,align:"end"}],{sorting:o,onSort:l}=j("timestamp"),d=C(()=>e.distributions.orderBy(a=>{switch(o.value.column){case"timestamp":return a.timestamp.getTime();case"fees":return a.feesUsd}},o.value.order));function _(a){return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(a,h)=>{const u=x,p=R,w=A;return f(),k(w,{title:"Distributions"},{default:c(()=>[n(p,{class:"distributions-table",rows:s(d),columns:t,sorting:s(o),onSortColumn:s(l)},{row:c(({item:{timestamp:i,feesUsd:v}})=>[r("div",null,U(_(i)),1),r("div",ft,[n(u,{type:"dollar",value:v,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),gt=D(ht,[["__scopeId","data-v-71c558b9"]]),yt={class:"dashboard-grid"},bt=F({__name:"Distributions",setup(e){const{isFetching:t,data:o}=Xe(),l=C(()=>o.value.sumBy(a=>a.feesUsd)),d=C(()=>o.value.orderBy(a=>a.timestamp.getTime(),"desc").take(52).meanBy(a=>a.feesUsd)),_=C(()=>{const a=o.value.orderBy(p=>p.timestamp.getTime(),"desc").take(52).map(p=>p.feesUsd),h=a.meanBy(p=>p),u=a.map(p=>Math.pow(p-h,2));return Math.sqrt(u.sumBy(p=>p)/(a.length-1))});return(a,h)=>{const u=x,p=oe;return f(),L("div",yt,[n(p,{style:{"grid-area":"kpi1"},label:"Total","has-value":s(o).length>0},{default:c(()=>[n(u,{type:"dollar",value:s(l)},null,8,["value"])]),_:1},8,["has-value"]),n(p,{style:{"grid-area":"kpi2"},label:"Average (1y)","has-value":s(o).length>0},{default:c(()=>[n(u,{type:"dollar",value:s(d)},null,8,["value"])]),_:1},8,["has-value"]),n(p,{style:{"grid-area":"kpi3"},label:"Standard Deviation (1y)","has-value":s(o).length>0},{default:c(()=>[n(u,{type:"dollar",value:s(_)},null,8,["value"])]),_:1},8,["has-value"]),n(mt,{style:{"grid-area":"chart"},distributions:s(o),loading:s(t)},null,8,["distributions","loading"]),n(vt,{style:{"grid-area":"delta"},distributions:s(o),loading:s(t)},null,8,["distributions","loading"]),n(gt,{style:{"grid-area":"table"},distributions:s(o),loading:s(t)},null,8,["distributions","loading"])])}}}),wt=D(bt,[["__scopeId","data-v-e21ae2fe"]]),kt=["href"],$t={class:"end"},Ct={class:"end"},St={class:"end"},Tt=F({__name:"TableFeesCollected",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:o,onSort:l}=j("amountUsd"),d=C(()=>e.fees.orderBy(_=>{switch(o.value.column){case"symbol":return _.coin.symbol;case"amount":return _.amount;case"amountUsd":default:return _.amountUsd}},o.value.order));return(_,a)=>{const h=G,u=x,p=R,w=A;return f(),k(w,{title:"Fees Collected"},{default:c(()=>[n(p,{rows:s(d),columns:t,sorting:s(o),onSortColumn:s(l)},{row:c(({item:i})=>[n(h,{address:i.coin.address},null,8,["address"]),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${i.coin.address}`},U(i.coin.symbol),9,kt)]),r("div",$t,[n(u,{"show-zero":"",type:"dollar",value:i.amount,precision:2,"show-symbol":!1},null,8,["value"])]),r("div",Ct,[n(u,{"show-zero":"",type:"dollar",value:i.amountUsd,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[a[0]||(a[0]=r("div",null,null,-1)),a[1]||(a[1]=r("div",null,null,-1)),a[2]||(a[2]=r("div",null,null,-1)),r("div",St,[n(u,{type:"dollar",value:s(d).reduce((i,v)=>i+v.amountUsd,0),precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Ut=D(Tt,[["__scopeId","data-v-50c103c7"]]),Ft=["href"],Bt={class:"end"},Dt={class:"end"},At={class:"end"},It=F({__name:"TableFeesStaged",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:o,onSort:l}=j("amountUsd"),d=C(()=>e.fees.orderBy(_=>{switch(o.value.column){case"symbol":return _.coin.symbol;case"amount":return _.amount;case"amountUsd":default:return _.amountUsd}},o.value.order));return(_,a)=>{const h=G,u=x,p=R,w=A;return f(),k(w,{title:"Fees Staged"},{default:c(()=>[n(p,{rows:s(d),columns:t,sorting:s(o),onSortColumn:s(l)},{row:c(({item:i})=>[n(h,{address:i.coin.address},null,8,["address"]),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${i.coin.address}`},U(i.coin.symbol),9,Ft)]),r("div",Bt,[n(u,{"show-zero":"",type:"dollar",value:i.amount,precision:2,"show-symbol":!1},null,8,["value"])]),r("div",Dt,[n(u,{"show-zero":"",type:"dollar",value:i.amountUsd,precision:2},null,8,["value"])])]),"row-aggregation":c(()=>[a[0]||(a[0]=r("div",null,null,-1)),a[1]||(a[1]=r("div",null,null,-1)),a[2]||(a[2]=r("div",null,null,-1)),r("div",At,[n(u,{type:"dollar",value:s(d).reduce((i,v)=>i+v.amountUsd,0),precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Vt=D(It,[["__scopeId","data-v-e8ff3feb"]]),Pt={class:"dashboard-grid"},qt=F({__name:"Harvesting",setup(e){const{isFetching:t,data:o}=et(),{isFetching:l,data:d}=tt();return(_,a)=>(f(),L("div",Pt,[n(Ut,{style:{"grid-area":"collected"},fees:s(o),loading:s(t)},null,8,["fees","loading"]),n(Vt,{style:{"grid-area":"staged"},fees:s(d),loading:s(l)},null,8,["fees","loading"])]))}}),Lt=D(qt,[["__scopeId","data-v-8c81face"]]),Rt=F({__name:"ChartBreakdown",setup(e){const t=J(),{items:o}=Se(()=>[{id:"crvusd",label:"crvUSD",color:t.value.colorsArray[0]},{id:"pools",label:"Pools",color:t.value.colorsArray[1]}]),{isFetching:l,data:d}=Ze(),{isFetching:_,data:a}=Ge(),h=C(()=>l.value||_.value),u=C(()=>{const{colors:m,colorsArray:g}={colors:t.value.colors,colorsArray:[t.value.colorsArray[0],t.value.colorsArray[1]]};return $e({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:v.value,labels:{formatter:y=>y,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:y=>`$${Y(y,0,"dollar")}${Z(y)}`},min:0},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}},W({colors:m,colorsArray:g}))});function p(m){return m.groupBy(g=>g.timestamp.getTime()).entries().map(([g,y])=>{const $=y.reduce((S,M)=>S+M.feesUsd,0);return{timestamp:Number(g)/1e3,feesUsd:$}}).orderBy(g=>g.timestamp,"asc")}const w=C(()=>{const m=p(d.value),g=p(a.value);return m.concat(g).groupBy(y=>y.timestamp).entries().map(([,y])=>({timestamp:y[0].timestamp,numLabels:y.length})).orderBy(y=>y.timestamp,"asc").dropWhile(y=>y.numLabels<2).map(y=>y.timestamp)});function i(m){return new Date(m*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"short"})}const v=C(()=>w.value.map(m=>i(m))),B=C(()=>{function m($){return p($).map(S=>({x:i(S.timestamp),y:S.feesUsd}))}const g={name:"crvusd",data:m(d.value)},y={name:"pools",data:m(a.value)};return[g,y]});return(m,g)=>{const y=Te,$=Ce,S=A;return f(),k(S,{title:"Revenue breakdown by source",loading:s(h)},{"actions-secondary":c(()=>[n(y,{items:s(o)},null,8,["items"])]),default:c(()=>[n($,{options:s(u),series:s(B)},null,8,["options","series"])]),_:1},8,["loading"])}}}),xt=D(Rt,[["__scopeId","data-v-8f289c29"]]),Ht={class:"dashboard-grid"},Mt=F({__name:"Overview",setup(e){return(t,o)=>(f(),L("div",Ht,[n(xt,{style:{"grid-area":"breakdown"},class:"breakdown"})]))}}),Ot=D(Mt,[["__scopeId","data-v-b341dd1c"]]),Kt=e=>({auctionStartBlock:e.auctionStartBlock,orders:e.auction.orders.map(t=>t),prices:Object.fromEntries(Object.entries(e.auction.prices).map(([t,o])=>[t,BigInt(o)])),solutions:e.solutions.map(t=>({solver:t.solver,solverAddress:t.solverAddress,score:BigInt(t.score),ranking:t.ranking,clearingPrices:Object.fromEntries(Object.entries(t.clearingPrices).map(([o,l])=>[o,BigInt(l)])),orders:t.orders.map(o=>({id:o.id,sellAmount:BigInt(o.sellAmount),buyAmount:BigInt(o.buyAmount)}))}))});async function Wt(e,t){const o=V(t),l=await P(`${o}/mainnet/api/v1/solver_competition/by_tx_hash/${e}`);return Kt(l)}const Qt="https://api.cow.fi";function Nt(e){return q({queryKey:["solver-competition",e],queryFn:({queryKey:[,t]})=>Wt(t,{host:Qt})})}const jt={class:"settlement-details-body"},zt={class:"info col"},Et={class:"buttons"},Jt={class:"font-mono json"},Xt={key:1},Yt=["href"],Zt=F({__name:"SettlementDetails",props:{settlement:{}},setup(e){const{data:t,isPending:o}=Nt(_e(()=>e.settlement.txHash)),l=C(()=>t.value?JSON.stringify(t.value,(i,v)=>typeof v=="bigint"?v.toString():v,2):"no data"),d=C(()=>t.value?t.value.solutions.orderBy(i=>i.ranking,"asc"):[]);function _(i){return`https://etherscan.io/address/${i}`}async function a(i){await navigator.clipboard.writeText(i)}async function h(){await navigator.clipboard.writeText(l.value)}function u(i){switch(i){case 1:return"gold";case 2:return"silver";case 3:return"bronze";default:return""}}const p=W(!1),w=X("cardJson");return(i,v)=>{const B=oe,m=De,g=ve,y=we,$=ke,S=A,M=Pe,z=R;return f(),k(S,{class:"settlement-details"},{default:c(()=>[r("div",jt,[r("div",zt,[n(B,{label:"Auction Start Block","has-value":!s(o)},{default:c(()=>{var T;return[E(U(((T=s(t))==null?void 0:T.auctionStartBlock)??0),1)]}),_:1},8,["has-value"]),n(B,{label:"Solvers","has-value":!s(o)},{default:c(()=>{var T,b;return[E(U(((b=(T=s(t))==null?void 0:T.solutions)==null?void 0:b.length)??0),1)]}),_:1},8,["has-value"]),n(B,{label:"Orders","has-value":!s(o)},{default:c(()=>{var T,b;return[E(U(((b=(T=s(t))==null?void 0:T.orders)==null?void 0:b.length)??0),1)]}),_:1},8,["has-value"]),n(S,{ref_key:"cardJson",ref:w,class:"card-json col",title:"Json"},{actions:c(()=>[r("div",Et,[n(g,{onClick:v[0]||(v[0]=T=>h())},{default:c(()=>[n(m)]),_:1}),n(g,{onClick:v[2]||(v[2]=T=>p.value=!s(p))},{default:c(()=>{var T;return[n(y),n($,{target:(T=s(w))==null?void 0:T.$el,show:s(p),onClose:v[1]||(v[1]=b=>p.value=!1)},null,8,["target","show"])]}),_:1})])]),default:c(()=>[r("div",Jt,U(s(l)),1)]),_:1},512)]),n(S,{class:"col",title:"Solvers"},{default:c(()=>[n(z,{class:"solvers-table col",rows:s(d)},{row:c(({item:{solver:T,solverAddress:b,ranking:O,score:ce}})=>[r("div",{class:se(["trophy",u(O)])},[O<=3?(f(),k(M,{key:0})):(f(),L("span",Xt,U(O),1))],2),r("div",null,[r("a",{class:"font-mono",target:"_blank",href:_(b)},U(T),9,Yt)]),r("div",null,U(ce),1),r("div",null,[n(g,{onClick:hs=>a(b)},{default:c(()=>[n(m)]),_:2},1032,["onClick"])])]),_:1},8,["rows"])]),_:1})])]),_:1})}}}),Gt=D(Zt,[["__scopeId","data-v-ac9fc03e"]]),es={class:"header-content"},ts={class:"token"},ss=["href"],os={class:"end"},ns={class:"end"},as={class:"end"},rs={class:"end profit"},is={class:"end"},ls=["href"],cs={class:"end"},ee=15,us=F({__name:"TableSettlements",props:{settlements:{}},setup(e){const t=[{id:"token",label:"Token",sort:!1},{id:"amount",label:"Amount",sort:!0,align:"end"},{id:"quote",label:"Quote",sort:!0,align:"end"},{id:"profit",label:"Profit",sort:!0,align:"end"},{id:"profitPct",label:"(%)",sort:!0,align:"end"},{id:"tx",label:"Transaction",sort:!1,align:"end"},{id:"timestamp",label:"Time",sort:!0,align:"end"}],{sorting:o,onSort:l}=j("timestamp"),d=C(()=>e.settlements.orderBy(m=>{switch(o.value.column){case"amount":return m.amountReceived;case"quote":return m.routerReceived;case"profit":return i(m);case"profitPct":return v(m);case"timestamp":return m.timestamp.getTime()}},o.value.order)),{page:_,rowsPage:a,onPage:h}=Fe(d,ee),{expanded:u,toggleExpansion:p}=Ae(),{relativeTime:w}=Ie();function i(m){return m.amountReceived-m.routerReceived}function v(m){return 100*m.amountReceived/m.routerReceived-100}function B(m){const g=m.coin.symbol;return g.includes(":")?g.split(":")[1]:g}return(m,g)=>{const y=Be,$=G,S=x,M=Ue,z=R,T=A;return f(),k(T,{title:"CowSwap Settlements"},{actions:c(()=>[r("div",es,[n(y,{"items-count":s(d).length,"items-per-page":ee,page:s(_),onPage:s(h)},null,8,["items-count","page","onPage"])])]),default:c(()=>[n(z,{class:"settlements-table",rows:s(a),columns:t,sorting:s(o),expanded:s(u),onSortColumn:s(l),onSelect:s(p)},{row:c(({item:b,expanded:O})=>[r("div",ts,[n($,{address:b.coin.address},null,8,["address"]),r("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${b.coin.address}`},U(B(b)),9,ss)]),r("div",os,[n(S,{type:"dollar",value:b.amountReceived,precision:2},null,8,["value"])]),r("div",ns,[n(S,{type:"dollar",value:b.routerReceived,precision:2},null,8,["value"])]),r("div",as,[b.routerReceived>1?(f(),k(S,{key:0,type:"dollar",value:i(b),precision:2},null,8,["value"])):I("",!0)]),r("div",rs,[b.routerReceived>1?(f(),k(S,{key:0,class:se(["pct",{green:v(b)>0}]),type:"percentage",value:v(b),precision:2},null,8,["value","class"])):I("",!0)]),r("div",is,[r("a",{class:"font-mono",target:"_blank",href:`https://explorer.cow.fi/tx/${b.txHash}`,onClick:g[0]||(g[0]=fe(()=>{},["stop"]))},U(("addressShort"in m?m.addressShort:s(he))(b.txHash)),9,ls)]),r("div",cs,U(s(w)(b.timestamp.getUTCTimestamp())),1),n(M,{expanded:O},null,8,["expanded"])]),"row-details":c(({item:b})=>[g[1]||(g[1]=r("div",{class:"empty"},null,-1)),s(u).includes(b)?(f(),k(Gt,{key:0,settlement:b},null,8,["settlement"])):I("",!0)]),_:1},8,["rows","sorting","expanded","onSortColumn","onSelect"])]),_:1})}}}),ds=D(us,[["__scopeId","data-v-9335f69c"]]),ms={class:"dashboard-grid"},ps=F({__name:"Settlements",setup(e){const{isFetching:t,data:o}=Ye();return(l,d)=>(f(),L("div",ms,[n(ds,{style:{"grid-area":"table"},settlements:s(o),loading:s(t)},null,8,["settlements","loading"])]))}}),_s=D(ps,[["__scopeId","data-v-b0b08e65"]]),vs={class:"dashboard"},fs=F({__name:"Revenue.page",setup(e){const{tabActive:t,tabActiveIndex:o}=Ve(["overview","distributions","cushions","settlements","harvesting"],"revenue");return(l,d)=>{const _=ue,a=de;return f(),L("div",vs,[n(a,{active:s(o),onTab:d[0]||(d[0]=h=>o.value=h.index)},{default:c(()=>[n(_,{header:"Revenue"},{default:c(()=>[(f(),k(K,null,[s(t)==="overview"?(f(),k(Ot,{key:0})):I("",!0)],1024))]),_:1}),n(_,{header:"Distributions"},{default:c(()=>[(f(),k(K,null,[s(t)==="distributions"?(f(),k(wt,{key:0})):I("",!0)],1024))]),_:1}),n(_,{header:"Cushions"},{default:c(()=>[(f(),k(K,null,[s(t)==="cushions"?(f(),k(ct,{key:0})):I("",!0)],1024))]),_:1}),n(_,{header:"Settlements"},{default:c(()=>[(f(),k(K,null,[s(t)==="settlements"?(f(),k(_s,{key:0})):I("",!0)],1024))]),_:1}),n(_,{header:"Harvesting"},{default:c(()=>[(f(),k(K,null,[s(t)==="harvesting"?(f(),k(Lt,{key:0})):I("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),Ns=D(fs,[["__scopeId","data-v-2184303d"]]);export{Ns as default};
