const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-apexcharts-BNxz59aI.js","assets/vendor-BPLgJOaz.js"])))=>i.map(i=>d[i]);
var co=Object.defineProperty;var uo=(e,t,s)=>t in e?co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Ue=(e,t,s)=>uo(e,typeof t!="symbol"?t+"":t,s);import{o as _,c as S,a as d,d as L,u as is,b as w,e as po,f as A,n as R,g as F,h as o,r as j,i as M,t as I,w as g,j as m,T as xs,F as te,k as oe,l as mt,C as cs,m as Es,p as P,q as et,s as vt,V as mo,v as vo,x as us,y as ho,z as _o,A as fo,B as ds,D as H,E as Pt,G as go,H as bo,I as Os,J as Ae,M as yo,K as pe,L as wo,N as rs,O as $e,P as ps,Q as Dt,R as ne,S as ko,U as $o,W as Co,X as Ao,Y as Oe,Z as Ws,_ as So,$ as Lo,a0 as To,a1 as Io,a2 as Vo,a3 as qo,a4 as E,a5 as Ht,a6 as Po,a7 as Do,a8 as x,a9 as Bo,aa as Ns,ab as Fo,ac as dt,ad as Mo,ae as Uo,af as le,ag as Y,ah as Ro,ai as xo,aj as ht,ak as Eo,al as Oo,am as We,an as we,ao as Je,ap as _t,aq as Wo,ar as Bt,as as No,at as Ko,au as ie,av as ms,aw as Ho,ax as re,ay as Ne,az as Qo,aA as Ks,aB as qt,aC as zo,aD as jo,aE as Go,aF as Xo,aG as Zo,aH as Yo,aI as Jo,aJ as ct,aK as Cs,aL as As,aM as en,aN as vs,aO as Hs,aP as tn,aQ as Qs,aR as zs,aS as Ss,aT as sn,aU as js,aV as Qt,aW as Gs,aX as an,aY as on,aZ as Ls,a_ as nn,a$ as Ts,b0 as ln,b1 as rn,b2 as cn,b3 as un,b4 as dn,b5 as pn,b6 as mn,b7 as vn,b8 as hn}from"./vendor-BPLgJOaz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();class _n{constructor(t){this.value=t}entries(){return Object.entries(this.value)}}Array.prototype.take=function(e){return this.slice(0,e)};Array.prototype.takeRight=function(e){return this.slice(-e)};Array.prototype.drop=function(e=1){return this.slice(Math.max(0,e))};Array.prototype.dropWhile=function(e){const t=this.findIndex((s,a,n)=>!e(s,a,n));return t===-1?[]:this.slice(t)};Array.prototype.zip=function(...e){return this.map((t,s)=>[t,...e.map(a=>a[s])])};Array.prototype.uniq=function(){return[...new Set(this)]};Array.prototype.uniqWith=function(e){return this.filter((t,s)=>this.findIndex(a=>e(t,a))===s)};Array.prototype.orderBy=function(e,t="asc"){const s=Array.isArray(e)?e:[e],a=Array.isArray(t)?t:[t];return[...this].sort((n,i)=>{for(let l=0;l<s.length;l++){const r=s[l],c=Array.isArray(t)?a[l]||"asc":t,u=r(n),p=r(i);if(u!==p)return(u>p?1:-1)*(c==="asc"?1:-1)}return 0})};Array.prototype.groupBy=function(e){const t=Object.groupBy(this,e);return new _n(t)};Array.prototype.sumBy=function(e){return this.reduce((t,s)=>t+e(s),0)};Array.prototype.meanBy=function(e){const t=this.sumBy(e);return this.length>0?t/this.length:0};Array.prototype.maxBy=function(e){return this.reduce((t,s)=>e(s)>e(t)?s:t)};Array.prototype.difference=function(...e){const t=new Set(e.flat());return this.filter(s=>!t.has(s))};const V=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},fn={},gn={class:"spinner"};function bn(e,t){return _(),S("div",gn,t[0]||(t[0]=[d("div",null,null,-1),d("div",null,null,-1)]))}const tt=V(fn,[["render",bn],["__scopeId","data-v-1a694bfd"]]),yn=["inert"],wn={key:0,class:"card-title"},kn={key:1,class:"card-actions-secondary"},$n={key:2,class:"card-actions"},Cn=L({__name:"Card",props:{title:{default:""},compact:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},loading:{type:[Boolean,null],default:null}},setup(e){const t=is(),s=w(()=>e.title||t.title),a=w(()=>t.actions),n=w(()=>t["actions-secondary"]),i=w(()=>e.title||t.title||a.value||n.value),{width:l}=po(),r=w(()=>l.value<=1280);return(c,u)=>{const p=tt;return _(),S("div",{class:R(["card",{loading:c.loading,"loading-backdrop":c.loading!==null,"stack-actions":o(r)}]),inert:!!c.loading},[c.loading!==null?(_(),A(p,{key:0,class:R({loading:c.loading})},null,8,["class"])):F("",!0),o(i)?(_(),S("div",{key:1,class:R(["card-header",{collapsible:c.collapsible}])},[o(s)?(_(),S("div",wn,[j(c.$slots,"title",{},()=>[M(I(c.title),1)],!0)])):F("",!0),o(n)?(_(),S("div",kn,[j(c.$slots,"actions-secondary",{},void 0,!0)])):F("",!0),o(a)?(_(),S("div",$n,[j(c.$slots,"actions",{},void 0,!0)])):F("",!0)],2)):(_(),S("div",{key:2,class:R(["card-no-header",{compact:c.compact}])},null,2)),d("div",{class:R(["card-body",{compact:c.compact,collapsed:c.collapsed}])},[j(c.$slots,"default",{},void 0,!0)],2)],10,yn)}}}),U=V(Cn,[["__scopeId","data-v-f1c23778"]]),An=L({__name:"Breadcrumb",props:{crumbs:{},active:{}},emits:["crumb"],setup(e,{emit:t}){const s=t,a=i=>{var r;const l=e.active?e.active.id===i.id:((r=e.crumbs.filter(c=>!c.hint).at(-1))==null?void 0:r.id)===i.id;return i.hint??l},n=i=>{var l;return((l=e.crumbs.at(-1))==null?void 0:l.id)===i.id};return(i,l)=>{const r=cs,c=U;return _(),A(c,null,{default:g(()=>[m(xs,{name:"fade",tag:"ul"},{default:g(()=>[(_(!0),S(te,null,oe(i.crumbs,u=>(_(),S("li",{key:u.id},[(_(),A(mt(a(u)?"span":"a"),{class:R({active:a(u),hint:u.hint}),onClick:p=>s("crumb",u)},{default:g(()=>[M(I(u.label),1)]),_:2},1032,["class","onClick"])),!n(u)||i.crumbs.length===1?(_(),A(r,{key:0})):F("",!0)]))),128))]),_:1})]),_:1})}}}),Sn=V(An,[["__scopeId","data-v-eb41f11a"]]),Ie=Es("breadcrumbStore",()=>{const e=P([]),t=P(!1);return{crumbs:e,show:t}}),Ln={class:"root"},Tn={class:"toolbar-container"},In={class:"content"},Vn=L({__name:"Layout",setup(e){const t=Ie(),s=et(),a=async n=>{n.pathName&&await s.push({name:n.pathName,...n.params&&{params:n.params()}})};return(n,i)=>{const l=vt("notifications"),r=Sn,c=vt("router-view");return _(),S("div",Ln,[m(l,{width:600,duration:-1}),m(o(mo)),j(n.$slots,"navigation",{},void 0,!0),d("main",null,[d("div",Tn,[o(t).show?(_(),A(r,{key:0,class:"breadcrumb",crumbs:o(t).crumbs,onCrumb:a},null,8,["crumbs"])):F("",!0),i[0]||(i[0]=d("div",{id:"toolbar",class:"toolbar-teleport"},null,-1))]),d("div",In,[m(c,null,{default:g(({Component:u})=>[m(vo,{name:"fade",mode:"out-in"},{default:g(()=>[(_(),A(mt(u)))]),_:2},1024)]),_:1})])])])}}}),qn=V(Vn,[["__scopeId","data-v-00bacdb5"]]),Re=us({blue:"#aaa",yellow:"#aaa",green:"#aaa",red:"#aaa",purple:"#aaa",backgroundColor:"#aaa",level1:"#aaa",level2:"#aaa",level3:"#aaa",level4:"#aaa",level5:"#aaa",level6:"#aaa",text:"#aaa"});ho(document.documentElement,e=>{if(!e.some(a=>a.attributeName==="data-theme"))return;const t=getComputedStyle(document.documentElement),s=a=>Pn(t.getPropertyValue(a));Re.value={blue:s("--c-chart-blue"),yellow:s("--c-chart-yellow"),green:s("--c-chart-green"),red:s("--c-chart-red"),purple:s("--c-chart-purple"),text:s("--c-chart-text"),backgroundColor:s("--c-lvl1"),level1:s("--c-lvl1"),level2:s("--c-lvl2"),level3:s("--c-lvl3"),level4:s("--c-lvl4"),level5:s("--c-lvl5"),level6:s("--c-lvl6")}},{attributes:!0});function Pn(e){const t=document.createElement("canvas");t.width=1,t.height=1;const s=t.getContext("2d");if(!s)throw new Error("Failed to create 2D canvas context");s.fillStyle=e,s.fillRect(0,0,1,1);const a=s.getImageData(0,0,1,1).data;return`#${[a[0],a[1],a[2]].map(i=>i.toString(16).padStart(2,"0")).join("")}`}const Dn={class:"collapsible-inside"},Bn=L({__name:"Collapsible",props:{expanded:{type:Boolean,default:!0}},setup(e){return(t,s)=>(_(),S("div",{class:R(["collapsible-outside",{expanded:t.expanded}])},[d("div",Dn,[j(t.$slots,"default",{},void 0,!0)])],2))}}),ft=V(Bn,[["__scopeId","data-v-adb182cc"]]),Fn={class:"badge"},Mn={class:"label"},Un=L({__name:"Badge",props:{label:{default:""}},setup(e){return(t,s)=>(_(),S("div",Fn,[d("div",Mn,I(t.label),1)]))}}),Rn=V(Un,[["__scopeId","data-v-efe380bc"]]);function ut(e){return!!e.children}function zt(e){return!!e.to}function xn(e){return!!e.url}function En(e){return e!=null}function On(e){function t(v){return v<10?"0"+v.toString():v.toString()}const s=e.getTime()-new Date().getTime();if(s<=0)return"00:00:00:00";const a=1e3,n=a*60,i=n*60,l=i*24,r=Math.floor(s/l),c=Math.floor(s%l/i),u=Math.floor(s%i/n),p=Math.floor(s%n/a);return t(r)+":"+t(c)+":"+t(u)+":"+t(p)}function ze(e,t=0,s=".",a=","){const n=isFinite(+e)?+e:0,i=isFinite(+t)?Math.abs(t):0,l=typeof a>"u"?",":a,r=typeof s>"u"?".":s,c=function(p,v){const b=Math.pow(10,v);return Math.round(p*b)/b},u=(i?c(n,i):Math.round(n)).toString().split(".");return u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(r)}function z(e){const t=Math.abs(e);return t>=1*10**12?"t":t>=1*10**9?"b":t>=1*10**6?"m":t>=1*10**3?"k":""}function W(e,t,s){const a=Math.abs(e);return t===1/0?e.toLocaleString():s==="percentage"?ze(e,t):s==="dollar"?a>=1*10**12?ze(e/10**12,t):a>=1*10**9?ze(e/10**9,t):a>=1*10**6?ze(e/10**6,t):a>=1*10**3?ze(e/10**3,t):ze(e,t):e.toString()}function Ee(e){return Number(e.toFixed(e>100?0:2)).toLocaleString()}function xe(e,t){return parseFloat(_o(e,Number(t)))}function Xs(e,t){const s=Number(t),a=Number.isInteger(e)?e.toString():e.toFixed(s);return fo(a,s)}function hs(e,t){const s={...e};for(const a in t)Array.isArray(t[a])?s[a]=[...t[a]]:typeof t[a]=="object"&&t[a]!==null?s[a]=hs(s[a],t[a]):s[a]=t[a];return s}async function Zs(e,t=0,s=1e3){const a=await e(t,s),n=await(a.length>=s?Zs(e,t+1,s):Promise.resolve([]));return a.concat(n)}function Lt(e,t){return(Array.isArray(e)?e:[e]).some(a=>t.path.startsWith(a))}function gt(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}const Ys="0x9bc7c6ad7e7cf3a6fcb58fb21e27752ac1e53f99",Wn="0xf939e0a03fb07f59a73314e73794be0e57ac1b4e",Js="0x696B5D296a8AeF7482B726FCf0616E32fe72A53d",ea="0x2f50d538606fa9edd2b11e2446beb18c9d5846bb",je="0xe478de485ad2fe566d49342cbd03e49ed7db3356",Nn={laf:"https://api.llama.airforce",cb:void 0,cm:"https://api2.curvemonitor.com",pm:void 0,"pm-lrt":void 0};class Kn extends Error{constructor(t,s){super(s),this.status=t}}async function Hn(e,t,s){try{const a=await fetch(e,{method:t?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),signal:s});if(a.ok)return a;throw new Kn(a.status,`Fetch error ${a.status} for URL: ${e}`)}catch(a){throw a instanceof Error?a:new Error("Unknown fetch error")}}async function Qn(e,t,s){return await(await Hn(e,t,s)).json()}class Te{async fetch(t,s,a){return Qn(t,s,a)}}class ta extends Te{constructor(s){super();Ue(this,"host");this.host=s}async getHost(){return await this.host}}class zn extends Te{async getPrice(t){const s=`ethereum:${t}`;return this.fetch(`https://coins.llama.fi/prices/current/${s}`).then(a=>a.coins[s])}async getPrices(t){const s=t.map(a=>`ethereum:${a}`).join(",");return this.fetch(`https://coins.llama.fi/prices/current/${s}`).then(a=>a.coins)}}const jt={};function jn(e="$llama$"){jt[e]||(jt[e]=0);const t=++jt[e];return e==="$llama$"?`${t}`:`${e}${t}`}const Gn={key:0},Xn=["href"],Zn={class:"nav-link-container"},Yn={key:1},Jn={class:"nav-link-container"},el={class:"left"},tl={class:"right"},sl={key:2},al={class:"nav-link-container"},ol={class:"nav-link-container"},nl={class:"left"},ll={class:"right"},rl=L({__name:"MenuItem",props:{item:{}},emits:["navigated"],setup(e,{emit:t}){const s=t,a=ds(),n=P(!0),i=w(()=>zt(e.item)?[e.item]:ut(e.item)?e.item.children:[]),l=()=>{ut(e.item)&&e.item.children.filter(p=>Lt(p.to,a)).length>0&&(n.value=!0)},r=u=>typeof u.label=="string"?u.label:u.label();H(()=>e.item,u=>{ut(u)&&(n.value=!u.initCollapsed),l()},{immediate:!0}),H(()=>a.fullPath,()=>{l()},{immediate:!0});const c=()=>{n.value=!n.value};return(u,p)=>{const v=Rn,b=vt("router-link"),f=Pt,h=ft;return _(),S(te,null,[o(xn)(u.item)?(_(),S("li",Gn,[d("a",{class:"nav-link root",href:u.item.url,target:"_blank"},[d("div",Zn,I(u.item.label),1)],8,Xn)])):o(zt)(u.item)?(_(),S("li",Yn,[m(b,{to:u.item.to,class:R(["nav-link root",{"router-link-active":o(Lt)(u.item.to,o(a))}]),onClick:p[0]||(p[0]=y=>s("navigated"))},{default:g(()=>[d("div",Jn,[d("div",el,[u.item.icon?(_(),A(mt(u.item.icon),{key:0,class:"icon"})):F("",!0),M(" "+I(r(u.item)),1)]),d("div",tl,[u.item.tag?(_(),A(v,{key:0,label:u.item.tag},null,8,["label"])):F("",!0)])])]),_:1},8,["to","class"])])):o(ut)(u.item)?(_(),S("li",sl,[d("a",{class:"nav-link root",onClick:c},[d("div",al,[M(I(u.item.label)+" ",1),m(f,{class:R(["expander",{expanded:o(n)}])},null,8,["class"])])])])):F("",!0),o(ut)(u.item)?(_(),A(h,{key:3,class:"items",expanded:o(n)},{default:g(()=>[d("ul",null,[(_(!0),S(te,null,oe(o(i),y=>(_(),S("li",{key:r(y)},[o(zt)(y)?(_(),A(b,{key:0,to:y.to,class:R(["nav-link",{"router-link-active":o(Lt)(y.to,o(a))}]),onClick:p[1]||(p[1]=k=>s("navigated"))},{default:g(()=>[d("div",ol,[d("div",nl,[y.icon?(_(),A(mt(y.icon),{key:0,class:"icon"})):F("",!0),M(" "+I(r(y)),1)]),d("div",ll,[y.tag?(_(),A(v,{key:0,label:y.tag},null,8,["label"])):F("",!0)])])]),_:2},1032,["to","class"])):F("",!0)]))),128))])]),_:1},8,["expanded"])):F("",!0)],64)}}}),il=V(rl,[["__scopeId","data-v-923ef64f"]]),cl=L({__name:"Menu",props:{pages:{default:()=>[]}},emits:["navigated"],setup(e,{emit:t}){const s=t,a=ds(),n=w(()=>e.pages.find(r=>Lt(r.titleRoute,a))),i=w(()=>{var r;return((r=n.value)==null?void 0:r.menuItems)??[]}),l=r=>typeof r.label=="string"?r.label:r.label();return(r,c)=>(_(),S("nav",null,[(_(!0),S(te,null,oe(o(i),u=>(_(),S("ul",{key:l(u)},[m(il,{item:u,onNavigated:c[0]||(c[0]=p=>s("navigated"))},null,8,["item"])]))),128))]))}}),ul=V(cl,[["__scopeId","data-v-eac6628d"]]);function Ft(){const{address:e,isConnected:t,chainId:s}=go(),a=bo(),n=w(()=>a.data.value&&e.value?e.value.toLocaleLowerCase():void 0);return{isConnected:t,chainId:s,address:n}}function ke(e,t=6){if(!e)return"0x000...000";const s=t/2+2,a=e.length-t/2;return`${e.substring(0,s)}...${e.substring(a)}`}function Tt(e,t=6){if(!e)return"0x000";const s=Math.min(e.length,t+2);return e.length>s?`${e.substring(0,s)}...`:e}const dl=L({__name:"Button",props:{chainId:{}},emits:["click"],setup(e,{emit:t}){const s=t,{chainId:a}=Ft(),{switchChain:n}=Os(),i=l=>{if(l.stopImmediatePropagation(),e.chainId){if(a.value===void 0){Ae({text:"Wallet not connected",type:"error"});return}a.value!==e.chainId&&n({chainId:e.chainId})}s("click")};return(l,r)=>(_(),S("button",{onClick:i},[j(l.$slots,"default",{},void 0,!0)]))}}),ce=V(dl,[["__scopeId","data-v-f96d2ba9"]]),pl="/assets/crv-CKEIQw2g.png",ml="/assets/hat-D1qfnSjv.png",vl={},hl={class:"logo"};function _l(e,t){return _(),S("div",hl,t[0]||(t[0]=[d("div",{class:"visual"},[d("img",{src:pl}),d("img",{src:ml})],-1),d("span",null,"curve.monitor",-1)]))}const fl=V(vl,[["render",_l],["__scopeId","data-v-f6573bd5"]]),gl={class:"header"},bl={class:"buttons"},yl=L({__name:"Header",emits:["toggle-expansion","navigated"],setup(e,{emit:t}){const s=t;return(a,n)=>{const i=vt("router-link"),l=yo,r=ce;return _(),S("div",gl,[m(i,{class:"logo",to:"/",onClick:n[0]||(n[0]=c=>s("navigated"))},{default:g(()=>[m(fl,{class:"logo"})]),_:1}),d("div",bl,[m(r,{class:"lvl1",onClick:n[1]||(n[1]=c=>s("toggle-expansion"))},{default:g(()=>[m(l)]),_:1})])])}}}),wl=V(yl,[["__scopeId","data-v-3eb71c76"]]),kl={class:"selected"},$l={class:"item-wrapper"},Cl={key:0,class:"label"},Al=["onClick"],Sl={class:"chevrons"},Ll=L({__name:"Select",props:{options:{},selected:{},label:{}},emits:["input"],setup(e,{emit:t}){const s=t,a=P(!1);return(n,i)=>{const l=wo;return _(),S("div",{tabindex:"0",class:R(["select",{open:o(a)}]),onBlur:i[0]||(i[0]=r=>a.value=!1),onClick:i[1]||(i[1]=pe(r=>a.value=!o(a),["stop"]))},[d("div",kl,[d("div",$l,[j(n.$slots,"item",{item:n.selected,isSelected:!0},()=>[M(I(n.selected),1)],!0)]),n.label?(_(),S("div",Cl,I(n.label),1)):F("",!0)]),d("div",{class:R(["items",{open:o(a)}])},[(_(!0),S(te,null,oe(n.options,(r,c)=>(_(),S("div",{key:c,class:"item-wrapper",onClick:pe(u=>{a.value=!1,s("input",r)},["stop"])},[j(n.$slots,"item",{item:r,isSelected:!1},()=>[M(I(r),1)],!0)],8,Al))),128))],2),d("div",Sl,[m(l)])],34)}}}),Ke=V(Ll,[["__scopeId","data-v-f6a25e49"]]),Tl={class:"theme"},Il={class:"label"},Vl="theme",ql=L({__name:"SelectTheme",props:{themes:{default:()=>["dark"]}},setup(e){const s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",a=rs(Vl,e.themes.find(n=>n===s)??e.themes[0]);return H(a,n=>{window.document.documentElement.setAttribute("data-theme",n)},{immediate:!0}),(n,i)=>{const l=Ke;return _(),A(l,{class:"direction-up",options:n.themes.map(r=>r),selected:o(a),onInput:i[0]||(i[0]=r=>a.value=r)},{item:g(({item:r})=>[d("div",Tl,[d("div",Il,I(r),1)])]),_:1},8,["options","selected"])}}}),Pl=V(ql,[["__scopeId","data-v-917b2da7"]]),Dl={key:0,class:"modal"},Bl={class:"modal-popup"},Fl=L({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const s=t,a=n=>{n.code==="Escape"&&s("close")};return $e(()=>{document.addEventListener("keydown",a)}),ps(()=>{document.removeEventListener("keydown",a)}),H(()=>e.show,n=>{document.body.style.overflow=n?"hidden":""}),(n,i)=>(_(),A(Dt,{to:"body"},[n.show?(_(),S("div",Dl,[d("div",{class:"modal-mask",onClick:i[0]||(i[0]=l=>s("close"))}),d("div",Bl,[j(n.$slots,"default",{},void 0,!0)])])):F("",!0)]))}}),bt=V(Fl,[["__scopeId","data-v-801fe9d3"]]),Ml="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTM0A1t6AAACSklEQVRIS7WVTUhUURTHT4sWgZS4aNFGSgqTmUqiKNAoFMWhqbQ2gX1BGdKUChW1EEqiULEsDNSFOBJiaZHQ9EE1pGik6DAzYYsUochFoEExCIGPf/e8e4d5b+ZJb4bxwm/x3j3n/O69j3cPidEomF4hOgU0/Wec8DeUZoIEUfuXLuAXnVcJBx2Ery8I+JIac+8JblGjpVo+mwQ8ceUI4e6FWMLPYXvwajm+t4FQVUQozrEQ8MpbPXJ7PFldStiTtwWufQX/xZFJ+D1G0KYID2sJ4QELAb+IwsWv11yE3THs98OpJMY6loLvbwkF2xwqVY6O+62oO3/OxLVLHkQiERUBdLe349YZG4JvbwgVJcUqDQhOTmB/NmGky0yL+FYsio6Xg4NoOJ2CYGx0FB6XOZEJ9ImjPHVCRSUp2JSVibbmJp3aqrOWgk89KQoWJwneejPhp3LuQQ1hcxZhV85q7MjOQCgQUOUB3/Nn9gTLwcXLiwqhaZoqGRsL8/PYup4QFMdmzLEt+PGOkL9xg6n4x6EhPO7xos/r1YuPP0rMsy2Y8REqD7tVaWAqHIJznfwxmeiPFU/KgpEPflyusI41kpRg7SrCyaPlOgd25qdXsBgg+O6ZmX1lHWvEtoB3kCF2cNzt0inc7kj/ERm/AV9uSQu4WfTeJCyJKzc+kAVriHCsrERnb16upUATPLkdOz6T4JBTNos2cZ/HJy59lgswEplIjBu4I45x9zINhzsZT4T6ExPtMvta1rhRKZ9jAtXy0k1U0CFYWBmo/x+ShmnKzYg0NQAAAABJRU5ErkJggg==",Ul=L({__name:"Tooltip",emits:["show"],setup(e,{emit:t}){const s=t,a=P(!1),n=ne("trigger"),i=ne("content");H(a,p=>{s("show",p),p&&ko(()=>{u()})});let l;function r(){l&&(clearTimeout(l),l=void 0),a.value=!0}function c(){l&&clearTimeout(l),l=setTimeout(()=>{a.value=!1,l=void 0},50)}$e(()=>{u(),window.addEventListener("resize",u)}),ps(()=>{window.removeEventListener("resize",u)});function u(){if(!n.value||!i.value)return;const p=n.value.getBoundingClientRect(),v=i.value.getBoundingClientRect(),b=14,f=b,h=window.innerHeight-v.height-b,y=Math.min(Math.max(f,p.top-v.height-b),h),k=b,C=window.innerWidth-v.width-b,$=Math.min(Math.max(k,p.left+p.width/2-v.width/2),C);i.value.style.top=`${y}px`,i.value.style.left=`${$}px`}return(p,v)=>(_(),S("div",{class:R(["tooltip",{show:o(a)}])},[d("div",{ref:"trigger",class:"trigger",onMouseover:r,onMouseleave:c,onTouchstart:r,onTouchend:c},[j(p.$slots,"trigger",{},()=>[v[0]||(v[0]=d("img",{src:Ml},null,-1))],!0)],544),d("div",{ref:"content",class:"content",onMouseover:r,onMouseleave:c,onTouchstart:r,onTouchend:c},[j(p.$slots,"default",{},void 0,!0)],544)],2))}}),Mt=V(Ul,[["__scopeId","data-v-f1e38ac2"]]),Rl="/assets/injected-DW80ouY-.webp",xl="/assets/rabby-CG__llS3.svg",El="/assets/walletconnect-BCBhrtde.webp",Ol="/assets/coinbase-CsqSq8Nj.webp",Wl="data:image/webp;base64,UklGRuIJAABXRUJQVlA4INYJAABQTwCdASqQAZABPkkgi0WioYlv2BQCQllbuFzQQgaf+g1rnpf5Gfur/ouv54K8GftNl2/Iv+A/Lv+3/Az1Ffcz7gf6Qf4LqV+YD+Z/2j/X/5v3gP83/o/ap6AH6q9aL6AH6semp+ynwiftr+y3s0/f/sx/jj/K9rf94xtMRTr//O/0r3AdkOwdvIcINKVNH8k/1iFbtMZi3As2twLNrcCza3As2twLNrcCza3As2twLNrcCza3As2tv86K1Sn/lbircVbircVbircVvo+IuhKkUafH59MV0gaw7C4+BzmPvHSW19fTgrGhKkSavYZD9pi/odhBF0JUijT47/hKMBg+fEb2gVzAs2tv88VcYiCllb49nsYQU1OCoBuAYWxJTK6cAvmfF6ToV7TGYkChDXyhoIkIRefRbJzvwLNrcCgnFP2Q/qkUafZFGn2P2US1ujrAirQMy1GK9Rjtp3BWNCVIkguMYjQL8M0GC7rHYbpNhf7Pw/cNK9pjMW4InVWnB4X/Kux77oDrFRGA+nT9H3cLoHzKdTqvBI0ZmiFTZzgrGhe7JLHUqtRM0GoBm2fCx0NugEP4Rn0lYykUafZFEMb9XAMGmNg8NzQm1BviRj+a6sMp+fEqfnxKtY/jPIfd/PiVPz4lT89GHSxN0ChpiKYqCfZSKNPr0Cy/vRpI4ZobI5q9FrQ7HbiAYSfscvCdtHiI1LF0afZFEPlvIHHNrbK+oZB6WMmD/NwLNpR9oFY0HwmFm1uBZtZ4tcDAyFpj3As2s8cdym6UbW4Fm1uBPk2pFmhsjmr0Xk0kBP/PGNCVIo0+yKNPsijT7Io0+yKNPsijT7Io0+yKNPsijT7Io0+yKNNwAP7+Aa32O9NQP//+aiQ85uGbqX8qAMi2gBYHvABBejSCKVRwlwknSwekmWw/oN2DsM0EyRQhkdL8kDDzLGrtwD6vLGeABMYegTk2Uhde+N7ONK/joLprkk/CDZQKaf54kh4UalPgPeBRnphxNDfOSDkDVCjac4840+IEuJYs5IkjOs6sImPzP0b8iCttGKBb+kij60c3ifxYrl/3Xv0hjWIIbeyJ2o61OrdedMz7G8Y+V4d9G9FLwH4MaY8Y8GCnyJMfxZ/ULhYb9VE+x6juTHAyXvX0FlIEFkNBTxfTwLvKkP+0UCZqgugNIBLQog7iPFBonuG3MFiSKD6lVo+qTy4vaslgcrz/GSqAwXnyPxj6CxBfLlZb0ij+0uKoaIGm9ZUEFPEaXdz+BeVqg1I/os1mC7iKu5/rbDGjzB6c3akCTpY0OHZ4wR5PSRELDEuHkb6phpM+RGlLuVN8v26i5wH2ak8KmhBqp3SL8shBam1arJwsvNX69fdGsJSjMBX5NQZZCENAuE9vUvdMwSfJz9D3nS3aDmtVmxKjE6qy0Qsdtpcp0jWe1gU46CQbpsIDYqafR7LzcRxMTEoEGE5H8xdsFKPU/KG3jtjtylNoYQiqmdXcQokdTTxrjLzdzwWB9RiSKFM5v22/GI09Yr8fYSBKmGyQbaBUor/bu578Nm9OI5RhfMKnO09YxqD3x0/cTv53sZVEU7c/jELa5JY+uFXVME91SWsLQOTI63bx+3BV8gt7fCiHffGMMr4/SLihamFOtV+QYZUWHd5XuLXKEQTNG9GCtDao7iJVnWLlxqfnhP5kn54xJCx/gADSvAEDQwIomE3NQANF6/ZkVDu/MVcXcHOw8c3bGk+vuhT6f3Tr4NnUPPpa8+hG7YsyedNHK7l4qjvRnFSDhXEhuLq0Ah9hv8Sdlo1R6Sn/Ag112n1U82sWkpSk5IU6PdNFfaBXK8GR7C2Nm/KMWhnQ9pELP9TVr2XpJfuLJOB4Ttqh2aro90aus+ZPOyTlimgP8jVgUzy5hdO9HMwCPjxHGeyTJKQlxScBGPnU1PjBEgEyOWts0CE8V9x7E1+ee3gjyOCiDLhnYELTSKgdhhCbsf6NMjutWZ5XL1O/+Dd06WT62e38YKgGhhGBI07PXacDqA/XTdThkPYNCOFF26Dz2HMCt2/9Rel4gnmQKJjVIQLnEZeF2Nka2MsRuKmjNAAvaWTbVZe91xRYaCd2ml43cOr1YfxmlJ9hCpBPUZIkE6u07L8owldqs4TigKOZK0I7sng62s8U95/t3/oo6sA2eUUmedjAefrskjQjH5qsbhLJyesMEv9jxGV+GOtLyrtsxaWkPNcHBXXj3iZYGxZN6nIcLqaLlHPLPMnZjQQ8BojhDnKHz1lXMfMEHFe4hkgIyYE4KANL9hLLuv69qnxteZIG9m41ampmUsQlEpx3GFeIMX682UDHk1MHDLGoacoeaYSvz5rZF/WWYAlwl0nsB6gkKRihBrxfbKRJWbOQkodXo9nFAHN55srKEDIkskmsFAhtB8JlWPNfjOILKEFwQ2+LTmoG1KLs/Z6ltBt5TvPtEPzcGsLhbjXYk9Mnx7fWMkjrXZ+E0zX38b3zr9OjFrbOf+GZeo0PLtD+ZxcjEf5XqHI+ptX1Sj9yt27SwlUh2Pc9+QHOag7bIYxKtmp8wV39OP8RJb8Ag5x7IAXkgCSOxdcjFb0PKVaxWKyHQJf68yCmeyzp5vGQ/z1Mxgo8CmZl3OKn0onEfx2GWQgRCFQd7t5jx6j0JEET/agi2LjNP2FvxLe3d+6VlTrs+AGqrBPrK1v4bLgqvYwdPUgwDkeJ1gY/y+d4AuoSo8tkciHJQ/RQ//G0yHoqE/HoH6QfVTaZaXR68fqHs6uCDKayag/cIlpHpr31w1QBHu17ohviYmrFjwJ16jGU5hvY+wfq2w1s20oI9emMn0GkxN5IYpm57T8e0ntXyu1xKfsokhV+HWRUF3uC+mZHMVKCT194/Gz2DVqRfi3W8wvYwilf/bWjHFksIGs3HEaW+hESm6ciT3tfLhohZB9NnVtHS/aUk39m9cNCfFx/zzHzqZXOfLrSs0+rfugDRzcz7/vP93ksdi0Ks8xLNInhwkKzmmG8Dbyvw9p1osUJ/jxCjQtG1DxDBJIkD8AWIHnzPVugs+uZ47tknMAEfstIKysdwA/y3uep1Nfl2IZtm6NgIEZfQbTiEbWeXLX5DVgN+wG8TRnpGvH5Bkiuh1OCkaVtDapxLkFplC11AFeIPMSI2lwFalrsCGHC0obfjxkqbNcF3fPXO2KKbMLYG1ub7jWhiwhjMLPPPp2bzQPV89uu2MW0ZwcPPg7FzufEJPxJ/0RNeHAtpWafTVSeYerO76P+whWDfkOsC0UpaqMIceALU2CB+bc66l6aRePCvq+JW5q6SQYanHeHkhKZKiShTc7zKkksZXIyuRlcjKaUUkKEFrCTYCBipRk3lgB8IZ24X/CwgQAAAAAAAAAA",Nl={class:"buttons"},Kl={class:"connectors-body"},Hl={class:"connectors"},Ql=["src"],zl={key:1,class:"empty"},jl={class:"name"},Gl=L({__name:"WalletConnectButton",setup(e){const{connect:t}=$o(),s=Co(),a=["injected","walletConnect","coinbaseWalletSDK","safe"],n=w(()=>s.value.filter(u=>a.includes(u.id))),i=P(!1);function l(u){switch(u.id){case"injected":return Rl;case"walletConnect":return El;case"coinbaseWalletSDK":return Ol;case"safe":return Wl;case"io.rabby":return xl;default:return""}}function r(u){return u.id==="injected"?"Browser Extension":u.name}function c(u){t({connector:u}),i.value=!1}return(u,p)=>{const v=ce,b=U,f=bt;return _(),S("div",Nl,[m(v,{class:"button primary",onClick:p[0]||(p[0]=h=>i.value=!0)},{default:g(()=>p[2]||(p[2]=[M(" Connect Wallet ")])),_:1}),F("",!0),m(f,{show:o(i),onClose:p[1]||(p[1]=h=>i.value=!1)},{default:g(()=>[m(b,null,{default:g(()=>[d("div",Kl,[p[4]||(p[4]=d("div",{class:"title"},"Connect Your Wallet",-1)),d("div",Hl,[(_(!0),S(te,null,oe(o(n),h=>(_(),A(v,{key:h.id,class:"connector",onClick:y=>c(h)},{default:g(()=>[l(h)?(_(),S("img",{key:0,src:l(h)},null,8,Ql)):(_(),S("div",zl)),d("div",jl,I(r(h)),1)]),_:2},1032,["onClick"]))),128))])])]),_:1})]),_:1},8,["show"])])}}}),Xl=V(Gl,[["__scopeId","data-v-b6107ac7"]]),Zl={class:"wallet"},Yl={key:0},Jl={key:1},er={key:0,class:"info"},tr=L({__name:"Wallet",props:{labelPleaseConnect:{}},setup(e){const{disconnect:t}=Ao(),{isConnected:s,chainId:a,address:n}=Ft(),{switchChain:i}=Os(),l=w(()=>a.value===Oe.id),r=()=>{i({chainId:Oe.id})};return(c,u)=>{const p=ce,v=Ws;return _(),S("div",Zl,[o(s)?(_(),S("div",Yl,[o(l)?(_(),A(p,{key:1,class:"disconnect",onClick:o(t)},{default:g(()=>[m(v),M(" "+I(o(ke)(o(n))),1)]),_:1},8,["onClick"])):(_(),A(p,{key:0,class:"change primary",onClick:r},{default:g(()=>u[0]||(u[0]=[M(" Change Network ")])),_:1}))])):(_(),S("div",Jl,[m(Xl),c.labelPleaseConnect?(_(),S("span",er,I(c.labelPleaseConnect),1)):F("",!0)]))])}}}),sr=V(tr,[["__scopeId","data-v-819f0878"]]),ar={class:"bottom"},or={class:"buttons"},nr={href:"https://twitter.com/0xAlunara",target:"_blank"},lr=L({__name:"Bottom",emits:["navigated"],setup(e,{emit:t}){const s=t,a=et();return(n,i)=>{const l=So,r=ce,c=Lo,u=Pl;return _(),S("div",ar,[d("div",or,[d("a",nr,[m(r,{class:"lvl2"},{default:g(()=>[m(l)]),_:1})]),m(r,{class:"lvl2",onClick:i[0]||(i[0]=p=>{o(a).push("/code"),s("navigated")})},{default:g(()=>[m(c)]),_:1})]),m(u,{class:"themes",themes:["dark","light","chad"]}),m(sr,{class:"lvl2"})])}}}),rr=V(lr,[["__scopeId","data-v-413d717a"]]),_s=()=>Es("pageStore",()=>{const e=P([]),t=P([]);return{pages:e,routes:t}})(),ir=L({__name:"Navigation",emits:["navigated"],setup(e,{emit:t}){const s=t,a=_s(),n=P(!1),i=()=>{n.value=!1,s("navigated")};return(l,r)=>{const c=ul,u=ft;return _(),S("div",{class:R(["menu-desktop",{expanded:o(n)}])},[m(wl,{onToggleExpansion:r[0]||(r[0]=p=>n.value=!o(n)),onNavigated:i}),m(u,{class:"menu-content",expanded:o(n)},{default:g(()=>[m(c,{pages:o(a).pages,onNavigated:i},null,8,["pages"]),m(rr,{onNavigated:i})]),_:1},8,["expanded"])],2)}}}),cr=V(ir,[["__scopeId","data-v-9e33c0e2"]]),sa=Symbol();function ur(e){To(sa,e)}function N(){const e=Io(sa);if(!e)throw new Error("Theme not provided");return e}const dr=L({__name:"App",setup(e){const t=Ie(),s=ds();H(()=>s.fullPath,n=>{["/platform/crvusd","/platform/lending","/platform/pools"].some(l=>n.startsWith(l))||(t.show=!1)});const a=w(()=>({colors:Re.value,colorsArray:[Re.value.blue,Re.value.yellow,Re.value.green,Re.value.red,Re.value.purple]}));return ur(a),(n,i)=>{const l=qn;return _(),A(l,null,{navigation:g(()=>[m(cr,{class:"navigation"})]),_:1})}}}),pr=V(dr,[["__scopeId","data-v-ede787cd"]]),mr="/assets/404-DGbqGNxT.png",vr={},hr={class:"not-found"},_r={class:"not-found-container"};function fr(e,t){const s=U;return _(),S("div",hr,[d("div",_r,[m(s,null,{default:g(()=>t[0]||(t[0]=[M(" Where are you going, pilot? Page not found, please return home fren. ")])),_:1}),t[1]||(t[1]=d("img",{src:mr},null,-1))])])}const gr=V(vr,[["render",fr],["__scopeId","data-v-3d67162f"]]),br={class:"row-details"},yr=L({__name:"TableRow",props:{data:{},selected:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},expandSide:{default:"right"}},emits:["click"],setup(e,{emit:t}){const s=t,a=is(),n=w(()=>{var r;const l=a["row-details"];if(l){const c=(r=l()[0])==null?void 0:r.children;if(c)return Array.isArray(c)&&c.length>0}return!1}),i=()=>{s("click",e.data)};return(l,r)=>{const c=Pt,u=ft;return _(),S("div",{class:R(["row",{expanded:l.expanded}])},[d("div",{class:R(["row-data",{active:l.selected,expandable:o(n),"has-data":!!l.data}]),onClick:i},[l.data&&o(n)&&l.expandSide==="left"?(_(),A(c,{key:0,class:"expander"})):F("",!0),j(l.$slots,"row",{},void 0,!0),l.data&&o(n)&&l.expandSide!=="left"?(_(),A(c,{key:1,class:"expander"})):F("",!0)],2),l.data?(_(),A(u,{key:0,expanded:l.expanded},{default:g(()=>[d("div",br,[j(l.$slots,"row-details",{},void 0,!0)])]),_:3},8,["expanded"])):F("",!0)],2)}}}),wr=V(yr,[["__scopeId","data-v-4e240805"]]),kr={class:"table"},$r=["onClick"],Cr={key:1,class:"no-data"},Ar=L({__name:"Table",props:{columns:{default:()=>[]},rows:{default:()=>[]},rowsMin:{default:null},selectedRow:{default:null},expanded:{default:()=>[]},expandSide:{default:"right"},sorting:{default:()=>({order:"asc"})}},emits:["selected","sortColumn"],setup(e,{emit:t}){const s=t,a=w(()=>{if(e.rowsMin===null)return[];const p=Math.max(0,e.rowsMin-e.rows.length);return new Array(p)}),n=w(()=>e.columns.map(p=>typeof p=="string"?{id:p,label:p}:p)),i=p=>{p&&s("selected",p)},l=p=>{const v=p+1;return!!(e.rows[p+1]&&e.rows.findIndex(h=>h===e.selectedRow)===v)},r=p=>e.sorting.column===p.id&&e.sorting.order==="asc",c=p=>e.sorting.column===p.id&&e.sorting.order==="desc",u=p=>{if(!p.sort)return;const v=p.id===e.sorting.column&&e.sorting.order==="asc"?"desc":"asc";s("sortColumn",p.id,v)};return(p,v)=>{const b=cs,f=wr;return _(),S("div",kr,[p.columns.length>0?(_(),A(f,{key:0,class:R({"selected-below":l(-1)})},{row:g(()=>[(_(!0),S(te,null,oe(o(n),h=>(_(),S("div",{key:h.id,class:R(["column-header",{sortable:h.sort,sorting:h.sort&&p.sorting.column===h.id,[h.align||""]:!!h.align}]),onClick:y=>u(h)},[d("span",null,I(h.label),1),h.sort?(_(),A(b,{key:0,class:R(["sorting-arrow",{asc:r(h),desc:c(h)}])},null,8,["class"])):F("",!0)],10,$r))),128))]),_:1},8,["class"])):F("",!0),(_(!0),S(te,null,oe(p.rows,(h,y)=>(_(),A(f,{key:h,data:h,class:R({"selected-below":l(y)}),selected:p.selectedRow===h,expanded:p.expanded.includes(h),"expand-side":p.expandSide,onClick:i},{row:g(()=>[j(p.$slots,"row",{item:h},void 0,!0)]),"row-details":g(()=>[j(p.$slots,"row-details",{item:h},void 0,!0)]),_:2},1032,["data","class","selected","expanded","expand-side"]))),128)),(_(!0),S(te,null,oe(o(a),h=>(_(),A(f,{key:h}))),128)),!p.rowsMin&&(!p.rows||p.rows.length===0)?(_(),S("div",Cr,[j(p.$slots,"no-data",{},()=>[v[0]||(v[0]=M("No data"))],!0)])):F("",!0),p.$slots["row-aggregation"]&&p.rows.length>0?(_(),A(f,{key:2,class:"aggregation"},{row:g(()=>[j(p.$slots,"row-aggregation",{},void 0,!0)]),_:3})):F("",!0)])}}}),G=V(Ar,[["__scopeId","data-v-c623b610"]]),Sr={class:"dashboard"},Lr=["href"],Tr=["href"],Ir=["href"],Vr=L({__name:"Code.page",setup(e){const s=[{name:"veFunder",contracts:[{contract:Js,description:"Gauge Factory"},{contract:ea,description:"Gauge Controller"}]}],a=[{name:"Llama Airforce",url:"https://github.com/Llama-Airforce/Llama-Airforce",description:"This website's front-end, excluding the Union"},{name:"Phil's CurveMonitor",url:"https://github.com/phil-svg/CurveMonitor",description:"Phil's code for CurveMonitor"},{name:"Subgraphs",url:"https://github.com/convex-community/convex-subgraph",description:"The Graph subgraphs related to Curve, Convex, Votium and more"},{name:"Tickets",url:"https://github.com/orgs/curve-data-analytics/projects",description:"Tickets"}],n=[{name:"Curve Prices API",url:"https://prices.curve.fi/feeds-docs",description:"Curve utility API co-developed by CurveMonitor"},{name:"LAF / Curve API (Legacy)",url:"https://api-py.llama.airforce/curve/v1/docs",description:"Custom analytics API"}],i=l=>{switch(l.network){case"arbitrum":return l.gnosis?`https://app.safe.global/home?safe=arb1:${l.contract}`:`https://arbiscan.io/address/${l.contract}`;case"ethereum":default:return l.gnosis?`https://app.safe.global/home?safe=eth:${l.contract}`:`https://etherscan.io/address/${l.contract}`}};return(l,r)=>{const c=G,u=U;return _(),S("div",Sr,[m(u,{title:"Repositories"},{default:g(()=>[m(c,{class:"repositories-table",rows:a,columns:["Repository","Description"],title:"Yolo"},{row:g(({item:p})=>[d("div",null,[d("a",{href:p.url,target:"_blank"},I(p.name),9,Lr)]),d("div",null,I(p.description),1)]),_:1})]),_:1}),m(u,{title:"APIs"},{default:g(()=>[m(c,{class:"apis-table","columns-data":"apis-columns-data",rows:n,columns:["API","Description"]},{row:g(({item:p})=>[d("div",null,[d("a",{href:p.url,target:"_blank"},I(p.name),9,Tr)]),d("div",null,I(p.description),1)]),_:1})]),_:1}),(_(),S(te,null,oe(s,p=>m(u,{key:p.name,title:p.name},{default:g(()=>[m(c,{class:"contracts-table","columns-header":"1fr","columns-data":"contracts-columns-data",rows:p.contracts,columns:["Contract","Description"]},{row:g(({item:v})=>[d("div",null,[d("a",{href:i(v),target:"_blank"},I(v.contract),9,Ir)]),d("div",null,I(v.description),1)]),_:2},1032,["rows"])]),_:2},1032,["title"])),64)),m(u,null,{default:g(()=>r[0]||(r[0]=[d("div",{class:"notices"},[M(" TradingView Lightweight Charts™ Copyright (с) 2023 TradingView, Inc. "),d("span",null,[d("a",{href:"https://www.tradingview.com/",target:"_blank"}," https://www.tradingview.com ")])],-1)])),_:1})])}}}),qr=V(Vr,[["__scopeId","data-v-3a7361fb"]]);function Pr(){const e=_s(),t=[{path:"/code",component:qr},...e.routes.flatMap(a=>a),{path:"/:pathMatch(.*)*",name:"NotFound",component:gr}];return Vo({history:qo(),routes:t})}const Dr="/assets/llama-cloud-transparant-BquaG1Iu.png",Br={key:0,class:"value"},Fr={key:1,class:"value"},Mr=["innerHTML"],Ur={key:0,class:"value"},Rr={key:1,class:"value"},xr=["innerHTML"],Er={class:"labels"},Or={class:"label"},Wr={class:"label-second"},Nr=L({__name:"KPI",props:{label:{default:""},labelSecond:{default:""},tooltip:{default:""},tooltipType:{default:"icon"},value:{},hasValue:{type:Boolean,default:!1}},setup(e){return(t,s)=>{const a=Mt;return _(),S("div",{class:R(["kpi",{disabled:!t.hasValue}])},[d("div",{class:R(["value-container",{underline:t.tooltip&&t.tooltipType==="underline"}])},[j(t.$slots,"default",{},()=>[t.tooltip&&t.tooltipType==="underline"?(_(),A(a,{key:0},{trigger:g(()=>[t.hasValue?(_(),S("span",Br,I(t.value),1)):(_(),S("span",Fr," ? "))]),default:g(()=>[j(t.$slots,"tooltip",{},()=>[d("span",{innerHTML:t.tooltip},null,8,Mr)],!0)]),_:3})):(_(),S(te,{key:1},[t.hasValue?(_(),S("span",Ur,I(t.value),1)):(_(),S("span",Rr," ? "))],64))],!0),t.tooltip&&t.tooltipType==="icon"?(_(),A(a,{key:0},{default:g(()=>[d("span",{innerHTML:t.tooltip},null,8,xr)]),_:1})):F("",!0)],2),d("div",Er,[j(t.$slots,"label",{},()=>[d("div",Or,I(t.label),1)],!0),j(t.$slots,"label-second",{},()=>[d("div",Wr,I(t.labelSecond),1)],!0)])],2)}}}),ve=V(Nr,[["__scopeId","data-v-c4934141"]]),Kr={class:"async-value"},Hr={key:0,class:"symbol"},Qr={class:"value"},zr={key:1,class:"unit"},jr={key:2,class:"symbol"},Gr="|/-\\",Xr=L({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1}},setup(e){let t=0,s=0;const a=P("|"),n=w(()=>e.value?W(e.value,typeof e.precision=="function"?e.precision(e.value):e.precision,e.type??""):e.value===0&&e.showZero?"0":e.value===null||e.value===void 0?a.value:"?"),i=w(()=>e.precision===1/0?"":!e.value||!isFinite(e.value)?e.showUnit?z(0):"":z(e.value));return H(()=>e.value,l=>{if(clearInterval(s),t=0,l)return;const r=()=>{t=(t+1)%4,a.value=Gr[t]};s=window.setInterval(r,250)},{immediate:!0}),(l,r)=>(_(),S("div",Kr,[l.showSymbol&&l.type==="dollar"?(_(),S("span",Hr," $ ")):F("",!0),d("span",Qr,I(o(n)),1),l.showUnit?(_(),S("span",zr,I(o(i)),1)):F("",!0),l.showSymbol&&l.type==="percentage"?(_(),S("span",jr," % ")):F("",!0)]))}}),X=V(Xr,[["__scopeId","data-v-1fac998b"]]),Zr=["crvusd","lending","pools","router","dao"];function Ce(e){const[t,s]=e.split("T"),[a,n,i]=t.split("-").map(Number),[l,r,c]=s.split(":").map(Number);return Date.UTC(a,n-1,i,l,r,c)/1e3}const Yr=["ethereum","arbitrum","optimism","fantom","avalanche","xdai","matic","harmony","moonbeam","base","polygon","fraxtal"],Jr="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_103_26)'%3e%3cpath%20d='M11.9974%200L11.8364%200.546928V16.4161L11.9974%2016.5767L19.3636%2012.2225L11.9974%200Z'%20fill='%23343434'/%3e%3cpath%20d='M11.9977%200L4.63135%2012.2225L11.9977%2016.5767V8.87428V0Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9975%2017.9713L11.9067%2018.082V23.7348L11.9975%2023.9997L19.3681%2013.6194L11.9975%2017.9713Z'%20fill='%233C3C3B'/%3e%3cpath%20d='M11.9977%2023.9997V17.9713L4.63135%2013.6194L11.9977%2023.9997Z'%20fill='%238C8C8C'/%3e%3cpath%20d='M11.9976%2016.5767L19.3637%2012.2225L11.9976%208.87427V16.5767Z'%20fill='%23141414'/%3e%3cpath%20d='M4.63135%2012.2225L11.9977%2016.5767V8.87427L4.63135%2012.2225Z'%20fill='%23393939'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_103_26'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ei="data:image/svg+xml,%3csvg%20width='1503'%20height='1504'%20viewBox='0%200%201503%201504'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='287'%20y='258'%20width='928'%20height='844'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M1502.5%20752C1502.5%201166.77%201166.27%201503%20751.5%201503C336.734%201503%200.5%201166.77%200.5%20752C0.5%20337.234%20336.734%201%20751.5%201C1166.27%201%201502.5%20337.234%201502.5%20752ZM538.688%201050.86H392.94C362.314%201050.86%20347.186%201050.86%20337.962%201044.96C327.999%201038.5%20321.911%201027.8%20321.173%201015.99C320.619%201005.11%20328.184%20991.822%20343.312%20965.255L703.182%20330.935C718.495%20303.999%20726.243%20290.531%20736.021%20285.55C746.537%20280.2%20759.083%20280.2%20769.599%20285.55C779.377%20290.531%20787.126%20303.999%20802.438%20330.935L876.42%20460.079L876.797%20460.738C893.336%20489.635%20901.723%20504.289%20905.385%20519.669C909.443%20536.458%20909.443%20554.169%20905.385%20570.958C901.695%20586.455%20893.393%20601.215%20876.604%20630.549L687.573%20964.702L687.084%20965.558C670.436%20994.693%20661.999%201009.46%20650.306%201020.6C637.576%201032.78%20622.263%201041.63%20605.474%201046.62C590.161%201050.86%20573.004%201050.86%20538.688%201050.86ZM906.75%201050.86H1115.59C1146.4%201050.86%201161.9%201050.86%201171.13%201044.78C1181.09%201038.32%201187.36%201027.43%201187.92%201015.63C1188.45%201005.1%201181.05%20992.33%201166.55%20967.307C1166.05%20966.455%201165.55%20965.588%201165.04%20964.706L1060.43%20785.75L1059.24%20783.735C1044.54%20758.877%201037.12%20746.324%201027.59%20741.472C1017.08%20736.121%201004.71%20736.121%20994.199%20741.472C984.605%20746.453%20976.857%20759.552%20961.544%20785.934L857.306%20964.891L856.949%20965.507C841.69%20991.847%20834.064%201005.01%20834.614%201015.81C835.352%201027.62%20841.44%201038.5%20851.402%201044.96C860.443%201050.86%20875.94%201050.86%20906.75%201050.86Z'%20fill='%23E84142'/%3e%3c/svg%3e",ti="/assets/arbitrum-Z8VMulXH.png",si="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23fff;fill-rule:evenodd;}.cls-2{fill:%2313b5ec;}.cls-3{mask:url(%23mask);}%3c/style%3e%3cmask%20id='mask'%20x='10'%20y='6'%20width='93.1'%20height='20'%20maskUnits='userSpaceOnUse'%3e%3cg%20id='a'%3e%3cpath%20class='cls-1'%20d='M10,6h93.1V26H10Z'/%3e%3c/g%3e%3c/mask%3e%3c/defs%3e%3ctitle%3efa%3c/title%3e%3cg%20id='Layer_2'%20data-name='Layer%202'%3e%3cg%20id='Layer_1-2'%20data-name='Layer%201'%3e%3ccircle%20class='cls-2'%20cx='16'%20cy='16'%20r='16'/%3e%3cg%20class='cls-3'%3e%3cpath%20class='cls-1'%20d='M17.2,12.9l3.6-2.1V15Zm3.6,9L16,24.7l-4.8-2.8V17L16,19.8,20.8,17ZM11.2,10.8l3.6,2.1L11.2,15Zm5.4,3.1L20.2,16l-3.6,2.1Zm-1.2,4.2L11.8,16l3.6-2.1Zm4.8-8.3L16,12.2,11.8,9.8,16,7.3ZM10,9.4V22.5l6,3.4,6-3.4V9.4L16,6Z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ai="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoESURBVHgB7Z3PTxzZEcerXoNBOc0eN5KhfYgUrY2MN9iyLBvP3pLTQpRgJ5fFh0iwewD/BYZbcjIrJVmUHAyXxGZXMpyinDzAKrEUogySiXzbBuWeueyKX91vq970DDP983VPT9NgPpLFuH/3d6rr1at6rwehINyeGjN7obeMgKYUOAgSTAQw3dWmZ/Ma/5MAFv9FKbcl2lX7WFj/+POXVSgACKeEEtLpGwMD7tNFlGlRCbKBBa+CDWu2dCqnJXSuwpZnx0rO4aUZKbHsipkHFqBcOnTE8uvF5xbkRC7C3p36RRnReJKjmIGQJVdAOsubi18uQZfpqrBFETQAS0pnvpsCd0XYjAS1VOOEqoFqRyp/XEKQ9BeHIT2WtOXjzT+trELGZCqs8qEHfU/o42yiHUFWQcp1CUb1iB7XpL7wzm9+PWz0HJsUHZQliutJv1CJsHTk4HyWPjgzYe9NT4xRqPQMNFt35e+o5TZ+cLBUWVitQYaUpx6aNouL8mO6wTHN3TJ1Dx0Lm9BKa2Qen4v+/YWsxQyjITKi5Gs047Zn6zUuHTzu9Po6EpYv2hHOS7qaOD+Xu6BB3Jt6OKkpsHUo8aNOXENqYdmv9fTYLyH6IgshqJd70w9m6cZnIPrareNjZzxtByOVsNzqCzRY1FB/yj70SOKjPIPyJKinDZw5QPwkckMhJzf+sLIMCUks7OhnE5+Ag0sRm3CXcn7zixcLcAZw3cNTiGp0U4ibSFj38f9PxCb0+Bj0+PylEIkQXZT1onwFUa4hobjawronZ1GDv1mUVXHp8KMi+dIkcHRjH/Q9iwrPHGrQvl58XgENtISN/UYlLlMDNXtWRW1ldOrBAqkyE7K6RtHCDZ12Q0vY0ekH30CYqGSpG39cuQHnCIoaXkX03izRd3AjzogE6EAWGbFuePTTiSdwTuB7iewSkxY6T6YBGuxuvakMjgxRjzXshFgevHUVdv+1sw5nGGUgEudCN5A4v7H4fA400BKWOe/iZikqE+oKuJX0LlMHphNA+MnnzqJbSCtqkEYNAi2We1Zg9/7t/ZGhtf9tvWnzJ+fNclOLypGSbfzz8sjQ9t7WG8u7PtBiqbvK6T/zEoVYt+kA3vXnxXI7EtUNPwXKZ0G7+iy23sWDSfe/JQNh7DxabhaiuotKAyMf7O5t/bett+mzWDet1sq5s9wMRVUgCt89tlmsWwWYAj/nxnKzFtWlNPDh1e29f++8bSzwWCyGdeWYM2+5XRK1jtGundG6M1ldXKpPWe6Vuz9atl6/3W9dUXTL7SSk4tYfYqoOPByKIoT1RoTQtFjbkXpFt4guXVEtt5Pgn++V8sufgwYC7KaGTYs1b137K8RXWK2NxRfjURsUzXKz6FHtbe28Hrh5rYxxtTLEH+9u7fyOPyqLLdf9ZvROfA1UHgYNimK5WXZTZdT9nFC6O/WwzB+UxV7+8OokCvhpzE7W5uLKo9YF/IVcvnn15Q/JtxQtWuikoRq49cGr938y9PfWe2LfqWO1CHKXrLZS97EGfAwxBFkrtZQznGIrWrTQcetPqdDegB6VjtVKxPv8VwlL4sSOfzoCo+K9CDgZpFGYUCyrkIoN5s5nPx9s3aanf597V5G5WNaSIwlx59NfsqhxjVbVW46w/cngUxc36zi1x+5pc31uhBBXKC3Bt72mMCSaEIeEXe8igU6Q+zg1cbsT/PtH+KCEbYjBNmCYkjPxbkCNBvTgAIZZee7idq1HhXDddygnYFipbzcWNmBnHUR065ibuF3tpga5SIEalWhhigjL65Sui9tlUZl05XyEQSE0OgagRk77lumMdumauDmIyviFdaSOIZaE1BooLEzvEqnhxF0yFzcnUXmsrM94qCNlxu9JwoKOsAj3vYscEBXQJzNx8xJVcSzX/IfXapNKODr9QGpsGDhuKWbESBChA3pHpx7Ogb96cQLKOfU3L1E54fTFiysBx/lGZ2e9kTBqQ6fsXaaZmGilI8vNUdTALrydwIi0haWU2Iy3jq4sWOrlKltIL24YWYuKsBQ0yQOjnigPAiE+4HUpOfuXZr0LKT87Gzm2K5jsxM1YVB7kx5M7vIu5ep3gWDV9i1UnxZkQMSZTWS5PDAlAW9yIfKpdz06ZkAQejhowxpe/pCTWCiyso2+xTKk3ZIACWy75XE5aWKABP26HjgitRmj43MgktcHXIqXuk2RJkONsIEFlJ1qnNZXpZHuwcHRqYil2goOfBWoxH4et5Cw613/cWYJmywl5uvt6kklzgdFCgsx/+2Q6aUKzpylrPBvSAWM1apR2bHgXhIQ1FpZnjqTJKkWKmyVt4iYQtePzphGVkXIe3VkjzyAFWU45UlOchHjK7iE0zgXXRXhw34PwilzRchazdfh48rDvKfUuJyEF0pbjmCToDaGjOajqJvbpJk7GiyWaFdgQtTE7stMvO8HsxVDEsXMD+QP1vv4Pnb86RAnMJRydm6pPwhOULMfJgHNriesVtRVuHKVjL3+9+FUFYlAzZr7rm+TaX8KeZBA1cpHvKWHvT0+8lIB6AzZ0oFiQjldFR+5Si2o1FwOaVGy7rvkOmEhxo0T1oMopyNP2HcqlCqfeaDqihIYcVFXk+GPoQw0XRUhjPeocNq6jAdkJSxeqCpTI1W9sW4X6R2l0InziJhCVKakvErGMqtjvhu6GezVamRJ9JDirzbMYAlehmPh6aAlFzZ1GNbtpQCkyVXmi3EJ//36tyKISVfKvas5bs0vLPgiKi7LcgovKGbFmt74prOg/7Dj+6zJmkUVlWge1NIV1ByNU4IJUcHjX2si2ZbdkmlzoBQoK5doSPr7op+CNWFHxlXF8+dgLq01OUBknMF6/sNoEhLxWILCCcGG1+oQl6wOFrRcJtbPv7yzeSKCV0JoXxbVcOEw3dundwOL3IYatDBW2HtfKR3BBINxgRaU1I18Esbe183Zw5Np71MTdhgtOoIr05uLKb6M2iS1/i/6DOc2Rhe8KlhpLEUOssOwShFQtnwUXqCybzobaeWf3LXE8sqRbA5WLjvY7txjtkTD8Wr13uTFzJI4nKVBqv8WI4cZsYGRolyou2ZVxzgA8wodi+0RVlkTCMntbb6oDN69uUy2Lp4j2w/mmRpb6s6SiMglqe+1ovpj3LNPRm0VTC8ukHipZdCixEjYiR/sQkAExb7A8W1Dwz7H7qb78vJUshuacMpZTb6QqkAGJG68wuFG7MjK0RiEZdYGLXfTzUbfSX238/qu3kBGZWWwrdd/Lo7WLLTAXTzn3nJWVttIVYRsU1T10U9AGXRW2QX2EtzOZYuR4puQhaINchG1w8vMkzkxebqKbv2kTRa7CtuL5oR0W2YRsqFHJZBWOYTtvMVs5NWG9KKHRGeYXU5z8GKX6vS71211wklWruf/qk0WQPpOIYEjrSIpqUX4p5HsIBnqmjYFrhwAAAABJRU5ErkJggg==",oi="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20180%20179.51'%3e%3cdefs%3e%3clinearGradient%20id='linear-gradient'%20x1='202.93'%20y1='544.7'%20x2='203.8'%20y2='545.57'%20gradientTransform='matrix(180,%200,%200,%20-179.51,%20-36456,%2098005.23)'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2300aee9'/%3e%3cstop%20offset='1'%20stop-color='%2369fabd'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle%3eharmony-one-logo%3c/title%3e%3cpath%20id='Shape'%20d='M201.17,60a38.81,38.81,0,0,0-38.84,38.71v42.92c-4,.27-8.09.44-12.33,0.44s-8.31.17-12.33,0.41V98.71a38.84,38.84,0,0,0-77.67,0V201.29a38.84,38.84,0,0,0,77.67,0V158.37c4-.27,8.09-0.44,12.33-0.44s8.31-.17,12.33-0.41v43.77a38.84,38.84,0,0,0,77.67,0V98.71A38.81,38.81,0,0,0,201.17,60ZM98.83,75.86a22.91,22.91,0,0,1,22.92,22.85v45.45a130.64,130.64,0,0,0-33,9.33,60,60,0,0,0-12.8,7.64V98.71A22.91,22.91,0,0,1,98.83,75.86Zm22.92,125.43a22.92,22.92,0,1,1-45.84,0V191c0-9.09,7.2-17.7,19.27-23.06a113,113,0,0,1,26.57-7.77v41.12Zm79.42,22.85a22.91,22.91,0,0,1-22.92-22.85V155.84a130.64,130.64,0,0,0,33-9.33,60,60,0,0,0,12.8-7.64v62.42A22.91,22.91,0,0,1,201.17,224.14ZM204.82,132a113,113,0,0,1-26.57,7.77V98.71a22.92,22.92,0,1,1,45.84,0V109C224.09,118.05,216.89,126.66,204.82,132Z'%20transform='translate(-60%20-60)'%20style='fill:url(%23linear-gradient)'/%3e%3c/svg%3e",ni="/assets/moonbeam-CHDPiRRO.png",li="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2038.4%2033.5'%20style='enable-background:new%200%200%2038.4%2033.5;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%238247E5;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M29,10.2c-0.7-0.4-1.6-0.4-2.4,0L21,13.5l-3.8,2.1l-5.5,3.3c-0.7,0.4-1.6,0.4-2.4,0L5,16.3%20c-0.7-0.4-1.2-1.2-1.2-2.1v-5c0-0.8,0.4-1.6,1.2-2.1l4.3-2.5c0.7-0.4,1.6-0.4,2.4,0L16,7.2c0.7,0.4,1.2,1.2,1.2,2.1v3.3l3.8-2.2V7%20c0-0.8-0.4-1.6-1.2-2.1l-8-4.7c-0.7-0.4-1.6-0.4-2.4,0L1.2,5C0.4,5.4,0,6.2,0,7v9.4c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l5.5-3.2l3.8-2.2l5.5-3.2c0.7-0.4,1.6-0.4,2.4,0l4.3,2.5c0.7,0.4,1.2,1.2,1.2,2.1v5c0,0.8-0.4,1.6-1.2,2.1%20L29,28.8c-0.7,0.4-1.6,0.4-2.4,0l-4.3-2.5c-0.7-0.4-1.2-1.2-1.2-2.1V21l-3.8,2.2v3.3c0,0.8,0.4,1.6,1.2,2.1l8.1,4.7%20c0.7,0.4,1.6,0.4,2.4,0l8.1-4.7c0.7-0.4,1.2-1.2,1.2-2.1V17c0-0.8-0.4-1.6-1.2-2.1L29,10.2z'/%3e%3c/g%3e%3c/svg%3e",ri="/assets/optimism-CcABTbCu.png",ii="/assets/base-AohAhS4D.webp",ci="/assets/polygon-GPEdhIuq.png",ui="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABI1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAAD////8/PzHx8fb29swMDDz8/P19fWzs7NHR0fm5ua2trYdHR3R0dHY2NhdXV3t7e3p6end3d2Ojo47Ozv5+fnNzc2/v78iIiJbW1tzc3P39/fk5ORZWVkzMzMVFRWtra2lpaXh4eHT09OGhoZOTk4/Pz84ODjw8PCioqKfn5+SkpJ5eXm7u7t6enpxcXFoaGihoaFjY2Po6OjLy8soKCgLCwuAgIDCwsKXl5dsbGzr6+vV1dVQUFBM4z+pAAAAI3RSTlMAzvr08ejf2dW3lJGNTUlGIA0KBiTIxLqsppZxX1tTLiwnGBXchpcAAAbqSURBVHjavJdpW9pQEIXDpsiireC+tDongQCypBEiKCggbohKta1Ln/r/f0UTQgEJIeQS+n6FJ+fcyZ05E46FSDS8FVxf9fu8bsDt9flX14Nb4WiE+x982gmseDASz0pg5xM3S5YXA/OwYD6wuMzNhEh4w4seihw7KqZr9cfHei1dPIrJCnp4N8LOv429kA9dbhrJ/HGVhqge55ONG3TxhfYclV9agE4i25RoDFIzm4DOwpJj8rsudBCFiwxZkrkQRHRw7Toiv6jL87lWiSak1MrxuoXFqeW/rumlL0pkC6mYgMba16nkP4fcUBGTV2Sbq6QIFXfo8xR3bw4q5XSBmCiky1CZW2IdO5tQ4YVLYuZS4KGyyTSavvihUrmjqbirQMX/xb7+tkc7frJEU1JK8gA823b1g1D50SYHaP+AStDe7e9MPiFOjhAXOpPRRjfsuwAot+QYtwoA1/7Eka9lrvhADvIgakk94bIQ1bpflshRJBnAXHSi82v65ylymNS55mCCGuxr9T+8Jse5PtTewr7l/Xdp+nG2q/ZTp2nSDJoDl1UvLGj1Zzy/AJ0jsxqca91oPX/kFM3GAKVkq4m0DUCUaFYGSBIBbI/JHw+gPNDsDNCDAnhMk2lZy79bmqUButWy0SydtfwXyHEDxj9tmuw/Wv7FZ20grmXj0sgJMAfwbZq1AWrzwNyoaRACkKTZG6AkgNCI/dsNHJT+h4HSAeA2butrAD/d/vc9NpkBuuOBNcP3z5QdUKjJ+Acfa1UtSzX8zeQCyuz793NdxAcOXsZu62XANfT9CSDNnvU5GCiWyJw0gN3hAogFYuRUxghiY55XEIdKsDRNCx5/gxGLrSI5NI0WgMSVw/pA9pnMuEp82Az2ABQd1weaZEoRwN7gEOQlxvc/qC8L6fusiB4J876S+IFxGPEBOVZ9Q+v9avYtjClrDvBFOJ0wgBaxcDmgn/1FXd4r6FI23y5bAMKczgYgsqXAzwH9zMAV6/Vl7aRP9WMiiMBGdxHysk7hZ7GvXxqa9kYKhnnsXe7FwAWxkFGM59dpWBu46AVCAEhkiImKiT69WRvIJIAApzEPZImNNxN9OrY2QFlgXtP/pE8MNuplgH811u+atzbQBKB9rO4AkIiVq3zrlIy8T1ABCcCOfgVuyGkuJjBAN/olWAEaLEe/a73lT84s1kPwfQwGGsCKOoc9DEl88irz0OAr99/JyJMCnVi8z6hM9kS4KIA82eLlEIPkTmiIs/PeJKQx5AFEO0FwTDY4EzAE/xr/+I9Y75f3sUneiYMtQKnayb8DGKmcGvWtF/SqAmxxQUBmzf8+305H6StPNBYZCHLrQGz6/ae/T8T7+paXOwasc6vAEfP5+/Apo37MKmGOgFXODxTZzl8Wy+jze7j+OLBcc4uAn/MBaQZ9MflUpUz7PgEd5dqgnyIr0oCP8wI1+/X/8+/plzl0EBj0qQZ4OTdQt3F+Q/5mBKg04tr7t6lPdcDNAXi0c35j/rdryRdi0adHAH9ZNdechKEoCO/ATcj7lRBEDAaIQMFISEq0SRHE/e/CH0pHL7f5PCd0AzNt7z2PmREB4/uP0lNzqBpu/P4ioF9gw3+afd/0fTGCmPD1C3QIAT+Yf9vn05j9NKg7E74Ooa6h7f8nkkPa2206q9jwdQ3/U4g6p8vzF7QkM74KEZfieT3A18jD+FyKuRktYvcvmzrxw2bE7bjTit7/dZTBLMDndswDSa9k//uIKEOrcPDkgQRHsvmmbP9rpMH20XyLaDI0kuFQuiu+bn55PQ8twQ/ahtfXUBofy4+94ikkwKiO+7hO+93BYLZq70xvr7E8vphEhMfkmouTFhOtZkQgvSa0VjMtp0RgGdEnlv2k9uqB1nKq9dxGQP3/wSOuaD2XQAEE1DDC/r/JzdASKCTRIIFuHN+lL0mikUiFBCrvJfiVo19CuCmT6dKhHhWiAF8bgfmRTMdC5f5UbJpqGZo/nSKvhEqWaheCej6X4MTQf0GqZbF61NQyNp7kt/lkPDXgo1jNcv3yzxLaqprmD5br2bCY193zHxgWbNlIlPfjs2XDplW28eGDaQW2HQpDQ9r/wbYzGZeNQzWURFLSP8i4NFq3k8/qb/gV1T+0bu3mdVYrqnIvIww2rx32/f3ZjWMItu/tAQY/AQ4wcITDT4AjHBxi8RPgEAvHePwEOMbDQSY/AQ4ycZTLTwCjXMYwm58Ah9k4zucnwHE+DjT6CXCgkSOdfgIQ6XSHWl++mrdjGwBgGIZhR/b/Xzp06B4gEP2EF/G8TY7gR6161tuHzX3a3cftfd7fA4eeeADIpWc+PXTqqReA3XruB4BHgHwC6BVgvwB8Bui3gN83+P8FeDI7nekABC8AAAAASUVORK5CYII=";function Is(e){return{ethereum:Jr,arbitrum:ti,optimism:ri,fantom:si,avalanche:ei,xdai:ai,matic:li,harmony:oi,moonbeam:ni,base:ii,polygon:ci,fraxtal:ui,all:""}[e]}const di=e=>e.data.map(t=>t.name).filter(t=>Yr.includes(t)),pi=e=>({chain:e.chain,total:{tvl:e.total.total_tvl,tradingVolume24h:e.total.trading_volume_24h,tradingFee24h:e.total.trading_fee_24h,liquidityVolume24h:e.total.liquidity_volume_24h,liquidityFee24h:e.total.liquidity_fee_24h}}),mi=e=>e.data.flatMap(t=>t.transactions.map(s=>({chain:t.chain,timestamp:Ce(s.timestamp),type:s.type,transactions:s.transactions}))),vi=e=>e.data.flatMap(t=>t.users.map(s=>({chain:t.chain,timestamp:Ce(s.timestamp),type:s.type,users:s.users}))),Ct="https://prices.curve.fi";class hi extends Te{async getSupportedChains(){const t=await this.fetch(`${Ct}/v1/chains/`);return di(t)}async getChainInfo(t){const s=await this.fetch(`${Ct}/v1/chains/${t}?page=1&per_page=1`);return pi(s)}async getTxs(){const t=await this.fetch(`${Ct}/v1/chains/activity/transactions`);return mi(t)}async getUsers(){const t=await this.fetch(`${Ct}/v1/chains/activity/users`);return vi(t)}}const Ut=new hi;function aa(){return{initialData:[],initialDataUpdatedAt:0}}function _i(){return E({queryKey:["chains-supported"],queryFn:()=>Ut.getSupportedChains(),initialData:["ethereum"],initialDataUpdatedAt:0})}function oa(e){return E({queryKey:["chain-info",e],queryFn:({queryKey:[,t]})=>Ut.getChainInfo(t),enabled:w(()=>!!e.value)})}function fi(){return E({queryKey:["chains-txs"],queryFn:()=>Ut.getTxs(),...aa()})}function gi(){return E({queryKey:["chains-users"],queryFn:()=>Ut.getUsers(),...aa()})}const bi=e=>({name:e.collateral_token.symbol,address:e.address.toLocaleLowerCase(),factory:e.factory_address.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),rate:e.rate,borrowed:e.total_debt,borrowable:e.borrowable,collateral:e.collateral_amount,collateralUsd:e.collateral_amount_usd,loans:e.n_loans,collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},stablecoin_token:{symbol:e.stablecoin_token.symbol,address:e.stablecoin_token.address.toLocaleLowerCase()},fees:{pending:e.pending_fees,collected:e.collected_fees}}),yi=e=>({timestamp:new Date(e.dt).getTime()/1e3,rate:e.rate,nLoans:e.n_loans,minted:e.minted,redeemed:e.redeemed,totalCollateral:e.total_collateral,totalCollateralUsd:e.total_collateral_usd,totalStablecoin:e.total_stablecoin,totalDebt:e.total_debt,priceAMM:e.amm_price,priceOracle:e.price_oracle,borrowable:e.borrowable,discountLiquidation:e.liquidation_discount,discountLoan:e.loan_discount}),wi=e=>({address:e.address.toLocaleLowerCase(),pool:e.pool,pool_address:e.pool_address.toLocaleLowerCase(),pair:e.pair.map(t=>({symbol:t.symbol,address:t.address.toLocaleLowerCase()})),active:e.active,total_debt:e.total_debt,total_profit:e.total_profit}),ki=e=>({timestamp:Ce(e.timestamp),market:e.market,supply:e.supply,borrowable:e.borrowable}),At="https://prices.curve.fi";class $i extends Te{async getMarkets(t,s){return(await this.fetch(`${At}/v1/crvusd/markets/${t}?fetch_on_chain=true&page=${s}&per_page=10`)).data.map(bi)}async getSnapshots(t,s){return(await this.fetch(`${At}/v1/crvusd/markets/${t}/${s}/snapshots?fetch_on_chain=true&agg=day`)).data.map(yi)}async getCrvUsdSupply(t){return(await this.fetch(`${At}/v1/crvusd/markets/${t}/supply`)).data.map(ki)}async getKeepers(t){return(await this.fetch(`${At}/v1/crvusd/pegkeepers/${t}`)).keepers.map(wi)}}const Ci=e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}),Ai="https://prices.curve.fi";class na extends Te{async getOHLC(t,s,a,n){const l=Math.floor(new Date().getTime()/1e3),r=Math.floor(l-72e5),c=`${Ai}/v1/ohlc/${t}/${Ht(s)}?main_token=${Ht(a)}&reference_token=${Ht(n)}&agg_number=1&agg_units=day&start=${r}&end=${l}`;return(await this.fetch(c)).data.map(Ci)}}const Rt=new $i,Si=new na;function Li(e){return w(()=>{var t;return(t=e.value)==null?void 0:t.address})}function xt(){return{initialData:[],initialDataUpdatedAt:0}}function Ti(e,t){return{enabled:w(()=>!!e.value&&!0)}}function Ii(){return E({queryKey:["crvusd-supply"],queryFn:()=>Rt.getCrvUsdSupply("ethereum"),...xt()})}function Et(e){return E({queryKey:["crvusd-market-snapshots",Li(e)],queryFn:({queryKey:[,t]})=>Rt.getSnapshots("ethereum",t),...Ti(e),...xt()})}function Vi(e){return E({queryKey:["crvusd-keepers-prices",w(()=>e.value.map(t=>t.pool_address))],queryFn:async()=>{const t=e.value.map(async n=>{const i=n.pair.find(c=>c.symbol!=="crvUSD"),l=n.pair.find(c=>c.symbol==="crvUSD");return!i||!l?[]:(await Si.getOHLC("ethereum",n.pool_address,i.address,l.address)).map(c=>({time:c.time,price:(c.high+c.low)/2,coin:i.symbol}))}),a=(await Promise.all(t)).flat().groupBy(n=>n.time).entries().map(([n,i])=>({timestamp:Number(n),...Object.fromEntries(i.map(l=>[l.coin,l.price]))}));return a.length>0?a:[{timestamp:0}]},initialData:[{timestamp:0}],initialDataUpdatedAt:0})}function fs(){return E({queryKey:["crvusd-markets"],queryFn:()=>Rt.getMarkets("ethereum",1),...xt()})}function la(){return E({queryKey:["crvusd-keepers"],queryFn:()=>Rt.getKeepers("ethereum"),...xt()})}const qi={class:"kpis"},Pi=L({__name:"KPIs",setup(e){const t=new zn,{data:s}=fs(),a=w(()=>s.value.reduce((c,u)=>c+u.borrowed,0)),{data:n}=oa(P("ethereum")),i=w(()=>{var c;return((c=n.value)==null?void 0:c.total.tvl)??0}),l=w(()=>{var c;return((c=n.value)==null?void 0:c.total.tradingVolume24h)??0}),{data:r}=E({queryKey:["crv-price"],queryFn:()=>t.getPrice("0xd533a949740bb3306d119cc777fa900ba034cd52").then(c=>c.price),initialData:0,initialDataUpdatedAt:0});return(c,u)=>{const p=X,v=ve;return _(),S("div",qi,[m(v,{class:"border-special",label:"CRV Price","has-value":!!o(r)},{default:g(()=>[m(p,{value:o(r),precision:3,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{class:"border-special",label:"crvUSD Borrowed","has-value":!!o(a)},{default:g(()=>[m(p,{value:o(a),precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{class:"border-special",label:"Total Value Locked","has-value":!!o(i)},{default:g(()=>[m(p,{value:o(i),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(v,{class:"border-special",label:"24h Volume","has-value":!!o(l)},{default:g(()=>[m(p,{value:o(l),precision:1,type:"dollar"},null,8,["value"])]),_:1},8,["has-value"])])}}}),Di=V(Pi,[["__scopeId","data-v-d7d3a3b2"]]),Bi="/assets/telegram-DU4d4zRw.webp",Fi={class:"telegram-body"},Gt="https://t.me/curve_monitor_backup",Xt="https://t.me/crvUSD_community_bot",Mi=L({__name:"TelegramModal",emits:["close"],setup(e,{emit:t}){const s=t;function a(n){window.open(n,"_blank")}return(n,i)=>{const l=U,r=bt;return _(),A(r,{onClose:i[2]||(i[2]=c=>s("close"))},{default:g(()=>[d("div",Fi,[m(l,{class:"border-special-hover",title:"Curve Monitor",onClick:i[0]||(i[0]=pe(c=>a(Gt),["prevent"]))},{actions:g(()=>[d("a",{href:Gt},I(Gt))]),default:g(()=>[i[3]||(i[3]=d("div",{class:"item crvUSD"}," This Telegram channel provides real-time updates on crvUSD transactions, including loan activity, collateral movements, peg maintenance, and major asset swaps on the Ethereum blockchain. It's a valuable resource for staying informed about crvUSD market dynamics and related metrics. ",-1))]),_:1}),m(l,{class:"border-special-hover",title:"crvUSD",onClick:i[1]||(i[1]=pe(c=>a(Xt),["prevent"]))},{actions:g(()=>[d("a",{href:Xt},I(Xt))]),default:g(()=>[i[4]||(i[4]=d("div",{class:"item crvUSD"},[M(" Health Monitoring bot for Curve LlamaLend positions: "),d("ul",null,[d("li",null,[M("/add "),d("em",null,"address"),M(" - Add an Ethereum address")]),d("li",null,[M("/remove "),d("em",null,"address"),M(" - Remove an Ethereum address")]),d("li",null,"/list - List all your Ethereum addresses"),d("li",null,"/removeAll - Remove all your Ethereum addresses"),d("li",null,"/gib - Prints all your health stats"),d("li",null,"/help - Show help message and some QoL commands")])],-1))]),_:1})])]),_:1})}}}),Ui=V(Mi,[["__scopeId","data-v-ea0e5a1f"]]),Ri={class:"telegram"},xi=L({__name:"Telegram",setup(e){const t=P(!1);return(s,a)=>{const n=U;return _(),S("div",Ri,[m(n,{class:"border-special",onClick:a[0]||(a[0]=i=>t.value=!0)},{default:g(()=>a[2]||(a[2]=[d("div",{class:"telegram-card"},[d("picture",null,[d("img",{class:"llama",src:Bi})]),d("div",{class:"info"},[M(" Try our "),d("strong",null,"Telegram"),M(" bots and monitor channels to get notified about the latest liquidations and events. ")])],-1)])),_:1}),m(Ui,{show:o(t),onClose:a[1]||(a[1]=i=>t.value=!1)},null,8,["show"])])}}}),Ei=V(xi,[["__scopeId","data-v-98ded682"]]),Oi=[{unit:"year",seconds:365*24*60*60},{unit:"month",seconds:30*24*60*60},{unit:"week",seconds:7*24*60*60},{unit:"day",seconds:24*60*60},{unit:"hour",seconds:60*60},{unit:"minute",seconds:60},{unit:"second",seconds:1}];function Wi(e,t){const s=Math.round(e.value/1e3)-t;for(const{unit:a,seconds:n}of Oi)if(s>=n){const i=Math.round(s/n);return`${i} ${i===1?a:a+"s"} ago`}return"just now"}function Ve(){const e=P(Date.now());return $e(()=>{setInterval(()=>{e.value=Date.now()})}),{relativeTime:s=>Wi(e,s)}}const Ni={class:"articles"},Ki={class:"articles-cards"},Hi={class:"article"},Qi={class:"date"},zi={class:"article"},ji={class:"date"},Gi={class:"article"},Xi={class:"date"},Zi={class:"article"},Yi={class:"date"},Ji=L({__name:"Articles",setup(e){const{relativeTime:t}=Ve();function s(a){window.open(a,"_blank")}return(a,n)=>{const i=U;return _(),S("div",Ni,[n[16]||(n[16]=d("div",{class:"title"},"Articles",-1)),d("div",Ki,[m(i,{class:"border-special-hover",onClick:n[0]||(n[0]=l=>s("https://blog.curvemonitor.com/posts/curve-users/"))},{default:g(()=>[d("div",Hi,[n[4]||(n[4]=d("div",{class:"title"},"Who are Curve's Users?",-1)),n[5]||(n[5]=d("div",{class:"description"}," A look at the differences between users of Curve's products ",-1)),d("div",Qi,I(o(t)(1723586400)),1),n[6]||(n[6]=d("div",{class:"read"},[d("a",{href:"https://blog.curvemonitor.com/posts/curve-users/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(i,{class:"border-special-hover",onClick:n[1]||(n[1]=l=>s("https://blog.curvemonitor.com/posts/exchange-received/"))},{default:g(()=>[d("div",zi,[n[7]||(n[7]=d("div",{class:"title"},"How to Do Cheaper, Approval-Free Swaps",-1)),n[8]||(n[8]=d("div",{class:"description"}," A deep dive into the exchange_received function on NG pools which allows users to trade without approvals and can significantly reduce transaction gas costs. ",-1)),d("div",ji,I(o(t)(1711234800)),1),n[9]||(n[9]=d("div",{class:"read"},[d("a",{href:"https://blog.curvemonitor.com/posts/exchange-received/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(i,{class:"border-special-hover",onClick:n[2]||(n[2]=l=>s("https://blog.curvemonitor.com/posts/ng-mev/"))},{default:g(()=>[d("div",Gi,[n[10]||(n[10]=d("div",{class:"title"},"Impact of Dynamic Fees on MEV Activity",-1)),n[11]||(n[11]=d("div",{class:"description"}," This post compares MEV activity on StableSwap NG pools and pools with the original implementation. It explains dynamic fees and their impact on certain types of MEV activity. ",-1)),d("div",Xi,I(o(t)(1710025200)),1),n[12]||(n[12]=d("div",{class:"read"},[d("a",{href:"https://blog.curvemonitor.com/posts/ng-mev/",target:"_blank"}," Read now ")],-1))])]),_:1}),m(i,{class:"border-special-hover",onClick:n[3]||(n[3]=l=>s("https://blog.curvemonitor.com/posts/parameter-ramping/"))},{default:g(()=>[d("div",Zi,[n[13]||(n[13]=d("div",{class:"title"},"Parameter Ramping",-1)),n[14]||(n[14]=d("div",{class:"description"}," Why aren't parameter changes on Curve pools applied instantly? This post dwelves into the reasons behind gradual parameter changes. ",-1)),d("div",Yi,I(o(t)(1707606e3)),1),n[15]||(n[15]=d("div",{class:"read"},[d("a",{href:"https://blog.curvemonitor.com/posts/parameter-ramping/",target:"_blank"}," Read now ")],-1))])]),_:1})])])}}}),ec=V(Ji,[["__scopeId","data-v-2322b1cd"]]),tc={class:"dashboard"},sc={class:"highlights"},ac=L({__name:"Home.page",setup(e){return(t,s)=>(_(),S("div",tc,[s[0]||(s[0]=d("div",{class:"description"},[d("span",{class:"title"},"Curve Monitor"),d("span",{class:"tag"}," Airdropping knowledge bombs about the Curve ecosystem. ")],-1)),s[1]||(s[1]=d("img",{class:"llama",src:Dr},null,-1)),d("div",sc,[m(Di),m(Ei)]),m(ec,{style:{"grid-area":"articles"}})]))}}),oc=V(ac,[["__scopeId","data-v-907b704e"]]),nc={class:"item"},lc=["src"],rc={key:1,class:"empty"},ic={class:"label"},cc=L({__name:"SelectChain",props:{chain:{},chains:{},all:{type:Boolean,default:!1}},emits:["select-chain"],setup(e,{emit:t}){const s=t,a=w(()=>[...e.all?[{chain:"all",label:"All Chains"}]:[],{chain:"ethereum",label:"Ethereum"},{chain:"avalanche",label:"Avalanche"},{chain:"arbitrum",label:"Arbitrum"},{chain:"fantom",label:"Fantom"},{chain:"xdai",label:"Gnosis (xDai)"},{chain:"harmony",label:"Harmony"},{chain:"moonbeam",label:"Moonbeam"},{chain:"matic",label:"Polygon"},{chain:"optimism",label:"Optimism"},{chain:"base",label:"Base"},{chain:"polygon",label:"Polygon"},{chain:"fraxtal",label:"Fraxtal"}].filter(r=>e.chains.includes(r.chain))),n=w(()=>a.value.find(r=>r.chain===e.chain)??a.value[0]),i=r=>r.label,l=r=>{s("select-chain",r.chain)};return(r,c)=>{const u=Ke;return _(),A(u,{options:o(a),selected:o(n),onInput:l},{item:g(({item:p})=>[d("div",nc,[o(Is)(p.chain)?(_(),S("img",{key:0,src:o(Is)(p.chain)},null,8,lc)):(_(),S("div",rc)),d("div",ic,I(i(p)),1)])]),_:1},8,["options","selected"])}}}),Ot=V(cc,[["__scopeId","data-v-cb4fd41f"]]),uc=(e,t)=>{const{colors:s}=t;return{width:e.clientWidth,height:e.clientHeight||300,rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},layout:{background:{type:Po.Solid,color:s.backgroundColor},textColor:s.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",attributionLogo:!1},grid:{vertLines:{visible:!1},horzLines:{color:s.level4,style:Do.SparseDotted}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1}};function J(e){const t=N();return s=>w(()=>{const a=uc(s,t.value);return e?hs(a,x(e).value):a})}const ge=L({__name:"BtnChartLWExport",props:{filename:{},series:{}},setup(e){function t(n){if(typeof n=="number")return n;if(typeof n=="string")return Math.floor(new Date(n).getTime()/1e3);if(typeof n=="object"&&"year"in n){const{year:i,month:l,day:r}=n;return Math.floor(new Date(i,l-1,r).getTime()/1e3)}throw new Error("Invalid time format")}function s(n){return Object.entries(n).map(([i,l])=>({column:i,data:((l==null?void 0:l.data())??[]).map(r=>({time:t(r.time),value:"value"in r?r.value:0}))}))}function a(){const n=s(e.series),i=n.flatMap(v=>v.data.map(b=>({column:v.column,data:b}))).groupBy(v=>v.data.time).entries().orderBy(([v])=>Number(v)).map(([v,b])=>{const f=b.orderBy(h=>h.column).map(h=>h.data.value).join(";");return`${v};${f}`}),r=["time;"+n.map(v=>v.column).orderBy(v=>v).join(";"),...i].join(`
`),c=new Blob([r],{type:"text/csv;charset=utf-8"}),u=URL.createObjectURL(c),p=document.createElement("a");p.href=u,p.download=`${e.filename}.csv`,p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(u)}return(n,i)=>{const l=Bo,r=ce;return _(),A(r,{onClick:a},{default:g(()=>[m(l)]),_:1})}}}),dc={ref:"modal",class:"fullscreen-content"},pc=L({__name:"ModalFullscreen",props:{target:{}},emits:["enterBefore","enter","exitBefore","exit"],setup(e,{emit:t}){const s=t,a=ne("modal");let n=null,i=null;H(a,(c,u)=>{e.target&&(c?l(e.target,c):u&&n&&r(e.target,n,u))});function l(c,u){n=c.parentNode,i=c.nextSibling,n&&(s("enterBefore",u),n.removeChild(c),u.appendChild(c),s("enter",u))}function r(c,u,p){s("exitBefore",p),p.removeChild(c),i?u.insertBefore(c,i):u.appendChild(c),s("exit",p)}return(c,u)=>{const p=bt;return _(),A(p,null,{default:g(()=>[d("div",dc,null,512)]),_:1})}}}),ra=V(pc,[["__scopeId","data-v-a97cda79"]]),fe=L({__name:"BtnChartLWFullscreen",props:{chart:{},target:{default:null}},setup(e){const t=P(!1);let s=0,a=0;function n(){const l=e.chart.chartElement().parentElement;s=(l==null?void 0:l.clientHeight)??0,a=(l==null?void 0:l.clientWidth)??0}function i(){e.chart.applyOptions({height:s,width:a})}return(l,r)=>{const c=Ns,u=ra,p=ce;return _(),A(p,{disabled:!l.chart,onClick:r[1]||(r[1]=v=>t.value=!o(t))},{default:g(()=>{var v;return[m(c),m(u,{target:(v=l.target)==null?void 0:v.$el,show:o(t),onClose:r[0]||(r[0]=b=>t.value=!1),onEnterBefore:n,onExit:i},null,8,["target","show"])]}),_:1},8,["disabled"])}}}),mc={...Fo,colors:[{line:"rgb(41, 98, 255)",area:"rgba(41, 98, 255, 0.2)"},{line:"rgb(225, 87, 90)",area:"rgba(225, 87, 90, 0.2)"},{line:"rgb(242, 142, 44)",area:"rgba(242, 142, 44, 0.2)"},{line:"rgb(164, 89, 209)",area:"rgba(164, 89, 209, 0.2)"},{line:"rgb(27, 156, 133)",area:"rgba(27, 156, 133, 0.2)"}],lineWidth:2};function vc(e){let t=0;return e.map(s=>{const a=t+s;return t=a,a})}class hc{constructor(){Ue(this,"_data",null);Ue(this,"_options",null)}draw(t,s){t.useBitmapCoordinateSpace(a=>{this._drawImpl(a,s)})}update(t,s){this._data=t,this._options=s}_drawImpl(t,s){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const a=this._options,n=this._data.bars.map(u=>({x:u.x,ys:vc(u.originalData.values).map(p=>s(p)??0)})),i=s(0)??0,l=this._createLinePaths(n,this._data.visibleRange,t,i*t.verticalPixelRatio),r=this._createAreas(l),c=a.colors.length;r.forEach((u,p)=>{t.context.fillStyle=a.colors[p%c].area,t.context.fill(u)}),t.context.lineWidth=a.lineWidth*t.verticalPixelRatio,t.context.lineJoin="round",l.forEach((u,p)=>{p!==0&&(t.context.beginPath(),t.context.strokeStyle=a.colors[(p-1)%c].line,t.context.stroke(u.path))})}_createLinePaths(t,s,a,n){const{horizontalPixelRatio:i,verticalPixelRatio:l}=a,r=[],c=[];let u=!0;for(let b=s.from;b<s.to;b++){const f=t[b];let h=0;f.ys.forEach((y,k)=>{if(k%2!==0)return;const C=f.x*i,$=y*l;u?(r[h]={path:new Path2D,first:{x:C,y:$},last:{x:C,y:$}},r[h].path.moveTo(C,$)):(r[h].path.lineTo(C,$),r[h].last.x=C,r[h].last.y=$),h+=1}),u=!1}u=!0;for(let b=s.to-1;b>=s.from;b--){const f=t[b];let h=0;f.ys.forEach((y,k)=>{if(k%2===0)return;const C=f.x*i,$=y*l;u?(c[h]={path:new Path2D,first:{x:C,y:$},last:{x:C,y:$}},c[h].path.moveTo(C,$)):(c[h].path.lineTo(C,$),c[h].last.x=C,c[h].last.y=$),h+=1}),u=!1}const p={path:new Path2D,first:{x:r[0].last.x,y:n},last:{x:r[0].first.x,y:n}};p.path.moveTo(r[0].last.x,n),p.path.lineTo(r[0].first.x,n);const v=[p];for(let b=0;b<r.length;b++)v.push(r[b]),b<c.length&&v.push(c[b]);return v}_createAreas(t){const s=[];for(let a=1;a<t.length;a++){const n=new Path2D(t[a-1].path);n.lineTo(t[a].first.x,t[a].first.y),n.addPath(t[a].path),n.lineTo(t[a-1].first.x,t[a-1].first.y),n.closePath(),s.push(n)}return s}}class _c{constructor(){Ue(this,"_renderer");this._renderer=new hc}priceValueBuilder(t){return[0,t.values.reduce((s,a)=>s+a,0)]}isWhitespace(t){var s;return!((s=t.values)!=null&&s.length)}renderer(){return this._renderer}update(t,s){this._renderer.update(t,s)}defaultOptions(){return mc}}function ee(e){const{createChartOptions:t,series:s}=e,a={},n=Array.isArray(s)?s:[s],i=ne("chartRef"),l=us(void 0);dt(i,(r,c,u)=>{const p=t(r);l.value=Mo(r,p.value);for(const b of n){const f=fc(l.value,b);a[b.name]=f}const v=H(p,b=>{var f;(f=l.value)==null||f.applyOptions(b)});u(()=>{v(),l.value=void 0})}),Uo(w(()=>{var r;return(r=i.value)==null?void 0:r.parentElement}),r=>{var u,p;const c=r[0].target;(u=l.value)==null||u.applyOptions({width:c.clientWidth,height:c.clientHeight}),(p=l.value)==null||p.timeScale().fitContent()});for(const{name:r,options:c}of n)H(c,u=>{const p=a[r];p==null||p.applyOptions(u)});return{chart:l,chartRef:i,series:a}}function fc(e,{type:t,options:s}){return{Area:e.addAreaSeries.bind(e),Bar:e.addBarSeries.bind(e),Baseline:e.addBaselineSeries.bind(e),Line:e.addLineSeries.bind(e),Candlestick:e.addCandlestickSeries.bind(e),Histogram:e.addHistogramSeries.bind(e),StackedArea:e.addCustomSeries.bind(e,new _c)}[t](s.value)}const gc={style:{display:"flex"}},bc={ref:"chartRef",class:"chart"},yc=L({__name:"ChartTxs",props:{txs:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Area",name:"txs",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${W(l,0,"dollar")}${z(l)}`,minMove:.01},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.txs)return;const l=e.txs.map(r=>({time:r.timestamp,value:r.count})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");n.txs.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Transactions"},{actions:g(()=>[d("div",gc,[m(o(ge),{filename:"txs",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",bc,null,512)]),_:1},512)}}}),wc={style:{display:"flex"}},kc={ref:"chartRef",class:"chart"},$c=L({__name:"ChartUsers",props:{users:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Area",name:"users",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${W(l,0,"dollar")}${z(l)}`,minMove:.01},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.users)return;const l=e.users.map(r=>({time:r.timestamp,value:r.count})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");n.users.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Users"},{actions:g(()=>[d("div",wc,[m(o(ge),{filename:"users",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",kc,null,512)]),_:1},512)}}}),Cc=L({__name:"ChartApex",props:{options:{},series:{}},setup(e){const t=Ro(()=>xo(()=>import("./vue3-apexcharts-BNxz59aI.js"),__vite__mapDeps([0,1])));return(s,a)=>(_(),A(o(t),{class:"chart",height:"100%",options:s.options,series:s.series},null,8,["options","series"]))}}),qe=V(Cc,[["__scopeId","data-v-15ef6603"]]),Ac={class:"legend"},Sc=["onClick"],Lc={class:"label"},Tc=L({__name:"Legend",props:{items:{},disabled:{default:()=>[]}},emits:["toggle"],setup(e,{emit:t}){const s=t;return(a,n)=>(_(),S("div",Ac,[(_(!0),S(te,null,oe(a.items,i=>(_(),S("div",{key:i.id,class:R(["item",{togglable:i.togglable,disabled:a.disabled.includes(i.id)}]),onClick:l=>{i.togglable&&s("toggle",i.id)}},[d("div",{class:"color",style:ht({"background-color":i.color})},null,4),d("div",Lc,I(i.label),1)],10,Sc))),128))]))}}),Se=V(Tc,[["__scopeId","data-v-2949a830"]]),Ic=e=>({chart:{id:"chart",background:"transparant",foreColor:e.colors.level5,fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Monaco, Consolas, monospace",toolbar:{autoSelected:"zoom",tools:{download:!1,pan:!1}},zoom:{autoScaleYaxis:!0}},colors:e.colorsArray,grid:{borderColor:e.colors.level5,strokeDashArray:4,xaxis:{lines:{show:!1}}},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:2},theme:{mode:"dark"},xaxis:{type:"category",axisBorder:{color:e.colors.level5,height:1},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}},yaxis:{tickAmount:4,axisBorder:{color:e.colors.level5},axisTicks:{color:e.colors.level5},title:{color:e.colors.level5}}});function Pe(e,t){t??(t=N());const s=Ic(t.value);return e?hs(s,e):s}function Le(e){const t=w(e),s=Eo(Oo(Object.fromEntries(t.value.map(n=>[n.id,!0])))),a=w(()=>t.value.filter(n=>!s[n.id].value).map(n=>n.id));return{items:t,toggles:s,disabled:a}}const Vc=L({__name:"ChartRankingChains",props:{type:{},txs:{},users:{}},setup(e){const t=N(),s=w(()=>`Top Chains (${e.type==="all"?"All Types":gt(e.type)})`),{items:a,toggles:n,disabled:i}=Le(()=>{const{blue:h,yellow:y}=t.value.colors;return[{id:"txs",label:"Transactions",color:h,togglable:!0},{id:"users",label:"Users",color:y,togglable:!0}]});function l(h){return h.groupBy(y=>y.chain).entries().map(([y,k])=>{const C=k.reduce(($,T)=>$+T.value,0);return{chain:y,count:C}}).orderBy(y=>y.count,"desc")}const r=w(()=>{const{colors:h}=t.value;return Pe({chart:{type:"bar",animations:{enabled:!1}},colors:[h.blue,h.yellow],xaxis:{categories:p.value,labels:{formatter:b}},yaxis:{labels:{formatter:f}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),c=w(()=>n.txs.value?l(e.txs):[]),u=w(()=>n.users.value?l(e.users):[]),p=w(()=>c.value.concat(u.value).orderBy(h=>h.count,"desc").map(h=>h.chain).uniq()),v=w(()=>{const h=p.value.map(k=>{const C=c.value.find($=>$.chain===k);return C?C.count:0}),y=p.value.map(k=>{const C=u.value.find($=>$.chain===k);return C?C.count:0});return[{data:n.txs.value?h:[]},{data:n.users.value?y:[]}]}),b=h=>h,f=h=>`${W(h,0,"dollar")}${z(h)}`;return(h,y)=>{const k=Se,C=qe,$=U;return _(),A($,{title:o(s)},{"actions-secondary":g(()=>[m(k,{items:o(a),disabled:o(i),onToggle:y[0]||(y[0]=T=>o(n)[T].value=!o(n)[T].value)},null,8,["items","disabled"])]),default:g(()=>[m(C,{options:o(r),series:o(v)},null,8,["options","series"])]),_:1},8,["title"])}}}),qc=V(Vc,[["__scopeId","data-v-49df1760"]]),Pc=L({__name:"ChartRankingTypes",props:{chain:{},txs:{},users:{}},setup(e){const t=N(),s=w(()=>`Top Types (${e.chain==="all"?"All Chains":gt(e.chain)})`),{items:a,toggles:n,disabled:i}=Le(()=>{const{blue:h,yellow:y}=t.value.colors;return[{id:"txs",label:"Transactions",color:h,togglable:!0},{id:"users",label:"Users",color:y,togglable:!0}]});function l(h){return h.groupBy(y=>y.type).entries().map(([y,k])=>{const C=k.reduce(($,T)=>$+T.value,0);return{type:y,count:C}}).orderBy(y=>y.count,"desc")}const r=w(()=>{const{colors:h}=t.value;return Pe({chart:{type:"bar",animations:{enabled:!1}},colors:[h.blue,h.yellow],xaxis:{categories:p.value,labels:{formatter:b}},yaxis:{labels:{formatter:f}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}})}),c=w(()=>n.txs.value?l(e.txs):[]),u=w(()=>n.users.value?l(e.users):[]),p=w(()=>c.value.concat(u.value).orderBy(h=>h.count,"desc").map(h=>h.type).uniq()),v=w(()=>{const h=p.value.map(k=>{const C=c.value.find($=>$.type===k);return C?C.count:0}),y=p.value.map(k=>{const C=u.value.find($=>$.type===k);return C?C.count:0});return[{data:n.txs.value?h:[]},{data:n.users.value?y:[]}]}),b=h=>h,f=h=>`${W(h,0,"dollar")}${z(h)}`;return(h,y)=>{const k=Se,C=qe,$=U;return _(),A($,{title:o(s)},{"actions-secondary":g(()=>[m(k,{items:o(a),disabled:o(i),onToggle:y[0]||(y[0]=T=>o(n)[T].value=!o(n)[T].value)},null,8,["items","disabled"])]),default:g(()=>[m(C,{options:o(r),series:o(v)},null,8,["options","series"])]),_:1},8,["title"])}}}),Dc=V(Pc,[["__scopeId","data-v-31f19d2b"]]),Bc={class:"item"},Fc={class:"label"},Mc=L({__name:"ActivityTypeSelect",emits:["select"],setup(e,{emit:t}){const s=t,a=["all",...Zr],n=P("all");function i(r){switch(r){case"all":return"All Types";case"crvusd":return"crvUSD";case"lending":return"Lending";case"pools":return"Pools";case"router":return"Router";case"dao":return"DAO"}}function l(r){n.value=r,s("select",n.value)}return(r,c)=>{const u=Ke;return _(),A(u,{options:a,selected:o(n),onInput:l},{item:g(({item:p})=>[d("div",Bc,[d("div",Fc,I(i(p)),1)])]),_:1},8,["selected"])}}}),Uc=V(Mc,[["__scopeId","data-v-bca8c2aa"]]),Rc={class:"dashboard"},xc={class:"toolbar"},Ec={class:"activity dashboard-grid"},Oc=L({__name:"Chains.page",setup(e){const{show:t}=We(Ie());$e(()=>{t.value=!1});const s=we("chain"),a=w({get(){return s.value?s.value:"all"},set(O){s.value=O}}),n=w(()=>{const O=u.value.map(se=>se.chain).concat(v.value.map(se=>se.chain)).concat(a.value!=="all"?[a.value]:[]).uniq().orderBy(se=>se,"asc"),me=["ethereum"],de=O.difference(me).orderBy(se=>se,"asc");return["all",...me,...de]}),i=we("type"),l=w({get(){return i.value?i.value:"all"},set(O){i.value=O}}),r=O=>{l.value=O},{isFetching:c,data:u}=fi(),{isFetching:p,data:v}=gi();function b(O,me,de,se){return O.filter(ae=>me==="all"?!0:ae.chain===me).filter(ae=>de==="all"?!0:ae.type===de).groupBy(ae=>ae.timestamp).entries().map(([ae,Qe])=>{const Me=Qe.reduce((it,Nt)=>it+se(Nt),0);return{timestamp:Number(ae),count:Me}})}const f=w(()=>b(u.value,a.value,l.value,O=>O.transactions)),h=w(()=>b(v.value,a.value,l.value,O=>O.users));function y(O){const se=Math.floor(Date.now()/1e3)-7*24*60*60,Qe=O.filter(Me=>Me.timestamp>=se).reduce((Me,it)=>Me+it.count,0);return Math.round(Qe/7)}const k=w(()=>{var O;return((O=f.value.at(-1))==null?void 0:O.count)??0}),C=w(()=>y(f.value)),$=w(()=>{var O;return((O=h.value.at(-1))==null?void 0:O.count)??0}),T=w(()=>y(h.value));function D(O,me,de,se){return O.filter(ae=>me==="all"?!0:ae.chain===me).filter(ae=>de==="all"?!0:ae.type===de).map(ae=>({chain:ae.chain,type:ae.type,value:se(ae)}))}const q=w(()=>D(u.value,"all",l.value,O=>O.transactions)),B=w(()=>D(v.value,"all",l.value,O=>O.users)),ue=w(()=>D(u.value,a.value,"all",O=>O.transactions)),K=w(()=>D(v.value,a.value,"all",O=>O.users));return(O,me)=>{const de=X,se=ve;return _(),S("div",Rc,[(_(),A(Dt,{to:"#toolbar"},[d("div",xc,[m(o(Uc),{style:{"grid-area":"type"},onSelect:r}),m(Ot,{style:{"grid-area":"chain"},class:"chain-select",chain:o(a),chains:o(n),all:!0,onSelectChain:me[0]||(me[0]=ae=>a.value=ae)},null,8,["chain","chains"])])])),d("div",Ec,[m(se,{style:{"grid-area":"kpi1"},label:"Transactions Today","has-value":!!o(c)},{default:g(()=>[m(de,{type:"dollar",value:o(k),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(se,{style:{"grid-area":"kpi2"},label:"Avg Transactions / 7 Days","has-value":!!o(c)},{default:g(()=>[m(de,{type:"dollar",value:o(C),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(se,{style:{"grid-area":"kpi3"},label:"Avg Users / 7 Days","has-value":!!o(p)},{default:g(()=>[m(de,{type:"dollar",value:o($),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(se,{style:{"grid-area":"kpi4"},label:"Users Today","has-value":!!o(p)},{default:g(()=>[m(de,{type:"dollar",value:o(T),"show-symbol":!1,"show-zero":!0},null,8,["value"])]),_:1},8,["has-value"]),m(o(yc),{style:{"grid-area":"txs"},txs:o(f),loading:o(c)},null,8,["txs","loading"]),m(o($c),{style:{"grid-area":"users"},users:o(h),loading:o(p)},null,8,["users","loading"]),m(o(qc),{style:{"grid-area":"top-chains"},type:o(l),txs:o(q),users:o(B),loading:o(c)||o(p)},null,8,["type","txs","users","loading"]),m(o(Dc),{style:{"grid-area":"top-types"},chain:o(a),txs:o(ue),users:o(K),loading:o(c)||o(p)},null,8,["chain","txs","users","loading"])])])}}}),Wc=V(Oc,[["__scopeId","data-v-e8ecb591"]]),Nc={class:"input-text"},Kc={key:0,class:"icon"},Hc=["type","value","placeholder"],Qc=["onClick"],zc=L({__name:"InputText",props:Je({placeholder:{default:""},options:{default:()=>[]},search:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},filter:{type:Function,default:()=>()=>!0},sort:{type:Function,default:null}},{modelValue:{required:!0},modelModifiers:{}}),emits:Je(["input","select"],["update:modelValue"]),setup(e,{emit:t}){const s=_t(e,"modelValue"),a=t,n=w(()=>{const l=e.options.filter(c=>e.filter(s.value,c));return e.sort?[...l].sort(e.sort):l}),i=l=>{const r=l.target.value;s.value=r,a("input",r)};return(l,r)=>{const c=Wo;return _(),S("div",Nc,[l.search?(_(),S("span",Kc,[m(c)])):F("",!0),d("input",{type:l.search?"search":"text",value:s.value,placeholder:l.placeholder,onInput:pe(i,["stop"]),onSelect:r[0]||(r[0]=pe(()=>{},["stop"]))},null,40,Hc),l.options&&l.autoComplete?(_(),S("div",{key:1,class:R(["items",{selectHide:!l.autoComplete}])},[(_(!0),S(te,null,oe(o(n),(u,p)=>(_(),S("div",{key:p,onClick:v=>a("select",u)},[j(l.$slots,"item",{item:u,idx:p},()=>[M(I(u),1)],!0)],8,Qc))),128))],2)):F("",!0)])}}}),be=V(zc,[["__scopeId","data-v-8a4120b9"]]),jc=e=>({tvl:e.total_tvl,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h}),Vs=e=>{var t,s;return{name:e.name,address:e.address.toLocaleLowerCase(),numCoins:e.n_coins,tvlUsd:e.tvl_usd,tradingVolume24h:e.trading_volume_24h,tradingFee24h:e.trading_fee_24h,liquidityVolume24h:e.liquidity_volume_24h,liquidityFee24h:e.liquidity_fee_24h,coins:((t=e.coins)==null?void 0:t.map(a=>({poolIndex:a.pool_index,symbol:a.symbol,address:a.address.toLocaleLowerCase()})))??[],baseDailyApr:e.base_daily_apr,baseWeeklyApr:e.base_weekly_apr,virtualPrice:e.virtual_price,poolMethods:((s=e.pool_methods)==null?void 0:s.map(a=>a))??[]}},Gc=e=>({timestamp:e.timestamp,volume:e.volume,fees:e.fees}),Xc=e=>({timestamp:e.timestamp,tvlUSD:e.tvl_usd??0,balances:[...e.balances],tokenPrices:[...e.token_prices]}),Zt="https://prices.curve.fi";class Zc extends ta{async getPools(t){const s=await this.getHost(),a=await this.fetch(`${s}/chains/${t}`);return{chain:a.chain,totals:jc(a.total),pools:a.data.map(Vs)}}async getPool(t,s){const a=await this.fetch(`${Zt}/v1/pools/${t}/${s}`);return Vs(a)}async getVolume(t,s){const n=Math.floor(new Date().getTime()/1e3),i=Math.floor(n-72e5);return(await this.fetch(`${Zt}/v1/volume/usd/${t}/${s}?interval=day&start=${i}&end=${n}`)).data.map(Gc)}async getTvl(t,s){const n=Math.floor(new Date().getTime()/1e3),i=Math.floor(n-72e5);return(await this.fetch(`${Zt}/v1/snapshots/${t}/${s}/tvl?interval=day&start=${i}&end=${n}`)).data.map(Xc)}}const Yc=["cb","laf","cm","pm","pm-lrt"];function Jc(){const e="cm";if(!Yc.includes(e)){const t=`Unknown app for useApp(): ${e}`;throw Ae({text:t,type:"error"}),new Error(t)}return e}const St={};function eu(e){return Nn[e]}async function ia(e){const t=Jc(),s=t;if(St[s])return Promise.resolve(St[s]);const a=eu(t);return St[s]=a,St[s]}const yt=new Zc(ia());function tu(e){return E({queryKey:["curve-pools",e],queryFn:async({queryKey:[,t]})=>yt.getPools(t),placeholderData:Bt,enabled:w(()=>!!e.value)})}function su(e,t){return E({queryKey:["curve-pool",t],queryFn:async({queryKey:[,s]})=>yt.getPool(e.value,s),enabled:w(()=>!!e.value)})}function au(e,t){const s=w(()=>t.value.map(a=>({queryKey:["curve-pool",a],queryFn:()=>yt.getPool(e.value,a),enabled:w(()=>!!e.value)})));return No({queries:s})}function ou(e,t){return E({queryKey:["curve-pool-volume",t],queryFn:async({queryKey:[,s]})=>yt.getVolume(e.value,s),enabled:w(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}function nu(e,t){return E({queryKey:["curve-pool-tvl",t],queryFn:async({queryKey:[,s]})=>yt.getTvl(e.value,s),enabled:w(()=>!!e.value&&!!t.value),initialData:[],initialDataUpdatedAt:0})}const lu=["src"],ru=["href"],iu=["src"],cu=L({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(e){const t=P("");function s(i){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${e.chain!=="ethereum"?`-${e.chain}`:""}/${i}.png`}const a=()=>{t.value="https://lend.curve.fi/images/default-crypto.png"};H(()=>e.address,i=>{t.value=s(i.toLowerCase())},{immediate:!0});const n=w(()=>{switch(e.chain){case"arbitrum":return`https://arbiscan.io/address/${e.address}`;case"ethereum":default:return`https://etherscan.io/address/${e.address}`}});return(i,l)=>i.clickable?(_(),S("a",{key:1,target:"_blank",href:o(n)},[d("img",{class:"token",src:o(t),onError:a},null,40,iu)],8,ru)):(_(),S("img",{key:0,class:"token",src:o(t),onError:a},null,40,lu))}}),_e=V(cu,[["__scopeId","data-v-864e9394"]]),uu={key:0},du={key:0},pu={key:1},mu=L({__name:"Pagination",props:{page:{},itemsCount:{},itemsPerPage:{}},emits:["page"],setup(e,{emit:t}){const s=t,a=w(()=>Math.ceil(e.itemsCount/e.itemsPerPage)),n=w(()=>{const v=[...Array(12).keys()].map(C=>C-6+e.page).filter(C=>C>=1&&C<=a.value),b=v.findIndex(C=>C===e.page),f=[],h=[],y=e.page!==1&&e.page!==a.value?[e.page]:[];let k=1;for(;;){const C=v[b-k];if(C&&C!==1&&f.unshift(C),f.length+h.length+y.length>=5||k>v.length)break;const $=v[b+k];if($&&$!==a.value&&h.push($),k++,f.length+h.length+y.length>=5||k>v.length)break}return[...f,...y,...h]});H(n,()=>{const u=i(e.page,1,a.value);e.page!==u&&s("page",u)});const i=(u,p,v)=>(v<p&&(v=p),Math.min(Math.max(u,p),v)),l=()=>{s("page",i(e.page-1,1,a.value))},r=()=>{s("page",i(e.page+1,1,a.value))},c=u=>{s("page",i(u,1,a.value))};return(u,p)=>{const v=ce,b=Ko,f=cs;return o(a)>1?(_(),S("ul",uu,[d("li",{class:R({active:u.page===1})},[m(v,{onClick:p[0]||(p[0]=h=>c(1))},{default:g(()=>p[2]||(p[2]=[M("1")])),_:1})],2),o(a)>2?(_(),S("li",du,[m(v,{onClick:l},{default:g(()=>[m(b)]),_:1})])):F("",!0),(_(!0),S(te,null,oe(o(n),h=>(_(),S("li",{key:h,class:R({active:h===u.page})},[m(v,{onClick:y=>c(h)},{default:g(()=>[M(I(h),1)]),_:2},1032,["onClick"])],2))),128)),o(a)>2?(_(),S("li",pu,[m(v,{onClick:r},{default:g(()=>[m(f)]),_:1})])):F("",!0),o(a)>1?(_(),S("li",{key:2,class:R({active:u.page===o(a)})},[m(v,{onClick:p[1]||(p[1]=h=>c(o(a)))},{default:g(()=>[M(I(o(a)),1)]),_:1})],2)):F("",!0)])):F("",!0)}}}),De=V(mu,[["__scopeId","data-v-9e9b78a2"]]);function wt(e,t){const s=P(e),a=P("desc"),n=(l,r)=>{s.value=l,a.value=r},i=w(()=>({column:s.value,order:a.value}));return{sortColumn:s,sortOrder:a,sorting:i,onSort:n}}function kt(e,t){const s=P(1),a=w(()=>e.value.drop((s.value-1)*t).take(t)),n=i=>{s.value=i};return H(a,i=>{i.length===0&&(s.value=Math.max(1,Math.ceil(e.value.length/t)))}),{page:s,rowsPage:a,onPage:n}}function gs(){const e=P(1);return{page:e,onPage:s=>{e.value=s}}}const vu={class:"tokens"},hu={class:"end"},_u={class:"end"},fu={class:"end"},qs=20,gu=L({__name:"TablePools",props:{chain:{},pools:{}},emits:["selected"],setup(e,{emit:t}){const s=t,a=["","",{id:"name",label:"Name",sort:!0},{id:"volume",label:"Volume (24h)",sort:!0,align:"end"},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:n,onSort:i}=wt("tvl"),l=w(()=>e.pools.orderBy(v=>{switch(n.value.column){case"name":return v.name;case"volume":return v.tradingVolume24h;case"tvl":return v.tvlUsd;case"util":return p(v)}},n.value.order)),{page:r,rowsPage:c,onPage:u}=kt(l,qs);function p(v){return v.tvlUsd!==0?100*v.tradingVolume24h/v.tvlUsd:0}return(v,b)=>{const f=De,h=_e,y=X,k=G,C=U;return _(),A(C,{title:"Pools"},{actions:g(()=>[m(f,{"items-count":v.pools.length,"items-per-page":qs,page:o(r),onPage:o(u)},null,8,["items-count","page","onPage"])]),default:g(()=>[m(k,{class:"pools-table","expand-side":"left",rows:o(c),columns:a,sorting:o(n),onSortColumn:o(i),onSelected:b[0]||(b[0]=$=>s("selected",$))},{row:g(({item:$})=>[d("div",vu,[(_(!0),S(te,null,oe($.coins,T=>(_(),A(h,{key:T.address,chain:v.chain,address:T.address},null,8,["chain","address"]))),128))]),d("div",null,I($.name),1),d("div",hu,[m(y,{value:$.tradingVolume24h,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",_u,[m(y,{value:$.tvlUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",fu,[m(y,{value:p($),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"])])]),"row-details":g(()=>b[1]||(b[1]=[M("   ")])),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),bu=V(gu,[["__scopeId","data-v-5a260b37"]]),yu={class:"dashboard"},wu={class:"toolbar"},ku=L({__name:"Pools.page",setup(e){const t=["ethereum","arbitrum"],s=we("chain"),a=w({get(){return s.value?s.value:"ethereum"},set(h){s.value=h}}),n=P(""),{isFetching:i,data:l}=oa(a),{isFetching:r,data:c}=tu(a),u=w(()=>{var h;return(((h=c.value)==null?void 0:h.pools)??[]).filter(y=>{const k=n.value.toLocaleLowerCase().split(" "),C=$=>k.some(T=>$.toLocaleLowerCase().includes(T));return C(y.name)||C(y.address)})}),{show:p,crumbs:v}=We(Ie());$e(()=>{p.value=!0,v.value=[{id:"pools",label:"Pools",pathName:"pools"},{id:"pool",label:"Select pool for details",hint:!0}]});const b=et(),f=async h=>{await b.push({name:"poolspool",params:{tab:"",chain:a.value,poolAddr:h.address}})};return(h,y)=>{const k=be,C=X,$=ve;return _(),S("div",yu,[(_(),A(Dt,{to:"#toolbar"},[d("div",wu,[m(k,{modelValue:o(n),"onUpdate:modelValue":y[0]||(y[0]=T=>ie(n)?n.value=T:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Ot,{class:"chain-select",chain:o(a),chains:t,onSelectChain:y[1]||(y[1]=T=>a.value=T==="all"?"ethereum":T)},null,8,["chain"])])])),m($,{style:{"grid-area":"kpi1"},label:"TVL","has-value":!o(i)},{default:g(()=>{var T;return[m(C,{value:((T=o(l))==null?void 0:T.total.tvl)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m($,{style:{"grid-area":"kpi2"},label:"Volume (24h)","has-value":!o(i)},{default:g(()=>{var T;return[m(C,{value:((T=o(l))==null?void 0:T.total.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m($,{style:{"grid-area":"kpi3"},label:"Fees Trading (24h)","has-value":!o(i)},{default:g(()=>{var T;return[m(C,{value:((T=o(l))==null?void 0:T.total.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m($,{style:{"grid-area":"kpi4"},label:"Fees Liquidity (24h)","has-value":!o(i)},{default:g(()=>{var T;return[m(C,{value:((T=o(l))==null?void 0:T.total.liquidityFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(bu),{style:{"grid-area":"pools"},chain:o(a),pools:o(u),loading:o(r),onSelected:f},null,8,["chain","pools","loading"])])}}}),$u=V(ku,[["__scopeId","data-v-4288131f"]]),Cu={class:"tab-view"},Au={class:"tab-headers"},Su=["onClick"],Lu={class:"tabs"},Tu=L({__name:"TabView",props:{active:{default:0}},emits:["tab"],setup(e,{emit:t}){const s=t,a=P(null),n=is(),i=w(()=>(n.default?n.default():[]).filter(c=>c.props));H(()=>e.active,r=>{a.value=r,s("tab",{tab:i.value[r],index:a.value})},{immediate:!0});const l=(r,c)=>{r.props.disabled||(a.value=c,s("tab",{tab:i.value[c],index:a.value}))};return(r,c)=>(_(),S("div",Cu,[d("ul",Au,[(_(!0),S(te,null,oe(o(i),(u,p)=>(_(),S("li",{key:p,class:R(["tab-header",{active:o(a)===p,disabled:u.props.disabled}]),onClick:v=>l(u,p)},I(u.props.header),11,Su))),128))]),d("div",Lu,[(_(!0),S(te,null,oe(o(i),(u,p)=>ms((_(),S("div",{key:p,class:"tab"},[(_(),A(mt(u)))])),[[Ho,o(a)===p]])),128))])]))}}),Be=V(Tu,[["__scopeId","data-v-12478a85"]]),Fe=L({__name:"TabItem",props:{header:{default:""},disabled:{type:Boolean,default:!1}},setup(e){return(t,s)=>j(t.$slots,"default")}}),Iu=new na;function Vu(e,t,s,a){return E({queryKey:["curve-token-price",t,s,a],queryFn:({queryKey:[,n,i,l]})=>Iu.getOHLC(e.value,n,i,l),enabled:w(()=>!!e.value&&!!t.value&&!!s.value&&!!a.value),initialData:[],initialDataUpdatedAt:0})}const qu=L({__name:"ButtonToggle",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:Je(["change"],["update:modelValue"]),setup(e,{emit:t}){const s=_t(e,"modelValue"),a=t,n=()=>{const i=!s.value;s.value=i,a("change",i)};return(i,l)=>{const r=ce;return _(),A(r,{class:R({toggled:s.value}),onClick:n},{default:g(()=>[j(i.$slots,"default",{},void 0,!0)]),_:3},8,["class"])}}}),st=V(qu,[["__scopeId","data-v-9cfb50ee"]]),Pu={class:"controls"},Du={ref:"chartRef",class:"chart"},Bu=L({__name:"ChartPrice",props:{ohlc:{}},setup(e){const t=N(),s=P(!1);let a=1,n=0;const{chart:i,series:l}=ee({createChartOptions:J(),series:{type:"Candlestick",name:"ohlc",options:w(()=>{const{colors:u}=t.value;return{priceFormat:{type:"custom",formatter:c},upColor:u.green,borderUpColor:u.green,wickUpColor:u.green,downColor:u.red,borderDownColor:u.red,wickDownColor:u.red}})}});Y(r);function r(){if(!i.value||!l.ohlc)return;const u=s.value?-1:1,p=e.ohlc.map(v=>({time:v.time,open:Math.pow(v.open,u),high:Math.pow(v.high,u),low:Math.pow(v.low,u),close:Math.pow(v.close,u)})).uniqWith((v,b)=>v.time===b.time).orderBy(v=>v.time,"asc");p.length>0&&(l.ohlc.setData(p),n=Math.min(...p.map(v=>v.low)),a=Math.max(...p.map(v=>v.high))),i.value.timeScale().fitContent()}function c(u){const p=a-n,v=p>1?p-Math.floor(p):p,b=-Math.floor(Math.log10(v)+1)+2;return`${W(u,b,"dollar")}${z(u)}`}return(u,p)=>{const v=st,b=U;return _(),A(b,{title:"Price"},{actions:g(()=>[d("div",Pu,[m(v,{"model-value":o(s),onClick:p[0]||(p[0]=f=>s.value=!o(s))},{default:g(()=>p[1]||(p[1]=[M(" Invert ")])),_:1},8,["model-value"])])]),default:g(()=>[d("div",Du,null,512)]),_:1})}}}),Fu=V(Bu,[["__scopeId","data-v-4425b281"]]),Mu={style:{display:"flex"}},Uu={ref:"chartRef",class:"chart"},Ru=L({__name:"ChartVolume",props:{volume:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Area",name:"volume",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${W(l,1,"dollar")}${z(l)}`},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.volume)return;const l=e.volume.map(r=>({time:r.timestamp,value:r.volume})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");l.length>0&&n.volume.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Volume"},{actions:g(()=>[d("div",Mu,[m(o(ge),{filename:"volume",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",Uu,null,512)]),_:1},512)}}}),xu={style:{display:"flex"}},Eu={ref:"chartRef",class:"chart"},Ou=L({__name:"ChartTvl",props:{tvl:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Area",name:"tvl",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${W(l,1,"dollar")}${z(l)}`},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.tvl)return;const l=e.tvl.map(r=>({time:r.timestamp,value:r.tvl})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");l.length>0&&n.tvl.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"TVL"},{actions:g(()=>[d("div",xu,[m(o(ge),{filename:"tvl",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",Eu,null,512)]),_:1},512)}}}),Wu={style:{display:"flex"}},Nu={ref:"chartRef",class:"chart"},Ku="chart_pool_balances_dollars",Hu="chart_pool_balances_type",Qu=L({__name:"ChartBalances",props:{balances:{}},setup(e){const t=N(),{items:s,toggles:a,disabled:n}=Le(()=>e.balances.map(({symbol:y},k)=>({id:y,label:y,color:t.value.colorsArray[k],togglable:!0}))),i=ne("card"),l=rs(Ku,!1),r=["unstacked","stacked","100%"],c=[{id:"unstacked",label:"Unstacked"},{id:"stacked",label:"Stacked"},{id:"100%",label:"Stacked (100%)"}],u=rs(Hu,r[0]),{chart:p,series:v}=ee({createChartOptions:J(),series:[...e.balances.map(({symbol:y},k)=>({type:"Line",name:y,options:w(()=>({priceFormat:{type:"custom",formatter:C=>`${W(C,1,"dollar")}${z(C)}`},lineWidth:2,lineType:le.WithSteps,color:t.value.colorsArray[k],lastValueVisible:!1,priceLineVisible:!1}))})),{type:"StackedArea",name:"stacked",options:w(()=>({priceFormat:{type:"custom",formatter:y=>`${W(y,1,"dollar")}${z(y)}`},colors:s.value.map((y,k)=>({item:y,i:k})).filter(({item:y})=>!n.value.includes(y.id)).map(({i:y})=>y).map(y=>t.value.colorsArray[y]).map(y=>({line:y,area:y+"15"})),lineWidth:2,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(b);function b(){if(!(!p.value||Object.values(v).length<0)){for(const y of Object.values(v))y==null||y.setData([]);u.value==="unstacked"?f():h(u.value==="100%"),p.value.timeScale().fitContent()}}function f(){var y,k;for(const{symbol:C,balances:$}of e.balances.values()){if(!a[C].value){(y=v[C])==null||y.setData([]);continue}const T=l.value,D=$.map(q=>({time:q.timestamp,value:T?q.balance*q.tokenPrice:q.balance})).uniqWith((q,B)=>q.time===B.time).orderBy(q=>q.time,"asc");D.length>0&&((k=v[C])==null||k.setData(D))}}function h(y){if(!v.stacked)return;const k=l.value,C=[...e.balances.values()].filter(({symbol:$,balances:T})=>a[$].value&&T.length>0).flatMap(({symbol:$,balances:T})=>T.map(D=>({symbol:$,timestamp:D.timestamp,balance:k?D.balance*D.tokenPrice:D.balance}))).groupBy($=>$.timestamp).entries().map(([$,T])=>{const D=y?T.reduce((B,ue)=>B+ue.balance,0):1,q=T.map(B=>y?B.balance/D*100:B.balance);return{time:Number($),values:q}}).uniqWith(($,T)=>$.time===T.time).orderBy($=>$.time,"asc");C.length>0&&v.stacked.setData(C)}return(y,k)=>{const C=Ke,$=st,T=Mt,D=Se,q=U;return _(),A(q,{ref_key:"card",ref:i,class:"stack-actions",title:"Balances"},{actions:g(()=>[d("div",Wu,[m(C,{options:c,selected:c.find(B=>B.id===o(u))??c[0],onInput:k[0]||(k[0]=B=>u.value=B.id)},{item:g(({item:B})=>[M(I(B.label),1)]),_:1},8,["selected"]),m(T,null,{trigger:g(()=>[m($,{style:{"margin-right":"1rem"},"model-value":o(l),onClick:k[1]||(k[1]=B=>l.value=!o(l))},{default:g(()=>k[3]||(k[3]=[M(" $ ")])),_:1},8,["model-value"])]),default:g(()=>[k[4]||(k[4]=M(" Show token balances in USD. "))]),_:1}),m(o(fe),{chart:o(p),target:o(i)},null,8,["chart","target"])])]),"actions-secondary":g(()=>[m(D,{items:o(s),disabled:o(n),onToggle:k[2]||(k[2]=B=>o(a)[B].value=!o(a)[B].value)},null,8,["items","disabled"])]),default:g(()=>[d("div",Nu,null,512)]),_:1},512)}}}),zu=V(Qu,[["__scopeId","data-v-2340d046"]]),ju={class:"dashboard-grid"},Gu={class:"tokens"},Xu=L({__name:"PoolOverview",props:{pool:{},chain:{}},setup(e){const t=w(()=>{var f;return(f=e.pool)==null?void 0:f.address}),s=w(()=>{var f;return(f=e.pool)==null?void 0:f.coins[0].address}),a=w(()=>{var f;return(f=e.pool)==null?void 0:f.coins[1].address}),{isFetching:n,data:i}=Vu(x(()=>e.chain),t,s,a),{isFetching:l,data:r}=ou(x(()=>e.chain),t),{isFetching:c,data:u}=nu(x(()=>e.chain),t),p=w(()=>r.value.map(f=>({timestamp:f.timestamp,volume:f.volume}))),v=w(()=>u.value.map(f=>({timestamp:f.timestamp,tvl:f.tvlUSD}))),b=w(()=>e.pool?e.pool.coins.map(f=>({symbol:f.symbol,balances:u.value.map(h=>({timestamp:h.timestamp,balance:h.balances[f.poolIndex],tokenPrice:h.tokenPrices[f.poolIndex]}))})):[]);return(f,h)=>{const y=_e,k=ve,C=X;return _(),S("div",ju,[m(k,{style:{"grid-area":"kpi1"},label:"Tokens","has-value":!!f.pool},{default:g(()=>{var $;return[d("div",Gu,[(_(!0),S(te,null,oe((($=f.pool)==null?void 0:$.coins)??[],T=>(_(),A(y,{key:T.address,chain:f.chain,address:T.address,clickable:!0},null,8,["chain","address"]))),128))])]}),_:1},8,["has-value"]),m(k,{style:{"grid-area":"kpi2"},label:"TVL","has-value":!!f.pool},{default:g(()=>{var $;return[m(C,{value:(($=f.pool)==null?void 0:$.tvlUsd)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(k,{style:{"grid-area":"kpi3"},label:"Volume (24h)","has-value":!!f.pool},{default:g(()=>{var $;return[m(C,{value:(($=f.pool)==null?void 0:$.tradingVolume24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(k,{style:{"grid-area":"kpi4"},label:"Fees (24h)","has-value":!!f.pool},{default:g(()=>{var $;return[m(C,{value:(($=f.pool)==null?void 0:$.tradingFee24h)??0,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(Fu),{style:{"grid-area":"price"},ohlc:o(i),loading:o(n)},null,8,["ohlc","loading"]),m(o(Ru),{style:{"grid-area":"volume"},volume:o(p),loading:o(l)},null,8,["volume","loading"]),m(o(Ou),{style:{"grid-area":"tvl"},tvl:o(v),loading:o(c)},null,8,["tvl","loading"]),m(o(zu),{style:{"grid-area":"balances"},balances:o(b),loading:o(c)},null,8,["balances","loading"])])}}}),Zu=V(Xu,[["__scopeId","data-v-c895e9ea"]]),Yu={},Ju={class:"dashboard-grid"};function ed(e,t){return _(),S("div",Ju,"MEV goes here")}const td=V(Yu,[["render",ed],["__scopeId","data-v-62155a3e"]]);function at(e,t,s){const a=et(),n=we("tab",e[0]),i=P(-1);return H(n,l=>i.value=e.findIndex(r=>r===l),{immediate:!0}),H(i,async l=>{l===-1&&(l=0),await a.push({name:t,params:{tab:e[l],...(s==null?void 0:s())??{}},replace:n.value===""})},{immediate:!0}),{tabActive:n,tabActiveIndex:i}}const sd={class:"dashboard"},ad=L({__name:"Pool.page",setup(e){const{show:t,crumbs:s}=We(Ie()),a=we("chain"),n=we("poolAddr"),{isFetching:i,data:l}=su(a,n.value);H(l,u=>{s.value=[{id:"pools",label:"Pools",pathName:"pools",params:()=>({chain:a.value})},{id:"pool",label:`Pool: ${(u==null?void 0:u.name)??"?"}`}]},{immediate:!0}),$e(()=>{t.value=!0});const{tabActive:r,tabActiveIndex:c}=at(["overview","mev"],"poolspool",()=>({chain:a.value,poolAddr:n.value}));return(u,p)=>{const v=tt,b=Fe,f=Be;return _(),S("div",sd,[m(v,{class:R({loading:o(i)})},null,8,["class"]),!o(i)&&o(l)?(_(),A(f,{key:0,active:o(c),onTab:p[0]||(p[0]=h=>c.value=h.index)},{default:g(()=>[m(b,{header:"Overview"},{default:g(()=>[(_(),A(re,null,[o(r)==="overview"?(_(),A(Zu,{key:0,pool:o(l),chain:o(a)},null,8,["pool","chain"])):F("",!0)],1024))]),_:1}),m(b,{header:"MEV"},{default:g(()=>[(_(),A(re,null,[o(r)==="mev"?(_(),A(td,{key:0,pool:o(l),chain:o(a)},null,8,["pool","chain"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),od=V(ad,[["__scopeId","data-v-6d28dec3"]]),nd=e=>({chain:e.chain,totalDailyFeesUSD:e.totalDailyFeesUSD}),ld=e=>({name:e.name,totalDailyFeesUSD:e.totalDailyFeesUSD}),rd=e=>({timestamp:Ce(e.timestamp),controller:e.controller.toLocaleLowerCase(),collateral:e.collateral,feesUsd:e.fees_usd}),id=e=>({timestamp:Ce(e.timestamp),chain:e.chain,feesUsd:e.fees_usd}),cd=e=>({pool:e.pool.toLocaleLowerCase(),name:e.name,adminFees:e.admin_fees,usdValue:e.usd_value}),ud=e=>({timestamp:Ce(e.timestamp),feesUsd:e.fees_usd}),dd=e=>({timestamp:Ce(e.dt),coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),precision:e.coin.precision},amount:BigInt(e.amount),amountFee:BigInt(e.fee_amount),amountReceived:e.amount_received,routerReceived:e.router_received,epoch:e.epoch,txHash:e.tx_hash.toLocaleLowerCase(),blockNumber:e.block_number}),pd=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),md=e=>({coin:{lpToken:e.coin.lp_token,symbol:e.coin.symbol,address:e.coin.address.toLocaleLowerCase(),decimals:e.coin.precision},amount:parseFloat(e.amount),amountUsd:parseFloat(e.usd_amount)}),Ps="https://api-py.llama.airforce/curve/v1",Yt="https://prices.curve.fi";class vd extends ta{async getByChain(t){return(await this.fetch(`${Ps}/protocol/revenue/chains`,void 0,t)).revenue.map(nd)}async getTopPools(t,s=10){const a=t==="ethereum"?"mainnet":t;return(await this.fetch(`${Ps}/protocol/revenue/${a}/toppools/${s}`)).revenue.map(ld)}async getCrvUsdWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/crvusdweekly`)).fees.map(rd)}async getPoolsWeekly(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/pools`)).fees.map(id)}async getCushions(t){return(await this.fetch(`${Yt}/v1/dao/fees/${t}/pending`)).data.map(cd)}async getDistributions(){return await Zs(a=>this.fetch(`${Yt}/v1/dao/fees/distributions?page=${a}&per_page=100`).then(n=>n.distributions.map(ud)),1,100)}async getCowSwapSettlements(t){return(await this.fetch(`${Yt}/v1/dao/fees/settlements${t?"?timestamp="+t.toString():""}`)).data.map(dd)}async getFeesCollected(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-collected`)).data.map(pd)}async getFeesStaged(){const t=await this.getHost();return(await this.fetch(`${t}/revenue/fees-staged`)).data.map(md)}}const He=new vd(ia());function ot(){return{initialData:[],initialDataUpdatedAt:0}}function hd(e){return E({queryKey:["curve-cushions",e],queryFn:({queryKey:[,t]})=>He.getCushions(t).then(s=>s.sort((a,n)=>n.usdValue-a.usdValue)),...ot()})}function _d(){return E({queryKey:["curve-revenue-distributions"],queryFn:()=>He.getDistributions(),initialData:[],initialDataUpdatedAt:0})}function fd(){return E({queryKey:["curve-revenue-cow-settlements"],queryFn:()=>He.getCowSwapSettlements(),...ot()})}function gd(){return E({queryKey:["curve-revenue-crvusd-weekly"],queryFn:()=>He.getCrvUsdWeekly(),...ot()})}function bd(){return E({queryKey:["curve-revenue-pools-weekly"],queryFn:()=>He.getPoolsWeekly(),...ot()})}function yd(){return E({queryKey:["curve-revenue-fees-collected"],queryFn:()=>He.getFeesCollected(),...ot()})}function wd(){return E({queryKey:["curve-revenue-fees-staged"],queryFn:()=>He.getFeesStaged(),...ot()})}const kd=L({__name:"ChartBreakdown",setup(e){const t=N(),{items:s}=Le(()=>[{id:"crvusd",label:"crvUSD",color:t.value.colorsArray[0]},{id:"pools",label:"Pools",color:t.value.colorsArray[1]}]),{isFetching:a,data:n}=gd(),{isFetching:i,data:l}=bd(),r=w(()=>a.value||i.value),c=w(()=>{const{colors:h,colorsArray:y}={colors:t.value.colors,colorsArray:[t.value.colorsArray[0],t.value.colorsArray[1]]};return Pe({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:b.value,labels:{formatter:k=>k,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:k=>`$${W(k,0,"dollar")}${z(k)}`},min:0},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}},P({colors:h,colorsArray:y}))});function u(h){return h.groupBy(y=>y.timestamp).entries().map(([y,k])=>{const C=k.reduce(($,T)=>$+T.feesUsd,0);return{timestamp:Number(y),feesUsd:C}}).orderBy(y=>y.timestamp,"asc")}const p=w(()=>{const h=u(n.value),y=u(l.value);return h.concat(y).groupBy(k=>k.timestamp).entries().map(([,k])=>({timestamp:k[0].timestamp,numLabels:k.length})).orderBy(k=>k.timestamp,"asc").dropWhile(k=>k.numLabels<2).map(k=>k.timestamp)});function v(h){return new Date(h*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"short"})}const b=w(()=>p.value.map(h=>v(h))),f=w(()=>{function h(C){return u(C).map($=>({x:v($.timestamp),y:$.feesUsd}))}const y={name:"crvusd",data:h(n.value)},k={name:"pools",data:h(l.value)};return[y,k]});return(h,y)=>{const k=Se,C=qe,$=U;return _(),A($,{title:"Revenue breakdown by source",loading:o(r)},{"actions-secondary":g(()=>[m(k,{items:o(s)},null,8,["items"])]),default:g(()=>[m(C,{options:o(c),series:o(f)},null,8,["options","series"])]),_:1},8,["loading"])}}}),$d=V(kd,[["__scopeId","data-v-c223e0b1"]]),Cd={class:"dashboard-grid"},Ad=L({__name:"Overview",setup(e){return(t,s)=>(_(),S("div",Cd,[m($d,{style:{"grid-area":"breakdown"},class:"breakdown"})]))}}),Sd=V(Ad,[["__scopeId","data-v-02c55fde"]]),Ld={class:"end"},Td=L({__name:"TableDistributions",props:{distributions:{}},setup(e){const t=[{id:"timestamp",label:"Date",sort:!0},{id:"fees",label:"Fees",sort:!0,align:"end"}],{sorting:s,onSort:a}=wt("timestamp"),n=w(()=>e.distributions.orderBy(l=>{switch(s.value.column){case"timestamp":return l.timestamp;case"fees":return l.feesUsd}},s.value.order));function i(l){return new Date(l*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(l,r)=>{const c=X,u=G,p=U;return _(),A(p,{title:"Distributions"},{default:g(()=>[m(u,{class:"distributions-table",rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:g(({item:{timestamp:v,feesUsd:b}})=>[d("div",null,I(i(v)),1),d("div",Ld,[m(c,{value:b,precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Id=V(Td,[["__scopeId","data-v-a70c64e7"]]),Vd={style:{display:"flex"}},qd={ref:"chartRef",class:"chart"},Pd=L({__name:"ChartDistributions",props:{distributions:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Histogram",name:"distributions",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${W(l,0,"dollar")}${z(l)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.distributions)return;const l=e.distributions.map(r=>({time:r.timestamp,value:r.feesUsd})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc").takeRight(52);if(l.length>0){n.distributions.setData(l);const r=l[0].time,c=l[l.length-1].time;a.value.timeScale().setVisibleRange({from:r,to:c})}}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Distributions (1y)"},{actions:g(()=>[d("div",Vd,[m(o(ge),{filename:"distributions",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",qd,null,512)]),_:1},512)}}}),Dd={style:{display:"flex"}},Bd={ref:"chartRef",class:"chart"},Fd=L({__name:"ChartDistributionsDelta",props:{distributions:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Histogram",name:"deltas",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${W(l,0,"dollar")}${z(l)}`,minMove:.01},color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.deltas)return;const{colors:l}=t.value,r=e.distributions.map(c=>({time:c.timestamp,value:c.feesUsd})).uniqWith((c,u)=>c.time===u.time).orderBy(c=>c.time,"asc").takeRight(53).reduce((c,u,p,v)=>{if(p===0)return c;const b=u.value-v[p-1].value,f=b<0?l.red:l.green;return c.push({time:u.time,value:b,color:f}),c},[]);if(r.length>0){n.deltas.setData(r);const c=r[0].time,u=r[r.length-1].time;a.value.timeScale().setVisibleRange({from:c,to:u})}}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Distributions Change (1y)"},{actions:g(()=>[d("div",Dd,[m(o(ge),{filename:"distributions_delta",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",Bd,null,512)]),_:1},512)}}}),Md={class:"dashboard-grid"},Ud=L({__name:"Distributions",setup(e){const{isFetching:t,data:s}=_d(),a=w(()=>s.value.sumBy(l=>l.feesUsd)),n=w(()=>s.value.orderBy(l=>l.timestamp,"desc").take(52).meanBy(l=>l.feesUsd)),i=w(()=>{const l=s.value.orderBy(u=>u.timestamp,"desc").take(52).map(u=>u.feesUsd),r=l.meanBy(u=>u),c=l.map(u=>Math.pow(u-r,2));return Math.sqrt(c.sumBy(u=>u)/(l.length-1))});return(l,r)=>{const c=X,u=ve;return _(),S("div",Md,[m(u,{style:{"grid-area":"kpi1"},label:"Total","has-value":o(s).length>0},{default:g(()=>[m(c,{value:o(a),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(u,{style:{"grid-area":"kpi2"},label:"Average (1y)","has-value":o(s).length>0},{default:g(()=>[m(c,{value:o(n),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(u,{style:{"grid-area":"kpi3"},label:"Standard Deviation (1y)","has-value":o(s).length>0},{default:g(()=>[m(c,{value:o(i),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(Pd,{style:{"grid-area":"chart"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),m(Fd,{style:{"grid-area":"delta"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"]),m(Id,{style:{"grid-area":"table"},distributions:o(s),loading:o(t)},null,8,["distributions","loading"])])}}}),Rd=V(Ud,[["__scopeId","data-v-6e2afc22"]]),xd=["href"],Ed={class:"end"},Od={class:"end"},Wd=L({__name:"TableCushions",setup(e){const t=P(""),s=w(()=>i.value||c.value),a=P("ethereum"),{data:n,isFetching:i}=_i(),l=w(()=>r.value.filter(p=>p.usdValue>100).filter(p=>{const v=t.value.toLocaleLowerCase().split(" "),b=f=>v.some(h=>f.toLocaleLowerCase().includes(h));return b(p.pool)||b(p.name)})),{data:r,isFetching:c}=hd(a),u=p=>`https://etherscan.io/address/${p}`;return(p,v)=>{const b=be,f=X,h=G,y=U;return _(),A(y,{class:"cushions-card",title:"Cushions",loading:o(s)},{actions:g(()=>[m(Ot,{class:"chain-select",chain:o(a),chains:o(n),onSelectChain:v[0]||(v[0]=k=>a.value=k==="all"?"ethereum":k)},null,8,["chain","chains"]),m(b,{modelValue:o(t),"onUpdate:modelValue":v[1]||(v[1]=k=>ie(t)?t.value=k:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:g(()=>[m(h,{class:"cushions-table",rows:o(l),columns:["Name","Address",{label:"Fees ($)",align:"end"}]},{row:g(({item:k})=>[d("div",null,I(k.name),1),d("div",null,[d("a",{class:"font-mono",href:u(k.pool),target:"_blank"},I(k.pool),9,xd)]),d("div",Ed,[m(f,{value:k.usdValue,precision:2,type:"dollar"},null,8,["value"])])]),"row-aggregation":g(()=>[v[2]||(v[2]=d("div",null,null,-1)),v[3]||(v[3]=d("div",null,null,-1)),d("div",Od,[m(f,{value:o(l).reduce((k,C)=>k+C.usdValue,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),Nd=V(Wd,[["__scopeId","data-v-e1ee21ed"]]),Kd={class:"cushions"},Hd=L({__name:"Cushions",setup(e){return(t,s)=>(_(),S("div",Kd,[m(Nd)]))}}),Qd=V(Hd,[["__scopeId","data-v-8ec0e1da"]]),zd=e=>({auctionStartBlock:e.auctionStartBlock,orders:e.auction.orders.map(t=>t),prices:Object.entries(e.auction.prices).reduce((t,[s,a])=>(t[s]=BigInt(a),t),{}),solutions:e.solutions.map(t=>({solver:t.solver,solverAddress:t.solverAddress,score:BigInt(t.score),ranking:t.ranking,clearingPrices:Object.entries(t.clearingPrices).reduce((s,[a,n])=>(s[a]=BigInt(n),s),{}),orders:t.orders.map(s=>({id:s.id,sellAmount:BigInt(s.sellAmount),buyAmount:BigInt(s.buyAmount)}))}))}),jd="https://api.cow.fi";class Gd extends Te{async getCompetition(t){const s=await this.fetch(`${jd}/mainnet/api/v1/solver_competition/by_tx_hash/${t}`);return zd(s)}}const Xd=new Gd;function Zd(e){return E({queryKey:["solver-competition",e],queryFn:({queryKey:[,t]})=>Xd.getCompetition(t)})}const Yd={class:"settlement-details-body"},Jd={class:"info col"},ep={class:"buttons"},tp={class:"font-mono json"},sp={key:1},ap=["href"],op=L({__name:"SettlementDetails",props:{settlement:{}},setup(e){const{data:t,isPending:s}=Zd(x(()=>e.settlement.txHash)),a=w(()=>t.value?JSON.stringify(t.value,(v,b)=>typeof b=="bigint"?b.toString():b,2):"no data"),n=w(()=>t.value?t.value.solutions.orderBy(v=>v.ranking,"asc"):[]);function i(v){return`https://etherscan.io/address/${v}`}async function l(v){await navigator.clipboard.writeText(v)}async function r(){await navigator.clipboard.writeText(a.value)}function c(v){switch(v){case 1:return"gold";case 2:return"silver";case 3:return"bronze";default:return""}}const u=P(!1),p=ne("cardJson");return(v,b)=>{const f=ve,h=Ne,y=ce,k=Ns,C=ra,$=U,T=Qo,D=G;return _(),A($,{class:"settlement-details"},{default:g(()=>[d("div",Yd,[d("div",Jd,[m(f,{label:"Auction Start Block","has-value":!o(s)},{default:g(()=>{var q;return[M(I(((q=o(t))==null?void 0:q.auctionStartBlock)??0),1)]}),_:1},8,["has-value"]),m(f,{label:"Solvers","has-value":!o(s)},{default:g(()=>{var q,B;return[M(I(((B=(q=o(t))==null?void 0:q.solutions)==null?void 0:B.length)??0),1)]}),_:1},8,["has-value"]),m(f,{label:"Orders","has-value":!o(s)},{default:g(()=>{var q,B;return[M(I(((B=(q=o(t))==null?void 0:q.orders)==null?void 0:B.length)??0),1)]}),_:1},8,["has-value"]),m($,{ref_key:"cardJson",ref:p,class:"card-json col",title:"Json"},{actions:g(()=>[d("div",ep,[m(y,{onClick:b[0]||(b[0]=q=>r())},{default:g(()=>[m(h)]),_:1}),m(y,{onClick:b[2]||(b[2]=q=>u.value=!o(u))},{default:g(()=>{var q;return[m(k),m(C,{target:(q=o(p))==null?void 0:q.$el,show:o(u),onClose:b[1]||(b[1]=B=>u.value=!1)},null,8,["target","show"])]}),_:1})])]),default:g(()=>[d("div",tp,I(o(a)),1)]),_:1},512)]),m($,{class:"col",title:"Solvers"},{default:g(()=>[m(D,{class:"solvers-table col",rows:o(n)},{row:g(({item:{solver:q,solverAddress:B,ranking:ue,score:K}})=>[d("div",{class:R(["trophy",c(ue)])},[ue<=3?(_(),A(T,{key:0})):(_(),S("span",sp,I(ue),1))],2),d("div",null,[d("a",{class:"font-mono",href:i(B),target:"_blank"},I(q),9,ap)]),d("div",null,I(K),1),d("div",null,[m(y,{onClick:O=>l(B)},{default:g(()=>[m(h)]),_:2},1032,["onClick"])])]),_:1},8,["rows"])]),_:1})])]),_:1})}}}),np=V(op,[["__scopeId","data-v-8d13acf5"]]);function ca(){const e=P([]);return{expanded:e,toggleExpansion:s=>{const a=e.value.findIndex(n=>n===s);return a===-1?(e.value.push(s),!0):(e.value.splice(a,1),!1)}}}const lp={class:"header-content"},rp={class:"token"},ip=["href"],cp={class:"end"},up={class:"end"},dp={class:"end"},pp={class:"end profit"},mp={class:"end"},vp=["href"],hp={class:"end"},Ds=15,_p=L({__name:"TableSettlements",props:{settlements:{}},setup(e){const t=[{id:"token",label:"Token",sort:!1},{id:"amount",label:"Amount",sort:!0,align:"end"},{id:"quote",label:"Quote",sort:!0,align:"end"},{id:"profit",label:"Profit",sort:!0,align:"end"},{id:"profitPct",label:"(%)",sort:!0,align:"end"},{id:"tx",label:"Transaction",sort:!1,align:"end"},{id:"timestamp",label:"Time",sort:!0,align:"end"}],{sorting:s,onSort:a}=wt("timestamp"),n=w(()=>e.settlements.orderBy(h=>{switch(s.value.column){case"amount":return h.amountReceived;case"quote":return h.routerReceived;case"profit":return v(h);case"profitPct":return b(h);case"timestamp":return h.timestamp}},s.value.order)),{page:i,rowsPage:l,onPage:r}=kt(n,Ds),{expanded:c,toggleExpansion:u}=ca(),{relativeTime:p}=Ve();function v(h){return h.amountReceived-h.routerReceived}function b(h){return 100*h.amountReceived/h.routerReceived-100}function f(h){const y=h.coin.symbol;return y.includes(":")?y.split(":")[1]:y}return(h,y)=>{const k=De,C=_e,$=X,T=G,D=U;return _(),A(D,{title:"CowSwap Settlements"},{actions:g(()=>[d("div",lp,[m(k,{"items-count":o(n).length,"items-per-page":Ds,page:o(i),onPage:o(r)},null,8,["items-count","page","onPage"])])]),default:g(()=>[m(T,{class:"settlements-table",rows:o(l),columns:t,sorting:o(s),expanded:o(c),"expand-side":"right",onSortColumn:o(a),onSelected:o(u)},{row:g(({item:q})=>[d("div",rp,[m(C,{address:q.coin.address},null,8,["address"]),d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${q.coin.address}`},I(f(q)),9,ip)]),d("div",cp,[m($,{value:q.amountReceived,precision:2,type:"dollar"},null,8,["value"])]),d("div",up,[m($,{value:q.routerReceived,precision:2,type:"dollar"},null,8,["value"])]),d("div",dp,[q.routerReceived>1?(_(),A($,{key:0,value:v(q),precision:2,type:"dollar"},null,8,["value"])):F("",!0)]),d("div",pp,[q.routerReceived>1?(_(),A($,{key:0,class:R(["pct",{green:b(q)>0}]),value:b(q),precision:2,type:"percentage"},null,8,["value","class"])):F("",!0)]),d("div",mp,[d("a",{class:"font-mono",href:`https://explorer.cow.fi/tx/${q.txHash}`,target:"_blank",onClick:y[0]||(y[0]=pe(()=>{},["stop"]))},I(o(ke)(q.txHash)),9,vp)]),d("div",hp,I(o(p)(q.timestamp)),1)]),"row-details":g(({item:q})=>[y[1]||(y[1]=d("div",{class:"empty"},null,-1)),o(c).includes(q)?(_(),A(np,{key:0,settlement:q},null,8,["settlement"])):F("",!0)]),_:1},8,["rows","sorting","expanded","onSortColumn","onSelected"])]),_:1})}}}),fp=V(_p,[["__scopeId","data-v-9f42b2e2"]]),gp={class:"dashboard-grid"},bp=L({__name:"Settlements",setup(e){const{isFetching:t,data:s}=fd();return(a,n)=>(_(),S("div",gp,[m(fp,{style:{"grid-area":"table"},settlements:o(s),loading:o(t)},null,8,["settlements","loading"])]))}}),yp=V(bp,[["__scopeId","data-v-05972b33"]]),wp=["href"],kp={class:"end"},$p={class:"end"},Cp={class:"end"},Ap=L({__name:"TableFeesCollected",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:a}=wt("amountUsd"),n=w(()=>e.fees.orderBy(i=>{switch(s.value.column){case"symbol":return i.coin.symbol;case"amount":return i.amount;default:return i.amountUsd}},s.value.order));return(i,l)=>{const r=_e,c=X,u=G,p=U;return _(),A(p,{title:"Fees Collected"},{default:g(()=>[m(u,{rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:g(({item:v})=>[m(r,{address:v.coin.address},null,8,["address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},I(v.coin.symbol),9,wp)]),d("div",kp,[m(c,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",$p,[m(c,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":g(()=>[l[0]||(l[0]=d("div",null,null,-1)),l[1]||(l[1]=d("div",null,null,-1)),l[2]||(l[2]=d("div",null,null,-1)),d("div",Cp,[m(c,{value:o(n).reduce((v,b)=>v+b.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Sp=V(Ap,[["__scopeId","data-v-6aa5b32e"]]),Lp=["href"],Tp={class:"end"},Ip={class:"end"},Vp={class:"end"},qp=L({__name:"TableFeesStaged",props:{fees:{}},setup(e){const t=[{id:"token",label:"",sort:!1},{id:"symbol",label:"Token",sort:!0},{id:"amount",label:"Amount",align:"end",sort:!0},{id:"amountUsd",label:"Amount ($)",align:"end",sort:!0}],{sorting:s,onSort:a}=wt("amountUsd"),n=w(()=>e.fees.orderBy(i=>{switch(s.value.column){case"symbol":return i.coin.symbol;case"amount":return i.amount;default:return i.amountUsd}},s.value.order));return(i,l)=>{const r=_e,c=X,u=G,p=U;return _(),A(p,{title:"Fees Staged"},{default:g(()=>[m(u,{rows:o(n),columns:t,sorting:o(s),onSortColumn:o(a)},{row:g(({item:v})=>[m(r,{address:v.coin.address},null,8,["address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${v.coin.address}`},I(v.coin.symbol),9,Lp)]),d("div",Tp,[m(c,{value:v.amount,precision:2,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Ip,[m(c,{value:v.amountUsd,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":g(()=>[l[0]||(l[0]=d("div",null,null,-1)),l[1]||(l[1]=d("div",null,null,-1)),l[2]||(l[2]=d("div",null,null,-1)),d("div",Vp,[m(c,{value:o(n).reduce((v,b)=>v+b.amountUsd,0),precision:2,type:"dollar"},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1})}}}),Pp=V(qp,[["__scopeId","data-v-54615e6c"]]),Dp={class:"dashboard-grid"},Bp=L({__name:"Harvesting",setup(e){const{isFetching:t,data:s}=yd(),{isFetching:a,data:n}=wd();return(i,l)=>(_(),S("div",Dp,[m(Sp,{style:{"grid-area":"collected"},fees:o(s),loading:o(t)},null,8,["fees","loading"]),m(Pp,{style:{"grid-area":"staged"},fees:o(n),loading:o(a)},null,8,["fees","loading"])]))}}),Fp=V(Bp,[["__scopeId","data-v-3abe6953"]]),Mp={class:"dashboard"},Up=L({__name:"Revenue.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["overview","distributions","cushions","settlements","harvesting"],"revenue");return(a,n)=>{const i=Fe,l=Be;return _(),S("div",Mp,[m(l,{active:o(s),onTab:n[0]||(n[0]=r=>s.value=r.index)},{default:g(()=>[m(i,{header:"Revenue"},{default:g(()=>[(_(),A(re,null,[o(t)==="overview"?(_(),A(Sd,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"Distributions"},{default:g(()=>[(_(),A(re,null,[o(t)==="distributions"?(_(),A(Rd,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"Cushions"},{default:g(()=>[(_(),A(re,null,[o(t)==="cushions"?(_(),A(Qd,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"Settlements"},{default:g(()=>[(_(),A(re,null,[o(t)==="settlements"?(_(),A(yp,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"Harvesting"},{default:g(()=>[(_(),A(re,null,[o(t)==="harvesting"?(_(),A(Fp,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),Rp=V(Up,[["__scopeId","data-v-a3767e40"]]),xp={class:"end"},Ep={class:"end"},Op={class:"end"},Wp={class:"end"},Np={class:"end"},Kp={class:"end"},Hp={class:"end"},Qp={class:"end"},zp=L({__name:"TablePegkeepers",setup(e){const t=P(""),s=w(()=>p.value||i.value),a=w(()=>l.value.map(h=>{const y=v.value.find(k=>h.pool_address===k.address);if(y)return{...y,...h}}).filter(En).orderBy(h=>h.tvlUsd,"desc")),n=w(()=>a.value.filter(h=>{const y=t.value.toLocaleLowerCase().split(" "),k=C=>y.some($=>C.toLocaleLowerCase().includes($));return k(h.name)||k(h.address)})),{isFetching:i,data:l}=la(),r=h=>`${h.pair[1].symbol} / ${h.pair[0].symbol}`,c=w(()=>l.value.map(h=>h.pool_address)),u=au(P("ethereum"),c),p=w(()=>u.value.some(h=>h.isFetching)),v=w(()=>u.value.filter(h=>h.data).map(h=>h.data)),b=h=>h>=1e6?2:0,f=h=>h.pair.filter(y=>y.address!==Wn)[0].address;return(h,y)=>{const k=be,C=_e,$=X,T=G,D=U;return _(),A(D,{class:"pegkeepers-card",title:"Pegkeepers",loading:o(s)},{actions:g(()=>[m(k,{modelValue:o(t),"onUpdate:modelValue":y[0]||(y[0]=q=>ie(t)?t.value=q:null),placeholder:"Search for..",search:!0},null,8,["modelValue"])]),default:g(()=>[m(T,{class:"pegkeepers-table",rows:o(n),columns:["","Name",{label:"Debt",align:"end"},{label:"TVL",align:"end"},{label:"Volume",align:"end"},{label:"Fees",align:"end"}]},{row:g(({item:q})=>[m(C,{chain:"ethereum",address:f(q)},null,8,["address"]),d("div",null,I(r(q)),1),d("div",xp,[m($,{value:q.total_debt,precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Ep,[m($,{value:q.tvlUsd,precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Op,[m($,{value:q.tradingVolume24h,precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Wp,[m($,{value:q.total_profit,precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":g(()=>[y[1]||(y[1]=d("div",null,null,-1)),y[2]||(y[2]=d("div",null,null,-1)),d("div",Np,[m($,{value:o(n).reduce((q,B)=>q+B.total_debt,0),precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Kp,[m($,{value:o(n).reduce((q,B)=>q+B.tvlUsd,0),precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Hp,[m($,{value:o(n).reduce((q,B)=>q+B.tradingVolume24h,0),precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Qp,[m($,{value:o(n).reduce((q,B)=>q+B.total_profit,0),precision:b,"show-zero":!0,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1},8,["loading"])}}}),jp=V(zp,[["__scopeId","data-v-264597a2"]]),Gp={class:"end"},Xp={class:"end"},Zp={class:"end"},Yp={class:"end"},Jp={class:"end"},em={class:"end"},tm={class:"end"},sm={class:"end"},am={class:"end"},om={class:"end"},nm={class:"end"},lm=L({__name:"TableMarkets",emits:["selected"],setup(e,{emit:t}){const s=t,a=P(""),n=w(()=>l.value.filter(c=>{const u=a.value.toLocaleLowerCase().split(" "),p=v=>u.some(b=>v.toLocaleLowerCase().includes(b));return p(c.name)||p(c.address)}).orderBy(c=>c.borrowed,"desc")),{isFetching:i,data:l}=fs(),r=c=>c>=1e6?2:0;return(c,u)=>{const p=be,v=_e,b=X,f=G,h=U;return _(),A(h,{class:"markets-card",title:"Markets",loading:o(i)},{actions:g(()=>[m(p,{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=y=>ie(a)?a.value=y:null),placeholder:"Search for...",search:!0},null,8,["modelValue"])]),default:g(()=>[m(f,{class:"markets-table","expand-side":"left",rows:o(n),columns:["","","Name",{label:"Loans",align:"end"},{label:"Rate",align:"end"},{label:"Borrowed",align:"end"},{label:"Collateral",align:"end"},{label:"Fees Pending",align:"end"},{label:"Fees Collected",align:"end"}],onSelected:u[1]||(u[1]=y=>s("selected",y))},{row:g(({item:y})=>[m(v,{chain:"ethereum",address:y.collateral_token.address},null,8,["address"]),d("div",null,I(y.name),1),d("div",Gp,I(y.loans),1),d("div",Xp,[m(b,{value:y.rate*100,precision:2,type:"percentage"},null,8,["value"])]),d("div",Zp,[m(b,{value:y.borrowed,precision:r,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",Yp,[m(b,{value:y.collateralUsd,precision:r,type:"dollar"},null,8,["value"])]),d("div",Jp,[m(b,{value:y.fees.pending,precision:r,type:"dollar"},null,8,["value"])]),d("div",em,[m(b,{value:y.fees.collected,precision:r,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-aggregation":g(()=>[u[2]||(u[2]=d("div",null,null,-1)),u[3]||(u[3]=d("div",null,null,-1)),u[4]||(u[4]=d("div",null,null,-1)),d("div",tm,I(o(n).reduce((y,k)=>y+k.loans,0)),1),u[5]||(u[5]=d("div",null,null,-1)),d("div",sm,[m(b,{value:o(n).reduce((y,k)=>y+k.borrowed,0),precision:r,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",am,[m(b,{value:o(n).reduce((y,k)=>y+k.collateralUsd,0),precision:r,type:"dollar"},null,8,["value"])]),d("div",om,[m(b,{value:o(n).reduce((y,k)=>y+k.fees.pending,0),precision:r,type:"dollar"},null,8,["value"])]),d("div",nm,[m(b,{value:o(n).reduce((y,k)=>y+k.fees.collected,0),precision:r,"show-zero":!0,type:"dollar"},null,8,["value"])])]),"row-details":g(()=>u[6]||(u[6]=[M("   ")])),_:1},8,["rows"])]),_:1},8,["loading"])}}}),rm=V(lm,[["__scopeId","data-v-deda5daf"]]),im={class:"chart-types button-group"},cm=L({__name:"ChartCrvUsdSupply",setup(e){const t=N(),s=P("line"),{items:a}=Le(()=>[{id:"supply",label:"Supply",color:t.value.colorsArray[0]},{id:"borrowed",label:"Borrowed",color:t.value.colorsArray[1]}]),{isFetching:n,data:i}=Ii(),l=r=>{s.value!==r&&(s.value=r)};return(r,c)=>{const u=st,p=Se,v=U;return _(),A(v,{title:"crvUSD Supply",loading:o(n)},{actions:g(()=>[d("div",im,[m(u,{"model-value":o(s)==="line",onClick:c[0]||(c[0]=b=>l("line"))},{default:g(()=>c[2]||(c[2]=[M(" Line ")])),_:1},8,["model-value"]),m(u,{"model-value":o(s)==="breakdown",onClick:c[1]||(c[1]=b=>l("breakdown"))},{default:g(()=>c[3]||(c[3]=[M(" Breakdown ")])),_:1},8,["model-value"])])]),"actions-secondary":g(()=>[o(s)==="line"?(_(),A(p,{key:0,items:o(a)},null,8,["items"])):F("",!0)]),default:g(()=>[(_(),A(re,null,[o(s)==="line"?(_(),A(o(vm),{key:0,data:o(i)},null,8,["data"])):F("",!0)],1024)),(_(),A(re,null,[o(s)==="breakdown"?(_(),A(o(pm),{key:0,data:o(i)},null,8,["data"])):F("",!0)],1024))]),_:1},8,["loading"])}}}),um=V(cm,[["__scopeId","data-v-6e84a4b0"]]),dm=L({__name:"ChartCrvUsdSupplyBreakdown",props:{data:{default:()=>[]}},setup(e){const t=w(()=>Pe({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:i,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:l},min:0,max:n.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=w(()=>e.data.orderBy(r=>r.timestamp,"asc").groupBy(r=>r.timestamp).entries().map(([r])=>new Date(parseInt(r,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((r,c)=>c%8===0?r:"")),a=w(()=>e.data.groupBy(r=>r.market).entries().map(([r,c])=>({name:r,data:c.groupBy(u=>u.timestamp).entries().map(([u,p])=>({x:new Date(parseInt(u,10)*1e3).toLocaleDateString(),y:p.reduce((v,b)=>v+b.supply,0)})).orderBy(u=>u.x,"asc")}))),n=w(()=>Math.max(...e.data.groupBy(r=>r.timestamp).entries().map(([,r])=>r.reduce((c,u)=>c+u.supply,0)))*1.1),i=r=>r,l=r=>`${W(r,1,"dollar")}${z(r)}`;return(r,c)=>{const u=qe;return _(),A(u,{options:o(t),series:o(a)},null,8,["options","series"])}}}),pm=V(dm,[["__scopeId","data-v-1fa8289e"]]),mm={ref:"chartRef",class:"chart"},vm=L({__name:"ChartCrvUsdSupplyLine",props:{data:{default:()=>[]}},setup(e){const t=N(),{chart:s,series:a}=ee({createChartOptions:J(),series:[{type:"Area",name:"supply",options:w(()=>({priceFormat:{type:"custom",formatter:i},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:w(()=>({priceFormat:{type:"custom",formatter:i},lineWidth:2,lineType:le.WithSteps,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(n);function n(){if(!s.value||!a.debt||!a.supply)return;const l=e.data.groupBy(c=>c.timestamp).entries().map(([,c])=>{var u;return{time:c[0].timestamp,value:c.reduce((p,v)=>p+v.supply,0),debt:((u=c.find(p=>p.market==="Keepers debt"))==null?void 0:u.supply)??0}}).uniqWith((c,u)=>c.time===u.time).orderBy(c=>c.time,"asc"),r=l.map(c=>({time:c.time,value:c.value-c.debt}));l.length>0&&a.supply.setData(l),r.length>0&&a.debt.setData(r),s.value.timeScale().fitContent()}function i(l){return`${W(l,0,"dollar")}${z(l)}`}return(l,r)=>(_(),S("div",mm,null,512))}}),hm={ref:"chartRef",class:"chart"},_m=L({__name:"ChartMarketAvailableCap",props:{market:{}},setup(e){const{isFetching:t,data:s}=Et(x(()=>e.market)),a=N(),{chart:n,series:i}=ee({createChartOptions:J(),series:{type:"Area",name:"available",options:w(()=>({priceFormat:{type:"custom",formatter:r=>`$${W(r,0,"dollar")}${z(r)}`},lineWidth:2,lineType:le.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(l);function l(){if(!n.value||!i.available)return;const r=s.value.map(c=>({time:c.timestamp,value:c.borrowable})).uniqWith((c,u)=>c.time===u.time).orderBy(c=>c.time,"asc").dropWhile(c=>c.value===0);r.length>0&&i.available.setData(r),n.value.timeScale().fitContent()}return(r,c)=>{const u=U;return _(),A(u,{title:"Borrowable & Debt Ceiling",loading:o(t)},{default:g(()=>[d("div",hm,null,512)]),_:1},8,["loading"])}}}),fm={ref:"chartRef",class:"chart"},gm=L({__name:"ChartMarketLoans",props:{market:{}},setup(e){const{isFetching:t,data:s}=Et(x(()=>e.market)),a=N(),{chart:n,series:i}=ee({createChartOptions:J(),series:{type:"Histogram",name:"loans",options:w(()=>({color:a.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});Y(l);function l(){if(!n.value||!i.loans)return;const r=s.value.map(c=>({time:c.timestamp,value:c.nLoans})).uniqWith((c,u)=>c.time===u.time).orderBy(c=>c.time,"asc");if(r.length>0){i.loans.setData(r);const c=r[0].time,u=r[r.length-1].time;n.value.timeScale().setVisibleRange({from:c,to:u})}}return(r,c)=>{const u=U;return _(),A(u,{title:"Loans",loading:o(t)},{default:g(()=>[d("div",fm,null,512)]),_:1},8,["loading"])}}}),bm=["min","max"],ym=L({__name:"InputNumber",props:Je({min:{default:()=>-1/0},max:{default:()=>1/0}},{modelValue:{required:!0,default:null},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=_t(e,"modelValue");return H(t,s=>{s===""?t.value=null:typeof s=="number"&&(t.value=Math.min(Math.max(s,e.min),e.max))}),(s,a)=>ms((_(),S("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),type:"number",min:s.min,max:s.max},null,8,bm)),[[Ks,t.value]])}}),Wt=V(ym,[["__scopeId","data-v-2174eac3"]]),wm={ref:"chartRef",class:"chart"},km=L({__name:"ChartMarketRates",props:{market:{}},setup(e){const{isFetching:t,data:s}=Et(x(()=>e.market)),a=N(),n=P(null),{chart:i,series:l}=ee({createChartOptions:J(),series:[{type:"Area",name:"rates",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,lineType:le.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"ema",options:w(()=>({priceFormat:{type:"custom",formatter:c},lineWidth:2,lineType:le.WithSteps,color:a.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(r);function r(){if(!i.value||!l.rates||!l.ema)return;const p=s.value.map(f=>({time:f.timestamp,value:f.rate})).uniqWith((f,h)=>f.time===h.time).orderBy(f=>f.time,"asc"),b=u(p.map(f=>f.value),n.value??31).zip(p).map(f=>({time:f[1].time,value:f[0]}));if(b.length>0&&l.ema.setData(b),p.length>0){l.rates.setData(p);const f=p[0].time,h=p[p.length-1].time;i.value.timeScale().setVisibleRange({from:f,to:h})}}function c(p){return`${W(p*100,0,"percentage")}%`}const u=(p,v=7)=>p.map((b,f)=>{const h=Math.max(f-(v-1),0),y=f+1,k=p.slice(h,y);return k.reduce(($,T)=>$+T,0)/k.length});return(p,v)=>{const b=Wt,f=U;return _(),A(f,{title:"Rates",loading:o(t)},{actions:g(()=>[m(b,{modelValue:o(n),"onUpdate:modelValue":v[0]||(v[0]=h=>ie(n)?n.value=h:null),class:"avg-span",placeholder:"Avg span (days)",min:1,max:1/0},null,8,["modelValue"])]),default:g(()=>[d("div",wm,null,512)]),_:1},8,["loading"])}}}),$m=V(km,[["__scopeId","data-v-d1d69dca"]]),Cm=e=>{const t=e.provider.toLocaleLowerCase(),s=e.deposit?{amount:e.deposit.amount,n1:e.deposit.n1,n2:e.deposit.n2}:null,a=e.withdrawal?{amount_borrowed:e.withdrawal.amount_borrowed,amount_collateral:e.withdrawal.amount_collateral}:null,n=e.block_number,i=e.timestamp,l=e.transaction_hash.toLocaleLowerCase();return{provider:t,deposit:s,withdrawal:a,block_number:n,timestamp:i,transaction_hash:l}},Am=e=>({sold_id:e.sold_id,bought_id:e.bought_id,token_sold:{symbol:e.token_sold.symbol,address:e.token_sold.address.toLocaleLowerCase()},token_bought:{symbol:e.token_bought.symbol,address:e.token_bought.address.toLocaleLowerCase()},amount_sold:e.amount_sold,amount_bought:e.amount_bought,price:e.price,buyer:e.buyer.toLocaleLowerCase(),fee_x:e.fee_x,fee_y:e.fee_y,block_number:e.block_number,timestamp:e.timestamp,transaction_hash:e.transaction_hash}),Sm=e=>({time:e.time,open:e.open,close:e.close,high:e.high,low:e.low,base_price:e.base_price,oracle_price:e.oracle_price,volume:e.volume}),Jt="https://prices.curve.fi";class Lm extends Te{async getEvents(t,s,a,n){const i=await this.fetch(`${Jt}/v1/${t}/llamma_events/${s}/${a}?page=${n}&per_page=10`);return{events:i.data.map(Cm),count:i.count}}async getTrades(t,s,a,n){const i=await this.fetch(`${Jt}/v1/${t}/llamma_trades/${s}/${a}?page=${n}&per_page=10`);return{trades:i.data.map(Am),count:i.count}}async getOHLC(t,s,a){const n=Math.floor(new Date().getTime()/1e3),i=n-10*24*60*60;return(await this.fetch(`${Jt}/v1/${t}/llamma_ohlc/${s}/${a}?agg_number=1&agg_units=hour&start=${i}&end=${n}`)).data.map(Sm)}}const bs=new Lm;function ua(e,t,s,a){return E({queryKey:["llamma-market-events",t,a],queryFn:({queryKey:[,n,i]})=>bs.getEvents(e.value,s.value,n,i),placeholderData:Bt,enabled:w(()=>!!t.value&&!!s.value)})}function da(e,t,s,a){return E({queryKey:["llamma-market-trades",t,a],queryFn:({queryKey:[,n,i]})=>bs.getTrades(e.value,s.value,n,i),placeholderData:Bt,enabled:w(()=>!!t.value&&!!s.value)})}function ys(e,t,s){return E({queryKey:["llamma-market-ohlc",t],queryFn:({queryKey:[,a]})=>bs.getOHLC(e.value,s.value,a),enabled:w(()=>!!t.value&&!!s.value)})}const Tm={ref:"chartRef",class:"chart"},Im=L({__name:"ChartMarketVolume",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=ys(x("crvusd"),w(()=>{var r;return(r=e.market)==null?void 0:r.llamma}),x(()=>e.chain)),a=N(),{chart:n,series:i}=ee({createChartOptions:J(),series:{type:"Area",name:"volume",options:w(()=>({priceFormat:{type:"custom",formatter:r=>`$${W(r,0,"dollar")}${z(r)}`},lineWidth:2,lineType:le.WithSteps,lineColor:a.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(l);function l(){if(!n.value||!i.volume)return;const r=(s.value??[]).map(c=>({time:c.time,value:c.volume})).uniqWith((c,u)=>c.time===u.time).orderBy(c=>c.time,"asc");r.length>0&&i.volume.setData(r),n.value.timeScale().fitContent()}return(r,c)=>{const u=U;return _(),A(u,{title:"Volume",loading:o(t)},{default:g(()=>[d("div",Tm,null,512)]),_:1},8,["loading"])}}}),Vm={style:{display:"flex"}},qm={ref:"chartRef",class:"chart"},Pm=L({__name:"ChartKeeperPrices",setup(e){const t=N(),s=["USDC","USDT","TUSD","USDP"],{items:a,toggles:n,disabled:i}=Le(()=>s.map((y,k)=>({id:y,label:y,color:t.value.colorsArray[k],togglable:!0}))),l=w(()=>r.value||u.value),{isFetching:r,data:c}=la(),{isFetching:u,data:p}=Vi(c),v=ne("card"),{chart:b,series:f}=ee({createChartOptions:J(),series:s.map((y,k)=>({type:"Line",name:y,options:w(()=>({priceFormat:{type:"custom",formatter:C=>`${W(C,3,"dollar")}${z(C)}`},lineWidth:2,lineType:le.WithSteps,color:t.value.colorsArray[k],lastValueVisible:!1,priceLineVisible:!1,autoscaleInfoProvider:C=>{const $=C();return $!==null&&($.priceRange.minValue=Math.max(.98,$.priceRange.minValue),$.priceRange.maxValue=Math.min(1.02,$.priceRange.maxValue)),$}}))}))});Y(h);function h(){var y,k;if(!(!b.value||Object.values(f).length<0)){for(const[,C]of s.entries()){if(!n[C].value){(y=f[C])==null||y.setData([]);continue}const $=p.value.map(T=>({time:T.timestamp,value:T[C]})).uniqWith((T,D)=>T.time===D.time).orderBy(T=>T.time,"asc");$.length>0&&((k=f[C])==null||k.setData($))}b.value.timeScale().fitContent()}}return(y,k)=>{const C=Se,$=U;return _(),A($,{ref_key:"card",ref:v,title:"Pegkeepers Coin Prices",loading:o(l)},{actions:g(()=>[d("div",Vm,[m(o(ge),{filename:"keeper_prices",series:o(f)},null,8,["series"]),m(o(fe),{chart:o(b),target:o(v)},null,8,["chart","target"])])]),"actions-secondary":g(()=>[m(C,{items:o(a),disabled:o(i),onToggle:k[0]||(k[0]=T=>o(n)[T].value=!o(n)[T].value)},null,8,["items","disabled"])]),default:g(()=>[d("div",qm,null,512)]),_:1},8,["loading"])}}}),Dm={class:"dashboard"},Bm={class:"col"},Fm={class:"col"},Mm=L({__name:"CrvUsd.page",setup(e){const{show:t,crumbs:s}=We(Ie());$e(()=>{t.value=!0,s.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:"Select market for details",hint:!0}]});const a=et(),n=async i=>{await a.push({name:"crvusdmarket",params:{tab:"",marketAddr:i.address}})};return(i,l)=>(_(),S("div",Dm,[m(o(rm),{style:{"grid-column":"1 / -1"},onSelected:n}),d("div",Bm,[m(o(jp))]),d("div",Fm,[m(o(um)),m(o(Pm))])]))}}),Um=V(Mm,[["__scopeId","data-v-8c70214d"]]),Rm=["href"],xm={key:1},Em=L({__name:"Addresses",props:{market:{}},setup(e){const t=w(()=>{var n,i,l;return[{description:"Controller",address:(n=e.market)==null?void 0:n.address},{description:"Factory",address:(i=e.market)==null?void 0:i.factory},{description:"Llamma",address:(l=e.market)==null?void 0:l.llamma}]}),s=n=>`https://etherscan.io/address/${n}`,a=async n=>{await navigator.clipboard.writeText(n)};return(n,i)=>{const l=Ne,r=ce,c=G,u=U;return _(),A(u,{class:"addresses",title:"Addresses"},{default:g(()=>[m(c,{class:"addresses-table",rows:o(t)},{row:g(({item:{description:p,address:v}})=>[d("div",null,I(p),1),d("div",null,[v?(_(),S("a",{key:0,class:"font-mono",href:s(v),target:"_blank"},I(v),9,Rm)):(_(),S("span",xm,"?"))]),d("div",null,[v?(_(),A(r,{key:0,onClick:b=>a(v)},{default:g(()=>[m(l)]),_:2},1032,["onClick"])):F("",!0)])]),_:1},8,["rows"])]),_:1})}}}),Om=V(Em,[["__scopeId","data-v-965bdbba"]]),Wm={key:0},Nm={class:"token-info"},Km=["href"],Hm={key:1},Qm=L({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(l){return typeof l=="object"&&l.type==="token"}function s(l,r){return r?l==="collateral"?{type:"token",symbol:r.collateral_token.symbol,address:r.collateral_token.address}:{type:"token",symbol:r.stablecoin_token.symbol,address:r.stablecoin_token.address}:{type:"token",symbol:"?",address:"?"}}const a=w(()=>[{description:"Collateral",value:s("collateral",e.market)},{description:"Borrowed",value:s("borrowed",e.market)}]),n=l=>`https://etherscan.io/address/${l}`,i=async l=>{await navigator.clipboard.writeText(l)};return(l,r)=>{const c=_e,u=Ne,p=ce,v=G,b=U;return _(),A(b,{class:"properties",title:"Properties"},{default:g(()=>[m(v,{class:"properties-table",rows:o(a)},{row:g(({item:{description:f,value:h}})=>[d("div",null,I(f),1),t(h)?(_(),S("div",Wm,[d("div",Nm,[m(c,{chain:l.chain,address:h.address},null,8,["chain","address"]),d("div",null,I(h.symbol),1),d("div",null,[d("a",{class:"font-mono",href:n(h.address),target:"_blank"},I(h.address),9,Km)]),d("div",null,[m(p,{onClick:y=>i(h.address)},{default:g(()=>[m(u)]),_:2},1032,["onClick"])])])])):(_(),S("div",Hm,I(h),1))]),_:1},8,["rows"])]),_:1})}}}),zm=V(Qm,[["__scopeId","data-v-a5fd72e0"]]),jm={class:"dashboard-grid"},Gm=L({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){return(t,s)=>{const a=X,n=ve;return _(),S("div",jm,[m(n,{style:{"grid-area":"kpi1"},label:"Borrow Rate","has-value":!!t.market},{default:g(()=>{var i;return[m(a,{value:100*(((i=t.market)==null?void 0:i.rate)??0),type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi2"},label:"Borrowed","has-value":!!t.market},{default:g(()=>{var i;return[m(a,{value:(i=t.market)==null?void 0:i.borrowed,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi3"},label:"Borrowable","has-value":!!t.market},{default:g(()=>{var i;return[m(a,{value:(i=t.market)==null?void 0:i.borrowable,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(n,{style:{"grid-area":"kpi4"},label:"Loans","has-value":!!t.market},{default:g(()=>{var i;return[M(I(((i=t.market)==null?void 0:i.loans)??0),1)]}),_:1},8,["has-value"]),m(o($m),{style:{"grid-area":"rates"},market:t.market},null,8,["market"]),m(o(_m),{style:{"grid-area":"cap"},market:t.market},null,8,["market"]),m(o(gm),{style:{"grid-area":"loans"},market:t.market},null,8,["market"]),m(o(Im),{style:{"grid-area":"volume"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(zm),{style:{"grid-area":"properties"},market:t.market,chain:t.chain},null,8,["market","chain"]),m(o(Om),{style:{"grid-area":"addresses"},market:t.market,chain:t.chain},null,8,["market","chain"])])}}}),Xm=V(Gm,[["__scopeId","data-v-ebe45552"]]),Zm=e=>({timestamp:Ce(e.timestamp),proportion:e.proportion/100}),Ym=e=>({timestamp:Ce(e.dt),user:e.user.toLocaleLowerCase(),liquidator:e.liquidator.toLocaleLowerCase(),self:e.self,collateralReceived:e.collateral_received,collateralReceivedUsd:e.collateral_received_usd,stablecoinReceived:e.stablecoin_received,priceOracle:e.oracle_price,debt:e.debt,n1:e.n1,n2:e.n2,tx:e.tx.toLocaleLowerCase(),block:e.block}),Jm=e=>({timestamp:Ce(e.timestamp),selfCount:e.self_count,hardCount:e.hard_count,selfValue:e.self_value,hardValue:e.hard_value,price:e.price}),ev=e=>({softLiqUsers:e.soft_liquidation_users,liqablePositions:e.liquidatable_positions,liqableDebtUsd:e.liquidatable_pos_debt_usd,liqableCollatUsd:e.liquidatable_collateral_usd,liqableBorrowedUsd:e.liquidatable_borrowed_usd,medianHealth:e.median_health,avgHealth:e.average_health,collatRatio:e.collat_ratio}),tv=e=>({timestamp:Ce(e.timestamp),pctLossAverage:e.avg_pct_loss,pctLossMedian:e.median_pct_loss,absoluteLossAverage:e.avg_abs_loss,absoluteLossMedian:e.median_abs_loss,numTotalUsers:e.total_users,numUsersWithLosses:e.users_with_losses,ratio:e.ratio}),sv=e=>({decile:e.health_decile,collateralUsdValue:e.collateral,debt:e.debt,stablecoin:e.stablecoin}),Ge="https://prices.curve.fi";class av extends Te{async getSoftLiqRatios(t,s,a){return(await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/soft_liquidation_ratio`)).data.map(Zm)}async getLiqsDetailed(t,s,a){return(await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/history/detailed`)).data.map(Ym)}async getLiqsAggregate(t,s,a){return(await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/history/aggregated`)).data.map(Jm)}async getLiqOverview(t,s,a){const n=await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/overview?fetch_on_chain=true`);return ev(n)}async getLiqLosses(t,s,a){return(await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/losses/history`)).data.map(tv)}async getLiqHealthDeciles(t,s,a){return(await this.fetch(`${Ge}/v1/${t}/liquidations/${s}/${a}/health/distribution`)).data.map(sv)}}const nt=new av;function $t(){return{initialData:[],initialDataUpdatedAt:0}}function lt(e,t){return{enabled:w(()=>!!e.value&&(t?!!t.value:!0))}}function pa(e,t,s){return E({queryKey:["liqs-soft-liqs",s],queryFn:({queryKey:[,a]})=>nt.getSoftLiqRatios(e.value,t.value,a),...lt(s,t),...$t()})}function ma(e,t,s){return E({queryKey:["liqs-detailed",s],queryFn:({queryKey:[,a]})=>nt.getLiqsDetailed(e.value,t.value,a),...lt(s,t),...$t()})}function va(e,t,s){return E({queryKey:["liqs-aggregate",s],queryFn:({queryKey:[,a]})=>nt.getLiqsAggregate(e.value,t.value,a),...lt(s,t),...$t()})}function ha(e,t,s){return E({queryKey:["liqs-overview",s],queryFn:({queryKey:[,a]})=>nt.getLiqOverview(e.value,t.value,a),...lt(s,t)})}function _a(e,t,s){return E({queryKey:["liqs-losses",s],queryFn:({queryKey:[,a]})=>nt.getLiqLosses(e.value,t.value,a),...lt(s,t),...$t()})}function fa(e,t,s){return E({queryKey:["liqs-health-deciles",s],queryFn:({queryKey:[,a]})=>nt.getLiqHealthDeciles(e.value,t.value,a),...lt(s,t),...$t()})}const ov={class:"button-group"},ga=L({__name:"ChartLiqs",props:{liqs:{default:()=>[]}},setup(e){const t=P("count"),s=a=>{t.value!==a&&(t.value=a)};return(a,n)=>{const i=st,l=U;return _(),A(l,{title:"Self & Hard Liquidations"},{actions:g(()=>[d("div",ov,[m(i,{"model-value":o(t)==="count",onClick:n[0]||(n[0]=r=>s("count"))},{default:g(()=>n[2]||(n[2]=[M(" Count ")])),_:1},8,["model-value"]),m(i,{"model-value":o(t)==="value",onClick:n[1]||(n[1]=r=>s("value"))},{default:g(()=>n[3]||(n[3]=[M(" Value ")])),_:1},8,["model-value"])])]),default:g(()=>[o(t)==="count"?(_(),A(o(lv),{key:0,liqs:a.liqs},null,8,["liqs"])):(_(),A(o(iv),{key:1,liqs:a.liqs},null,8,["liqs"]))]),_:1})}}}),nv=L({__name:"ChartLiqsCount",props:{liqs:{default:()=>[]}},setup(e){const t=w(()=>Pe({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:i,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:l},min:0,max:n.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=w(()=>e.liqs.orderBy(r=>r.timestamp,"asc").groupBy(r=>r.timestamp).entries().map(([r])=>new Date(parseInt(r,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((r,c)=>c%8===0?r:"")),a=w(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(r=>({x:new Date(r.timestamp*1e3).toLocaleDateString(),y:r.selfCount}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(r=>({x:new Date(r.timestamp*1e3).toLocaleDateString(),y:r.hardCount}))}]),n=w(()=>Math.max(...e.liqs.groupBy(r=>r.timestamp).entries().map(([,r])=>r.reduce((c,u)=>c+u.selfCount+u.hardCount,0)))*1.1),i=r=>r,l=r=>`${W(r,1,"dollar")}${z(r)}`;return(r,c)=>{const u=qe;return _(),A(u,{options:o(t),series:o(a)},null,8,["options","series"])}}}),lv=V(nv,[["__scopeId","data-v-ab3233ed"]]),rv=L({__name:"ChartLiqsValue",props:{liqs:{default:()=>[]}},setup(e){const t=w(()=>Pe({chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:s.value,labels:{formatter:i,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:l},min:0,max:n.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})),s=w(()=>e.liqs.orderBy(r=>r.timestamp,"asc").groupBy(r=>r.timestamp).entries().map(([r])=>new Date(parseInt(r,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((r,c)=>c%8===0?r:"")),a=w(()=>[{name:"Self liquidations",data:Object.values(e.liqs).map(r=>({x:new Date(r.timestamp*1e3).toLocaleDateString(),y:r.selfValue}))},{name:"Hard liquidations",data:Object.values(e.liqs).map(r=>({x:new Date(r.timestamp*1e3).toLocaleDateString(),y:r.hardValue}))}]),n=w(()=>Math.max(...e.liqs.groupBy(r=>r.timestamp).entries().map(([,r])=>r.reduce((c,u)=>c+u.selfValue+u.hardValue,0)))*1.1),i=r=>r,l=r=>`${W(r,1,"dollar")}${z(r)}`;return(r,c)=>{const u=qe;return _(),A(u,{options:o(t),series:o(a)},null,8,["options","series"])}}}),iv=V(rv,[["__scopeId","data-v-b5487a92"]]),cv={ref:"chartRef",class:"chart"},ba=L({__name:"ChartLiqsMedianLoss",props:{losses:{}},setup(e){const t=N(),{chart:s,series:a}=ee({createChartOptions:J(),series:{type:"Area",name:"losses",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`${W(i,0,"percentage")}%`,minMove:.1},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(n);function n(){if(!s.value||!a.losses)return;const i=e.losses.map(l=>({time:l.timestamp,value:l.pctLossMedian})).uniqWith((l,r)=>l.time===r.time).orderBy(l=>l.time,"asc");i.length>0&&a.losses.setData(i),s.value.timeScale().fitContent()}return(i,l)=>{const r=U;return _(),A(r,{title:"Median Loss % Among Loans with Losses"},{default:g(()=>[d("div",cv,null,512)]),_:1})}}}),uv={ref:"chartRef",class:"chart"},ya=L({__name:"ChartLiqsLosersProportion",props:{losses:{}},setup(e){const t=N(),{chart:s,series:a}=ee({createChartOptions:J(),series:{type:"Area",name:"losses",options:w(()=>({priceFormat:{type:"custom",formatter:i=>`${W(i,0,"percentage")}%`,minMove:.1},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(n);function n(){if(!s.value||!a.losses)return;const i=e.losses.map(l=>({time:l.timestamp,value:l.numTotalUsers>0?100*l.numUsersWithLosses/l.numTotalUsers:0})).uniqWith((l,r)=>l.time===r.time).orderBy(l=>l.time,"asc");i.length>0&&a.losses.setData(i),s.value.timeScale().fitContent()}return(i,l)=>{const r=U;return _(),A(r,{title:"Proportion of Loans with Losses"},{default:g(()=>[d("div",uv,null,512)]),_:1})}}}),wa=L({__name:"ChartLiqsHealthDeciles",props:{deciles:{}},setup(e){const t=w(()=>Pe({chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:s.value,labels:{formatter:n,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:i}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:l=>{const r=l.series[0][l.dataPointIndex],c=l.series[1][l.dataPointIndex],u=l.series[2][l.dataPointIndex];return[`<div><b>Collat. (USD)</b>: ${i(c)}</div>`,`<div><b>Debt</b>: ${i(r)}</div>`,`<div><b>Stablecoin</b>: ${i(u)}</div>`].join("")}}})),s=w(()=>e.deciles.map(l=>l.decile)),a=w(()=>[{name:"Debt",data:Object.values(e.deciles).map(l=>l.debt)},{name:"Collateral",data:Object.values(e.deciles).map(l=>l.collateralUsdValue)},{name:"Stablecoin",data:Object.values(e.deciles).map(l=>l.stablecoin)}]),n=l=>l,i=l=>`$${W(l,0,"dollar")}${z(l)}`;return(l,r)=>{const c=qe,u=U;return _(),A(u,{title:"Debt & Assets per Health Deciles"},{default:g(()=>[m(c,{options:o(t),series:o(a)},null,8,["options","series"])]),_:1})}}}),dv={ref:"chartRef",class:"chart"},ka=L({__name:"ChartLiqsSoftLiqRatio",props:{ratios:{},pricesOracle:{}},setup(e){const t=N(),{items:s}=Le(()=>[{id:"percentage",label:"% of loans in soft liquidation",color:t.value.colorsArray[0]},{id:"collateral-price",label:"Collateral price ($)",color:t.value.colorsArray[1]}]),{chart:a,series:n}=ee({createChartOptions:J({leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"price",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`$${W(l,2,"dollar")}${z(l)}`},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.yellow,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"ratio",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${W(l,0,"percentage")}%`},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});Y(i);function i(){if(!a.value||!n.price||!n.ratio)return;const l=e.ratios.map(u=>({time:u.timestamp,value:u.proportion})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc"),r=l.length>0?l[0].time:0,c=e.pricesOracle.filter(u=>u.timestamp>=r).map(u=>({time:u.timestamp,value:u.priceOracle})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc");c.length>0&&n.price.setData(c),l.length>0&&n.ratio.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=Se,u=U;return _(),A(u,{title:"Soft Liquidations Ratio"},{"actions-secondary":g(()=>[m(c,{items:o(s)},null,8,["items"])]),default:g(()=>[d("div",dv,null,512)]),_:1})}}}),pv={ref:"chartRef",class:"chart"},$a=L({__name:"ChartLiquidatorRevenue",props:{discounts:{},liqs:{}},setup(e){const t=N(),{items:s}=Le(()=>[{id:"revenue",label:"Liquidator Revenue",color:t.value.colorsArray[0]},{id:"discount",label:"Discount",color:t.value.colorsArray[1]}]),{chart:a,series:n}=ee({createChartOptions:J({leftPriceScale:{visible:!0}}),series:[{type:"Area",name:"revenue",options:w(()=>({priceFormat:{type:"price",precision:0,minMove:1},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))},{type:"Area",name:"discount",options:w(()=>({priceFormat:{type:"percent",precision:6,minMove:1e-6},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.yellow,priceScaleId:"left",topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}]});Y(i);function i(){if(!a.value||!n.discount||!n.revenue)return;const l=e.liqs.map(u=>({time:u.timestamp,value:u.debt})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc").reduce((u,p)=>{const v=u.length>0?u[u.length-1].value:0;return u.push({time:p.time,value:p.value+v}),u},[]),r=l.length>0?l[0].time:0,c=e.discounts.filter(u=>u.timestamp>=r).map(u=>({time:u.timestamp,value:u.discount*100})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc");l.length>0&&n.revenue.setData(l),c.length>0&&n.discount.setData(c),a.value.timeScale().fitContent()}return(l,r)=>{const c=Se,u=U;return _(),A(u,{title:"Liquidator Revenue"},{"actions-secondary":g(()=>[m(c,{items:o(s)},null,8,["items"])]),default:g(()=>[d("div",pv,null,512)]),_:1})}}}),mv={key:0,class:"collateral end"},vv={key:1,class:"end"},hv={key:2},_v=L({__name:"TableLiqOverview",props:{overview:{}},setup(e){const t=w(()=>{if(!e.overview)return[];const a=e.overview.liqableDebtUsd,n=e.overview.liqableCollatUsd+e.overview.liqableBorrowedUsd,i=a-n;return i<=0?[]:[{description:"Bad debt",value:i,type:"bad-debt"}]}),s=w(()=>{var a,n,i,l,r,c,u;return[{description:"Users in soft liquidation",value:((a=e.overview)==null?void 0:a.softLiqUsers)??0,type:"number"},{description:"Median health",value:((n=e.overview)==null?void 0:n.medianHealth)??0,type:"percentage"},{description:"Collaterization ratio",value:((i=e.overview)==null?void 0:i.collatRatio)??0,type:"percentage"},{description:"Liquidatable positions",value:((l=e.overview)==null?void 0:l.liqablePositions)??0,type:"number"},{description:"Liquidatable positions' debt",value:((r=e.overview)==null?void 0:r.liqableDebtUsd)??0,type:"dollar"},{description:"Liquidatable collateral (token / crvUSD)",value:[((c=e.overview)==null?void 0:c.liqableCollatUsd)??0,((u=e.overview)==null?void 0:u.liqableBorrowedUsd)??0],type:"collateral"},...t.value]});return(a,n)=>{const i=X,l=G,r=U;return _(),A(r,{title:"General Health Metrics"},{default:g(()=>[m(l,{class:"liq-overview-table",rows:o(s)},{row:g(({item:{description:c,value:u,type:p}})=>[d("div",null,I(c),1),p==="collateral"?(_(),S("div",mv,[m(i,{value:u[0],"show-zero":!0,type:"dollar"},null,8,["value"]),n[0]||(n[0]=M(" / ")),m(i,{value:u[1],"show-zero":!0,type:"dollar"},null,8,["value"])])):(_(),S("div",vv,[p==="bad-debt"?(_(),A(i,{key:0,class:"red",value:u,"show-zero":!0,type:"dollar"},null,8,["value"])):p!=="number"?(_(),A(i,{key:1,value:u,"show-zero":!0,type:p},null,8,["value","type"])):(_(),S("span",hv,I(u),1))]))]),_:1},8,["rows"])]),_:1})}}}),Ca=V(_v,[["__scopeId","data-v-6c0a67c5"]]),fv={class:"address"},gv=["href"],bv={class:"end"},yv={class:"end"},wv=L({__name:"TableTopLiquidators",props:{liqs:{}},setup(e){const t=w(()=>e.liqs.groupBy(s=>s.liquidator).entries().map(([s,a])=>({liquidator:s,count:a.length,value:a.reduce((n,i)=>n+i.collateralReceivedUsd,0)})).orderBy(s=>s.value,"desc").take(5));return(s,a)=>{const n=X,i=G,l=U;return _(),A(l,{title:"Top Liquidators"},{default:g(()=>[m(i,{class:"liquidators-table",rows:o(t),columns:["Address",{label:"Count",align:"end"},{label:"Value",align:"end"}]},{row:g(({item:r})=>[d("div",fv,[d("a",{href:`https://etherscan.io/address/${r.liquidator}`,target:"_blank"},I(o(ke)(r.liquidator,8)),9,gv)]),d("div",bv,[m(n,{value:r.count,precision:0,"show-zero":!0},null,8,["value"])]),d("div",yv,[m(n,{value:r.value,precision:1,type:"dollar"},null,8,["value"])])]),_:1},8,["rows"])]),_:1})}}}),Aa=V(wv,[["__scopeId","data-v-40d6b07d"]]),kv={style:{display:"flex"}},$v={ref:"chartRef",class:"chart"},Sa=L({__name:"ChartCollateralRatio",props:{ratios:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Area",name:"ratios",options:w(()=>({priceFormat:{type:"custom",formatter:l=>`${W(l,0,"percentage")}%`,minMove:.1},lineWidth:2,lineType:le.WithSteps,lineColor:t.value.colors.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}))}});Y(i);function i(){if(!a.value||!n.ratios)return;const l=e.ratios.map(r=>({time:r.timestamp,value:r.ratio*100})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");l.length>0&&n.ratios.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=U;return _(),A(c,{ref_key:"card",ref:s,title:"Collateral Ratio"},{actions:g(()=>[d("div",kv,[m(o(ge),{filename:"collateral_ratio",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",$v,null,512)]),_:1},512)}}}),Cv={style:{display:"flex","align-items":"center"}},Av={ref:"chartRef",class:"chart"},Sv=L({__name:"ChartEquity",props:{equity:{}},setup(e){const t=N(),s=ne("card"),{chart:a,series:n}=ee({createChartOptions:J(),series:{type:"Baseline",name:"equity",options:w(()=>{const{colors:l}=t.value;return{priceFormat:{type:"custom",formatter:r=>`$${W(r,0,"dollar")}${z(r)}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:l.green,bottomLineColor:l.red,lastValueVisible:!1,priceLineVisible:!1}})}});Y(i);function i(){if(!a.value||!n.equity)return;const l=e.equity.map(r=>({time:r.timestamp,value:r.equity})).uniqWith((r,c)=>r.time===c.time).orderBy(r=>r.time,"asc");l.length>0&&n.equity.setData(l),a.value.timeScale().fitContent()}return(l,r)=>{const c=Mt,u=U;return _(),A(u,{ref_key:"card",ref:s,title:"Equity"},{actions:g(()=>[d("div",Cv,[m(c,{style:{"margin-right":"1rem"}},{default:g(()=>r[0]||(r[0]=[d("span",null,[M(" This chart shows the difference between the value of the collateral and the debt."),d("br"),d("br"),M(" Positive values indicate net equity (collateral exceeds debt),"),d("br"),M(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)])),_:1}),m(o(ge),{filename:"equity",series:o(n)},null,8,["series"]),m(o(fe),{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:g(()=>[d("div",Av,null,512)]),_:1},512)}}}),Lv={class:"dashboard-grid"},Tv=L({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=w(()=>{var T;return(T=e.market)==null?void 0:T.address}),{isFetching:s,data:a}=ha(P("crvusd"),x(()=>e.chain),t),{isFetching:n,data:i}=Et(x(()=>e.market)),l=w(()=>i.value.map(({timestamp:T,priceOracle:D})=>({timestamp:T,priceOracle:D}))),r=w(()=>i.value.map(({timestamp:T,discountLiquidation:D})=>({timestamp:T,discount:D}))),c=w(()=>i.value.map(({timestamp:T,totalCollateralUsd:D,totalDebt:q})=>({timestamp:T,ratio:D/q}))),{isFetching:u,data:p}=pa(P("crvusd"),x(()=>e.chain),t),{isFetching:v,data:b}=va(P("crvusd"),x(()=>e.chain),t),{isFetching:f,data:h}=ma(P("crvusd"),x(()=>e.chain),t),{isFetching:y,data:k}=fa(P("crvusd"),x(()=>e.chain),t),{isFetching:C,data:$}=_a(P("crvusd"),x(()=>e.chain),t);return(T,D)=>(_(),S("div",Lv,[m(o(Ca),{overview:o(a),loading:o(s)},null,8,["overview","loading"]),m(o(ka),{ratios:o(p),"prices-oracle":o(l),loading:o(u)||o(n)},null,8,["ratios","prices-oracle","loading"]),m(o(ba),{losses:o($),loading:o(C)},null,8,["losses","loading"]),m(o(ya),{losses:o($),loading:o(C)},null,8,["losses","loading"]),m(o(wa),{deciles:o(k),loading:o(y)},null,8,["deciles","loading"]),m(o(Sa),{ratios:o(c),loading:o(n)},null,8,["ratios","loading"]),m(o(ga),{liqs:o(b),loading:o(v)},null,8,["liqs","loading"]),m(o(Aa),{liqs:o(h),loading:o(f)},null,8,["liqs","loading"]),m(o($a),{discounts:o(r),liqs:o(h),loading:o(n)||o(f)},null,8,["discounts","liqs","loading"])]))}}),Iv=V(Tv,[["__scopeId","data-v-8560cacf"]]),Vv={class:"controls"},qv={ref:"chartRef",class:"chart"},Pv=L({__name:"ChartOHLC",props:{ohlc:{}},setup(e){const t=N(),s=P(!1),a=P(!1);let n=1,i=0;const{chart:l,series:r}=ee({createChartOptions:J({localization:{priceFormatter:p=>u(p)}}),series:[{type:"Candlestick",name:"ohlc",options:w(()=>{const{colors:p}=t.value;return{priceFormat:{type:"price",precision:6,minMove:1e-6},upColor:p.green,borderUpColor:p.green,wickUpColor:p.green,downColor:p.red,borderDownColor:p.red,wickDownColor:p.red}})},{type:"Line",name:"oracle",options:w(()=>({priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:le.WithSteps,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(c);function c(){if(!l.value||!r.ohlc||!r.oracle)return;const p=s.value?-1:1,v=e.ohlc.map(f=>({time:f.time,open:Math.pow(f.open,p),high:Math.pow(f.high,p),low:Math.pow(f.low,p),close:Math.pow(f.close,p)})).uniqWith((f,h)=>f.time===h.time).orderBy(f=>f.time,"asc");v.length>0&&(r.ohlc.setData(v),i=Math.min(...v.map(f=>f.low)),n=Math.max(...v.map(f=>f.high)));const b=e.ohlc.map(f=>({time:f.time,value:Math.pow(f.oracle_price,p)})).uniqWith((f,h)=>f.time===h.time).orderBy(f=>f.time,"asc");b.length>0&&r.oracle.setData(b),r.oracle.applyOptions({visible:a.value}),l.value.timeScale().fitContent()}function u(p){const v=n-i,b=v>1?v-Math.floor(v):v,f=-Math.floor(Math.log10(b)+1)+2;return`${W(p,f,"dollar")}${z(p)}`}return(p,v)=>{const b=st,f=U;return _(),A(f,{title:"Price"},{actions:g(()=>[d("div",Vv,[m(b,{"model-value":o(a),onClick:v[0]||(v[0]=h=>a.value=!o(a))},{default:g(()=>v[2]||(v[2]=[M(" Oracle Price ")])),_:1},8,["model-value"]),m(b,{"model-value":o(s),onClick:v[1]||(v[1]=h=>s.value=!o(s))},{default:g(()=>v[3]||(v[3]=[M(" Invert ")])),_:1},8,["model-value"])])]),default:g(()=>[d("div",qv,null,512)]),_:1})}}}),La=V(Pv,[["__scopeId","data-v-0c3f4c11"]]),Dv={class:"end"},Bv=["href"],Fv={class:"end"},Mv=["href"],Uv=L({__name:"TableEvents",props:{events:{},count:{}},emits:["page"],setup(e,{emit:t}){const s=t,{page:a,onPage:n}=gs(),i=qt(a,200);H(i,p=>{s("page",p)});const{relativeTime:l}=Ve(),r=p=>p<1?p.toFixed(4):p>1e3?p.toFixed(0):p.toFixed(2),c=p=>{var v,b;return r(((v=p.deposit)==null?void 0:v.amount)??((b=p.withdrawal)==null?void 0:b.amount_collateral)??0)},u=p=>p.deposit?"Deposit":p.withdrawal?"Withdrawal":"Unknown";return(p,v)=>{const b=De,f=G,h=U;return _(),A(h,{title:"Events"},{actions:g(()=>[m(b,{"items-count":p.count,"items-per-page":10,page:o(a),onPage:o(n)},null,8,["items-count","page","onPage"])]),default:g(()=>[m(f,{class:"events-table",rows:p.events,columns:["Type",{label:"Amount",align:"end"},"","Provider",{label:"Time",align:"end"}]},{row:g(({item:y})=>[d("div",null,I(u(y)),1),d("div",Dv,I(c(y)),1),v[2]||(v[2]=d("div",null,null,-1)),d("div",null,[d("a",{href:`https://etherscan.io/address/${y.provider}`,target:"_blank",onClick:v[0]||(v[0]=pe(()=>{},["stop"]))},I(o(ke)(y.provider)),9,Bv)]),d("div",Fv,[d("a",{href:`https://etherscan.io/tx/${y.transaction_hash}`,target:"_blank",onClick:v[1]||(v[1]=pe(()=>{},["stop"]))},I(o(l)(y.timestamp)),9,Mv)])]),_:1},8,["rows"])]),_:1})}}}),Ta=V(Uv,[["__scopeId","data-v-3bdcd11f"]]),Rv={class:"end"},xv=["href"],Ev={class:"end"},Ov=["href"],Wv=["href"],Nv={class:"end"},Kv=["href"],Hv=L({__name:"TableTrades",props:{trades:{},count:{},chain:{}},emits:["page"],setup(e,{emit:t}){const s=t,{page:a,onPage:n}=gs(),i=qt(a,200);H(i,c=>{s("page",c)});const{relativeTime:l}=Ve(),r=c=>c<1?c.toFixed(4):c>1e3?c.toFixed(0):c.toFixed(2);return(c,u)=>{const p=De,v=_e,b=G,f=U;return _(),A(f,{title:"Trades"},{actions:g(()=>[m(p,{"items-count":c.count,"items-per-page":10,page:o(a),onPage:o(n)},null,8,["items-count","page","onPage"])]),default:g(()=>[m(b,{class:"trades-table",rows:c.trades,columns:[{label:"Bought",align:"end"},"","",{label:"Sold",align:"end"},"","","Market Maker",{label:"Time",align:"end"}]},{row:g(({item:h})=>[d("div",Rv,I(r(h.amount_bought)),1),m(v,{chain:c.chain,address:h.token_bought.address},null,8,["chain","address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${h.token_bought.address}`},I(h.token_bought.symbol),9,xv)]),d("div",Ev,I(r(h.amount_sold)),1),m(v,{chain:c.chain,address:h.token_sold.address},null,8,["chain","address"]),d("div",null,[d("a",{class:"font-mono",target:"_blank",href:`https://etherscan.io/address/${h.token_sold.address}`},I(h.token_sold.symbol),9,Ov)]),d("div",null,[d("a",{href:`https://etherscan.io/address/${h.buyer}`,target:"_blank",onClick:u[0]||(u[0]=pe(()=>{},["stop"]))},I(o(ke)(h.buyer)),9,Wv)]),d("div",Nv,[d("a",{href:`https://etherscan.io/tx/${h.transaction_hash}`,target:"_blank",onClick:u[1]||(u[1]=pe(()=>{},["stop"]))},I(o(l)(h.timestamp)),9,Kv)])]),_:1},8,["rows"])]),_:1})}}}),Ia=V(Hv,[["__scopeId","data-v-e9618012"]]),Qv={class:"dashboard-grid"},zv=L({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=w(()=>{var p;return(p=e.market)==null?void 0:p.llamma}),{isFetching:s,data:a}=ys(P("crvusd"),t,x(()=>e.chain)),n=P(1),{isFetching:i,data:l}=da(P("crvusd"),t,x(()=>e.chain),n),r=P(1),{isFetching:c,data:u}=ua(P("crvusd"),t,x(()=>e.chain),r);return(p,v)=>{var b,f,h,y;return _(),S("div",Qv,[m(o(La),{style:{"grid-area":"ohlc"},ohlc:o(a)??[],loading:o(s)},null,8,["ohlc","loading"]),m(o(Ia),{style:{"grid-area":"trades"},trades:((b=o(l))==null?void 0:b.trades)??[],count:((f=o(l))==null?void 0:f.count)??0,chain:p.chain,loading:o(i),onPage:v[0]||(v[0]=k=>n.value=k)},null,8,["trades","count","chain","loading"]),m(o(Ta),{style:{"grid-area":"events"},events:((h=o(u))==null?void 0:h.events)??[],count:((y=o(u))==null?void 0:y.count)??0,loading:o(c),onPage:v[1]||(v[1]=k=>r.value=k)},null,8,["events","count","loading"])])}}}),jv=V(zv,[["__scopeId","data-v-b30ae92c"]]),Gv={class:"dashboard"},Xv=L({__name:"Market.page",setup(e){const{show:t,crumbs:s}=We(Ie()),a=we("marketAddr"),{isFetching:n,data:i}=fs(),l=w(()=>i.value.find(u=>u.address===a.value));H(l,u=>{s.value=[{id:"crvusd",label:"crvUSD",pathName:"crvusd"},{id:"market",label:`Market: ${(u==null?void 0:u.name)??"?"}`}]},{immediate:!0}),$e(()=>{t.value=!0});const{tabActive:r,tabActiveIndex:c}=at(["overview","trading","liquidations"],"crvusdmarket",()=>({marketAddr:a.value}));return(u,p)=>{const v=tt,b=Fe,f=Be;return _(),S("div",Gv,[m(v,{class:R({loading:o(n)})},null,8,["class"]),!o(n)&&o(l)?(_(),A(f,{key:0,active:o(c),onTab:p[0]||(p[0]=h=>c.value=h.index)},{default:g(()=>[m(b,{header:"Overview"},{default:g(()=>[(_(),A(re,null,[o(r)==="overview"?(_(),A(Xm,{key:0,market:o(l),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1}),m(b,{header:"Trading"},{default:g(()=>[(_(),A(re,null,[o(r)==="trading"?(_(),A(jv,{key:0,market:o(l),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1}),m(b,{header:"Liquidations"},{default:g(()=>[(_(),A(re,null,[o(r)==="liquidations"?(_(),A(Iv,{key:0,market:o(l),chain:"ethereum"},null,8,["market"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),Zv=V(Xv,[["__scopeId","data-v-496654d0"]]);function Ze(e){return e?e.total_assets_usd+e.collateral_balance_usd:0}const Yv=e=>({name:e.name,controller:e.controller.toLocaleLowerCase(),vault:e.vault.toLocaleLowerCase(),llamma:e.llamma.toLocaleLowerCase(),policy:e.policy.toLocaleLowerCase(),oracle:e.oracle.toLocaleLowerCase(),rate:parseFloat(e.rate),borrow_apy:parseFloat(e.borrow_apy),lend_apy:parseFloat(e.lend_apy),n_loans:e.n_loans,price_oracle:parseFloat(e.price_oracle),amm_price:parseFloat(e.amm_price),total_debt:parseFloat(e.total_debt),total_assets:parseFloat(e.total_assets),total_debt_usd:parseFloat(e.total_debt_usd),total_assets_usd:parseFloat(e.total_assets_usd),minted:parseFloat(e.minted),redeemed:parseFloat(e.redeemed),minted_usd:parseFloat(e.minted_usd),redeemed_usd:parseFloat(e.redeemed_usd),collateral_balance:parseFloat(e.collateral_balance),borrowed_balance:parseFloat(e.borrowed_balance),collateral_balance_usd:parseFloat(e.collateral_balance_usd),borrowed_balance_usd:parseFloat(e.borrowed_balance_usd),collateral_token:{symbol:e.collateral_token.symbol,address:e.collateral_token.address.toLocaleLowerCase()},borrowed_token:{symbol:e.borrowed_token.symbol,address:e.borrowed_token.address.toLocaleLowerCase()}}),Jv=e=>{const t=parseFloat(e.rate),s=parseFloat(e.borrow_apy)/100,a=parseFloat(e.lend_apy)/100,n=e.n_loans,i=parseFloat(e.price_oracle),l=parseFloat(e.amm_price),r=parseFloat(e.total_debt),c=parseFloat(e.total_debt_usd),u=parseFloat(e.total_assets),p=parseFloat(e.total_assets_usd),v=parseFloat(e.minted),b=parseFloat(e.redeemed),f=parseFloat(e.collateral_balance),h=parseFloat(e.collateral_balance_usd),y=parseFloat(e.borrowed_balance),k=parseFloat(e.borrowed_balance_usd),C=Ce(e.timestamp),$=e.liquidation_discount,T=e.loan_discount;return{rate:t,borrowApy:s,lendApy:a,numLoans:n,priceOracle:i,ammPrice:l,totalDebt:r,totalDebtUsd:c,totalAssets:u,totalAssetsUsd:p,minted:v,redeemed:b,collateralBalance:f,collateralBalanceUsd:h,borrowedBalance:y,borrowedBalanceUsd:k,timestamp:C,discountLiquidation:$,discountLoan:T}},es="https://prices.curve.fi";class eh extends Te{async getChains(){return this.fetch(`${es}/v1/lending/chains`).then(t=>t.data)}async getMarkets(t){return(await this.fetch(`${es}/v1/lending/markets/${t}?fetch_on_chain=true&page=1&per_page=100`)).data.map(Yv)}async getSnapshots(t,s){return(await this.fetch(`${es}/v1/lending/markets/${t}/${s}/snapshots?fetch_on_chain=true&agg=day`)).data.map(Jv)}}const ws=new eh;function th(e){return w(()=>{var t;return(t=e.value)==null?void 0:t.controller})}function sh(){return{initialData:[],initialDataUpdatedAt:0}}function ah(){return E({queryKey:["llama-markets-chains"],queryFn:()=>ws.getChains(),initialData:["ethereum","arbitrum"],initialDataUpdatedAt:0})}function Va(e){return E({queryKey:["llama-markets",e],queryFn:({queryKey:[,t]})=>ws.getMarkets(t)})}function rt(e,t){return E({queryKey:["llama-market-snapshots",th(e)],queryFn:({queryKey:[,s]})=>ws.getSnapshots(t.value,s),...sh(),enabled:w(()=>!!e.value&&!!t.value)})}const oh={class:"end"},nh={class:"end"},lh={class:"end"},rh={class:"end"},ih={class:"end"},ch={class:"end"},uh=L({__name:"TableMarkets",props:{pairs:{default:()=>[]},loading:{type:Boolean},type:{},chain:{}},emits:["selected"],setup(e,{emit:t}){const s=t,a=w(()=>e.type==="long"?"Markets - Long":"Markets - Short"),n=w(()=>e.pairs.map(r=>({count:(r.long?1:0)+(r.short?1:0),...r})).orderBy([r=>r.count,({long:r,short:c})=>Ze(r)+Ze(c)],["desc","desc"]).map(({long:r,short:c})=>e.type==="long"?r:c));function i(r){return r.name.replace(/(-long|-short)/i,"")}const l=r=>e.type==="long"?r.collateral_token.address:r.borrowed_token.address;return(r,c)=>{const u=_e,p=X,v=G,b=U;return _(),A(b,{title:o(a),loading:r.loading},{default:g(()=>[m(v,{class:"markets-table","expand-side":"left",rows:o(n),columns:["","","Name",{label:"Borrow Rate",align:"end"},{label:"Lend Rate",align:"end"},{label:"TVL",align:"end"},{label:"Loans",align:"end"}],onSelected:c[0]||(c[0]=f=>s("selected",f))},{row:g(({item:f})=>[f?(_(),S(te,{key:0},[m(u,{chain:r.chain,address:l(f)},null,8,["chain","address"]),d("div",null,I(i(f)),1),d("div",oh,[f.borrow_apy?(_(),A(p,{key:0,value:f.borrow_apy,type:"percentage"},null,8,["value"])):F("",!0)]),d("div",nh,[f.lend_apy?(_(),A(p,{key:0,value:f.lend_apy,type:"percentage"},null,8,["value"])):F("",!0)]),d("div",lh,[o(Ze)(f)?(_(),A(p,{key:0,value:o(Ze)(f),type:"dollar"},null,8,["value"])):F("",!0)]),d("div",rh,I(f.n_loans),1)],64)):F("",!0)]),"row-aggregation":g(()=>[c[1]||(c[1]=d("div",null,null,-1)),c[2]||(c[2]=d("div",null,null,-1)),c[3]||(c[3]=d("div",null,null,-1)),c[4]||(c[4]=d("div",null,null,-1)),c[5]||(c[5]=d("div",null,null,-1)),d("div",ih,[m(p,{value:o(n).filter(f=>f).map(f=>f).reduce((f,h)=>f+o(Ze)(h),0),type:"dollar"},null,8,["value"])]),d("div",ch,I(o(n).filter(f=>f).map(f=>f).reduce((f,h)=>f+h.n_loans,0)),1)]),"row-details":g(()=>c[6]||(c[6]=[M("   ")])),_:1},8,["rows"])]),_:1},8,["title","loading"])}}}),Bs=V(uh,[["__scopeId","data-v-cad97588"]]),dh={class:"dashboard"},ph={class:"toolbar"},mh={class:"markets"},vh={class:"kpis"},hh={class:"markets"},_h={class:"kpis"},fh=L({__name:"LlamaLend.page",setup(e){const t=we("chain"),s=w({get(){return t.value?t.value:"ethereum"},set(y){t.value=y}}),a=P(""),n=w(()=>i.value.filter(({long:y,short:k})=>{const C=a.value.toLocaleLowerCase().split(" ");return(T=>C.some(D=>T.toLocaleLowerCase().includes(D)))(`${(y==null?void 0:y.name)??""}${(k==null?void 0:k.name)??""}`)})),i=w(()=>{const y=["crvusd"],k=(r.value??[]).map(T=>({market:T,isLong:y.includes(T.borrowed_token.symbol.toLocaleLowerCase()),isShort:y.includes(T.collateral_token.symbol.toLocaleLowerCase())})).filter(({isLong:T,isShort:D})=>T||D),C=[],$=new Set;for(const{market:T,isLong:D,isShort:q}of k){if($.has(T.controller))continue;$.add(T.controller);const B=k.find(ue=>ue.market.borrowed_token.address===T.collateral_token.address&&ue.market.collateral_token.address===T.borrowed_token.address);B&&$.add(B.market.controller),C.push({long:D?T:B==null?void 0:B.market,short:q?T:B==null?void 0:B.market})}return C}),{isFetching:l,data:r}=Va(s),{data:c}=ah(),{show:u,crumbs:p}=We(Ie());$e(()=>{u.value=!0,p.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:s.value})},{id:"market",label:"Select market for details",hint:!0}]});const v=et(),b=async y=>{y&&await v.push({name:"llamalendmarket",params:{tab:"",chain:s.value,marketAddr:y.controller}})},f=y=>n.value.map(k=>y==="long"?k.long:k.short).filter(k=>!!k).reduce((k,C)=>k+C.total_debt_usd,0),h=y=>{const k=n.value.map(C=>y==="long"?C.long:C.short).filter(C=>!!C).reduce(({debt:C,assets:$},T)=>({debt:C+T.total_debt_usd,assets:$+T.total_assets_usd}),{debt:0,assets:0});return k.assets===0?0:k.debt/k.assets*100};return(y,k)=>{const C=be,$=X,T=ve;return _(),S("div",dh,[(_(),A(Dt,{to:"#toolbar"},[d("div",ph,[m(C,{modelValue:o(a),"onUpdate:modelValue":k[0]||(k[0]=D=>ie(a)?a.value=D:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(Ot,{class:"chain-select",chain:o(s),chains:o(c),onSelectChain:k[1]||(k[1]=D=>s.value=D==="all"?"ethereum":D)},null,8,["chain","chains"])])])),d("div",mh,[d("div",vh,[m(T,{label:"Open Interest","has-value":!o(l)},{default:g(()=>[m($,{value:f("long"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(T,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(l),tooltip:"Aggregate debt divided by aggregate assets"},{default:g(()=>[m($,{value:h("long"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(Bs),{style:{"grid-column":"1"},type:"long",pairs:o(n),loading:o(l),chain:o(s),onSelected:b},null,8,["pairs","loading","chain"])]),d("div",hh,[d("div",_h,[m(T,{label:"Open Interest","has-value":!o(l)},{default:g(()=>[m($,{value:f("short"),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(T,{"tooltip-type":"icon",label:"Average Utilization Rate","has-value":!o(l),tooltip:"Aggregate debt divided by aggregate assets"},{default:g(()=>[m($,{value:h("short"),type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])]),m(o(Bs),{style:{"grid-column":"2"},type:"short",pairs:o(n),loading:o(l),chain:o(s),onSelected:b},null,8,["pairs","loading","chain"])])])}}}),gh=V(fh,[["__scopeId","data-v-063c3eac"]]),bh={style:{display:"flex"}},yh={ref:"chartRef",class:"chart"},wh=L({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(e){const t=N(),{items:s,toggles:a,disabled:n}=Le(()=>{const{blue:v,yellow:b,purple:f}=t.value.colors;return[{id:"supply",label:"Supply",color:v},{id:"debt",label:"Debt",color:b},{id:"util",label:"Util %",color:f,togglable:!0}]}),{isFetching:i,data:l}=rt(x(()=>e.market),x(()=>e.chain)),r=ne("card"),{chart:c,series:u}=ee({createChartOptions:J(w(()=>({leftPriceScale:{visible:a.util.value}}))),series:[{type:"Line",name:"supply",options:w(()=>({priceFormat:{type:"custom",formatter:v=>`$${W(v,0,"dollar")}${z(v)}`,minMove:.01},lineWidth:2,color:t.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"debt",options:w(()=>({priceFormat:{type:"custom",formatter:v=>`$${W(v,0,"dollar")}${z(v)}`,minMove:.01},lineWidth:2,color:t.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"util",options:w(()=>({priceFormat:{type:"custom",formatter:v=>`${Math.round(v*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:t.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(p);function p(){var h,y,k,C;if(!c.value||!u.supply||!u.debt||!u.util)return;const v=l.value.map($=>({time:$.timestamp,value:$.totalAssetsUsd})).uniqWith(($,T)=>$.time===T.time).orderBy($=>$.time,"asc"),b=l.value.map($=>({time:$.timestamp,value:$.totalDebtUsd})).uniqWith(($,T)=>$.time===T.time).orderBy($=>$.time,"asc"),f=(a.util.value?v:[]).zip(b).map(([$,T])=>({time:T.time,value:$.value>0?T.value/$.value:0})).uniqWith(($,T)=>$.time===T.time).orderBy($=>$.time,"asc");if(u.supply.setData(v),u.debt.setData(b),u.util.setData(f),u.util.applyOptions({visible:a.util.value}),v.length>0||b.length>0){const $=Math.min(((h=v.at(0))==null?void 0:h.time)??1/0,((y=b.at(0))==null?void 0:y.time)??1/0),T=Math.max(((k=v.at(-1))==null?void 0:k.time)??-1/0,((C=b.at(-1))==null?void 0:C.time)??-1/0);c.value.timeScale().setVisibleRange({from:$,to:T})}}return(v,b)=>{const f=Se,h=U;return _(),A(h,{ref_key:"card",ref:r,title:"Supply & Debt",loading:o(i)},{actions:g(()=>[d("div",bh,[m(o(ge),{filename:"supply_debt_util",series:o(u)},null,8,["series"]),m(o(fe),{chart:o(c),target:o(r)},null,8,["chart","target"])])]),"actions-secondary":g(()=>[m(f,{items:o(s),disabled:o(n),onToggle:b[0]||(b[0]=y=>o(a)[y].value=!o(a)[y].value)},null,8,["items","disabled"])]),default:g(()=>[d("div",yh,null,512)]),_:1},8,["loading"])}}}),kh={style:{display:"flex"}},$h={ref:"chartRef",class:"chart"},Ch=L({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(x(()=>e.market),x(()=>e.chain)),a=N(),n=w(()=>e.market?e.market.collateral_token.symbol:"?"),i=w(()=>e.market?e.market.borrowed_token.symbol:"?"),{items:l}=Le(()=>[{id:n.value,label:n.value,color:a.value.colors.blue},{id:i.value,label:i.value,color:a.value.colors.yellow}]),r=P(!0),c=ne("card"),{chart:u,series:p}=ee({createChartOptions:J(),series:[{type:"Line",name:"collateral",options:w(()=>({priceFormat:{type:"custom",formatter:b},lineWidth:2,color:a.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"borrowed",options:w(()=>({priceFormat:{type:"custom",formatter:b},lineWidth:2,color:a.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(v);function v(){var k,C,$,T;if(!u.value||!p.collateral||!p.borrowed)return;const f=r.value,h=s.value.map(D=>({time:D.timestamp,value:f?D.collateralBalanceUsd:D.collateralBalance})).uniqWith((D,q)=>D.time===q.time).orderBy(D=>D.time,"asc"),y=s.value.map(D=>({time:D.timestamp,value:f?D.borrowedBalanceUsd:D.borrowedBalance})).uniqWith((D,q)=>D.time===q.time).orderBy(D=>D.time,"asc");if(h.length>0&&p.collateral.setData(h),y.length>0&&p.borrowed.setData(y),h.length>0||y.length>0){const D=Math.min(((k=h.at(0))==null?void 0:k.time)??1/0,((C=y.at(0))==null?void 0:C.time)??1/0),q=Math.max((($=h.at(-1))==null?void 0:$.time)??-1/0,((T=y.at(-1))==null?void 0:T.time)??-1/0);u.value.timeScale().setVisibleRange({from:D,to:q})}}function b(f){return`${r.value?"$":""}${W(f,0,"dollar")}${z(f)}`}return(f,h)=>{const y=st,k=Se,C=U;return _(),A(C,{ref_key:"card",ref:c,title:"Collateral",loading:o(t)},{actions:g(()=>[d("div",kh,[m(y,{style:{"margin-right":"1rem"},"model-value":o(r),onClick:h[0]||(h[0]=$=>r.value=!o(r))},{default:g(()=>h[1]||(h[1]=[M(" Dollars ")])),_:1},8,["model-value"]),m(o(ge),{filename:"collateral",series:o(p)},null,8,["series"]),m(o(fe),{chart:o(u),target:o(c)},null,8,["chart","target"])])]),"actions-secondary":g(()=>[m(k,{items:o(l)},null,8,["items"])]),default:g(()=>[d("div",$h,null,512)]),_:1},8,["loading"])}}}),Ah={style:{display:"flex"}},Sh={ref:"chartRef",class:"chart"},Lh=L({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(x(()=>e.market),x(()=>e.chain)),a=N(),n=ne("card"),{chart:i,series:l}=ee({createChartOptions:J(),series:{type:"Histogram",name:"loans",options:w(()=>({color:a.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});Y(r);function r(){if(!i.value||!l.loans)return;const c=s.value.map(u=>({time:u.timestamp,value:u.numLoans})).uniqWith((u,p)=>u.time===p.time).orderBy(u=>u.time,"asc");if(c.length>0){l.loans.setData(c);const u=c[0].time,p=c[c.length-1].time;i.value.timeScale().setVisibleRange({from:u,to:p})}}return(c,u)=>{const p=U;return _(),A(p,{ref_key:"card",ref:n,title:"Loans",loading:o(t)},{actions:g(()=>[d("div",Ah,[m(o(ge),{filename:"loans",series:o(l)},null,8,["series"]),m(o(fe),{chart:o(i),target:o(n)},null,8,["chart","target"])])]),default:g(()=>[d("div",Sh,null,512)]),_:1},8,["loading"])}}}),Th={style:{display:"flex"}},Ih={ref:"chartRef",class:"chart"},Vh=L({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(e){const t=N(),{items:s}=Le(()=>[{id:"borrow",label:"Borrow APY",color:t.value.colors.red},{id:"lend",label:"Lend APY",color:t.value.colors.green}]),{isFetching:a,data:n}=rt(x(()=>e.market),x(()=>e.chain)),i=ne("card"),{chart:l,series:r}=ee({createChartOptions:J({localization:{priceFormatter:p=>u(p)}}),series:[{type:"Line",name:"borrowApy",options:w(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,color:t.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:"Line",name:"lendApy",options:w(()=>({priceFormat:{type:"custom",formatter:u},lineWidth:2,color:t.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});Y(c);function c(){var b,f,h,y;if(!l.value||!r.borrowApy||!r.lendApy)return;const p=n.value.map(k=>({time:k.timestamp,value:k.borrowApy})).uniqWith((k,C)=>k.time===C.time).orderBy(k=>k.time,"asc"),v=n.value.map(k=>({time:k.timestamp,value:k.lendApy})).uniqWith((k,C)=>k.time===C.time).orderBy(k=>k.time,"asc");if(p.length>0&&r.borrowApy.setData(p),v.length>0&&r.lendApy.setData(v),p.length>0||v.length>0){const k=Math.min(((b=p.at(0))==null?void 0:b.time)??1/0,((f=v.at(0))==null?void 0:f.time)??1/0),C=Math.max(((h=p.at(-1))==null?void 0:h.time)??-1/0,((y=v.at(-1))==null?void 0:y.time)??-1/0);l.value.timeScale().setVisibleRange({from:k,to:C})}}function u(p){return`${W(p*100,0,"percentage")}%`}return(p,v)=>{const b=Se,f=U;return _(),A(f,{ref_key:"card",ref:i,title:"Rates",loading:o(a)},{actions:g(()=>[d("div",Th,[m(o(ge),{filename:"rates",series:o(r)},null,8,["series"]),m(o(fe),{chart:o(l),target:o(i)},null,8,["chart","target"])])]),"actions-secondary":g(()=>[m(b,{items:o(s)},null,8,["items"])]),default:g(()=>[d("div",Ih,null,512)]),_:1},8,["loading"])}}}),qh=["href"],Ph={key:1},Dh=L({__name:"Addresses",props:{market:{}},setup(e){const t=w(()=>{var n,i,l,r,c;return[{description:"Controller",address:(n=e.market)==null?void 0:n.controller},{description:"Vault",address:(i=e.market)==null?void 0:i.vault},{description:"Llamma",address:(l=e.market)==null?void 0:l.llamma},{description:"Policy",address:(r=e.market)==null?void 0:r.policy},{description:"Oracle",address:(c=e.market)==null?void 0:c.oracle}]}),s=n=>`https://etherscan.io/address/${n}`,a=async n=>{await navigator.clipboard.writeText(n)};return(n,i)=>{const l=Ne,r=ce,c=G,u=U;return _(),A(u,{title:"Addresses",class:"addresses"},{default:g(()=>[m(c,{class:"addresses-table",rows:o(t)},{row:g(({item:{description:p,address:v}})=>[d("div",null,I(p),1),d("div",null,[v?(_(),S("a",{key:0,class:"font-mono",href:s(v),target:"_blank"},I(v),9,qh)):(_(),S("span",Ph,"?"))]),d("div",null,[v?(_(),A(r,{key:0,onClick:b=>a(v)},{default:g(()=>[m(l)]),_:2},1032,["onClick"])):F("",!0)])]),_:1},8,["rows"])]),_:1})}}}),Bh=V(Dh,[["__scopeId","data-v-348608c5"]]),Fh={class:"usage"},Mh={class:"two-sides"},Uh={class:"collateral"},Rh={class:"two-sides"},xh={class:"two-sides"},Eh=L({__name:"KPIUsage",props:{market:{}},setup(e){const t=w(()=>{var n,i;return(((n=e.market)==null?void 0:n.collateral_balance_usd)??0)+(((i=e.market)==null?void 0:i.borrowed_balance_usd)??0)}),s=w(()=>{var r,c;const n="Collateral",i=((r=e.market)==null?void 0:r.collateral_token.symbol)??"?",l=((c=e.market)==null?void 0:c.borrowed_token.symbol)??"?";return`${n} (${i} / ${l})`}),a=w(()=>e.market?e.market.total_assets_usd===0?0:e.market.total_debt_usd/e.market.total_assets_usd:0);return(n,i)=>{var c,u;const l=X,r=ve;return _(),S("div",Fh,[m(r,{style:{"grid-area":"kpi1"},label:o(s),"has-value":!!n.market},{default:g(()=>{var p,v;return[d("div",Mh,[d("div",Uh,[m(l,{value:(p=n.market)==null?void 0:p.collateral_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),i[0]||(i[0]=M(" / ")),m(l,{value:(v=n.market)==null?void 0:v.borrowed_balance,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"])]),m(l,{value:o(t),"show-zero":!0,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(r,{style:{"grid-area":"kpi2"},label:`Borrowed (${((c=n.market)==null?void 0:c.borrowed_token.symbol)??"?"})`,"has-value":!!n.market},{default:g(()=>{var p,v;return[d("div",Rh,[m(l,{value:(p=n.market)==null?void 0:p.total_debt,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),m(l,{value:(v=n.market)==null?void 0:v.total_debt_usd,"show-zero":!0,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(r,{style:{"grid-area":"kpi3"},label:`Supplied (${((u=n.market)==null?void 0:u.borrowed_token.symbol)??"?"})`,"has-value":!!n.market},{default:g(()=>{var p,v;return[d("div",xh,[m(l,{value:(p=n.market)==null?void 0:p.total_assets,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),m(l,{value:(v=n.market)==null?void 0:v.total_assets_usd,"show-zero":!0,type:"dollar"},null,8,["value"])])]}),_:1},8,["label","has-value"]),m(r,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!n.market},{default:g(()=>[m(l,{value:o(a)*100,"show-zero":!0,type:"percentage"},null,8,["value"])]),_:1},8,["has-value"])])}}}),Oh=V(Eh,[["__scopeId","data-v-e63607b0"]]),Wh={key:0},Nh={class:"token-info"},Kh=["href"],Hh={key:1},Qh=L({__name:"Properties",props:{market:{},chain:{}},setup(e){function t(l){return typeof l=="object"&&l.type==="token"}function s(l,r){return r?l==="collateral"?{type:"token",symbol:r.collateral_token.symbol,address:r.collateral_token.address}:{type:"token",symbol:r.borrowed_token.symbol,address:r.borrowed_token.address}:{type:"token",symbol:"?",address:"?"}}const a=w(()=>[{description:"Collateral",value:s("collateral",e.market)},{description:"Borrowed",value:s("borrowed",e.market)}]),n=l=>`https://etherscan.io/address/${l}`,i=async l=>{await navigator.clipboard.writeText(l)};return(l,r)=>{const c=_e,u=Ne,p=ce,v=G,b=U;return _(),A(b,{class:"properties",title:"Properties"},{default:g(()=>[m(v,{class:"properties-table",rows:o(a)},{row:g(({item:{description:f,value:h}})=>[d("div",null,I(f),1),t(h)?(_(),S("div",Wh,[d("div",Nh,[m(c,{chain:l.chain,address:h.address},null,8,["chain","address"]),d("div",null,I(h.symbol),1),d("div",null,[d("a",{class:"font-mono",href:n(h.address),target:"_blank"},I(h.address),9,Kh)]),d("div",null,[m(p,{onClick:y=>i(h.address)},{default:g(()=>[m(u)]),_:2},1032,["onClick"])])])])):(_(),S("div",Hh,I(h),1))]),_:1},8,["rows"])]),_:1})}}}),zh=V(Qh,[["__scopeId","data-v-7f506295"]]),jh={class:"dashboard-grid"},Gh=L({__name:"MarketOverview",props:{market:{},chain:{}},setup(e){const{isFetching:t,data:s}=rt(x(()=>e.market),x(()=>e.chain)),a=w(()=>s.value.map(({timestamp:i,collateralBalanceUsd:l,borrowedBalanceUsd:r,totalDebtUsd:c})=>({timestamp:i,ratio:c>0?(l+r)/c:0}))),n=w(()=>s.value.map(({timestamp:i,collateralBalanceUsd:l,borrowedBalanceUsd:r,totalDebtUsd:c})=>({timestamp:i,equity:l+r-c})));return(i,l)=>{const r=X,c=ve;return _(),S("div",jh,[m(c,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!i.market},{default:g(()=>{var u;return[m(r,{value:(u=i.market)==null?void 0:u.borrow_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!i.market},{default:g(()=>{var u;return[m(r,{value:(u=i.market)==null?void 0:u.lend_apy,type:"percentage"},null,8,["value"])]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!i.market},{default:g(()=>{var u;return[M(I(((u=i.market)==null?void 0:u.n_loans)??0),1)]}),_:1},8,["has-value"]),m(c,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!i.market},{default:g(()=>[m(r,{value:o(Ze)(i.market),type:"dollar"},null,8,["value"])]),_:1},8,["has-value"]),m(o(wh),{style:{"grid-area":"supply"},market:i.market,chain:i.chain},null,8,["market","chain"]),m(o(Ch),{style:{"grid-area":"collateral"},market:i.market,chain:i.chain},null,8,["market","chain"]),m(o(Sa),{style:{"grid-area":"colratio"},ratios:o(a),loading:o(t)},null,8,["ratios","loading"]),m(o(Sv),{style:{"grid-area":"equity"},equity:o(n),loading:o(t)},null,8,["equity","loading"]),m(o(Vh),{style:{"grid-area":"rates"},market:i.market,chain:i.chain},null,8,["market","chain"]),m(o(Lh),{style:{"grid-area":"loans"},market:i.market,chain:i.chain},null,8,["market","chain"]),m(o(Bh),{style:{"grid-area":"addresses"},market:i.market},null,8,["market"]),m(o(zh),{style:{"grid-area":"properties"},market:i.market,chain:i.chain},null,8,["market","chain"]),m(o(Oh),{style:{"grid-area":"usage"},market:i.market},null,8,["market"])])}}}),Xh=V(Gh,[["__scopeId","data-v-39ccd20b"]]),Zh={class:"dashboard-grid"},Yh=L({__name:"Trading",props:{market:{},chain:{}},setup(e){const t=w(()=>{var p;return(p=e.market)==null?void 0:p.llamma}),{isFetching:s,data:a}=ys(P("lending"),t,x(()=>e.chain)),n=P(1),{isFetching:i,data:l}=da(P("lending"),t,x(()=>e.chain),n),r=P(1),{isFetching:c,data:u}=ua(P("lending"),t,x(()=>e.chain),r);return(p,v)=>{var h,y,k,C;const b=X,f=ve;return _(),S("div",Zh,[m(f,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!p.market},{default:g(()=>{var $;return[m(b,{value:($=p.market)==null?void 0:$.price_oracle,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(f,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!p.market},{default:g(()=>{var $;return[m(b,{value:($=p.market)==null?void 0:$.amm_price,type:"dollar"},null,8,["value"])]}),_:1},8,["has-value"]),m(o(La),{style:{"grid-area":"ohlc"},ohlc:o(a)??[],loading:o(s)},null,8,["ohlc","loading"]),m(o(Ia),{style:{"grid-area":"trades"},trades:((h=o(l))==null?void 0:h.trades)??[],count:((y=o(l))==null?void 0:y.count)??0,chain:p.chain,loading:o(i),onPage:v[0]||(v[0]=$=>n.value=$)},null,8,["trades","count","chain","loading"]),m(o(Ta),{style:{"grid-area":"events"},events:((k=o(u))==null?void 0:k.events)??[],count:((C=o(u))==null?void 0:C.count)??0,loading:o(c),onPage:v[1]||(v[1]=$=>r.value=$)},null,8,["events","count","loading"])])}}}),Jh=V(Yh,[["__scopeId","data-v-dfc1b8b0"]]),e_={class:"dashboard-grid"},t_=L({__name:"Liquidations",props:{market:{},chain:{}},setup(e){const t=w(()=>{var T;return(T=e.market)==null?void 0:T.controller}),{isFetching:s,data:a}=rt(x(()=>e.market),x(()=>e.chain)),n=w(()=>a.value.map(({timestamp:T,priceOracle:D})=>({timestamp:T,priceOracle:D}))),i=w(()=>a.value.map(({timestamp:T,discountLiquidation:D})=>({timestamp:T,discount:D}))),{isFetching:l,data:r}=va(P("lending"),x(()=>e.chain),t),{isFetching:c,data:u}=ma(P("lending"),x(()=>e.chain),t),{isFetching:p,data:v}=pa(P("lending"),x(()=>e.chain),t),b=w(()=>v.value.map(({timestamp:T,proportion:D})=>({timestamp:T,proportion:D*100}))),{isFetching:f,data:h}=ha(P("lending"),x(()=>e.chain),t),{isFetching:y,data:k}=_a(P("lending"),x(()=>e.chain),t),{isFetching:C,data:$}=fa(P("lending"),x(()=>e.chain),t);return(T,D)=>(_(),S("div",e_,[m(o(Ca),{overview:o(h),loading:o(f)},null,8,["overview","loading"]),m(o(ka),{ratios:o(b),"prices-oracle":o(n),loading:o(p)||o(s)},null,8,["ratios","prices-oracle","loading"]),m(o(ba),{losses:o(k),loading:o(y)},null,8,["losses","loading"]),m(o(ya),{losses:o(k),loading:o(y)},null,8,["losses","loading"]),m(o(wa),{deciles:o($),loading:o(C)},null,8,["deciles","loading"]),m(o(ga),{liqs:o(r),loading:o(l)},null,8,["liqs","loading"]),m(o(Aa),{liqs:o(u),loading:o(c)},null,8,["liqs","loading"]),m(o($a),{discounts:o(i),liqs:o(u),loading:o(s)||o(c)},null,8,["discounts","liqs","loading"])]))}}),s_=V(t_,[["__scopeId","data-v-3072c8e6"]]),a_={class:"dashboard"},o_=L({__name:"Market.page",setup(e){const{show:t,crumbs:s}=We(Ie()),a=we("chain"),n=we("marketAddr"),{isFetching:i,data:l}=Va(a),r=w(()=>{var p;return(p=l.value)==null?void 0:p.find(v=>v.controller===n.value)});H(r,p=>{s.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:a.value})},{id:"market",label:`Market: ${(p==null?void 0:p.name)??"?"}`}]},{immediate:!0}),$e(()=>{t.value=!0});const{tabActive:c,tabActiveIndex:u}=at(["overview","trading","liquidations"],"llamalendmarket",()=>({chain:a.value,marketAddr:n.value}));return(p,v)=>{const b=tt,f=Fe,h=Be;return _(),S("div",a_,[m(b,{class:R({loading:o(i)})},null,8,["class"]),!o(i)&&o(r)?(_(),A(h,{key:0,active:o(u),onTab:v[0]||(v[0]=y=>u.value=y.index)},{default:g(()=>[m(f,{header:"Overview"},{default:g(()=>[(_(),A(re,null,[o(c)==="overview"?(_(),A(Xh,{key:0,market:o(r),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1}),m(f,{header:"Trading"},{default:g(()=>[(_(),A(re,null,[o(c)==="trading"?(_(),A(Jh,{key:0,market:o(r),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1}),m(f,{header:"Liquidations"},{default:g(()=>[(_(),A(re,null,[o(c)==="liquidations"?(_(),A(s_,{key:0,market:o(r),chain:o(a)},null,8,["market","chain"])):F("",!0)],1024))]),_:1})]),_:1},8,["active"])):F("",!0)])}}}),n_=V(o_,[["__scopeId","data-v-f4fbfc0f"]]);function qa(e){const{url:t,connectOnMount:s=!0}=e,a=us(null),n=P("");function i(){return a.value&&v(),n.value=typeof t=="function"?t():t,zo(n.value,{autoConnect:!1,secure:!0,reconnection:!1}).on("error",f=>{Ae({text:`Socket.IO error: ${f.message}`,type:"error"})})}const l=P(!1),r=P(!1);function c(){l.value=!1,r.value=!0}function u(){Ae({text:`Failed to connect to ${n.value}`,type:"error"}),l.value=!1}function p(){a.value=null,r.value=!1}function v(){var f,h,y,k;(f=a.value)==null||f.off("connect",c),(h=a.value)==null||h.off("connect_error",u),(y=a.value)==null||y.off("disconnect",p),(k=a.value)==null||k.disconnect(),p()}function b(){l.value||(a.value&&v(),a.value=i(),a.value.on("connect",c),a.value.on("connect_error",u),a.value.on("disconnect",p),l.value=!0,a.value.connect())}return s&&$e(b),{socket:a,connecting:l,isConnected:r,connect:b,disconnect:v,url:n}}var ye=(e=>(e.Swap="swap",e.Deposit="deposit",e.Remove="remove",e))(ye||{});let ts;function Pa(){return ts||(ts=qa({url:"wss://api.curvemonitor.com/main"})),ts}function ss(e,t,s,...a){return new Promise(n=>{e.once(s,n),e.emit(t,...a)})}function Da(e,t,s){return new jo(a=>{const n=i=>{a.next(i)};return e.on(t,n),()=>e.off(t,n)}).pipe(Go())}class Ba{constructor(t){this.socket=t}getSandwiches(){return ss(this.socket,"getFullSandwichTableContent","fullSandwichTableContent","full",1)}getLabels(){return ss(this.socket,"getSandwichLabelOccurrences","sandwichLabelOccurrences")}getLabelsRanking(){return ss(this.socket,"getAbsoluteLabelsRanking","absoluteLabelsRanking")}}function Fa(){const{socket:e,isConnected:t,url:s}=Pa(),a=w(()=>e.value?new Ba(e.value):null),n=w(()=>["mev-labels",s.value]);return E({queryKey:n,queryFn:()=>{var i;return(i=a.value)==null?void 0:i.getLabels()},enabled:t})}function l_(){const{socket:e,isConnected:t,url:s}=Pa(),a=w(()=>e.value?new Ba(e.value):null),n=w(()=>["mev-sandwiches-tx",s.value]);return E({queryKey:n,queryFn:()=>{var i;return(i=a.value)==null?void 0:i.getSandwiches()},enabled:t})}const r_=L({__name:"LabelsWorstRelative",setup(e){const{data:t,isFetching:s}=Fa(),a=c=>(c??[]).filter(u=>u.numOfAllTx>=12).map(u=>({...u,ratio:Number((u.occurrences/u.numOfAllTx*100).toFixed(2))})).sort((u,p)=>p.ratio-u.ratio).slice(0,10),n=w(()=>a(t.value).map(c=>c.label)),i=w(()=>a(t.value).map(c=>c.ratio)),l=w(()=>Pe({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:c=>{const u=c.w.globals.labels[c.seriesIndex],p=c.series[c.seriesIndex];return[`<div><b>${u}</b>:</div><div>Ratio: ${r(p)}</div>`].join("")}},labels:n.value})),r=c=>`${c}%`;return(c,u)=>{const p=qe,v=U;return _(),A(v,{title:"Worst relative offenders",loading:o(s)},{default:g(()=>[m(p,{options:o(l),series:o(i)},null,8,["options","series"])]),_:1},8,["loading"])}}}),i_=V(r_,[["__scopeId","data-v-169d3c7e"]]),c_=L({__name:"LabelsWorstAbsolute",setup(e){const{data:t,isFetching:s}=Fa(),a=c=>(c??[]).filter(u=>u.numOfAllTx>=12).map(u=>({...u,occurrences:u.occurrences})).sort((u,p)=>p.occurrences-u.occurrences).slice(0,10),n=w(()=>a(t.value).map(c=>c.label)),i=w(()=>a(t.value).map(c=>c.occurrences)),l=w(()=>Pe({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:c=>{const u=c.w.globals.labels[c.seriesIndex],p=c.series[c.seriesIndex];return[`<div><b>${u}</b>:</div><div>Occurences: ${r(p)}</div>`].join("")}},labels:n.value})),r=c=>`${c}`;return(c,u)=>{const p=qe,v=U;return _(),A(v,{title:"Worst absolute offenders",loading:o(s)},{default:g(()=>[m(p,{options:o(l),series:o(i)},null,8,["options","series"])]),_:1},8,["loading"])}}}),u_=V(c_,[["__scopeId","data-v-a8231dbd"]]),d_={style:{display:"grid","grid-template-columns":"auto auto"}},p_={style:{display:"flex",gap:"1rem"}},m_={key:0,class:"end"},v_=["href"],h_=["href"],__=["href"],f_=["innerHTML"],g_={key:1,class:"end"},Fs=10,b_=L({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(e){const{relativeTime:t}=Ve(),s=P(""),a=P([ye.Swap,ye.Deposit,ye.Remove]),n=w(()=>e.time?["Type","Block","Tx","Trader","Assets","Time"]:["Type","Tx","Trader","Assets"]),i=w(()=>(e.txs??[]).filter(v=>a.value.includes(v.transaction_type)).filter(v=>{const b=s.value.toLocaleLowerCase().split(" "),f=h=>b.some(y=>h.toLocaleLowerCase().includes(y));return f(v.block_number.toString())||f(v.trader)||f(v.tx_hash)})),{page:l,rowsPage:r,onPage:c}=kt(i,Fs),u=v=>{if(v.transaction_type===ye.Swap){const b=v.coins_leaving_wallet[0],f=v.coins_entering_wallet[0],h=Ee(parseFloat(b.amount.toString())),y=Ee(parseFloat(f.amount.toString())),k=`<span>${h} ${b.name}</span>`,C="<span>-></span>",$=`<span style='justify-self: end;'>${y} ${f.name}</span>`;return`${k}${C}${$}`}else if(v.transaction_type===ye.Deposit){const b=v.coins_entering_wallet[0];return`${Ee(parseFloat(b.amount.toString()))} ${b.name}`}else{const b=v.coins_leaving_wallet[0];return`${Ee(parseFloat(b.amount.toString()))} ${b.name}`}},p=v=>{v===0?a.value=[ye.Swap,ye.Deposit,ye.Remove]:v===1?a.value=[ye.Swap]:v===2?a.value=[ye.Deposit]:v===3?a.value=[ye.Remove]:a.value=[]};return(v,b)=>{const f=Fe,h=Be,y=be,k=De,C=Zo,$=Yo,T=Jo,D=G,q=U;return _(),A(q,{class:"trades-card",title:"Transactions"},Xo({default:g(()=>[m(D,{class:R(["trades-table",{compact:v.compact,time:v.time}]),rows:o(r),columns:o(n)},{row:g(({item:B})=>[d("div",{class:R(["type",{deposit:B.transaction_type==="deposit",remove:B.transaction_type==="remove",swap:B.transaction_type==="swap"}])},[B.transaction_type==="deposit"?(_(),A(C,{key:0})):B.transaction_type==="remove"?(_(),A($,{key:1})):(_(),A(T,{key:2})),M(" "+I(o(gt)(B.transaction_type)),1)],2),v.time?(_(),S("div",m_,[d("a",{class:"vote-link",href:`https://etherscan.io/block/${B.block_number}`,target:"_blank"},I(B.block_number),9,v_)])):F("",!0),d("div",null,[d("a",{class:"vote-link",href:`https://etherscan.io/tx/${B.tx_hash}`,target:"_blank",onClick:b[2]||(b[2]=pe(()=>{},["stop"]))},I(o(ke)(B.tx_hash)),9,h_)]),d("div",null,[d("a",{class:"vote-link",href:`https://etherscan.io/address/${B.trader}`,target:"_blank",onClick:b[3]||(b[3]=pe(()=>{},["stop"]))},I(o(ke)(B.trader)),9,__)]),d("div",{class:R(["assets",{swap:B.transaction_type==="swap"}]),innerHTML:u(B)},null,10,f_),v.time?(_(),S("div",g_,I(o(t)(B.block_unixtime)),1)):F("",!0)]),_:1},8,["class","rows","columns"])]),_:2},[v.header?{name:"actions",fn:g(()=>[d("div",d_,[m(h,{class:"types",onTab:b[0]||(b[0]=B=>p(B.index))},{default:g(()=>[m(f,{header:"All"}),m(f,{header:"Swaps"}),m(f,{header:"Deposits"}),m(f,{header:"Removals"})]),_:1})]),d("div",p_,[m(y,{modelValue:o(s),"onUpdate:modelValue":b[1]||(b[1]=B=>ie(s)?s.value=B:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),m(k,{class:"pagination","items-count":o(i).length,"items-per-page":Fs,page:o(l),onPage:o(c)},null,8,["items-count","page","onPage"])])]),key:"0"}:void 0]),1024)}}}),y_=V(b_,[["__scopeId","data-v-aaa65f55"]]),w_={style:{display:"flex",gap:"1rem"}},k_=["href"],$_={style:{display:"grid",gap:"1ch","grid-template-columns":"auto 16ch 1fr"}},C_=["href"],A_={class:"end"},as=10,S_=L({__name:"Sandwiches",setup(e){const t=P(1),{data:s,isFetching:a}=l_(),{expanded:n,toggleExpansion:i}=ca(),{relativeTime:l}=Ve(),r=P(""),c=w(()=>{var v;return((v=s.value)==null?void 0:v.totalPages)??0*as}),u=w(()=>{var v;return(((v=s.value)==null?void 0:v.data)??[]).filter(b=>{const f=r.value.toLocaleLowerCase().split(" "),h=y=>f.some(k=>y.toLocaleLowerCase().includes(k));return h(b.poolName)||h(b.poolAddress)||h(b.label)}).orderBy([b=>b.frontrun.block_unixtime,b=>b.frontrun.tx_position],"desc")}),p=v=>[v.frontrun,...v.center,v.backrun].orderBy([b=>b.block_unixtime,b=>b.tx_position]);return(v,b)=>{const f=be,h=De,y=G,k=U;return _(),A(k,{class:"sandwiches-card",title:"Sandwiches",loading:o(a)},{actions:g(()=>[d("div",w_,[m(f,{modelValue:o(r),"onUpdate:modelValue":b[0]||(b[0]=C=>ie(r)?r.value=C:null),class:"search",placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(c)>as?(_(),A(h,{key:0,class:"pagination","items-count":o(c),"items-per-page":as,page:o(t),onPage:b[1]||(b[1]=C=>t.value=C)},null,8,["items-count","page"])):F("",!0)])]),default:g(()=>[m(y,{class:"sandwiches-table",rows:o(u),columns:["Pool","Action","Affected Contract",{label:"Time",align:"end"}],expanded:o(n),onSelected:b[2]||(b[2]=C=>o(i)(C))},{row:g(({item:C})=>[d("div",null,[d("a",{class:"vote-link",href:`https://etherscan.io/address/${C.poolAddress}`,target:"_blank"},I(C.poolName),9,k_)]),d("div",null,[d("div",$_,[d("a",{class:"vote-link font-mono",target:"_blank",href:`https://etherscan.io/address/${C.center[0].trader}`},I(o(ke)(C.center[0].trader)),9,C_),d("span",null," lost "+I(o(Ee)(C.user_losses_details.reduce(($,T)=>$+T.amount,0)))+" "+I(C.user_losses_details[0].unit),1),d("span",null,I(o(Ee)(-C.user_losses_details[0].lossInPercentage))+"% slippage, or $"+I(o(Ee)(C.lossInUsd)),1)])]),d("div",null,I(C.label),1),d("div",A_,I(o(l)(C.frontrun.block_unixtime)),1)]),"row-details":g(({item:C})=>[m(y_,{class:"transactions",txs:p(C),header:!1,compact:!0,time:!1},null,8,["txs"])]),_:1},8,["rows","expanded"])]),_:1},8,["loading"])}}}),L_=V(S_,[["__scopeId","data-v-bfac95d9"]]),T_={class:"dashboard-grid"},I_=L({__name:"MEV",setup(e){return(t,s)=>(_(),S("div",T_,[m(L_,{style:{"grid-area":"sws"}}),m(i_,{style:{"grid-area":"relative"}}),m(u_,{style:{"grid-area":"absolute"}})]))}}),V_=V(I_,[["__scopeId","data-v-045c128b"]]),q_={class:"dashboard"},P_=L({__name:"Monitor.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["mev"],"monitor");return(a,n)=>{const i=Fe,l=Be;return _(),S("div",q_,[m(l,{active:o(s),onTab:n[0]||(n[0]=r=>s.value=r.index)},{default:g(()=>[m(i,{header:"MEV"},{default:g(()=>[(_(),A(re,null,[o(t)==="mev"?(_(),A(V_,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),D_=V(P_,[["__scopeId","data-v-98334bfd"]]),B_=["all","ownership","parameter","other"];function Ye(e){return e.executed?"executed":e.end>new Date().getTime()/1e3?"active":Ra(e)&&Ua(e)&&Ma(e)?"passed":"denied"}function Ma(e){return e.votesFor>e.support*e.quorum*e.totalSupply}function Ua(e){return e.votesFor>e.quorum*e.totalSupply}function Ra(e){return e.votesFor>e.votesAgainst}const xa=e=>{var y;const t=e.vote_id,s=e.vote_type.toLocaleLowerCase()==="parameter"?"parameter":"ownership",a=(y=e.metadata)!=null&&y.startsWith('"')?e.metadata.substring(1):e.metadata??"",n=e.creator.toLocaleLowerCase(),i=e.snapshot_block,l=e.start_date,r=l+604800,c=xe(BigInt(e.min_accept_quorum),18n),u=xe(BigInt(e.support_required),18n),p=e.vote_count,v=xe(BigInt(e.votes_for),18n),b=xe(BigInt(e.votes_against),18n),f=e.executed,h=xe(BigInt(e.total_supply),18n);return{id:t,type:s,metadata:a,proposer:n,block:i,start:l,end:r,quorum:c,support:u,voteCount:p,votesFor:v,votesAgainst:b,executed:f,totalSupply:h}},F_=e=>{const t=xa(e),s=e.script,a=e.votes.map(n=>({voter:n.voter.toLocaleLowerCase(),supports:n.supports,votingPower:xe(BigInt(n.voting_power),18n)}));return{...t,script:s,votes:a}},Ms="https://prices.curve.fi";class M_ extends Te{async getProposals(t,s,a,n){const i=await this.fetch(`${Ms}/v1/dao/proposals?pagination=10&page=${t}&search_string=${s}&type_filter=${a}&status_filter=${n}`);return{proposals:i.proposals.map(xa),count:i.count}}async getProposal(t,s){const a=await this.fetch(`${Ms}/v1/dao/proposals/details/${s}/${t}`);return F_(a)}}const Ea=new M_;function Oa(e,t,s){return E({queryKey:["curve-proposal",e,t],queryFn:({queryKey:[,a,n]})=>Ea.getProposal(a,n),...s&&{enabled:s}})}function U_(e,t,s,a){return E({queryKey:["curve-proposals",e,a,t,s],queryFn:({queryKey:[,n,i,l,r]})=>Ea.getProposals(n,i,l,r),placeholderData:Bt})}const R_=L({__name:"Status",props:{proposal:{}},setup(e){const t=w(()=>{if(Ye(e.proposal)==="denied")if(Ua(e.proposal))if(Ra(e.proposal)){if(!Ma(e.proposal))return"Quorum was reached and 'for' won, but not enough for support"}else return"More 'against' votes than 'for' votes";else return"Quorum was not reached (yes votes need to pass this number)";return""}),s=w(()=>{switch(Ye(e.proposal)){case"active":return"Active";case"denied":return"Denied";case"passed":return"Passed";case"executed":return"Executed";default:return"Unk. Status"}});return(a,n)=>{const i=Mt,l=ve;return _(),A(l,{class:"status","tooltip-type":"underline",label:"Status","has-value":!0,tooltip:o(t)},{default:g(()=>[o(t)?(_(),A(i,{key:0},{trigger:g(()=>[d("span",{class:R(["status-value",o(Ye)(a.proposal)])},I(o(s)),3)]),default:g(()=>[M(" "+I(o(t)),1)]),_:1})):(_(),S("span",{key:1,class:R(["status-value",o(Ye)(a.proposal)])},I(o(s)),3))]),_:1},8,["tooltip"])}}}),x_=V(R_,[["__scopeId","data-v-a1532615"]]),E_=L({__name:"Type",props:{proposal:{}},setup(e){return(t,s)=>{const a=ve;return _(),A(a,{class:"type",label:"Type",value:o(gt)(t.proposal.type),"has-value":!0},null,8,["value"])}}}),O_=["href"],W_=L({__name:"Proposer",props:{proposal:{}},setup(e){return(t,s)=>{const a=ve;return _(),A(a,{class:"proposer",label:"Proposer","has-value":!0},{default:g(()=>[d("a",{href:`https://etherscan.io/address/${t.proposal.proposer}`,target:"_blank"},I(o(ke)(t.proposal.proposer)),9,O_)]),_:1})}}}),Us=L({__name:"Date",props:{proposal:{},type:{}},setup(e){let t;const s=P(""),a=w(()=>{switch(e.type){case"start":return"Start";case"end":return"End";default:return"Unk. Type"}}),n=w(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString();case"end":{const r=new Date(e.proposal.end*1e3);return r>new Date?s.value:r.toLocaleDateString()}default:return new Date(0).toLocaleDateString()}}),i=w(()=>{switch(e.type){case"start":return new Date(e.proposal.start*1e3).toLocaleDateString()+" "+new Date(e.proposal.start*1e3).toTimeString();case"end":return new Date(e.proposal.end*1e3).toLocaleDateString()+" "+new Date(e.proposal.end*1e3).toTimeString();default:return new Date(0).toLocaleDateString()}});$e(()=>{l()});const l=()=>{const r=new Date(e.proposal.end*1e3);t&&clearInterval(t),t=setInterval(()=>{s.value=On(r)})};return(r,c)=>{const u=ve;return _(),A(u,{class:"date","tooltip-type":"underline",label:o(a),value:o(n),"has-value":!0,tooltip:o(i)},null,8,["label","value","tooltip"])}}}),N_={class:"metadata"},K_={class:"row"},H_=L({__name:"ProposalSummary",props:{proposal:{},expanded:{type:Boolean}},emits:["toggleExpand"],setup(e,{emit:t}){const s=t,a=w(()=>`/dao/proposal/${e.proposal.type}/${e.proposal.id}`),n=async()=>{await navigator.clipboard.writeText(`${window.location.origin}/#/dao/proposal/${e.proposal.type}/${e.proposal.id}`)};return(i,l)=>{const r=Ne,c=vt("router-link"),u=Pt;return _(),S("div",{class:"proposal-summary",onClick:l[0]||(l[0]=p=>s("toggleExpand"))},[d("div",{class:R(["title",{"no-title":!i.proposal.metadata}])},[m(c,{to:o(a),class:"id",onClick:n},{default:g(()=>[m(r),M(" "+I(i.proposal.id),1)]),_:1},8,["to"]),d("div",N_,I(i.proposal.metadata||"< No Title >"),1)],2),d("div",K_,[m(x_,{class:"item",proposal:i.proposal},null,8,["proposal"]),m(E_,{class:"item",proposal:i.proposal},null,8,["proposal"]),m(W_,{class:"item",proposal:i.proposal},null,8,["proposal"]),m(Us,{class:"item",proposal:i.proposal,type:"start"},null,8,["proposal"]),m(Us,{class:"item",proposal:i.proposal,type:"end"},null,8,["proposal"]),d("div",{class:R(["item expander",{expanded:i.expanded}])},[m(u)],2)])])}}}),Q_=V(H_,[["__scopeId","data-v-0738dd44"]]),z_={class:"results"},j_={class:"choice"},G_={class:"amount"},X_={class:"left"},Z_={class:"right"},Y_={class:"choice"},J_={class:"amount"},ef={class:"left"},tf={class:"right"},Rs=4,sf=L({__name:"VotingResults",props:{proposal:{}},setup(e){const t=w(()=>e.proposal.votesFor+e.proposal.votesAgainst),s=w(()=>e.proposal.votesFor/t.value*100),a=w(()=>e.proposal.votesAgainst/t.value*100);return(n,i)=>{const l=X;return _(),S("div",z_,[i[8]||(i[8]=d("div",{class:"heading"},"Results",-1)),d("div",j_,[i[3]||(i[3]=d("div",{class:"label"},"For",-1)),d("div",G_,[d("div",X_,[m(l,{value:n.proposal.votesFor,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),i[0]||(i[0]=d("span",null," veCRV",-1))]),d("div",Z_,[i[1]||(i[1]=d("span",null,"(",-1)),m(l,{value:o(s),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),i[2]||(i[2]=d("span",null,")",-1))])]),d("div",{class:"bar",style:ht({width:`${Math.max(Rs,o(s))}%`})},null,4)]),d("div",Y_,[i[7]||(i[7]=d("div",{class:"label"},"Against",-1)),d("div",J_,[d("div",ef,[m(l,{value:n.proposal.votesAgainst,precision:0,"show-symbol":!1,"show-zero":!0,type:"dollar"},null,8,["value"]),i[4]||(i[4]=d("span",null," veCRV",-1))]),d("div",tf,[i[5]||(i[5]=d("span",null,"(",-1)),m(l,{value:o(a),precision:2,"show-zero":!0,type:"percentage"},null,8,["value"]),i[6]||(i[6]=d("span",null,")",-1))])]),d("div",{class:"bar",style:ht({width:`${Math.max(Rs,o(a))}%`})},null,4)])])}}}),af=V(sf,[["__scopeId","data-v-fd833be3"]]),of={class:"quorum"},nf={class:"amount"},lf={class:"bar"},rf={class:"percentages"},cf={class:"quorum"},uf=L({__name:"VotingQuorum",props:{proposal:{}},setup(e){const t=w(()=>e.proposal.votesFor),s=w(()=>e.proposal.quorum*e.proposal.totalSupply),a=w(()=>t.value/s.value*100);return(n,i)=>{const l=X;return _(),S("div",of,[i[3]||(i[3]=d("div",{class:"heading"},"Quorum",-1)),d("div",nf,[m(l,{value:o(t),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),i[0]||(i[0]=M(" / ")),m(l,{value:o(s),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"]),i[1]||(i[1]=M(" veCRV "))]),d("div",lf,[d("div",{class:"support",style:ht({width:`${o(a)}%`})},null,4),d("div",{class:"quorum",style:ht({width:`${100-o(a)}%`})},null,4)]),d("div",rf,[i[2]||(i[2]=d("div",{class:"zero"},"0%",-1)),d("div",cf,[m(l,{value:n.proposal.quorum*100,precision:0,type:"percentage"},null,8,["value"])])])])}}}),df=V(uf,[["__scopeId","data-v-ffe5ee40"]]),pf=["min","max"],mf=L({__name:"Slider",props:Je({min:{},max:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=_t(e,"modelValue",{set(s){return Number(s)}});return(s,a)=>ms((_(),S("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),type:"range",min:s.min,max:s.max},null,8,pf)),[[Ks,t.value]])}}),vf=V(mf,[["__scopeId","data-v-d0101b43"]]),hf=[{name:"balanceOfAt",outputs:[{type:"uint256",name:""}],inputs:[{type:"address",name:"addr"},{type:"uint256",name:"_block"}],stateMutability:"view",type:"function"}],Xe=[{constant:!1,inputs:[{name:"_voteId",type:"uint256"},{name:"_yeaPct",type:"uint256"},{name:"_nayPct",type:"uint256"},{name:"_executesIfDecided",type:"bool"}],name:"votePct",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"getVoterState",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"getVote",outputs:[{name:"open",type:"bool"},{name:"executed",type:"bool"},{name:"startDate",type:"uint64"},{name:"snapshotBlock",type:"uint64"},{name:"supportRequired",type:"uint64"},{name:"minAcceptQuorum",type:"uint64"},{name:"yea",type:"uint256"},{name:"nay",type:"uint256"},{name:"votingPower",type:"uint256"},{name:"script",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"}],name:"canExecute",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_voteId",type:"uint256"},{name:"_voter",type:"address"}],name:"canVote",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PCT_BASE",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_voteId",type:"uint256"}],name:"executeVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];function It(e){return e instanceof Error?e.message.includes("Exchange resulted in fewer coins than expected")||e.message.includes("Slippage")?"Transaction failed because slippage was set too low. A slight increase of one or two percent could help, but don't make it too high to ensure your protection. We also highly recommend using MEVBlocker for extra safety.":e.message.includes("HTTP request failed")&&e.message.includes("eth_call")?"The RPC returned an error, probably a rate-limit. Try again layer or try a different wallet.":e.message:JSON.stringify(e)}async function Wa(e,t){e.value=!0;try{return await t()}catch(s){Ae({text:It(s),type:"error"});return}finally{e.value=!1}}const _f={class:"buttons"},ff={class:"vecrv"},gf={class:"info"},bf={class:"kpis"},yf={class:"description"},wf={class:"options button-group"},kf={class:"middle"},$f=["contenteditable","textContent"],Cf=L({__name:"VotingButtons",props:{proposal:{}},setup(e){const{address:t}=Ft(),s=P(!1),a=P(50),n=ne("editor"),i=P(!1),l=w(()=>{var Z;return i.value?`${a.value}.`:a.value===0&&((Z=n.value)==null?void 0:Z.textContent)!=="0"?"":a.value.toString()}),r=w(()=>(D.value??0n)>0n&&!Qe.value&&p.value&&T.value===0),c=w(()=>r.value?"Submit":Qe.value?"Voting...":p.value?T.value!==0?"You've already voted":"Not enough voting power":"Voting closed"),u=w(()=>xe(D.value??0n,18n)),p=w(()=>Ye(e.proposal)==="active"),v=w(()=>Ye(e.proposal)==="passed"),b=()=>{const Z=window.getSelection();return Z&&Z.rangeCount>0?Z.getRangeAt(0).startOffset:0},f=Z=>{if(n.value){const Q=document.createRange();Q.setStart(n.value.firstChild??n.value,Z),Q.collapse(!0);const he=window.getSelection();he&&(he.removeAllRanges(),he.addRange(Q))}},h=()=>{a.value=0,n.value&&(n.value.textContent="0")},y=()=>{a.value=100,n.value&&(n.value.textContent="100")},k=Z=>{Z.target===Z.currentTarget&&n.value&&n.value.focus()},C=()=>{if(n.value){const Z=n.value.textContent??"",Q=b();if(/^\d*(\.\d*)?$/.test(Z))if(i.value=Z.endsWith("."),Z){const he=parseFloat(Z);he>=0&&he<=100?a.value=he:(n.value.textContent=l.value,f(Q-1))}else a.value=0;else n.value.textContent=l.value,f(Q-1)}},{data:$}=ct({abi:Xe,address:je,functionName:"token",query:{enabled:s}}),{data:T}=ct({abi:Xe,address:je,functionName:"getVoterState",args:w(()=>[BigInt(e.proposal.id),t.value]),query:{enabled:w(()=>!!t.value&&s.value),initialData:0,initialDataUpdatedAt:0}}),{data:D}=ct({abi:hf,address:$,functionName:"balanceOfAt",args:w(()=>[t.value,BigInt(e.proposal.block)]),query:{enabled:w(()=>!!$.value&&!!t.value&&s.value),initialData:0n,initialDataUpdatedAt:0}}),{data:q,refetch:B}=ct({abi:Xe,address:je,functionName:"canExecute",args:[BigInt(e.proposal.id)],query:{enabled:w(()=>v.value&&s.value),initialData:!1,initialDataUpdatedAt:0}}),{data:ue}=ct({abi:Xe,address:je,functionName:"PCT_BASE",query:{enabled:s}}),{data:K,error:O,isPending:me,writeContract:de}=Cs(),{isLoading:se,isSuccess:ae}=As({hash:K}),Qe=w(()=>me.value||se.value);function Me(){if(!ue.value){Ae({text:It("Missing PCT_BASE"),type:"error"});return}const Z=BigInt(Math.log10(Number(ue.value))),Q=Xs(a.value/100,Z),he=ue.value-Q;de({abi:Xe,address:je,functionName:"votePct",args:[BigInt(e.proposal.id),Q,he,!1]})}dt(O,Z=>{Ae({text:It(Z),type:"error"})}),dt(ae,()=>{Ae({text:"Voted",type:"success"})});const{data:it,error:Nt,isPending:Ya,writeContract:Ja}=Cs(),{isLoading:eo,isSuccess:to}=As({hash:it}),ks=w(()=>Ya.value||eo.value);function so(){Ja({abi:Xe,address:je,functionName:"executeVote",args:[BigInt(e.proposal.id)]}),B()}return dt(Nt,Z=>{Ae({text:It(Z),type:"error"})}),dt(to,()=>{Ae({text:"Executed proposal",type:"success"})}),(Z,Q)=>{const he=ce,ao=X,$s=ve,oo=en,no=Ws,lo=vf,ro=U,io=bt;return _(),S(te,null,[d("div",_f,[m(he,{class:"primary",onClick:Q[0]||(Q[0]=Kt=>s.value=!0)},{default:g(()=>Q[3]||(Q[3]=[M(" Vote ")])),_:1}),o(v)?(_(),A(he,{key:0,class:"primary",disabled:!o(q)||o(ks),onClick:so},{default:g(()=>[M(I(o(ks)?"Executing...":"Execute"),1)]),_:1},8,["disabled"])):F("",!0)]),m(io,{show:o(s),onClose:Q[2]||(Q[2]=Kt=>s.value=!1)},{default:g(()=>[m(ro,{title:"Vote with veCRV",class:"vote-content"},{default:g(()=>[d("div",ff,[d("div",gf,[d("div",bf,[m($s,{label:"Voting power","has-value":!0},{default:g(()=>[m(ao,{value:o(u),precision:2,type:"dollar","show-symbol":!1,"show-zero":!0},null,8,["value"]),Q[4]||(Q[4]=M(" veCRV "))]),_:1}),m($s,{label:"Block",value:Z.proposal.block,"has-value":!0},null,8,["value"])]),d("div",yf,[Q[5]||(Q[5]=d("span",{class:"title"},"Description: ",-1)),d("span",null,I(Z.proposal.metadata),1)])]),d("div",wf,[m(he,{class:R(["no",{winning:o(a)<50}]),disabled:!o(r),onClick:h},{default:g(()=>Q[6]||(Q[6]=[d("span",{class:"label"},"No",-1)])),_:1},8,["class","disabled"]),d("div",kf,[m(oo,{class:R({winning:o(a)<50})},null,8,["class"]),d("div",{class:R(["value",{disabled:!o(r)}]),onClick:k},[d("span",{ref_key:"editor",ref:n,contenteditable:o(r),onInput:C,textContent:I(o(l))},null,40,$f),Q[7]||(Q[7]=M(" % "))],2),m(no,{class:R({winning:o(a)>50})},null,8,["class"])]),m(he,{class:R(["yes",{winning:o(a)>50}]),disabled:!o(r),onClick:y},{default:g(()=>Q[8]||(Q[8]=[d("span",{class:"label"},"Yes",-1)])),_:1},8,["class","disabled"])]),m(lo,{modelValue:o(a),"onUpdate:modelValue":Q[1]||(Q[1]=Kt=>ie(a)?a.value=Kt:null),class:"slider",disabled:!o(r),min:0,max:100},null,8,["modelValue","disabled"]),m(he,{class:"submit primary",disabled:!o(r),"chain-id":o(Oe).id,onClick:Me},{default:g(()=>[M(I(o(c)),1)]),_:1},8,["disabled","chain-id"])])]),_:1})]),_:1},8,["show"])],64)}}}),Af=V(Cf,[["__scopeId","data-v-ff9c8702"]]),Sf={class:"voting"},Lf=L({__name:"Voting",props:{proposal:{}},setup(e){return(t,s)=>(_(),S("div",Sf,[m(df,{proposal:t.proposal},null,8,["proposal"]),m(af,{proposal:t.proposal},null,8,["proposal"]),m(Af,{proposal:t.proposal},null,8,["proposal"])]))}}),Tf=V(Lf,[["__scopeId","data-v-ab141038"]]),If={class:"voters"},Vf={class:"for"},qf={class:"address"},Pf=["href"],Df={class:"amount"},Bf={class:"percentage"},Ff={class:"against"},Mf={class:"percentage"},Uf={class:"amount"},Rf={class:"address"},xf=["href"],Ef=L({__name:"Voters",props:{proposal:{},proposalDetails:{}},setup(e){const{address:t}=Ft(),s=w(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>r.supports).orderBy(r=>r.votingPower,"desc"):null),a=w(()=>e.proposalDetails?e.proposalDetails.votes.filter(r=>!r.supports).orderBy(r=>r.votingPower,"desc"):null),n=r=>r==="0x989aeb4d175e16225e39e87d0d97a3360524ad80"?"Convex":r==="0x52f541764e6e90eebc5c21ff570de0e2d63766b6"?"StakeDAO":r==="0xf147b8125d2ef93fb6965db97d6746952a133934"?"Yearn":ke(r,12),i=r=>r/(e.proposal.votesFor+e.proposal.votesAgainst)*100,l=r=>r===t.value;return(r,c)=>{const u=X;return _(),S("div",If,[d("div",Vf,[c[0]||(c[0]=d("div",{class:"title"},"For",-1)),(_(!0),S(te,null,oe(o(s),p=>(_(),S("div",{key:p.voter,class:"vote font-mono"},[d("div",qf,[d("a",{target:"_blank",href:`https://etherscan.io/address/${p.voter}`,class:R({you:l(p.voter)})},I(n(p.voter)),11,Pf)]),d("div",Df,[m(u,{value:p.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",Bf,[m(u,{value:i(p.votingPower),precision:0,type:"percentage"},null,8,["value"])])]))),128))]),d("div",Ff,[c[1]||(c[1]=d("div",{class:"title"},"Against",-1)),(_(!0),S(te,null,oe(o(a),p=>(_(),S("div",{key:p.voter,class:"vote font-mono"},[d("div",Mf,[m(u,{value:i(p.votingPower),precision:0,type:"percentage"},null,8,["value"])]),d("div",Uf,[m(u,{value:p.votingPower,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",Rf,[d("a",{target:"_blank",href:`https://etherscan.io/address/${p.voter}`,class:R({you:l(p.voter)})},I(n(p.voter)),11,xf)])]))),128))])])}}}),Of=V(Ef,[["__scopeId","data-v-68928c77"]]),Wf={class:"technicals"},Nf={class:"technical"},Kf={class:"description"},Hf={class:"technical"},Qf={class:"technical"},zf=["innerHTML"],jf=L({__name:"Technicals",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){const t=P(!0),s=P(e.proposal.voteCount>0),{data:a}=Oa(x(()=>e.proposal.id),x(()=>e.proposal.type),x(()=>e.expanded)),n=w(()=>a.value?a.value.votes.uniqWith((l,r)=>l.voter===r.voter).length:null),i=w(()=>a.value?a.value.script.replace(/(?:\r\n|\r|\n)/g,"<br>").replace("/├/g","├").replace("/─/g","─").replace(/0x[a-fA-F0-9]{40}/g,l=>/[A-F]/g.test(l)&&vs(l)?`<a href='https://etherscan.io/address/${l}'>${l}</a>`:l):null);return(l,r)=>{const c=Pt,u=ft;return _(),S("div",Wf,[d("div",Nf,[r[2]||(r[2]=d("div",{class:"heading"},"Description",-1)),d("div",Kf,I(l.proposal.metadata),1)]),d("div",Hf,[d("div",{class:"heading",onClick:r[0]||(r[0]=p=>s.value=!o(s))},[M(" Voters ("+I(o(n)??"?")+") ",1),m(c,{class:R(["expander",{expandedVoters:o(s)}])},null,8,["class"])]),m(u,{expanded:o(s)},{default:g(()=>[o(a)?(_(),A(Of,{key:0,class:"voters",proposal:l.proposal,"proposal-details":o(a)},null,8,["proposal","proposal-details"])):F("",!0)]),_:1},8,["expanded"])]),d("div",Qf,[d("div",{class:"heading",onClick:r[1]||(r[1]=p=>t.value=!o(t))},[r[3]||(r[3]=M(" Calldata ")),m(c,{class:R(["expander",{expandedCallData:o(t)}])},null,8,["class"])]),m(u,{expanded:o(t)},{default:g(()=>[o(a)?(_(),S("div",{key:0,class:"calldata font-mono",innerHTML:o(i)},null,8,zf)):F("",!0)]),_:1},8,["expanded"])])])}}}),Gf=V(jf,[["__scopeId","data-v-73eaadf4"]]),Xf={class:"proposal-details"},Zf={class:"proposal-details-container"},Yf=L({__name:"ProposalDetails",props:{proposal:{},expanded:{type:Boolean,default:!1}},setup(e){return(t,s)=>(_(),S("div",Xf,[d("div",Zf,[m(Gf,{proposal:t.proposal,expanded:t.expanded},null,8,["proposal","expanded"]),m(Tf,{proposal:t.proposal},null,8,["proposal"])])]))}}),Jf=V(Yf,[["__scopeId","data-v-045dd4c5"]]),eg=L({__name:"Proposal",props:{proposal:{},initExpanded:{type:Boolean,default:!1}},setup(e){const t=P(e.initExpanded);return(s,a)=>{const n=ft,i=U;return _(),A(i,{class:"proposal",compact:!0},{default:g(()=>[m(Q_,{proposal:s.proposal,expanded:o(t),onToggleExpand:a[0]||(a[0]=l=>t.value=!o(t))},null,8,["proposal","expanded"]),m(n,{class:"proposal-details-collapsible",expanded:o(t)},{default:g(()=>[m(Jf,{proposal:s.proposal,expanded:o(t)},null,8,["proposal","expanded"])]),_:1},8,["expanded"])]),_:1})}}}),Na=V(eg,[["__scopeId","data-v-67623181"]]),tg={class:"item"},sg={class:"label"},ag=L({__name:"ProposalTypeSelect",emits:["select"],setup(e,{emit:t}){const s=t,a=[...B_].filter(l=>l!=="other"),n=P("all"),i=l=>{n.value=l,s("select",n.value)};return(l,r)=>{const c=Ke;return _(),A(c,{options:o(a).map(u=>u),selected:o(n),onInput:i},{item:g(({item:u})=>[d("div",tg,[d("div",sg,I(o(gt)(u)),1)])]),_:1},8,["options","selected"])}}}),og=V(ag,[["__scopeId","data-v-f92bd4ab"]]),ng={class:"dashboard"},lg={class:"filters"},rg={style:{display:"flex",gap:"1rem"}},ig={class:"proposals-content"},cg={key:0},ug=L({__name:"Proposals.page",setup(e){const t=P(0),{page:s,onPage:a}=gs(),n=qt(s,200),i=P(""),l=qt(i,300),r=P("all"),c=w(()=>{switch(t.value){case 0:return"all";case 1:return"active";case 2:return"passed";case 3:return"denied";case 4:return"executed";default:return"all"}}),u=w(()=>l.value.toLocaleLowerCase()),p=w(()=>{var y;return((y=f.value)==null?void 0:y.count)??0}),v=w(()=>{var y;return(((y=f.value)==null?void 0:y.proposals)??[]).orderBy(k=>k.start,"desc")}),{isFetching:b,data:f}=U_(n,r,c,u),h=y=>{r.value=y};return(y,k)=>{const C=Fe,$=Be,T=be,D=De,q=tt;return _(),S("div",ng,[m($,{onTab:k[0]||(k[0]=B=>t.value=B.index)},{default:g(()=>[m(C,{header:"All"}),m(C,{header:"Active"}),m(C,{header:"Passed"}),m(C,{header:"Denied"}),m(C,{header:"Executed"})]),_:1}),d("div",lg,[m(T,{modelValue:o(i),"onUpdate:modelValue":k[1]||(k[1]=B=>ie(i)?i.value=B:null),class:"search",placeholder:"Search for Curve proposals",search:!0},null,8,["modelValue"]),d("div",rg,[m(og,{style:{"flex-grow":"1"},onSelect:h}),m(D,{class:"pagination","items-count":o(p),"items-per-page":10,page:o(s),onPage:o(a)},null,8,["items-count","page","onPage"])])]),d("div",ig,[(_(!0),S(te,null,oe(o(v),B=>(_(),A(Na,{key:B.id,class:R(["loading-backdrop",{loading:o(b)}]),proposal:B},null,8,["proposal","class"]))),128)),m(D,{class:"pagination","items-count":o(p),"items-per-page":10,page:o(s),onPage:o(a)},null,8,["items-count","page","onPage"]),o(v).length===0?(_(),S("div",cg,"No proposals could be found.")):F("",!0),m(q,{class:R({loading:o(b)})},null,8,["class"])])])}}}),dg=V(ug,[["__scopeId","data-v-f4d2c16a"]]),pg={class:"dashboard"},mg=L({__name:"Proposal.page",setup(e){const t=we("proposalId",0,{transform:Number}),s=we("proposalType"),{isFetching:a,data:n}=Oa(t,s);return(i,l)=>{const r=tt;return _(),S("div",pg,[m(r,{class:R({loading:o(a)})},null,8,["class"]),!o(a)&&o(n)?(_(),A(Na,{key:0,proposal:o(n),"init-expanded":!0},null,8,["proposal"])):F("",!0)])}}}),vg=V(mg,[["__scopeId","data-v-37f76244"]]),hg=[{stateMutability:"nonpayable",type:"function",name:"deploy_gauge",inputs:[{name:"_receiver",type:"address"},{name:"_max_emissions",type:"uint256"}],outputs:[{name:"",type:"address"}]}],_g={class:"add-new"},fg={class:"form"},gg={class:"field"},bg={class:"value"},yg={class:"field"},wg={class:"value"},kg=L({__name:"DeployGauge",emits:["gauge"],setup(e,{emit:t}){const s=t,a=P(!1),n=P(""),i=P(0),l=w(()=>Ys),r=w(()=>vs(n.value.toLocaleLowerCase())&&typeof i.value=="number"&&i.value>0),c=Hs();async function u(){const p=n.value.toLocaleLowerCase();typeof i.value=="string"&&(i.value=parseFloat(i.value));const v=Xs(i.value,18n);return Wa(a,async()=>{const{result:b,request:f}=await tn(c,{abi:hg,address:Js,functionName:"deploy_gauge",args:[p,v]}),h=await Qs(c,f);await zs(c,{hash:h}),s("gauge",b)})}return(p,v)=>{const b=be,f=Wt,h=ce,y=U;return _(),A(y,{title:"Gauge Creation"},{default:g(()=>[d("div",_g,[d("div",fg,[d("div",gg,[v[2]||(v[2]=d("div",{class:"label"},"Receiver:",-1)),d("div",bg,[m(b,{modelValue:o(n),"onUpdate:modelValue":v[0]||(v[0]=k=>ie(n)?n.value=k:null),placeholder:o(l)},null,8,["modelValue","placeholder"])])]),d("div",yg,[v[3]||(v[3]=d("div",{class:"label"},"CRV Amount (Max):",-1)),d("div",wg,[m(f,{modelValue:o(i),"onUpdate:modelValue":v[1]||(v[1]=k=>ie(i)?i.value=k:null),min:1,max:3303030299},null,8,["modelValue"])])])]),m(h,{class:"action-button request primary",disabled:!o(r)||o(a),"chain-id":o(Oe).id,onClick:u},{default:g(()=>v[4]||(v[4]=[M(" Create Fundraising Gauge ")])),_:1},8,["disabled","chain-id"])])]),_:1})}}}),$g=V(kg,[["__scopeId","data-v-e61ffefd"]]),Cg=[{constant:!1,inputs:[{name:"_target",type:"address"},{name:"_ethValue",type:"uint256"},{name:"_data",type:"bytes"}],name:"execute",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],Ag=[{constant:!1,inputs:[{name:"_executionScript",type:"bytes"},{name:"_metadata",type:"string"},{name:"_castVote",type:"bool"},{name:"_executesIfDecided",type:"bool"}],name:"newVote",outputs:[{name:"voteId",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Sg=[{name:"add_gauge",outputs:[],inputs:[{type:"address",name:"addr"},{type:"int128",name:"gauge_type"},{type:"uint256",name:"weight"}],stateMutability:"nonpayable",type:"function"}],Lg={class:"add-new"},Tg={class:"form"},Ig={class:"field"},Vg={class:"value"},qg={class:"field"},Pg={class:"value"},Dg=L({__name:"GaugeVote",props:{gauge:{default:""}},emits:["request"],setup(e,{emit:t}){const s=t,a=P(!1),n=P(""),i=P("Add a grant gauge: "),l=w(()=>Ys),r=w(()=>vs(n.value)&&!!i.value),c=w(()=>r.value&&!a.value);H(()=>e.gauge,b=>{n.value=b.toLocaleLowerCase()});async function u(){if(n.value)return Wa(a,async()=>{await v(),s("request")})}const p=Hs();async function v(){const b="0xe478de485ad2fe566d49342cbd03e49ed7db3356",f="0x40907540d8a6c65c637785e8f8b742ae6b0b9968",h=(me,de)=>String(me).padStart(de,"0"),y=Ss({abi:Sg,functionName:"add_gauge",args:[n.value,10n,0n]});let k="0x00000001";const C=Ss({abi:Cg,functionName:"execute",args:[ea,0n,y]}).substring(2),$=h((Math.floor(C.length)/2).toString(16),8);k=`${k}${f.substring(2)}${$}${C}`;const T=new FormData,q={text:i.value.replace(/(\r\n|\n|\r)/gm,"")};T.append("file",JSON.stringify(q));const K=(await(await fetch("https://ipfs.infura.io:5001/api/v0/add",{method:"POST",body:T})).json()).Hash,O=await Qs(p,{abi:Ag,address:b,functionName:"newVote",args:[k,`ipfs:${K}`,!1,!1]});await zs(p,{hash:O})}return(b,f)=>{const h=be,y=ce,k=U;return _(),A(k,{title:"Gauge Addition Vote"},{default:g(()=>[d("div",Lg,[d("div",Tg,[d("div",Ig,[f[2]||(f[2]=d("div",{class:"label"},"Gauge Address:",-1)),d("div",Vg,[m(h,{modelValue:o(n),"onUpdate:modelValue":f[0]||(f[0]=C=>ie(n)?n.value=C:null),placeholder:o(l)},null,8,["modelValue","placeholder"])])]),d("div",qg,[f[3]||(f[3]=d("div",{class:"label"},"Vote Description:",-1)),d("div",Pg,[m(h,{modelValue:o(i),"onUpdate:modelValue":f[1]||(f[1]=C=>ie(i)?i.value=C:null)},null,8,["modelValue"])])])]),m(y,{class:"action-button request primary",disabled:!o(c),"chain-id":o(Oe).id,onClick:u},{default:g(()=>f[4]||(f[4]=[M(" Create Gauge Addition Vote ")])),_:1},8,["disabled","chain-id"])])]),_:1})}}}),Bg=V(Dg,[["__scopeId","data-v-6174b540"]]),Fg={class:"dashboard"},Mg={class:"forms"},Ug=L({__name:"VeFunder.page",setup(e){const t=P(""),s=a=>{t.value=a};return(a,n)=>{const i=U;return _(),S("div",Fg,[m(i,null,{default:g(()=>n[0]||(n[0]=[d("div",{class:"explanation"},[d("div",{class:"step-one"},[d("span",null,[d("strong",null,"veFunder"),M(" process:")]),d("ol",null,[d("li",null," Create a fundraising gauge contract that allows a receiver to get a certain amount of CRV. "),d("li",null,[M(" Request a vote to add the gauge to the controller."),d("br"),M("When passed, the newly created gauge can be voted on during gauge votes and can then receive gauge emissions. ")])])]),d("div",{class:"step-two"},[d("span",null,[d("strong",null,"Gauge vote requirements:")]),d("ol",null,[d("li",null,[M(" New gauge votes must have a vote on the governance forum "),d("a",{href:"https://gov.curve.fi/",target:"_blank"}," at this address ")]),d("li",null,"You must have a minimum of 2,500 veCRV to create this vote")])])],-1)])),_:1}),d("div",Mg,[m($g,{onGauge:s}),m(Bg,{gauge:o(t)},null,8,["gauge"])])])}}}),Rg=V(Ug,[["__scopeId","data-v-5e4cd193"]]);let os;function Ka(){return os||(os=qa({url:"wss://api.defimonitor.com/main"})),os}class xg{constructor(t,s){Ue(this,"transfers$");this.socket=t,s!=null&&s.transfers$?this.transfers$=s.transfers$:this.transfers$=Da(t,"NewTransfersForToken")}sub(t){Array.isArray(t)?t.length>0&&this.socket.emit("connectToGeneralErc20ArrayLivestream",t):this.socket.emit("connectToGeneralErc20Livestream",t)}unsub(t){const s=Array.isArray(t)?t:[t];for(const a of s)this.socket.emit("disconnectFromGeneralErc20Livestream",a)}}const pt=new Map,Ha=new sn(void 0),Vt=e=>JSON.stringify(e);function Qa({queryKey:e,queryFn:t,enabled:s,observable:a,setQueryData:n,keepData:i}){const l=js(),r=w(()=>s.value&&!!a.value),c=E({queryKey:e,queryFn:()=>new Promise((u,p)=>{i||l.setQueryData(e.value,void 0);const v=Vt(e.value);let b=pt.get(v);const f=b==null?void 0:b.subscription;f==null||f.unsubscribe(),b={subscription:a.value.subscribe({next:h=>{const y=l.getQueryData(e),k=n(y,h);l.setQueryData(e.value,k),u(k)},error:h=>{p(h instanceof Error?h:new Error(String(h)))}}),users:new Set},pt.set(v,b),Ha.next({queryKeyString:v,record:b}),t()}),enabled:r,staleTime:1/0});return Eg({queryKey:e,enabled:r,keepData:i,observable:a}),c}function Eg({queryKey:e,enabled:t,observable:s,keepData:a}){const n=js(),i=jn(),l=Ha.pipe(Qt(()=>t.value),Qt(u=>u!==void 0),Qt(u=>u.queryKeyString===Vt(e.value))).subscribe(u=>{u.record.users.add(i)});H(t,async u=>{if(!u)await r(e.value);else{const p=Vt(e.value),v=pt.get(p);v&&v.users.add(i)}}),H(e,async(u,p)=>{await r(p)}),H(s,async(u,p)=>{p&&u!==p&&await c(e.value)}),ps(async()=>{await r(e.value),l.unsubscribe()});async function r(u){const p=Vt(u),v=pt.get(p);v&&(v.users.delete(i),v.users.size===0&&(v.subscription.unsubscribe(),pt.delete(p),await c(u)))}async function c(u){await n.cancelQueries({queryKey:u}),await n.invalidateQueries({queryKey:u}),a||n.setQueryData(u,void 0)}return r}function za(e){const t=w(()=>Array.isArray(e.value)?e.value:[e.value]),{socket:s,isConnected:a,url:n}=Ka(),i=w(()=>s.value?new xg(s.value):null),l=w(()=>["defimonitor-transfers",n.value,...t.value]);return Gs(t,(c,u,p,v)=>{var b;(b=i.value)==null||b.unsub(v)},{deep:!0}),Qa({queryKey:l,queryFn:()=>{var c;return(c=i.value)==null?void 0:c.sub(e.value)},enabled:a,observable:w(()=>{var c;return(c=i.value)==null?void 0:c.transfers$}),setQueryData:(c,u)=>[...c??[],...u.transfers.flat()].takeRight(200),keepData:!1})}const Og={class:"checkbox"},Wg=["checked"],Ng=["aria-checked"],Kg={class:"checkmark-label"},Hg=L({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:Je(["change"],["update:modelValue"]),setup(e,{emit:t}){const s=_t(e,"modelValue"),a=t,n=i=>{const l=i.target.checked;s.value=l,a("change",l)};return(i,l)=>(_(),S("label",Og,[d("input",{type:"checkbox",checked:s.value,onChange:n},null,40,Wg),d("span",{class:R(["checkmark",{checked:s.value}]),role:"checkbox","aria-checked":s.value},l[0]||(l[0]=[d("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),10,Ng),d("span",Kg,[j(i.$slots,"default",{},void 0,!0)])]))}}),ja=V(Hg,[["__scopeId","data-v-8ebfbe29"]]);function Ga(){return[{name:"Stables",type:"token",items:[{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT"},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC"}]},{name:"Sky",type:"token",items:[{address:"0x6b175474e89094c44da98b954eedeac495271d0f",symbol:"DAI"}]}]}function Qg(){return{name:"1inch",type:"swapper",items:[{address:"0x111111125421ca6dc452d289314280a0f8842a65",name:"1inch V6"},{address:"0x1111111254eeb25477b68fb85ed929f73a960582",name:"1inch V5"}]}}const zg={class:"add-token"},jg=L({__name:"ModalAddToken",emits:["close","token"],setup(e,{emit:t}){const s=t,a=P(""),n=Ga().flatMap(i=>i.items);return(i,l)=>{const r=be,c=_e,u=G,p=U,v=bt;return _(),A(v,{onClose:l[2]||(l[2]=b=>s("close"))},{default:g(()=>[m(p,{title:"Add token"},{default:g(()=>[d("div",zg,[m(r,{modelValue:o(a),"onUpdate:modelValue":l[0]||(l[0]=b=>ie(a)?a.value=b:null),class:"search",placeholder:"Search for tokens",search:!0},null,8,["modelValue"]),m(u,{rows:o(n),onSelected:l[1]||(l[1]=b=>s("token",b))},{row:g(({item:{address:b,symbol:f}})=>[m(c,{address:b},null,8,["address"]),d("div",null,I(f??"?"),1)]),_:1},8,["rows"])])]),_:1})]),_:1})}}}),Gg=V(jg,[["__scopeId","data-v-50529ce6"]]),Xg={class:"watchlist"},Zg={class:"item"},Yg={class:"toolbar"},Jg=L({__name:"WatchlistTokens",emits:["tokens"],setup(e,{emit:t}){const s=t,a=P(!1),n=Ga(),i=P(n[0]),l=w(()=>i.value.items),r=P(new Set(l.value.map(p=>p.address))),c=p=>{r.value.has(p)?r.value.delete(p):r.value.add(p)};H(r,p=>{s("tokens",l.value.filter(v=>p.has(v.address)))},{immediate:!0,deep:!0}),H(i,()=>{r.value=new Set(l.value.map(p=>p.address))});function u(p){i.value.items.some(b=>b.address===p.address)||i.value.items.push(p),a.value=!1}return(p,v)=>{const b=an,f=Ke,h=ce,y=_e,k=ja,C=G;return _(),S("div",Xg,[m(f,{class:"menu no-chevrons",options:o(n),selected:o(i),onInput:v[0]||(v[0]=$=>i.value=$)},{item:g(({item:{name:$},isSelected:T})=>[d("div",Zg,[M(I($)+" ",1),T?(_(),A(b,{key:0})):F("",!0)])]),_:1},8,["options","selected"]),d("div",Yg,[m(h,{onClick:v[1]||(v[1]=$=>a.value=!0)},{default:g(()=>v[5]||(v[5]=[M("+")])),_:1}),m(Gg,{show:o(a),onClose:v[2]||(v[2]=$=>a.value=!1),onToken:u},null,8,["show"])]),m(C,{rows:o(l),onSelected:v[4]||(v[4]=$=>c($.address))},{row:g(({item:{address:$,symbol:T}})=>[m(y,{address:$},null,8,["address"]),d("div",null,I(T??"?"),1),d("div",{class:"center",onClick:v[3]||(v[3]=pe(()=>{},["stop"]))},[m(k,{"model-value":o(r).has($),"onUpdate:modelValue":D=>c($)},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["rows"])])}}}),e1=V(Jg,[["__scopeId","data-v-a444c54d"]]),t1={style:{display:"flex",gap:"1rem"}},s1={class:"transfers-card-body"},a1={class:"transfers-options"},o1={class:"option"},n1={class:"option"},l1={class:"center-vert"},r1=["href"],i1=["href"],c1={class:"no-ellipsis"},u1=["href"],d1={class:"no-ellipsis"},p1=["href"],m1={class:"center-vert"},v1=["href"],h1={class:"end"},_1=["href"],ns=10,f1=L({__name:"TableTransfers",setup(e){const t=P([]),s=P(0),a=w(()=>{const h=s.value;return typeof h=="string"?parseFloat(h)||0:h||0}),{data:n,isFetching:i}=za(w(()=>t.value.map(h=>h.address))),{relativeTime:l}=Ve(),r=P(""),c=w(()=>(n.value??[]).filter(h=>{const y=r.value.toLocaleLowerCase().split(" "),k=C=>y.some($=>C.toLocaleLowerCase().includes($));return(k(h.transferFrom)||k(h.transferTo))&&h.parsedAmount>=a.value}).orderBy([h=>h.blockUnixtime,h=>h.positionInBlock],"desc")),{page:u,rowsPage:p,onPage:v}=kt(c,ns),b=h=>h<1?h.toFixed(4):h>1e3?h.toFixed(0):h.toFixed(2),f=async h=>{await navigator.clipboard.writeText(h)};return(h,y)=>{const k=be,C=De,$=Wt,T=Ne,D=ce,q=_e,B=G,ue=U;return _(),A(ue,{class:"transfers-card",title:"Transfers"},{actions:g(()=>[d("div",t1,[m(k,{modelValue:o(r),"onUpdate:modelValue":y[0]||(y[0]=K=>ie(r)?r.value=K:null),placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(c).length>ns?(_(),A(C,{key:0,"items-count":o(c).length,"items-per-page":ns,page:o(u),onPage:o(v)},null,8,["items-count","page","onPage"])):F("",!0)])]),default:g(()=>[d("div",s1,[d("div",a1,[d("div",o1,[m(e1,{onTokens:y[1]||(y[1]=K=>t.value=K)})]),d("div",n1,[y[4]||(y[4]=d("div",{class:"label"},"Min Amount",-1)),m($,{modelValue:o(s),"onUpdate:modelValue":y[2]||(y[2]=K=>ie(s)?s.value=K:null),min:0,max:1/0},null,8,["modelValue"])])]),m(B,{class:"transfers-table",rows:o(p),columns:["Hash","Block","Gas","From","To","Amount","Token",{label:"Age",align:"end"}],loading:o(i)},{row:g(({item:K})=>[d("div",l1,[d("a",{class:"font-mono",href:`https://etherscan.io/tx/${K.txHash}`,target:"_blank"},I(o(Tt)(K.txHash,10)),9,r1),m(D,{onClick:O=>f(K.txHash)},{default:g(()=>[m(T)]),_:2},1032,["onClick"])]),d("div",null,[d("a",{class:"font-mono",href:`https://etherscan.io/block/${K.blockNumber}`,target:"_blank"},I(K.blockNumber),9,i1)]),d("div",null,I(K.gasInGwei),1),d("div",c1,[d("a",{class:"font-mono",href:`https://etherscan.io/address/${K.transferFrom}`,target:"_blank"},I(o(ke)(K.transferFrom,10)),9,u1)]),d("div",d1,[d("a",{class:"font-mono",href:`https://etherscan.io/addr ess/${K.transferTo}`,target:"_blank"},I(o(ke)(K.transferTo,10)),9,p1)]),d("div",null,I(b(K.parsedAmount)),1),d("div",m1,[m(q,{class:"token",chain:"ethereum",address:K.coinAddress},null,8,["address"]),d("a",{target:"_blank",href:`https://etherscan.io/address/${K.coinAddress}`},I(K.coinSymbol),9,v1)]),d("div",h1,[d("a",{href:`https://etherscan.io/tx/${K.txHash}`,target:"_blank",onClick:y[3]||(y[3]=pe(()=>{},["stop"]))},I(o(l)(K.blockUnixtime)),9,_1)])]),_:1},8,["rows","loading"])])]),_:1})}}}),g1=V(f1,[["__scopeId","data-v-6960da1e"]]),b1={class:"dashboard-grid"},y1=L({__name:"Transfers",setup(e){return(t,s)=>(_(),S("div",b1,[m(g1,{style:{"grid-area":"transfers"}})]))}}),w1=V(y1,[["__scopeId","data-v-a3cb3013"]]);class k1{constructor(t,s){Ue(this,"swaps$");this.socket=t,this.swaps$=(s==null?void 0:s.swaps$)??Da(t,"NewSwapDataForAddress")}sub(t){Array.isArray(t)?t.length>0&&this.socket.emit("connectToGeneralErc20SwapArrayLivestream",t):this.socket.emit("connectToGeneralErc20SwapLivestream",t)}unsub(t){const s=Array.isArray(t)?t:[t];for(const a of s)this.socket.emit("disconnectFromGeneralErc20SwapLivestream",a)}}function $1(e){const t=w(()=>Array.isArray(e.value)?e.value:[e.value]),{socket:s,isConnected:a,url:n}=Ka(),i=w(()=>s.value?new k1(s.value):null),l=w(()=>["defimonitor-swaps",n.value,t.value]);return Gs(t,(c,u,p,v)=>{var b;(b=i.value)==null||b.unsub(v)},{deep:!0}),Qa({queryKey:l,queryFn:()=>{var c;return(c=i.value)==null?void 0:c.sub(e.value)},enabled:a,observable:w(()=>{var c;return(c=i.value)==null?void 0:c.swaps$}),setQueryData:(c,u)=>[...c??[],...u.swaps.flat()].takeRight(200),keepData:!1})}const C1={class:"watchlist"},A1={class:"item"},S1=L({__name:"WatchlistSwappers",emits:["swappers"],setup(e,{emit:t}){const s=t,a=[Qg()],n=P(a[0]),i=w(()=>n.value.items),l=P(new Set(i.value.map(c=>c.address))),r=c=>{l.value.has(c)?l.value.delete(c):l.value.add(c)};return H(l,c=>{s("swappers",i.value.filter(u=>c.has(u.address)))},{immediate:!0,deep:!0}),H(n,()=>{l.value=new Set(i.value.map(c=>c.address))}),(c,u)=>{const p=Ke,v=ja,b=G;return _(),S("div",C1,[m(p,{options:a,selected:o(n),onInput:u[0]||(u[0]=f=>n.value=f)},{item:g(({item:{name:f}})=>[d("div",A1,I(f),1)]),_:1},8,["selected"]),m(b,{rows:o(i),onSelected:u[2]||(u[2]=f=>r(f.address))},{row:g(({item:{address:f,name:h}})=>[d("div",null,I(h??"?"),1),d("div",{class:"center",onClick:u[1]||(u[1]=pe(()=>{},["stop"]))},[m(v,{"model-value":o(l).has(f),"onUpdate:modelValue":y=>r(f)},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["rows"])])}}}),L1=V(S1,[["__scopeId","data-v-eeebae90"]]),T1={style:{display:"flex",gap:"1rem"}},I1={class:"swaps-card-body"},V1={class:"swaps-options"},q1={class:"option"},P1={class:"option"},D1={class:"center-vert"},B1=["href"],F1=["href"],M1=["href"],U1=["href"],R1={class:"center-vert"},x1=["href"],E1={class:"center-vert"},O1=["href"],W1={class:"end"},N1=["href"],ls=10,K1=L({__name:"TableSwaps",setup(e){const t=P([]),s=P(0),a=w(()=>{const f=s.value;return typeof f=="string"?parseFloat(f)||0:f||0}),{data:n,isFetching:i}=$1(w(()=>t.value.map(f=>f.address))),{relativeTime:l}=Ve(),r=P(""),c=w(()=>(n.value??[]).filter(f=>{const h=r.value.toLocaleLowerCase().split(" "),y=C=>h.some($=>C.toLocaleLowerCase().includes($)),k=f.parsedBeforeAmount>=a.value||f.parsedAfterAmount>=a.value;return(y(f.coinAfterAddress)||y(f.coinAfterSymbol)||y(f.coinBeforeAddress)||y(f.coinBeforeSymbol))&&k}).orderBy([f=>f.blockUnixtime,f=>f.positionInBlock],"desc")),{page:u,rowsPage:p,onPage:v}=kt(c,ls),b=f=>f<1?f.toFixed(4):f>1e3?f.toFixed(0):f.toFixed(2);return(f,h)=>{const y=be,k=De,C=Wt,$=_e,T=G,D=U;return _(),A(D,{class:"swaps-card",title:"Swaps",loading:o(i)},{actions:g(()=>[d("div",T1,[m(y,{modelValue:o(r),"onUpdate:modelValue":h[0]||(h[0]=q=>ie(r)?r.value=q:null),placeholder:"Search for...",search:!0},null,8,["modelValue"]),o(c).length>ls?(_(),A(k,{key:0,"items-count":o(c).length,"items-per-page":ls,page:o(u),onPage:o(v)},null,8,["items-count","page","onPage"])):F("",!0)])]),default:g(()=>[d("div",I1,[d("div",V1,[d("div",q1,[h[4]||(h[4]=d("div",{class:"label"},"Watchlist",-1)),m(L1,{onSwappers:h[1]||(h[1]=q=>t.value=q)})]),d("div",P1,[h[5]||(h[5]=d("div",{class:"label"},"Min Amount",-1)),m(C,{modelValue:o(s),"onUpdate:modelValue":h[2]||(h[2]=q=>ie(s)?s.value=q:null),min:0,max:1/0},null,8,["modelValue"])])]),m(T,{class:"swaps-table",rows:o(p),columns:["Hash","Block","Gas","From","To","In","Out",{label:"Age",align:"end"}]},{row:g(({item:q})=>[d("div",D1,[d("a",{class:"font-mono",href:`https://etherscan.io/tx/${q.txHash}`,target:"_blank"},I(o(Tt)(q.txHash,10)),9,B1)]),d("div",null,[d("a",{class:"font-mono",href:`https://etherscan.io/block/${q.blockNumber}`,target:"_blank"},I(q.blockNumber),9,F1)]),d("div",null,I(q.gasInGwei),1),d("div",null,[d("a",{class:"font-mono",href:`https://etherscan.io/address/${q.senderAddress}`,target:"_blank"},I(o(Tt)(q.senderAddress,5)),9,M1)]),d("div",null,[d("a",{class:"font-mono",href:`https://etherscan.io/address/${q.receiverAddress}`,target:"_blank"},I(o(Tt)(q.receiverAddress,5)),9,U1)]),d("div",R1,[m($,{chain:"ethereum",address:q.coinBeforeAddress},null,8,["address"]),M(" "+I(b(q.parsedBeforeAmount))+" ",1),d("a",{target:"_blank",href:`https://etherscan.io/address/${q.coinBeforeAddress}`},I(q.coinBeforeSymbol),9,x1)]),d("div",E1,[m($,{chain:"ethereum",address:q.coinAfterAddress},null,8,["address"]),M(" "+I(b(q.parsedAfterAmount))+" ",1),d("a",{target:"_blank",href:`https://etherscan.io/address/${q.coinAfterAddress}`},I(q.coinAfterSymbol),9,O1)]),d("div",W1,[d("a",{href:`https://etherscan.io/tx/${q.txHash}`,target:"_blank",onClick:h[3]||(h[3]=pe(()=>{},["stop"]))},I(o(l)(q.blockUnixtime)),9,N1)])]),_:1},8,["rows"])])]),_:1},8,["loading"])}}}),H1=V(K1,[["__scopeId","data-v-efa5c48f"]]),Q1={class:"dashboard-grid"},z1=L({__name:"Swaps",setup(e){return(t,s)=>(_(),S("div",Q1,[m(H1,{style:{"grid-area":"swaps"}})]))}}),j1=V(z1,[["__scopeId","data-v-8b2c43b9"]]),G1={class:"dashboard-grid"},X1={class:"transfers"},Z1={class:"card-transfer"},Y1={class:"block"},J1=["href"],e0={class:"time"},t0={class:"numbers"},s0={class:"value"},a0={class:"value"},o0=L({__name:"CrvUsd",setup(e){const{data:t}=za(P("0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48")),{relativeTime:s}=Ve(),a=w(()=>(t.value??[]).groupBy(n=>n.blockNumber).entries().map(([,n])=>({blockNumber:n[0].blockNumber,blockUnixTime:n[0].blockUnixtime,amount:n.reduce((i,l)=>i+l.parsedAmount,0),count:n.length})).orderBy(n=>n.blockNumber,"desc").take(5));return(n,i)=>{const l=X,r=U;return _(),S("div",G1,[d("div",X1,[i[3]||(i[3]=d("div",{class:"title"},"Latest crvUSD transactions",-1)),m(xs,{name:"transfers",tag:"div",class:"transfer-list"},{default:g(()=>[(_(!0),S(te,null,oe(o(a),c=>(_(),A(r,{key:c.blockNumber},{default:g(()=>[d("div",Z1,[d("div",Y1,[i[0]||(i[0]=M(" Block ")),d("a",{class:"font-mono",href:`https://etherscan.io/block/${c.blockNumber}`,target:"_blank"},I(c.blockNumber),9,J1)]),d("div",e0,I(o(s)(c.blockUnixTime)),1),d("div",t0,[d("div",s0,[m(l,{type:"dollar",value:c.amount},null,8,["value"])]),i[1]||(i[1]=d("div",{class:"label"},"crvUSD transfered",-1)),d("div",a0,I(c.count),1),i[2]||(i[2]=d("div",{class:"label"},"crvUSD transactions",-1))])])]),_:2},1024))),128))]),_:1})])])}}}),n0=V(o0,[["__scopeId","data-v-bb81338f"]]),l0={class:"dashboard"},r0=L({__name:"DefiMonitor.page",setup(e){const{tabActive:t,tabActiveIndex:s}=at(["transfers","swaps","crvusd"],"defimonitor");return(a,n)=>{const i=Fe,l=Be;return _(),S("div",l0,[m(l,{active:o(s),onTab:n[0]||(n[0]=r=>s.value=r.index)},{default:g(()=>[m(i,{header:"Transfers"},{default:g(()=>[(_(),A(re,null,[o(t)==="transfers"?(_(),A(w1,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"Swaps"},{default:g(()=>[(_(),A(re,null,[o(t)==="swaps"?(_(),A(j1,{key:0})):F("",!0)],1024))]),_:1}),m(i,{header:"crvUSD"},{default:g(()=>[(_(),A(re,null,[o(t)==="crvusd"?(_(),A(n0,{key:0})):F("",!0)],1024))]),_:1})]),_:1},8,["active"])])}}}),i0=V(r0,[["__scopeId","data-v-59b61489"]]),c0=[{path:"/",component:oc},{path:"/platform",redirect:{name:"revenue"}},{path:"/platform/chains/:chain?/:type?",name:"chains",component:Wc},{path:"/platform/pools/:chain?",name:"pools",component:$u},{path:"/platform/pools/:chain/:poolAddr/:tab?",name:"poolspool",component:od},{path:"/platform/revenue/:tab?",name:"revenue",component:Rp},{path:"/platform/crvusd",name:"crvusd",component:Um},{path:"/platform/crvusd/market/:marketAddr/:tab?",name:"crvusdmarket",component:Zv},{path:"/platform/lending/:chain?",name:"llamalend",component:gh},{path:"/platform/lending/:chain/:marketAddr/:tab?",name:"llamalendmarket",component:n_},{path:"/platform/monitor",name:"monitor",component:D_},{path:"/dao",redirect:{name:"proposals"}},{path:"/dao/proposals",name:"proposals",component:dg},{path:"/dao/proposal/:proposalType/:proposalId",component:vg},{path:"/dao/vefunder",component:Rg},{path:"/defimonitor/:tab?",name:"defimonitor",component:i0}],u0={titleRoute:"/",menuItems:[{label:"Articles",url:"https://blog.curvemonitor.com/"},{label:"Platform",children:[{to:"/platform/chains",label:"Chains"},{to:"/platform/pools",label:"Pools",tag:"alpha"},{to:"/platform/revenue",label:"Revenue"},{to:"/platform/crvusd",label:"crvUSD"},{to:"/platform/lending",label:"Lending"},{to:"/platform/monitor",label:"Monitor",tag:"beta"}]},{label:"DAO",children:[{to:"/dao/proposals",label:"Proposals"},{to:"/dao/vefunder",label:"VeFunder"}]}]};let Xa="http://localhost:8545";Xa=void 0;function d0(e=[]){return on({chains:[Oe],connectors:[Ls(),...e],transports:{[Oe.id]:nn([Ts(Xa,{batch:{wait:100}}),ln(Ls),Ts("https://eth.llamarpc.com",{batch:{wait:200}})])}})}function p0(e,t){const s=rn(e);for(const i of[])s.use(i);const a=cn();s.use(a);const n=new un({defaultOptions:{queries:{staleTime:1e3*60*5,queryKeyHashFn:dn}},queryCache:new pn({onError:(i,l)=>{i.message.includes("Connector not connected")||i.message.includes("connector2.getAccounts is not a function")||i.message.includes("getAccounts is not a function")||Ae({text:`Failed querying ${l.queryHash} >>> ${i.message}`,type:"error"})}})});return s.use(mn,{queryClient:n}).use(vn).use(hn,{config:d0(t==null?void 0:t.extraWagmiConnectors)}),{app:s,pinia:a}}const{app:m0}=p0(pr),v0=[u0],h0=[c0],Za=_s();Za.pages=v0;Za.routes=h0;const _0=Pr();m0.use(_0).mount("#app");
