import{d as b,e as H,o as d,w as u,b as y,u as o,f as a,a as p,j as C,i as n,Q as l,g as N,a7 as R,_ as S}from"./index-jdaCXud5.js";import{_ as Q}from"./Table-ra7hNSWB.js";import{i as v}from"./Chain-DEbNFSfB.js";import{t as V,g as q,f as E}from"./timestamp-C4C6eGnP.js";import{u as F}from"./useQuery-bzXZhUsG.js";import{u as I}from"./UseRelativeTime-hyuK4UmU.js";const L=r=>({lastRecordedBlock:r.last_recorded_block,oracles:r.oracles.map(({block_header:s,...t})=>({chain:t.chain,address:t.address,lastConfirmedBlockNumber:t.last_confirmed_block_number,blockHeader:{hashBlock:s.block_hash,hashParent:s.parent_hash,stateRoot:s.state_root,blockNumber:s.block_number,timestamp:V(s.timestamp)}}))});async function j(r){const s=q(r),t=await E(`${s}/v1/oracles/all`);return L(t)}function A(){return F({queryKey:["oracles-all"],queryFn:()=>j()})}const D={class:"icon"},J=["src"],K={key:1,class:"spacer"},P=["onClick"],U={class:"end"},z=["onClick"],G=["onClick"],M=["onClick"],W={class:"end"},X=b({__name:"TableOracles",setup(r){const{isFetching:s,data:t}=A(),{relativeTime:B}=I();async function c(e){R({text:`Copied ${e}`,type:"success",duration:5e3}),await navigator.clipboard.writeText(e)}return(e,ee)=>{const T=Q,w=N;return d(),H(w,{title:"Oracles",loading:o(s)},{actions:u(()=>{var i;return[C(" Last Recorded Block: "+n((i=o(t))==null?void 0:i.lastRecordedBlock),1)]}),default:u(()=>{var i;return[y(T,{loading:o(s),rows:((i=o(t))==null?void 0:i.oracles)??[],columns:["Chain","Address",{label:"Last Block",align:"end"},"Block Hash","Parent Hash","State Root",{label:"Time",align:"end"}]},{row:u(({item:{chain:_,address:h,lastConfirmedBlockNumber:O,blockHeader:{hashBlock:f,hashParent:k,stateRoot:g,timestamp:$}}})=>[a("div",D,[("iconChain"in e?e.iconChain:o(v))(_)?(d(),p("img",{key:0,src:("iconChain"in e?e.iconChain:o(v))(_)},null,8,J)):(d(),p("div",K)),C(" "+n(_),1)]),a("div",null,[a("a",{onClick:m=>c(h)},n(("addressShort"in e?e.addressShort:o(l))(h,12)),9,P)]),a("div",U,n(O),1),a("div",null,[a("a",{onClick:m=>c(f)},n(("addressShort"in e?e.addressShort:o(l))(f,12)),9,z)]),a("div",null,[a("a",{onClick:m=>c(k)},n(("addressShort"in e?e.addressShort:o(l))(k,12)),9,G)]),a("div",null,[a("a",{onClick:m=>c(g)},n(("addressShort"in e?e.addressShort:o(l))(g,12)),9,M)]),a("div",W,n(o(B)($.getTime())),1)]),_:1},8,["loading","rows"])]}),_:1},8,["loading"])}}}),Y=S(X,[["__scopeId","data-v-ba4543df"]]),Z={class:"dashboard"},x=b({__name:"Oracles.page",setup(r){return(s,t)=>(d(),p("div",Z,[y(Y,{style:{"grid-area":"oracles"}})]))}}),ie=S(x,[["__scopeId","data-v-db7347a3"]]);export{ie as default};
