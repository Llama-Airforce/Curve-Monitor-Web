import{q as j,d as x,f as w,h as S,o as g,w as b,b as c,u as t,_ as O,e as P,r as R,ak as Z,a as i,O as q,X as W,c as z,W as M,j as ee,t as u,i as U,Q as N}from"./index-CmdpEOf2.js";import{c as H,_ as Q}from"./ChartStylesApex-ByBNAVXM.js";import{a as X,b as se}from"./queries-4n5jJCIG.js";import{_ as G}from"./Table-DY_kBkCZ.js";import{_ as oe}from"./IconExpander-6DR_JouC.js";import{u as te,_ as J}from"./UsePagination-aBIxGiY2.js";import{_ as K}from"./InputText-B4Wolguj.js";import{r as A}from"./Number-D99EWjzz.js";import{a as ne,_ as ae}from"./TabItem.vue_vue_type_script_setup_true_lang-mQKi9nsi.js";import{c as re}from"./String-TwmdtJxb.js";import"./Helper-B7Ow_9wE.js";import{u as Y}from"./UseRelativeTime-B5keD9yP.js";import{u as le}from"./UseExpansion-GV2QMEfL.js";import"./Object-DOSYkgA0.js";import"./useQuery-BSLRV5Ma.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=j("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=j("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=j("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var m=(h=>(h.Swap="swap",h.Deposit="deposit",h.Remove="remove",h))(m||{});const pe=x({__name:"LabelsWorstAbsolute",setup(h){const{data:f,isFetching:_}=X(),p=s=>(s??[]).filter(n=>n.numOfAllTx>=12).map(n=>({...n,occurrences:n.occurrences})).sort((n,d)=>d.occurrences-n.occurrences).slice(0,10),T=w(()=>p(f.value).map(s=>s.label)),$=w(()=>p(f.value).map(s=>s.occurrences)),L=w(()=>H({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:s=>{const n=s.w.globals.labels[s.seriesIndex],d=s.series[s.seriesIndex];return[`<div><b>${n}</b>:</div><div>Occurences: ${v(d)}</div>`].join("")}},labels:T.value})),v=s=>`${s}`;return(s,n)=>{const d=Q,e=O;return g(),S(e,{title:"Worst absolute offenders",loading:t(_)},{default:b(()=>[c(d,{options:t(L),series:t($)},null,8,["options","series"])]),_:1},8,["loading"])}}}),ue=P(pe,[["__scopeId","data-v-b592f2a0"]]),_e=x({__name:"LabelsWorstRelative",setup(h){const{data:f,isFetching:_}=X(),p=s=>(s??[]).filter(n=>n.numOfAllTx>=12).map(n=>({...n,ratio:Number((n.occurrences/n.numOfAllTx*100).toFixed(2))})).sort((n,d)=>d.ratio-n.ratio).slice(0,10),T=w(()=>p(f.value).map(s=>s.label)),$=w(()=>p(f.value).map(s=>s.ratio)),L=w(()=>H({chart:{id:"chainRevenues",type:"donut",animations:{enabled:!1}},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:s=>{const n=s.w.globals.labels[s.seriesIndex],d=s.series[s.seriesIndex];return[`<div><b>${n}</b>:</div><div>Ratio: ${v(d)}</div>`].join("")}},labels:T.value})),v=s=>`${s}%`;return(s,n)=>{const d=Q,e=O;return g(),S(e,{title:"Worst relative offenders",loading:t(_)},{default:b(()=>[c(d,{options:t(L),series:t($)},null,8,["options","series"])]),_:1},8,["loading"])}}}),me=P(_e,[["__scopeId","data-v-4ec81306"]]),he={style:{display:"grid","grid-template-columns":"auto auto"}},fe={style:{display:"flex",gap:"1rem"}},ge={key:0,class:"end"},ve=["href"],be=["href"],we=["href"],ye=["innerHTML"],ke={key:1,class:"end"},E=10,$e=x({__name:"Transactions",props:{txs:{default:null},header:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},time:{type:Boolean,default:!0}},setup(h){const{relativeTime:f}=Y(),_=R(""),p=R([m.Swap,m.Deposit,m.Remove]),T=w(()=>h.time?["Type","Block","Tx","Trader","Assets","Time"]:["Type","Tx","Trader","Assets"]),$=w(()=>(h.txs??[]).filter(e=>p.value.includes(e.transaction_type)).filter(e=>{const o=_.value.toLocaleLowerCase().split(" "),r=y=>o.some(k=>y.toLocaleLowerCase().includes(k));return r(e.block_number.toString())||r(e.trader)||r(e.tx_hash)})),{page:L,rowsPage:v,onPage:s}=te($,E),n=e=>{if(e.transaction_type===m.Swap){const o=e.coins_leaving_wallet[0],r=e.coins_entering_wallet[0],y=A(parseFloat(o.amount.toString()),2),k=A(parseFloat(r.amount.toString()),2),C=`<span>${y} ${o.name}</span>`,I="<span>-></span>",a=`<span style='justify-self: end;'>${k} ${r.name}</span>`;return`${C}${I}${a}`}else if(e.transaction_type===m.Deposit){const o=e.coins_entering_wallet[0];return`${A(parseFloat(o.amount.toString()),2)} ${o.name}`}else{const o=e.coins_leaving_wallet[0];return`${A(parseFloat(o.amount.toString()),2)} ${o.name}`}},d=e=>{e===0?p.value=[m.Swap,m.Deposit,m.Remove]:e===1?p.value=[m.Swap]:e===2?p.value=[m.Deposit]:e===3?p.value=[m.Remove]:p.value=[]};return(e,o)=>{const r=ae,y=ne,k=K,C=J,I=de,a=ie,V=ce,B=G,D=O;return g(),S(D,{class:"trades-card",title:"Transactions"},Z({default:b(()=>[c(B,{class:W(["trades-table",{compact:e.compact,time:e.time}]),rows:t(v),columns:t(T)},{row:b(({item:l})=>[i("div",{class:W(["type",{deposit:l.transaction_type==="deposit",remove:l.transaction_type==="remove",swap:l.transaction_type==="swap"}])},[l.transaction_type==="deposit"?(g(),S(I,{key:0})):l.transaction_type==="remove"?(g(),S(a,{key:1})):(g(),S(V,{key:2})),ee(" "+u(("capitalize"in e?e.capitalize:t(re))(l.transaction_type)),1)],2),e.time?(g(),z("div",ge,[i("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/block/${l.block_number}`},u(l.block_number),9,ve)])):M("",!0),i("div",null,[i("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/tx/${l.tx_hash}`,onClick:o[2]||(o[2]=U(()=>{},["stop"]))},u(("addressShort"in e?e.addressShort:t(N))(l.tx_hash)),9,be)]),i("div",null,[i("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/address/${l.trader}`,onClick:o[3]||(o[3]=U(()=>{},["stop"]))},u(("addressShort"in e?e.addressShort:t(N))(l.trader)),9,we)]),i("div",{class:W(["assets",{swap:l.transaction_type==="swap"}]),innerHTML:n(l)},null,10,ye),e.time?(g(),z("div",ke,u(t(f)(l.block_unixtime)),1)):M("",!0)]),_:1},8,["class","rows","columns"])]),_:2},[e.header?{name:"actions",fn:b(()=>[i("div",he,[c(y,{class:"types",onTab:o[0]||(o[0]=l=>d(l.index))},{default:b(()=>[c(r,{header:"All"}),c(r,{header:"Swaps"}),c(r,{header:"Deposits"}),c(r,{header:"Removals"})]),_:1})]),i("div",fe,[c(k,{modelValue:t(_),"onUpdate:modelValue":o[1]||(o[1]=l=>q(_)?_.value=l:null),search:"",placeholder:"Search for..."},null,8,["modelValue"]),c(C,{class:"pagination","items-count":t($).length,"items-per-page":E,page:t(L),onPage:t(s)},null,8,["items-count","page","onPage"])])]),key:"0"}:void 0]),1024)}}}),Se=P($e,[["__scopeId","data-v-8e8f8383"]]),Te={style:{display:"flex",gap:"1rem"}},Le=["href"],Ae={style:{display:"grid",gap:"1ch","grid-template-columns":"auto 16ch 1fr"}},Ce=["href"],Ie={class:"end"},F=10,xe=x({__name:"Sandwiches",setup(h){const f=R(1),{data:_,isFetching:p}=se(),{expanded:T,toggleExpansion:$}=le(),{relativeTime:L}=Y(),v=R(""),s=w(()=>_.value?.totalPages??0*F),n=w(()=>(_.value?.data??[]).filter(e=>{const o=v.value.toLocaleLowerCase().split(" "),r=y=>o.some(k=>y.toLocaleLowerCase().includes(k));return r(e.poolName)||r(e.poolAddress)||r(e.label)}).orderBy([e=>e.frontrun.block_unixtime,e=>e.frontrun.tx_position],"desc")),d=e=>[e.frontrun,...e.center,e.backrun].orderBy([o=>o.block_unixtime,o=>o.tx_position]);return(e,o)=>{const r=K,y=J,k=oe,C=G,I=O;return g(),S(I,{class:"sandwiches-card",title:"Sandwiches",loading:t(p)},{actions:b(()=>[i("div",Te,[c(r,{modelValue:t(v),"onUpdate:modelValue":o[0]||(o[0]=a=>q(v)?v.value=a:null),search:"",placeholder:"Search for..."},null,8,["modelValue"]),t(s)>F?(g(),S(y,{key:0,class:"pagination","items-count":t(s),"items-per-page":F,page:t(f),onPage:o[1]||(o[1]=a=>f.value=a)},null,8,["items-count","page"])):M("",!0)])]),default:b(()=>[c(C,{class:"sandwiches-table",rows:t(n),columns:["Pool","Action","Affected Contract",{label:"Time",align:"end"}],expanded:t(T),onSelect:o[2]||(o[2]=a=>t($)(a))},{row:b(({item:a,expanded:V})=>[i("div",null,[i("a",{class:"vote-link",target:"_blank",href:`https://etherscan.io/address/${a.poolAddress}`},u(a.poolName),9,Le)]),i("div",null,[i("div",Ae,[i("a",{class:"vote-link font-mono",target:"_blank",href:`https://etherscan.io/address/${a.center[0].trader}`},u(("addressShort"in e?e.addressShort:t(N))(a.center[0].trader)),9,Ce),i("span",null," lost "+u(("round"in e?e.round:t(A))(a.user_losses_details.reduce((B,D)=>B+D.amount,0),2))+" "+u(a.user_losses_details[0].unit),1),i("span",null,u(("round"in e?e.round:t(A))(-a.user_losses_details[0].lossInPercentage,2))+"% slippage, or $"+u(("round"in e?e.round:t(A))(a.lossInUsd,2)),1)])]),i("div",null,u(a.label),1),i("div",Ie,u(t(L)(a.frontrun.block_unixtime)),1),c(k,{expanded:V},null,8,["expanded"])]),"row-details":b(({item:a})=>[c(Se,{compact:"",class:"transactions",txs:d(a),header:!1,time:!1},null,8,["txs"])]),_:1},8,["rows","expanded"])]),_:1},8,["loading"])}}}),Pe=P(xe,[["__scopeId","data-v-a1085f7d"]]),Re={class:"dashboard"},Oe=x({__name:"Sandwiches.page",setup(h){return(f,_)=>(g(),z("div",Re,[c(Pe,{style:{"grid-area":"sws"}}),c(me,{style:{"grid-area":"relative"}}),c(ue,{style:{"grid-area":"absolute"}})]))}}),Ge=P(Oe,[["__scopeId","data-v-07514d29"]]);export{Ge as default};
