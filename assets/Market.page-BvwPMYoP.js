import{_ as le,a as se}from"./TabItem.vue_vue_type_script_setup_true_lang-se5rT17K.js";import{d as q,T as I,U as E,f as y,V as z,h as L,o as w,_ as U,w as h,a as _,b as t,j as R,u as e,g as $,r as V,c as W,e as D,t as S,W as O,S as ee,a5 as ne,a6 as oe,N as re,R as ie,a3 as j}from"./index-C4h5EpGr.js";import{e as P,c as ce}from"./llamalend-BU_xQSY-.js";import{c as de,d as ue,b as me,a as pe,f as he,e as ve,T as _e,_ as ge,g as fe,h as ye,i as ke,k as be,l as we,m as $e,j as Le,u as Ce,n as Te,o as qe,C as Be,p as Ve,q as Ae}from"./TableTrades-B6mQ2c6T.js";import"./ChartStylesApex-DiGd2UZL.js";import{a as Se,_ as G}from"./KPI-DRB0vuVV.js";import{_ as J}from"./AsyncValue-DqxYCO4a.js";import{u as Q,a as N,_ as K,b as H,f as Fe,G as F,P as We}from"./UseLightweightChart-BUxLx6C5.js";import{r as M,u as Y}from"./Number-AtrYJDP3.js";import{t as Ue}from"./util-M70Hx2OY.js";import{u as X,_ as Z}from"./UseLegend-DN2d1t3L.js";import{_ as De}from"./ButtonToggle-B-qfUHng.js";import{_ as ae,a as Pe}from"./Table-DOspjoua.js";import{L as te}from"./link-BsaZb5dC.js";import{_ as Oe}from"./TokenIcon-C8CqJ73E.js";import{a as x}from"./index-BF3OLDG4.js";import{u as Re}from"./UseTabNavigation-CG3gocgC.js";import"./timestamp-BfMWSCVv.js";import"./useQuery-DTta5F3P.js";import"./UsePagination-DET1yOgb.js";import"./UseRelativeTime-Bhi07TIE.js";import"./Object-DOSYkgA0.js";const Me={style:{display:"flex","align-items":"center"}},Ie={ref:"chartRef",class:"chart"},Ee=q({__name:"ChartEquity",props:{equity:{}},setup(o){const u=I(),g=E("card"),{chart:v,series:i}=Q({createChartOptions:N(),series:{type:Fe,name:"equity",options:y(()=>{const{colors:s}=u.value;return{priceFormat:{type:"custom",formatter:l=>`$${M(l,0,"dollar")}${Y(l)}`,minMove:.01},lineWidth:2,baseValue:{type:"price",price:0},topLineColor:s.green,bottomLineColor:s.red,lastValueVisible:!1,priceLineVisible:!1}})}});z(a);function a(){if(!v.value||!i.equity)return;const s=o.equity.map(l=>({time:l.timestamp.getUTCTimestamp(),value:l.equity})).uniqWith((l,r)=>l.time===r.time).orderBy(l=>l.time,"asc");s.length>0&&i.equity.setData(s),v.value.timeScale().fitContent()}return(s,l)=>{const r=Se,n=K,c=H,d=U;return w(),L(d,{ref_key:"card",ref:g,title:"Equity"},{actions:h(()=>[_("div",Me,[t(r,{style:{"margin-right":"1rem"}},{default:h(()=>l[0]||(l[0]=[_("span",null,[R(" This chart shows the difference between the value of the collateral and the debt."),_("br"),_("br"),R(" Positive values indicate net equity (collateral exceeds debt),"),_("br"),R(" while negative values indicate a deficit (debt exceeds collateral, also known as bad debt). ")],-1)])),_:1}),t(n,{filename:"equity",series:e(i)},null,8,["series"]),t(c,{chart:e(v),target:e(g)},null,8,["chart","target"])])]),default:h(()=>[_("div",Ie,null,512)]),_:1},512)}}}),ze={class:"dashboard-grid"},Qe=q({__name:"Liquidations",props:{market:{},chain:{}},setup(o){const u=y(()=>{var B;return(B=o.market)==null?void 0:B.controller}),{isFetching:g,data:v}=P($(()=>o.market),$(()=>o.chain)),i=y(()=>v.value.map(({timestamp:B,priceOracle:A})=>({timestamp:B,priceOracle:A}))),a=y(()=>v.value.map(({timestamp:B,discountLiquidation:A})=>({timestamp:B,discount:A}))),{isFetching:s,data:l}=de(V("lending"),$(()=>o.chain),u),{isFetching:r,data:n}=ue(V("lending"),$(()=>o.chain),u),{isFetching:c,data:d}=me(V("lending"),$(()=>o.chain),u),m=y(()=>d.value.map(({timestamp:B,proportion:A})=>({timestamp:B,proportion:A*100}))),{isFetching:f,data:p}=pe(V("lending"),$(()=>o.chain),u),{isFetching:b,data:k}=he(V("lending"),$(()=>o.chain),u),{isFetching:C,data:T}=ve(V("lending"),$(()=>o.chain),u);return(B,A)=>(w(),W("div",ze,[t(e(_e),{overview:e(p),loading:e(f)},null,8,["overview","loading"]),t(e(ge),{ratios:e(m),"prices-oracle":e(i),loading:e(c)||e(g)},null,8,["ratios","prices-oracle","loading"]),t(e(fe),{losses:e(k),loading:e(b)},null,8,["losses","loading"]),t(e(ye),{losses:e(k),loading:e(b)},null,8,["losses","loading"]),t(e(ke),{deciles:e(T),loading:e(C)},null,8,["deciles","loading"]),t(e(be),{liqs:e(l),loading:e(s)},null,8,["liqs","loading"]),t(e(we),{liqs:e(n),loading:e(r)},null,8,["liqs","loading"]),t(e($e),{discounts:e(a),liqs:e(n),loading:e(g)||e(r)},null,8,["discounts","liqs","loading"])]))}}),Ne=D(Qe,[["__scopeId","data-v-d3d09c2f"]]),Ke={style:{display:"flex"}},He={ref:"chartRef",class:"chart"},Ye=q({__name:"ChartMarketSupply",props:{market:{},chain:{}},setup(o){const u=I(),{items:g,toggles:v,disabled:i}=X(()=>{const{blue:d,yellow:m,purple:f}=u.value.colors;return[{id:"supply",label:"Supply",color:d},{id:"debt",label:"Debt",color:m},{id:"util",label:"Util %",color:f,togglable:!0}]}),{isFetching:a,data:s}=P($(()=>o.market),$(()=>o.chain)),l=E("card"),{chart:r,series:n}=Q({createChartOptions:N(y(()=>({leftPriceScale:{visible:v.util.value}}))),series:[{type:F,name:"supply",options:y(()=>({priceFormat:{type:"custom",formatter:d=>`$${M(d,0,"dollar")}${Y(d)}`,minMove:.01},lineWidth:2,color:u.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:F,name:"debt",options:y(()=>({priceFormat:{type:"custom",formatter:d=>`$${M(d,0,"dollar")}${Y(d)}`,minMove:.01},lineWidth:2,color:u.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))},{type:F,name:"util",options:y(()=>({priceFormat:{type:"custom",formatter:d=>`${Math.round(d*100)}%`,minMove:.01},priceScaleId:"left",lineWidth:2,color:u.value.colors.purple,lastValueVisible:!1,priceLineVisible:!1}))}]});z(c);function c(){if(!r.value||!n.supply||!n.debt||!n.util)return;const d=s.value.map(p=>({time:p.timestamp.getUTCTimestamp(),value:p.totalAssetsUsd})).uniqWith((p,b)=>p.time===b.time).orderBy(p=>p.time,"asc"),m=s.value.map(p=>({time:p.timestamp.getUTCTimestamp(),value:p.totalDebtUsd})).uniqWith((p,b)=>p.time===b.time).orderBy(p=>p.time,"asc"),f=d.zip(m).map(([p,b])=>({time:b.time,value:p.value>0?b.value/p.value:0})).uniqWith((p,b)=>p.time===b.time).orderBy(p=>p.time,"asc");n.supply.setData(d),n.debt.setData(m),n.util.setData(f),n.util.applyOptions({visible:v.util.value}),r.value.timeScale().fitContent()}return(d,m)=>{const f=K,p=H,b=Z,k=U;return w(),L(k,{ref_key:"card",ref:l,title:"Supply & Debt",loading:e(a)},{actions:h(()=>[_("div",Ke,[t(f,{filename:"supply_debt_util",series:e(n)},null,8,["series"]),t(p,{chart:e(r),target:e(l)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(b,{items:e(g),disabled:e(i),onToggle:m[0]||(m[0]=C=>e(v)[C].value=!e(v)[C].value)},null,8,["items","disabled"])]),default:h(()=>[_("div",He,null,512)]),_:1},8,["loading"])}}}),je={style:{display:"flex"}},Ge={ref:"chartRef",class:"chart"},Je=q({__name:"ChartMarketCollateral",props:{market:{},chain:{}},setup(o){const{isFetching:u,data:g}=P($(()=>o.market),$(()=>o.chain)),v=I(),i=y(()=>o.market?o.market.collateralToken.symbol:"?"),a=y(()=>o.market?o.market.borrowedToken.symbol:"?"),{items:s}=X(()=>[{id:i.value,label:i.value,color:v.value.colors.blue},{id:a.value,label:a.value,color:v.value.colors.yellow}]),l=V(!0),r=E("card"),{chart:n,series:c}=Q({createChartOptions:N(),series:[{type:F,name:"collateral",options:y(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:v.value.colors.blue,lastValueVisible:!1,priceLineVisible:!1}))},{type:F,name:"borrowed",options:y(()=>({priceFormat:{type:"custom",formatter:m},lineWidth:2,color:v.value.colors.yellow,lastValueVisible:!1,priceLineVisible:!1}))}]});z(d);function d(){if(!n.value||!c.collateral||!c.borrowed)return;const f=l.value,p=g.value.map(k=>({time:k.timestamp.getUTCTimestamp(),value:f?k.collateralBalanceUsd:k.collateralBalance})).uniqWith((k,C)=>k.time===C.time).orderBy(k=>k.time,"asc"),b=g.value.map(k=>({time:k.timestamp.getUTCTimestamp(),value:f?k.borrowedBalanceUsd:k.borrowedBalance})).uniqWith((k,C)=>k.time===C.time).orderBy(k=>k.time,"asc");p.length>0&&c.collateral.setData(p),b.length>0&&c.borrowed.setData(b),(p.length>0||b.length>0)&&n.value.timeScale().fitContent()}function m(f){return`${l.value?"$":""}${M(f,0,"dollar")}${Y(f)}`}return(f,p)=>{const b=De,k=K,C=H,T=Z,B=U;return w(),L(B,{ref_key:"card",ref:r,title:"Collateral",loading:e(u)},{actions:h(()=>[_("div",je,[t(b,{style:{"margin-right":"1rem"},"model-value":e(l),onClick:p[0]||(p[0]=A=>l.value=!e(l))},{default:h(()=>p[1]||(p[1]=[R(" Dollars ")])),_:1},8,["model-value"]),t(k,{filename:"collateral",series:e(c)},null,8,["series"]),t(C,{chart:e(n),target:e(r)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(T,{items:e(s)},null,8,["items"])]),default:h(()=>[_("div",Ge,null,512)]),_:1},8,["loading"])}}}),Xe={style:{display:"flex"}},Ze={ref:"chartRef",class:"chart"},xe=q({__name:"ChartMarketLoans",props:{market:{},chain:{}},setup(o){const{isFetching:u,data:g}=P($(()=>o.market),$(()=>o.chain)),v=I(),i=E("card"),{chart:a,series:s}=Q({createChartOptions:N(),series:{type:We,name:"loans",options:y(()=>({color:v.value.colors.yellow,lastValueVisible:!1,priceFormat:{type:"volume"},priceLineVisible:!1}))}});z(l);function l(){if(!a.value||!s.loans)return;const r=g.value.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.numLoans})).uniqWith((n,c)=>n.time===c.time).orderBy(n=>n.time,"asc");r.length>0&&(s.loans.setData(r),a.value.timeScale().fitContent())}return(r,n)=>{const c=K,d=H,m=U;return w(),L(m,{ref_key:"card",ref:i,title:"Loans",loading:e(u)},{actions:h(()=>[_("div",Xe,[t(c,{filename:"loans",series:e(s)},null,8,["series"]),t(d,{chart:e(a),target:e(i)},null,8,["chart","target"])])]),default:h(()=>[_("div",Ze,null,512)]),_:1},8,["loading"])}}}),ea={style:{display:"flex"}},aa={ref:"chartRef",class:"chart"},ta=q({__name:"ChartMarketRates",props:{market:{},chain:{}},setup(o){const u=I(),{items:g}=X(()=>[{id:"borrow",label:"Borrow APY",color:u.value.colors.red},{id:"lend",label:"Lend APY",color:u.value.colors.green}]),{isFetching:v,data:i}=P($(()=>o.market),$(()=>o.chain)),a=E("card"),{chart:s,series:l}=Q({createChartOptions:N({localization:{priceFormatter:c=>n(c)}}),series:[{type:F,name:"borrowApy",options:y(()=>({priceFormat:{type:"custom",formatter:n},lineWidth:2,color:u.value.colors.red,lastValueVisible:!1,priceLineVisible:!1}))},{type:F,name:"lendApy",options:y(()=>({priceFormat:{type:"custom",formatter:n},lineWidth:2,color:u.value.colors.green,lastValueVisible:!1,priceLineVisible:!1}))}]});z(r);function r(){if(!s.value||!l.borrowApy||!l.lendApy)return;const c=i.value.map(m=>({time:m.timestamp.getUTCTimestamp(),value:m.borrowApy})).uniqWith((m,f)=>m.time===f.time).orderBy(m=>m.time,"asc"),d=i.value.map(m=>({time:m.timestamp.getUTCTimestamp(),value:m.lendApy})).uniqWith((m,f)=>m.time===f.time).orderBy(m=>m.time,"asc");c.length>0&&l.borrowApy.setData(c),d.length>0&&l.lendApy.setData(d),(c.length>0||d.length>0)&&s.value.timeScale().fitContent()}function n(c){return`${M(c*100,0,"percentage")}%`}return(c,d)=>{const m=K,f=H,p=Z,b=U;return w(),L(b,{ref_key:"card",ref:a,title:"Rates",loading:e(v)},{actions:h(()=>[_("div",ea,[t(m,{filename:"rates",series:e(l)},null,8,["series"]),t(f,{chart:e(s),target:e(a)},null,8,["chart","target"])])]),"actions-secondary":h(()=>[t(p,{items:e(g)},null,8,["items"])]),default:h(()=>[_("div",aa,null,512)]),_:1},8,["loading"])}}}),la=["href"],sa={key:1},na=q({__name:"Addresses",props:{market:{}},setup(o){const u=y(()=>{var i,a,s,l,r;return[{description:"Controller",address:(i=o.market)==null?void 0:i.controller},{description:"Vault",address:(a=o.market)==null?void 0:a.vault},{description:"Llamma",address:(s=o.market)==null?void 0:s.llamma},{description:"Policy",address:(l=o.market)==null?void 0:l.policy},{description:"Oracle",address:(r=o.market)==null?void 0:r.oracle}]}),g=i=>`https://etherscan.io/address/${i}`,v=async i=>{await navigator.clipboard.writeText(i)};return(i,a)=>{const s=te,l=ee,r=ae,n=U;return w(),L(n,{title:"Addresses",class:"addresses"},{default:h(()=>[t(r,{class:"addresses-table",rows:e(u)},{row:h(({item:{description:c,address:d}})=>[_("div",null,S(c),1),_("div",null,[d?(w(),W("a",{key:0,class:"font-mono",target:"_blank",href:g(d)},S(d),9,la)):(w(),W("span",sa,"?"))]),_("div",null,[d?(w(),L(l,{key:0,onClick:m=>v(d)},{default:h(()=>[t(s)]),_:2},1032,["onClick"])):O("",!0)])]),_:1},8,["rows"])]),_:1})}}}),oa=D(na,[["__scopeId","data-v-f805545c"]]),ra={class:"usage"},ia={class:"two-sides"},ca={class:"collateral"},da={class:"two-sides"},ua={class:"two-sides"},ma=q({__name:"KPIUsage",props:{market:{}},setup(o){const u=y(()=>{var i,a;return(((i=o.market)==null?void 0:i.collateralBalanceUsd)??0)+(((a=o.market)==null?void 0:a.borrowedBalanceUsd)??0)}),g=y(()=>{var l,r;const i="Collateral",a=((l=o.market)==null?void 0:l.collateralToken.symbol)??"?",s=((r=o.market)==null?void 0:r.borrowedToken.symbol)??"?";return`${i} (${a} / ${s})`}),v=y(()=>o.market?o.market.totalAssetsUsd===0?0:o.market.totalDebtUsd/o.market.totalAssetsUsd:0);return(i,a)=>{var r,n;const s=J,l=G;return w(),W("div",ra,[t(l,{style:{"grid-area":"kpi1"},label:e(g),"has-value":!!i.market},{default:h(()=>{var c,d;return[_("div",ia,[_("div",ca,[t(s,{"show-zero":"",type:"dollar",value:(c=i.market)==null?void 0:c.collateralBalance,"show-symbol":!1},null,8,["value"]),a[0]||(a[0]=_("span",{style:{color:"var(--c-lvl5)"}},"/",-1)),t(s,{"show-zero":"",type:"dollar",value:(d=i.market)==null?void 0:d.borrowedBalance,"show-symbol":!1},null,8,["value"])]),t(s,{"show-zero":"",type:"dollar",value:e(u)},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi2"},label:`Borrowed (${((r=i.market)==null?void 0:r.borrowedToken.symbol)??"?"})`,"has-value":!!i.market},{default:h(()=>{var c,d;return[_("div",da,[t(s,{"show-zero":"",type:"dollar",value:(c=i.market)==null?void 0:c.totalDebt,"show-symbol":!1},null,8,["value"]),t(s,{"show-zero":"",type:"dollar",value:(d=i.market)==null?void 0:d.totalDebtUsd},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi3"},label:`Supplied (${((n=i.market)==null?void 0:n.collateralToken.symbol)??"?"})`,"has-value":!!i.market},{default:h(()=>{var c,d;return[_("div",ua,[t(s,{"show-zero":"",type:"dollar",value:(c=i.market)==null?void 0:c.totalAssets,"show-symbol":!1},null,8,["value"]),t(s,{"show-zero":"",type:"dollar",value:(d=i.market)==null?void 0:d.totalAssetsUsd},null,8,["value"])])]}),_:1},8,["label","has-value"]),t(l,{style:{"grid-area":"kpi4"},"tooltip-type":"icon",label:"Utilization Rate",tooltip:"Utilization rate is total supplied divided by total borrowed","has-value":!!i.market},{default:h(()=>[t(s,{"show-zero":"",type:"percentage",value:e(v)*100},null,8,["value"])]),_:1},8,["has-value"])])}}}),pa=D(ma,[["__scopeId","data-v-09943df6"]]),ha={class:"token-info"},va=["href"],_a={class:"token-info"},ga=["href"],fa=q({__name:"Properties",props:{market:{},chain:{}},setup(o){const u=y(()=>{var a,s,l,r;return{type:"token",symbol:((s=(a=o.market)==null?void 0:a.collateralToken)==null?void 0:s.symbol)??"?",address:((r=(l=o.market)==null?void 0:l.collateralToken)==null?void 0:r.address)??"?"}}),g=y(()=>{var a,s,l,r;return{type:"token",symbol:((s=(a=o.market)==null?void 0:a.borrowedToken)==null?void 0:s.symbol)??"?",address:((r=(l=o.market)==null?void 0:l.borrowedToken)==null?void 0:r.address)??"?"}}),v=a=>`https://etherscan.io/address/${a}`,i=async a=>{await navigator.clipboard.writeText(a)};return(a,s)=>{const l=Oe,r=te,n=ee,c=Pe,d=ae,m=U;return w(),L(m,{class:"properties",title:"Properties"},{default:h(()=>[t(d,{class:"properties-table"},{default:h(()=>[t(c,null,{default:h(()=>[s[2]||(s[2]=_("div",null,"Collateral",-1)),_("div",ha,[t(l,{chain:a.chain,address:e(u).address},null,8,["chain","address"]),_("div",null,S(e(u).symbol),1),_("div",null,[_("a",{class:"font-mono",target:"_blank",href:v(e(u).address)},S(e(u).address),9,va)]),_("div",null,[t(n,{onClick:s[0]||(s[0]=f=>i(e(u).address))},{default:h(()=>[t(r)]),_:1})])])]),_:1}),t(c,null,{default:h(()=>[s[3]||(s[3]=_("div",null,"Borrowed",-1)),_("div",_a,[t(l,{chain:a.chain,address:e(g).address},null,8,["chain","address"]),_("div",null,S(e(g).symbol),1),_("div",null,[_("a",{class:"font-mono",target:"_blank",href:v(e(g).address)},S(e(g).address),9,ga)]),_("div",null,[t(n,{onClick:s[1]||(s[1]=f=>i(e(g).address))},{default:h(()=>[t(r)]),_:1})])])]),_:1})]),_:1})]),_:1})}}}),ya=D(fa,[["__scopeId","data-v-fc596782"]]),ka={class:"dashboard-grid"},ba=q({__name:"MarketOverview",props:{market:{},chain:{}},setup(o){const{isFetching:u,data:g}=P($(()=>o.market),$(()=>o.chain)),v=y(()=>g.value.map(({timestamp:a,collateralBalanceUsd:s,borrowedBalanceUsd:l,totalDebtUsd:r})=>({timestamp:a,ratio:r>0?(s+l)/r:0}))),i=y(()=>g.value.map(({timestamp:a,collateralBalanceUsd:s,borrowedBalanceUsd:l,totalDebtUsd:r})=>({timestamp:a,equity:s+l-r})));return(a,s)=>{const l=J,r=G;return w(),W("div",ka,[t(r,{style:{"grid-area":"kpi1"},label:"Borrow APY","has-value":!!a.market},{default:h(()=>{var n;return[t(l,{type:"percentage",value:(n=a.market)==null?void 0:n.apyBorrow},null,8,["value"])]}),_:1},8,["has-value"]),t(r,{style:{"grid-area":"kpi2"},label:"Lend APY","has-value":!!a.market},{default:h(()=>{var n;return[t(l,{type:"percentage",value:(n=a.market)==null?void 0:n.apyLend},null,8,["value"])]}),_:1},8,["has-value"]),t(r,{style:{"grid-area":"kpi3"},label:"Loans","has-value":!!a.market},{default:h(()=>{var n;return[R(S(((n=a.market)==null?void 0:n.nLoans)??0),1)]}),_:1},8,["has-value"]),t(r,{style:{"grid-area":"kpi4"},label:"TVL","has-value":!!a.market},{default:h(()=>[t(l,{type:"dollar",value:e(Ue)(a.market)},null,8,["value"])]),_:1},8,["has-value"]),t(e(Ye),{style:{"grid-area":"supply"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(Je),{style:{"grid-area":"collateral"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(Le),{style:{"grid-area":"colratio"},ratios:e(v),loading:e(u)},null,8,["ratios","loading"]),t(e(Ee),{style:{"grid-area":"equity"},equity:e(i),loading:e(u)},null,8,["equity","loading"]),t(e(ta),{style:{"grid-area":"rates"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(xe),{style:{"grid-area":"loans"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(oa),{style:{"grid-area":"addresses"},market:a.market},null,8,["market"]),t(e(ya),{style:{"grid-area":"properties"},market:a.market,chain:a.chain},null,8,["market","chain"]),t(e(pa),{style:{"grid-area":"usage"},market:a.market},null,8,["market"])])}}}),wa=D(ba,[["__scopeId","data-v-c4af7549"]]),$a={class:"dashboard-grid"},La=q({__name:"Trading",props:{market:{},chain:{}},setup(o){const u=y(()=>{var c;return(c=o.market)==null?void 0:c.llamma}),{isFetching:g,data:v}=Ce("lending",u,$(()=>o.chain)),i=V(1),{isFetching:a,data:s}=Te("lending",u,$(()=>o.chain),i),l=V(1),{isFetching:r,data:n}=qe("lending",u,$(()=>o.chain),l);return(c,d)=>{var p,b,k,C;const m=J,f=G;return w(),W("div",$a,[t(f,{style:{"grid-area":"oracle"},label:"Oracle Price","has-value":!!c.market},{default:h(()=>{var T;return[t(m,{type:"dollar",value:(T=c.market)==null?void 0:T.priceOracle},null,8,["value"])]}),_:1},8,["has-value"]),t(f,{style:{"grid-area":"amm"},label:"AMM Price","has-value":!!c.market},{default:h(()=>{var T;return[t(m,{type:"dollar",value:(T=c.market)==null?void 0:T.ammPrice},null,8,["value"])]}),_:1},8,["has-value"]),t(e(Be),{style:{"grid-area":"ohlc"},ohlc:e(v)??[],loading:e(g)},null,8,["ohlc","loading"]),t(e(Ve),{style:{"grid-area":"trades"},trades:((p=e(s))==null?void 0:p.trades)??[],count:((b=e(s))==null?void 0:b.count)??0,chain:c.chain,loading:e(a),onPage:d[0]||(d[0]=T=>i.value=T)},null,8,["trades","count","chain","loading"]),t(e(Ae),{style:{"grid-area":"events"},events:((k=e(n))==null?void 0:k.events)??[],count:((C=e(n))==null?void 0:C.count)??0,loading:e(r),onPage:d[1]||(d[1]=T=>l.value=T)},null,8,["events","count","loading"])])}}}),Ca=D(La,[["__scopeId","data-v-ae2f31ac"]]),Ta={class:"dashboard"},qa=q({__name:"Market.page",setup(o){const u=x("chain"),g=x("marketAddr"),{isFetching:v,data:i}=ce(u),a=y(()=>{var n;return(n=i.value)==null?void 0:n.find(c=>c.controller===g.value)}),{crumbs:s}=ne(oe());re(a,n=>{s.value=[{id:"llamalend",label:"Llama Lend",pathName:"llamalend",params:()=>({chain:u.value})},{id:"market",label:`Market: ${(n==null?void 0:n.name)??"?"}`}]},{immediate:!0});const{tabActive:l,tabActiveIndex:r}=Re(["overview","trading","liquidations"],"llamalendmarket",()=>({chain:u.value,marketAddr:g.value}));return(n,c)=>{const d=ie,m=le,f=se;return w(),W("div",Ta,[t(d,{loading:e(v)},null,8,["loading"]),!e(v)&&e(a)?(w(),L(f,{key:0,active:e(r),onTab:c[0]||(c[0]=p=>r.value=p.index)},{default:h(()=>[t(m,{header:"Overview"},{default:h(()=>[(w(),L(j,null,[e(l)==="overview"?(w(),L(wa,{key:0,market:e(a),chain:e(u)},null,8,["market","chain"])):O("",!0)],1024))]),_:1}),t(m,{header:"Trading"},{default:h(()=>[(w(),L(j,null,[e(l)==="trading"?(w(),L(Ca,{key:0,market:e(a),chain:e(u)},null,8,["market","chain"])):O("",!0)],1024))]),_:1}),t(m,{header:"Liquidations"},{default:h(()=>[(w(),L(j,null,[e(l)==="liquidations"?(w(),L(Ne,{key:0,market:e(a),chain:e(u)},null,8,["market","chain"])):O("",!0)],1024))]),_:1})]),_:1},8,["active"])):O("",!0)])}}}),Ja=D(qa,[["__scopeId","data-v-319230a0"]]);export{Ja as default};
