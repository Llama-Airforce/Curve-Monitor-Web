import{bT as St,bW as ii,bX as Ht,bV as Tt,cD as Bn,bS as bh,cE as mh,bU as X_,cA as Ys,bZ as Q_,cF as ad,cG as ew}from"./vendor-3cb367a8.js";import{e as ni,T as yh}from"./events-97c1e222.js";import{a as Bt,r as Rv,b as tw,c as rw,d as iw,_ as nw,e as sw,f as aw,p as ow,g as fw,s as _h}from"./index-f3a176f0.js";import{b as Yi,s as wh,a as Eh,d as Mh,f as No,g as cw,c as uw,e as Bo,h as Tv,i as Sh}from"./index-f4dfa924.js";let hw=class{};class lw extends hw{constructor(){super()}}class dw extends lw{constructor(e){super()}}const pw="^https?:",vw="^wss?:";function gw(a){const e=a.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Nv(a,e){const t=gw(a);return typeof t>"u"?!1:new RegExp(e).test(t)}function od(a){return Nv(a,pw)}function fd(a){return Nv(a,vw)}function bw(a){return new RegExp("wss?://localhost(:d{2,5})?").test(a)}function Bv(a){return typeof a=="object"&&"id"in a&&"jsonrpc"in a&&a.jsonrpc==="2.0"}function xh(a){return Bv(a)&&"method"in a}function Dh(a){return Bv(a)&&(Wi(a)||Ii(a))}function Wi(a){return"result"in a}function Ii(a){return"error"in a}var Ah={},Uo={},_t={},Uv={};(function(a){Object.defineProperty(a,"__esModule",{value:!0});function e(v,d){var p=v>>>16&65535,u=v&65535,_=d>>>16&65535,w=d&65535;return u*w+(p*w+u*_<<16>>>0)|0}a.mul=Math.imul||e;function t(v,d){return v+d|0}a.add=t;function n(v,d){return v-d|0}a.sub=n;function c(v,d){return v<<d|v>>>32-d}a.rotl=c;function s(v,d){return v<<32-d|v>>>d}a.rotr=s;function m(v){return typeof v=="number"&&isFinite(v)&&Math.floor(v)===v}a.isInteger=Number.isInteger||m,a.MAX_SAFE_INTEGER=9007199254740991,a.isSafeInteger=function(v){return a.isInteger(v)&&v>=-a.MAX_SAFE_INTEGER&&v<=a.MAX_SAFE_INTEGER}})(Uv);Object.defineProperty(_t,"__esModule",{value:!0});var qv=Uv;function mw(a,e){return e===void 0&&(e=0),(a[e+0]<<8|a[e+1])<<16>>16}_t.readInt16BE=mw;function yw(a,e){return e===void 0&&(e=0),(a[e+0]<<8|a[e+1])>>>0}_t.readUint16BE=yw;function _w(a,e){return e===void 0&&(e=0),(a[e+1]<<8|a[e])<<16>>16}_t.readInt16LE=_w;function ww(a,e){return e===void 0&&(e=0),(a[e+1]<<8|a[e])>>>0}_t.readUint16LE=ww;function Lv(a,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=a>>>8,e[t+1]=a>>>0,e}_t.writeUint16BE=Lv;_t.writeInt16BE=Lv;function Fv(a,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=a>>>0,e[t+1]=a>>>8,e}_t.writeUint16LE=Fv;_t.writeInt16LE=Fv;function Qu(a,e){return e===void 0&&(e=0),a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3]}_t.readInt32BE=Qu;function eh(a,e){return e===void 0&&(e=0),(a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3])>>>0}_t.readUint32BE=eh;function th(a,e){return e===void 0&&(e=0),a[e+3]<<24|a[e+2]<<16|a[e+1]<<8|a[e]}_t.readInt32LE=th;function rh(a,e){return e===void 0&&(e=0),(a[e+3]<<24|a[e+2]<<16|a[e+1]<<8|a[e])>>>0}_t.readUint32LE=rh;function Io(a,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=a>>>24,e[t+1]=a>>>16,e[t+2]=a>>>8,e[t+3]=a>>>0,e}_t.writeUint32BE=Io;_t.writeInt32BE=Io;function Oo(a,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=a>>>0,e[t+1]=a>>>8,e[t+2]=a>>>16,e[t+3]=a>>>24,e}_t.writeUint32LE=Oo;_t.writeInt32LE=Oo;function Ew(a,e){e===void 0&&(e=0);var t=Qu(a,e),n=Qu(a,e+4);return t*4294967296+n-(n>>31)*4294967296}_t.readInt64BE=Ew;function Mw(a,e){e===void 0&&(e=0);var t=eh(a,e),n=eh(a,e+4);return t*4294967296+n}_t.readUint64BE=Mw;function Sw(a,e){e===void 0&&(e=0);var t=th(a,e),n=th(a,e+4);return n*4294967296+t-(t>>31)*4294967296}_t.readInt64LE=Sw;function xw(a,e){e===void 0&&(e=0);var t=rh(a,e),n=rh(a,e+4);return n*4294967296+t}_t.readUint64LE=xw;function jv(a,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Io(a/4294967296>>>0,e,t),Io(a>>>0,e,t+4),e}_t.writeUint64BE=jv;_t.writeInt64BE=jv;function $v(a,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Oo(a>>>0,e,t),Oo(a/4294967296>>>0,e,t+4),e}_t.writeUint64LE=$v;_t.writeInt64LE=$v;function Dw(a,e,t){if(t===void 0&&(t=0),a%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(a/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,c=1,s=a/8+t-1;s>=t;s--)n+=e[s]*c,c*=256;return n}_t.readUintBE=Dw;function Aw(a,e,t){if(t===void 0&&(t=0),a%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(a/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,c=1,s=t;s<t+a/8;s++)n+=e[s]*c,c*=256;return n}_t.readUintLE=Aw;function Iw(a,e,t,n){if(t===void 0&&(t=new Uint8Array(a/8)),n===void 0&&(n=0),a%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!qv.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var c=1,s=a/8+n-1;s>=n;s--)t[s]=e/c&255,c*=256;return t}_t.writeUintBE=Iw;function Ow(a,e,t,n){if(t===void 0&&(t=new Uint8Array(a/8)),n===void 0&&(n=0),a%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!qv.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var c=1,s=n;s<n+a/8;s++)t[s]=e/c&255,c*=256;return t}_t.writeUintLE=Ow;function Pw(a,e){e===void 0&&(e=0);var t=new DataView(a.buffer,a.byteOffset,a.byteLength);return t.getFloat32(e)}_t.readFloat32BE=Pw;function Cw(a,e){e===void 0&&(e=0);var t=new DataView(a.buffer,a.byteOffset,a.byteLength);return t.getFloat32(e,!0)}_t.readFloat32LE=Cw;function Rw(a,e){e===void 0&&(e=0);var t=new DataView(a.buffer,a.byteOffset,a.byteLength);return t.getFloat64(e)}_t.readFloat64BE=Rw;function Tw(a,e){e===void 0&&(e=0);var t=new DataView(a.buffer,a.byteOffset,a.byteLength);return t.getFloat64(e,!0)}_t.readFloat64LE=Tw;function Nw(a,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,a),e}_t.writeFloat32BE=Nw;function Bw(a,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,a,!0),e}_t.writeFloat32LE=Bw;function Uw(a,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,a),e}_t.writeFloat64BE=Uw;function qw(a,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,a,!0),e}_t.writeFloat64LE=qw;var si={};Object.defineProperty(si,"__esModule",{value:!0});function Lw(a){for(var e=0;e<a.length;e++)a[e]=0;return a}si.wipe=Lw;Object.defineProperty(Uo,"__esModule",{value:!0});var Sr=_t,ih=si,Fw=20;function jw(a,e,t){for(var n=1634760805,c=857760878,s=2036477234,m=1797285236,v=t[3]<<24|t[2]<<16|t[1]<<8|t[0],d=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],u=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],w=t[23]<<24|t[22]<<16|t[21]<<8|t[20],M=t[27]<<24|t[26]<<16|t[25]<<8|t[24],A=t[31]<<24|t[30]<<16|t[29]<<8|t[28],R=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],z=e[11]<<24|e[10]<<16|e[9]<<8|e[8],P=e[15]<<24|e[14]<<16|e[13]<<8|e[12],N=n,q=c,k=s,F=m,O=v,j=d,J=p,L=u,C=_,g=w,h=M,r=A,o=R,b=B,D=z,I=P,x=0;x<Fw;x+=2)N=N+O|0,o^=N,o=o>>>32-16|o<<16,C=C+o|0,O^=C,O=O>>>32-12|O<<12,q=q+j|0,b^=q,b=b>>>32-16|b<<16,g=g+b|0,j^=g,j=j>>>32-12|j<<12,k=k+J|0,D^=k,D=D>>>32-16|D<<16,h=h+D|0,J^=h,J=J>>>32-12|J<<12,F=F+L|0,I^=F,I=I>>>32-16|I<<16,r=r+I|0,L^=r,L=L>>>32-12|L<<12,k=k+J|0,D^=k,D=D>>>32-8|D<<8,h=h+D|0,J^=h,J=J>>>32-7|J<<7,F=F+L|0,I^=F,I=I>>>32-8|I<<8,r=r+I|0,L^=r,L=L>>>32-7|L<<7,q=q+j|0,b^=q,b=b>>>32-8|b<<8,g=g+b|0,j^=g,j=j>>>32-7|j<<7,N=N+O|0,o^=N,o=o>>>32-8|o<<8,C=C+o|0,O^=C,O=O>>>32-7|O<<7,N=N+j|0,I^=N,I=I>>>32-16|I<<16,h=h+I|0,j^=h,j=j>>>32-12|j<<12,q=q+J|0,o^=q,o=o>>>32-16|o<<16,r=r+o|0,J^=r,J=J>>>32-12|J<<12,k=k+L|0,b^=k,b=b>>>32-16|b<<16,C=C+b|0,L^=C,L=L>>>32-12|L<<12,F=F+O|0,D^=F,D=D>>>32-16|D<<16,g=g+D|0,O^=g,O=O>>>32-12|O<<12,k=k+L|0,b^=k,b=b>>>32-8|b<<8,C=C+b|0,L^=C,L=L>>>32-7|L<<7,F=F+O|0,D^=F,D=D>>>32-8|D<<8,g=g+D|0,O^=g,O=O>>>32-7|O<<7,q=q+J|0,o^=q,o=o>>>32-8|o<<8,r=r+o|0,J^=r,J=J>>>32-7|J<<7,N=N+j|0,I^=N,I=I>>>32-8|I<<8,h=h+I|0,j^=h,j=j>>>32-7|j<<7;Sr.writeUint32LE(N+n|0,a,0),Sr.writeUint32LE(q+c|0,a,4),Sr.writeUint32LE(k+s|0,a,8),Sr.writeUint32LE(F+m|0,a,12),Sr.writeUint32LE(O+v|0,a,16),Sr.writeUint32LE(j+d|0,a,20),Sr.writeUint32LE(J+p|0,a,24),Sr.writeUint32LE(L+u|0,a,28),Sr.writeUint32LE(C+_|0,a,32),Sr.writeUint32LE(g+w|0,a,36),Sr.writeUint32LE(h+M|0,a,40),Sr.writeUint32LE(r+A|0,a,44),Sr.writeUint32LE(o+R|0,a,48),Sr.writeUint32LE(b+B|0,a,52),Sr.writeUint32LE(D+z|0,a,56),Sr.writeUint32LE(I+P|0,a,60)}function kv(a,e,t,n,c){if(c===void 0&&(c=0),a.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var s,m;if(c===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),m=s.length-e.length,s.set(e,m)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,m=c}for(var v=new Uint8Array(64),d=0;d<t.length;d+=64){jw(v,s,a);for(var p=d;p<d+64&&p<t.length;p++)n[p]=t[p]^v[p-d];kw(s,0,m)}return ih.wipe(v),c===0&&ih.wipe(s),n}Uo.streamXOR=kv;function $w(a,e,t,n){return n===void 0&&(n=0),ih.wipe(t),kv(a,e,t,t,n)}Uo.stream=$w;function kw(a,e,t){for(var n=1;t--;)n=n+(a[e]&255)|0,a[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var zv={},un={};Object.defineProperty(un,"__esModule",{value:!0});function zw(a,e,t){return~(a-1)&e|a-1&t}un.select=zw;function Hw(a,e){return(a|0)-(e|0)-1>>>31&1}un.lessOrEqual=Hw;function Hv(a,e){if(a.length!==e.length)return 0;for(var t=0,n=0;n<a.length;n++)t|=a[n]^e[n];return 1&t-1>>>8}un.compare=Hv;function Kw(a,e){return a.length===0||e.length===0?!1:Hv(a,e)!==0}un.equal=Kw;(function(a){Object.defineProperty(a,"__esModule",{value:!0});var e=un,t=si;a.DIGEST_LENGTH=16;var n=function(){function m(v){this.digestLength=a.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=v[0]|v[1]<<8;this._r[0]=d&8191;var p=v[2]|v[3]<<8;this._r[1]=(d>>>13|p<<3)&8191;var u=v[4]|v[5]<<8;this._r[2]=(p>>>10|u<<6)&7939;var _=v[6]|v[7]<<8;this._r[3]=(u>>>7|_<<9)&8191;var w=v[8]|v[9]<<8;this._r[4]=(_>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var M=v[10]|v[11]<<8;this._r[6]=(w>>>14|M<<2)&8191;var A=v[12]|v[13]<<8;this._r[7]=(M>>>11|A<<5)&8065;var R=v[14]|v[15]<<8;this._r[8]=(A>>>8|R<<8)&8191,this._r[9]=R>>>5&127,this._pad[0]=v[16]|v[17]<<8,this._pad[1]=v[18]|v[19]<<8,this._pad[2]=v[20]|v[21]<<8,this._pad[3]=v[22]|v[23]<<8,this._pad[4]=v[24]|v[25]<<8,this._pad[5]=v[26]|v[27]<<8,this._pad[6]=v[28]|v[29]<<8,this._pad[7]=v[30]|v[31]<<8}return m.prototype._blocks=function(v,d,p){for(var u=this._fin?0:2048,_=this._h[0],w=this._h[1],M=this._h[2],A=this._h[3],R=this._h[4],B=this._h[5],z=this._h[6],P=this._h[7],N=this._h[8],q=this._h[9],k=this._r[0],F=this._r[1],O=this._r[2],j=this._r[3],J=this._r[4],L=this._r[5],C=this._r[6],g=this._r[7],h=this._r[8],r=this._r[9];p>=16;){var o=v[d+0]|v[d+1]<<8;_+=o&8191;var b=v[d+2]|v[d+3]<<8;w+=(o>>>13|b<<3)&8191;var D=v[d+4]|v[d+5]<<8;M+=(b>>>10|D<<6)&8191;var I=v[d+6]|v[d+7]<<8;A+=(D>>>7|I<<9)&8191;var x=v[d+8]|v[d+9]<<8;R+=(I>>>4|x<<12)&8191,B+=x>>>1&8191;var y=v[d+10]|v[d+11]<<8;z+=(x>>>14|y<<2)&8191;var S=v[d+12]|v[d+13]<<8;P+=(y>>>11|S<<5)&8191;var l=v[d+14]|v[d+15]<<8;N+=(S>>>8|l<<8)&8191,q+=l>>>5|u;var T=0,te=T;te+=_*k,te+=w*(5*r),te+=M*(5*h),te+=A*(5*g),te+=R*(5*C),T=te>>>13,te&=8191,te+=B*(5*L),te+=z*(5*J),te+=P*(5*j),te+=N*(5*O),te+=q*(5*F),T+=te>>>13,te&=8191;var ee=T;ee+=_*F,ee+=w*k,ee+=M*(5*r),ee+=A*(5*h),ee+=R*(5*g),T=ee>>>13,ee&=8191,ee+=B*(5*C),ee+=z*(5*L),ee+=P*(5*J),ee+=N*(5*j),ee+=q*(5*O),T+=ee>>>13,ee&=8191;var ae=T;ae+=_*O,ae+=w*F,ae+=M*k,ae+=A*(5*r),ae+=R*(5*h),T=ae>>>13,ae&=8191,ae+=B*(5*g),ae+=z*(5*C),ae+=P*(5*L),ae+=N*(5*J),ae+=q*(5*j),T+=ae>>>13,ae&=8191;var Q=T;Q+=_*j,Q+=w*O,Q+=M*F,Q+=A*k,Q+=R*(5*r),T=Q>>>13,Q&=8191,Q+=B*(5*h),Q+=z*(5*g),Q+=P*(5*C),Q+=N*(5*L),Q+=q*(5*J),T+=Q>>>13,Q&=8191;var X=T;X+=_*J,X+=w*j,X+=M*O,X+=A*F,X+=R*k,T=X>>>13,X&=8191,X+=B*(5*r),X+=z*(5*h),X+=P*(5*g),X+=N*(5*C),X+=q*(5*L),T+=X>>>13,X&=8191;var Y=T;Y+=_*L,Y+=w*J,Y+=M*j,Y+=A*O,Y+=R*F,T=Y>>>13,Y&=8191,Y+=B*k,Y+=z*(5*r),Y+=P*(5*h),Y+=N*(5*g),Y+=q*(5*C),T+=Y>>>13,Y&=8191;var $=T;$+=_*C,$+=w*L,$+=M*J,$+=A*j,$+=R*O,T=$>>>13,$&=8191,$+=B*F,$+=z*k,$+=P*(5*r),$+=N*(5*h),$+=q*(5*g),T+=$>>>13,$&=8191;var W=T;W+=_*g,W+=w*C,W+=M*L,W+=A*J,W+=R*j,T=W>>>13,W&=8191,W+=B*O,W+=z*F,W+=P*k,W+=N*(5*r),W+=q*(5*h),T+=W>>>13,W&=8191;var oe=T;oe+=_*h,oe+=w*g,oe+=M*C,oe+=A*L,oe+=R*J,T=oe>>>13,oe&=8191,oe+=B*j,oe+=z*O,oe+=P*F,oe+=N*k,oe+=q*(5*r),T+=oe>>>13,oe&=8191;var ye=T;ye+=_*r,ye+=w*h,ye+=M*g,ye+=A*C,ye+=R*L,T=ye>>>13,ye&=8191,ye+=B*J,ye+=z*j,ye+=P*O,ye+=N*F,ye+=q*k,T+=ye>>>13,ye&=8191,T=(T<<2)+T|0,T=T+te|0,te=T&8191,T=T>>>13,ee+=T,_=te,w=ee,M=ae,A=Q,R=X,B=Y,z=$,P=W,N=oe,q=ye,d+=16,p-=16}this._h[0]=_,this._h[1]=w,this._h[2]=M,this._h[3]=A,this._h[4]=R,this._h[5]=B,this._h[6]=z,this._h[7]=P,this._h[8]=N,this._h[9]=q},m.prototype.finish=function(v,d){d===void 0&&(d=0);var p=new Uint16Array(10),u,_,w,M;if(this._leftover){for(M=this._leftover,this._buffer[M++]=1;M<16;M++)this._buffer[M]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(u=this._h[1]>>>13,this._h[1]&=8191,M=2;M<10;M++)this._h[M]+=u,u=this._h[M]>>>13,this._h[M]&=8191;for(this._h[0]+=u*5,u=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=u,u=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=u,p[0]=this._h[0]+5,u=p[0]>>>13,p[0]&=8191,M=1;M<10;M++)p[M]=this._h[M]+u,u=p[M]>>>13,p[M]&=8191;for(p[9]-=1<<13,_=(u^1)-1,M=0;M<10;M++)p[M]&=_;for(_=~_,M=0;M<10;M++)this._h[M]=this._h[M]&_|p[M];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,M=1;M<8;M++)w=(this._h[M]+this._pad[M]|0)+(w>>>16)|0,this._h[M]=w&65535;return v[d+0]=this._h[0]>>>0,v[d+1]=this._h[0]>>>8,v[d+2]=this._h[1]>>>0,v[d+3]=this._h[1]>>>8,v[d+4]=this._h[2]>>>0,v[d+5]=this._h[2]>>>8,v[d+6]=this._h[3]>>>0,v[d+7]=this._h[3]>>>8,v[d+8]=this._h[4]>>>0,v[d+9]=this._h[4]>>>8,v[d+10]=this._h[5]>>>0,v[d+11]=this._h[5]>>>8,v[d+12]=this._h[6]>>>0,v[d+13]=this._h[6]>>>8,v[d+14]=this._h[7]>>>0,v[d+15]=this._h[7]>>>8,this._finished=!0,this},m.prototype.update=function(v){var d=0,p=v.length,u;if(this._leftover){u=16-this._leftover,u>p&&(u=p);for(var _=0;_<u;_++)this._buffer[this._leftover+_]=v[d+_];if(p-=u,d+=u,this._leftover+=u,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(u=p-p%16,this._blocks(v,d,u),d+=u,p-=u),p){for(var _=0;_<p;_++)this._buffer[this._leftover+_]=v[d+_];this._leftover+=p}return this},m.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var v=new Uint8Array(16);return this.finish(v),v},m.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},m}();a.Poly1305=n;function c(m,v){var d=new n(m);d.update(v);var p=d.digest();return d.clean(),p}a.oneTimeAuth=c;function s(m,v){return m.length!==a.DIGEST_LENGTH||v.length!==a.DIGEST_LENGTH?!1:e.equal(m,v)}a.equal=s})(zv);(function(a){Object.defineProperty(a,"__esModule",{value:!0});var e=Uo,t=zv,n=si,c=_t,s=un;a.KEY_LENGTH=32,a.NONCE_LENGTH=12,a.TAG_LENGTH=16;var m=new Uint8Array(16),v=function(){function d(p){if(this.nonceLength=a.NONCE_LENGTH,this.tagLength=a.TAG_LENGTH,p.length!==a.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return d.prototype.seal=function(p,u,_,w){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var M=new Uint8Array(16);M.set(p,M.length-p.length);var A=new Uint8Array(32);e.stream(this._key,M,A,4);var R=u.length+this.tagLength,B;if(w){if(w.length!==R)throw new Error("ChaCha20Poly1305: incorrect destination length");B=w}else B=new Uint8Array(R);return e.streamXOR(this._key,M,u,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),A,B.subarray(0,B.length-this.tagLength),_),n.wipe(M),B},d.prototype.open=function(p,u,_,w){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(u.length<this.tagLength)return null;var M=new Uint8Array(16);M.set(p,M.length-p.length);var A=new Uint8Array(32);e.stream(this._key,M,A,4);var R=new Uint8Array(this.tagLength);if(this._authenticate(R,A,u.subarray(0,u.length-this.tagLength),_),!s.equal(R,u.subarray(u.length-this.tagLength,u.length)))return null;var B=u.length-this.tagLength,z;if(w){if(w.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");z=w}else z=new Uint8Array(B);return e.streamXOR(this._key,M,u.subarray(0,u.length-this.tagLength),z,4),n.wipe(M),z},d.prototype.clean=function(){return n.wipe(this._key),this},d.prototype._authenticate=function(p,u,_,w){var M=new t.Poly1305(u);w&&(M.update(w),w.length%16>0&&M.update(m.subarray(w.length%16))),M.update(_),_.length%16>0&&M.update(m.subarray(_.length%16));var A=new Uint8Array(8);w&&c.writeUint64LE(w.length,A),M.update(A),c.writeUint64LE(_.length,A),M.update(A);for(var R=M.digest(),B=0;B<R.length;B++)p[B]=R[B];M.clean(),n.wipe(R),n.wipe(A)},d}();a.ChaCha20Poly1305=v})(Ah);var Kv={},ea={},Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});function Vw(a){return typeof a.saveState<"u"&&typeof a.restoreState<"u"&&typeof a.cleanSavedState<"u"}Ih.isSerializableHash=Vw;Object.defineProperty(ea,"__esModule",{value:!0});var Bi=Ih,Gw=un,Ww=si,Vv=function(){function a(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var c=0;c<n.length;c++)n[c]^=54;this._inner.update(n);for(var c=0;c<n.length;c++)n[c]^=106;this._outer.update(n),Bi.isSerializableHash(this._inner)&&Bi.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ww.wipe(n)}return a.prototype.reset=function(){if(!Bi.isSerializableHash(this._inner)||!Bi.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.clean=function(){Bi.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Bi.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},a.prototype.update=function(e){return this._inner.update(e),this},a.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},a.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},a.prototype.saveState=function(){if(!Bi.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},a.prototype.restoreState=function(e){if(!Bi.isSerializableHash(this._inner)||!Bi.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.cleanSavedState=function(e){if(!Bi.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},a}();ea.HMAC=Vv;function Yw(a,e,t){var n=new Vv(a,e);n.update(t);var c=n.digest();return n.clean(),c}ea.hmac=Yw;ea.equal=Gw.equal;Object.defineProperty(Kv,"__esModule",{value:!0});var cd=ea,ud=si,Jw=function(){function a(e,t,n,c){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=c;var s=cd.hmac(this._hash,n,t);this._hmac=new cd.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return a.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},a.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},a.prototype.clean=function(){this._hmac.clean(),ud.wipe(this._buffer),ud.wipe(this._counter),this._bufpos=0},a}(),Zw=Kv.HKDF=Jw,us={},qo={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.BrowserRandomSource=void 0;const hd=65536;class Xw{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=hd)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,hd)));return t}}Lo.BrowserRandomSource=Xw;function Qw(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fo={},Mt={},uo={exports:{}},ld;function hs(){if(ld)return uo.exports;ld=1;var a=65536,e=4294967295;function t(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=Bt.Buffer,c=St.crypto||St.msCrypto;c&&c.getRandomValues?uo.exports=s:uo.exports=t;function s(m,v){if(m>e)throw new RangeError("requested too many random bytes");var d=n.allocUnsafe(m);if(m>0)if(m>a)for(var p=0;p<m;p+=a)c.getRandomValues(d.slice(p,p+a));else c.getRandomValues(d);return typeof v=="function"?ii.nextTick(function(){v(null,d)}):d}return uo.exports}var oc,dd;function Gv(){if(dd)return oc;dd=1;var a=Bt.Buffer,e=Rv.Transform,t=Ht;function n(s,m){if(!a.isBuffer(s)&&typeof s!="string")throw new TypeError(m+" must be a string or a buffer")}function c(s){e.call(this),this._block=a.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return t(c,e),c.prototype._transform=function(s,m,v){var d=null;try{this.update(s,m)}catch(p){d=p}v(d)},c.prototype._flush=function(s){var m=null;try{this.push(this.digest())}catch(v){m=v}s(m)},c.prototype.update=function(s,m){if(n(s,"Data"),this._finalized)throw new Error("Digest already called");a.isBuffer(s)||(s=a.from(s,m));for(var v=this._block,d=0;this._blockOffset+s.length-d>=this._blockSize;){for(var p=this._blockOffset;p<this._blockSize;)v[p++]=s[d++];this._update(),this._blockOffset=0}for(;d<s.length;)v[this._blockOffset++]=s[d++];for(var u=0,_=s.length*8;_>0;++u)this._length[u]+=_,_=this._length[u]/4294967296|0,_>0&&(this._length[u]-=4294967296*_);return this},c.prototype._update=function(){throw new Error("_update is not implemented")},c.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var m=this._digest();s!==void 0&&(m=m.toString(s)),this._block.fill(0),this._blockOffset=0;for(var v=0;v<4;++v)this._length[v]=0;return m},c.prototype._digest=function(){throw new Error("_digest is not implemented")},oc=c,oc}var fc,pd;function Oh(){if(pd)return fc;pd=1;var a=Ht,e=Gv(),t=Bt.Buffer,n=new Array(16);function c(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}a(c,e),c.prototype._update=function(){for(var u=n,_=0;_<16;++_)u[_]=this._block.readInt32LE(_*4);var w=this._a,M=this._b,A=this._c,R=this._d;w=m(w,M,A,R,u[0],3614090360,7),R=m(R,w,M,A,u[1],3905402710,12),A=m(A,R,w,M,u[2],606105819,17),M=m(M,A,R,w,u[3],3250441966,22),w=m(w,M,A,R,u[4],4118548399,7),R=m(R,w,M,A,u[5],1200080426,12),A=m(A,R,w,M,u[6],2821735955,17),M=m(M,A,R,w,u[7],4249261313,22),w=m(w,M,A,R,u[8],1770035416,7),R=m(R,w,M,A,u[9],2336552879,12),A=m(A,R,w,M,u[10],4294925233,17),M=m(M,A,R,w,u[11],2304563134,22),w=m(w,M,A,R,u[12],1804603682,7),R=m(R,w,M,A,u[13],4254626195,12),A=m(A,R,w,M,u[14],2792965006,17),M=m(M,A,R,w,u[15],1236535329,22),w=v(w,M,A,R,u[1],4129170786,5),R=v(R,w,M,A,u[6],3225465664,9),A=v(A,R,w,M,u[11],643717713,14),M=v(M,A,R,w,u[0],3921069994,20),w=v(w,M,A,R,u[5],3593408605,5),R=v(R,w,M,A,u[10],38016083,9),A=v(A,R,w,M,u[15],3634488961,14),M=v(M,A,R,w,u[4],3889429448,20),w=v(w,M,A,R,u[9],568446438,5),R=v(R,w,M,A,u[14],3275163606,9),A=v(A,R,w,M,u[3],4107603335,14),M=v(M,A,R,w,u[8],1163531501,20),w=v(w,M,A,R,u[13],2850285829,5),R=v(R,w,M,A,u[2],4243563512,9),A=v(A,R,w,M,u[7],1735328473,14),M=v(M,A,R,w,u[12],2368359562,20),w=d(w,M,A,R,u[5],4294588738,4),R=d(R,w,M,A,u[8],2272392833,11),A=d(A,R,w,M,u[11],1839030562,16),M=d(M,A,R,w,u[14],4259657740,23),w=d(w,M,A,R,u[1],2763975236,4),R=d(R,w,M,A,u[4],1272893353,11),A=d(A,R,w,M,u[7],4139469664,16),M=d(M,A,R,w,u[10],3200236656,23),w=d(w,M,A,R,u[13],681279174,4),R=d(R,w,M,A,u[0],3936430074,11),A=d(A,R,w,M,u[3],3572445317,16),M=d(M,A,R,w,u[6],76029189,23),w=d(w,M,A,R,u[9],3654602809,4),R=d(R,w,M,A,u[12],3873151461,11),A=d(A,R,w,M,u[15],530742520,16),M=d(M,A,R,w,u[2],3299628645,23),w=p(w,M,A,R,u[0],4096336452,6),R=p(R,w,M,A,u[7],1126891415,10),A=p(A,R,w,M,u[14],2878612391,15),M=p(M,A,R,w,u[5],4237533241,21),w=p(w,M,A,R,u[12],1700485571,6),R=p(R,w,M,A,u[3],2399980690,10),A=p(A,R,w,M,u[10],4293915773,15),M=p(M,A,R,w,u[1],2240044497,21),w=p(w,M,A,R,u[8],1873313359,6),R=p(R,w,M,A,u[15],4264355552,10),A=p(A,R,w,M,u[6],2734768916,15),M=p(M,A,R,w,u[13],1309151649,21),w=p(w,M,A,R,u[4],4149444226,6),R=p(R,w,M,A,u[11],3174756917,10),A=p(A,R,w,M,u[2],718787259,15),M=p(M,A,R,w,u[9],3951481745,21),this._a=this._a+w|0,this._b=this._b+M|0,this._c=this._c+A|0,this._d=this._d+R|0},c.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=t.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function s(u,_){return u<<_|u>>>32-_}function m(u,_,w,M,A,R,B){return s(u+(_&w|~_&M)+A+R|0,B)+_|0}function v(u,_,w,M,A,R,B){return s(u+(_&M|w&~M)+A+R|0,B)+_|0}function d(u,_,w,M,A,R,B){return s(u+(_^w^M)+A+R|0,B)+_|0}function p(u,_,w,M,A,R,B){return s(u+(w^(_|~M))+A+R|0,B)+_|0}return fc=c,fc}var cc,vd;function Ph(){if(vd)return cc;vd=1;var a=Tt.Buffer,e=Ht,t=Gv(),n=new Array(16),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function u(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(u,t),u.prototype._update=function(){for(var z=n,P=0;P<16;++P)z[P]=this._block.readInt32LE(P*4);for(var N=this._a|0,q=this._b|0,k=this._c|0,F=this._d|0,O=this._e|0,j=this._a|0,J=this._b|0,L=this._c|0,C=this._d|0,g=this._e|0,h=0;h<80;h+=1){var r,o;h<16?(r=w(N,q,k,F,O,z[c[h]],d[0],m[h]),o=B(j,J,L,C,g,z[s[h]],p[0],v[h])):h<32?(r=M(N,q,k,F,O,z[c[h]],d[1],m[h]),o=R(j,J,L,C,g,z[s[h]],p[1],v[h])):h<48?(r=A(N,q,k,F,O,z[c[h]],d[2],m[h]),o=A(j,J,L,C,g,z[s[h]],p[2],v[h])):h<64?(r=R(N,q,k,F,O,z[c[h]],d[3],m[h]),o=M(j,J,L,C,g,z[s[h]],p[3],v[h])):(r=B(N,q,k,F,O,z[c[h]],d[4],m[h]),o=w(j,J,L,C,g,z[s[h]],p[4],v[h])),N=O,O=F,F=_(k,10),k=q,q=r,j=g,g=C,C=_(L,10),L=J,J=o}var b=this._b+k+C|0;this._b=this._c+F+g|0,this._c=this._d+O+j|0,this._d=this._e+N+J|0,this._e=this._a+q+L|0,this._a=b},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var z=a.alloc?a.alloc(20):new a(20);return z.writeInt32LE(this._a,0),z.writeInt32LE(this._b,4),z.writeInt32LE(this._c,8),z.writeInt32LE(this._d,12),z.writeInt32LE(this._e,16),z};function _(z,P){return z<<P|z>>>32-P}function w(z,P,N,q,k,F,O,j){return _(z+(P^N^q)+F+O|0,j)+k|0}function M(z,P,N,q,k,F,O,j){return _(z+(P&N|~P&q)+F+O|0,j)+k|0}function A(z,P,N,q,k,F,O,j){return _(z+((P|~N)^q)+F+O|0,j)+k|0}function R(z,P,N,q,k,F,O,j){return _(z+(P&q|N&~q)+F+O|0,j)+k|0}function B(z,P,N,q,k,F,O,j){return _(z+(P^(N|~q))+F+O|0,j)+k|0}return cc=u,cc}var uc,gd;function e5(){if(gd)return uc;gd=1,uc=t;var a=ni.EventEmitter,e=Ht;e(t,a),t.Readable=tw(),t.Writable=rw(),t.Duplex=iw(),t.Transform=nw,t.PassThrough=sw,t.finished=aw,t.pipeline=ow,t.Stream=t;function t(){a.call(this)}return t.prototype.pipe=function(n,c){var s=this;function m(M){n.writable&&n.write(M)===!1&&s.pause&&s.pause()}s.on("data",m);function v(){s.readable&&s.resume&&s.resume()}n.on("drain",v),!n._isStdio&&(!c||c.end!==!1)&&(s.on("end",p),s.on("close",u));var d=!1;function p(){d||(d=!0,n.end())}function u(){d||(d=!0,typeof n.destroy=="function"&&n.destroy())}function _(M){if(w(),a.listenerCount(this,"error")===0)throw M}s.on("error",_),n.on("error",_);function w(){s.removeListener("data",m),n.removeListener("drain",v),s.removeListener("end",p),s.removeListener("close",u),s.removeListener("error",_),n.removeListener("error",_),s.removeListener("end",w),s.removeListener("close",w),n.removeListener("close",w)}return s.on("end",w),s.on("close",w),n.on("close",w),n.emit("pipe",s),n},uc}var hc,bd;function hn(){if(bd)return hc;bd=1;var a=Bt.Buffer,e=e5().Transform,t=fw().StringDecoder,n=Ht;function c(s){e.call(this),this.hashMode=typeof s=="string",this.hashMode?this[s]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return n(c,e),c.prototype.update=function(s,m,v){typeof s=="string"&&(s=a.from(s,m));var d=this._update(s);return this.hashMode?this:(v&&(d=this._toString(d,v)),d)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(s,m,v){var d;try{this.hashMode?this._update(s):this.push(this._update(s))}catch(p){d=p}finally{v(d)}},c.prototype._flush=function(s){var m;try{this.push(this.__final())}catch(v){m=v}s(m)},c.prototype._finalOrDigest=function(s){var m=this.__final()||a.alloc(0);return s&&(m=this._toString(m,s,!0)),m},c.prototype._toString=function(s,m,v){if(this._decoder||(this._decoder=new t(m),this._encoding=m),this._encoding!==m)throw new Error("can't switch encodings");var d=this._decoder.write(s);return v&&(d+=this._decoder.end()),d},hc=c,hc}var lc,md;function ta(){if(md)return lc;md=1;var a=Ht,e=Oh(),t=Ph(),n=_h,c=hn();function s(m){c.call(this,"digest"),this._hash=m}return a(s,c),s.prototype._update=function(m){this._hash.update(m)},s.prototype._final=function(){return this._hash.digest()},lc=function(v){return v=v.toLowerCase(),v==="md5"?new e:v==="rmd160"||v==="ripemd160"?new t:new s(n(v))},lc}var dc,yd;function t5(){if(yd)return dc;yd=1;var a=Ht,e=Bt.Buffer,t=hn(),n=e.alloc(128),c=64;function s(m,v){t.call(this,"digest"),typeof v=="string"&&(v=e.from(v)),this._alg=m,this._key=v,v.length>c?v=m(v):v.length<c&&(v=e.concat([v,n],c));for(var d=this._ipad=e.allocUnsafe(c),p=this._opad=e.allocUnsafe(c),u=0;u<c;u++)d[u]=v[u]^54,p[u]=v[u]^92;this._hash=[d]}return a(s,t),s.prototype._update=function(m){this._hash.push(m)},s.prototype._final=function(){var m=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,m]))},dc=s,dc}var pc,_d;function Wv(){if(_d)return pc;_d=1;var a=Oh();return pc=function(e){return new a().update(e).digest()},pc}var vc,wd;function Yv(){if(wd)return vc;wd=1;var a=Ht,e=t5(),t=hn(),n=Bt.Buffer,c=Wv(),s=Ph(),m=_h,v=n.alloc(128);function d(p,u){t.call(this,"digest"),typeof u=="string"&&(u=n.from(u));var _=p==="sha512"||p==="sha384"?128:64;if(this._alg=p,this._key=u,u.length>_){var w=p==="rmd160"?new s:m(p);u=w.update(u).digest()}else u.length<_&&(u=n.concat([u,v],_));for(var M=this._ipad=n.allocUnsafe(_),A=this._opad=n.allocUnsafe(_),R=0;R<_;R++)M[R]=u[R]^54,A[R]=u[R]^92;this._hash=p==="rmd160"?new s:m(p),this._hash.update(M)}return a(d,t),d.prototype._update=function(p){this._hash.update(p)},d.prototype._final=function(){var p=this._hash.digest(),u=this._alg==="rmd160"?new s:m(this._alg);return u.update(this._opad).update(p).digest()},vc=function(u,_){return u=u.toLowerCase(),u==="rmd160"||u==="ripemd160"?new d("rmd160",_):u==="md5"?new e(c,_):new d(u,_)},vc}const r5={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},i5={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},n5={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},s5={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},a5={sign:"ecdsa",hash:"sha256",id:""},o5={sign:"ecdsa",hash:"sha224",id:""},f5={sign:"ecdsa",hash:"sha384",id:""},c5={sign:"ecdsa",hash:"sha512",id:""},u5={sign:"dsa",hash:"sha1",id:""},h5={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},l5={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},Jv={sha224WithRSAEncryption:r5,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:i5,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:n5,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:s5,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:a5,sha224:o5,sha384:f5,sha512:c5,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:u5,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:h5,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:l5,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var gc,Ed;function d5(){return Ed||(Ed=1,gc=Jv),gc}var ho={},bc,Md;function Zv(){if(Md)return bc;Md=1;var a=Math.pow(2,30)-1;return bc=function(e,t){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof t!="number")throw new TypeError("Key length not a number");if(t<0||t>a||t!==t)throw new TypeError("Bad key length")},bc}var mc,Sd;function Xv(){if(Sd)return mc;Sd=1;var a;if(St.process&&St.process.browser)a="utf-8";else if(St.process&&St.process.version){var e=parseInt(ii.version.split(".")[0].slice(1),10);a=e>=6?"utf-8":"binary"}else a="utf-8";return mc=a,mc}var yc,xd;function Qv(){if(xd)return yc;xd=1;var a=Bt.Buffer;return yc=function(e,t,n){if(a.isBuffer(e))return e;if(typeof e=="string")return a.from(e,t);if(ArrayBuffer.isView(e))return a.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},yc}var _c,Dd;function eg(){if(Dd)return _c;Dd=1;var a=Wv(),e=Ph(),t=_h,n=Bt.Buffer,c=Zv(),s=Xv(),m=Qv(),v=n.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(w,M,A){var R=u(w),B=w==="sha512"||w==="sha384"?128:64;M.length>B?M=R(M):M.length<B&&(M=n.concat([M,v],B));for(var z=n.allocUnsafe(B+d[w]),P=n.allocUnsafe(B+d[w]),N=0;N<B;N++)z[N]=M[N]^54,P[N]=M[N]^92;var q=n.allocUnsafe(B+A+4);z.copy(q,0,0,B),this.ipad1=q,this.ipad2=z,this.opad=P,this.alg=w,this.blocksize=B,this.hash=R,this.size=d[w]}p.prototype.run=function(w,M){w.copy(M,this.blocksize);var A=this.hash(M);return A.copy(this.opad,this.blocksize),this.hash(this.opad)};function u(w){function M(R){return t(w).update(R).digest()}function A(R){return new e().update(R).digest()}return w==="rmd160"||w==="ripemd160"?A:w==="md5"?a:M}function _(w,M,A,R,B){c(A,R),w=m(w,s,"Password"),M=m(M,s,"Salt"),B=B||"sha1";var z=new p(B,w,M.length),P=n.allocUnsafe(R),N=n.allocUnsafe(M.length+4);M.copy(N,0,0,M.length);for(var q=0,k=d[B],F=Math.ceil(R/k),O=1;O<=F;O++){N.writeUInt32BE(O,M.length);for(var j=z.run(N,z.ipad1),J=j,L=1;L<A;L++){J=z.run(J,z.ipad2);for(var C=0;C<k;C++)j[C]^=J[C]}j.copy(P,q),q+=k}return P}return _c=_,_c}var wc,Ad;function p5(){if(Ad)return wc;Ad=1;var a=Bt.Buffer,e=Zv(),t=Xv(),n=eg(),c=Qv(),s,m=St.crypto&&St.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function p(A){if(St.process&&!St.process.browser||!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(d[A]!==void 0)return d[A];s=s||a.alloc(8);var R=w(s,s,10,128,A).then(function(){return!0}).catch(function(){return!1});return d[A]=R,R}var u;function _(){return u||(St.process&&St.process.nextTick?u=St.process.nextTick:St.queueMicrotask?u=St.queueMicrotask:St.setImmediate?u=St.setImmediate:u=St.setTimeout,u)}function w(A,R,B,z,P){return m.importKey("raw",A,{name:"PBKDF2"},!1,["deriveBits"]).then(function(N){return m.deriveBits({name:"PBKDF2",salt:R,iterations:B,hash:{name:P}},N,z<<3)}).then(function(N){return a.from(N)})}function M(A,R){A.then(function(B){_()(function(){R(null,B)})},function(B){_()(function(){R(B)})})}return wc=function(A,R,B,z,P,N){typeof P=="function"&&(N=P,P=void 0),P=P||"sha1";var q=v[P.toLowerCase()];if(!q||typeof St.Promise!="function"){_()(function(){var k;try{k=n(A,R,B,z,P)}catch(F){return N(F)}N(null,k)});return}if(e(B,z),A=c(A,t,"Password"),R=c(R,t,"Salt"),typeof N!="function")throw new Error("No callback provided to pbkdf2");M(p(q).then(function(k){return k?w(A,R,B,z,q):n(A,R,B,z,P)}),N)},wc}var Id;function tg(){return Id||(Id=1,ho.pbkdf2=p5(),ho.pbkdf2Sync=eg()),ho}var vi={},An={},ri={},Od;function rg(){if(Od)return ri;Od=1,ri.readUInt32BE=function(c,s){var m=c[0+s]<<24|c[1+s]<<16|c[2+s]<<8|c[3+s];return m>>>0},ri.writeUInt32BE=function(c,s,m){c[0+m]=s>>>24,c[1+m]=s>>>16&255,c[2+m]=s>>>8&255,c[3+m]=s&255},ri.ip=function(c,s,m,v){for(var d=0,p=0,u=6;u>=0;u-=2){for(var _=0;_<=24;_+=8)d<<=1,d|=s>>>_+u&1;for(var _=0;_<=24;_+=8)d<<=1,d|=c>>>_+u&1}for(var u=6;u>=0;u-=2){for(var _=1;_<=25;_+=8)p<<=1,p|=s>>>_+u&1;for(var _=1;_<=25;_+=8)p<<=1,p|=c>>>_+u&1}m[v+0]=d>>>0,m[v+1]=p>>>0},ri.rip=function(c,s,m,v){for(var d=0,p=0,u=0;u<4;u++)for(var _=24;_>=0;_-=8)d<<=1,d|=s>>>_+u&1,d<<=1,d|=c>>>_+u&1;for(var u=4;u<8;u++)for(var _=24;_>=0;_-=8)p<<=1,p|=s>>>_+u&1,p<<=1,p|=c>>>_+u&1;m[v+0]=d>>>0,m[v+1]=p>>>0},ri.pc1=function(c,s,m,v){for(var d=0,p=0,u=7;u>=5;u--){for(var _=0;_<=24;_+=8)d<<=1,d|=s>>_+u&1;for(var _=0;_<=24;_+=8)d<<=1,d|=c>>_+u&1}for(var _=0;_<=24;_+=8)d<<=1,d|=s>>_+u&1;for(var u=1;u<=3;u++){for(var _=0;_<=24;_+=8)p<<=1,p|=s>>_+u&1;for(var _=0;_<=24;_+=8)p<<=1,p|=c>>_+u&1}for(var _=0;_<=24;_+=8)p<<=1,p|=c>>_+u&1;m[v+0]=d>>>0,m[v+1]=p>>>0},ri.r28shl=function(c,s){return c<<s&268435455|c>>>28-s};var a=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];ri.pc2=function(c,s,m,v){for(var d=0,p=0,u=a.length>>>1,_=0;_<u;_++)d<<=1,d|=c>>>a[_]&1;for(var _=u;_<a.length;_++)p<<=1,p|=s>>>a[_]&1;m[v+0]=d>>>0,m[v+1]=p>>>0},ri.expand=function(c,s,m){var v=0,d=0;v=(c&1)<<5|c>>>27;for(var p=23;p>=15;p-=4)v<<=6,v|=c>>>p&63;for(var p=11;p>=3;p-=4)d|=c>>>p&63,d<<=6;d|=(c&31)<<1|c>>>31,s[m+0]=v>>>0,s[m+1]=d>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];ri.substitute=function(c,s){for(var m=0,v=0;v<4;v++){var d=c>>>18-v*6&63,p=e[v*64+d];m<<=4,m|=p}for(var v=0;v<4;v++){var d=s>>>18-v*6&63,p=e[4*64+v*64+d];m<<=4,m|=p}return m>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return ri.permute=function(c){for(var s=0,m=0;m<t.length;m++)s<<=1,s|=c>>>t[m]&1;return s>>>0},ri.padSplit=function(c,s,m){for(var v=c.toString(2);v.length<s;)v="0"+v;for(var d=[],p=0;p<s;p+=m)d.push(v.slice(p,p+m));return d.join(" ")},ri}var Ec,Pd;function Ch(){if(Pd)return Ec;Pd=1;var a=Bn;function e(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}return Ec=e,e.prototype._init=function(){},e.prototype.update=function(n){return n.length===0?[]:this.type==="decrypt"?this._updateDecrypt(n):this._updateEncrypt(n)},e.prototype._buffer=function(n,c){for(var s=Math.min(this.buffer.length-this.bufferOff,n.length-c),m=0;m<s;m++)this.buffer[this.bufferOff+m]=n[c+m];return this.bufferOff+=s,s},e.prototype._flushBuffer=function(n,c){return this._update(this.buffer,0,n,c),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(n){var c=0,s=0,m=(this.bufferOff+n.length)/this.blockSize|0,v=new Array(m*this.blockSize);this.bufferOff!==0&&(c+=this._buffer(n,c),this.bufferOff===this.buffer.length&&(s+=this._flushBuffer(v,s)));for(var d=n.length-(n.length-c)%this.blockSize;c<d;c+=this.blockSize)this._update(n,c,v,s),s+=this.blockSize;for(;c<n.length;c++,this.bufferOff++)this.buffer[this.bufferOff]=n[c];return v},e.prototype._updateDecrypt=function(n){for(var c=0,s=0,m=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,v=new Array(m*this.blockSize);m>0;m--)c+=this._buffer(n,c),s+=this._flushBuffer(v,s);return c+=this._buffer(n,c),v},e.prototype.final=function(n){var c;n&&(c=this.update(n));var s;return this.type==="encrypt"?s=this._finalEncrypt():s=this._finalDecrypt(),c?c.concat(s):s},e.prototype._pad=function(n,c){if(c===0)return!1;for(;c<n.length;)n[c++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=new Array(this.blockSize);return this._update(this.buffer,0,n,0),n},e.prototype._unpad=function(n){return n},e.prototype._finalDecrypt=function(){a.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=new Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)},Ec}var Mc,Cd;function ig(){if(Cd)return Mc;Cd=1;var a=Bn,e=Ht,t=rg(),n=Ch();function c(){this.tmp=new Array(2),this.keys=null}function s(v){n.call(this,v);var d=new c;this._desState=d,this.deriveKeys(d,v.key)}e(s,n),Mc=s,s.create=function(d){return new s(d)};var m=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return s.prototype.deriveKeys=function(d,p){d.keys=new Array(16*2),a.equal(p.length,this.blockSize,"Invalid key length");var u=t.readUInt32BE(p,0),_=t.readUInt32BE(p,4);t.pc1(u,_,d.tmp,0),u=d.tmp[0],_=d.tmp[1];for(var w=0;w<d.keys.length;w+=2){var M=m[w>>>1];u=t.r28shl(u,M),_=t.r28shl(_,M),t.pc2(u,_,d.keys,w)}},s.prototype._update=function(d,p,u,_){var w=this._desState,M=t.readUInt32BE(d,p),A=t.readUInt32BE(d,p+4);t.ip(M,A,w.tmp,0),M=w.tmp[0],A=w.tmp[1],this.type==="encrypt"?this._encrypt(w,M,A,w.tmp,0):this._decrypt(w,M,A,w.tmp,0),M=w.tmp[0],A=w.tmp[1],t.writeUInt32BE(u,M,_),t.writeUInt32BE(u,A,_+4)},s.prototype._pad=function(d,p){for(var u=d.length-p,_=p;_<d.length;_++)d[_]=u;return!0},s.prototype._unpad=function(d){for(var p=d[d.length-1],u=d.length-p;u<d.length;u++)a.equal(d[u],p);return d.slice(0,d.length-p)},s.prototype._encrypt=function(d,p,u,_,w){for(var M=p,A=u,R=0;R<d.keys.length;R+=2){var B=d.keys[R],z=d.keys[R+1];t.expand(A,d.tmp,0),B^=d.tmp[0],z^=d.tmp[1];var P=t.substitute(B,z),N=t.permute(P),q=A;A=(M^N)>>>0,M=q}t.rip(A,M,_,w)},s.prototype._decrypt=function(d,p,u,_,w){for(var M=u,A=p,R=d.keys.length-2;R>=0;R-=2){var B=d.keys[R],z=d.keys[R+1];t.expand(M,d.tmp,0),B^=d.tmp[0],z^=d.tmp[1];var P=t.substitute(B,z),N=t.permute(P),q=M;M=(A^N)>>>0,A=q}t.rip(M,A,_,w)},Mc}var Sc={},Rd;function v5(){if(Rd)return Sc;Rd=1;var a=Bn,e=Ht,t={};function n(s){a.equal(s.length,8,"Invalid IV length"),this.iv=new Array(8);for(var m=0;m<this.iv.length;m++)this.iv[m]=s[m]}function c(s){function m(u){s.call(this,u),this._cbcInit()}e(m,s);for(var v=Object.keys(t),d=0;d<v.length;d++){var p=v[d];m.prototype[p]=t[p]}return m.create=function(_){return new m(_)},m}return Sc.instantiate=c,t._cbcInit=function(){var m=new n(this.options.iv);this._cbcState=m},t._update=function(m,v,d,p){var u=this._cbcState,_=this.constructor.super_.prototype,w=u.iv;if(this.type==="encrypt"){for(var M=0;M<this.blockSize;M++)w[M]^=m[v+M];_._update.call(this,w,0,d,p);for(var M=0;M<this.blockSize;M++)w[M]=d[p+M]}else{_._update.call(this,m,v,d,p);for(var M=0;M<this.blockSize;M++)d[p+M]^=w[M];for(var M=0;M<this.blockSize;M++)w[M]=m[v+M]}},Sc}var xc,Td;function g5(){if(Td)return xc;Td=1;var a=Bn,e=Ht,t=Ch(),n=ig();function c(m,v){a.equal(v.length,24,"Invalid key length");var d=v.slice(0,8),p=v.slice(8,16),u=v.slice(16,24);m==="encrypt"?this.ciphers=[n.create({type:"encrypt",key:d}),n.create({type:"decrypt",key:p}),n.create({type:"encrypt",key:u})]:this.ciphers=[n.create({type:"decrypt",key:u}),n.create({type:"encrypt",key:p}),n.create({type:"decrypt",key:d})]}function s(m){t.call(this,m);var v=new c(this.type,this.options.key);this._edeState=v}return e(s,t),xc=s,s.create=function(v){return new s(v)},s.prototype._update=function(v,d,p,u){var _=this._edeState;_.ciphers[0]._update(v,d,p,u),_.ciphers[1]._update(p,u,p,u),_.ciphers[2]._update(p,u,p,u)},s.prototype._pad=n.prototype._pad,s.prototype._unpad=n.prototype._unpad,xc}var Nd;function b5(){return Nd||(Nd=1,An.utils=rg(),An.Cipher=Ch(),An.DES=ig(),An.CBC=v5(),An.EDE=g5()),An}var Dc,Bd;function m5(){if(Bd)return Dc;Bd=1;var a=hn(),e=b5(),t=Ht,n=Bt.Buffer,c={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};c.des=c["des-cbc"],c.des3=c["des-ede3-cbc"],Dc=s,t(s,a);function s(m){a.call(this);var v=m.mode.toLowerCase(),d=c[v],p;m.decrypt?p="decrypt":p="encrypt";var u=m.key;n.isBuffer(u)||(u=n.from(u)),(v==="des-ede"||v==="des-ede-cbc")&&(u=n.concat([u,u.slice(0,8)]));var _=m.iv;n.isBuffer(_)||(_=n.from(_)),this._des=d.create({key:u,iv:_,type:p})}return s.prototype._update=function(m){return n.from(this._des.update(m))},s.prototype._final=function(){return n.from(this._des.final())},Dc}var gi={},lo={},po={},Ud;function y5(){return Ud||(Ud=1,po.encrypt=function(a,e){return a._cipher.encryptBlock(e)},po.decrypt=function(a,e){return a._cipher.decryptBlock(e)}),po}var vo={},Ac,qd;function ra(){return qd||(qd=1,Ac=function(e,t){for(var n=Math.min(e.length,t.length),c=new Tt.Buffer(n),s=0;s<n;++s)c[s]=e[s]^t[s];return c}),Ac}var Ld;function _5(){if(Ld)return vo;Ld=1;var a=ra();return vo.encrypt=function(e,t){var n=a(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},vo.decrypt=function(e,t){var n=e._prev;e._prev=t;var c=e._cipher.decryptBlock(t);return a(c,n)},vo}var Ic={},Fd;function w5(){if(Fd)return Ic;Fd=1;var a=Bt.Buffer,e=ra();function t(n,c,s){var m=c.length,v=e(c,n._cache);return n._cache=n._cache.slice(m),n._prev=a.concat([n._prev,s?c:v]),v}return Ic.encrypt=function(n,c,s){for(var m=a.allocUnsafe(0),v;c.length;)if(n._cache.length===0&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=a.allocUnsafe(0)),n._cache.length<=c.length)v=n._cache.length,m=a.concat([m,t(n,c.slice(0,v),s)]),c=c.slice(v);else{m=a.concat([m,t(n,c,s)]);break}return m},Ic}var Oc={},jd;function E5(){if(jd)return Oc;jd=1;var a=Bt.Buffer;function e(t,n,c){var s=t._cipher.encryptBlock(t._prev),m=s[0]^n;return t._prev=a.concat([t._prev.slice(1),a.from([c?n:m])]),m}return Oc.encrypt=function(t,n,c){for(var s=n.length,m=a.allocUnsafe(s),v=-1;++v<s;)m[v]=e(t,n[v],c);return m},Oc}var Pc={},$d;function M5(){if($d)return Pc;$d=1;var a=Bt.Buffer;function e(n,c,s){for(var m,v=-1,d=8,p=0,u,_;++v<d;)m=n._cipher.encryptBlock(n._prev),u=c&1<<7-v?128:0,_=m[0]^u,p+=(_&128)>>v%8,n._prev=t(n._prev,s?u:_);return p}function t(n,c){var s=n.length,m=-1,v=a.allocUnsafe(n.length);for(n=a.concat([n,a.from([c])]);++m<s;)v[m]=n[m]<<1|n[m+1]>>7;return v}return Pc.encrypt=function(n,c,s){for(var m=c.length,v=a.allocUnsafe(m),d=-1;++d<m;)v[d]=e(n,c[d],s);return v},Pc}var Cc={},kd;function S5(){if(kd)return Cc;kd=1;var a=ra();function e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}return Cc.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=Tt.Buffer.concat([t._cache,e(t)]);var c=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),a(n,c)},Cc}var Rc={},Tc,zd;function ng(){if(zd)return Tc;zd=1;function a(e){for(var t=e.length,n;t--;)if(n=e.readUInt8(t),n===255)e.writeUInt8(0,t);else{n++,e.writeUInt8(n,t);break}}return Tc=a,Tc}var Hd;function Kd(){if(Hd)return Rc;Hd=1;var a=ra(),e=Bt.Buffer,t=ng();function n(s){var m=s._cipher.encryptBlockRaw(s._prev);return t(s._prev),m}var c=16;return Rc.encrypt=function(s,m){var v=Math.ceil(m.length/c),d=s._cache.length;s._cache=e.concat([s._cache,e.allocUnsafe(v*c)]);for(var p=0;p<v;p++){var u=n(s),_=d+p*c;s._cache.writeUInt32BE(u[0],_+0),s._cache.writeUInt32BE(u[1],_+4),s._cache.writeUInt32BE(u[2],_+8),s._cache.writeUInt32BE(u[3],_+12)}var w=s._cache.slice(0,m.length);return s._cache=s._cache.slice(m.length),a(m,w)},Rc}const x5={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},D5={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},A5={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},sg={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:x5,aes192:D5,aes256:A5,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var Nc,Vd;function Rh(){if(Vd)return Nc;Vd=1;var a={ECB:y5(),CBC:_5(),CFB:w5(),CFB8:E5(),CFB1:M5(),OFB:S5(),CTR:Kd(),GCM:Kd()},e=sg;for(var t in e)e[t].module=a[e[t].mode];return Nc=e,Nc}var Bc={},Gd;function jo(){if(Gd)return Bc;Gd=1;var a=Bt.Buffer;function e(v){a.isBuffer(v)||(v=a.from(v));for(var d=v.length/4|0,p=new Array(d),u=0;u<d;u++)p[u]=v.readUInt32BE(u*4);return p}function t(v){for(var d=0;d<v.length;v++)v[d]=0}function n(v,d,p,u,_){for(var w=p[0],M=p[1],A=p[2],R=p[3],B=v[0]^d[0],z=v[1]^d[1],P=v[2]^d[2],N=v[3]^d[3],q,k,F,O,j=4,J=1;J<_;J++)q=w[B>>>24]^M[z>>>16&255]^A[P>>>8&255]^R[N&255]^d[j++],k=w[z>>>24]^M[P>>>16&255]^A[N>>>8&255]^R[B&255]^d[j++],F=w[P>>>24]^M[N>>>16&255]^A[B>>>8&255]^R[z&255]^d[j++],O=w[N>>>24]^M[B>>>16&255]^A[z>>>8&255]^R[P&255]^d[j++],B=q,z=k,P=F,N=O;return q=(u[B>>>24]<<24|u[z>>>16&255]<<16|u[P>>>8&255]<<8|u[N&255])^d[j++],k=(u[z>>>24]<<24|u[P>>>16&255]<<16|u[N>>>8&255]<<8|u[B&255])^d[j++],F=(u[P>>>24]<<24|u[N>>>16&255]<<16|u[B>>>8&255]<<8|u[z&255])^d[j++],O=(u[N>>>24]<<24|u[B>>>16&255]<<16|u[z>>>8&255]<<8|u[P&255])^d[j++],q=q>>>0,k=k>>>0,F=F>>>0,O=O>>>0,[q,k,F,O]}var c=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var v=new Array(256),d=0;d<256;d++)d<128?v[d]=d<<1:v[d]=d<<1^283;for(var p=[],u=[],_=[[],[],[],[]],w=[[],[],[],[]],M=0,A=0,R=0;R<256;++R){var B=A^A<<1^A<<2^A<<3^A<<4;B=B>>>8^B&255^99,p[M]=B,u[B]=M;var z=v[M],P=v[z],N=v[P],q=v[B]*257^B*16843008;_[0][M]=q<<24|q>>>8,_[1][M]=q<<16|q>>>16,_[2][M]=q<<8|q>>>24,_[3][M]=q,q=N*16843009^P*65537^z*257^M*16843008,w[0][B]=q<<24|q>>>8,w[1][B]=q<<16|q>>>16,w[2][B]=q<<8|q>>>24,w[3][B]=q,M===0?M=A=1:(M=z^v[v[v[N^z]]],A^=v[v[A]])}return{SBOX:p,INV_SBOX:u,SUB_MIX:_,INV_SUB_MIX:w}}();function m(v){this._key=e(v),this._reset()}return m.blockSize=4*4,m.keySize=256/8,m.prototype.blockSize=m.blockSize,m.prototype.keySize=m.keySize,m.prototype._reset=function(){for(var v=this._key,d=v.length,p=d+6,u=(p+1)*4,_=[],w=0;w<d;w++)_[w]=v[w];for(w=d;w<u;w++){var M=_[w-1];w%d===0?(M=M<<8|M>>>24,M=s.SBOX[M>>>24]<<24|s.SBOX[M>>>16&255]<<16|s.SBOX[M>>>8&255]<<8|s.SBOX[M&255],M^=c[w/d|0]<<24):d>6&&w%d===4&&(M=s.SBOX[M>>>24]<<24|s.SBOX[M>>>16&255]<<16|s.SBOX[M>>>8&255]<<8|s.SBOX[M&255]),_[w]=_[w-d]^M}for(var A=[],R=0;R<u;R++){var B=u-R,z=_[B-(R%4?0:4)];R<4||B<=4?A[R]=z:A[R]=s.INV_SUB_MIX[0][s.SBOX[z>>>24]]^s.INV_SUB_MIX[1][s.SBOX[z>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[z>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[z&255]]}this._nRounds=p,this._keySchedule=_,this._invKeySchedule=A},m.prototype.encryptBlockRaw=function(v){return v=e(v),n(v,this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},m.prototype.encryptBlock=function(v){var d=this.encryptBlockRaw(v),p=a.allocUnsafe(16);return p.writeUInt32BE(d[0],0),p.writeUInt32BE(d[1],4),p.writeUInt32BE(d[2],8),p.writeUInt32BE(d[3],12),p},m.prototype.decryptBlock=function(v){v=e(v);var d=v[1];v[1]=v[3],v[3]=d;var p=n(v,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),u=a.allocUnsafe(16);return u.writeUInt32BE(p[0],0),u.writeUInt32BE(p[3],4),u.writeUInt32BE(p[2],8),u.writeUInt32BE(p[1],12),u},m.prototype.scrub=function(){t(this._keySchedule),t(this._invKeySchedule),t(this._key)},Bc.AES=m,Bc}var Uc,Wd;function I5(){if(Wd)return Uc;Wd=1;var a=Bt.Buffer,e=a.alloc(16,0);function t(s){return[s.readUInt32BE(0),s.readUInt32BE(4),s.readUInt32BE(8),s.readUInt32BE(12)]}function n(s){var m=a.allocUnsafe(16);return m.writeUInt32BE(s[0]>>>0,0),m.writeUInt32BE(s[1]>>>0,4),m.writeUInt32BE(s[2]>>>0,8),m.writeUInt32BE(s[3]>>>0,12),m}function c(s){this.h=s,this.state=a.alloc(16,0),this.cache=a.allocUnsafe(0)}return c.prototype.ghash=function(s){for(var m=-1;++m<s.length;)this.state[m]^=s[m];this._multiply()},c.prototype._multiply=function(){for(var s=t(this.h),m=[0,0,0,0],v,d,p,u=-1;++u<128;){for(d=(this.state[~~(u/8)]&1<<7-u%8)!==0,d&&(m[0]^=s[0],m[1]^=s[1],m[2]^=s[2],m[3]^=s[3]),p=(s[3]&1)!==0,v=3;v>0;v--)s[v]=s[v]>>>1|(s[v-1]&1)<<31;s[0]=s[0]>>>1,p&&(s[0]=s[0]^225<<24)}this.state=n(m)},c.prototype.update=function(s){this.cache=a.concat([this.cache,s]);for(var m;this.cache.length>=16;)m=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(m)},c.prototype.final=function(s,m){return this.cache.length&&this.ghash(a.concat([this.cache,e],16)),this.ghash(n([0,s,0,m])),this.state},Uc=c,Uc}var qc,Yd;function ag(){if(Yd)return qc;Yd=1;var a=jo(),e=Bt.Buffer,t=hn(),n=Ht,c=I5(),s=ra(),m=ng();function v(u,_){var w=0;u.length!==_.length&&w++;for(var M=Math.min(u.length,_.length),A=0;A<M;++A)w+=u[A]^_[A];return w}function d(u,_,w){if(_.length===12)return u._finID=e.concat([_,e.from([0,0,0,1])]),e.concat([_,e.from([0,0,0,2])]);var M=new c(w),A=_.length,R=A%16;M.update(_),R&&(R=16-R,M.update(e.alloc(R,0))),M.update(e.alloc(8,0));var B=A*8,z=e.alloc(8);z.writeUIntBE(B,0,8),M.update(z),u._finID=M.state;var P=e.from(u._finID);return m(P),P}function p(u,_,w,M){t.call(this);var A=e.alloc(4,0);this._cipher=new a.AES(_);var R=this._cipher.encryptBlock(A);this._ghash=new c(R),w=d(this,w,R),this._prev=e.from(w),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=M,this._alen=0,this._len=0,this._mode=u,this._authTag=null,this._called=!1}return n(p,t),p.prototype._update=function(u){if(!this._called&&this._alen){var _=16-this._alen%16;_<16&&(_=e.alloc(_,0),this._ghash.update(_))}this._called=!0;var w=this._mode.encrypt(this,u);return this._decrypt?this._ghash.update(u):this._ghash.update(w),this._len+=u.length,w},p.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var u=s(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&v(u,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=u,this._cipher.scrub()},p.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},p.prototype.setAuthTag=function(_){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=_},p.prototype.setAAD=function(_){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(_),this._alen+=_.length},qc=p,qc}var Lc,Jd;function og(){if(Jd)return Lc;Jd=1;var a=jo(),e=Bt.Buffer,t=hn(),n=Ht;function c(s,m,v,d){t.call(this),this._cipher=new a.AES(m),this._prev=e.from(v),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=d,this._mode=s}return n(c,t),c.prototype._update=function(s){return this._mode.encrypt(this,s,this._decrypt)},c.prototype._final=function(){this._cipher.scrub()},Lc=c,Lc}var Fc,Zd;function $o(){if(Zd)return Fc;Zd=1;var a=Bt.Buffer,e=Oh();function t(n,c,s,m){if(a.isBuffer(n)||(n=a.from(n,"binary")),c&&(a.isBuffer(c)||(c=a.from(c,"binary")),c.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var v=s/8,d=a.alloc(v),p=a.alloc(m||0),u=a.alloc(0);v>0||m>0;){var _=new e;_.update(u),_.update(n),c&&_.update(c),u=_.digest();var w=0;if(v>0){var M=d.length-v;w=Math.min(v,u.length),u.copy(d,M,0,w),v-=w}if(w<u.length&&m>0){var A=p.length-m,R=Math.min(m,u.length-w);u.copy(p,A,w,w+R),m-=R}}return u.fill(0),{key:d,iv:p}}return Fc=t,Fc}var Xd;function O5(){if(Xd)return lo;Xd=1;var a=Rh(),e=ag(),t=Bt.Buffer,n=og(),c=hn(),s=jo(),m=$o(),v=Ht;function d(M,A,R){c.call(this),this._cache=new u,this._cipher=new s.AES(A),this._prev=t.from(R),this._mode=M,this._autopadding=!0}v(d,c),d.prototype._update=function(M){this._cache.add(M);for(var A,R,B=[];A=this._cache.get();)R=this._mode.encrypt(this,A),B.push(R);return t.concat(B)};var p=t.alloc(16,16);d.prototype._final=function(){var M=this._cache.flush();if(this._autopadding)return M=this._mode.encrypt(this,M),this._cipher.scrub(),M;if(!M.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(M){return this._autopadding=!!M,this};function u(){this.cache=t.allocUnsafe(0)}u.prototype.add=function(M){this.cache=t.concat([this.cache,M])},u.prototype.get=function(){if(this.cache.length>15){var M=this.cache.slice(0,16);return this.cache=this.cache.slice(16),M}return null},u.prototype.flush=function(){for(var M=16-this.cache.length,A=t.allocUnsafe(M),R=-1;++R<M;)A.writeUInt8(M,R);return t.concat([this.cache,A])};function _(M,A,R){var B=a[M.toLowerCase()];if(!B)throw new TypeError("invalid suite type");if(typeof A=="string"&&(A=t.from(A)),A.length!==B.key/8)throw new TypeError("invalid key length "+A.length);if(typeof R=="string"&&(R=t.from(R)),B.mode!=="GCM"&&R.length!==B.iv)throw new TypeError("invalid iv length "+R.length);return B.type==="stream"?new n(B.module,A,R):B.type==="auth"?new e(B.module,A,R):new d(B.module,A,R)}function w(M,A){var R=a[M.toLowerCase()];if(!R)throw new TypeError("invalid suite type");var B=m(A,!1,R.key,R.iv);return _(M,B.key,B.iv)}return lo.createCipheriv=_,lo.createCipher=w,lo}var go={},Qd;function P5(){if(Qd)return go;Qd=1;var a=ag(),e=Bt.Buffer,t=Rh(),n=og(),c=hn(),s=jo(),m=$o(),v=Ht;function d(M,A,R){c.call(this),this._cache=new p,this._last=void 0,this._cipher=new s.AES(A),this._prev=e.from(R),this._mode=M,this._autopadding=!0}v(d,c),d.prototype._update=function(M){this._cache.add(M);for(var A,R,B=[];A=this._cache.get(this._autopadding);)R=this._mode.decrypt(this,A),B.push(R);return e.concat(B)},d.prototype._final=function(){var M=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,M));if(M)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(M){return this._autopadding=!!M,this};function p(){this.cache=e.allocUnsafe(0)}p.prototype.add=function(M){this.cache=e.concat([this.cache,M])},p.prototype.get=function(M){var A;if(M){if(this.cache.length>16)return A=this.cache.slice(0,16),this.cache=this.cache.slice(16),A}else if(this.cache.length>=16)return A=this.cache.slice(0,16),this.cache=this.cache.slice(16),A;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache};function u(M){var A=M[15];if(A<1||A>16)throw new Error("unable to decrypt data");for(var R=-1;++R<A;)if(M[R+(16-A)]!==A)throw new Error("unable to decrypt data");if(A!==16)return M.slice(0,16-A)}function _(M,A,R){var B=t[M.toLowerCase()];if(!B)throw new TypeError("invalid suite type");if(typeof R=="string"&&(R=e.from(R)),B.mode!=="GCM"&&R.length!==B.iv)throw new TypeError("invalid iv length "+R.length);if(typeof A=="string"&&(A=e.from(A)),A.length!==B.key/8)throw new TypeError("invalid key length "+A.length);return B.type==="stream"?new n(B.module,A,R,!0):B.type==="auth"?new a(B.module,A,R,!0):new d(B.module,A,R)}function w(M,A){var R=t[M.toLowerCase()];if(!R)throw new TypeError("invalid suite type");var B=m(A,!1,R.key,R.iv);return _(M,B.key,B.iv)}return go.createDecipher=w,go.createDecipheriv=_,go}var e1;function Th(){if(e1)return gi;e1=1;var a=O5(),e=P5(),t=sg;function n(){return Object.keys(t)}return gi.createCipher=gi.Cipher=a.createCipher,gi.createCipheriv=gi.Cipheriv=a.createCipheriv,gi.createDecipher=gi.Decipher=e.createDecipher,gi.createDecipheriv=gi.Decipheriv=e.createDecipheriv,gi.listCiphers=gi.getCiphers=n,gi}var jc={},t1;function C5(){return t1||(t1=1,function(a){a["des-ecb"]={key:8,iv:0},a["des-cbc"]=a.des={key:8,iv:8},a["des-ede3-cbc"]=a.des3={key:24,iv:8},a["des-ede3"]={key:24,iv:0},a["des-ede-cbc"]={key:16,iv:8},a["des-ede"]={key:16,iv:0}}(jc)),jc}var r1;function R5(){if(r1)return vi;r1=1;var a=m5(),e=Th(),t=Rh(),n=C5(),c=$o();function s(u,_){u=u.toLowerCase();var w,M;if(t[u])w=t[u].key,M=t[u].iv;else if(n[u])w=n[u].key*8,M=n[u].iv;else throw new TypeError("invalid suite type");var A=c(_,!1,w,M);return v(u,A.key,A.iv)}function m(u,_){u=u.toLowerCase();var w,M;if(t[u])w=t[u].key,M=t[u].iv;else if(n[u])w=n[u].key*8,M=n[u].iv;else throw new TypeError("invalid suite type");var A=c(_,!1,w,M);return d(u,A.key,A.iv)}function v(u,_,w){if(u=u.toLowerCase(),t[u])return e.createCipheriv(u,_,w);if(n[u])return new a({key:_,iv:w,mode:u});throw new TypeError("invalid suite type")}function d(u,_,w){if(u=u.toLowerCase(),t[u])return e.createDecipheriv(u,_,w);if(n[u])return new a({key:_,iv:w,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}function p(){return Object.keys(n).concat(e.getCiphers())}return vi.createCipher=vi.Cipher=s,vi.createCipheriv=vi.Cipheriv=v,vi.createDecipher=vi.Decipher=m,vi.createDecipheriv=vi.Decipheriv=d,vi.listCiphers=vi.getCiphers=p,vi}var In={},bo={exports:{}},i1;function Nh(){if(i1)return bo.exports;i1=1;var a;bo.exports=function(c){return a||(a=new e(null)),a.generate(c)};function e(n){this.rand=n}if(bo.exports.Rand=e,e.prototype.generate=function(c){return this._rand(c)},e.prototype._rand=function(c){if(this.rand.getBytes)return this.rand.getBytes(c);for(var s=new Uint8Array(c),m=0;m<s.length;m++)s[m]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(c){var s=new Uint8Array(c);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(c){var s=new Uint8Array(c);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=Eg();if(typeof t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(c){return t.randomBytes(c)}}catch{}return bo.exports}var $c,n1;function fg(){if(n1)return $c;n1=1;var a=Yi,e=Nh();function t(n){this.rand=n||new e.Rand}return $c=t,t.create=function(c){return new t(c)},t.prototype._randbelow=function(c){var s=c.bitLength(),m=Math.ceil(s/8);do var v=new a(this.rand.generate(m));while(v.cmp(c)>=0);return v},t.prototype._randrange=function(c,s){var m=s.sub(c);return c.add(this._randbelow(m))},t.prototype.test=function(c,s,m){var v=c.bitLength(),d=a.mont(c),p=new a(1).toRed(d);s||(s=Math.max(1,v/48|0));for(var u=c.subn(1),_=0;!u.testn(_);_++);for(var w=c.shrn(_),M=u.toRed(d),A=!0;s>0;s--){var R=this._randrange(new a(2),u);m&&m(R);var B=R.toRed(d).redPow(w);if(!(B.cmp(p)===0||B.cmp(M)===0)){for(var z=1;z<_;z++){if(B=B.redSqr(),B.cmp(p)===0)return!1;if(B.cmp(M)===0)break}if(z===_)return!1}}return A},t.prototype.getDivisor=function(c,s){var m=c.bitLength(),v=a.mont(c),d=new a(1).toRed(v);s||(s=Math.max(1,m/48|0));for(var p=c.subn(1),u=0;!p.testn(u);u++);for(var _=c.shrn(u),w=p.toRed(v);s>0;s--){var M=this._randrange(new a(2),p),A=c.gcd(M);if(A.cmpn(1)!==0)return A;var R=M.toRed(v).redPow(_);if(!(R.cmp(d)===0||R.cmp(w)===0)){for(var B=1;B<u;B++){if(R=R.redSqr(),R.cmp(d)===0)return R.fromRed().subn(1).gcd(c);if(R.cmp(w)===0)break}if(B===u)return R=R.redSqr(),R.fromRed().subn(1).gcd(c)}}return!1},$c}var kc,s1;function cg(){if(s1)return kc;s1=1;var a=hs();kc=B,B.simpleSieve=A,B.fermatTest=R;var e=Yi,t=new e(24),n=fg(),c=new n,s=new e(1),m=new e(2),v=new e(5);new e(16),new e(8);var d=new e(10),p=new e(3);new e(7);var u=new e(11),_=new e(4);new e(12);var w=null;function M(){if(w!==null)return w;var z=1048576,P=[];P[0]=2;for(var N=1,q=3;q<z;q+=2){for(var k=Math.ceil(Math.sqrt(q)),F=0;F<N&&P[F]<=k&&q%P[F]!==0;F++);N!==F&&P[F]<=k||(P[N++]=q)}return w=P,P}function A(z){for(var P=M(),N=0;N<P.length;N++)if(z.modn(P[N])===0)return z.cmpn(P[N])===0;return!0}function R(z){var P=e.mont(z);return m.toRed(P).redPow(z.subn(1)).fromRed().cmpn(1)===0}function B(z,P){if(z<16)return P===2||P===5?new e([140,123]):new e([140,39]);P=new e(P);for(var N,q;;){for(N=new e(a(Math.ceil(z/8)));N.bitLength()>z;)N.ishrn(1);if(N.isEven()&&N.iadd(s),N.testn(1)||N.iadd(m),P.cmp(m)){if(!P.cmp(v))for(;N.mod(d).cmp(p);)N.iadd(_)}else for(;N.mod(t).cmp(u);)N.iadd(_);if(q=N.shrn(1),A(q)&&A(N)&&R(q)&&R(N)&&c.test(q)&&c.test(N))return N}}return kc}const T5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},N5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},B5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},U5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},q5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},L5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},F5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},j5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},$5={modp1:T5,modp2:N5,modp5:B5,modp14:U5,modp15:q5,modp16:L5,modp17:F5,modp18:j5};var zc,a1;function k5(){if(a1)return zc;a1=1;var a=Yi,e=fg(),t=new e,n=new a(24),c=new a(11),s=new a(10),m=new a(3),v=new a(7),d=cg(),p=hs();zc=A;function u(B,z){return z=z||"utf8",Tt.Buffer.isBuffer(B)||(B=new Tt.Buffer(B,z)),this._pub=new a(B),this}function _(B,z){return z=z||"utf8",Tt.Buffer.isBuffer(B)||(B=new Tt.Buffer(B,z)),this._priv=new a(B),this}var w={};function M(B,z){var P=z.toString("hex"),N=[P,B.toString(16)].join("_");if(N in w)return w[N];var q=0;if(B.isEven()||!d.simpleSieve||!d.fermatTest(B)||!t.test(B))return q+=1,P==="02"||P==="05"?q+=8:q+=4,w[N]=q,q;t.test(B.shrn(1))||(q+=2);var k;switch(P){case"02":B.mod(n).cmp(c)&&(q+=8);break;case"05":k=B.mod(s),k.cmp(m)&&k.cmp(v)&&(q+=8);break;default:q+=4}return w[N]=q,q}function A(B,z,P){this.setGenerator(z),this.__prime=new a(B),this._prime=a.mont(this.__prime),this._primeLen=B.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,P?(this.setPublicKey=u,this.setPrivateKey=_):this._primeCode=8}Object.defineProperty(A.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=M(this.__prime,this.__gen)),this._primeCode}}),A.prototype.generateKeys=function(){return this._priv||(this._priv=new a(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},A.prototype.computeSecret=function(B){B=new a(B),B=B.toRed(this._prime);var z=B.redPow(this._priv).fromRed(),P=new Tt.Buffer(z.toArray()),N=this.getPrime();if(P.length<N.length){var q=new Tt.Buffer(N.length-P.length);q.fill(0),P=Tt.Buffer.concat([q,P])}return P},A.prototype.getPublicKey=function(z){return R(this._pub,z)},A.prototype.getPrivateKey=function(z){return R(this._priv,z)},A.prototype.getPrime=function(B){return R(this.__prime,B)},A.prototype.getGenerator=function(B){return R(this._gen,B)},A.prototype.setGenerator=function(B,z){return z=z||"utf8",Tt.Buffer.isBuffer(B)||(B=new Tt.Buffer(B,z)),this.__gen=B,this._gen=new a(B),this};function R(B,z){var P=new Tt.Buffer(B.toArray());return z?P.toString(z):P}return zc}var o1;function z5(){if(o1)return In;o1=1;var a=cg(),e=$5,t=k5();function n(m){var v=new Tt.Buffer(e[m].prime,"hex"),d=new Tt.Buffer(e[m].gen,"hex");return new t(v,d)}var c={binary:!0,hex:!0,base64:!0};function s(m,v,d,p){return Tt.Buffer.isBuffer(v)||c[v]===void 0?s(m,"binary",v,d):(v=v||"binary",p=p||"binary",d=d||new Tt.Buffer([2]),Tt.Buffer.isBuffer(d)||(d=new Tt.Buffer(d,p)),typeof m=="number"?new t(a(m,d),d,!0):(Tt.Buffer.isBuffer(m)||(m=new Tt.Buffer(m,v)),new t(m,d,!0)))}return In.DiffieHellmanGroup=In.createDiffieHellmanGroup=In.getDiffieHellman=n,In.createDiffieHellman=In.DiffieHellman=s,In}var Bs={exports:{}},Eo={exports:{}};Eo.exports;var f1;function H5(){return f1||(f1=1,function(a){(function(e,t){function n(h,r){if(!h)throw new Error(r||"Assertion failed")}function c(h,r){h.super_=r;var o=function(){};o.prototype=r.prototype,h.prototype=new o,h.prototype.constructor=h}function s(h,r,o){if(s.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((r==="le"||r==="be")&&(o=r,r=10),this._init(h||0,r||10,o||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var m;try{typeof window<"u"&&typeof window.Buffer<"u"?m=window.Buffer:m=bh.Buffer}catch{}s.isBN=function(r){return r instanceof s?!0:r!==null&&typeof r=="object"&&r.constructor.wordSize===s.wordSize&&Array.isArray(r.words)},s.max=function(r,o){return r.cmp(o)>0?r:o},s.min=function(r,o){return r.cmp(o)<0?r:o},s.prototype._init=function(r,o,b){if(typeof r=="number")return this._initNumber(r,o,b);if(typeof r=="object")return this._initArray(r,o,b);o==="hex"&&(o=16),n(o===(o|0)&&o>=2&&o<=36),r=r.toString().replace(/\s+/g,"");var D=0;r[0]==="-"&&(D++,this.negative=1),D<r.length&&(o===16?this._parseHex(r,D,b):(this._parseBase(r,o,D),b==="le"&&this._initArray(this.toArray(),o,b)))},s.prototype._initNumber=function(r,o,b){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[r&67108863],this.length=1):r<4503599627370496?(this.words=[r&67108863,r/67108864&67108863],this.length=2):(n(r<9007199254740992),this.words=[r&67108863,r/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),o,b)},s.prototype._initArray=function(r,o,b){if(n(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var I,x,y=0;if(b==="be")for(D=r.length-1,I=0;D>=0;D-=3)x=r[D]|r[D-1]<<8|r[D-2]<<16,this.words[I]|=x<<y&67108863,this.words[I+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,I++);else if(b==="le")for(D=0,I=0;D<r.length;D+=3)x=r[D]|r[D+1]<<8|r[D+2]<<16,this.words[I]|=x<<y&67108863,this.words[I+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,I++);return this._strip()};function v(h,r){var o=h.charCodeAt(r);if(o>=48&&o<=57)return o-48;if(o>=65&&o<=70)return o-55;if(o>=97&&o<=102)return o-87;n(!1,"Invalid character in "+h)}function d(h,r,o){var b=v(h,o);return o-1>=r&&(b|=v(h,o-1)<<4),b}s.prototype._parseHex=function(r,o,b){this.length=Math.ceil((r.length-o)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var I=0,x=0,y;if(b==="be")for(D=r.length-1;D>=o;D-=2)y=d(r,o,D)<<I,this.words[x]|=y&67108863,I>=18?(I-=18,x+=1,this.words[x]|=y>>>26):I+=8;else{var S=r.length-o;for(D=S%2===0?o+1:o;D<r.length;D+=2)y=d(r,o,D)<<I,this.words[x]|=y&67108863,I>=18?(I-=18,x+=1,this.words[x]|=y>>>26):I+=8}this._strip()};function p(h,r,o,b){for(var D=0,I=0,x=Math.min(h.length,o),y=r;y<x;y++){var S=h.charCodeAt(y)-48;D*=b,S>=49?I=S-49+10:S>=17?I=S-17+10:I=S,n(S>=0&&I<b,"Invalid character"),D+=I}return D}s.prototype._parseBase=function(r,o,b){this.words=[0],this.length=1;for(var D=0,I=1;I<=67108863;I*=o)D++;D--,I=I/o|0;for(var x=r.length-b,y=x%D,S=Math.min(x,x-y)+b,l=0,T=b;T<S;T+=D)l=p(r,T,T+D,o),this.imuln(I),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(y!==0){var te=1;for(l=p(r,T,r.length,o),T=0;T<y;T++)te*=o;this.imuln(te),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},s.prototype.copy=function(r){r.words=new Array(this.length);for(var o=0;o<this.length;o++)r.words[o]=this.words[o];r.length=this.length,r.negative=this.negative,r.red=this.red};function u(h,r){h.words=r.words,h.length=r.length,h.negative=r.negative,h.red=r.red}if(s.prototype._move=function(r){u(r,this)},s.prototype.clone=function(){var r=new s(null);return this.copy(r),r},s.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{s.prototype.inspect=_}else s.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(r,o){r=r||10,o=o|0||1;var b;if(r===16||r==="hex"){b="";for(var D=0,I=0,x=0;x<this.length;x++){var y=this.words[x],S=((y<<D|I)&16777215).toString(16);I=y>>>24-D&16777215,D+=2,D>=26&&(D-=26,x--),I!==0||x!==this.length-1?b=w[6-S.length]+S+b:b=S+b}for(I!==0&&(b=I.toString(16)+b);b.length%o!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(r===(r|0)&&r>=2&&r<=36){var l=M[r],T=A[r];b="";var te=this.clone();for(te.negative=0;!te.isZero();){var ee=te.modrn(T).toString(r);te=te.idivn(T),te.isZero()?b=ee+b:b=w[l-ee.length]+ee+b}for(this.isZero()&&(b="0"+b);b.length%o!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=this.words[1]*67108864:this.length===3&&this.words[2]===1?r+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},s.prototype.toJSON=function(){return this.toString(16,2)},m&&(s.prototype.toBuffer=function(r,o){return this.toArrayLike(m,r,o)}),s.prototype.toArray=function(r,o){return this.toArrayLike(Array,r,o)};var R=function(r,o){return r.allocUnsafe?r.allocUnsafe(o):new r(o)};s.prototype.toArrayLike=function(r,o,b){this._strip();var D=this.byteLength(),I=b||Math.max(1,D);n(D<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var x=R(r,I),y=o==="le"?"LE":"BE";return this["_toArrayLike"+y](x,D),x},s.prototype._toArrayLikeLE=function(r,o){for(var b=0,D=0,I=0,x=0;I<this.length;I++){var y=this.words[I]<<x|D;r[b++]=y&255,b<r.length&&(r[b++]=y>>8&255),b<r.length&&(r[b++]=y>>16&255),x===6?(b<r.length&&(r[b++]=y>>24&255),D=0,x=0):(D=y>>>24,x+=2)}if(b<r.length)for(r[b++]=D;b<r.length;)r[b++]=0},s.prototype._toArrayLikeBE=function(r,o){for(var b=r.length-1,D=0,I=0,x=0;I<this.length;I++){var y=this.words[I]<<x|D;r[b--]=y&255,b>=0&&(r[b--]=y>>8&255),b>=0&&(r[b--]=y>>16&255),x===6?(b>=0&&(r[b--]=y>>24&255),D=0,x=0):(D=y>>>24,x+=2)}if(b>=0)for(r[b--]=D;b>=0;)r[b--]=0},Math.clz32?s.prototype._countBits=function(r){return 32-Math.clz32(r)}:s.prototype._countBits=function(r){var o=r,b=0;return o>=4096&&(b+=13,o>>>=13),o>=64&&(b+=7,o>>>=7),o>=8&&(b+=4,o>>>=4),o>=2&&(b+=2,o>>>=2),b+o},s.prototype._zeroBits=function(r){if(r===0)return 26;var o=r,b=0;return o&8191||(b+=13,o>>>=13),o&127||(b+=7,o>>>=7),o&15||(b+=4,o>>>=4),o&3||(b+=2,o>>>=2),o&1||b++,b},s.prototype.bitLength=function(){var r=this.words[this.length-1],o=this._countBits(r);return(this.length-1)*26+o};function B(h){for(var r=new Array(h.bitLength()),o=0;o<r.length;o++){var b=o/26|0,D=o%26;r[o]=h.words[b]>>>D&1}return r}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,o=0;o<this.length;o++){var b=this._zeroBits(this.words[o]);if(r+=b,b!==26)break}return r},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},s.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var o=0;o<r.length;o++)this.words[o]=this.words[o]|r.words[o];return this._strip()},s.prototype.ior=function(r){return n((this.negative|r.negative)===0),this.iuor(r)},s.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},s.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},s.prototype.iuand=function(r){var o;this.length>r.length?o=r:o=this;for(var b=0;b<o.length;b++)this.words[b]=this.words[b]&r.words[b];return this.length=o.length,this._strip()},s.prototype.iand=function(r){return n((this.negative|r.negative)===0),this.iuand(r)},s.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},s.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},s.prototype.iuxor=function(r){var o,b;this.length>r.length?(o=this,b=r):(o=r,b=this);for(var D=0;D<b.length;D++)this.words[D]=o.words[D]^b.words[D];if(this!==o)for(;D<o.length;D++)this.words[D]=o.words[D];return this.length=o.length,this._strip()},s.prototype.ixor=function(r){return n((this.negative|r.negative)===0),this.iuxor(r)},s.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},s.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},s.prototype.inotn=function(r){n(typeof r=="number"&&r>=0);var o=Math.ceil(r/26)|0,b=r%26;this._expand(o),b>0&&o--;for(var D=0;D<o;D++)this.words[D]=~this.words[D]&67108863;return b>0&&(this.words[D]=~this.words[D]&67108863>>26-b),this._strip()},s.prototype.notn=function(r){return this.clone().inotn(r)},s.prototype.setn=function(r,o){n(typeof r=="number"&&r>=0);var b=r/26|0,D=r%26;return this._expand(b+1),o?this.words[b]=this.words[b]|1<<D:this.words[b]=this.words[b]&~(1<<D),this._strip()},s.prototype.iadd=function(r){var o;if(this.negative!==0&&r.negative===0)return this.negative=0,o=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,o=this.isub(r),r.negative=1,o._normSign();var b,D;this.length>r.length?(b=this,D=r):(b=r,D=this);for(var I=0,x=0;x<D.length;x++)o=(b.words[x]|0)+(D.words[x]|0)+I,this.words[x]=o&67108863,I=o>>>26;for(;I!==0&&x<b.length;x++)o=(b.words[x]|0)+I,this.words[x]=o&67108863,I=o>>>26;if(this.length=b.length,I!==0)this.words[this.length]=I,this.length++;else if(b!==this)for(;x<b.length;x++)this.words[x]=b.words[x];return this},s.prototype.add=function(r){var o;return r.negative!==0&&this.negative===0?(r.negative=0,o=this.sub(r),r.negative^=1,o):r.negative===0&&this.negative!==0?(this.negative=0,o=r.sub(this),this.negative=1,o):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},s.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var o=this.iadd(r);return r.negative=1,o._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var b=this.cmp(r);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,I;b>0?(D=this,I=r):(D=r,I=this);for(var x=0,y=0;y<I.length;y++)o=(D.words[y]|0)-(I.words[y]|0)+x,x=o>>26,this.words[y]=o&67108863;for(;x!==0&&y<D.length;y++)o=(D.words[y]|0)+x,x=o>>26,this.words[y]=o&67108863;if(x===0&&y<D.length&&D!==this)for(;y<D.length;y++)this.words[y]=D.words[y];return this.length=Math.max(this.length,y),D!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(r){return this.clone().isub(r)};function z(h,r,o){o.negative=r.negative^h.negative;var b=h.length+r.length|0;o.length=b,b=b-1|0;var D=h.words[0]|0,I=r.words[0]|0,x=D*I,y=x&67108863,S=x/67108864|0;o.words[0]=y;for(var l=1;l<b;l++){for(var T=S>>>26,te=S&67108863,ee=Math.min(l,r.length-1),ae=Math.max(0,l-h.length+1);ae<=ee;ae++){var Q=l-ae|0;D=h.words[Q]|0,I=r.words[ae]|0,x=D*I+te,T+=x/67108864|0,te=x&67108863}o.words[l]=te|0,S=T|0}return S!==0?o.words[l]=S|0:o.length--,o._strip()}var P=function(r,o,b){var D=r.words,I=o.words,x=b.words,y=0,S,l,T,te=D[0]|0,ee=te&8191,ae=te>>>13,Q=D[1]|0,X=Q&8191,Y=Q>>>13,$=D[2]|0,W=$&8191,oe=$>>>13,ye=D[3]|0,we=ye&8191,me=ye>>>13,Ze=D[4]|0,De=Ze&8191,Ee=Ze>>>13,nt=D[5]|0,Ae=nt&8191,de=nt>>>13,ze=D[6]|0,Me=ze&8191,ge=ze>>>13,Fe=D[7]|0,Se=Fe&8191,le=Fe>>>13,je=D[8]|0,Pe=je&8191,pe=je>>>13,Xe=D[9]|0,Te=Xe&8191,_e=Xe>>>13,Qe=I[0]|0,Ne=Qe&8191,Be=Qe>>>13,wt=I[1]|0,rt=wt&8191,Ue=wt>>>13,It=I[2]|0,it=It&8191,ke=It>>>13,ct=I[3]|0,He=ct&8191,Ie=ct>>>13,ut=I[4]|0,Ke=ut&8191,xe=ut>>>13,pt=I[5]|0,Je=pt&8191,Oe=pt>>>13,vt=I[6]|0,Ge=vt&8191,Ce=vt>>>13,ht=I[7]|0,$e=ht&8191,Re=ht>>>13,gt=I[8]|0,dt=gt&8191,Ye=gt>>>13,Ut=I[9]|0,tt=Ut&8191,lt=Ut>>>13;b.negative=r.negative^o.negative,b.length=19,S=Math.imul(ee,Ne),l=Math.imul(ee,Be),l=l+Math.imul(ae,Ne)|0,T=Math.imul(ae,Be);var xr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(xr>>>26)|0,xr&=67108863,S=Math.imul(X,Ne),l=Math.imul(X,Be),l=l+Math.imul(Y,Ne)|0,T=Math.imul(Y,Be),S=S+Math.imul(ee,rt)|0,l=l+Math.imul(ee,Ue)|0,l=l+Math.imul(ae,rt)|0,T=T+Math.imul(ae,Ue)|0;var Dr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,S=Math.imul(W,Ne),l=Math.imul(W,Be),l=l+Math.imul(oe,Ne)|0,T=Math.imul(oe,Be),S=S+Math.imul(X,rt)|0,l=l+Math.imul(X,Ue)|0,l=l+Math.imul(Y,rt)|0,T=T+Math.imul(Y,Ue)|0,S=S+Math.imul(ee,it)|0,l=l+Math.imul(ee,ke)|0,l=l+Math.imul(ae,it)|0,T=T+Math.imul(ae,ke)|0;var Ar=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,S=Math.imul(we,Ne),l=Math.imul(we,Be),l=l+Math.imul(me,Ne)|0,T=Math.imul(me,Be),S=S+Math.imul(W,rt)|0,l=l+Math.imul(W,Ue)|0,l=l+Math.imul(oe,rt)|0,T=T+Math.imul(oe,Ue)|0,S=S+Math.imul(X,it)|0,l=l+Math.imul(X,ke)|0,l=l+Math.imul(Y,it)|0,T=T+Math.imul(Y,ke)|0,S=S+Math.imul(ee,He)|0,l=l+Math.imul(ee,Ie)|0,l=l+Math.imul(ae,He)|0,T=T+Math.imul(ae,Ie)|0;var Ir=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,S=Math.imul(De,Ne),l=Math.imul(De,Be),l=l+Math.imul(Ee,Ne)|0,T=Math.imul(Ee,Be),S=S+Math.imul(we,rt)|0,l=l+Math.imul(we,Ue)|0,l=l+Math.imul(me,rt)|0,T=T+Math.imul(me,Ue)|0,S=S+Math.imul(W,it)|0,l=l+Math.imul(W,ke)|0,l=l+Math.imul(oe,it)|0,T=T+Math.imul(oe,ke)|0,S=S+Math.imul(X,He)|0,l=l+Math.imul(X,Ie)|0,l=l+Math.imul(Y,He)|0,T=T+Math.imul(Y,Ie)|0,S=S+Math.imul(ee,Ke)|0,l=l+Math.imul(ee,xe)|0,l=l+Math.imul(ae,Ke)|0,T=T+Math.imul(ae,xe)|0;var er=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(er>>>26)|0,er&=67108863,S=Math.imul(Ae,Ne),l=Math.imul(Ae,Be),l=l+Math.imul(de,Ne)|0,T=Math.imul(de,Be),S=S+Math.imul(De,rt)|0,l=l+Math.imul(De,Ue)|0,l=l+Math.imul(Ee,rt)|0,T=T+Math.imul(Ee,Ue)|0,S=S+Math.imul(we,it)|0,l=l+Math.imul(we,ke)|0,l=l+Math.imul(me,it)|0,T=T+Math.imul(me,ke)|0,S=S+Math.imul(W,He)|0,l=l+Math.imul(W,Ie)|0,l=l+Math.imul(oe,He)|0,T=T+Math.imul(oe,Ie)|0,S=S+Math.imul(X,Ke)|0,l=l+Math.imul(X,xe)|0,l=l+Math.imul(Y,Ke)|0,T=T+Math.imul(Y,xe)|0,S=S+Math.imul(ee,Je)|0,l=l+Math.imul(ee,Oe)|0,l=l+Math.imul(ae,Je)|0,T=T+Math.imul(ae,Oe)|0;var cr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(cr>>>26)|0,cr&=67108863,S=Math.imul(Me,Ne),l=Math.imul(Me,Be),l=l+Math.imul(ge,Ne)|0,T=Math.imul(ge,Be),S=S+Math.imul(Ae,rt)|0,l=l+Math.imul(Ae,Ue)|0,l=l+Math.imul(de,rt)|0,T=T+Math.imul(de,Ue)|0,S=S+Math.imul(De,it)|0,l=l+Math.imul(De,ke)|0,l=l+Math.imul(Ee,it)|0,T=T+Math.imul(Ee,ke)|0,S=S+Math.imul(we,He)|0,l=l+Math.imul(we,Ie)|0,l=l+Math.imul(me,He)|0,T=T+Math.imul(me,Ie)|0,S=S+Math.imul(W,Ke)|0,l=l+Math.imul(W,xe)|0,l=l+Math.imul(oe,Ke)|0,T=T+Math.imul(oe,xe)|0,S=S+Math.imul(X,Je)|0,l=l+Math.imul(X,Oe)|0,l=l+Math.imul(Y,Je)|0,T=T+Math.imul(Y,Oe)|0,S=S+Math.imul(ee,Ge)|0,l=l+Math.imul(ee,Ce)|0,l=l+Math.imul(ae,Ge)|0,T=T+Math.imul(ae,Ce)|0;var Or=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Or>>>26)|0,Or&=67108863,S=Math.imul(Se,Ne),l=Math.imul(Se,Be),l=l+Math.imul(le,Ne)|0,T=Math.imul(le,Be),S=S+Math.imul(Me,rt)|0,l=l+Math.imul(Me,Ue)|0,l=l+Math.imul(ge,rt)|0,T=T+Math.imul(ge,Ue)|0,S=S+Math.imul(Ae,it)|0,l=l+Math.imul(Ae,ke)|0,l=l+Math.imul(de,it)|0,T=T+Math.imul(de,ke)|0,S=S+Math.imul(De,He)|0,l=l+Math.imul(De,Ie)|0,l=l+Math.imul(Ee,He)|0,T=T+Math.imul(Ee,Ie)|0,S=S+Math.imul(we,Ke)|0,l=l+Math.imul(we,xe)|0,l=l+Math.imul(me,Ke)|0,T=T+Math.imul(me,xe)|0,S=S+Math.imul(W,Je)|0,l=l+Math.imul(W,Oe)|0,l=l+Math.imul(oe,Je)|0,T=T+Math.imul(oe,Oe)|0,S=S+Math.imul(X,Ge)|0,l=l+Math.imul(X,Ce)|0,l=l+Math.imul(Y,Ge)|0,T=T+Math.imul(Y,Ce)|0,S=S+Math.imul(ee,$e)|0,l=l+Math.imul(ee,Re)|0,l=l+Math.imul(ae,$e)|0,T=T+Math.imul(ae,Re)|0;var ur=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(ur>>>26)|0,ur&=67108863,S=Math.imul(Pe,Ne),l=Math.imul(Pe,Be),l=l+Math.imul(pe,Ne)|0,T=Math.imul(pe,Be),S=S+Math.imul(Se,rt)|0,l=l+Math.imul(Se,Ue)|0,l=l+Math.imul(le,rt)|0,T=T+Math.imul(le,Ue)|0,S=S+Math.imul(Me,it)|0,l=l+Math.imul(Me,ke)|0,l=l+Math.imul(ge,it)|0,T=T+Math.imul(ge,ke)|0,S=S+Math.imul(Ae,He)|0,l=l+Math.imul(Ae,Ie)|0,l=l+Math.imul(de,He)|0,T=T+Math.imul(de,Ie)|0,S=S+Math.imul(De,Ke)|0,l=l+Math.imul(De,xe)|0,l=l+Math.imul(Ee,Ke)|0,T=T+Math.imul(Ee,xe)|0,S=S+Math.imul(we,Je)|0,l=l+Math.imul(we,Oe)|0,l=l+Math.imul(me,Je)|0,T=T+Math.imul(me,Oe)|0,S=S+Math.imul(W,Ge)|0,l=l+Math.imul(W,Ce)|0,l=l+Math.imul(oe,Ge)|0,T=T+Math.imul(oe,Ce)|0,S=S+Math.imul(X,$e)|0,l=l+Math.imul(X,Re)|0,l=l+Math.imul(Y,$e)|0,T=T+Math.imul(Y,Re)|0,S=S+Math.imul(ee,dt)|0,l=l+Math.imul(ee,Ye)|0,l=l+Math.imul(ae,dt)|0,T=T+Math.imul(ae,Ye)|0;var Pr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,S=Math.imul(Te,Ne),l=Math.imul(Te,Be),l=l+Math.imul(_e,Ne)|0,T=Math.imul(_e,Be),S=S+Math.imul(Pe,rt)|0,l=l+Math.imul(Pe,Ue)|0,l=l+Math.imul(pe,rt)|0,T=T+Math.imul(pe,Ue)|0,S=S+Math.imul(Se,it)|0,l=l+Math.imul(Se,ke)|0,l=l+Math.imul(le,it)|0,T=T+Math.imul(le,ke)|0,S=S+Math.imul(Me,He)|0,l=l+Math.imul(Me,Ie)|0,l=l+Math.imul(ge,He)|0,T=T+Math.imul(ge,Ie)|0,S=S+Math.imul(Ae,Ke)|0,l=l+Math.imul(Ae,xe)|0,l=l+Math.imul(de,Ke)|0,T=T+Math.imul(de,xe)|0,S=S+Math.imul(De,Je)|0,l=l+Math.imul(De,Oe)|0,l=l+Math.imul(Ee,Je)|0,T=T+Math.imul(Ee,Oe)|0,S=S+Math.imul(we,Ge)|0,l=l+Math.imul(we,Ce)|0,l=l+Math.imul(me,Ge)|0,T=T+Math.imul(me,Ce)|0,S=S+Math.imul(W,$e)|0,l=l+Math.imul(W,Re)|0,l=l+Math.imul(oe,$e)|0,T=T+Math.imul(oe,Re)|0,S=S+Math.imul(X,dt)|0,l=l+Math.imul(X,Ye)|0,l=l+Math.imul(Y,dt)|0,T=T+Math.imul(Y,Ye)|0,S=S+Math.imul(ee,tt)|0,l=l+Math.imul(ee,lt)|0,l=l+Math.imul(ae,tt)|0,T=T+Math.imul(ae,lt)|0;var Cr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,S=Math.imul(Te,rt),l=Math.imul(Te,Ue),l=l+Math.imul(_e,rt)|0,T=Math.imul(_e,Ue),S=S+Math.imul(Pe,it)|0,l=l+Math.imul(Pe,ke)|0,l=l+Math.imul(pe,it)|0,T=T+Math.imul(pe,ke)|0,S=S+Math.imul(Se,He)|0,l=l+Math.imul(Se,Ie)|0,l=l+Math.imul(le,He)|0,T=T+Math.imul(le,Ie)|0,S=S+Math.imul(Me,Ke)|0,l=l+Math.imul(Me,xe)|0,l=l+Math.imul(ge,Ke)|0,T=T+Math.imul(ge,xe)|0,S=S+Math.imul(Ae,Je)|0,l=l+Math.imul(Ae,Oe)|0,l=l+Math.imul(de,Je)|0,T=T+Math.imul(de,Oe)|0,S=S+Math.imul(De,Ge)|0,l=l+Math.imul(De,Ce)|0,l=l+Math.imul(Ee,Ge)|0,T=T+Math.imul(Ee,Ce)|0,S=S+Math.imul(we,$e)|0,l=l+Math.imul(we,Re)|0,l=l+Math.imul(me,$e)|0,T=T+Math.imul(me,Re)|0,S=S+Math.imul(W,dt)|0,l=l+Math.imul(W,Ye)|0,l=l+Math.imul(oe,dt)|0,T=T+Math.imul(oe,Ye)|0,S=S+Math.imul(X,tt)|0,l=l+Math.imul(X,lt)|0,l=l+Math.imul(Y,tt)|0,T=T+Math.imul(Y,lt)|0;var hr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(hr>>>26)|0,hr&=67108863,S=Math.imul(Te,it),l=Math.imul(Te,ke),l=l+Math.imul(_e,it)|0,T=Math.imul(_e,ke),S=S+Math.imul(Pe,He)|0,l=l+Math.imul(Pe,Ie)|0,l=l+Math.imul(pe,He)|0,T=T+Math.imul(pe,Ie)|0,S=S+Math.imul(Se,Ke)|0,l=l+Math.imul(Se,xe)|0,l=l+Math.imul(le,Ke)|0,T=T+Math.imul(le,xe)|0,S=S+Math.imul(Me,Je)|0,l=l+Math.imul(Me,Oe)|0,l=l+Math.imul(ge,Je)|0,T=T+Math.imul(ge,Oe)|0,S=S+Math.imul(Ae,Ge)|0,l=l+Math.imul(Ae,Ce)|0,l=l+Math.imul(de,Ge)|0,T=T+Math.imul(de,Ce)|0,S=S+Math.imul(De,$e)|0,l=l+Math.imul(De,Re)|0,l=l+Math.imul(Ee,$e)|0,T=T+Math.imul(Ee,Re)|0,S=S+Math.imul(we,dt)|0,l=l+Math.imul(we,Ye)|0,l=l+Math.imul(me,dt)|0,T=T+Math.imul(me,Ye)|0,S=S+Math.imul(W,tt)|0,l=l+Math.imul(W,lt)|0,l=l+Math.imul(oe,tt)|0,T=T+Math.imul(oe,lt)|0;var _r=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(_r>>>26)|0,_r&=67108863,S=Math.imul(Te,He),l=Math.imul(Te,Ie),l=l+Math.imul(_e,He)|0,T=Math.imul(_e,Ie),S=S+Math.imul(Pe,Ke)|0,l=l+Math.imul(Pe,xe)|0,l=l+Math.imul(pe,Ke)|0,T=T+Math.imul(pe,xe)|0,S=S+Math.imul(Se,Je)|0,l=l+Math.imul(Se,Oe)|0,l=l+Math.imul(le,Je)|0,T=T+Math.imul(le,Oe)|0,S=S+Math.imul(Me,Ge)|0,l=l+Math.imul(Me,Ce)|0,l=l+Math.imul(ge,Ge)|0,T=T+Math.imul(ge,Ce)|0,S=S+Math.imul(Ae,$e)|0,l=l+Math.imul(Ae,Re)|0,l=l+Math.imul(de,$e)|0,T=T+Math.imul(de,Re)|0,S=S+Math.imul(De,dt)|0,l=l+Math.imul(De,Ye)|0,l=l+Math.imul(Ee,dt)|0,T=T+Math.imul(Ee,Ye)|0,S=S+Math.imul(we,tt)|0,l=l+Math.imul(we,lt)|0,l=l+Math.imul(me,tt)|0,T=T+Math.imul(me,lt)|0;var wr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(wr>>>26)|0,wr&=67108863,S=Math.imul(Te,Ke),l=Math.imul(Te,xe),l=l+Math.imul(_e,Ke)|0,T=Math.imul(_e,xe),S=S+Math.imul(Pe,Je)|0,l=l+Math.imul(Pe,Oe)|0,l=l+Math.imul(pe,Je)|0,T=T+Math.imul(pe,Oe)|0,S=S+Math.imul(Se,Ge)|0,l=l+Math.imul(Se,Ce)|0,l=l+Math.imul(le,Ge)|0,T=T+Math.imul(le,Ce)|0,S=S+Math.imul(Me,$e)|0,l=l+Math.imul(Me,Re)|0,l=l+Math.imul(ge,$e)|0,T=T+Math.imul(ge,Re)|0,S=S+Math.imul(Ae,dt)|0,l=l+Math.imul(Ae,Ye)|0,l=l+Math.imul(de,dt)|0,T=T+Math.imul(de,Ye)|0,S=S+Math.imul(De,tt)|0,l=l+Math.imul(De,lt)|0,l=l+Math.imul(Ee,tt)|0,T=T+Math.imul(Ee,lt)|0;var Zt=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,S=Math.imul(Te,Je),l=Math.imul(Te,Oe),l=l+Math.imul(_e,Je)|0,T=Math.imul(_e,Oe),S=S+Math.imul(Pe,Ge)|0,l=l+Math.imul(Pe,Ce)|0,l=l+Math.imul(pe,Ge)|0,T=T+Math.imul(pe,Ce)|0,S=S+Math.imul(Se,$e)|0,l=l+Math.imul(Se,Re)|0,l=l+Math.imul(le,$e)|0,T=T+Math.imul(le,Re)|0,S=S+Math.imul(Me,dt)|0,l=l+Math.imul(Me,Ye)|0,l=l+Math.imul(ge,dt)|0,T=T+Math.imul(ge,Ye)|0,S=S+Math.imul(Ae,tt)|0,l=l+Math.imul(Ae,lt)|0,l=l+Math.imul(de,tt)|0,T=T+Math.imul(de,lt)|0;var Rr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,S=Math.imul(Te,Ge),l=Math.imul(Te,Ce),l=l+Math.imul(_e,Ge)|0,T=Math.imul(_e,Ce),S=S+Math.imul(Pe,$e)|0,l=l+Math.imul(Pe,Re)|0,l=l+Math.imul(pe,$e)|0,T=T+Math.imul(pe,Re)|0,S=S+Math.imul(Se,dt)|0,l=l+Math.imul(Se,Ye)|0,l=l+Math.imul(le,dt)|0,T=T+Math.imul(le,Ye)|0,S=S+Math.imul(Me,tt)|0,l=l+Math.imul(Me,lt)|0,l=l+Math.imul(ge,tt)|0,T=T+Math.imul(ge,lt)|0;var Tr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,S=Math.imul(Te,$e),l=Math.imul(Te,Re),l=l+Math.imul(_e,$e)|0,T=Math.imul(_e,Re),S=S+Math.imul(Pe,dt)|0,l=l+Math.imul(Pe,Ye)|0,l=l+Math.imul(pe,dt)|0,T=T+Math.imul(pe,Ye)|0,S=S+Math.imul(Se,tt)|0,l=l+Math.imul(Se,lt)|0,l=l+Math.imul(le,tt)|0,T=T+Math.imul(le,lt)|0;var Nr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,S=Math.imul(Te,dt),l=Math.imul(Te,Ye),l=l+Math.imul(_e,dt)|0,T=Math.imul(_e,Ye),S=S+Math.imul(Pe,tt)|0,l=l+Math.imul(Pe,lt)|0,l=l+Math.imul(pe,tt)|0,T=T+Math.imul(pe,lt)|0;var Ei=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,S=Math.imul(Te,tt),l=Math.imul(Te,lt),l=l+Math.imul(_e,tt)|0,T=Math.imul(_e,lt);var ai=(y+S|0)+((l&8191)<<13)|0;return y=(T+(l>>>13)|0)+(ai>>>26)|0,ai&=67108863,x[0]=xr,x[1]=Dr,x[2]=Ar,x[3]=Ir,x[4]=er,x[5]=cr,x[6]=Or,x[7]=ur,x[8]=Pr,x[9]=Cr,x[10]=hr,x[11]=_r,x[12]=wr,x[13]=Zt,x[14]=Rr,x[15]=Tr,x[16]=Nr,x[17]=Ei,x[18]=ai,y!==0&&(x[19]=y,b.length++),b};Math.imul||(P=z);function N(h,r,o){o.negative=r.negative^h.negative,o.length=h.length+r.length;for(var b=0,D=0,I=0;I<o.length-1;I++){var x=D;D=0;for(var y=b&67108863,S=Math.min(I,r.length-1),l=Math.max(0,I-h.length+1);l<=S;l++){var T=I-l,te=h.words[T]|0,ee=r.words[l]|0,ae=te*ee,Q=ae&67108863;x=x+(ae/67108864|0)|0,Q=Q+y|0,y=Q&67108863,x=x+(Q>>>26)|0,D+=x>>>26,x&=67108863}o.words[I]=y,b=x,x=D}return b!==0?o.words[I]=b:o.length--,o._strip()}function q(h,r,o){return N(h,r,o)}s.prototype.mulTo=function(r,o){var b,D=this.length+r.length;return this.length===10&&r.length===10?b=P(this,r,o):D<63?b=z(this,r,o):D<1024?b=N(this,r,o):b=q(this,r,o),b},s.prototype.mul=function(r){var o=new s(null);return o.words=new Array(this.length+r.length),this.mulTo(r,o)},s.prototype.mulf=function(r){var o=new s(null);return o.words=new Array(this.length+r.length),q(this,r,o)},s.prototype.imul=function(r){return this.clone().mulTo(r,this)},s.prototype.imuln=function(r){var o=r<0;o&&(r=-r),n(typeof r=="number"),n(r<67108864);for(var b=0,D=0;D<this.length;D++){var I=(this.words[D]|0)*r,x=(I&67108863)+(b&67108863);b>>=26,b+=I/67108864|0,b+=x>>>26,this.words[D]=x&67108863}return b!==0&&(this.words[D]=b,this.length++),o?this.ineg():this},s.prototype.muln=function(r){return this.clone().imuln(r)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(r){var o=B(r);if(o.length===0)return new s(1);for(var b=this,D=0;D<o.length&&o[D]===0;D++,b=b.sqr());if(++D<o.length)for(var I=b.sqr();D<o.length;D++,I=I.sqr())o[D]!==0&&(b=b.mul(I));return b},s.prototype.iushln=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26,D=67108863>>>26-o<<26-o,I;if(o!==0){var x=0;for(I=0;I<this.length;I++){var y=this.words[I]&D,S=(this.words[I]|0)-y<<o;this.words[I]=S|x,x=y>>>26-o}x&&(this.words[I]=x,this.length++)}if(b!==0){for(I=this.length-1;I>=0;I--)this.words[I+b]=this.words[I];for(I=0;I<b;I++)this.words[I]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(r){return n(this.negative===0),this.iushln(r)},s.prototype.iushrn=function(r,o,b){n(typeof r=="number"&&r>=0);var D;o?D=(o-o%26)/26:D=0;var I=r%26,x=Math.min((r-I)/26,this.length),y=67108863^67108863>>>I<<I,S=b;if(D-=x,D=Math.max(0,D),S){for(var l=0;l<x;l++)S.words[l]=this.words[l];S.length=x}if(x!==0)if(this.length>x)for(this.length-=x,l=0;l<this.length;l++)this.words[l]=this.words[l+x];else this.words[0]=0,this.length=1;var T=0;for(l=this.length-1;l>=0&&(T!==0||l>=D);l--){var te=this.words[l]|0;this.words[l]=T<<26-I|te>>>I,T=te&y}return S&&T!==0&&(S.words[S.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(r,o,b){return n(this.negative===0),this.iushrn(r,o,b)},s.prototype.shln=function(r){return this.clone().ishln(r)},s.prototype.ushln=function(r){return this.clone().iushln(r)},s.prototype.shrn=function(r){return this.clone().ishrn(r)},s.prototype.ushrn=function(r){return this.clone().iushrn(r)},s.prototype.testn=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26,D=1<<o;if(this.length<=b)return!1;var I=this.words[b];return!!(I&D)},s.prototype.imaskn=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(o!==0&&b++,this.length=Math.min(b,this.length),o!==0){var D=67108863^67108863>>>o<<o;this.words[this.length-1]&=D}return this._strip()},s.prototype.maskn=function(r){return this.clone().imaskn(r)},s.prototype.iaddn=function(r){return n(typeof r=="number"),n(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(this.words[0]|0)<=r?(this.words[0]=r-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},s.prototype._iaddn=function(r){this.words[0]+=r;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},s.prototype.isubn=function(r){if(n(typeof r=="number"),n(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this._strip()},s.prototype.addn=function(r){return this.clone().iaddn(r)},s.prototype.subn=function(r){return this.clone().isubn(r)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(r,o,b){var D=r.length+b,I;this._expand(D);var x,y=0;for(I=0;I<r.length;I++){x=(this.words[I+b]|0)+y;var S=(r.words[I]|0)*o;x-=S&67108863,y=(x>>26)-(S/67108864|0),this.words[I+b]=x&67108863}for(;I<this.length-b;I++)x=(this.words[I+b]|0)+y,y=x>>26,this.words[I+b]=x&67108863;if(y===0)return this._strip();for(n(y===-1),y=0,I=0;I<this.length;I++)x=-(this.words[I]|0)+y,y=x>>26,this.words[I]=x&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(r,o){var b=this.length-r.length,D=this.clone(),I=r,x=I.words[I.length-1]|0,y=this._countBits(x);b=26-y,b!==0&&(I=I.ushln(b),D.iushln(b),x=I.words[I.length-1]|0);var S=D.length-I.length,l;if(o!=="mod"){l=new s(null),l.length=S+1,l.words=new Array(l.length);for(var T=0;T<l.length;T++)l.words[T]=0}var te=D.clone()._ishlnsubmul(I,1,S);te.negative===0&&(D=te,l&&(l.words[S]=1));for(var ee=S-1;ee>=0;ee--){var ae=(D.words[I.length+ee]|0)*67108864+(D.words[I.length+ee-1]|0);for(ae=Math.min(ae/x|0,67108863),D._ishlnsubmul(I,ae,ee);D.negative!==0;)ae--,D.negative=0,D._ishlnsubmul(I,1,ee),D.isZero()||(D.negative^=1);l&&(l.words[ee]=ae)}return l&&l._strip(),D._strip(),o!=="div"&&b!==0&&D.iushrn(b),{div:l||null,mod:D}},s.prototype.divmod=function(r,o,b){if(n(!r.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var D,I,x;return this.negative!==0&&r.negative===0?(x=this.neg().divmod(r,o),o!=="mod"&&(D=x.div.neg()),o!=="div"&&(I=x.mod.neg(),b&&I.negative!==0&&I.iadd(r)),{div:D,mod:I}):this.negative===0&&r.negative!==0?(x=this.divmod(r.neg(),o),o!=="mod"&&(D=x.div.neg()),{div:D,mod:x.mod}):this.negative&r.negative?(x=this.neg().divmod(r.neg(),o),o!=="div"&&(I=x.mod.neg(),b&&I.negative!==0&&I.isub(r)),{div:x.div,mod:I}):r.length>this.length||this.cmp(r)<0?{div:new s(0),mod:this}:r.length===1?o==="div"?{div:this.divn(r.words[0]),mod:null}:o==="mod"?{div:null,mod:new s(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new s(this.modrn(r.words[0]))}:this._wordDiv(r,o)},s.prototype.div=function(r){return this.divmod(r,"div",!1).div},s.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},s.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},s.prototype.divRound=function(r){var o=this.divmod(r);if(o.mod.isZero())return o.div;var b=o.div.negative!==0?o.mod.isub(r):o.mod,D=r.ushrn(1),I=r.andln(1),x=b.cmp(D);return x<0||I===1&&x===0?o.div:o.div.negative!==0?o.div.isubn(1):o.div.iaddn(1)},s.prototype.modrn=function(r){var o=r<0;o&&(r=-r),n(r<=67108863);for(var b=(1<<26)%r,D=0,I=this.length-1;I>=0;I--)D=(b*D+(this.words[I]|0))%r;return o?-D:D},s.prototype.modn=function(r){return this.modrn(r)},s.prototype.idivn=function(r){var o=r<0;o&&(r=-r),n(r<=67108863);for(var b=0,D=this.length-1;D>=0;D--){var I=(this.words[D]|0)+b*67108864;this.words[D]=I/r|0,b=I%r}return this._strip(),o?this.ineg():this},s.prototype.divn=function(r){return this.clone().idivn(r)},s.prototype.egcd=function(r){n(r.negative===0),n(!r.isZero());var o=this,b=r.clone();o.negative!==0?o=o.umod(r):o=o.clone();for(var D=new s(1),I=new s(0),x=new s(0),y=new s(1),S=0;o.isEven()&&b.isEven();)o.iushrn(1),b.iushrn(1),++S;for(var l=b.clone(),T=o.clone();!o.isZero();){for(var te=0,ee=1;!(o.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(o.iushrn(te);te-- >0;)(D.isOdd()||I.isOdd())&&(D.iadd(l),I.isub(T)),D.iushrn(1),I.iushrn(1);for(var ae=0,Q=1;!(b.words[0]&Q)&&ae<26;++ae,Q<<=1);if(ae>0)for(b.iushrn(ae);ae-- >0;)(x.isOdd()||y.isOdd())&&(x.iadd(l),y.isub(T)),x.iushrn(1),y.iushrn(1);o.cmp(b)>=0?(o.isub(b),D.isub(x),I.isub(y)):(b.isub(o),x.isub(D),y.isub(I))}return{a:x,b:y,gcd:b.iushln(S)}},s.prototype._invmp=function(r){n(r.negative===0),n(!r.isZero());var o=this,b=r.clone();o.negative!==0?o=o.umod(r):o=o.clone();for(var D=new s(1),I=new s(0),x=b.clone();o.cmpn(1)>0&&b.cmpn(1)>0;){for(var y=0,S=1;!(o.words[0]&S)&&y<26;++y,S<<=1);if(y>0)for(o.iushrn(y);y-- >0;)D.isOdd()&&D.iadd(x),D.iushrn(1);for(var l=0,T=1;!(b.words[0]&T)&&l<26;++l,T<<=1);if(l>0)for(b.iushrn(l);l-- >0;)I.isOdd()&&I.iadd(x),I.iushrn(1);o.cmp(b)>=0?(o.isub(b),D.isub(I)):(b.isub(o),I.isub(D))}var te;return o.cmpn(1)===0?te=D:te=I,te.cmpn(0)<0&&te.iadd(r),te},s.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var o=this.clone(),b=r.clone();o.negative=0,b.negative=0;for(var D=0;o.isEven()&&b.isEven();D++)o.iushrn(1),b.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;b.isEven();)b.iushrn(1);var I=o.cmp(b);if(I<0){var x=o;o=b,b=x}else if(I===0||b.cmpn(1)===0)break;o.isub(b)}while(!0);return b.iushln(D)},s.prototype.invm=function(r){return this.egcd(r).a.umod(r)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(r){return this.words[0]&r},s.prototype.bincn=function(r){n(typeof r=="number");var o=r%26,b=(r-o)/26,D=1<<o;if(this.length<=b)return this._expand(b+1),this.words[b]|=D,this;for(var I=D,x=b;I!==0&&x<this.length;x++){var y=this.words[x]|0;y+=I,I=y>>>26,y&=67108863,this.words[x]=y}return I!==0&&(this.words[x]=I,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(r){var o=r<0;if(this.negative!==0&&!o)return-1;if(this.negative===0&&o)return 1;this._strip();var b;if(this.length>1)b=1;else{o&&(r=-r),n(r<=67108863,"Number is too big");var D=this.words[0]|0;b=D===r?0:D<r?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var o=this.ucmp(r);return this.negative!==0?-o|0:o},s.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var o=0,b=this.length-1;b>=0;b--){var D=this.words[b]|0,I=r.words[b]|0;if(D!==I){D<I?o=-1:D>I&&(o=1);break}}return o},s.prototype.gtn=function(r){return this.cmpn(r)===1},s.prototype.gt=function(r){return this.cmp(r)===1},s.prototype.gten=function(r){return this.cmpn(r)>=0},s.prototype.gte=function(r){return this.cmp(r)>=0},s.prototype.ltn=function(r){return this.cmpn(r)===-1},s.prototype.lt=function(r){return this.cmp(r)===-1},s.prototype.lten=function(r){return this.cmpn(r)<=0},s.prototype.lte=function(r){return this.cmp(r)<=0},s.prototype.eqn=function(r){return this.cmpn(r)===0},s.prototype.eq=function(r){return this.cmp(r)===0},s.red=function(r){return new C(r)},s.prototype.toRed=function(r){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(r){return this.red=r,this},s.prototype.forceRed=function(r){return n(!this.red,"Already a number in reduction context"),this._forceRed(r)},s.prototype.redAdd=function(r){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},s.prototype.redIAdd=function(r){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},s.prototype.redSub=function(r){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},s.prototype.redISub=function(r){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},s.prototype.redShl=function(r){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},s.prototype.redMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},s.prototype.redIMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(r){return n(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var k={k256:null,p224:null,p192:null,p25519:null};function F(h,r){this.name=h,this.p=new s(r,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var r=new s(null);return r.words=new Array(Math.ceil(this.n/13)),r},F.prototype.ireduce=function(r){var o=r,b;do this.split(o,this.tmp),o=this.imulK(o),o=o.iadd(this.tmp),b=o.bitLength();while(b>this.n);var D=b<this.n?-1:o.ucmp(this.p);return D===0?(o.words[0]=0,o.length=1):D>0?o.isub(this.p):o.strip!==void 0?o.strip():o._strip(),o},F.prototype.split=function(r,o){r.iushrn(this.n,0,o)},F.prototype.imulK=function(r){return r.imul(this.k)};function O(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(O,F),O.prototype.split=function(r,o){for(var b=4194303,D=Math.min(r.length,9),I=0;I<D;I++)o.words[I]=r.words[I];if(o.length=D,r.length<=9){r.words[0]=0,r.length=1;return}var x=r.words[9];for(o.words[o.length++]=x&b,I=10;I<r.length;I++){var y=r.words[I]|0;r.words[I-10]=(y&b)<<4|x>>>22,x=y}x>>>=22,r.words[I-10]=x,x===0&&r.length>10?r.length-=10:r.length-=9},O.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var o=0,b=0;b<r.length;b++){var D=r.words[b]|0;o+=D*977,r.words[b]=o&67108863,o=D*64+(o/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r};function j(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(j,F);function J(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(J,F);function L(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(L,F),L.prototype.imulK=function(r){for(var o=0,b=0;b<r.length;b++){var D=(r.words[b]|0)*19+o,I=D&67108863;D>>>=26,r.words[b]=I,o=D}return o!==0&&(r.words[r.length++]=o),r},s._prime=function(r){if(k[r])return k[r];var o;if(r==="k256")o=new O;else if(r==="p224")o=new j;else if(r==="p192")o=new J;else if(r==="p25519")o=new L;else throw new Error("Unknown prime "+r);return k[r]=o,o};function C(h){if(typeof h=="string"){var r=s._prime(h);this.m=r.p,this.prime=r}else n(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}C.prototype._verify1=function(r){n(r.negative===0,"red works only with positives"),n(r.red,"red works only with red numbers")},C.prototype._verify2=function(r,o){n((r.negative|o.negative)===0,"red works only with positives"),n(r.red&&r.red===o.red,"red works only with red numbers")},C.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(u(r,r.umod(this.m)._forceRed(this)),r)},C.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},C.prototype.add=function(r,o){this._verify2(r,o);var b=r.add(o);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},C.prototype.iadd=function(r,o){this._verify2(r,o);var b=r.iadd(o);return b.cmp(this.m)>=0&&b.isub(this.m),b},C.prototype.sub=function(r,o){this._verify2(r,o);var b=r.sub(o);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},C.prototype.isub=function(r,o){this._verify2(r,o);var b=r.isub(o);return b.cmpn(0)<0&&b.iadd(this.m),b},C.prototype.shl=function(r,o){return this._verify1(r),this.imod(r.ushln(o))},C.prototype.imul=function(r,o){return this._verify2(r,o),this.imod(r.imul(o))},C.prototype.mul=function(r,o){return this._verify2(r,o),this.imod(r.mul(o))},C.prototype.isqr=function(r){return this.imul(r,r.clone())},C.prototype.sqr=function(r){return this.mul(r,r)},C.prototype.sqrt=function(r){if(r.isZero())return r.clone();var o=this.m.andln(3);if(n(o%2===1),o===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(r,b)}for(var D=this.m.subn(1),I=0;!D.isZero()&&D.andln(1)===0;)I++,D.iushrn(1);n(!D.isZero());var x=new s(1).toRed(this),y=x.redNeg(),S=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,S).cmp(y)!==0;)l.redIAdd(y);for(var T=this.pow(l,D),te=this.pow(r,D.addn(1).iushrn(1)),ee=this.pow(r,D),ae=I;ee.cmp(x)!==0;){for(var Q=ee,X=0;Q.cmp(x)!==0;X++)Q=Q.redSqr();n(X<ae);var Y=this.pow(T,new s(1).iushln(ae-X-1));te=te.redMul(Y),T=Y.redSqr(),ee=ee.redMul(T),ae=X}return te},C.prototype.invm=function(r){var o=r._invmp(this.m);return o.negative!==0?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},C.prototype.pow=function(r,o){if(o.isZero())return new s(1).toRed(this);if(o.cmpn(1)===0)return r.clone();var b=4,D=new Array(1<<b);D[0]=new s(1).toRed(this),D[1]=r;for(var I=2;I<D.length;I++)D[I]=this.mul(D[I-1],r);var x=D[0],y=0,S=0,l=o.bitLength()%26;for(l===0&&(l=26),I=o.length-1;I>=0;I--){for(var T=o.words[I],te=l-1;te>=0;te--){var ee=T>>te&1;if(x!==D[0]&&(x=this.sqr(x)),ee===0&&y===0){S=0;continue}y<<=1,y|=ee,S++,!(S!==b&&(I!==0||te!==0))&&(x=this.mul(x,D[y]),S=0,y=0)}l=26}return x},C.prototype.convertTo=function(r){var o=r.umod(this.m);return o===r?o.clone():o},C.prototype.convertFrom=function(r){var o=r.clone();return o.red=null,o},s.mont=function(r){return new g(r)};function g(h){C.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(g,C),g.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},g.prototype.convertFrom=function(r){var o=this.imod(r.mul(this.rinv));return o.red=null,o},g.prototype.imul=function(r,o){if(r.isZero()||o.isZero())return r.words[0]=0,r.length=1,r;var b=r.imul(o),D=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(D).iushrn(this.shift),x=I;return I.cmp(this.m)>=0?x=I.isub(this.m):I.cmpn(0)<0&&(x=I.iadd(this.m)),x._forceRed(this)},g.prototype.mul=function(r,o){if(r.isZero()||o.isZero())return new s(0)._forceRed(this);var b=r.mul(o),D=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(D).iushrn(this.shift),x=I;return I.cmp(this.m)>=0?x=I.isub(this.m):I.cmpn(0)<0&&(x=I.iadd(this.m)),x._forceRed(this)},g.prototype.invm=function(r){var o=this.imod(r._invmp(this.m).mul(this.r2));return o._forceRed(this)}})(a,St)}(Eo)),Eo.exports}var Hc,c1;function Bh(){if(c1)return Hc;c1=1;var a=H5(),e=hs();function t(s){var m=n(s),v=m.toRed(a.mont(s.modulus)).redPow(new a(s.publicExponent)).fromRed();return{blinder:v,unblinder:m.invm(s.modulus)}}function n(s){var m=s.modulus.byteLength(),v;do v=new a(e(m));while(v.cmp(s.modulus)>=0||!v.umod(s.prime1)||!v.umod(s.prime2));return v}function c(s,m){var v=t(m),d=m.modulus.byteLength(),p=new a(s).mul(v.blinder).umod(m.modulus),u=p.toRed(a.mont(m.prime1)),_=p.toRed(a.mont(m.prime2)),w=m.coefficient,M=m.prime1,A=m.prime2,R=u.redPow(m.exponent1).fromRed(),B=_.redPow(m.exponent2).fromRed(),z=R.isub(B).imul(w).umod(M).imul(A);return B.iadd(z).imul(v.unblinder).umod(m.modulus).toArrayLike(Tt.Buffer,"be",d)}return c.getr=n,Hc=c,Hc}var Kc={};const K5="elliptic",V5="6.5.4",G5="EC cryptography",W5="lib/elliptic.js",Y5=["lib"],J5={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Z5={type:"git",url:"git@github.com:indutny/elliptic"},X5=["EC","Elliptic","curve","Cryptography"],Q5="Fedor Indutny <fedor@indutny.com>",e4="MIT",t4={url:"https://github.com/indutny/elliptic/issues"},r4="https://github.com/indutny/elliptic",i4={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},n4={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},s4={name:K5,version:V5,description:G5,main:W5,files:Y5,scripts:J5,repository:Z5,keywords:X5,author:Q5,license:e4,bugs:t4,homepage:r4,devDependencies:i4,dependencies:n4};var Vc={},Mo={exports:{}};Mo.exports;var u1;function Ji(){return u1||(u1=1,function(a){(function(e,t){function n(C,g){if(!C)throw new Error(g||"Assertion failed")}function c(C,g){C.super_=g;var h=function(){};h.prototype=g.prototype,C.prototype=new h,C.prototype.constructor=C}function s(C,g,h){if(s.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((g==="le"||g==="be")&&(h=g,g=10),this._init(C||0,g||10,h||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var m;try{typeof window<"u"&&typeof window.Buffer<"u"?m=window.Buffer:m=bh.Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,h){return g.cmp(h)>0?g:h},s.min=function(g,h){return g.cmp(h)<0?g:h},s.prototype._init=function(g,h,r){if(typeof g=="number")return this._initNumber(g,h,r);if(typeof g=="object")return this._initArray(g,h,r);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),g=g.toString().replace(/\s+/g,"");var o=0;g[0]==="-"&&(o++,this.negative=1),o<g.length&&(h===16?this._parseHex(g,o,r):(this._parseBase(g,h,o),r==="le"&&this._initArray(this.toArray(),h,r)))},s.prototype._initNumber=function(g,h,r){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(n(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),r==="le"&&this._initArray(this.toArray(),h,r)},s.prototype._initArray=function(g,h,r){if(n(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var b,D,I=0;if(r==="be")for(o=g.length-1,b=0;o>=0;o-=3)D=g[o]|g[o-1]<<8|g[o-2]<<16,this.words[b]|=D<<I&67108863,this.words[b+1]=D>>>26-I&67108863,I+=24,I>=26&&(I-=26,b++);else if(r==="le")for(o=0,b=0;o<g.length;o+=3)D=g[o]|g[o+1]<<8|g[o+2]<<16,this.words[b]|=D<<I&67108863,this.words[b+1]=D>>>26-I&67108863,I+=24,I>=26&&(I-=26,b++);return this.strip()};function v(C,g){var h=C.charCodeAt(g);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function d(C,g,h){var r=v(C,h);return h-1>=g&&(r|=v(C,h-1)<<4),r}s.prototype._parseHex=function(g,h,r){this.length=Math.ceil((g.length-h)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var b=0,D=0,I;if(r==="be")for(o=g.length-1;o>=h;o-=2)I=d(g,h,o)<<b,this.words[D]|=I&67108863,b>=18?(b-=18,D+=1,this.words[D]|=I>>>26):b+=8;else{var x=g.length-h;for(o=x%2===0?h+1:h;o<g.length;o+=2)I=d(g,h,o)<<b,this.words[D]|=I&67108863,b>=18?(b-=18,D+=1,this.words[D]|=I>>>26):b+=8}this.strip()};function p(C,g,h,r){for(var o=0,b=Math.min(C.length,h),D=g;D<b;D++){var I=C.charCodeAt(D)-48;o*=r,I>=49?o+=I-49+10:I>=17?o+=I-17+10:o+=I}return o}s.prototype._parseBase=function(g,h,r){this.words=[0],this.length=1;for(var o=0,b=1;b<=67108863;b*=h)o++;o--,b=b/h|0;for(var D=g.length-r,I=D%o,x=Math.min(D,D-I)+r,y=0,S=r;S<x;S+=o)y=p(g,S,S+o,h),this.imuln(b),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(I!==0){var l=1;for(y=p(g,S,g.length,h),S=0;S<I;S++)l*=h;this.imuln(l),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var h=0;h<this.length;h++)g.words[h]=this.words[h];g.length=this.length,g.negative=this.negative,g.red=this.red},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,h){g=g||10,h=h|0||1;var r;if(g===16||g==="hex"){r="";for(var o=0,b=0,D=0;D<this.length;D++){var I=this.words[D],x=((I<<o|b)&16777215).toString(16);b=I>>>24-o&16777215,b!==0||D!==this.length-1?r=u[6-x.length]+x+r:r=x+r,o+=2,o>=26&&(o-=26,D--)}for(b!==0&&(r=b.toString(16)+r);r.length%h!==0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}if(g===(g|0)&&g>=2&&g<=36){var y=_[g],S=w[g];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var T=l.modn(S).toString(g);l=l.idivn(S),l.isZero()?r=T+r:r=u[y-T.length]+T+r}for(this.isZero()&&(r="0"+r);r.length%h!==0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(g,h){return n(typeof m<"u"),this.toArrayLike(m,g,h)},s.prototype.toArray=function(g,h){return this.toArrayLike(Array,g,h)},s.prototype.toArrayLike=function(g,h,r){var o=this.byteLength(),b=r||Math.max(1,o);n(o<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var D=h==="le",I=new g(b),x,y,S=this.clone();if(D){for(y=0;!S.isZero();y++)x=S.andln(255),S.iushrn(8),I[y]=x;for(;y<b;y++)I[y]=0}else{for(y=0;y<b-o;y++)I[y]=0;for(y=0;!S.isZero();y++)x=S.andln(255),S.iushrn(8),I[b-y-1]=x}return I},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var h=g,r=0;return h>=4096&&(r+=13,h>>>=13),h>=64&&(r+=7,h>>>=7),h>=8&&(r+=4,h>>>=4),h>=2&&(r+=2,h>>>=2),r+h},s.prototype._zeroBits=function(g){if(g===0)return 26;var h=g,r=0;return h&8191||(r+=13,h>>>=13),h&127||(r+=7,h>>>=7),h&15||(r+=4,h>>>=4),h&3||(r+=2,h>>>=2),h&1||r++,r},s.prototype.bitLength=function(){var g=this.words[this.length-1],h=this._countBits(g);return(this.length-1)*26+h};function M(C){for(var g=new Array(C.bitLength()),h=0;h<g.length;h++){var r=h/26|0,o=h%26;g[h]=(C.words[r]&1<<o)>>>o}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,h=0;h<this.length;h++){var r=this._zeroBits(this.words[h]);if(g+=r,r!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var h=0;h<g.length;h++)this.words[h]=this.words[h]|g.words[h];return this.strip()},s.prototype.ior=function(g){return n((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var h;this.length>g.length?h=g:h=this;for(var r=0;r<h.length;r++)this.words[r]=this.words[r]&g.words[r];return this.length=h.length,this.strip()},s.prototype.iand=function(g){return n((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var h,r;this.length>g.length?(h=this,r=g):(h=g,r=this);for(var o=0;o<r.length;o++)this.words[o]=h.words[o]^r.words[o];if(this!==h)for(;o<h.length;o++)this.words[o]=h.words[o];return this.length=h.length,this.strip()},s.prototype.ixor=function(g){return n((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){n(typeof g=="number"&&g>=0);var h=Math.ceil(g/26)|0,r=g%26;this._expand(h),r>0&&h--;for(var o=0;o<h;o++)this.words[o]=~this.words[o]&67108863;return r>0&&(this.words[o]=~this.words[o]&67108863>>26-r),this.strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,h){n(typeof g=="number"&&g>=0);var r=g/26|0,o=g%26;return this._expand(r+1),h?this.words[r]=this.words[r]|1<<o:this.words[r]=this.words[r]&~(1<<o),this.strip()},s.prototype.iadd=function(g){var h;if(this.negative!==0&&g.negative===0)return this.negative=0,h=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,h=this.isub(g),g.negative=1,h._normSign();var r,o;this.length>g.length?(r=this,o=g):(r=g,o=this);for(var b=0,D=0;D<o.length;D++)h=(r.words[D]|0)+(o.words[D]|0)+b,this.words[D]=h&67108863,b=h>>>26;for(;b!==0&&D<r.length;D++)h=(r.words[D]|0)+b,this.words[D]=h&67108863,b=h>>>26;if(this.length=r.length,b!==0)this.words[this.length]=b,this.length++;else if(r!==this)for(;D<r.length;D++)this.words[D]=r.words[D];return this},s.prototype.add=function(g){var h;return g.negative!==0&&this.negative===0?(g.negative=0,h=this.sub(g),g.negative^=1,h):g.negative===0&&this.negative!==0?(this.negative=0,h=g.sub(this),this.negative=1,h):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var h=this.iadd(g);return g.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var r=this.cmp(g);if(r===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,b;r>0?(o=this,b=g):(o=g,b=this);for(var D=0,I=0;I<b.length;I++)h=(o.words[I]|0)-(b.words[I]|0)+D,D=h>>26,this.words[I]=h&67108863;for(;D!==0&&I<o.length;I++)h=(o.words[I]|0)+D,D=h>>26,this.words[I]=h&67108863;if(D===0&&I<o.length&&o!==this)for(;I<o.length;I++)this.words[I]=o.words[I];return this.length=Math.max(this.length,I),o!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function A(C,g,h){h.negative=g.negative^C.negative;var r=C.length+g.length|0;h.length=r,r=r-1|0;var o=C.words[0]|0,b=g.words[0]|0,D=o*b,I=D&67108863,x=D/67108864|0;h.words[0]=I;for(var y=1;y<r;y++){for(var S=x>>>26,l=x&67108863,T=Math.min(y,g.length-1),te=Math.max(0,y-C.length+1);te<=T;te++){var ee=y-te|0;o=C.words[ee]|0,b=g.words[te]|0,D=o*b+l,S+=D/67108864|0,l=D&67108863}h.words[y]=l|0,x=S|0}return x!==0?h.words[y]=x|0:h.length--,h.strip()}var R=function(g,h,r){var o=g.words,b=h.words,D=r.words,I=0,x,y,S,l=o[0]|0,T=l&8191,te=l>>>13,ee=o[1]|0,ae=ee&8191,Q=ee>>>13,X=o[2]|0,Y=X&8191,$=X>>>13,W=o[3]|0,oe=W&8191,ye=W>>>13,we=o[4]|0,me=we&8191,Ze=we>>>13,De=o[5]|0,Ee=De&8191,nt=De>>>13,Ae=o[6]|0,de=Ae&8191,ze=Ae>>>13,Me=o[7]|0,ge=Me&8191,Fe=Me>>>13,Se=o[8]|0,le=Se&8191,je=Se>>>13,Pe=o[9]|0,pe=Pe&8191,Xe=Pe>>>13,Te=b[0]|0,_e=Te&8191,Qe=Te>>>13,Ne=b[1]|0,Be=Ne&8191,wt=Ne>>>13,rt=b[2]|0,Ue=rt&8191,It=rt>>>13,it=b[3]|0,ke=it&8191,ct=it>>>13,He=b[4]|0,Ie=He&8191,ut=He>>>13,Ke=b[5]|0,xe=Ke&8191,pt=Ke>>>13,Je=b[6]|0,Oe=Je&8191,vt=Je>>>13,Ge=b[7]|0,Ce=Ge&8191,ht=Ge>>>13,$e=b[8]|0,Re=$e&8191,gt=$e>>>13,dt=b[9]|0,Ye=dt&8191,Ut=dt>>>13;r.negative=g.negative^h.negative,r.length=19,x=Math.imul(T,_e),y=Math.imul(T,Qe),y=y+Math.imul(te,_e)|0,S=Math.imul(te,Qe);var tt=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(tt>>>26)|0,tt&=67108863,x=Math.imul(ae,_e),y=Math.imul(ae,Qe),y=y+Math.imul(Q,_e)|0,S=Math.imul(Q,Qe),x=x+Math.imul(T,Be)|0,y=y+Math.imul(T,wt)|0,y=y+Math.imul(te,Be)|0,S=S+Math.imul(te,wt)|0;var lt=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(lt>>>26)|0,lt&=67108863,x=Math.imul(Y,_e),y=Math.imul(Y,Qe),y=y+Math.imul($,_e)|0,S=Math.imul($,Qe),x=x+Math.imul(ae,Be)|0,y=y+Math.imul(ae,wt)|0,y=y+Math.imul(Q,Be)|0,S=S+Math.imul(Q,wt)|0,x=x+Math.imul(T,Ue)|0,y=y+Math.imul(T,It)|0,y=y+Math.imul(te,Ue)|0,S=S+Math.imul(te,It)|0;var xr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(xr>>>26)|0,xr&=67108863,x=Math.imul(oe,_e),y=Math.imul(oe,Qe),y=y+Math.imul(ye,_e)|0,S=Math.imul(ye,Qe),x=x+Math.imul(Y,Be)|0,y=y+Math.imul(Y,wt)|0,y=y+Math.imul($,Be)|0,S=S+Math.imul($,wt)|0,x=x+Math.imul(ae,Ue)|0,y=y+Math.imul(ae,It)|0,y=y+Math.imul(Q,Ue)|0,S=S+Math.imul(Q,It)|0,x=x+Math.imul(T,ke)|0,y=y+Math.imul(T,ct)|0,y=y+Math.imul(te,ke)|0,S=S+Math.imul(te,ct)|0;var Dr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,x=Math.imul(me,_e),y=Math.imul(me,Qe),y=y+Math.imul(Ze,_e)|0,S=Math.imul(Ze,Qe),x=x+Math.imul(oe,Be)|0,y=y+Math.imul(oe,wt)|0,y=y+Math.imul(ye,Be)|0,S=S+Math.imul(ye,wt)|0,x=x+Math.imul(Y,Ue)|0,y=y+Math.imul(Y,It)|0,y=y+Math.imul($,Ue)|0,S=S+Math.imul($,It)|0,x=x+Math.imul(ae,ke)|0,y=y+Math.imul(ae,ct)|0,y=y+Math.imul(Q,ke)|0,S=S+Math.imul(Q,ct)|0,x=x+Math.imul(T,Ie)|0,y=y+Math.imul(T,ut)|0,y=y+Math.imul(te,Ie)|0,S=S+Math.imul(te,ut)|0;var Ar=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,x=Math.imul(Ee,_e),y=Math.imul(Ee,Qe),y=y+Math.imul(nt,_e)|0,S=Math.imul(nt,Qe),x=x+Math.imul(me,Be)|0,y=y+Math.imul(me,wt)|0,y=y+Math.imul(Ze,Be)|0,S=S+Math.imul(Ze,wt)|0,x=x+Math.imul(oe,Ue)|0,y=y+Math.imul(oe,It)|0,y=y+Math.imul(ye,Ue)|0,S=S+Math.imul(ye,It)|0,x=x+Math.imul(Y,ke)|0,y=y+Math.imul(Y,ct)|0,y=y+Math.imul($,ke)|0,S=S+Math.imul($,ct)|0,x=x+Math.imul(ae,Ie)|0,y=y+Math.imul(ae,ut)|0,y=y+Math.imul(Q,Ie)|0,S=S+Math.imul(Q,ut)|0,x=x+Math.imul(T,xe)|0,y=y+Math.imul(T,pt)|0,y=y+Math.imul(te,xe)|0,S=S+Math.imul(te,pt)|0;var Ir=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,x=Math.imul(de,_e),y=Math.imul(de,Qe),y=y+Math.imul(ze,_e)|0,S=Math.imul(ze,Qe),x=x+Math.imul(Ee,Be)|0,y=y+Math.imul(Ee,wt)|0,y=y+Math.imul(nt,Be)|0,S=S+Math.imul(nt,wt)|0,x=x+Math.imul(me,Ue)|0,y=y+Math.imul(me,It)|0,y=y+Math.imul(Ze,Ue)|0,S=S+Math.imul(Ze,It)|0,x=x+Math.imul(oe,ke)|0,y=y+Math.imul(oe,ct)|0,y=y+Math.imul(ye,ke)|0,S=S+Math.imul(ye,ct)|0,x=x+Math.imul(Y,Ie)|0,y=y+Math.imul(Y,ut)|0,y=y+Math.imul($,Ie)|0,S=S+Math.imul($,ut)|0,x=x+Math.imul(ae,xe)|0,y=y+Math.imul(ae,pt)|0,y=y+Math.imul(Q,xe)|0,S=S+Math.imul(Q,pt)|0,x=x+Math.imul(T,Oe)|0,y=y+Math.imul(T,vt)|0,y=y+Math.imul(te,Oe)|0,S=S+Math.imul(te,vt)|0;var er=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(er>>>26)|0,er&=67108863,x=Math.imul(ge,_e),y=Math.imul(ge,Qe),y=y+Math.imul(Fe,_e)|0,S=Math.imul(Fe,Qe),x=x+Math.imul(de,Be)|0,y=y+Math.imul(de,wt)|0,y=y+Math.imul(ze,Be)|0,S=S+Math.imul(ze,wt)|0,x=x+Math.imul(Ee,Ue)|0,y=y+Math.imul(Ee,It)|0,y=y+Math.imul(nt,Ue)|0,S=S+Math.imul(nt,It)|0,x=x+Math.imul(me,ke)|0,y=y+Math.imul(me,ct)|0,y=y+Math.imul(Ze,ke)|0,S=S+Math.imul(Ze,ct)|0,x=x+Math.imul(oe,Ie)|0,y=y+Math.imul(oe,ut)|0,y=y+Math.imul(ye,Ie)|0,S=S+Math.imul(ye,ut)|0,x=x+Math.imul(Y,xe)|0,y=y+Math.imul(Y,pt)|0,y=y+Math.imul($,xe)|0,S=S+Math.imul($,pt)|0,x=x+Math.imul(ae,Oe)|0,y=y+Math.imul(ae,vt)|0,y=y+Math.imul(Q,Oe)|0,S=S+Math.imul(Q,vt)|0,x=x+Math.imul(T,Ce)|0,y=y+Math.imul(T,ht)|0,y=y+Math.imul(te,Ce)|0,S=S+Math.imul(te,ht)|0;var cr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(cr>>>26)|0,cr&=67108863,x=Math.imul(le,_e),y=Math.imul(le,Qe),y=y+Math.imul(je,_e)|0,S=Math.imul(je,Qe),x=x+Math.imul(ge,Be)|0,y=y+Math.imul(ge,wt)|0,y=y+Math.imul(Fe,Be)|0,S=S+Math.imul(Fe,wt)|0,x=x+Math.imul(de,Ue)|0,y=y+Math.imul(de,It)|0,y=y+Math.imul(ze,Ue)|0,S=S+Math.imul(ze,It)|0,x=x+Math.imul(Ee,ke)|0,y=y+Math.imul(Ee,ct)|0,y=y+Math.imul(nt,ke)|0,S=S+Math.imul(nt,ct)|0,x=x+Math.imul(me,Ie)|0,y=y+Math.imul(me,ut)|0,y=y+Math.imul(Ze,Ie)|0,S=S+Math.imul(Ze,ut)|0,x=x+Math.imul(oe,xe)|0,y=y+Math.imul(oe,pt)|0,y=y+Math.imul(ye,xe)|0,S=S+Math.imul(ye,pt)|0,x=x+Math.imul(Y,Oe)|0,y=y+Math.imul(Y,vt)|0,y=y+Math.imul($,Oe)|0,S=S+Math.imul($,vt)|0,x=x+Math.imul(ae,Ce)|0,y=y+Math.imul(ae,ht)|0,y=y+Math.imul(Q,Ce)|0,S=S+Math.imul(Q,ht)|0,x=x+Math.imul(T,Re)|0,y=y+Math.imul(T,gt)|0,y=y+Math.imul(te,Re)|0,S=S+Math.imul(te,gt)|0;var Or=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Or>>>26)|0,Or&=67108863,x=Math.imul(pe,_e),y=Math.imul(pe,Qe),y=y+Math.imul(Xe,_e)|0,S=Math.imul(Xe,Qe),x=x+Math.imul(le,Be)|0,y=y+Math.imul(le,wt)|0,y=y+Math.imul(je,Be)|0,S=S+Math.imul(je,wt)|0,x=x+Math.imul(ge,Ue)|0,y=y+Math.imul(ge,It)|0,y=y+Math.imul(Fe,Ue)|0,S=S+Math.imul(Fe,It)|0,x=x+Math.imul(de,ke)|0,y=y+Math.imul(de,ct)|0,y=y+Math.imul(ze,ke)|0,S=S+Math.imul(ze,ct)|0,x=x+Math.imul(Ee,Ie)|0,y=y+Math.imul(Ee,ut)|0,y=y+Math.imul(nt,Ie)|0,S=S+Math.imul(nt,ut)|0,x=x+Math.imul(me,xe)|0,y=y+Math.imul(me,pt)|0,y=y+Math.imul(Ze,xe)|0,S=S+Math.imul(Ze,pt)|0,x=x+Math.imul(oe,Oe)|0,y=y+Math.imul(oe,vt)|0,y=y+Math.imul(ye,Oe)|0,S=S+Math.imul(ye,vt)|0,x=x+Math.imul(Y,Ce)|0,y=y+Math.imul(Y,ht)|0,y=y+Math.imul($,Ce)|0,S=S+Math.imul($,ht)|0,x=x+Math.imul(ae,Re)|0,y=y+Math.imul(ae,gt)|0,y=y+Math.imul(Q,Re)|0,S=S+Math.imul(Q,gt)|0,x=x+Math.imul(T,Ye)|0,y=y+Math.imul(T,Ut)|0,y=y+Math.imul(te,Ye)|0,S=S+Math.imul(te,Ut)|0;var ur=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(ur>>>26)|0,ur&=67108863,x=Math.imul(pe,Be),y=Math.imul(pe,wt),y=y+Math.imul(Xe,Be)|0,S=Math.imul(Xe,wt),x=x+Math.imul(le,Ue)|0,y=y+Math.imul(le,It)|0,y=y+Math.imul(je,Ue)|0,S=S+Math.imul(je,It)|0,x=x+Math.imul(ge,ke)|0,y=y+Math.imul(ge,ct)|0,y=y+Math.imul(Fe,ke)|0,S=S+Math.imul(Fe,ct)|0,x=x+Math.imul(de,Ie)|0,y=y+Math.imul(de,ut)|0,y=y+Math.imul(ze,Ie)|0,S=S+Math.imul(ze,ut)|0,x=x+Math.imul(Ee,xe)|0,y=y+Math.imul(Ee,pt)|0,y=y+Math.imul(nt,xe)|0,S=S+Math.imul(nt,pt)|0,x=x+Math.imul(me,Oe)|0,y=y+Math.imul(me,vt)|0,y=y+Math.imul(Ze,Oe)|0,S=S+Math.imul(Ze,vt)|0,x=x+Math.imul(oe,Ce)|0,y=y+Math.imul(oe,ht)|0,y=y+Math.imul(ye,Ce)|0,S=S+Math.imul(ye,ht)|0,x=x+Math.imul(Y,Re)|0,y=y+Math.imul(Y,gt)|0,y=y+Math.imul($,Re)|0,S=S+Math.imul($,gt)|0,x=x+Math.imul(ae,Ye)|0,y=y+Math.imul(ae,Ut)|0,y=y+Math.imul(Q,Ye)|0,S=S+Math.imul(Q,Ut)|0;var Pr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,x=Math.imul(pe,Ue),y=Math.imul(pe,It),y=y+Math.imul(Xe,Ue)|0,S=Math.imul(Xe,It),x=x+Math.imul(le,ke)|0,y=y+Math.imul(le,ct)|0,y=y+Math.imul(je,ke)|0,S=S+Math.imul(je,ct)|0,x=x+Math.imul(ge,Ie)|0,y=y+Math.imul(ge,ut)|0,y=y+Math.imul(Fe,Ie)|0,S=S+Math.imul(Fe,ut)|0,x=x+Math.imul(de,xe)|0,y=y+Math.imul(de,pt)|0,y=y+Math.imul(ze,xe)|0,S=S+Math.imul(ze,pt)|0,x=x+Math.imul(Ee,Oe)|0,y=y+Math.imul(Ee,vt)|0,y=y+Math.imul(nt,Oe)|0,S=S+Math.imul(nt,vt)|0,x=x+Math.imul(me,Ce)|0,y=y+Math.imul(me,ht)|0,y=y+Math.imul(Ze,Ce)|0,S=S+Math.imul(Ze,ht)|0,x=x+Math.imul(oe,Re)|0,y=y+Math.imul(oe,gt)|0,y=y+Math.imul(ye,Re)|0,S=S+Math.imul(ye,gt)|0,x=x+Math.imul(Y,Ye)|0,y=y+Math.imul(Y,Ut)|0,y=y+Math.imul($,Ye)|0,S=S+Math.imul($,Ut)|0;var Cr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,x=Math.imul(pe,ke),y=Math.imul(pe,ct),y=y+Math.imul(Xe,ke)|0,S=Math.imul(Xe,ct),x=x+Math.imul(le,Ie)|0,y=y+Math.imul(le,ut)|0,y=y+Math.imul(je,Ie)|0,S=S+Math.imul(je,ut)|0,x=x+Math.imul(ge,xe)|0,y=y+Math.imul(ge,pt)|0,y=y+Math.imul(Fe,xe)|0,S=S+Math.imul(Fe,pt)|0,x=x+Math.imul(de,Oe)|0,y=y+Math.imul(de,vt)|0,y=y+Math.imul(ze,Oe)|0,S=S+Math.imul(ze,vt)|0,x=x+Math.imul(Ee,Ce)|0,y=y+Math.imul(Ee,ht)|0,y=y+Math.imul(nt,Ce)|0,S=S+Math.imul(nt,ht)|0,x=x+Math.imul(me,Re)|0,y=y+Math.imul(me,gt)|0,y=y+Math.imul(Ze,Re)|0,S=S+Math.imul(Ze,gt)|0,x=x+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Ut)|0,y=y+Math.imul(ye,Ye)|0,S=S+Math.imul(ye,Ut)|0;var hr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(hr>>>26)|0,hr&=67108863,x=Math.imul(pe,Ie),y=Math.imul(pe,ut),y=y+Math.imul(Xe,Ie)|0,S=Math.imul(Xe,ut),x=x+Math.imul(le,xe)|0,y=y+Math.imul(le,pt)|0,y=y+Math.imul(je,xe)|0,S=S+Math.imul(je,pt)|0,x=x+Math.imul(ge,Oe)|0,y=y+Math.imul(ge,vt)|0,y=y+Math.imul(Fe,Oe)|0,S=S+Math.imul(Fe,vt)|0,x=x+Math.imul(de,Ce)|0,y=y+Math.imul(de,ht)|0,y=y+Math.imul(ze,Ce)|0,S=S+Math.imul(ze,ht)|0,x=x+Math.imul(Ee,Re)|0,y=y+Math.imul(Ee,gt)|0,y=y+Math.imul(nt,Re)|0,S=S+Math.imul(nt,gt)|0,x=x+Math.imul(me,Ye)|0,y=y+Math.imul(me,Ut)|0,y=y+Math.imul(Ze,Ye)|0,S=S+Math.imul(Ze,Ut)|0;var _r=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(_r>>>26)|0,_r&=67108863,x=Math.imul(pe,xe),y=Math.imul(pe,pt),y=y+Math.imul(Xe,xe)|0,S=Math.imul(Xe,pt),x=x+Math.imul(le,Oe)|0,y=y+Math.imul(le,vt)|0,y=y+Math.imul(je,Oe)|0,S=S+Math.imul(je,vt)|0,x=x+Math.imul(ge,Ce)|0,y=y+Math.imul(ge,ht)|0,y=y+Math.imul(Fe,Ce)|0,S=S+Math.imul(Fe,ht)|0,x=x+Math.imul(de,Re)|0,y=y+Math.imul(de,gt)|0,y=y+Math.imul(ze,Re)|0,S=S+Math.imul(ze,gt)|0,x=x+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Ut)|0,y=y+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Ut)|0;var wr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(wr>>>26)|0,wr&=67108863,x=Math.imul(pe,Oe),y=Math.imul(pe,vt),y=y+Math.imul(Xe,Oe)|0,S=Math.imul(Xe,vt),x=x+Math.imul(le,Ce)|0,y=y+Math.imul(le,ht)|0,y=y+Math.imul(je,Ce)|0,S=S+Math.imul(je,ht)|0,x=x+Math.imul(ge,Re)|0,y=y+Math.imul(ge,gt)|0,y=y+Math.imul(Fe,Re)|0,S=S+Math.imul(Fe,gt)|0,x=x+Math.imul(de,Ye)|0,y=y+Math.imul(de,Ut)|0,y=y+Math.imul(ze,Ye)|0,S=S+Math.imul(ze,Ut)|0;var Zt=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,x=Math.imul(pe,Ce),y=Math.imul(pe,ht),y=y+Math.imul(Xe,Ce)|0,S=Math.imul(Xe,ht),x=x+Math.imul(le,Re)|0,y=y+Math.imul(le,gt)|0,y=y+Math.imul(je,Re)|0,S=S+Math.imul(je,gt)|0,x=x+Math.imul(ge,Ye)|0,y=y+Math.imul(ge,Ut)|0,y=y+Math.imul(Fe,Ye)|0,S=S+Math.imul(Fe,Ut)|0;var Rr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x=Math.imul(pe,Re),y=Math.imul(pe,gt),y=y+Math.imul(Xe,Re)|0,S=Math.imul(Xe,gt),x=x+Math.imul(le,Ye)|0,y=y+Math.imul(le,Ut)|0,y=y+Math.imul(je,Ye)|0,S=S+Math.imul(je,Ut)|0;var Tr=(I+x|0)+((y&8191)<<13)|0;I=(S+(y>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,x=Math.imul(pe,Ye),y=Math.imul(pe,Ut),y=y+Math.imul(Xe,Ye)|0,S=Math.imul(Xe,Ut);var Nr=(I+x|0)+((y&8191)<<13)|0;return I=(S+(y>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,D[0]=tt,D[1]=lt,D[2]=xr,D[3]=Dr,D[4]=Ar,D[5]=Ir,D[6]=er,D[7]=cr,D[8]=Or,D[9]=ur,D[10]=Pr,D[11]=Cr,D[12]=hr,D[13]=_r,D[14]=wr,D[15]=Zt,D[16]=Rr,D[17]=Tr,D[18]=Nr,I!==0&&(D[19]=I,r.length++),r};Math.imul||(R=A);function B(C,g,h){h.negative=g.negative^C.negative,h.length=C.length+g.length;for(var r=0,o=0,b=0;b<h.length-1;b++){var D=o;o=0;for(var I=r&67108863,x=Math.min(b,g.length-1),y=Math.max(0,b-C.length+1);y<=x;y++){var S=b-y,l=C.words[S]|0,T=g.words[y]|0,te=l*T,ee=te&67108863;D=D+(te/67108864|0)|0,ee=ee+I|0,I=ee&67108863,D=D+(ee>>>26)|0,o+=D>>>26,D&=67108863}h.words[b]=I,r=D,D=o}return r!==0?h.words[b]=r:h.length--,h.strip()}function z(C,g,h){var r=new P;return r.mulp(C,g,h)}s.prototype.mulTo=function(g,h){var r,o=this.length+g.length;return this.length===10&&g.length===10?r=R(this,g,h):o<63?r=A(this,g,h):o<1024?r=B(this,g,h):r=z(this,g,h),r};function P(C,g){this.x=C,this.y=g}P.prototype.makeRBT=function(g){for(var h=new Array(g),r=s.prototype._countBits(g)-1,o=0;o<g;o++)h[o]=this.revBin(o,r,g);return h},P.prototype.revBin=function(g,h,r){if(g===0||g===r-1)return g;for(var o=0,b=0;b<h;b++)o|=(g&1)<<h-b-1,g>>=1;return o},P.prototype.permute=function(g,h,r,o,b,D){for(var I=0;I<D;I++)o[I]=h[g[I]],b[I]=r[g[I]]},P.prototype.transform=function(g,h,r,o,b,D){this.permute(D,g,h,r,o,b);for(var I=1;I<b;I<<=1)for(var x=I<<1,y=Math.cos(2*Math.PI/x),S=Math.sin(2*Math.PI/x),l=0;l<b;l+=x)for(var T=y,te=S,ee=0;ee<I;ee++){var ae=r[l+ee],Q=o[l+ee],X=r[l+ee+I],Y=o[l+ee+I],$=T*X-te*Y;Y=T*Y+te*X,X=$,r[l+ee]=ae+X,o[l+ee]=Q+Y,r[l+ee+I]=ae-X,o[l+ee+I]=Q-Y,ee!==x&&($=y*T-S*te,te=y*te+S*T,T=$)}},P.prototype.guessLen13b=function(g,h){var r=Math.max(h,g)|1,o=r&1,b=0;for(r=r/2|0;r;r=r>>>1)b++;return 1<<b+1+o},P.prototype.conjugate=function(g,h,r){if(!(r<=1))for(var o=0;o<r/2;o++){var b=g[o];g[o]=g[r-o-1],g[r-o-1]=b,b=h[o],h[o]=-h[r-o-1],h[r-o-1]=-b}},P.prototype.normalize13b=function(g,h){for(var r=0,o=0;o<h/2;o++){var b=Math.round(g[2*o+1]/h)*8192+Math.round(g[2*o]/h)+r;g[o]=b&67108863,b<67108864?r=0:r=b/67108864|0}return g},P.prototype.convert13b=function(g,h,r,o){for(var b=0,D=0;D<h;D++)b=b+(g[D]|0),r[2*D]=b&8191,b=b>>>13,r[2*D+1]=b&8191,b=b>>>13;for(D=2*h;D<o;++D)r[D]=0;n(b===0),n((b&-8192)===0)},P.prototype.stub=function(g){for(var h=new Array(g),r=0;r<g;r++)h[r]=0;return h},P.prototype.mulp=function(g,h,r){var o=2*this.guessLen13b(g.length,h.length),b=this.makeRBT(o),D=this.stub(o),I=new Array(o),x=new Array(o),y=new Array(o),S=new Array(o),l=new Array(o),T=new Array(o),te=r.words;te.length=o,this.convert13b(g.words,g.length,I,o),this.convert13b(h.words,h.length,S,o),this.transform(I,D,x,y,o,b),this.transform(S,D,l,T,o,b);for(var ee=0;ee<o;ee++){var ae=x[ee]*l[ee]-y[ee]*T[ee];y[ee]=x[ee]*T[ee]+y[ee]*l[ee],x[ee]=ae}return this.conjugate(x,y,o),this.transform(x,y,te,D,o,b),this.conjugate(te,D,o),this.normalize13b(te,o),r.negative=g.negative^h.negative,r.length=g.length+h.length,r.strip()},s.prototype.mul=function(g){var h=new s(null);return h.words=new Array(this.length+g.length),this.mulTo(g,h)},s.prototype.mulf=function(g){var h=new s(null);return h.words=new Array(this.length+g.length),z(this,g,h)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){n(typeof g=="number"),n(g<67108864);for(var h=0,r=0;r<this.length;r++){var o=(this.words[r]|0)*g,b=(o&67108863)+(h&67108863);h>>=26,h+=o/67108864|0,h+=b>>>26,this.words[r]=b&67108863}return h!==0&&(this.words[r]=h,this.length++),this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var h=M(g);if(h.length===0)return new s(1);for(var r=this,o=0;o<h.length&&h[o]===0;o++,r=r.sqr());if(++o<h.length)for(var b=r.sqr();o<h.length;o++,b=b.sqr())h[o]!==0&&(r=r.mul(b));return r},s.prototype.iushln=function(g){n(typeof g=="number"&&g>=0);var h=g%26,r=(g-h)/26,o=67108863>>>26-h<<26-h,b;if(h!==0){var D=0;for(b=0;b<this.length;b++){var I=this.words[b]&o,x=(this.words[b]|0)-I<<h;this.words[b]=x|D,D=I>>>26-h}D&&(this.words[b]=D,this.length++)}if(r!==0){for(b=this.length-1;b>=0;b--)this.words[b+r]=this.words[b];for(b=0;b<r;b++)this.words[b]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(g){return n(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,h,r){n(typeof g=="number"&&g>=0);var o;h?o=(h-h%26)/26:o=0;var b=g%26,D=Math.min((g-b)/26,this.length),I=67108863^67108863>>>b<<b,x=r;if(o-=D,o=Math.max(0,o),x){for(var y=0;y<D;y++)x.words[y]=this.words[y];x.length=D}if(D!==0)if(this.length>D)for(this.length-=D,y=0;y<this.length;y++)this.words[y]=this.words[y+D];else this.words[0]=0,this.length=1;var S=0;for(y=this.length-1;y>=0&&(S!==0||y>=o);y--){var l=this.words[y]|0;this.words[y]=S<<26-b|l>>>b,S=l&I}return x&&S!==0&&(x.words[x.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(g,h,r){return n(this.negative===0),this.iushrn(g,h,r)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){n(typeof g=="number"&&g>=0);var h=g%26,r=(g-h)/26,o=1<<h;if(this.length<=r)return!1;var b=this.words[r];return!!(b&o)},s.prototype.imaskn=function(g){n(typeof g=="number"&&g>=0);var h=g%26,r=(g-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=r)return this;if(h!==0&&r++,this.length=Math.min(r,this.length),h!==0){var o=67108863^67108863>>>h<<h;this.words[this.length-1]&=o}return this.strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return n(typeof g=="number"),n(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(g){if(n(typeof g=="number"),n(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,h,r){var o=g.length+r,b;this._expand(o);var D,I=0;for(b=0;b<g.length;b++){D=(this.words[b+r]|0)+I;var x=(g.words[b]|0)*h;D-=x&67108863,I=(D>>26)-(x/67108864|0),this.words[b+r]=D&67108863}for(;b<this.length-r;b++)D=(this.words[b+r]|0)+I,I=D>>26,this.words[b+r]=D&67108863;if(I===0)return this.strip();for(n(I===-1),I=0,b=0;b<this.length;b++)D=-(this.words[b]|0)+I,I=D>>26,this.words[b]=D&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(g,h){var r=this.length-g.length,o=this.clone(),b=g,D=b.words[b.length-1]|0,I=this._countBits(D);r=26-I,r!==0&&(b=b.ushln(r),o.iushln(r),D=b.words[b.length-1]|0);var x=o.length-b.length,y;if(h!=="mod"){y=new s(null),y.length=x+1,y.words=new Array(y.length);for(var S=0;S<y.length;S++)y.words[S]=0}var l=o.clone()._ishlnsubmul(b,1,x);l.negative===0&&(o=l,y&&(y.words[x]=1));for(var T=x-1;T>=0;T--){var te=(o.words[b.length+T]|0)*67108864+(o.words[b.length+T-1]|0);for(te=Math.min(te/D|0,67108863),o._ishlnsubmul(b,te,T);o.negative!==0;)te--,o.negative=0,o._ishlnsubmul(b,1,T),o.isZero()||(o.negative^=1);y&&(y.words[T]=te)}return y&&y.strip(),o.strip(),h!=="div"&&r!==0&&o.iushrn(r),{div:y||null,mod:o}},s.prototype.divmod=function(g,h,r){if(n(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var o,b,D;return this.negative!==0&&g.negative===0?(D=this.neg().divmod(g,h),h!=="mod"&&(o=D.div.neg()),h!=="div"&&(b=D.mod.neg(),r&&b.negative!==0&&b.iadd(g)),{div:o,mod:b}):this.negative===0&&g.negative!==0?(D=this.divmod(g.neg(),h),h!=="mod"&&(o=D.div.neg()),{div:o,mod:D.mod}):this.negative&g.negative?(D=this.neg().divmod(g.neg(),h),h!=="div"&&(b=D.mod.neg(),r&&b.negative!==0&&b.isub(g)),{div:D.div,mod:b}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?h==="div"?{div:this.divn(g.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modn(g.words[0]))}:this._wordDiv(g,h)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var h=this.divmod(g);if(h.mod.isZero())return h.div;var r=h.div.negative!==0?h.mod.isub(g):h.mod,o=g.ushrn(1),b=g.andln(1),D=r.cmp(o);return D<0||b===1&&D===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modn=function(g){n(g<=67108863);for(var h=(1<<26)%g,r=0,o=this.length-1;o>=0;o--)r=(h*r+(this.words[o]|0))%g;return r},s.prototype.idivn=function(g){n(g<=67108863);for(var h=0,r=this.length-1;r>=0;r--){var o=(this.words[r]|0)+h*67108864;this.words[r]=o/g|0,h=o%g}return this.strip()},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){n(g.negative===0),n(!g.isZero());var h=this,r=g.clone();h.negative!==0?h=h.umod(g):h=h.clone();for(var o=new s(1),b=new s(0),D=new s(0),I=new s(1),x=0;h.isEven()&&r.isEven();)h.iushrn(1),r.iushrn(1),++x;for(var y=r.clone(),S=h.clone();!h.isZero();){for(var l=0,T=1;!(h.words[0]&T)&&l<26;++l,T<<=1);if(l>0)for(h.iushrn(l);l-- >0;)(o.isOdd()||b.isOdd())&&(o.iadd(y),b.isub(S)),o.iushrn(1),b.iushrn(1);for(var te=0,ee=1;!(r.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(r.iushrn(te);te-- >0;)(D.isOdd()||I.isOdd())&&(D.iadd(y),I.isub(S)),D.iushrn(1),I.iushrn(1);h.cmp(r)>=0?(h.isub(r),o.isub(D),b.isub(I)):(r.isub(h),D.isub(o),I.isub(b))}return{a:D,b:I,gcd:r.iushln(x)}},s.prototype._invmp=function(g){n(g.negative===0),n(!g.isZero());var h=this,r=g.clone();h.negative!==0?h=h.umod(g):h=h.clone();for(var o=new s(1),b=new s(0),D=r.clone();h.cmpn(1)>0&&r.cmpn(1)>0;){for(var I=0,x=1;!(h.words[0]&x)&&I<26;++I,x<<=1);if(I>0)for(h.iushrn(I);I-- >0;)o.isOdd()&&o.iadd(D),o.iushrn(1);for(var y=0,S=1;!(r.words[0]&S)&&y<26;++y,S<<=1);if(y>0)for(r.iushrn(y);y-- >0;)b.isOdd()&&b.iadd(D),b.iushrn(1);h.cmp(r)>=0?(h.isub(r),o.isub(b)):(r.isub(h),b.isub(o))}var l;return h.cmpn(1)===0?l=o:l=b,l.cmpn(0)<0&&l.iadd(g),l},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var h=this.clone(),r=g.clone();h.negative=0,r.negative=0;for(var o=0;h.isEven()&&r.isEven();o++)h.iushrn(1),r.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;r.isEven();)r.iushrn(1);var b=h.cmp(r);if(b<0){var D=h;h=r,r=D}else if(b===0||r.cmpn(1)===0)break;h.isub(r)}while(!0);return r.iushln(o)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){n(typeof g=="number");var h=g%26,r=(g-h)/26,o=1<<h;if(this.length<=r)return this._expand(r+1),this.words[r]|=o,this;for(var b=o,D=r;b!==0&&D<this.length;D++){var I=this.words[D]|0;I+=b,b=I>>>26,I&=67108863,this.words[D]=I}return b!==0&&(this.words[D]=b,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var h=g<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var r;if(this.length>1)r=1;else{h&&(g=-g),n(g<=67108863,"Number is too big");var o=this.words[0]|0;r=o===g?0:o<g?-1:1}return this.negative!==0?-r|0:r},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var h=this.ucmp(g);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var h=0,r=this.length-1;r>=0;r--){var o=this.words[r]|0,b=g.words[r]|0;if(o!==b){o<b?h=-1:o>b&&(h=1);break}}return h},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new J(g)},s.prototype.toRed=function(g){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return n(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return n(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var N={k256:null,p224:null,p192:null,p25519:null};function q(C,g){this.name=C,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},q.prototype.ireduce=function(g){var h=g,r;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),r=h.bitLength();while(r>this.n);var o=r<this.n?-1:h.ucmp(this.p);return o===0?(h.words[0]=0,h.length=1):o>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},q.prototype.split=function(g,h){g.iushrn(this.n,0,h)},q.prototype.imulK=function(g){return g.imul(this.k)};function k(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(k,q),k.prototype.split=function(g,h){for(var r=4194303,o=Math.min(g.length,9),b=0;b<o;b++)h.words[b]=g.words[b];if(h.length=o,g.length<=9){g.words[0]=0,g.length=1;return}var D=g.words[9];for(h.words[h.length++]=D&r,b=10;b<g.length;b++){var I=g.words[b]|0;g.words[b-10]=(I&r)<<4|D>>>22,D=I}D>>>=22,g.words[b-10]=D,D===0&&g.length>10?g.length-=10:g.length-=9},k.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var h=0,r=0;r<g.length;r++){var o=g.words[r]|0;h+=o*977,g.words[r]=h&67108863,h=o*64+(h/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function F(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(F,q);function O(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(O,q);function j(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(j,q),j.prototype.imulK=function(g){for(var h=0,r=0;r<g.length;r++){var o=(g.words[r]|0)*19+h,b=o&67108863;o>>>=26,g.words[r]=b,h=o}return h!==0&&(g.words[g.length++]=h),g},s._prime=function(g){if(N[g])return N[g];var h;if(g==="k256")h=new k;else if(g==="p224")h=new F;else if(g==="p192")h=new O;else if(g==="p25519")h=new j;else throw new Error("Unknown prime "+g);return N[g]=h,h};function J(C){if(typeof C=="string"){var g=s._prime(C);this.m=g.p,this.prime=g}else n(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}J.prototype._verify1=function(g){n(g.negative===0,"red works only with positives"),n(g.red,"red works only with red numbers")},J.prototype._verify2=function(g,h){n((g.negative|h.negative)===0,"red works only with positives"),n(g.red&&g.red===h.red,"red works only with red numbers")},J.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},J.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},J.prototype.add=function(g,h){this._verify2(g,h);var r=g.add(h);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},J.prototype.iadd=function(g,h){this._verify2(g,h);var r=g.iadd(h);return r.cmp(this.m)>=0&&r.isub(this.m),r},J.prototype.sub=function(g,h){this._verify2(g,h);var r=g.sub(h);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},J.prototype.isub=function(g,h){this._verify2(g,h);var r=g.isub(h);return r.cmpn(0)<0&&r.iadd(this.m),r},J.prototype.shl=function(g,h){return this._verify1(g),this.imod(g.ushln(h))},J.prototype.imul=function(g,h){return this._verify2(g,h),this.imod(g.imul(h))},J.prototype.mul=function(g,h){return this._verify2(g,h),this.imod(g.mul(h))},J.prototype.isqr=function(g){return this.imul(g,g.clone())},J.prototype.sqr=function(g){return this.mul(g,g)},J.prototype.sqrt=function(g){if(g.isZero())return g.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var r=this.m.add(new s(1)).iushrn(2);return this.pow(g,r)}for(var o=this.m.subn(1),b=0;!o.isZero()&&o.andln(1)===0;)b++,o.iushrn(1);n(!o.isZero());var D=new s(1).toRed(this),I=D.redNeg(),x=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,x).cmp(I)!==0;)y.redIAdd(I);for(var S=this.pow(y,o),l=this.pow(g,o.addn(1).iushrn(1)),T=this.pow(g,o),te=b;T.cmp(D)!==0;){for(var ee=T,ae=0;ee.cmp(D)!==0;ae++)ee=ee.redSqr();n(ae<te);var Q=this.pow(S,new s(1).iushln(te-ae-1));l=l.redMul(Q),S=Q.redSqr(),T=T.redMul(S),te=ae}return l},J.prototype.invm=function(g){var h=g._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},J.prototype.pow=function(g,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return g.clone();var r=4,o=new Array(1<<r);o[0]=new s(1).toRed(this),o[1]=g;for(var b=2;b<o.length;b++)o[b]=this.mul(o[b-1],g);var D=o[0],I=0,x=0,y=h.bitLength()%26;for(y===0&&(y=26),b=h.length-1;b>=0;b--){for(var S=h.words[b],l=y-1;l>=0;l--){var T=S>>l&1;if(D!==o[0]&&(D=this.sqr(D)),T===0&&I===0){x=0;continue}I<<=1,I|=T,x++,!(x!==r&&(b!==0||l!==0))&&(D=this.mul(D,o[I]),x=0,I=0)}y=26}return D},J.prototype.convertTo=function(g){var h=g.umod(this.m);return h===g?h.clone():h},J.prototype.convertFrom=function(g){var h=g.clone();return h.red=null,h},s.mont=function(g){return new L(g)};function L(C){J.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(L,J),L.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},L.prototype.convertFrom=function(g){var h=this.imod(g.mul(this.rinv));return h.red=null,h},L.prototype.imul=function(g,h){if(g.isZero()||h.isZero())return g.words[0]=0,g.length=1,g;var r=g.imul(h),o=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=r.isub(o).iushrn(this.shift),D=b;return b.cmp(this.m)>=0?D=b.isub(this.m):b.cmpn(0)<0&&(D=b.iadd(this.m)),D._forceRed(this)},L.prototype.mul=function(g,h){if(g.isZero()||h.isZero())return new s(0)._forceRed(this);var r=g.mul(h),o=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=r.isub(o).iushrn(this.shift),D=b;return b.cmp(this.m)>=0?D=b.isub(this.m):b.cmpn(0)<0&&(D=b.iadd(this.m)),D._forceRed(this)},L.prototype.invm=function(g){var h=this.imod(g._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(a,St)}(Mo)),Mo.exports}var Gc={},h1;function ug(){return h1||(h1=1,function(a){var e=a;function t(s,m){if(Array.isArray(s))return s.slice();if(!s)return[];var v=[];if(typeof s!="string"){for(var d=0;d<s.length;d++)v[d]=s[d]|0;return v}if(m==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var d=0;d<s.length;d+=2)v.push(parseInt(s[d]+s[d+1],16))}else for(var d=0;d<s.length;d++){var p=s.charCodeAt(d),u=p>>8,_=p&255;u?v.push(u,_):v.push(_)}return v}e.toArray=t;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function c(s){for(var m="",v=0;v<s.length;v++)m+=n(s[v].toString(16));return m}e.toHex=c,e.encode=function(m,v){return v==="hex"?c(m):m}}(Gc)),Gc}var l1;function wi(){return l1||(l1=1,function(a){var e=a,t=Ji(),n=Bn,c=ug();e.assert=n,e.toArray=c.toArray,e.zero2=c.zero2,e.toHex=c.toHex,e.encode=c.encode;function s(u,_,w){var M=new Array(Math.max(u.bitLength(),w)+1);M.fill(0);for(var A=1<<_+1,R=u.clone(),B=0;B<M.length;B++){var z,P=R.andln(A-1);R.isOdd()?(P>(A>>1)-1?z=(A>>1)-P:z=P,R.isubn(z)):z=0,M[B]=z,R.iushrn(1)}return M}e.getNAF=s;function m(u,_){var w=[[],[]];u=u.clone(),_=_.clone();for(var M=0,A=0,R;u.cmpn(-M)>0||_.cmpn(-A)>0;){var B=u.andln(3)+M&3,z=_.andln(3)+A&3;B===3&&(B=-1),z===3&&(z=-1);var P;B&1?(R=u.andln(7)+M&7,(R===3||R===5)&&z===2?P=-B:P=B):P=0,w[0].push(P);var N;z&1?(R=_.andln(7)+A&7,(R===3||R===5)&&B===2?N=-z:N=z):N=0,w[1].push(N),2*M===P+1&&(M=1-M),2*A===N+1&&(A=1-A),u.iushrn(1),_.iushrn(1)}return w}e.getJSF=m;function v(u,_,w){var M="_"+_;u.prototype[_]=function(){return this[M]!==void 0?this[M]:this[M]=w.call(this)}}e.cachedProperty=v;function d(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=d;function p(u){return new t(u,"hex","le")}e.intFromLE=p}(Vc)),Vc}var Wc={},Yc,d1;function ko(){if(d1)return Yc;d1=1;var a=Ji(),e=wi(),t=e.getNAF,n=e.getJSF,c=e.assert;function s(v,d){this.type=v,this.p=new a(d.p,16),this.red=d.prime?a.red(d.prime):a.mont(this.p),this.zero=new a(0).toRed(this.red),this.one=new a(1).toRed(this.red),this.two=new a(2).toRed(this.red),this.n=d.n&&new a(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Yc=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(d,p){c(d.precomputed);var u=d._getDoubles(),_=t(p,1,this._bitLength),w=(1<<u.step+1)-(u.step%2===0?2:1);w/=3;var M=[],A,R;for(A=0;A<_.length;A+=u.step){R=0;for(var B=A+u.step-1;B>=A;B--)R=(R<<1)+_[B];M.push(R)}for(var z=this.jpoint(null,null,null),P=this.jpoint(null,null,null),N=w;N>0;N--){for(A=0;A<M.length;A++)R=M[A],R===N?P=P.mixedAdd(u.points[A]):R===-N&&(P=P.mixedAdd(u.points[A].neg()));z=z.add(P)}return z.toP()},s.prototype._wnafMul=function(d,p){var u=4,_=d._getNAFPoints(u);u=_.wnd;for(var w=_.points,M=t(p,u,this._bitLength),A=this.jpoint(null,null,null),R=M.length-1;R>=0;R--){for(var B=0;R>=0&&M[R]===0;R--)B++;if(R>=0&&B++,A=A.dblp(B),R<0)break;var z=M[R];c(z!==0),d.type==="affine"?z>0?A=A.mixedAdd(w[z-1>>1]):A=A.mixedAdd(w[-z-1>>1].neg()):z>0?A=A.add(w[z-1>>1]):A=A.add(w[-z-1>>1].neg())}return d.type==="affine"?A.toP():A},s.prototype._wnafMulAdd=function(d,p,u,_,w){var M=this._wnafT1,A=this._wnafT2,R=this._wnafT3,B=0,z,P,N;for(z=0;z<_;z++){N=p[z];var q=N._getNAFPoints(d);M[z]=q.wnd,A[z]=q.points}for(z=_-1;z>=1;z-=2){var k=z-1,F=z;if(M[k]!==1||M[F]!==1){R[k]=t(u[k],M[k],this._bitLength),R[F]=t(u[F],M[F],this._bitLength),B=Math.max(R[k].length,B),B=Math.max(R[F].length,B);continue}var O=[p[k],null,null,p[F]];p[k].y.cmp(p[F].y)===0?(O[1]=p[k].add(p[F]),O[2]=p[k].toJ().mixedAdd(p[F].neg())):p[k].y.cmp(p[F].y.redNeg())===0?(O[1]=p[k].toJ().mixedAdd(p[F]),O[2]=p[k].add(p[F].neg())):(O[1]=p[k].toJ().mixedAdd(p[F]),O[2]=p[k].toJ().mixedAdd(p[F].neg()));var j=[-3,-1,-5,-7,0,7,5,1,3],J=n(u[k],u[F]);for(B=Math.max(J[0].length,B),R[k]=new Array(B),R[F]=new Array(B),P=0;P<B;P++){var L=J[0][P]|0,C=J[1][P]|0;R[k][P]=j[(L+1)*3+(C+1)],R[F][P]=0,A[k]=O}}var g=this.jpoint(null,null,null),h=this._wnafT4;for(z=B;z>=0;z--){for(var r=0;z>=0;){var o=!0;for(P=0;P<_;P++)h[P]=R[P][z]|0,h[P]!==0&&(o=!1);if(!o)break;r++,z--}if(z>=0&&r++,g=g.dblp(r),z<0)break;for(P=0;P<_;P++){var b=h[P];b!==0&&(b>0?N=A[P][b-1>>1]:b<0&&(N=A[P][-b-1>>1].neg()),N.type==="affine"?g=g.mixedAdd(N):g=g.add(N))}}for(z=0;z<_;z++)A[z]=null;return w?g:g.toP()};function m(v,d){this.curve=v,this.type=d,this.precomputed=null}return s.BasePoint=m,m.prototype.eq=function(){throw new Error("Not implemented")},m.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(d,p){d=e.toArray(d,p);var u=this.p.byteLength();if((d[0]===4||d[0]===6||d[0]===7)&&d.length-1===2*u){d[0]===6?c(d[d.length-1]%2===0):d[0]===7&&c(d[d.length-1]%2===1);var _=this.point(d.slice(1,1+u),d.slice(1+u,1+2*u));return _}else if((d[0]===2||d[0]===3)&&d.length-1===u)return this.pointFromX(d.slice(1,1+u),d[0]===3);throw new Error("Unknown point format")},m.prototype.encodeCompressed=function(d){return this.encode(d,!0)},m.prototype._encode=function(d){var p=this.curve.p.byteLength(),u=this.getX().toArray("be",p);return d?[this.getY().isEven()?2:3].concat(u):[4].concat(u,this.getY().toArray("be",p))},m.prototype.encode=function(d,p){return e.encode(this._encode(p),d)},m.prototype.precompute=function(d){if(this.precomputed)return this;var p={doubles:null,naf:null,beta:null};return p.naf=this._getNAFPoints(8),p.doubles=this._getDoubles(4,d),p.beta=this._getBeta(),this.precomputed=p,this},m.prototype._hasDoubles=function(d){if(!this.precomputed)return!1;var p=this.precomputed.doubles;return p?p.points.length>=Math.ceil((d.bitLength()+1)/p.step):!1},m.prototype._getDoubles=function(d,p){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],_=this,w=0;w<p;w+=d){for(var M=0;M<d;M++)_=_.dbl();u.push(_)}return{step:d,points:u}},m.prototype._getNAFPoints=function(d){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var p=[this],u=(1<<d)-1,_=u===1?null:this.dbl(),w=1;w<u;w++)p[w]=p[w-1].add(_);return{wnd:d,points:p}},m.prototype._getBeta=function(){return null},m.prototype.dblp=function(d){for(var p=this,u=0;u<d;u++)p=p.dbl();return p},Yc}var Jc,p1;function a4(){if(p1)return Jc;p1=1;var a=wi(),e=Ji(),t=Ht,n=ko(),c=a.assert;function s(d){n.call(this,"short",d),this.a=new e(d.a,16).toRed(this.red),this.b=new e(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t(s,n),Jc=s,s.prototype._getEndomorphism=function(p){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var u,_;if(p.beta)u=new e(p.beta,16).toRed(this.red);else{var w=this._getEndoRoots(this.p);u=w[0].cmp(w[1])<0?w[0]:w[1],u=u.toRed(this.red)}if(p.lambda)_=new e(p.lambda,16);else{var M=this._getEndoRoots(this.n);this.g.mul(M[0]).x.cmp(this.g.x.redMul(u))===0?_=M[0]:(_=M[1],c(this.g.mul(_).x.cmp(this.g.x.redMul(u))===0))}var A;return p.basis?A=p.basis.map(function(R){return{a:new e(R.a,16),b:new e(R.b,16)}}):A=this._getEndoBasis(_),{beta:u,lambda:_,basis:A}}},s.prototype._getEndoRoots=function(p){var u=p===this.p?this.red:e.mont(p),_=new e(2).toRed(u).redInvm(),w=_.redNeg(),M=new e(3).toRed(u).redNeg().redSqrt().redMul(_),A=w.redAdd(M).fromRed(),R=w.redSub(M).fromRed();return[A,R]},s.prototype._getEndoBasis=function(p){for(var u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),_=p,w=this.n.clone(),M=new e(1),A=new e(0),R=new e(0),B=new e(1),z,P,N,q,k,F,O,j=0,J,L;_.cmpn(0)!==0;){var C=w.div(_);J=w.sub(C.mul(_)),L=R.sub(C.mul(M));var g=B.sub(C.mul(A));if(!N&&J.cmp(u)<0)z=O.neg(),P=M,N=J.neg(),q=L;else if(N&&++j===2)break;O=J,w=_,_=J,R=M,M=L,B=A,A=g}k=J.neg(),F=L;var h=N.sqr().add(q.sqr()),r=k.sqr().add(F.sqr());return r.cmp(h)>=0&&(k=z,F=P),N.negative&&(N=N.neg(),q=q.neg()),k.negative&&(k=k.neg(),F=F.neg()),[{a:N,b:q},{a:k,b:F}]},s.prototype._endoSplit=function(p){var u=this.endo.basis,_=u[0],w=u[1],M=w.b.mul(p).divRound(this.n),A=_.b.neg().mul(p).divRound(this.n),R=M.mul(_.a),B=A.mul(w.a),z=M.mul(_.b),P=A.mul(w.b),N=p.sub(R).sub(B),q=z.add(P).neg();return{k1:N,k2:q}},s.prototype.pointFromX=function(p,u){p=new e(p,16),p.red||(p=p.toRed(this.red));var _=p.redSqr().redMul(p).redIAdd(p.redMul(this.a)).redIAdd(this.b),w=_.redSqrt();if(w.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var M=w.fromRed().isOdd();return(u&&!M||!u&&M)&&(w=w.redNeg()),this.point(p,w)},s.prototype.validate=function(p){if(p.inf)return!0;var u=p.x,_=p.y,w=this.a.redMul(u),M=u.redSqr().redMul(u).redIAdd(w).redIAdd(this.b);return _.redSqr().redISub(M).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(p,u,_){for(var w=this._endoWnafT1,M=this._endoWnafT2,A=0;A<p.length;A++){var R=this._endoSplit(u[A]),B=p[A],z=B._getBeta();R.k1.negative&&(R.k1.ineg(),B=B.neg(!0)),R.k2.negative&&(R.k2.ineg(),z=z.neg(!0)),w[A*2]=B,w[A*2+1]=z,M[A*2]=R.k1,M[A*2+1]=R.k2}for(var P=this._wnafMulAdd(1,w,M,A*2,_),N=0;N<A*2;N++)w[N]=null,M[N]=null;return P};function m(d,p,u,_){n.BasePoint.call(this,d,"affine"),p===null&&u===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(p,16),this.y=new e(u,16),_&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t(m,n.BasePoint),s.prototype.point=function(p,u,_){return new m(this,p,u,_)},s.prototype.pointFromJSON=function(p,u){return m.fromJSON(this,p,u)},m.prototype._getBeta=function(){if(this.curve.endo){var p=this.precomputed;if(p&&p.beta)return p.beta;var u=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(p){var _=this.curve,w=function(M){return _.point(M.x.redMul(_.endo.beta),M.y)};p.beta=u,u.precomputed={beta:null,naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(w)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(w)}}}return u}},m.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},m.fromJSON=function(p,u,_){typeof u=="string"&&(u=JSON.parse(u));var w=p.point(u[0],u[1],_);if(!u[2])return w;function M(R){return p.point(R[0],R[1],_)}var A=u[2];return w.precomputed={beta:null,doubles:A.doubles&&{step:A.doubles.step,points:[w].concat(A.doubles.points.map(M))},naf:A.naf&&{wnd:A.naf.wnd,points:[w].concat(A.naf.points.map(M))}},w},m.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},m.prototype.isInfinity=function(){return this.inf},m.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var u=this.y.redSub(p.y);u.cmpn(0)!==0&&(u=u.redMul(this.x.redSub(p.x).redInvm()));var _=u.redSqr().redISub(this.x).redISub(p.x),w=u.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,w)},m.prototype.dbl=function(){if(this.inf)return this;var p=this.y.redAdd(this.y);if(p.cmpn(0)===0)return this.curve.point(null,null);var u=this.curve.a,_=this.x.redSqr(),w=p.redInvm(),M=_.redAdd(_).redIAdd(_).redIAdd(u).redMul(w),A=M.redSqr().redISub(this.x.redAdd(this.x)),R=M.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,R)},m.prototype.getX=function(){return this.x.fromRed()},m.prototype.getY=function(){return this.y.fromRed()},m.prototype.mul=function(p){return p=new e(p,16),this.isInfinity()?this:this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve.endo?this.curve._endoWnafMulAdd([this],[p]):this.curve._wnafMul(this,p)},m.prototype.mulAdd=function(p,u,_){var w=[this,u],M=[p,_];return this.curve.endo?this.curve._endoWnafMulAdd(w,M):this.curve._wnafMulAdd(1,w,M,2)},m.prototype.jmulAdd=function(p,u,_){var w=[this,u],M=[p,_];return this.curve.endo?this.curve._endoWnafMulAdd(w,M,!0):this.curve._wnafMulAdd(1,w,M,2,!0)},m.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)},m.prototype.neg=function(p){if(this.inf)return this;var u=this.curve.point(this.x,this.y.redNeg());if(p&&this.precomputed){var _=this.precomputed,w=function(M){return M.neg()};u.precomputed={naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(w)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(w)}}}return u},m.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var p=this.curve.jpoint(this.x,this.y,this.curve.one);return p};function v(d,p,u,_){n.BasePoint.call(this,d,"jacobian"),p===null&&u===null&&_===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(p,16),this.y=new e(u,16),this.z=new e(_,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return t(v,n.BasePoint),s.prototype.jpoint=function(p,u,_){return new v(this,p,u,_)},v.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var p=this.z.redInvm(),u=p.redSqr(),_=this.x.redMul(u),w=this.y.redMul(u).redMul(p);return this.curve.point(_,w)},v.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},v.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var u=p.z.redSqr(),_=this.z.redSqr(),w=this.x.redMul(u),M=p.x.redMul(_),A=this.y.redMul(u.redMul(p.z)),R=p.y.redMul(_.redMul(this.z)),B=w.redSub(M),z=A.redSub(R);if(B.cmpn(0)===0)return z.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var P=B.redSqr(),N=P.redMul(B),q=w.redMul(P),k=z.redSqr().redIAdd(N).redISub(q).redISub(q),F=z.redMul(q.redISub(k)).redISub(A.redMul(N)),O=this.z.redMul(p.z).redMul(B);return this.curve.jpoint(k,F,O)},v.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var u=this.z.redSqr(),_=this.x,w=p.x.redMul(u),M=this.y,A=p.y.redMul(u).redMul(this.z),R=_.redSub(w),B=M.redSub(A);if(R.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var z=R.redSqr(),P=z.redMul(R),N=_.redMul(z),q=B.redSqr().redIAdd(P).redISub(N).redISub(N),k=B.redMul(N.redISub(q)).redISub(M.redMul(P)),F=this.z.redMul(R);return this.curve.jpoint(q,k,F)},v.prototype.dblp=function(p){if(p===0)return this;if(this.isInfinity())return this;if(!p)return this.dbl();var u;if(this.curve.zeroA||this.curve.threeA){var _=this;for(u=0;u<p;u++)_=_.dbl();return _}var w=this.curve.a,M=this.curve.tinv,A=this.x,R=this.y,B=this.z,z=B.redSqr().redSqr(),P=R.redAdd(R);for(u=0;u<p;u++){var N=A.redSqr(),q=P.redSqr(),k=q.redSqr(),F=N.redAdd(N).redIAdd(N).redIAdd(w.redMul(z)),O=A.redMul(q),j=F.redSqr().redISub(O.redAdd(O)),J=O.redISub(j),L=F.redMul(J);L=L.redIAdd(L).redISub(k);var C=P.redMul(B);u+1<p&&(z=z.redMul(k)),A=j,B=C,P=L}return this.curve.jpoint(A,P.redMul(M),B)},v.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},v.prototype._zeroDbl=function(){var p,u,_;if(this.zOne){var w=this.x.redSqr(),M=this.y.redSqr(),A=M.redSqr(),R=this.x.redAdd(M).redSqr().redISub(w).redISub(A);R=R.redIAdd(R);var B=w.redAdd(w).redIAdd(w),z=B.redSqr().redISub(R).redISub(R),P=A.redIAdd(A);P=P.redIAdd(P),P=P.redIAdd(P),p=z,u=B.redMul(R.redISub(z)).redISub(P),_=this.y.redAdd(this.y)}else{var N=this.x.redSqr(),q=this.y.redSqr(),k=q.redSqr(),F=this.x.redAdd(q).redSqr().redISub(N).redISub(k);F=F.redIAdd(F);var O=N.redAdd(N).redIAdd(N),j=O.redSqr(),J=k.redIAdd(k);J=J.redIAdd(J),J=J.redIAdd(J),p=j.redISub(F).redISub(F),u=O.redMul(F.redISub(p)).redISub(J),_=this.y.redMul(this.z),_=_.redIAdd(_)}return this.curve.jpoint(p,u,_)},v.prototype._threeDbl=function(){var p,u,_;if(this.zOne){var w=this.x.redSqr(),M=this.y.redSqr(),A=M.redSqr(),R=this.x.redAdd(M).redSqr().redISub(w).redISub(A);R=R.redIAdd(R);var B=w.redAdd(w).redIAdd(w).redIAdd(this.curve.a),z=B.redSqr().redISub(R).redISub(R);p=z;var P=A.redIAdd(A);P=P.redIAdd(P),P=P.redIAdd(P),u=B.redMul(R.redISub(z)).redISub(P),_=this.y.redAdd(this.y)}else{var N=this.z.redSqr(),q=this.y.redSqr(),k=this.x.redMul(q),F=this.x.redSub(N).redMul(this.x.redAdd(N));F=F.redAdd(F).redIAdd(F);var O=k.redIAdd(k);O=O.redIAdd(O);var j=O.redAdd(O);p=F.redSqr().redISub(j),_=this.y.redAdd(this.z).redSqr().redISub(q).redISub(N);var J=q.redSqr();J=J.redIAdd(J),J=J.redIAdd(J),J=J.redIAdd(J),u=F.redMul(O.redISub(p)).redISub(J)}return this.curve.jpoint(p,u,_)},v.prototype._dbl=function(){var p=this.curve.a,u=this.x,_=this.y,w=this.z,M=w.redSqr().redSqr(),A=u.redSqr(),R=_.redSqr(),B=A.redAdd(A).redIAdd(A).redIAdd(p.redMul(M)),z=u.redAdd(u);z=z.redIAdd(z);var P=z.redMul(R),N=B.redSqr().redISub(P.redAdd(P)),q=P.redISub(N),k=R.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var F=B.redMul(q).redISub(k),O=_.redAdd(_).redMul(w);return this.curve.jpoint(N,F,O)},v.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var p=this.x.redSqr(),u=this.y.redSqr(),_=this.z.redSqr(),w=u.redSqr(),M=p.redAdd(p).redIAdd(p),A=M.redSqr(),R=this.x.redAdd(u).redSqr().redISub(p).redISub(w);R=R.redIAdd(R),R=R.redAdd(R).redIAdd(R),R=R.redISub(A);var B=R.redSqr(),z=w.redIAdd(w);z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z);var P=M.redIAdd(R).redSqr().redISub(A).redISub(B).redISub(z),N=u.redMul(P);N=N.redIAdd(N),N=N.redIAdd(N);var q=this.x.redMul(B).redISub(N);q=q.redIAdd(q),q=q.redIAdd(q);var k=this.y.redMul(P.redMul(z.redISub(P)).redISub(R.redMul(B)));k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var F=this.z.redAdd(R).redSqr().redISub(_).redISub(B);return this.curve.jpoint(q,k,F)},v.prototype.mul=function(p,u){return p=new e(p,u),this.curve._wnafMul(this,p)},v.prototype.eq=function(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return!0;var u=this.z.redSqr(),_=p.z.redSqr();if(this.x.redMul(_).redISub(p.x.redMul(u)).cmpn(0)!==0)return!1;var w=u.redMul(this.z),M=_.redMul(p.z);return this.y.redMul(M).redISub(p.y.redMul(w)).cmpn(0)===0},v.prototype.eqXToP=function(p){var u=this.z.redSqr(),_=p.toRed(this.curve.red).redMul(u);if(this.x.cmp(_)===0)return!0;for(var w=p.clone(),M=this.curve.redN.redMul(u);;){if(w.iadd(this.curve.n),w.cmp(this.curve.p)>=0)return!1;if(_.redIAdd(M),this.x.cmp(_)===0)return!0}},v.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},v.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Jc}var Zc,v1;function o4(){if(v1)return Zc;v1=1;var a=Ji(),e=Ht,t=ko(),n=wi();function c(m){t.call(this,"mont",m),this.a=new a(m.a,16).toRed(this.red),this.b=new a(m.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(c,t),Zc=c,c.prototype.validate=function(v){var d=v.normalize().x,p=d.redSqr(),u=p.redMul(d).redAdd(p.redMul(this.a)).redAdd(d),_=u.redSqrt();return _.redSqr().cmp(u)===0};function s(m,v,d){t.BasePoint.call(this,m,"projective"),v===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(v,16),this.z=new a(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,t.BasePoint),c.prototype.decodePoint=function(v,d){return this.point(n.toArray(v,d),1)},c.prototype.point=function(v,d){return new s(this,v,d)},c.prototype.pointFromJSON=function(v){return s.fromJSON(this,v)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(v,d){return new s(v,d[0],d[1]||v.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var v=this.x.redAdd(this.z),d=v.redSqr(),p=this.x.redSub(this.z),u=p.redSqr(),_=d.redSub(u),w=d.redMul(u),M=_.redMul(u.redAdd(this.curve.a24.redMul(_)));return this.curve.point(w,M)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(v,d){var p=this.x.redAdd(this.z),u=this.x.redSub(this.z),_=v.x.redAdd(v.z),w=v.x.redSub(v.z),M=w.redMul(p),A=_.redMul(u),R=d.z.redMul(M.redAdd(A).redSqr()),B=d.x.redMul(M.redISub(A).redSqr());return this.curve.point(R,B)},s.prototype.mul=function(v){for(var d=v.clone(),p=this,u=this.curve.point(null,null),_=this,w=[];d.cmpn(0)!==0;d.iushrn(1))w.push(d.andln(1));for(var M=w.length-1;M>=0;M--)w[M]===0?(p=p.diffAdd(u,_),u=u.dbl()):(u=p.diffAdd(u,_),p=p.dbl());return u},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(v){return this.getX().cmp(v.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Zc}var Xc,g1;function f4(){if(g1)return Xc;g1=1;var a=wi(),e=Ji(),t=Ht,n=ko(),c=a.assert;function s(v){this.twisted=(v.a|0)!==1,this.mOneA=this.twisted&&(v.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",v),this.a=new e(v.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(v.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(v.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(v.c|0)===1}t(s,n),Xc=s,s.prototype._mulA=function(d){return this.mOneA?d.redNeg():this.a.redMul(d)},s.prototype._mulC=function(d){return this.oneC?d:this.c.redMul(d)},s.prototype.jpoint=function(d,p,u,_){return this.point(d,p,u,_)},s.prototype.pointFromX=function(d,p){d=new e(d,16),d.red||(d=d.toRed(this.red));var u=d.redSqr(),_=this.c2.redSub(this.a.redMul(u)),w=this.one.redSub(this.c2.redMul(this.d).redMul(u)),M=_.redMul(w.redInvm()),A=M.redSqrt();if(A.redSqr().redSub(M).cmp(this.zero)!==0)throw new Error("invalid point");var R=A.fromRed().isOdd();return(p&&!R||!p&&R)&&(A=A.redNeg()),this.point(d,A)},s.prototype.pointFromY=function(d,p){d=new e(d,16),d.red||(d=d.toRed(this.red));var u=d.redSqr(),_=u.redSub(this.c2),w=u.redMul(this.d).redMul(this.c2).redSub(this.a),M=_.redMul(w.redInvm());if(M.cmp(this.zero)===0){if(p)throw new Error("invalid point");return this.point(this.zero,d)}var A=M.redSqrt();if(A.redSqr().redSub(M).cmp(this.zero)!==0)throw new Error("invalid point");return A.fromRed().isOdd()!==p&&(A=A.redNeg()),this.point(A,d)},s.prototype.validate=function(d){if(d.isInfinity())return!0;d.normalize();var p=d.x.redSqr(),u=d.y.redSqr(),_=p.redMul(this.a).redAdd(u),w=this.c2.redMul(this.one.redAdd(this.d.redMul(p).redMul(u)));return _.cmp(w)===0};function m(v,d,p,u,_){n.BasePoint.call(this,v,"projective"),d===null&&p===null&&u===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(d,16),this.y=new e(p,16),this.z=u?new e(u,16):this.curve.one,this.t=_&&new e(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return t(m,n.BasePoint),s.prototype.pointFromJSON=function(d){return m.fromJSON(this,d)},s.prototype.point=function(d,p,u,_){return new m(this,d,p,u,_)},m.fromJSON=function(d,p){return new m(d,p[0],p[1],p[2])},m.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},m.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},m.prototype._extDbl=function(){var d=this.x.redSqr(),p=this.y.redSqr(),u=this.z.redSqr();u=u.redIAdd(u);var _=this.curve._mulA(d),w=this.x.redAdd(this.y).redSqr().redISub(d).redISub(p),M=_.redAdd(p),A=M.redSub(u),R=_.redSub(p),B=w.redMul(A),z=M.redMul(R),P=w.redMul(R),N=A.redMul(M);return this.curve.point(B,z,N,P)},m.prototype._projDbl=function(){var d=this.x.redAdd(this.y).redSqr(),p=this.x.redSqr(),u=this.y.redSqr(),_,w,M,A,R,B;if(this.curve.twisted){A=this.curve._mulA(p);var z=A.redAdd(u);this.zOne?(_=d.redSub(p).redSub(u).redMul(z.redSub(this.curve.two)),w=z.redMul(A.redSub(u)),M=z.redSqr().redSub(z).redSub(z)):(R=this.z.redSqr(),B=z.redSub(R).redISub(R),_=d.redSub(p).redISub(u).redMul(B),w=z.redMul(A.redSub(u)),M=z.redMul(B))}else A=p.redAdd(u),R=this.curve._mulC(this.z).redSqr(),B=A.redSub(R).redSub(R),_=this.curve._mulC(d.redISub(A)).redMul(B),w=this.curve._mulC(A).redMul(p.redISub(u)),M=A.redMul(B);return this.curve.point(_,w,M)},m.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},m.prototype._extAdd=function(d){var p=this.y.redSub(this.x).redMul(d.y.redSub(d.x)),u=this.y.redAdd(this.x).redMul(d.y.redAdd(d.x)),_=this.t.redMul(this.curve.dd).redMul(d.t),w=this.z.redMul(d.z.redAdd(d.z)),M=u.redSub(p),A=w.redSub(_),R=w.redAdd(_),B=u.redAdd(p),z=M.redMul(A),P=R.redMul(B),N=M.redMul(B),q=A.redMul(R);return this.curve.point(z,P,q,N)},m.prototype._projAdd=function(d){var p=this.z.redMul(d.z),u=p.redSqr(),_=this.x.redMul(d.x),w=this.y.redMul(d.y),M=this.curve.d.redMul(_).redMul(w),A=u.redSub(M),R=u.redAdd(M),B=this.x.redAdd(this.y).redMul(d.x.redAdd(d.y)).redISub(_).redISub(w),z=p.redMul(A).redMul(B),P,N;return this.curve.twisted?(P=p.redMul(R).redMul(w.redSub(this.curve._mulA(_))),N=A.redMul(R)):(P=p.redMul(R).redMul(w.redSub(_)),N=this.curve._mulC(A).redMul(R)),this.curve.point(z,P,N)},m.prototype.add=function(d){return this.isInfinity()?d:d.isInfinity()?this:this.curve.extended?this._extAdd(d):this._projAdd(d)},m.prototype.mul=function(d){return this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve._wnafMul(this,d)},m.prototype.mulAdd=function(d,p,u){return this.curve._wnafMulAdd(1,[this,p],[d,u],2,!1)},m.prototype.jmulAdd=function(d,p,u){return this.curve._wnafMulAdd(1,[this,p],[d,u],2,!0)},m.prototype.normalize=function(){if(this.zOne)return this;var d=this.z.redInvm();return this.x=this.x.redMul(d),this.y=this.y.redMul(d),this.t&&(this.t=this.t.redMul(d)),this.z=this.curve.one,this.zOne=!0,this},m.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},m.prototype.getX=function(){return this.normalize(),this.x.fromRed()},m.prototype.getY=function(){return this.normalize(),this.y.fromRed()},m.prototype.eq=function(d){return this===d||this.getX().cmp(d.getX())===0&&this.getY().cmp(d.getY())===0},m.prototype.eqXToP=function(d){var p=d.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(p)===0)return!0;for(var u=d.clone(),_=this.curve.redN.redMul(this.z);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(_),this.x.cmp(p)===0)return!0}},m.prototype.toP=m.prototype.normalize,m.prototype.mixedAdd=m.prototype.add,Xc}var b1;function hg(){return b1||(b1=1,function(a){var e=a;e.base=ko(),e.short=a4(),e.mont=o4(),e.edwards=f4()}(Wc)),Wc}var Qc={},eu,m1;function c4(){return m1||(m1=1,eu={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),eu}var y1;function Uh(){return y1||(y1=1,function(a){var e=a,t=mh,n=hg(),c=wi(),s=c.assert;function m(p){p.type==="short"?this.curve=new n.short(p):p.type==="edwards"?this.curve=new n.edwards(p):this.curve=new n.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=m;function v(p,u){Object.defineProperty(e,p,{configurable:!0,enumerable:!0,get:function(){var _=new m(u);return Object.defineProperty(e,p,{configurable:!0,enumerable:!0,value:_}),_}})}v("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),v("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),v("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),v("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),v("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),v("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),v("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var d;try{d=c4()}catch{d=void 0}v("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})}(Qc)),Qc}var tu,_1;function u4(){if(_1)return tu;_1=1;var a=mh,e=ug(),t=Bn;function n(c){if(!(this instanceof n))return new n(c);this.hash=c.hash,this.predResist=!!c.predResist,this.outLen=this.hash.outSize,this.minEntropy=c.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(c.entropy,c.entropyEnc||"hex"),m=e.toArray(c.nonce,c.nonceEnc||"hex"),v=e.toArray(c.pers,c.persEnc||"hex");t(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,m,v)}return tu=n,n.prototype._init=function(s,m,v){var d=s.concat(m).concat(v);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var p=0;p<this.V.length;p++)this.K[p]=0,this.V[p]=1;this._update(d),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new a.hmac(this.hash,this.K)},n.prototype._update=function(s){var m=this._hmac().update(this.V).update([0]);s&&(m=m.update(s)),this.K=m.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(s,m,v,d){typeof m!="string"&&(d=v,v=m,m=null),s=e.toArray(s,m),v=e.toArray(v,d),t(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(v||[])),this._reseed=1},n.prototype.generate=function(s,m,v,d){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof m!="string"&&(d=v,v=m,m=null),v&&(v=e.toArray(v,d||"hex"),this._update(v));for(var p=[];p.length<s;)this.V=this._hmac().update(this.V).digest(),p=p.concat(this.V);var u=p.slice(0,s);return this._update(v),this._reseed++,e.encode(u,m)},tu}var ru,w1;function h4(){if(w1)return ru;w1=1;var a=Ji(),e=wi(),t=e.assert;function n(c,s){this.ec=c,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return ru=n,n.fromPublic=function(s,m,v){return m instanceof n?m:new n(s,{pub:m,pubEnc:v})},n.fromPrivate=function(s,m,v){return m instanceof n?m:new n(s,{priv:m,privEnc:v})},n.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(s,m){return typeof s=="string"&&(m=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),m?this.pub.encode(m,s):this.pub},n.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(s,m){this.priv=new a(s,m||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(s,m){if(s.x||s.y){this.ec.curve.type==="mont"?t(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,m)},n.prototype.derive=function(s){return s.validate()||t(s.validate(),"public point not validated"),s.mul(this.priv).getX()},n.prototype.sign=function(s,m,v){return this.ec.sign(s,this,m,v)},n.prototype.verify=function(s,m){return this.ec.verify(s,m,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},ru}var iu,E1;function l4(){if(E1)return iu;E1=1;var a=Ji(),e=wi(),t=e.assert;function n(d,p){if(d instanceof n)return d;this._importDER(d,p)||(t(d.r&&d.s,"Signature without r or s"),this.r=new a(d.r,16),this.s=new a(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}iu=n;function c(){this.place=0}function s(d,p){var u=d[p.place++];if(!(u&128))return u;var _=u&15;if(_===0||_>4)return!1;for(var w=0,M=0,A=p.place;M<_;M++,A++)w<<=8,w|=d[A],w>>>=0;return w<=127?!1:(p.place=A,w)}function m(d){for(var p=0,u=d.length-1;!d[p]&&!(d[p+1]&128)&&p<u;)p++;return p===0?d:d.slice(p)}n.prototype._importDER=function(p,u){p=e.toArray(p,u);var _=new c;if(p[_.place++]!==48)return!1;var w=s(p,_);if(w===!1||w+_.place!==p.length||p[_.place++]!==2)return!1;var M=s(p,_);if(M===!1)return!1;var A=p.slice(_.place,M+_.place);if(_.place+=M,p[_.place++]!==2)return!1;var R=s(p,_);if(R===!1||p.length!==R+_.place)return!1;var B=p.slice(_.place,R+_.place);if(A[0]===0)if(A[1]&128)A=A.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new a(A),this.s=new a(B),this.recoveryParam=null,!0};function v(d,p){if(p<128){d.push(p);return}var u=1+(Math.log(p)/Math.LN2>>>3);for(d.push(u|128);--u;)d.push(p>>>(u<<3)&255);d.push(p)}return n.prototype.toDER=function(p){var u=this.r.toArray(),_=this.s.toArray();for(u[0]&128&&(u=[0].concat(u)),_[0]&128&&(_=[0].concat(_)),u=m(u),_=m(_);!_[0]&&!(_[1]&128);)_=_.slice(1);var w=[2];v(w,u.length),w=w.concat(u),w.push(2),v(w,_.length);var M=w.concat(_),A=[48];return v(A,M.length),A=A.concat(M),e.encode(A,p)},iu}var nu,M1;function d4(){if(M1)return nu;M1=1;var a=Ji(),e=u4(),t=wi(),n=Uh(),c=Nh(),s=t.assert,m=h4(),v=l4();function d(p){if(!(this instanceof d))return new d(p);typeof p=="string"&&(s(Object.prototype.hasOwnProperty.call(n,p),"Unknown curve "+p),p=n[p]),p instanceof n.PresetCurve&&(p={curve:p}),this.curve=p.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=p.curve.g,this.g.precompute(p.curve.n.bitLength()+1),this.hash=p.hash||p.curve.hash}return nu=d,d.prototype.keyPair=function(u){return new m(this,u)},d.prototype.keyFromPrivate=function(u,_){return m.fromPrivate(this,u,_)},d.prototype.keyFromPublic=function(u,_){return m.fromPublic(this,u,_)},d.prototype.genKeyPair=function(u){u||(u={});for(var _=new e({hash:this.hash,pers:u.pers,persEnc:u.persEnc||"utf8",entropy:u.entropy||c(this.hash.hmacStrength),entropyEnc:u.entropy&&u.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),M=this.n.sub(new a(2));;){var A=new a(_.generate(w));if(!(A.cmp(M)>0))return A.iaddn(1),this.keyFromPrivate(A)}},d.prototype._truncateToN=function(u,_){var w=u.byteLength()*8-this.n.bitLength();return w>0&&(u=u.ushrn(w)),!_&&u.cmp(this.n)>=0?u.sub(this.n):u},d.prototype.sign=function(u,_,w,M){typeof w=="object"&&(M=w,w=null),M||(M={}),_=this.keyFromPrivate(_,w),u=this._truncateToN(new a(u,16));for(var A=this.n.byteLength(),R=_.getPrivate().toArray("be",A),B=u.toArray("be",A),z=new e({hash:this.hash,entropy:R,nonce:B,pers:M.pers,persEnc:M.persEnc||"utf8"}),P=this.n.sub(new a(1)),N=0;;N++){var q=M.k?M.k(N):new a(z.generate(this.n.byteLength()));if(q=this._truncateToN(q,!0),!(q.cmpn(1)<=0||q.cmp(P)>=0)){var k=this.g.mul(q);if(!k.isInfinity()){var F=k.getX(),O=F.umod(this.n);if(O.cmpn(0)!==0){var j=q.invm(this.n).mul(O.mul(_.getPrivate()).iadd(u));if(j=j.umod(this.n),j.cmpn(0)!==0){var J=(k.getY().isOdd()?1:0)|(F.cmp(O)!==0?2:0);return M.canonical&&j.cmp(this.nh)>0&&(j=this.n.sub(j),J^=1),new v({r:O,s:j,recoveryParam:J})}}}}}},d.prototype.verify=function(u,_,w,M){u=this._truncateToN(new a(u,16)),w=this.keyFromPublic(w,M),_=new v(_,"hex");var A=_.r,R=_.s;if(A.cmpn(1)<0||A.cmp(this.n)>=0||R.cmpn(1)<0||R.cmp(this.n)>=0)return!1;var B=R.invm(this.n),z=B.mul(u).umod(this.n),P=B.mul(A).umod(this.n),N;return this.curve._maxwellTrick?(N=this.g.jmulAdd(z,w.getPublic(),P),N.isInfinity()?!1:N.eqXToP(A)):(N=this.g.mulAdd(z,w.getPublic(),P),N.isInfinity()?!1:N.getX().umod(this.n).cmp(A)===0)},d.prototype.recoverPubKey=function(p,u,_,w){s((3&_)===_,"The recovery param is more than two bits"),u=new v(u,w);var M=this.n,A=new a(p),R=u.r,B=u.s,z=_&1,P=_>>1;if(R.cmp(this.curve.p.umod(this.curve.n))>=0&&P)throw new Error("Unable to find sencond key candinate");P?R=this.curve.pointFromX(R.add(this.curve.n),z):R=this.curve.pointFromX(R,z);var N=u.r.invm(M),q=M.sub(A).mul(N).umod(M),k=B.mul(N).umod(M);return this.g.mulAdd(q,R,k)},d.prototype.getKeyRecoveryParam=function(p,u,_,w){if(u=new v(u,w),u.recoveryParam!==null)return u.recoveryParam;for(var M=0;M<4;M++){var A;try{A=this.recoverPubKey(p,u,M)}catch{continue}if(A.eq(_))return M}throw new Error("Unable to find valid recovery factor")},nu}var su,S1;function p4(){if(S1)return su;S1=1;var a=wi(),e=a.assert,t=a.parseBytes,n=a.cachedProperty;function c(s,m){this.eddsa=s,this._secret=t(m.secret),s.isPoint(m.pub)?this._pub=m.pub:this._pubBytes=t(m.pub)}return c.fromPublic=function(m,v){return v instanceof c?v:new c(m,{pub:v})},c.fromSecret=function(m,v){return v instanceof c?v:new c(m,{secret:v})},c.prototype.secret=function(){return this._secret},n(c,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(c,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(c,"privBytes",function(){var m=this.eddsa,v=this.hash(),d=m.encodingLength-1,p=v.slice(0,m.encodingLength);return p[0]&=248,p[d]&=127,p[d]|=64,p}),n(c,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(c,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(c,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),c.prototype.sign=function(m){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(m,this)},c.prototype.verify=function(m,v){return this.eddsa.verify(m,v,this)},c.prototype.getSecret=function(m){return e(this._secret,"KeyPair is public only"),a.encode(this.secret(),m)},c.prototype.getPublic=function(m){return a.encode(this.pubBytes(),m)},su=c,su}var au,x1;function v4(){if(x1)return au;x1=1;var a=Ji(),e=wi(),t=e.assert,n=e.cachedProperty,c=e.parseBytes;function s(m,v){this.eddsa=m,typeof v!="object"&&(v=c(v)),Array.isArray(v)&&(v={R:v.slice(0,m.encodingLength),S:v.slice(m.encodingLength)}),t(v.R&&v.S,"Signature without R or S"),m.isPoint(v.R)&&(this._R=v.R),v.S instanceof a&&(this._S=v.S),this._Rencoded=Array.isArray(v.R)?v.R:v.Rencoded,this._Sencoded=Array.isArray(v.S)?v.S:v.Sencoded}return n(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},au=s,au}var ou,D1;function g4(){if(D1)return ou;D1=1;var a=mh,e=Uh(),t=wi(),n=t.assert,c=t.parseBytes,s=p4(),m=v4();function v(d){if(n(d==="ed25519","only tested with ed25519 so far"),!(this instanceof v))return new v(d);d=e[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=a.sha512}return ou=v,v.prototype.sign=function(p,u){p=c(p);var _=this.keyFromSecret(u),w=this.hashInt(_.messagePrefix(),p),M=this.g.mul(w),A=this.encodePoint(M),R=this.hashInt(A,_.pubBytes(),p).mul(_.priv()),B=w.add(R).umod(this.curve.n);return this.makeSignature({R:M,S:B,Rencoded:A})},v.prototype.verify=function(p,u,_){p=c(p),u=this.makeSignature(u);var w=this.keyFromPublic(_),M=this.hashInt(u.Rencoded(),w.pubBytes(),p),A=this.g.mul(u.S()),R=u.R().add(w.pub().mul(M));return R.eq(A)},v.prototype.hashInt=function(){for(var p=this.hash(),u=0;u<arguments.length;u++)p.update(arguments[u]);return t.intFromLE(p.digest()).umod(this.curve.n)},v.prototype.keyFromPublic=function(p){return s.fromPublic(this,p)},v.prototype.keyFromSecret=function(p){return s.fromSecret(this,p)},v.prototype.makeSignature=function(p){return p instanceof m?p:new m(this,p)},v.prototype.encodePoint=function(p){var u=p.getY().toArray("le",this.encodingLength);return u[this.encodingLength-1]|=p.getX().isOdd()?128:0,u},v.prototype.decodePoint=function(p){p=t.parseBytes(p);var u=p.length-1,_=p.slice(0,u).concat(p[u]&-129),w=(p[u]&128)!==0,M=t.intFromLE(_);return this.curve.pointFromY(M,w)},v.prototype.encodeInt=function(p){return p.toArray("le",this.encodingLength)},v.prototype.decodeInt=function(p){return t.intFromLE(p)},v.prototype.isPoint=function(p){return p instanceof this.pointClass},ou}var A1;function qh(){return A1||(A1=1,function(a){var e=a;e.version=s4.version,e.utils=wi(),e.rand=Nh(),e.curve=hg(),e.curves=Uh(),e.ec=d4(),e.eddsa=g4()}(Kc)),Kc}var So={exports:{}};So.exports;var I1;function lg(){return I1||(I1=1,function(a){(function(e,t){function n(h,r){if(!h)throw new Error(r||"Assertion failed")}function c(h,r){h.super_=r;var o=function(){};o.prototype=r.prototype,h.prototype=new o,h.prototype.constructor=h}function s(h,r,o){if(s.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((r==="le"||r==="be")&&(o=r,r=10),this._init(h||0,r||10,o||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var m;try{typeof window<"u"&&typeof window.Buffer<"u"?m=window.Buffer:m=bh.Buffer}catch{}s.isBN=function(r){return r instanceof s?!0:r!==null&&typeof r=="object"&&r.constructor.wordSize===s.wordSize&&Array.isArray(r.words)},s.max=function(r,o){return r.cmp(o)>0?r:o},s.min=function(r,o){return r.cmp(o)<0?r:o},s.prototype._init=function(r,o,b){if(typeof r=="number")return this._initNumber(r,o,b);if(typeof r=="object")return this._initArray(r,o,b);o==="hex"&&(o=16),n(o===(o|0)&&o>=2&&o<=36),r=r.toString().replace(/\s+/g,"");var D=0;r[0]==="-"&&(D++,this.negative=1),D<r.length&&(o===16?this._parseHex(r,D,b):(this._parseBase(r,o,D),b==="le"&&this._initArray(this.toArray(),o,b)))},s.prototype._initNumber=function(r,o,b){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[r&67108863],this.length=1):r<4503599627370496?(this.words=[r&67108863,r/67108864&67108863],this.length=2):(n(r<9007199254740992),this.words=[r&67108863,r/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),o,b)},s.prototype._initArray=function(r,o,b){if(n(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var I,x,y=0;if(b==="be")for(D=r.length-1,I=0;D>=0;D-=3)x=r[D]|r[D-1]<<8|r[D-2]<<16,this.words[I]|=x<<y&67108863,this.words[I+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,I++);else if(b==="le")for(D=0,I=0;D<r.length;D+=3)x=r[D]|r[D+1]<<8|r[D+2]<<16,this.words[I]|=x<<y&67108863,this.words[I+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,I++);return this._strip()};function v(h,r){var o=h.charCodeAt(r);if(o>=48&&o<=57)return o-48;if(o>=65&&o<=70)return o-55;if(o>=97&&o<=102)return o-87;n(!1,"Invalid character in "+h)}function d(h,r,o){var b=v(h,o);return o-1>=r&&(b|=v(h,o-1)<<4),b}s.prototype._parseHex=function(r,o,b){this.length=Math.ceil((r.length-o)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var I=0,x=0,y;if(b==="be")for(D=r.length-1;D>=o;D-=2)y=d(r,o,D)<<I,this.words[x]|=y&67108863,I>=18?(I-=18,x+=1,this.words[x]|=y>>>26):I+=8;else{var S=r.length-o;for(D=S%2===0?o+1:o;D<r.length;D+=2)y=d(r,o,D)<<I,this.words[x]|=y&67108863,I>=18?(I-=18,x+=1,this.words[x]|=y>>>26):I+=8}this._strip()};function p(h,r,o,b){for(var D=0,I=0,x=Math.min(h.length,o),y=r;y<x;y++){var S=h.charCodeAt(y)-48;D*=b,S>=49?I=S-49+10:S>=17?I=S-17+10:I=S,n(S>=0&&I<b,"Invalid character"),D+=I}return D}s.prototype._parseBase=function(r,o,b){this.words=[0],this.length=1;for(var D=0,I=1;I<=67108863;I*=o)D++;D--,I=I/o|0;for(var x=r.length-b,y=x%D,S=Math.min(x,x-y)+b,l=0,T=b;T<S;T+=D)l=p(r,T,T+D,o),this.imuln(I),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(y!==0){var te=1;for(l=p(r,T,r.length,o),T=0;T<y;T++)te*=o;this.imuln(te),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},s.prototype.copy=function(r){r.words=new Array(this.length);for(var o=0;o<this.length;o++)r.words[o]=this.words[o];r.length=this.length,r.negative=this.negative,r.red=this.red};function u(h,r){h.words=r.words,h.length=r.length,h.negative=r.negative,h.red=r.red}if(s.prototype._move=function(r){u(r,this)},s.prototype.clone=function(){var r=new s(null);return this.copy(r),r},s.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{s.prototype.inspect=_}else s.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(r,o){r=r||10,o=o|0||1;var b;if(r===16||r==="hex"){b="";for(var D=0,I=0,x=0;x<this.length;x++){var y=this.words[x],S=((y<<D|I)&16777215).toString(16);I=y>>>24-D&16777215,D+=2,D>=26&&(D-=26,x--),I!==0||x!==this.length-1?b=w[6-S.length]+S+b:b=S+b}for(I!==0&&(b=I.toString(16)+b);b.length%o!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(r===(r|0)&&r>=2&&r<=36){var l=M[r],T=A[r];b="";var te=this.clone();for(te.negative=0;!te.isZero();){var ee=te.modrn(T).toString(r);te=te.idivn(T),te.isZero()?b=ee+b:b=w[l-ee.length]+ee+b}for(this.isZero()&&(b="0"+b);b.length%o!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=this.words[1]*67108864:this.length===3&&this.words[2]===1?r+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},s.prototype.toJSON=function(){return this.toString(16,2)},m&&(s.prototype.toBuffer=function(r,o){return this.toArrayLike(m,r,o)}),s.prototype.toArray=function(r,o){return this.toArrayLike(Array,r,o)};var R=function(r,o){return r.allocUnsafe?r.allocUnsafe(o):new r(o)};s.prototype.toArrayLike=function(r,o,b){this._strip();var D=this.byteLength(),I=b||Math.max(1,D);n(D<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var x=R(r,I),y=o==="le"?"LE":"BE";return this["_toArrayLike"+y](x,D),x},s.prototype._toArrayLikeLE=function(r,o){for(var b=0,D=0,I=0,x=0;I<this.length;I++){var y=this.words[I]<<x|D;r[b++]=y&255,b<r.length&&(r[b++]=y>>8&255),b<r.length&&(r[b++]=y>>16&255),x===6?(b<r.length&&(r[b++]=y>>24&255),D=0,x=0):(D=y>>>24,x+=2)}if(b<r.length)for(r[b++]=D;b<r.length;)r[b++]=0},s.prototype._toArrayLikeBE=function(r,o){for(var b=r.length-1,D=0,I=0,x=0;I<this.length;I++){var y=this.words[I]<<x|D;r[b--]=y&255,b>=0&&(r[b--]=y>>8&255),b>=0&&(r[b--]=y>>16&255),x===6?(b>=0&&(r[b--]=y>>24&255),D=0,x=0):(D=y>>>24,x+=2)}if(b>=0)for(r[b--]=D;b>=0;)r[b--]=0},Math.clz32?s.prototype._countBits=function(r){return 32-Math.clz32(r)}:s.prototype._countBits=function(r){var o=r,b=0;return o>=4096&&(b+=13,o>>>=13),o>=64&&(b+=7,o>>>=7),o>=8&&(b+=4,o>>>=4),o>=2&&(b+=2,o>>>=2),b+o},s.prototype._zeroBits=function(r){if(r===0)return 26;var o=r,b=0;return o&8191||(b+=13,o>>>=13),o&127||(b+=7,o>>>=7),o&15||(b+=4,o>>>=4),o&3||(b+=2,o>>>=2),o&1||b++,b},s.prototype.bitLength=function(){var r=this.words[this.length-1],o=this._countBits(r);return(this.length-1)*26+o};function B(h){for(var r=new Array(h.bitLength()),o=0;o<r.length;o++){var b=o/26|0,D=o%26;r[o]=h.words[b]>>>D&1}return r}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,o=0;o<this.length;o++){var b=this._zeroBits(this.words[o]);if(r+=b,b!==26)break}return r},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},s.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var o=0;o<r.length;o++)this.words[o]=this.words[o]|r.words[o];return this._strip()},s.prototype.ior=function(r){return n((this.negative|r.negative)===0),this.iuor(r)},s.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},s.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},s.prototype.iuand=function(r){var o;this.length>r.length?o=r:o=this;for(var b=0;b<o.length;b++)this.words[b]=this.words[b]&r.words[b];return this.length=o.length,this._strip()},s.prototype.iand=function(r){return n((this.negative|r.negative)===0),this.iuand(r)},s.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},s.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},s.prototype.iuxor=function(r){var o,b;this.length>r.length?(o=this,b=r):(o=r,b=this);for(var D=0;D<b.length;D++)this.words[D]=o.words[D]^b.words[D];if(this!==o)for(;D<o.length;D++)this.words[D]=o.words[D];return this.length=o.length,this._strip()},s.prototype.ixor=function(r){return n((this.negative|r.negative)===0),this.iuxor(r)},s.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},s.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},s.prototype.inotn=function(r){n(typeof r=="number"&&r>=0);var o=Math.ceil(r/26)|0,b=r%26;this._expand(o),b>0&&o--;for(var D=0;D<o;D++)this.words[D]=~this.words[D]&67108863;return b>0&&(this.words[D]=~this.words[D]&67108863>>26-b),this._strip()},s.prototype.notn=function(r){return this.clone().inotn(r)},s.prototype.setn=function(r,o){n(typeof r=="number"&&r>=0);var b=r/26|0,D=r%26;return this._expand(b+1),o?this.words[b]=this.words[b]|1<<D:this.words[b]=this.words[b]&~(1<<D),this._strip()},s.prototype.iadd=function(r){var o;if(this.negative!==0&&r.negative===0)return this.negative=0,o=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,o=this.isub(r),r.negative=1,o._normSign();var b,D;this.length>r.length?(b=this,D=r):(b=r,D=this);for(var I=0,x=0;x<D.length;x++)o=(b.words[x]|0)+(D.words[x]|0)+I,this.words[x]=o&67108863,I=o>>>26;for(;I!==0&&x<b.length;x++)o=(b.words[x]|0)+I,this.words[x]=o&67108863,I=o>>>26;if(this.length=b.length,I!==0)this.words[this.length]=I,this.length++;else if(b!==this)for(;x<b.length;x++)this.words[x]=b.words[x];return this},s.prototype.add=function(r){var o;return r.negative!==0&&this.negative===0?(r.negative=0,o=this.sub(r),r.negative^=1,o):r.negative===0&&this.negative!==0?(this.negative=0,o=r.sub(this),this.negative=1,o):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},s.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var o=this.iadd(r);return r.negative=1,o._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var b=this.cmp(r);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,I;b>0?(D=this,I=r):(D=r,I=this);for(var x=0,y=0;y<I.length;y++)o=(D.words[y]|0)-(I.words[y]|0)+x,x=o>>26,this.words[y]=o&67108863;for(;x!==0&&y<D.length;y++)o=(D.words[y]|0)+x,x=o>>26,this.words[y]=o&67108863;if(x===0&&y<D.length&&D!==this)for(;y<D.length;y++)this.words[y]=D.words[y];return this.length=Math.max(this.length,y),D!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(r){return this.clone().isub(r)};function z(h,r,o){o.negative=r.negative^h.negative;var b=h.length+r.length|0;o.length=b,b=b-1|0;var D=h.words[0]|0,I=r.words[0]|0,x=D*I,y=x&67108863,S=x/67108864|0;o.words[0]=y;for(var l=1;l<b;l++){for(var T=S>>>26,te=S&67108863,ee=Math.min(l,r.length-1),ae=Math.max(0,l-h.length+1);ae<=ee;ae++){var Q=l-ae|0;D=h.words[Q]|0,I=r.words[ae]|0,x=D*I+te,T+=x/67108864|0,te=x&67108863}o.words[l]=te|0,S=T|0}return S!==0?o.words[l]=S|0:o.length--,o._strip()}var P=function(r,o,b){var D=r.words,I=o.words,x=b.words,y=0,S,l,T,te=D[0]|0,ee=te&8191,ae=te>>>13,Q=D[1]|0,X=Q&8191,Y=Q>>>13,$=D[2]|0,W=$&8191,oe=$>>>13,ye=D[3]|0,we=ye&8191,me=ye>>>13,Ze=D[4]|0,De=Ze&8191,Ee=Ze>>>13,nt=D[5]|0,Ae=nt&8191,de=nt>>>13,ze=D[6]|0,Me=ze&8191,ge=ze>>>13,Fe=D[7]|0,Se=Fe&8191,le=Fe>>>13,je=D[8]|0,Pe=je&8191,pe=je>>>13,Xe=D[9]|0,Te=Xe&8191,_e=Xe>>>13,Qe=I[0]|0,Ne=Qe&8191,Be=Qe>>>13,wt=I[1]|0,rt=wt&8191,Ue=wt>>>13,It=I[2]|0,it=It&8191,ke=It>>>13,ct=I[3]|0,He=ct&8191,Ie=ct>>>13,ut=I[4]|0,Ke=ut&8191,xe=ut>>>13,pt=I[5]|0,Je=pt&8191,Oe=pt>>>13,vt=I[6]|0,Ge=vt&8191,Ce=vt>>>13,ht=I[7]|0,$e=ht&8191,Re=ht>>>13,gt=I[8]|0,dt=gt&8191,Ye=gt>>>13,Ut=I[9]|0,tt=Ut&8191,lt=Ut>>>13;b.negative=r.negative^o.negative,b.length=19,S=Math.imul(ee,Ne),l=Math.imul(ee,Be),l=l+Math.imul(ae,Ne)|0,T=Math.imul(ae,Be);var xr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(xr>>>26)|0,xr&=67108863,S=Math.imul(X,Ne),l=Math.imul(X,Be),l=l+Math.imul(Y,Ne)|0,T=Math.imul(Y,Be),S=S+Math.imul(ee,rt)|0,l=l+Math.imul(ee,Ue)|0,l=l+Math.imul(ae,rt)|0,T=T+Math.imul(ae,Ue)|0;var Dr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,S=Math.imul(W,Ne),l=Math.imul(W,Be),l=l+Math.imul(oe,Ne)|0,T=Math.imul(oe,Be),S=S+Math.imul(X,rt)|0,l=l+Math.imul(X,Ue)|0,l=l+Math.imul(Y,rt)|0,T=T+Math.imul(Y,Ue)|0,S=S+Math.imul(ee,it)|0,l=l+Math.imul(ee,ke)|0,l=l+Math.imul(ae,it)|0,T=T+Math.imul(ae,ke)|0;var Ar=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,S=Math.imul(we,Ne),l=Math.imul(we,Be),l=l+Math.imul(me,Ne)|0,T=Math.imul(me,Be),S=S+Math.imul(W,rt)|0,l=l+Math.imul(W,Ue)|0,l=l+Math.imul(oe,rt)|0,T=T+Math.imul(oe,Ue)|0,S=S+Math.imul(X,it)|0,l=l+Math.imul(X,ke)|0,l=l+Math.imul(Y,it)|0,T=T+Math.imul(Y,ke)|0,S=S+Math.imul(ee,He)|0,l=l+Math.imul(ee,Ie)|0,l=l+Math.imul(ae,He)|0,T=T+Math.imul(ae,Ie)|0;var Ir=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,S=Math.imul(De,Ne),l=Math.imul(De,Be),l=l+Math.imul(Ee,Ne)|0,T=Math.imul(Ee,Be),S=S+Math.imul(we,rt)|0,l=l+Math.imul(we,Ue)|0,l=l+Math.imul(me,rt)|0,T=T+Math.imul(me,Ue)|0,S=S+Math.imul(W,it)|0,l=l+Math.imul(W,ke)|0,l=l+Math.imul(oe,it)|0,T=T+Math.imul(oe,ke)|0,S=S+Math.imul(X,He)|0,l=l+Math.imul(X,Ie)|0,l=l+Math.imul(Y,He)|0,T=T+Math.imul(Y,Ie)|0,S=S+Math.imul(ee,Ke)|0,l=l+Math.imul(ee,xe)|0,l=l+Math.imul(ae,Ke)|0,T=T+Math.imul(ae,xe)|0;var er=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(er>>>26)|0,er&=67108863,S=Math.imul(Ae,Ne),l=Math.imul(Ae,Be),l=l+Math.imul(de,Ne)|0,T=Math.imul(de,Be),S=S+Math.imul(De,rt)|0,l=l+Math.imul(De,Ue)|0,l=l+Math.imul(Ee,rt)|0,T=T+Math.imul(Ee,Ue)|0,S=S+Math.imul(we,it)|0,l=l+Math.imul(we,ke)|0,l=l+Math.imul(me,it)|0,T=T+Math.imul(me,ke)|0,S=S+Math.imul(W,He)|0,l=l+Math.imul(W,Ie)|0,l=l+Math.imul(oe,He)|0,T=T+Math.imul(oe,Ie)|0,S=S+Math.imul(X,Ke)|0,l=l+Math.imul(X,xe)|0,l=l+Math.imul(Y,Ke)|0,T=T+Math.imul(Y,xe)|0,S=S+Math.imul(ee,Je)|0,l=l+Math.imul(ee,Oe)|0,l=l+Math.imul(ae,Je)|0,T=T+Math.imul(ae,Oe)|0;var cr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(cr>>>26)|0,cr&=67108863,S=Math.imul(Me,Ne),l=Math.imul(Me,Be),l=l+Math.imul(ge,Ne)|0,T=Math.imul(ge,Be),S=S+Math.imul(Ae,rt)|0,l=l+Math.imul(Ae,Ue)|0,l=l+Math.imul(de,rt)|0,T=T+Math.imul(de,Ue)|0,S=S+Math.imul(De,it)|0,l=l+Math.imul(De,ke)|0,l=l+Math.imul(Ee,it)|0,T=T+Math.imul(Ee,ke)|0,S=S+Math.imul(we,He)|0,l=l+Math.imul(we,Ie)|0,l=l+Math.imul(me,He)|0,T=T+Math.imul(me,Ie)|0,S=S+Math.imul(W,Ke)|0,l=l+Math.imul(W,xe)|0,l=l+Math.imul(oe,Ke)|0,T=T+Math.imul(oe,xe)|0,S=S+Math.imul(X,Je)|0,l=l+Math.imul(X,Oe)|0,l=l+Math.imul(Y,Je)|0,T=T+Math.imul(Y,Oe)|0,S=S+Math.imul(ee,Ge)|0,l=l+Math.imul(ee,Ce)|0,l=l+Math.imul(ae,Ge)|0,T=T+Math.imul(ae,Ce)|0;var Or=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Or>>>26)|0,Or&=67108863,S=Math.imul(Se,Ne),l=Math.imul(Se,Be),l=l+Math.imul(le,Ne)|0,T=Math.imul(le,Be),S=S+Math.imul(Me,rt)|0,l=l+Math.imul(Me,Ue)|0,l=l+Math.imul(ge,rt)|0,T=T+Math.imul(ge,Ue)|0,S=S+Math.imul(Ae,it)|0,l=l+Math.imul(Ae,ke)|0,l=l+Math.imul(de,it)|0,T=T+Math.imul(de,ke)|0,S=S+Math.imul(De,He)|0,l=l+Math.imul(De,Ie)|0,l=l+Math.imul(Ee,He)|0,T=T+Math.imul(Ee,Ie)|0,S=S+Math.imul(we,Ke)|0,l=l+Math.imul(we,xe)|0,l=l+Math.imul(me,Ke)|0,T=T+Math.imul(me,xe)|0,S=S+Math.imul(W,Je)|0,l=l+Math.imul(W,Oe)|0,l=l+Math.imul(oe,Je)|0,T=T+Math.imul(oe,Oe)|0,S=S+Math.imul(X,Ge)|0,l=l+Math.imul(X,Ce)|0,l=l+Math.imul(Y,Ge)|0,T=T+Math.imul(Y,Ce)|0,S=S+Math.imul(ee,$e)|0,l=l+Math.imul(ee,Re)|0,l=l+Math.imul(ae,$e)|0,T=T+Math.imul(ae,Re)|0;var ur=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(ur>>>26)|0,ur&=67108863,S=Math.imul(Pe,Ne),l=Math.imul(Pe,Be),l=l+Math.imul(pe,Ne)|0,T=Math.imul(pe,Be),S=S+Math.imul(Se,rt)|0,l=l+Math.imul(Se,Ue)|0,l=l+Math.imul(le,rt)|0,T=T+Math.imul(le,Ue)|0,S=S+Math.imul(Me,it)|0,l=l+Math.imul(Me,ke)|0,l=l+Math.imul(ge,it)|0,T=T+Math.imul(ge,ke)|0,S=S+Math.imul(Ae,He)|0,l=l+Math.imul(Ae,Ie)|0,l=l+Math.imul(de,He)|0,T=T+Math.imul(de,Ie)|0,S=S+Math.imul(De,Ke)|0,l=l+Math.imul(De,xe)|0,l=l+Math.imul(Ee,Ke)|0,T=T+Math.imul(Ee,xe)|0,S=S+Math.imul(we,Je)|0,l=l+Math.imul(we,Oe)|0,l=l+Math.imul(me,Je)|0,T=T+Math.imul(me,Oe)|0,S=S+Math.imul(W,Ge)|0,l=l+Math.imul(W,Ce)|0,l=l+Math.imul(oe,Ge)|0,T=T+Math.imul(oe,Ce)|0,S=S+Math.imul(X,$e)|0,l=l+Math.imul(X,Re)|0,l=l+Math.imul(Y,$e)|0,T=T+Math.imul(Y,Re)|0,S=S+Math.imul(ee,dt)|0,l=l+Math.imul(ee,Ye)|0,l=l+Math.imul(ae,dt)|0,T=T+Math.imul(ae,Ye)|0;var Pr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,S=Math.imul(Te,Ne),l=Math.imul(Te,Be),l=l+Math.imul(_e,Ne)|0,T=Math.imul(_e,Be),S=S+Math.imul(Pe,rt)|0,l=l+Math.imul(Pe,Ue)|0,l=l+Math.imul(pe,rt)|0,T=T+Math.imul(pe,Ue)|0,S=S+Math.imul(Se,it)|0,l=l+Math.imul(Se,ke)|0,l=l+Math.imul(le,it)|0,T=T+Math.imul(le,ke)|0,S=S+Math.imul(Me,He)|0,l=l+Math.imul(Me,Ie)|0,l=l+Math.imul(ge,He)|0,T=T+Math.imul(ge,Ie)|0,S=S+Math.imul(Ae,Ke)|0,l=l+Math.imul(Ae,xe)|0,l=l+Math.imul(de,Ke)|0,T=T+Math.imul(de,xe)|0,S=S+Math.imul(De,Je)|0,l=l+Math.imul(De,Oe)|0,l=l+Math.imul(Ee,Je)|0,T=T+Math.imul(Ee,Oe)|0,S=S+Math.imul(we,Ge)|0,l=l+Math.imul(we,Ce)|0,l=l+Math.imul(me,Ge)|0,T=T+Math.imul(me,Ce)|0,S=S+Math.imul(W,$e)|0,l=l+Math.imul(W,Re)|0,l=l+Math.imul(oe,$e)|0,T=T+Math.imul(oe,Re)|0,S=S+Math.imul(X,dt)|0,l=l+Math.imul(X,Ye)|0,l=l+Math.imul(Y,dt)|0,T=T+Math.imul(Y,Ye)|0,S=S+Math.imul(ee,tt)|0,l=l+Math.imul(ee,lt)|0,l=l+Math.imul(ae,tt)|0,T=T+Math.imul(ae,lt)|0;var Cr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,S=Math.imul(Te,rt),l=Math.imul(Te,Ue),l=l+Math.imul(_e,rt)|0,T=Math.imul(_e,Ue),S=S+Math.imul(Pe,it)|0,l=l+Math.imul(Pe,ke)|0,l=l+Math.imul(pe,it)|0,T=T+Math.imul(pe,ke)|0,S=S+Math.imul(Se,He)|0,l=l+Math.imul(Se,Ie)|0,l=l+Math.imul(le,He)|0,T=T+Math.imul(le,Ie)|0,S=S+Math.imul(Me,Ke)|0,l=l+Math.imul(Me,xe)|0,l=l+Math.imul(ge,Ke)|0,T=T+Math.imul(ge,xe)|0,S=S+Math.imul(Ae,Je)|0,l=l+Math.imul(Ae,Oe)|0,l=l+Math.imul(de,Je)|0,T=T+Math.imul(de,Oe)|0,S=S+Math.imul(De,Ge)|0,l=l+Math.imul(De,Ce)|0,l=l+Math.imul(Ee,Ge)|0,T=T+Math.imul(Ee,Ce)|0,S=S+Math.imul(we,$e)|0,l=l+Math.imul(we,Re)|0,l=l+Math.imul(me,$e)|0,T=T+Math.imul(me,Re)|0,S=S+Math.imul(W,dt)|0,l=l+Math.imul(W,Ye)|0,l=l+Math.imul(oe,dt)|0,T=T+Math.imul(oe,Ye)|0,S=S+Math.imul(X,tt)|0,l=l+Math.imul(X,lt)|0,l=l+Math.imul(Y,tt)|0,T=T+Math.imul(Y,lt)|0;var hr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(hr>>>26)|0,hr&=67108863,S=Math.imul(Te,it),l=Math.imul(Te,ke),l=l+Math.imul(_e,it)|0,T=Math.imul(_e,ke),S=S+Math.imul(Pe,He)|0,l=l+Math.imul(Pe,Ie)|0,l=l+Math.imul(pe,He)|0,T=T+Math.imul(pe,Ie)|0,S=S+Math.imul(Se,Ke)|0,l=l+Math.imul(Se,xe)|0,l=l+Math.imul(le,Ke)|0,T=T+Math.imul(le,xe)|0,S=S+Math.imul(Me,Je)|0,l=l+Math.imul(Me,Oe)|0,l=l+Math.imul(ge,Je)|0,T=T+Math.imul(ge,Oe)|0,S=S+Math.imul(Ae,Ge)|0,l=l+Math.imul(Ae,Ce)|0,l=l+Math.imul(de,Ge)|0,T=T+Math.imul(de,Ce)|0,S=S+Math.imul(De,$e)|0,l=l+Math.imul(De,Re)|0,l=l+Math.imul(Ee,$e)|0,T=T+Math.imul(Ee,Re)|0,S=S+Math.imul(we,dt)|0,l=l+Math.imul(we,Ye)|0,l=l+Math.imul(me,dt)|0,T=T+Math.imul(me,Ye)|0,S=S+Math.imul(W,tt)|0,l=l+Math.imul(W,lt)|0,l=l+Math.imul(oe,tt)|0,T=T+Math.imul(oe,lt)|0;var _r=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(_r>>>26)|0,_r&=67108863,S=Math.imul(Te,He),l=Math.imul(Te,Ie),l=l+Math.imul(_e,He)|0,T=Math.imul(_e,Ie),S=S+Math.imul(Pe,Ke)|0,l=l+Math.imul(Pe,xe)|0,l=l+Math.imul(pe,Ke)|0,T=T+Math.imul(pe,xe)|0,S=S+Math.imul(Se,Je)|0,l=l+Math.imul(Se,Oe)|0,l=l+Math.imul(le,Je)|0,T=T+Math.imul(le,Oe)|0,S=S+Math.imul(Me,Ge)|0,l=l+Math.imul(Me,Ce)|0,l=l+Math.imul(ge,Ge)|0,T=T+Math.imul(ge,Ce)|0,S=S+Math.imul(Ae,$e)|0,l=l+Math.imul(Ae,Re)|0,l=l+Math.imul(de,$e)|0,T=T+Math.imul(de,Re)|0,S=S+Math.imul(De,dt)|0,l=l+Math.imul(De,Ye)|0,l=l+Math.imul(Ee,dt)|0,T=T+Math.imul(Ee,Ye)|0,S=S+Math.imul(we,tt)|0,l=l+Math.imul(we,lt)|0,l=l+Math.imul(me,tt)|0,T=T+Math.imul(me,lt)|0;var wr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(wr>>>26)|0,wr&=67108863,S=Math.imul(Te,Ke),l=Math.imul(Te,xe),l=l+Math.imul(_e,Ke)|0,T=Math.imul(_e,xe),S=S+Math.imul(Pe,Je)|0,l=l+Math.imul(Pe,Oe)|0,l=l+Math.imul(pe,Je)|0,T=T+Math.imul(pe,Oe)|0,S=S+Math.imul(Se,Ge)|0,l=l+Math.imul(Se,Ce)|0,l=l+Math.imul(le,Ge)|0,T=T+Math.imul(le,Ce)|0,S=S+Math.imul(Me,$e)|0,l=l+Math.imul(Me,Re)|0,l=l+Math.imul(ge,$e)|0,T=T+Math.imul(ge,Re)|0,S=S+Math.imul(Ae,dt)|0,l=l+Math.imul(Ae,Ye)|0,l=l+Math.imul(de,dt)|0,T=T+Math.imul(de,Ye)|0,S=S+Math.imul(De,tt)|0,l=l+Math.imul(De,lt)|0,l=l+Math.imul(Ee,tt)|0,T=T+Math.imul(Ee,lt)|0;var Zt=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,S=Math.imul(Te,Je),l=Math.imul(Te,Oe),l=l+Math.imul(_e,Je)|0,T=Math.imul(_e,Oe),S=S+Math.imul(Pe,Ge)|0,l=l+Math.imul(Pe,Ce)|0,l=l+Math.imul(pe,Ge)|0,T=T+Math.imul(pe,Ce)|0,S=S+Math.imul(Se,$e)|0,l=l+Math.imul(Se,Re)|0,l=l+Math.imul(le,$e)|0,T=T+Math.imul(le,Re)|0,S=S+Math.imul(Me,dt)|0,l=l+Math.imul(Me,Ye)|0,l=l+Math.imul(ge,dt)|0,T=T+Math.imul(ge,Ye)|0,S=S+Math.imul(Ae,tt)|0,l=l+Math.imul(Ae,lt)|0,l=l+Math.imul(de,tt)|0,T=T+Math.imul(de,lt)|0;var Rr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,S=Math.imul(Te,Ge),l=Math.imul(Te,Ce),l=l+Math.imul(_e,Ge)|0,T=Math.imul(_e,Ce),S=S+Math.imul(Pe,$e)|0,l=l+Math.imul(Pe,Re)|0,l=l+Math.imul(pe,$e)|0,T=T+Math.imul(pe,Re)|0,S=S+Math.imul(Se,dt)|0,l=l+Math.imul(Se,Ye)|0,l=l+Math.imul(le,dt)|0,T=T+Math.imul(le,Ye)|0,S=S+Math.imul(Me,tt)|0,l=l+Math.imul(Me,lt)|0,l=l+Math.imul(ge,tt)|0,T=T+Math.imul(ge,lt)|0;var Tr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,S=Math.imul(Te,$e),l=Math.imul(Te,Re),l=l+Math.imul(_e,$e)|0,T=Math.imul(_e,Re),S=S+Math.imul(Pe,dt)|0,l=l+Math.imul(Pe,Ye)|0,l=l+Math.imul(pe,dt)|0,T=T+Math.imul(pe,Ye)|0,S=S+Math.imul(Se,tt)|0,l=l+Math.imul(Se,lt)|0,l=l+Math.imul(le,tt)|0,T=T+Math.imul(le,lt)|0;var Nr=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,S=Math.imul(Te,dt),l=Math.imul(Te,Ye),l=l+Math.imul(_e,dt)|0,T=Math.imul(_e,Ye),S=S+Math.imul(Pe,tt)|0,l=l+Math.imul(Pe,lt)|0,l=l+Math.imul(pe,tt)|0,T=T+Math.imul(pe,lt)|0;var Ei=(y+S|0)+((l&8191)<<13)|0;y=(T+(l>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,S=Math.imul(Te,tt),l=Math.imul(Te,lt),l=l+Math.imul(_e,tt)|0,T=Math.imul(_e,lt);var ai=(y+S|0)+((l&8191)<<13)|0;return y=(T+(l>>>13)|0)+(ai>>>26)|0,ai&=67108863,x[0]=xr,x[1]=Dr,x[2]=Ar,x[3]=Ir,x[4]=er,x[5]=cr,x[6]=Or,x[7]=ur,x[8]=Pr,x[9]=Cr,x[10]=hr,x[11]=_r,x[12]=wr,x[13]=Zt,x[14]=Rr,x[15]=Tr,x[16]=Nr,x[17]=Ei,x[18]=ai,y!==0&&(x[19]=y,b.length++),b};Math.imul||(P=z);function N(h,r,o){o.negative=r.negative^h.negative,o.length=h.length+r.length;for(var b=0,D=0,I=0;I<o.length-1;I++){var x=D;D=0;for(var y=b&67108863,S=Math.min(I,r.length-1),l=Math.max(0,I-h.length+1);l<=S;l++){var T=I-l,te=h.words[T]|0,ee=r.words[l]|0,ae=te*ee,Q=ae&67108863;x=x+(ae/67108864|0)|0,Q=Q+y|0,y=Q&67108863,x=x+(Q>>>26)|0,D+=x>>>26,x&=67108863}o.words[I]=y,b=x,x=D}return b!==0?o.words[I]=b:o.length--,o._strip()}function q(h,r,o){return N(h,r,o)}s.prototype.mulTo=function(r,o){var b,D=this.length+r.length;return this.length===10&&r.length===10?b=P(this,r,o):D<63?b=z(this,r,o):D<1024?b=N(this,r,o):b=q(this,r,o),b},s.prototype.mul=function(r){var o=new s(null);return o.words=new Array(this.length+r.length),this.mulTo(r,o)},s.prototype.mulf=function(r){var o=new s(null);return o.words=new Array(this.length+r.length),q(this,r,o)},s.prototype.imul=function(r){return this.clone().mulTo(r,this)},s.prototype.imuln=function(r){var o=r<0;o&&(r=-r),n(typeof r=="number"),n(r<67108864);for(var b=0,D=0;D<this.length;D++){var I=(this.words[D]|0)*r,x=(I&67108863)+(b&67108863);b>>=26,b+=I/67108864|0,b+=x>>>26,this.words[D]=x&67108863}return b!==0&&(this.words[D]=b,this.length++),o?this.ineg():this},s.prototype.muln=function(r){return this.clone().imuln(r)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(r){var o=B(r);if(o.length===0)return new s(1);for(var b=this,D=0;D<o.length&&o[D]===0;D++,b=b.sqr());if(++D<o.length)for(var I=b.sqr();D<o.length;D++,I=I.sqr())o[D]!==0&&(b=b.mul(I));return b},s.prototype.iushln=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26,D=67108863>>>26-o<<26-o,I;if(o!==0){var x=0;for(I=0;I<this.length;I++){var y=this.words[I]&D,S=(this.words[I]|0)-y<<o;this.words[I]=S|x,x=y>>>26-o}x&&(this.words[I]=x,this.length++)}if(b!==0){for(I=this.length-1;I>=0;I--)this.words[I+b]=this.words[I];for(I=0;I<b;I++)this.words[I]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(r){return n(this.negative===0),this.iushln(r)},s.prototype.iushrn=function(r,o,b){n(typeof r=="number"&&r>=0);var D;o?D=(o-o%26)/26:D=0;var I=r%26,x=Math.min((r-I)/26,this.length),y=67108863^67108863>>>I<<I,S=b;if(D-=x,D=Math.max(0,D),S){for(var l=0;l<x;l++)S.words[l]=this.words[l];S.length=x}if(x!==0)if(this.length>x)for(this.length-=x,l=0;l<this.length;l++)this.words[l]=this.words[l+x];else this.words[0]=0,this.length=1;var T=0;for(l=this.length-1;l>=0&&(T!==0||l>=D);l--){var te=this.words[l]|0;this.words[l]=T<<26-I|te>>>I,T=te&y}return S&&T!==0&&(S.words[S.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(r,o,b){return n(this.negative===0),this.iushrn(r,o,b)},s.prototype.shln=function(r){return this.clone().ishln(r)},s.prototype.ushln=function(r){return this.clone().iushln(r)},s.prototype.shrn=function(r){return this.clone().ishrn(r)},s.prototype.ushrn=function(r){return this.clone().iushrn(r)},s.prototype.testn=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26,D=1<<o;if(this.length<=b)return!1;var I=this.words[b];return!!(I&D)},s.prototype.imaskn=function(r){n(typeof r=="number"&&r>=0);var o=r%26,b=(r-o)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(o!==0&&b++,this.length=Math.min(b,this.length),o!==0){var D=67108863^67108863>>>o<<o;this.words[this.length-1]&=D}return this._strip()},s.prototype.maskn=function(r){return this.clone().imaskn(r)},s.prototype.iaddn=function(r){return n(typeof r=="number"),n(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(this.words[0]|0)<=r?(this.words[0]=r-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},s.prototype._iaddn=function(r){this.words[0]+=r;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},s.prototype.isubn=function(r){if(n(typeof r=="number"),n(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this._strip()},s.prototype.addn=function(r){return this.clone().iaddn(r)},s.prototype.subn=function(r){return this.clone().isubn(r)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(r,o,b){var D=r.length+b,I;this._expand(D);var x,y=0;for(I=0;I<r.length;I++){x=(this.words[I+b]|0)+y;var S=(r.words[I]|0)*o;x-=S&67108863,y=(x>>26)-(S/67108864|0),this.words[I+b]=x&67108863}for(;I<this.length-b;I++)x=(this.words[I+b]|0)+y,y=x>>26,this.words[I+b]=x&67108863;if(y===0)return this._strip();for(n(y===-1),y=0,I=0;I<this.length;I++)x=-(this.words[I]|0)+y,y=x>>26,this.words[I]=x&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(r,o){var b=this.length-r.length,D=this.clone(),I=r,x=I.words[I.length-1]|0,y=this._countBits(x);b=26-y,b!==0&&(I=I.ushln(b),D.iushln(b),x=I.words[I.length-1]|0);var S=D.length-I.length,l;if(o!=="mod"){l=new s(null),l.length=S+1,l.words=new Array(l.length);for(var T=0;T<l.length;T++)l.words[T]=0}var te=D.clone()._ishlnsubmul(I,1,S);te.negative===0&&(D=te,l&&(l.words[S]=1));for(var ee=S-1;ee>=0;ee--){var ae=(D.words[I.length+ee]|0)*67108864+(D.words[I.length+ee-1]|0);for(ae=Math.min(ae/x|0,67108863),D._ishlnsubmul(I,ae,ee);D.negative!==0;)ae--,D.negative=0,D._ishlnsubmul(I,1,ee),D.isZero()||(D.negative^=1);l&&(l.words[ee]=ae)}return l&&l._strip(),D._strip(),o!=="div"&&b!==0&&D.iushrn(b),{div:l||null,mod:D}},s.prototype.divmod=function(r,o,b){if(n(!r.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var D,I,x;return this.negative!==0&&r.negative===0?(x=this.neg().divmod(r,o),o!=="mod"&&(D=x.div.neg()),o!=="div"&&(I=x.mod.neg(),b&&I.negative!==0&&I.iadd(r)),{div:D,mod:I}):this.negative===0&&r.negative!==0?(x=this.divmod(r.neg(),o),o!=="mod"&&(D=x.div.neg()),{div:D,mod:x.mod}):this.negative&r.negative?(x=this.neg().divmod(r.neg(),o),o!=="div"&&(I=x.mod.neg(),b&&I.negative!==0&&I.isub(r)),{div:x.div,mod:I}):r.length>this.length||this.cmp(r)<0?{div:new s(0),mod:this}:r.length===1?o==="div"?{div:this.divn(r.words[0]),mod:null}:o==="mod"?{div:null,mod:new s(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new s(this.modrn(r.words[0]))}:this._wordDiv(r,o)},s.prototype.div=function(r){return this.divmod(r,"div",!1).div},s.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},s.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},s.prototype.divRound=function(r){var o=this.divmod(r);if(o.mod.isZero())return o.div;var b=o.div.negative!==0?o.mod.isub(r):o.mod,D=r.ushrn(1),I=r.andln(1),x=b.cmp(D);return x<0||I===1&&x===0?o.div:o.div.negative!==0?o.div.isubn(1):o.div.iaddn(1)},s.prototype.modrn=function(r){var o=r<0;o&&(r=-r),n(r<=67108863);for(var b=(1<<26)%r,D=0,I=this.length-1;I>=0;I--)D=(b*D+(this.words[I]|0))%r;return o?-D:D},s.prototype.modn=function(r){return this.modrn(r)},s.prototype.idivn=function(r){var o=r<0;o&&(r=-r),n(r<=67108863);for(var b=0,D=this.length-1;D>=0;D--){var I=(this.words[D]|0)+b*67108864;this.words[D]=I/r|0,b=I%r}return this._strip(),o?this.ineg():this},s.prototype.divn=function(r){return this.clone().idivn(r)},s.prototype.egcd=function(r){n(r.negative===0),n(!r.isZero());var o=this,b=r.clone();o.negative!==0?o=o.umod(r):o=o.clone();for(var D=new s(1),I=new s(0),x=new s(0),y=new s(1),S=0;o.isEven()&&b.isEven();)o.iushrn(1),b.iushrn(1),++S;for(var l=b.clone(),T=o.clone();!o.isZero();){for(var te=0,ee=1;!(o.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(o.iushrn(te);te-- >0;)(D.isOdd()||I.isOdd())&&(D.iadd(l),I.isub(T)),D.iushrn(1),I.iushrn(1);for(var ae=0,Q=1;!(b.words[0]&Q)&&ae<26;++ae,Q<<=1);if(ae>0)for(b.iushrn(ae);ae-- >0;)(x.isOdd()||y.isOdd())&&(x.iadd(l),y.isub(T)),x.iushrn(1),y.iushrn(1);o.cmp(b)>=0?(o.isub(b),D.isub(x),I.isub(y)):(b.isub(o),x.isub(D),y.isub(I))}return{a:x,b:y,gcd:b.iushln(S)}},s.prototype._invmp=function(r){n(r.negative===0),n(!r.isZero());var o=this,b=r.clone();o.negative!==0?o=o.umod(r):o=o.clone();for(var D=new s(1),I=new s(0),x=b.clone();o.cmpn(1)>0&&b.cmpn(1)>0;){for(var y=0,S=1;!(o.words[0]&S)&&y<26;++y,S<<=1);if(y>0)for(o.iushrn(y);y-- >0;)D.isOdd()&&D.iadd(x),D.iushrn(1);for(var l=0,T=1;!(b.words[0]&T)&&l<26;++l,T<<=1);if(l>0)for(b.iushrn(l);l-- >0;)I.isOdd()&&I.iadd(x),I.iushrn(1);o.cmp(b)>=0?(o.isub(b),D.isub(I)):(b.isub(o),I.isub(D))}var te;return o.cmpn(1)===0?te=D:te=I,te.cmpn(0)<0&&te.iadd(r),te},s.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var o=this.clone(),b=r.clone();o.negative=0,b.negative=0;for(var D=0;o.isEven()&&b.isEven();D++)o.iushrn(1),b.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;b.isEven();)b.iushrn(1);var I=o.cmp(b);if(I<0){var x=o;o=b,b=x}else if(I===0||b.cmpn(1)===0)break;o.isub(b)}while(!0);return b.iushln(D)},s.prototype.invm=function(r){return this.egcd(r).a.umod(r)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(r){return this.words[0]&r},s.prototype.bincn=function(r){n(typeof r=="number");var o=r%26,b=(r-o)/26,D=1<<o;if(this.length<=b)return this._expand(b+1),this.words[b]|=D,this;for(var I=D,x=b;I!==0&&x<this.length;x++){var y=this.words[x]|0;y+=I,I=y>>>26,y&=67108863,this.words[x]=y}return I!==0&&(this.words[x]=I,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(r){var o=r<0;if(this.negative!==0&&!o)return-1;if(this.negative===0&&o)return 1;this._strip();var b;if(this.length>1)b=1;else{o&&(r=-r),n(r<=67108863,"Number is too big");var D=this.words[0]|0;b=D===r?0:D<r?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var o=this.ucmp(r);return this.negative!==0?-o|0:o},s.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var o=0,b=this.length-1;b>=0;b--){var D=this.words[b]|0,I=r.words[b]|0;if(D!==I){D<I?o=-1:D>I&&(o=1);break}}return o},s.prototype.gtn=function(r){return this.cmpn(r)===1},s.prototype.gt=function(r){return this.cmp(r)===1},s.prototype.gten=function(r){return this.cmpn(r)>=0},s.prototype.gte=function(r){return this.cmp(r)>=0},s.prototype.ltn=function(r){return this.cmpn(r)===-1},s.prototype.lt=function(r){return this.cmp(r)===-1},s.prototype.lten=function(r){return this.cmpn(r)<=0},s.prototype.lte=function(r){return this.cmp(r)<=0},s.prototype.eqn=function(r){return this.cmpn(r)===0},s.prototype.eq=function(r){return this.cmp(r)===0},s.red=function(r){return new C(r)},s.prototype.toRed=function(r){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(r){return this.red=r,this},s.prototype.forceRed=function(r){return n(!this.red,"Already a number in reduction context"),this._forceRed(r)},s.prototype.redAdd=function(r){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},s.prototype.redIAdd=function(r){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},s.prototype.redSub=function(r){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},s.prototype.redISub=function(r){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},s.prototype.redShl=function(r){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},s.prototype.redMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},s.prototype.redIMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(r){return n(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var k={k256:null,p224:null,p192:null,p25519:null};function F(h,r){this.name=h,this.p=new s(r,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var r=new s(null);return r.words=new Array(Math.ceil(this.n/13)),r},F.prototype.ireduce=function(r){var o=r,b;do this.split(o,this.tmp),o=this.imulK(o),o=o.iadd(this.tmp),b=o.bitLength();while(b>this.n);var D=b<this.n?-1:o.ucmp(this.p);return D===0?(o.words[0]=0,o.length=1):D>0?o.isub(this.p):o.strip!==void 0?o.strip():o._strip(),o},F.prototype.split=function(r,o){r.iushrn(this.n,0,o)},F.prototype.imulK=function(r){return r.imul(this.k)};function O(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(O,F),O.prototype.split=function(r,o){for(var b=4194303,D=Math.min(r.length,9),I=0;I<D;I++)o.words[I]=r.words[I];if(o.length=D,r.length<=9){r.words[0]=0,r.length=1;return}var x=r.words[9];for(o.words[o.length++]=x&b,I=10;I<r.length;I++){var y=r.words[I]|0;r.words[I-10]=(y&b)<<4|x>>>22,x=y}x>>>=22,r.words[I-10]=x,x===0&&r.length>10?r.length-=10:r.length-=9},O.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var o=0,b=0;b<r.length;b++){var D=r.words[b]|0;o+=D*977,r.words[b]=o&67108863,o=D*64+(o/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r};function j(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(j,F);function J(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(J,F);function L(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(L,F),L.prototype.imulK=function(r){for(var o=0,b=0;b<r.length;b++){var D=(r.words[b]|0)*19+o,I=D&67108863;D>>>=26,r.words[b]=I,o=D}return o!==0&&(r.words[r.length++]=o),r},s._prime=function(r){if(k[r])return k[r];var o;if(r==="k256")o=new O;else if(r==="p224")o=new j;else if(r==="p192")o=new J;else if(r==="p25519")o=new L;else throw new Error("Unknown prime "+r);return k[r]=o,o};function C(h){if(typeof h=="string"){var r=s._prime(h);this.m=r.p,this.prime=r}else n(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}C.prototype._verify1=function(r){n(r.negative===0,"red works only with positives"),n(r.red,"red works only with red numbers")},C.prototype._verify2=function(r,o){n((r.negative|o.negative)===0,"red works only with positives"),n(r.red&&r.red===o.red,"red works only with red numbers")},C.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(u(r,r.umod(this.m)._forceRed(this)),r)},C.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},C.prototype.add=function(r,o){this._verify2(r,o);var b=r.add(o);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},C.prototype.iadd=function(r,o){this._verify2(r,o);var b=r.iadd(o);return b.cmp(this.m)>=0&&b.isub(this.m),b},C.prototype.sub=function(r,o){this._verify2(r,o);var b=r.sub(o);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},C.prototype.isub=function(r,o){this._verify2(r,o);var b=r.isub(o);return b.cmpn(0)<0&&b.iadd(this.m),b},C.prototype.shl=function(r,o){return this._verify1(r),this.imod(r.ushln(o))},C.prototype.imul=function(r,o){return this._verify2(r,o),this.imod(r.imul(o))},C.prototype.mul=function(r,o){return this._verify2(r,o),this.imod(r.mul(o))},C.prototype.isqr=function(r){return this.imul(r,r.clone())},C.prototype.sqr=function(r){return this.mul(r,r)},C.prototype.sqrt=function(r){if(r.isZero())return r.clone();var o=this.m.andln(3);if(n(o%2===1),o===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(r,b)}for(var D=this.m.subn(1),I=0;!D.isZero()&&D.andln(1)===0;)I++,D.iushrn(1);n(!D.isZero());var x=new s(1).toRed(this),y=x.redNeg(),S=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,S).cmp(y)!==0;)l.redIAdd(y);for(var T=this.pow(l,D),te=this.pow(r,D.addn(1).iushrn(1)),ee=this.pow(r,D),ae=I;ee.cmp(x)!==0;){for(var Q=ee,X=0;Q.cmp(x)!==0;X++)Q=Q.redSqr();n(X<ae);var Y=this.pow(T,new s(1).iushln(ae-X-1));te=te.redMul(Y),T=Y.redSqr(),ee=ee.redMul(T),ae=X}return te},C.prototype.invm=function(r){var o=r._invmp(this.m);return o.negative!==0?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},C.prototype.pow=function(r,o){if(o.isZero())return new s(1).toRed(this);if(o.cmpn(1)===0)return r.clone();var b=4,D=new Array(1<<b);D[0]=new s(1).toRed(this),D[1]=r;for(var I=2;I<D.length;I++)D[I]=this.mul(D[I-1],r);var x=D[0],y=0,S=0,l=o.bitLength()%26;for(l===0&&(l=26),I=o.length-1;I>=0;I--){for(var T=o.words[I],te=l-1;te>=0;te--){var ee=T>>te&1;if(x!==D[0]&&(x=this.sqr(x)),ee===0&&y===0){S=0;continue}y<<=1,y|=ee,S++,!(S!==b&&(I!==0||te!==0))&&(x=this.mul(x,D[y]),S=0,y=0)}l=26}return x},C.prototype.convertTo=function(r){var o=r.umod(this.m);return o===r?o.clone():o},C.prototype.convertFrom=function(r){var o=r.clone();return o.red=null,o},s.mont=function(r){return new g(r)};function g(h){C.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(g,C),g.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},g.prototype.convertFrom=function(r){var o=this.imod(r.mul(this.rinv));return o.red=null,o},g.prototype.imul=function(r,o){if(r.isZero()||o.isZero())return r.words[0]=0,r.length=1,r;var b=r.imul(o),D=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(D).iushrn(this.shift),x=I;return I.cmp(this.m)>=0?x=I.isub(this.m):I.cmpn(0)<0&&(x=I.iadd(this.m)),x._forceRed(this)},g.prototype.mul=function(r,o){if(r.isZero()||o.isZero())return new s(0)._forceRed(this);var b=r.mul(o),D=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(D).iushrn(this.shift),x=I;return I.cmp(this.m)>=0?x=I.isub(this.m):I.cmpn(0)<0&&(x=I.iadd(this.m)),x._forceRed(this)},g.prototype.invm=function(r){var o=this.imod(r._invmp(this.m).mul(this.r2));return o._forceRed(this)}})(a,St)}(So)),So.exports}var bi={},fu={},cu={},uu={},hu,O1;function Lh(){if(O1)return hu;O1=1;var a=Tt,e=a.Buffer,t={},n;for(n in a)a.hasOwnProperty(n)&&(n==="SlowBuffer"||n==="Buffer"||(t[n]=a[n]));var c=t.Buffer={};for(n in e)e.hasOwnProperty(n)&&(n==="allocUnsafe"||n==="allocUnsafeSlow"||(c[n]=e[n]));if(t.Buffer.prototype=e.prototype,(!c.from||c.from===Uint8Array.from)&&(c.from=function(s,m,v){if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof s);if(s&&typeof s.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);return e(s,m,v)}),c.alloc||(c.alloc=function(s,m,v){if(typeof s!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof s);if(s<0||s>=2*(1<<30))throw new RangeError('The value "'+s+'" is invalid for option "size"');var d=e(s);return!m||m.length===0?d.fill(0):typeof v=="string"?d.fill(m,v):d.fill(m),d}),!t.kStringMaxLength)try{t.kStringMaxLength=ii.binding("buffer").kStringMaxLength}catch{}return t.constants||(t.constants={MAX_LENGTH:t.kMaxLength},t.kStringMaxLength&&(t.constants.MAX_STRING_LENGTH=t.kStringMaxLength)),hu=t,hu}var lu={},P1;function Fh(){if(P1)return lu;P1=1;const a=Ht;function e(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}lu.Reporter=e,e.prototype.isError=function(c){return c instanceof t},e.prototype.save=function(){const c=this._reporterState;return{obj:c.obj,pathLen:c.path.length}},e.prototype.restore=function(c){const s=this._reporterState;s.obj=c.obj,s.path=s.path.slice(0,c.pathLen)},e.prototype.enterKey=function(c){return this._reporterState.path.push(c)},e.prototype.exitKey=function(c){const s=this._reporterState;s.path=s.path.slice(0,c-1)},e.prototype.leaveKey=function(c,s,m){const v=this._reporterState;this.exitKey(c),v.obj!==null&&(v.obj[s]=m)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){const c=this._reporterState,s=c.obj;return c.obj={},s},e.prototype.leaveObject=function(c){const s=this._reporterState,m=s.obj;return s.obj=c,m},e.prototype.error=function(c){let s;const m=this._reporterState,v=c instanceof t;if(v?s=c:s=new t(m.path.map(function(d){return"["+JSON.stringify(d)+"]"}).join(""),c.message||c,c.stack),!m.options.partial)throw s;return v||m.errors.push(s),s},e.prototype.wrapResult=function(c){const s=this._reporterState;return s.options.partial?{result:this.isError(c)?null:c,errors:s.errors}:c};function t(n,c){this.path=n,this.rethrow(c)}return a(t,Error),t.prototype.rethrow=function(c){if(this.message=c+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,t),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},lu}var mo={},C1;function Zs(){if(C1)return mo;C1=1;const a=Ht,e=Fh().Reporter,t=Lh().Buffer;function n(s,m){if(e.call(this,m),!t.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}a(n,e),mo.DecoderBuffer=n,n.isDecoderBuffer=function(m){return m instanceof n?!0:typeof m=="object"&&t.isBuffer(m.base)&&m.constructor.name==="DecoderBuffer"&&typeof m.offset=="number"&&typeof m.length=="number"&&typeof m.save=="function"&&typeof m.restore=="function"&&typeof m.isEmpty=="function"&&typeof m.readUInt8=="function"&&typeof m.skip=="function"&&typeof m.raw=="function"},n.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},n.prototype.restore=function(m){const v=new n(this.base);return v.offset=m.offset,v.length=this.offset,this.offset=m.offset,e.prototype.restore.call(this,m.reporter),v},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(m){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(m||"DecoderBuffer overrun")},n.prototype.skip=function(m,v){if(!(this.offset+m<=this.length))return this.error(v||"DecoderBuffer overrun");const d=new n(this.base);return d._reporterState=this._reporterState,d.offset=this.offset,d.length=this.offset+m,this.offset+=m,d},n.prototype.raw=function(m){return this.base.slice(m?m.offset:this.offset,this.length)};function c(s,m){if(Array.isArray(s))this.length=0,this.value=s.map(function(v){return c.isEncoderBuffer(v)||(v=new c(v,m)),this.length+=v.length,v},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return m.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=t.byteLength(s);else if(t.isBuffer(s))this.value=s,this.length=s.length;else return m.error("Unsupported type: "+typeof s)}return mo.EncoderBuffer=c,c.isEncoderBuffer=function(m){return m instanceof c?!0:typeof m=="object"&&m.constructor.name==="EncoderBuffer"&&typeof m.length=="number"&&typeof m.join=="function"},c.prototype.join=function(m,v){return m||(m=t.alloc(this.length)),v||(v=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(d){d.join(m,v),v+=d.length}):(typeof this.value=="number"?m[v]=this.value:typeof this.value=="string"?m.write(this.value,v):t.isBuffer(this.value)&&this.value.copy(m,v),v+=this.length)),m},mo}var du,R1;function jh(){if(R1)return du;R1=1;const a=Fh().Reporter,e=Zs().EncoderBuffer,t=Zs().DecoderBuffer,n=Bn,c=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(c),m=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function v(p,u,_){const w={};this._baseState=w,w.name=_,w.enc=p,w.parent=u||null,w.children=null,w.tag=null,w.args=null,w.reverseArgs=null,w.choice=null,w.optional=!1,w.any=!1,w.obj=!1,w.use=null,w.useDecoder=null,w.key=null,w.default=null,w.explicit=null,w.implicit=null,w.contains=null,w.parent||(w.children=[],this._wrap())}du=v;const d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return v.prototype.clone=function(){const u=this._baseState,_={};d.forEach(function(M){_[M]=u[M]});const w=new this.constructor(_.parent);return w._baseState=_,w},v.prototype._wrap=function(){const u=this._baseState;s.forEach(function(_){this[_]=function(){const M=new this.constructor(this);return u.children.push(M),M[_].apply(M,arguments)}},this)},v.prototype._init=function(u){const _=this._baseState;n(_.parent===null),u.call(this),_.children=_.children.filter(function(w){return w._baseState.parent===this},this),n.equal(_.children.length,1,"Root node can have only one child")},v.prototype._useArgs=function(u){const _=this._baseState,w=u.filter(function(M){return M instanceof this.constructor},this);u=u.filter(function(M){return!(M instanceof this.constructor)},this),w.length!==0&&(n(_.children===null),_.children=w,w.forEach(function(M){M._baseState.parent=this},this)),u.length!==0&&(n(_.args===null),_.args=u,_.reverseArgs=u.map(function(M){if(typeof M!="object"||M.constructor!==Object)return M;const A={};return Object.keys(M).forEach(function(R){R==(R|0)&&(R|=0);const B=M[R];A[B]=R}),A}))},m.forEach(function(p){v.prototype[p]=function(){const _=this._baseState;throw new Error(p+" not implemented for encoding: "+_.enc)}}),c.forEach(function(p){v.prototype[p]=function(){const _=this._baseState,w=Array.prototype.slice.call(arguments);return n(_.tag===null),_.tag=p,this._useArgs(w),this}}),v.prototype.use=function(u){n(u);const _=this._baseState;return n(_.use===null),_.use=u,this},v.prototype.optional=function(){const u=this._baseState;return u.optional=!0,this},v.prototype.def=function(u){const _=this._baseState;return n(_.default===null),_.default=u,_.optional=!0,this},v.prototype.explicit=function(u){const _=this._baseState;return n(_.explicit===null&&_.implicit===null),_.explicit=u,this},v.prototype.implicit=function(u){const _=this._baseState;return n(_.explicit===null&&_.implicit===null),_.implicit=u,this},v.prototype.obj=function(){const u=this._baseState,_=Array.prototype.slice.call(arguments);return u.obj=!0,_.length!==0&&this._useArgs(_),this},v.prototype.key=function(u){const _=this._baseState;return n(_.key===null),_.key=u,this},v.prototype.any=function(){const u=this._baseState;return u.any=!0,this},v.prototype.choice=function(u){const _=this._baseState;return n(_.choice===null),_.choice=u,this._useArgs(Object.keys(u).map(function(w){return u[w]})),this},v.prototype.contains=function(u){const _=this._baseState;return n(_.use===null),_.contains=u,this},v.prototype._decode=function(u,_){const w=this._baseState;if(w.parent===null)return u.wrapResult(w.children[0]._decode(u,_));let M=w.default,A=!0,R=null;if(w.key!==null&&(R=u.enterKey(w.key)),w.optional){let z=null;if(w.explicit!==null?z=w.explicit:w.implicit!==null?z=w.implicit:w.tag!==null&&(z=w.tag),z===null&&!w.any){const P=u.save();try{w.choice===null?this._decodeGeneric(w.tag,u,_):this._decodeChoice(u,_),A=!0}catch{A=!1}u.restore(P)}else if(A=this._peekTag(u,z,w.any),u.isError(A))return A}let B;if(w.obj&&A&&(B=u.enterObject()),A){if(w.explicit!==null){const P=this._decodeTag(u,w.explicit);if(u.isError(P))return P;u=P}const z=u.offset;if(w.use===null&&w.choice===null){let P;w.any&&(P=u.save());const N=this._decodeTag(u,w.implicit!==null?w.implicit:w.tag,w.any);if(u.isError(N))return N;w.any?M=u.raw(P):u=N}if(_&&_.track&&w.tag!==null&&_.track(u.path(),z,u.length,"tagged"),_&&_.track&&w.tag!==null&&_.track(u.path(),u.offset,u.length,"content"),w.any||(w.choice===null?M=this._decodeGeneric(w.tag,u,_):M=this._decodeChoice(u,_)),u.isError(M))return M;if(!w.any&&w.choice===null&&w.children!==null&&w.children.forEach(function(N){N._decode(u,_)}),w.contains&&(w.tag==="octstr"||w.tag==="bitstr")){const P=new t(M);M=this._getUse(w.contains,u._reporterState.obj)._decode(P,_)}}return w.obj&&A&&(M=u.leaveObject(B)),w.key!==null&&(M!==null||A===!0)?u.leaveKey(R,w.key,M):R!==null&&u.exitKey(R),M},v.prototype._decodeGeneric=function(u,_,w){const M=this._baseState;return u==="seq"||u==="set"?null:u==="seqof"||u==="setof"?this._decodeList(_,u,M.args[0],w):/str$/.test(u)?this._decodeStr(_,u,w):u==="objid"&&M.args?this._decodeObjid(_,M.args[0],M.args[1],w):u==="objid"?this._decodeObjid(_,null,null,w):u==="gentime"||u==="utctime"?this._decodeTime(_,u,w):u==="null_"?this._decodeNull(_,w):u==="bool"?this._decodeBool(_,w):u==="objDesc"?this._decodeStr(_,u,w):u==="int"||u==="enum"?this._decodeInt(_,M.args&&M.args[0],w):M.use!==null?this._getUse(M.use,_._reporterState.obj)._decode(_,w):_.error("unknown tag: "+u)},v.prototype._getUse=function(u,_){const w=this._baseState;return w.useDecoder=this._use(u,_),n(w.useDecoder._baseState.parent===null),w.useDecoder=w.useDecoder._baseState.children[0],w.implicit!==w.useDecoder._baseState.implicit&&(w.useDecoder=w.useDecoder.clone(),w.useDecoder._baseState.implicit=w.implicit),w.useDecoder},v.prototype._decodeChoice=function(u,_){const w=this._baseState;let M=null,A=!1;return Object.keys(w.choice).some(function(R){const B=u.save(),z=w.choice[R];try{const P=z._decode(u,_);if(u.isError(P))return!1;M={type:R,value:P},A=!0}catch{return u.restore(B),!1}return!0},this),A?M:u.error("Choice not matched")},v.prototype._createEncoderBuffer=function(u){return new e(u,this.reporter)},v.prototype._encode=function(u,_,w){const M=this._baseState;if(M.default!==null&&M.default===u)return;const A=this._encodeValue(u,_,w);if(A!==void 0&&!this._skipDefault(A,_,w))return A},v.prototype._encodeValue=function(u,_,w){const M=this._baseState;if(M.parent===null)return M.children[0]._encode(u,_||new a);let A=null;if(this.reporter=_,M.optional&&u===void 0)if(M.default!==null)u=M.default;else return;let R=null,B=!1;if(M.any)A=this._createEncoderBuffer(u);else if(M.choice)A=this._encodeChoice(u,_);else if(M.contains)R=this._getUse(M.contains,w)._encode(u,_),B=!0;else if(M.children)R=M.children.map(function(z){if(z._baseState.tag==="null_")return z._encode(null,_,u);if(z._baseState.key===null)return _.error("Child should have a key");const P=_.enterKey(z._baseState.key);if(typeof u!="object")return _.error("Child expected, but input is not object");const N=z._encode(u[z._baseState.key],_,u);return _.leaveKey(P),N},this).filter(function(z){return z}),R=this._createEncoderBuffer(R);else if(M.tag==="seqof"||M.tag==="setof"){if(!(M.args&&M.args.length===1))return _.error("Too many args for : "+M.tag);if(!Array.isArray(u))return _.error("seqof/setof, but data is not Array");const z=this.clone();z._baseState.implicit=null,R=this._createEncoderBuffer(u.map(function(P){const N=this._baseState;return this._getUse(N.args[0],u)._encode(P,_)},z))}else M.use!==null?A=this._getUse(M.use,w)._encode(u,_):(R=this._encodePrimitive(M.tag,u),B=!0);if(!M.any&&M.choice===null){const z=M.implicit!==null?M.implicit:M.tag,P=M.implicit===null?"universal":"context";z===null?M.use===null&&_.error("Tag could be omitted only for .use()"):M.use===null&&(A=this._encodeComposite(z,B,P,R))}return M.explicit!==null&&(A=this._encodeComposite(M.explicit,!1,"context",A)),A},v.prototype._encodeChoice=function(u,_){const w=this._baseState,M=w.choice[u.type];return M||n(!1,u.type+" not found in "+JSON.stringify(Object.keys(w.choice))),M._encode(u.value,_)},v.prototype._encodePrimitive=function(u,_){const w=this._baseState;if(/str$/.test(u))return this._encodeStr(_,u);if(u==="objid"&&w.args)return this._encodeObjid(_,w.reverseArgs[0],w.args[1]);if(u==="objid")return this._encodeObjid(_,null,null);if(u==="gentime"||u==="utctime")return this._encodeTime(_,u);if(u==="null_")return this._encodeNull();if(u==="int"||u==="enum")return this._encodeInt(_,w.args&&w.reverseArgs[0]);if(u==="bool")return this._encodeBool(_);if(u==="objDesc")return this._encodeStr(_,u);throw new Error("Unsupported tag: "+u)},v.prototype._isNumstr=function(u){return/^[0-9 ]*$/.test(u)},v.prototype._isPrintstr=function(u){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(u)},du}var pu={},T1;function $h(){return T1||(T1=1,function(a){function e(t){const n={};return Object.keys(t).forEach(function(c){(c|0)==c&&(c=c|0);const s=t[c];n[s]=c}),n}a.tagClass={0:"universal",1:"application",2:"context",3:"private"},a.tagClassByName=e(a.tagClass),a.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},a.tagByName=e(a.tag)}(pu)),pu}var vu,N1;function dg(){if(N1)return vu;N1=1;const a=Ht,e=Lh().Buffer,t=jh(),n=$h();function c(d){this.enc="der",this.name=d.name,this.entity=d,this.tree=new s,this.tree._init(d.body)}vu=c,c.prototype.encode=function(p,u){return this.tree._encode(p,u).join()};function s(d){t.call(this,"der",d)}a(s,t),s.prototype._encodeComposite=function(p,u,_,w){const M=v(p,u,_,this.reporter);if(w.length<128){const B=e.alloc(2);return B[0]=M,B[1]=w.length,this._createEncoderBuffer([B,w])}let A=1;for(let B=w.length;B>=256;B>>=8)A++;const R=e.alloc(1+1+A);R[0]=M,R[1]=128|A;for(let B=1+A,z=w.length;z>0;B--,z>>=8)R[B]=z&255;return this._createEncoderBuffer([R,w])},s.prototype._encodeStr=function(p,u){if(u==="bitstr")return this._createEncoderBuffer([p.unused|0,p.data]);if(u==="bmpstr"){const _=e.alloc(p.length*2);for(let w=0;w<p.length;w++)_.writeUInt16BE(p.charCodeAt(w),w*2);return this._createEncoderBuffer(_)}else return u==="numstr"?this._isNumstr(p)?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: numstr supports only digits and space"):u==="printstr"?this._isPrintstr(p)?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(u)?this._createEncoderBuffer(p):u==="objDesc"?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: "+u+" unsupported")},s.prototype._encodeObjid=function(p,u,_){if(typeof p=="string"){if(!u)return this.reporter.error("string objid given, but no values map found");if(!u.hasOwnProperty(p))return this.reporter.error("objid not found in values map");p=u[p].split(/[\s.]+/g);for(let R=0;R<p.length;R++)p[R]|=0}else if(Array.isArray(p)){p=p.slice();for(let R=0;R<p.length;R++)p[R]|=0}if(!Array.isArray(p))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(p));if(!_){if(p[1]>=40)return this.reporter.error("Second objid identifier OOB");p.splice(0,2,p[0]*40+p[1])}let w=0;for(let R=0;R<p.length;R++){let B=p[R];for(w++;B>=128;B>>=7)w++}const M=e.alloc(w);let A=M.length-1;for(let R=p.length-1;R>=0;R--){let B=p[R];for(M[A--]=B&127;(B>>=7)>0;)M[A--]=128|B&127}return this._createEncoderBuffer(M)};function m(d){return d<10?"0"+d:d}s.prototype._encodeTime=function(p,u){let _;const w=new Date(p);return u==="gentime"?_=[m(w.getUTCFullYear()),m(w.getUTCMonth()+1),m(w.getUTCDate()),m(w.getUTCHours()),m(w.getUTCMinutes()),m(w.getUTCSeconds()),"Z"].join(""):u==="utctime"?_=[m(w.getUTCFullYear()%100),m(w.getUTCMonth()+1),m(w.getUTCDate()),m(w.getUTCHours()),m(w.getUTCMinutes()),m(w.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+u+" time is not supported yet"),this._encodeStr(_,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(p,u){if(typeof p=="string"){if(!u)return this.reporter.error("String int or enum given, but no values map");if(!u.hasOwnProperty(p))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(p));p=u[p]}if(typeof p!="number"&&!e.isBuffer(p)){const M=p.toArray();!p.sign&&M[0]&128&&M.unshift(0),p=e.from(M)}if(e.isBuffer(p)){let M=p.length;p.length===0&&M++;const A=e.alloc(M);return p.copy(A),p.length===0&&(A[0]=0),this._createEncoderBuffer(A)}if(p<128)return this._createEncoderBuffer(p);if(p<256)return this._createEncoderBuffer([0,p]);let _=1;for(let M=p;M>=256;M>>=8)_++;const w=new Array(_);for(let M=w.length-1;M>=0;M--)w[M]=p&255,p>>=8;return w[0]&128&&w.unshift(0),this._createEncoderBuffer(e.from(w))},s.prototype._encodeBool=function(p){return this._createEncoderBuffer(p?255:0)},s.prototype._use=function(p,u){return typeof p=="function"&&(p=p(u)),p._getEncoder("der").tree},s.prototype._skipDefault=function(p,u,_){const w=this._baseState;let M;if(w.default===null)return!1;const A=p.join();if(w.defaultBuffer===void 0&&(w.defaultBuffer=this._encodeValue(w.default,u,_).join()),A.length!==w.defaultBuffer.length)return!1;for(M=0;M<A.length;M++)if(A[M]!==w.defaultBuffer[M])return!1;return!0};function v(d,p,u,_){let w;if(d==="seqof"?d="seq":d==="setof"&&(d="set"),n.tagByName.hasOwnProperty(d))w=n.tagByName[d];else if(typeof d=="number"&&(d|0)===d)w=d;else return _.error("Unknown tag: "+d);return w>=31?_.error("Multi-octet tag encoding unsupported"):(p||(w|=32),w|=n.tagClassByName[u||"universal"]<<6,w)}return vu}var gu,B1;function b4(){if(B1)return gu;B1=1;const a=Ht,e=dg();function t(n){e.call(this,n),this.enc="pem"}return a(t,e),gu=t,t.prototype.encode=function(c,s){const v=e.prototype.encode.call(this,c).toString("base64"),d=["-----BEGIN "+s.label+"-----"];for(let p=0;p<v.length;p+=64)d.push(v.slice(p,p+64));return d.push("-----END "+s.label+"-----"),d.join(`
`)},gu}var U1;function pg(){return U1||(U1=1,function(a){const e=a;e.der=dg(),e.pem=b4()}(uu)),uu}var bu={},mu,q1;function vg(){if(q1)return mu;q1=1;const a=Ht,e=Yi,t=Zs().DecoderBuffer,n=jh(),c=$h();function s(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new m,this.tree._init(p.body)}mu=s,s.prototype.decode=function(u,_){return t.isDecoderBuffer(u)||(u=new t(u,_)),this.tree._decode(u,_)};function m(p){n.call(this,"der",p)}a(m,n),m.prototype._peekTag=function(u,_,w){if(u.isEmpty())return!1;const M=u.save(),A=v(u,'Failed to peek tag: "'+_+'"');return u.isError(A)?A:(u.restore(M),A.tag===_||A.tagStr===_||A.tagStr+"of"===_||w)},m.prototype._decodeTag=function(u,_,w){const M=v(u,'Failed to decode tag of "'+_+'"');if(u.isError(M))return M;let A=d(u,M.primitive,'Failed to get length of "'+_+'"');if(u.isError(A))return A;if(!w&&M.tag!==_&&M.tagStr!==_&&M.tagStr+"of"!==_)return u.error('Failed to match tag: "'+_+'"');if(M.primitive||A!==null)return u.skip(A,'Failed to match body of: "'+_+'"');const R=u.save(),B=this._skipUntilEnd(u,'Failed to skip indefinite length body: "'+this.tag+'"');return u.isError(B)?B:(A=u.offset-R.offset,u.restore(R),u.skip(A,'Failed to match body of: "'+_+'"'))},m.prototype._skipUntilEnd=function(u,_){for(;;){const w=v(u,_);if(u.isError(w))return w;const M=d(u,w.primitive,_);if(u.isError(M))return M;let A;if(w.primitive||M!==null?A=u.skip(M):A=this._skipUntilEnd(u,_),u.isError(A))return A;if(w.tagStr==="end")break}},m.prototype._decodeList=function(u,_,w,M){const A=[];for(;!u.isEmpty();){const R=this._peekTag(u,"end");if(u.isError(R))return R;const B=w.decode(u,"der",M);if(u.isError(B)&&R)break;A.push(B)}return A},m.prototype._decodeStr=function(u,_){if(_==="bitstr"){const w=u.readUInt8();return u.isError(w)?w:{unused:w,data:u.raw()}}else if(_==="bmpstr"){const w=u.raw();if(w.length%2===1)return u.error("Decoding of string type: bmpstr length mismatch");let M="";for(let A=0;A<w.length/2;A++)M+=String.fromCharCode(w.readUInt16BE(A*2));return M}else if(_==="numstr"){const w=u.raw().toString("ascii");return this._isNumstr(w)?w:u.error("Decoding of string type: numstr unsupported characters")}else{if(_==="octstr")return u.raw();if(_==="objDesc")return u.raw();if(_==="printstr"){const w=u.raw().toString("ascii");return this._isPrintstr(w)?w:u.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(_)?u.raw().toString():u.error("Decoding of string type: "+_+" unsupported")}},m.prototype._decodeObjid=function(u,_,w){let M;const A=[];let R=0,B=0;for(;!u.isEmpty();)B=u.readUInt8(),R<<=7,R|=B&127,B&128||(A.push(R),R=0);B&128&&A.push(R);const z=A[0]/40|0,P=A[0]%40;if(w?M=A:M=[z,P].concat(A.slice(1)),_){let N=_[M.join(" ")];N===void 0&&(N=_[M.join(".")]),N!==void 0&&(M=N)}return M},m.prototype._decodeTime=function(u,_){const w=u.raw().toString();let M,A,R,B,z,P;if(_==="gentime")M=w.slice(0,4)|0,A=w.slice(4,6)|0,R=w.slice(6,8)|0,B=w.slice(8,10)|0,z=w.slice(10,12)|0,P=w.slice(12,14)|0;else if(_==="utctime")M=w.slice(0,2)|0,A=w.slice(2,4)|0,R=w.slice(4,6)|0,B=w.slice(6,8)|0,z=w.slice(8,10)|0,P=w.slice(10,12)|0,M<70?M=2e3+M:M=1900+M;else return u.error("Decoding "+_+" time is not supported yet");return Date.UTC(M,A-1,R,B,z,P,0)},m.prototype._decodeNull=function(){return null},m.prototype._decodeBool=function(u){const _=u.readUInt8();return u.isError(_)?_:_!==0},m.prototype._decodeInt=function(u,_){const w=u.raw();let M=new e(w);return _&&(M=_[M.toString(10)]||M),M},m.prototype._use=function(u,_){return typeof u=="function"&&(u=u(_)),u._getDecoder("der").tree};function v(p,u){let _=p.readUInt8(u);if(p.isError(_))return _;const w=c.tagClass[_>>6],M=(_&32)===0;if((_&31)===31){let R=_;for(_=0;(R&128)===128;){if(R=p.readUInt8(u),p.isError(R))return R;_<<=7,_|=R&127}}else _&=31;const A=c.tag[_];return{cls:w,primitive:M,tag:_,tagStr:A}}function d(p,u,_){let w=p.readUInt8(_);if(p.isError(w))return w;if(!u&&w===128)return null;if(!(w&128))return w;const M=w&127;if(M>4)return p.error("length octect is too long");w=0;for(let A=0;A<M;A++){w<<=8;const R=p.readUInt8(_);if(p.isError(R))return R;w|=R}return w}return mu}var yu,L1;function m4(){if(L1)return yu;L1=1;const a=Ht,e=Lh().Buffer,t=vg();function n(c){t.call(this,c),this.enc="pem"}return a(n,t),yu=n,n.prototype.decode=function(s,m){const v=s.toString().split(/[\r\n]+/g),d=m.label.toUpperCase(),p=/^-----(BEGIN|END) ([^-]+)-----$/;let u=-1,_=-1;for(let A=0;A<v.length;A++){const R=v[A].match(p);if(R!==null&&R[2]===d)if(u===-1){if(R[1]!=="BEGIN")break;u=A}else{if(R[1]!=="END")break;_=A;break}}if(u===-1||_===-1)throw new Error("PEM section not found for: "+d);const w=v.slice(u+1,_).join("");w.replace(/[^a-z0-9+/=]+/gi,"");const M=e.from(w,"base64");return t.prototype.decode.call(this,M,m)},yu}var F1;function gg(){return F1||(F1=1,function(a){const e=a;e.der=vg(),e.pem=m4()}(bu)),bu}var j1;function y4(){return j1||(j1=1,function(a){const e=pg(),t=gg(),n=Ht,c=a;c.define=function(v,d){return new s(v,d)};function s(m,v){this.name=m,this.body=v,this.decoders={},this.encoders={}}s.prototype._createNamed=function(v){const d=this.name;function p(u){this._initNamed(u,d)}return n(p,v),p.prototype._initNamed=function(_,w){v.call(this,_,w)},new p(this)},s.prototype._getDecoder=function(v){return v=v||"der",this.decoders.hasOwnProperty(v)||(this.decoders[v]=this._createNamed(t[v])),this.decoders[v]},s.prototype.decode=function(v,d,p){return this._getDecoder(d).decode(v,p)},s.prototype._getEncoder=function(v){return v=v||"der",this.encoders.hasOwnProperty(v)||(this.encoders[v]=this._createNamed(e[v])),this.encoders[v]},s.prototype.encode=function(v,d,p){return this._getEncoder(d).encode(v,p)}}(cu)),cu}var _u={},$1;function _4(){return $1||($1=1,function(a){const e=a;e.Reporter=Fh().Reporter,e.DecoderBuffer=Zs().DecoderBuffer,e.EncoderBuffer=Zs().EncoderBuffer,e.Node=jh()}(_u)),_u}var wu={},k1;function w4(){return k1||(k1=1,function(a){const e=a;e._reverse=function(n){const c={};return Object.keys(n).forEach(function(s){(s|0)==s&&(s=s|0);const m=n[s];c[m]=s}),c},e.der=$h()}(wu)),wu}var z1;function bg(){return z1||(z1=1,function(a){const e=a;e.bignum=Yi,e.define=y4().define,e.base=_4(),e.constants=w4(),e.decoders=gg(),e.encoders=pg()}(fu)),fu}var Eu,H1;function E4(){if(H1)return Eu;H1=1;var a=bg(),e=a.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=a.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),n=a.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),c=a.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),s=a.define("RelativeDistinguishedName",function(){this.setof(t)}),m=a.define("RDNSequence",function(){this.seqof(s)}),v=a.define("Name",function(){this.choice({rdnSequence:this.use(m)})}),d=a.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),p=a.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),u=a.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(v),this.key("validity").use(d),this.key("subject").use(v),this.key("subjectPublicKeyInfo").use(c),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),_=a.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())});return Eu=_,Eu}var K1;function M4(){if(K1)return bi;K1=1;var a=bg();bi.certificate=E4();var e=a.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});bi.RSAPrivateKey=e;var t=a.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});bi.RSAPublicKey=t;var n=a.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())});bi.PublicKey=n;var c=a.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),s=a.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(c),this.key("subjectPrivateKey").octstr())});bi.PrivateKey=s;var m=a.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});bi.EncryptedPrivateKey=m;var v=a.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});bi.DSAPrivateKey=v,bi.DSAparam=a.define("DSAparam",function(){this.int()});var d=a.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});bi.ECPrivateKey=d;var p=a.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return bi.signature=a.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),bi}const S4={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var Mu,V1;function x4(){if(V1)return Mu;V1=1;var a=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=$o(),c=Th(),s=Bt.Buffer;return Mu=function(m,v){var d=m.toString(),p=d.match(a),u;if(p){var w="aes"+p[1],M=s.from(p[2],"hex"),A=s.from(p[3].replace(/[\r\n]/g,""),"base64"),R=n(v,M.slice(0,8),parseInt(p[1],10)).key,B=[],z=c.createDecipheriv(w,R,M);B.push(z.update(A)),B.push(z.final()),u=s.concat(B)}else{var _=d.match(t);u=s.from(_[2].replace(/[\r\n]/g,""),"base64")}var P=d.match(e)[1];return{tag:P,data:u}},Mu}var Su,G1;function zo(){if(G1)return Su;G1=1;var a=M4(),e=S4,t=x4(),n=Th(),c=tg(),s=Bt.Buffer;Su=m;function m(d){var p;typeof d=="object"&&!s.isBuffer(d)&&(p=d.passphrase,d=d.key),typeof d=="string"&&(d=s.from(d));var u=t(d,p),_=u.tag,w=u.data,M,A;switch(_){case"CERTIFICATE":A=a.certificate.decode(w,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(A||(A=a.PublicKey.decode(w,"der")),M=A.algorithm.algorithm.join("."),M){case"1.2.840.113549.1.1.1":return a.RSAPublicKey.decode(A.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return A.subjectPrivateKey=A.subjectPublicKey,{type:"ec",data:A};case"1.2.840.10040.4.1":return A.algorithm.params.pub_key=a.DSAparam.decode(A.subjectPublicKey.data,"der"),{type:"dsa",data:A.algorithm.params};default:throw new Error("unknown key id "+M)}case"ENCRYPTED PRIVATE KEY":w=a.EncryptedPrivateKey.decode(w,"der"),w=v(w,p);case"PRIVATE KEY":switch(A=a.PrivateKey.decode(w,"der"),M=A.algorithm.algorithm.join("."),M){case"1.2.840.113549.1.1.1":return a.RSAPrivateKey.decode(A.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:A.algorithm.curve,privateKey:a.ECPrivateKey.decode(A.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return A.algorithm.params.priv_key=a.DSAparam.decode(A.subjectPrivateKey,"der"),{type:"dsa",params:A.algorithm.params};default:throw new Error("unknown key id "+M)}case"RSA PUBLIC KEY":return a.RSAPublicKey.decode(w,"der");case"RSA PRIVATE KEY":return a.RSAPrivateKey.decode(w,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:a.DSAPrivateKey.decode(w,"der")};case"EC PRIVATE KEY":return w=a.ECPrivateKey.decode(w,"der"),{curve:w.parameters.value,privateKey:w.privateKey};default:throw new Error("unknown key type "+_)}}m.signature=a.signature;function v(d,p){var u=d.algorithm.decrypt.kde.kdeparams.salt,_=parseInt(d.algorithm.decrypt.kde.kdeparams.iters.toString(),10),w=e[d.algorithm.decrypt.cipher.algo.join(".")],M=d.algorithm.decrypt.cipher.iv,A=d.subjectPrivateKey,R=parseInt(w.split("-")[1],10)/8,B=c.pbkdf2Sync(p,u,_,R,"sha1"),z=n.createDecipheriv(w,B,M),P=[];return P.push(z.update(A)),P.push(z.final()),s.concat(P)}return Su}const mg={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var W1;function D4(){if(W1)return Bs.exports;W1=1;var a=Bt.Buffer,e=Yv(),t=Bh(),n=qh().ec,c=lg(),s=zo(),m=mg;function v(B,z,P,N,q){var k=s(z);if(k.curve){if(N!=="ecdsa"&&N!=="ecdsa/rsa")throw new Error("wrong private key type");return d(B,k)}else if(k.type==="dsa"){if(N!=="dsa")throw new Error("wrong private key type");return p(B,k,P)}else if(N!=="rsa"&&N!=="ecdsa/rsa")throw new Error("wrong private key type");B=a.concat([q,B]);for(var F=k.modulus.byteLength(),O=[0,1];B.length+O.length+1<F;)O.push(255);O.push(0);for(var j=-1;++j<B.length;)O.push(B[j]);var J=t(O,k);return J}function d(B,z){var P=m[z.curve.join(".")];if(!P)throw new Error("unknown curve "+z.curve.join("."));var N=new n(P),q=N.keyFromPrivate(z.privateKey),k=q.sign(B);return a.from(k.toDER())}function p(B,z,P){for(var N=z.params.priv_key,q=z.params.p,k=z.params.q,F=z.params.g,O=new c(0),j,J=w(B,k).mod(k),L=!1,C=_(N,k,B,P);L===!1;)j=A(k,C,P),O=R(F,j,q,k),L=j.invm(k).imul(J.add(N.mul(O))).mod(k),L.cmpn(0)===0&&(L=!1,O=new c(0));return u(O,L)}function u(B,z){B=B.toArray(),z=z.toArray(),B[0]&128&&(B=[0].concat(B)),z[0]&128&&(z=[0].concat(z));var P=B.length+z.length+4,N=[48,P,2,B.length];return N=N.concat(B,[2,z.length],z),a.from(N)}function _(B,z,P,N){if(B=a.from(B.toArray()),B.length<z.byteLength()){var q=a.alloc(z.byteLength()-B.length);B=a.concat([q,B])}var k=P.length,F=M(P,z),O=a.alloc(k);O.fill(1);var j=a.alloc(k);return j=e(N,j).update(O).update(a.from([0])).update(B).update(F).digest(),O=e(N,j).update(O).digest(),j=e(N,j).update(O).update(a.from([1])).update(B).update(F).digest(),O=e(N,j).update(O).digest(),{k:j,v:O}}function w(B,z){var P=new c(B),N=(B.length<<3)-z.bitLength();return N>0&&P.ishrn(N),P}function M(B,z){B=w(B,z),B=B.mod(z);var P=a.from(B.toArray());if(P.length<z.byteLength()){var N=a.alloc(z.byteLength()-P.length);P=a.concat([N,P])}return P}function A(B,z,P){var N,q;do{for(N=a.alloc(0);N.length*8<B.bitLength();)z.v=e(P,z.k).update(z.v).digest(),N=a.concat([N,z.v]);q=w(N,B),z.k=e(P,z.k).update(z.v).update(a.from([0])).digest(),z.v=e(P,z.k).update(z.v).digest()}while(q.cmp(B)!==-1);return q}function R(B,z,P,N){return B.toRed(c.mont(P)).redPow(z).fromRed().mod(N)}return Bs.exports=v,Bs.exports.getKey=_,Bs.exports.makeKey=A,Bs.exports}var xu,Y1;function A4(){if(Y1)return xu;Y1=1;var a=Bt.Buffer,e=lg(),t=qh().ec,n=zo(),c=mg;function s(p,u,_,w,M){var A=n(_);if(A.type==="ec"){if(w!=="ecdsa"&&w!=="ecdsa/rsa")throw new Error("wrong public key type");return m(p,u,A)}else if(A.type==="dsa"){if(w!=="dsa")throw new Error("wrong public key type");return v(p,u,A)}else if(w!=="rsa"&&w!=="ecdsa/rsa")throw new Error("wrong public key type");u=a.concat([M,u]);for(var R=A.modulus.byteLength(),B=[1],z=0;u.length+B.length+2<R;)B.push(255),z++;B.push(0);for(var P=-1;++P<u.length;)B.push(u[P]);B=a.from(B);var N=e.mont(A.modulus);p=new e(p).toRed(N),p=p.redPow(new e(A.publicExponent)),p=a.from(p.fromRed().toArray());var q=z<8?1:0;for(R=Math.min(p.length,B.length),p.length!==B.length&&(q=1),P=-1;++P<R;)q|=p[P]^B[P];return q===0}function m(p,u,_){var w=c[_.data.algorithm.curve.join(".")];if(!w)throw new Error("unknown curve "+_.data.algorithm.curve.join("."));var M=new t(w),A=_.data.subjectPrivateKey.data;return M.verify(u,p,A)}function v(p,u,_){var w=_.data.p,M=_.data.q,A=_.data.g,R=_.data.pub_key,B=n.signature.decode(p,"der"),z=B.s,P=B.r;d(z,M),d(P,M);var N=e.mont(w),q=z.invm(M),k=A.toRed(N).redPow(new e(u).mul(q).mod(M)).fromRed().mul(R.toRed(N).redPow(P.mul(q).mod(M)).fromRed()).mod(w).mod(M);return k.cmp(P)===0}function d(p,u){if(p.cmpn(0)<=0)throw new Error("invalid sig");if(p.cmp(u)>=u)throw new Error("invalid sig")}return xu=s,xu}var Du,J1;function I4(){if(J1)return Du;J1=1;var a=Bt.Buffer,e=ta(),t=Rv,n=Ht,c=D4(),s=A4(),m=Jv;Object.keys(m).forEach(function(_){m[_].id=a.from(m[_].id,"hex"),m[_.toLowerCase()]=m[_]});function v(_){t.Writable.call(this);var w=m[_];if(!w)throw new Error("Unknown message digest");this._hashType=w.hash,this._hash=e(w.hash),this._tag=w.id,this._signType=w.sign}n(v,t.Writable),v.prototype._write=function(w,M,A){this._hash.update(w),A()},v.prototype.update=function(w,M){return typeof w=="string"&&(w=a.from(w,M)),this._hash.update(w),this},v.prototype.sign=function(w,M){this.end();var A=this._hash.digest(),R=c(A,w,this._hashType,this._signType,this._tag);return M?R.toString(M):R};function d(_){t.Writable.call(this);var w=m[_];if(!w)throw new Error("Unknown message digest");this._hash=e(w.hash),this._tag=w.id,this._signType=w.sign}n(d,t.Writable),d.prototype._write=function(w,M,A){this._hash.update(w),A()},d.prototype.update=function(w,M){return typeof w=="string"&&(w=a.from(w,M)),this._hash.update(w),this},d.prototype.verify=function(w,M,A){typeof M=="string"&&(M=a.from(M,A)),this.end();var R=this._hash.digest();return s(M,R,w,this._signType,this._tag)};function p(_){return new v(_)}function u(_){return new d(_)}return Du={Sign:p,Verify:u,createSign:p,createVerify:u},Du}var Au,Z1;function O4(){if(Z1)return Au;Z1=1;var a=qh(),e=Yi;Au=function(m){return new n(m)};var t={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};t.p224=t.secp224r1,t.p256=t.secp256r1=t.prime256v1,t.p192=t.secp192r1=t.prime192v1,t.p384=t.secp384r1,t.p521=t.secp521r1;function n(s){this.curveType=t[s],this.curveType||(this.curveType={name:s}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}n.prototype.generateKeys=function(s,m){return this.keys=this.curve.genKeyPair(),this.getPublicKey(s,m)},n.prototype.computeSecret=function(s,m,v){m=m||"utf8",Tt.Buffer.isBuffer(s)||(s=new Tt.Buffer(s,m));var d=this.curve.keyFromPublic(s).getPublic(),p=d.mul(this.keys.getPrivate()).getX();return c(p,v,this.curveType.byteLength)},n.prototype.getPublicKey=function(s,m){var v=this.keys.getPublic(m==="compressed",!0);return m==="hybrid"&&(v[v.length-1]%2?v[0]=7:v[0]=6),c(v,s)},n.prototype.getPrivateKey=function(s){return c(this.keys.getPrivate(),s)},n.prototype.setPublicKey=function(s,m){return m=m||"utf8",Tt.Buffer.isBuffer(s)||(s=new Tt.Buffer(s,m)),this.keys._importPublic(s),this},n.prototype.setPrivateKey=function(s,m){m=m||"utf8",Tt.Buffer.isBuffer(s)||(s=new Tt.Buffer(s,m));var v=new e(s);return v=v.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(v),this};function c(s,m,v){Array.isArray(s)||(s=s.toArray());var d=new Tt.Buffer(s);if(v&&d.length<v){var p=new Tt.Buffer(v-d.length);p.fill(0),d=Tt.Buffer.concat([p,d])}return m?d.toString(m):d}return Au}var Iu={},Ou,X1;function yg(){if(X1)return Ou;X1=1;var a=ta(),e=Bt.Buffer;Ou=function(n,c){for(var s=e.alloc(0),m=0,v;s.length<c;)v=t(m++),s=e.concat([s,a("sha1").update(n).update(v).digest()]);return s.slice(0,c)};function t(n){var c=e.allocUnsafe(4);return c.writeUInt32BE(n,0),c}return Ou}var Pu,Q1;function _g(){return Q1||(Q1=1,Pu=function(e,t){for(var n=e.length,c=-1;++c<n;)e[c]^=t[c];return e}),Pu}var Cu,ep;function wg(){if(ep)return Cu;ep=1;var a=Yi,e=Bt.Buffer;function t(n,c){return e.from(n.toRed(a.mont(c.modulus)).redPow(new a(c.publicExponent)).fromRed().toArray())}return Cu=t,Cu}var Ru,tp;function P4(){if(tp)return Ru;tp=1;var a=zo(),e=hs(),t=ta(),n=yg(),c=_g(),s=Yi,m=wg(),v=Bh(),d=Bt.Buffer;Ru=function(M,A,R){var B;M.padding?B=M.padding:R?B=1:B=4;var z=a(M),P;if(B===4)P=p(z,A);else if(B===1)P=u(z,A,R);else if(B===3){if(P=new s(A),P.cmp(z.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return R?v(P,z):m(P,z)};function p(w,M){var A=w.modulus.byteLength(),R=M.length,B=t("sha1").update(d.alloc(0)).digest(),z=B.length,P=2*z;if(R>A-P-2)throw new Error("message too long");var N=d.alloc(A-R-P-2),q=A-z-1,k=e(z),F=c(d.concat([B,N,d.alloc(1,1),M],q),n(k,q)),O=c(k,n(F,z));return new s(d.concat([d.alloc(1),O,F],A))}function u(w,M,A){var R=M.length,B=w.modulus.byteLength();if(R>B-11)throw new Error("message too long");var z;return A?z=d.alloc(B-R-3,255):z=_(B-R-3),new s(d.concat([d.from([0,A?1:2]),z,d.alloc(1),M],B))}function _(w){for(var M=d.allocUnsafe(w),A=0,R=e(w*2),B=0,z;A<w;)B===R.length&&(R=e(w*2),B=0),z=R[B++],z&&(M[A++]=z);return M}return Ru}var Tu,rp;function C4(){if(rp)return Tu;rp=1;var a=zo(),e=yg(),t=_g(),n=Yi,c=Bh(),s=ta(),m=wg(),v=Bt.Buffer;Tu=function(w,M,A){var R;w.padding?R=w.padding:A?R=1:R=4;var B=a(w),z=B.modulus.byteLength();if(M.length>z||new n(M).cmp(B.modulus)>=0)throw new Error("decryption error");var P;A?P=m(new n(M),B):P=c(M,B);var N=v.alloc(z-P.length);if(P=v.concat([N,P],z),R===4)return d(B,P);if(R===1)return p(B,P,A);if(R===3)return P;throw new Error("unknown padding")};function d(_,w){var M=_.modulus.byteLength(),A=s("sha1").update(v.alloc(0)).digest(),R=A.length;if(w[0]!==0)throw new Error("decryption error");var B=w.slice(1,R+1),z=w.slice(R+1),P=t(B,e(z,R)),N=t(z,e(P,M-R-1));if(u(A,N.slice(0,R)))throw new Error("decryption error");for(var q=R;N[q]===0;)q++;if(N[q++]!==1)throw new Error("decryption error");return N.slice(q)}function p(_,w,M){for(var A=w.slice(0,2),R=2,B=0;w[R++]!==0;)if(R>=w.length){B++;break}var z=w.slice(2,R-1);if((A.toString("hex")!=="0002"&&!M||A.toString("hex")!=="0001"&&M)&&B++,z.length<8&&B++,B)throw new Error("decryption error");return w.slice(R)}function u(_,w){_=v.from(_),w=v.from(w);var M=0,A=_.length;_.length!==w.length&&(M++,A=Math.min(_.length,w.length));for(var R=-1;++R<A;)M+=_[R]^w[R];return M}return Tu}var ip;function R4(){return ip||(ip=1,function(a){a.publicEncrypt=P4(),a.privateDecrypt=C4(),a.privateEncrypt=function(t,n){return a.publicEncrypt(t,n,!0)},a.publicDecrypt=function(t,n){return a.privateDecrypt(t,n,!0)}}(Iu)),Iu}var as={},np;function T4(){if(np)return as;np=1;function a(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=Bt,t=hs(),n=e.Buffer,c=e.kMaxLength,s=St.crypto||St.msCrypto,m=Math.pow(2,32)-1;function v(w,M){if(typeof w!="number"||w!==w)throw new TypeError("offset must be a number");if(w>m||w<0)throw new TypeError("offset must be a uint32");if(w>c||w>M)throw new RangeError("offset out of range")}function d(w,M,A){if(typeof w!="number"||w!==w)throw new TypeError("size must be a number");if(w>m||w<0)throw new TypeError("size must be a uint32");if(w+M>A||w>c)throw new RangeError("buffer too small")}s&&s.getRandomValues||!ii.browser?(as.randomFill=p,as.randomFillSync=_):(as.randomFill=a,as.randomFillSync=a);function p(w,M,A,R){if(!n.isBuffer(w)&&!(w instanceof St.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof M=="function")R=M,M=0,A=w.length;else if(typeof A=="function")R=A,A=w.length-M;else if(typeof R!="function")throw new TypeError('"cb" argument must be a function');return v(M,w.length),d(A,M,w.length),u(w,M,A,R)}function u(w,M,A,R){if(ii.browser){var B=w.buffer,z=new Uint8Array(B,M,A);if(s.getRandomValues(z),R){ii.nextTick(function(){R(null,w)});return}return w}if(R){t(A,function(N,q){if(N)return R(N);q.copy(w,M),R(null,w)});return}var P=t(A);return P.copy(w,M),w}function _(w,M,A){if(typeof M>"u"&&(M=0),!n.isBuffer(w)&&!(w instanceof St.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return v(M,w.length),A===void 0&&(A=w.length-M),d(A,M,w.length),u(w,M,A)}return as}var sp;function Eg(){if(sp)return Mt;sp=1,Mt.randomBytes=Mt.rng=Mt.pseudoRandomBytes=Mt.prng=hs(),Mt.createHash=Mt.Hash=ta(),Mt.createHmac=Mt.Hmac=Yv();var a=d5(),e=Object.keys(a),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);Mt.getHashes=function(){return t};var n=tg();Mt.pbkdf2=n.pbkdf2,Mt.pbkdf2Sync=n.pbkdf2Sync;var c=R5();Mt.Cipher=c.Cipher,Mt.createCipher=c.createCipher,Mt.Cipheriv=c.Cipheriv,Mt.createCipheriv=c.createCipheriv,Mt.Decipher=c.Decipher,Mt.createDecipher=c.createDecipher,Mt.Decipheriv=c.Decipheriv,Mt.createDecipheriv=c.createDecipheriv,Mt.getCiphers=c.getCiphers,Mt.listCiphers=c.listCiphers;var s=z5();Mt.DiffieHellmanGroup=s.DiffieHellmanGroup,Mt.createDiffieHellmanGroup=s.createDiffieHellmanGroup,Mt.getDiffieHellman=s.getDiffieHellman,Mt.createDiffieHellman=s.createDiffieHellman,Mt.DiffieHellman=s.DiffieHellman;var m=I4();Mt.createSign=m.createSign,Mt.Sign=m.Sign,Mt.createVerify=m.createVerify,Mt.Verify=m.Verify,Mt.createECDH=O4();var v=R4();Mt.publicEncrypt=v.publicEncrypt,Mt.privateEncrypt=v.privateEncrypt,Mt.publicDecrypt=v.publicDecrypt,Mt.privateDecrypt=v.privateDecrypt;var d=T4();return Mt.randomFill=d.randomFill,Mt.randomFillSync=d.randomFillSync,Mt.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},Mt.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},Mt}Object.defineProperty(Fo,"__esModule",{value:!0});Fo.NodeRandomSource=void 0;const N4=si;class B4{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Qw<"u"){const e=Eg();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let c=0;c<n.length;c++)n[c]=t[c];return(0,N4.wipe)(t),n}}Fo.NodeRandomSource=B4;Object.defineProperty(qo,"__esModule",{value:!0});qo.SystemRandomSource=void 0;const U4=Lo,q4=Fo;class L4{constructor(){if(this.isAvailable=!1,this.name="",this._source=new U4.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new q4.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}qo.SystemRandomSource=L4;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.randomStringForEntropy=a.randomString=a.randomUint32=a.randomBytes=a.defaultRandomSource=void 0;const e=qo,t=_t,n=si;a.defaultRandomSource=new e.SystemRandomSource;function c(p,u=a.defaultRandomSource){return u.randomBytes(p)}a.randomBytes=c;function s(p=a.defaultRandomSource){const u=c(4,p),_=(0,t.readUint32LE)(u);return(0,n.wipe)(u),_}a.randomUint32=s;const m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function v(p,u=m,_=a.defaultRandomSource){if(u.length<2)throw new Error("randomString charset is too short");if(u.length>256)throw new Error("randomString charset is too long");let w="";const M=u.length,A=256-256%M;for(;p>0;){const R=c(Math.ceil(p*256/A),_);for(let B=0;B<R.length&&p>0;B++){const z=R[B];z<A&&(w+=u.charAt(z%M),p--)}(0,n.wipe)(R)}return w}a.randomString=v;function d(p,u=m,_=a.defaultRandomSource){const w=Math.ceil(p/(Math.log(u.length)/Math.LN2));return v(w,u,_)}a.randomStringForEntropy=d})(us);var Ho={};(function(a){Object.defineProperty(a,"__esModule",{value:!0});var e=_t,t=si;a.DIGEST_LENGTH=32,a.BLOCK_SIZE=64;var n=function(){function v(){this.digestLength=a.DIGEST_LENGTH,this.blockSize=a.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},v.prototype.update=function(d,p){if(p===void 0&&(p=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var u=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=d[u++],p--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(u=s(this._temp,this._state,d,u,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=d[u++],p--;return this},v.prototype.finish=function(d){if(!this._finished){var p=this._bytesHashed,u=this._bufferLength,_=p/536870912|0,w=p<<3,M=p%64<56?64:128;this._buffer[u]=128;for(var A=u+1;A<M-8;A++)this._buffer[A]=0;e.writeUint32BE(_,this._buffer,M-8),e.writeUint32BE(w,this._buffer,M-4),s(this._temp,this._state,this._buffer,0,M),this._finished=!0}for(var A=0;A<this.digestLength/4;A++)e.writeUint32BE(this._state[A],d,A*4);return this},v.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(d){t.wipe(d.state),d.buffer&&t.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},v}();a.SHA256=n;var c=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(v,d,p,u,_){for(;_>=64;){for(var w=d[0],M=d[1],A=d[2],R=d[3],B=d[4],z=d[5],P=d[6],N=d[7],q=0;q<16;q++){var k=u+q*4;v[q]=e.readUint32BE(p,k)}for(var q=16;q<64;q++){var F=v[q-2],O=(F>>>17|F<<32-17)^(F>>>19|F<<32-19)^F>>>10;F=v[q-15];var j=(F>>>7|F<<32-7)^(F>>>18|F<<32-18)^F>>>3;v[q]=(O+v[q-7]|0)+(j+v[q-16]|0)}for(var q=0;q<64;q++){var O=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&z^~B&P)|0)+(N+(c[q]+v[q]|0)|0)|0,j=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&M^w&A^M&A)|0;N=P,P=z,z=B,B=R+O|0,R=A,A=M,M=w,w=O+j|0}d[0]+=w,d[1]+=M,d[2]+=A,d[3]+=R,d[4]+=B,d[5]+=z,d[6]+=P,d[7]+=N,u+=64,_-=64}return u}function m(v){var d=new n;d.update(v);var p=d.digest();return d.clean(),p}a.hash=m})(Ho);var kh={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.sharedKey=a.generateKeyPair=a.generateKeyPairFromSeed=a.scalarMultBase=a.scalarMult=a.SHARED_KEY_LENGTH=a.SECRET_KEY_LENGTH=a.PUBLIC_KEY_LENGTH=void 0;const e=us,t=si;a.PUBLIC_KEY_LENGTH=32,a.SECRET_KEY_LENGTH=32,a.SHARED_KEY_LENGTH=32;function n(q){const k=new Float64Array(16);if(q)for(let F=0;F<q.length;F++)k[F]=q[F];return k}const c=new Uint8Array(32);c[0]=9;const s=n([56129,1]);function m(q){let k=1;for(let F=0;F<16;F++){let O=q[F]+k+65535;k=Math.floor(O/65536),q[F]=O-k*65536}q[0]+=k-1+37*(k-1)}function v(q,k,F){const O=~(F-1);for(let j=0;j<16;j++){const J=O&(q[j]^k[j]);q[j]^=J,k[j]^=J}}function d(q,k){const F=n(),O=n();for(let j=0;j<16;j++)O[j]=k[j];m(O),m(O),m(O);for(let j=0;j<2;j++){F[0]=O[0]-65517;for(let L=1;L<15;L++)F[L]=O[L]-65535-(F[L-1]>>16&1),F[L-1]&=65535;F[15]=O[15]-32767-(F[14]>>16&1);const J=F[15]>>16&1;F[14]&=65535,v(O,F,1-J)}for(let j=0;j<16;j++)q[2*j]=O[j]&255,q[2*j+1]=O[j]>>8}function p(q,k){for(let F=0;F<16;F++)q[F]=k[2*F]+(k[2*F+1]<<8);q[15]&=32767}function u(q,k,F){for(let O=0;O<16;O++)q[O]=k[O]+F[O]}function _(q,k,F){for(let O=0;O<16;O++)q[O]=k[O]-F[O]}function w(q,k,F){let O,j,J=0,L=0,C=0,g=0,h=0,r=0,o=0,b=0,D=0,I=0,x=0,y=0,S=0,l=0,T=0,te=0,ee=0,ae=0,Q=0,X=0,Y=0,$=0,W=0,oe=0,ye=0,we=0,me=0,Ze=0,De=0,Ee=0,nt=0,Ae=F[0],de=F[1],ze=F[2],Me=F[3],ge=F[4],Fe=F[5],Se=F[6],le=F[7],je=F[8],Pe=F[9],pe=F[10],Xe=F[11],Te=F[12],_e=F[13],Qe=F[14],Ne=F[15];O=k[0],J+=O*Ae,L+=O*de,C+=O*ze,g+=O*Me,h+=O*ge,r+=O*Fe,o+=O*Se,b+=O*le,D+=O*je,I+=O*Pe,x+=O*pe,y+=O*Xe,S+=O*Te,l+=O*_e,T+=O*Qe,te+=O*Ne,O=k[1],L+=O*Ae,C+=O*de,g+=O*ze,h+=O*Me,r+=O*ge,o+=O*Fe,b+=O*Se,D+=O*le,I+=O*je,x+=O*Pe,y+=O*pe,S+=O*Xe,l+=O*Te,T+=O*_e,te+=O*Qe,ee+=O*Ne,O=k[2],C+=O*Ae,g+=O*de,h+=O*ze,r+=O*Me,o+=O*ge,b+=O*Fe,D+=O*Se,I+=O*le,x+=O*je,y+=O*Pe,S+=O*pe,l+=O*Xe,T+=O*Te,te+=O*_e,ee+=O*Qe,ae+=O*Ne,O=k[3],g+=O*Ae,h+=O*de,r+=O*ze,o+=O*Me,b+=O*ge,D+=O*Fe,I+=O*Se,x+=O*le,y+=O*je,S+=O*Pe,l+=O*pe,T+=O*Xe,te+=O*Te,ee+=O*_e,ae+=O*Qe,Q+=O*Ne,O=k[4],h+=O*Ae,r+=O*de,o+=O*ze,b+=O*Me,D+=O*ge,I+=O*Fe,x+=O*Se,y+=O*le,S+=O*je,l+=O*Pe,T+=O*pe,te+=O*Xe,ee+=O*Te,ae+=O*_e,Q+=O*Qe,X+=O*Ne,O=k[5],r+=O*Ae,o+=O*de,b+=O*ze,D+=O*Me,I+=O*ge,x+=O*Fe,y+=O*Se,S+=O*le,l+=O*je,T+=O*Pe,te+=O*pe,ee+=O*Xe,ae+=O*Te,Q+=O*_e,X+=O*Qe,Y+=O*Ne,O=k[6],o+=O*Ae,b+=O*de,D+=O*ze,I+=O*Me,x+=O*ge,y+=O*Fe,S+=O*Se,l+=O*le,T+=O*je,te+=O*Pe,ee+=O*pe,ae+=O*Xe,Q+=O*Te,X+=O*_e,Y+=O*Qe,$+=O*Ne,O=k[7],b+=O*Ae,D+=O*de,I+=O*ze,x+=O*Me,y+=O*ge,S+=O*Fe,l+=O*Se,T+=O*le,te+=O*je,ee+=O*Pe,ae+=O*pe,Q+=O*Xe,X+=O*Te,Y+=O*_e,$+=O*Qe,W+=O*Ne,O=k[8],D+=O*Ae,I+=O*de,x+=O*ze,y+=O*Me,S+=O*ge,l+=O*Fe,T+=O*Se,te+=O*le,ee+=O*je,ae+=O*Pe,Q+=O*pe,X+=O*Xe,Y+=O*Te,$+=O*_e,W+=O*Qe,oe+=O*Ne,O=k[9],I+=O*Ae,x+=O*de,y+=O*ze,S+=O*Me,l+=O*ge,T+=O*Fe,te+=O*Se,ee+=O*le,ae+=O*je,Q+=O*Pe,X+=O*pe,Y+=O*Xe,$+=O*Te,W+=O*_e,oe+=O*Qe,ye+=O*Ne,O=k[10],x+=O*Ae,y+=O*de,S+=O*ze,l+=O*Me,T+=O*ge,te+=O*Fe,ee+=O*Se,ae+=O*le,Q+=O*je,X+=O*Pe,Y+=O*pe,$+=O*Xe,W+=O*Te,oe+=O*_e,ye+=O*Qe,we+=O*Ne,O=k[11],y+=O*Ae,S+=O*de,l+=O*ze,T+=O*Me,te+=O*ge,ee+=O*Fe,ae+=O*Se,Q+=O*le,X+=O*je,Y+=O*Pe,$+=O*pe,W+=O*Xe,oe+=O*Te,ye+=O*_e,we+=O*Qe,me+=O*Ne,O=k[12],S+=O*Ae,l+=O*de,T+=O*ze,te+=O*Me,ee+=O*ge,ae+=O*Fe,Q+=O*Se,X+=O*le,Y+=O*je,$+=O*Pe,W+=O*pe,oe+=O*Xe,ye+=O*Te,we+=O*_e,me+=O*Qe,Ze+=O*Ne,O=k[13],l+=O*Ae,T+=O*de,te+=O*ze,ee+=O*Me,ae+=O*ge,Q+=O*Fe,X+=O*Se,Y+=O*le,$+=O*je,W+=O*Pe,oe+=O*pe,ye+=O*Xe,we+=O*Te,me+=O*_e,Ze+=O*Qe,De+=O*Ne,O=k[14],T+=O*Ae,te+=O*de,ee+=O*ze,ae+=O*Me,Q+=O*ge,X+=O*Fe,Y+=O*Se,$+=O*le,W+=O*je,oe+=O*Pe,ye+=O*pe,we+=O*Xe,me+=O*Te,Ze+=O*_e,De+=O*Qe,Ee+=O*Ne,O=k[15],te+=O*Ae,ee+=O*de,ae+=O*ze,Q+=O*Me,X+=O*ge,Y+=O*Fe,$+=O*Se,W+=O*le,oe+=O*je,ye+=O*Pe,we+=O*pe,me+=O*Xe,Ze+=O*Te,De+=O*_e,Ee+=O*Qe,nt+=O*Ne,J+=38*ee,L+=38*ae,C+=38*Q,g+=38*X,h+=38*Y,r+=38*$,o+=38*W,b+=38*oe,D+=38*ye,I+=38*we,x+=38*me,y+=38*Ze,S+=38*De,l+=38*Ee,T+=38*nt,j=1,O=J+j+65535,j=Math.floor(O/65536),J=O-j*65536,O=L+j+65535,j=Math.floor(O/65536),L=O-j*65536,O=C+j+65535,j=Math.floor(O/65536),C=O-j*65536,O=g+j+65535,j=Math.floor(O/65536),g=O-j*65536,O=h+j+65535,j=Math.floor(O/65536),h=O-j*65536,O=r+j+65535,j=Math.floor(O/65536),r=O-j*65536,O=o+j+65535,j=Math.floor(O/65536),o=O-j*65536,O=b+j+65535,j=Math.floor(O/65536),b=O-j*65536,O=D+j+65535,j=Math.floor(O/65536),D=O-j*65536,O=I+j+65535,j=Math.floor(O/65536),I=O-j*65536,O=x+j+65535,j=Math.floor(O/65536),x=O-j*65536,O=y+j+65535,j=Math.floor(O/65536),y=O-j*65536,O=S+j+65535,j=Math.floor(O/65536),S=O-j*65536,O=l+j+65535,j=Math.floor(O/65536),l=O-j*65536,O=T+j+65535,j=Math.floor(O/65536),T=O-j*65536,O=te+j+65535,j=Math.floor(O/65536),te=O-j*65536,J+=j-1+37*(j-1),j=1,O=J+j+65535,j=Math.floor(O/65536),J=O-j*65536,O=L+j+65535,j=Math.floor(O/65536),L=O-j*65536,O=C+j+65535,j=Math.floor(O/65536),C=O-j*65536,O=g+j+65535,j=Math.floor(O/65536),g=O-j*65536,O=h+j+65535,j=Math.floor(O/65536),h=O-j*65536,O=r+j+65535,j=Math.floor(O/65536),r=O-j*65536,O=o+j+65535,j=Math.floor(O/65536),o=O-j*65536,O=b+j+65535,j=Math.floor(O/65536),b=O-j*65536,O=D+j+65535,j=Math.floor(O/65536),D=O-j*65536,O=I+j+65535,j=Math.floor(O/65536),I=O-j*65536,O=x+j+65535,j=Math.floor(O/65536),x=O-j*65536,O=y+j+65535,j=Math.floor(O/65536),y=O-j*65536,O=S+j+65535,j=Math.floor(O/65536),S=O-j*65536,O=l+j+65535,j=Math.floor(O/65536),l=O-j*65536,O=T+j+65535,j=Math.floor(O/65536),T=O-j*65536,O=te+j+65535,j=Math.floor(O/65536),te=O-j*65536,J+=j-1+37*(j-1),q[0]=J,q[1]=L,q[2]=C,q[3]=g,q[4]=h,q[5]=r,q[6]=o,q[7]=b,q[8]=D,q[9]=I,q[10]=x,q[11]=y,q[12]=S,q[13]=l,q[14]=T,q[15]=te}function M(q,k){w(q,k,k)}function A(q,k){const F=n();for(let O=0;O<16;O++)F[O]=k[O];for(let O=253;O>=0;O--)M(F,F),O!==2&&O!==4&&w(F,F,k);for(let O=0;O<16;O++)q[O]=F[O]}function R(q,k){const F=new Uint8Array(32),O=new Float64Array(80),j=n(),J=n(),L=n(),C=n(),g=n(),h=n();for(let D=0;D<31;D++)F[D]=q[D];F[31]=q[31]&127|64,F[0]&=248,p(O,k);for(let D=0;D<16;D++)J[D]=O[D];j[0]=C[0]=1;for(let D=254;D>=0;--D){const I=F[D>>>3]>>>(D&7)&1;v(j,J,I),v(L,C,I),u(g,j,L),_(j,j,L),u(L,J,C),_(J,J,C),M(C,g),M(h,j),w(j,L,j),w(L,J,g),u(g,j,L),_(j,j,L),M(J,j),_(L,C,h),w(j,L,s),u(j,j,C),w(L,L,j),w(j,C,h),w(C,J,O),M(J,g),v(j,J,I),v(L,C,I)}for(let D=0;D<16;D++)O[D+16]=j[D],O[D+32]=L[D],O[D+48]=J[D],O[D+64]=C[D];const r=O.subarray(32),o=O.subarray(16);A(r,r),w(o,o,r);const b=new Uint8Array(32);return d(b,o),b}a.scalarMult=R;function B(q){return R(q,c)}a.scalarMultBase=B;function z(q){if(q.length!==a.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${a.SECRET_KEY_LENGTH} bytes`);const k=new Uint8Array(q);return{publicKey:B(k),secretKey:k}}a.generateKeyPairFromSeed=z;function P(q){const k=(0,e.randomBytes)(32,q),F=z(k);return(0,t.wipe)(k),F}a.generateKeyPair=P;function N(q,k,F=!1){if(q.length!==a.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(k.length!==a.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const O=R(q,k);if(F){let j=0;for(let J=0;J<O.length;J++)j|=O[J];if(j===0)throw new Error("X25519: invalid shared key")}return O}a.sharedKey=N})(kh);function zh(a){return globalThis.Buffer!=null?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a}function Mg(a=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zh(globalThis.Buffer.allocUnsafe(a)):new Uint8Array(a)}function nh(a,e){e||(e=a.reduce((c,s)=>c+s.length,0));const t=Mg(e);let n=0;for(const c of a)t.set(c,n),n+=c.length;return zh(t)}function F4(a,e){if(a.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var c=0;c<a.length;c++){var s=a.charAt(c),m=s.charCodeAt(0);if(t[m]!==255)throw new TypeError(s+" is ambiguous");t[m]=c}var v=a.length,d=a.charAt(0),p=Math.log(v)/Math.log(256),u=Math.log(256)/Math.log(v);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var R=0,B=0,z=0,P=A.length;z!==P&&A[z]===0;)z++,R++;for(var N=(P-z)*u+1>>>0,q=new Uint8Array(N);z!==P;){for(var k=A[z],F=0,O=N-1;(k!==0||F<B)&&O!==-1;O--,F++)k+=256*q[O]>>>0,q[O]=k%v>>>0,k=k/v>>>0;if(k!==0)throw new Error("Non-zero carry");B=F,z++}for(var j=N-B;j!==N&&q[j]===0;)j++;for(var J=d.repeat(R);j<N;++j)J+=a.charAt(q[j]);return J}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var R=0;if(A[R]!==" "){for(var B=0,z=0;A[R]===d;)B++,R++;for(var P=(A.length-R)*p+1>>>0,N=new Uint8Array(P);A[R];){var q=t[A.charCodeAt(R)];if(q===255)return;for(var k=0,F=P-1;(q!==0||k<z)&&F!==-1;F--,k++)q+=v*N[F]>>>0,N[F]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");z=k,R++}if(A[R]!==" "){for(var O=P-z;O!==P&&N[O]===0;)O++;for(var j=new Uint8Array(B+(P-O)),J=B;O!==P;)j[J++]=N[O++];return j}}}function M(A){var R=w(A);if(R)return R;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:M}}var j4=F4,$4=j4;const k4=a=>{if(a instanceof Uint8Array&&a.constructor.name==="Uint8Array")return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw new Error("Unknown type, must be binary type")},z4=a=>new TextEncoder().encode(a),H4=a=>new TextDecoder().decode(a);class K4{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class V4{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Sg(this,e)}}class G4{constructor(e){this.decoders=e}or(e){return Sg(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sg=(a,e)=>new G4({...a.decoders||{[a.prefix]:a},...e.decoders||{[e.prefix]:e}});class W4{constructor(e,t,n,c){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=c,this.encoder=new K4(e,t,n),this.decoder=new V4(e,t,c)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ko=({name:a,prefix:e,encode:t,decode:n})=>new W4(a,e,t,n),ia=({prefix:a,name:e,alphabet:t})=>{const{encode:n,decode:c}=$4(t,e);return Ko({prefix:a,name:e,encode:n,decode:s=>k4(c(s))})},Y4=(a,e,t,n)=>{const c={};for(let u=0;u<e.length;++u)c[e[u]]=u;let s=a.length;for(;a[s-1]==="=";)--s;const m=new Uint8Array(s*t/8|0);let v=0,d=0,p=0;for(let u=0;u<s;++u){const _=c[a[u]];if(_===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<t|_,v+=t,v>=8&&(v-=8,m[p++]=255&d>>v)}if(v>=t||255&d<<8-v)throw new SyntaxError("Unexpected end of data");return m},J4=(a,e,t)=>{const n=e[e.length-1]==="=",c=(1<<t)-1;let s="",m=0,v=0;for(let d=0;d<a.length;++d)for(v=v<<8|a[d],m+=8;m>t;)m-=t,s+=e[c&v>>m];if(m&&(s+=e[c&v<<t-m]),n)for(;s.length*t&7;)s+="=";return s},mr=({name:a,prefix:e,bitsPerChar:t,alphabet:n})=>Ko({prefix:e,name:a,encode(c){return J4(c,n,t)},decode(c){return Y4(c,n,t,a)}}),Z4=Ko({prefix:"\0",name:"identity",encode:a=>H4(a),decode:a=>z4(a)}),X4=Object.freeze(Object.defineProperty({__proto__:null,identity:Z4},Symbol.toStringTag,{value:"Module"})),Q4=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),e8=Object.freeze(Object.defineProperty({__proto__:null,base2:Q4},Symbol.toStringTag,{value:"Module"})),t8=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),r8=Object.freeze(Object.defineProperty({__proto__:null,base8:t8},Symbol.toStringTag,{value:"Module"})),i8=ia({prefix:"9",name:"base10",alphabet:"0123456789"}),n8=Object.freeze(Object.defineProperty({__proto__:null,base10:i8},Symbol.toStringTag,{value:"Module"})),s8=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),a8=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),o8=Object.freeze(Object.defineProperty({__proto__:null,base16:s8,base16upper:a8},Symbol.toStringTag,{value:"Module"})),f8=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),c8=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u8=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h8=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l8=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),d8=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p8=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v8=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),g8=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),b8=Object.freeze(Object.defineProperty({__proto__:null,base32:f8,base32hex:l8,base32hexpad:p8,base32hexpadupper:v8,base32hexupper:d8,base32pad:u8,base32padupper:h8,base32upper:c8,base32z:g8},Symbol.toStringTag,{value:"Module"})),m8=ia({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),y8=ia({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_8=Object.freeze(Object.defineProperty({__proto__:null,base36:m8,base36upper:y8},Symbol.toStringTag,{value:"Module"})),w8=ia({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),E8=ia({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),M8=Object.freeze(Object.defineProperty({__proto__:null,base58btc:w8,base58flickr:E8},Symbol.toStringTag,{value:"Module"})),S8=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x8=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),D8=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),A8=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),I8=Object.freeze(Object.defineProperty({__proto__:null,base64:S8,base64pad:x8,base64url:D8,base64urlpad:A8},Symbol.toStringTag,{value:"Module"})),xg=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),O8=xg.reduce((a,e,t)=>(a[t]=e,a),[]),P8=xg.reduce((a,e,t)=>(a[e.codePointAt(0)]=t,a),[]);function C8(a){return a.reduce((e,t)=>(e+=O8[t],e),"")}function R8(a){const e=[];for(const t of a){const n=P8[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const T8=Ko({prefix:"🚀",name:"base256emoji",encode:C8,decode:R8}),N8=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:T8},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ap={...X4,...e8,...r8,...n8,...o8,...b8,..._8,...M8,...I8,...N8};function Dg(a,e,t,n){return{name:a,prefix:e,encoder:{name:a,prefix:e,encode:t},decoder:{decode:n}}}const op=Dg("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>new TextEncoder().encode(a.substring(1))),Nu=Dg("ascii","a",a=>{let e="a";for(let t=0;t<a.length;t++)e+=String.fromCharCode(a[t]);return e},a=>{a=a.substring(1);const e=Mg(a.length);for(let t=0;t<a.length;t++)e[t]=a.charCodeAt(t);return e}),Ag={utf8:op,"utf-8":op,hex:ap.base16,latin1:Nu,ascii:Nu,binary:Nu,...ap};function Yr(a,e="utf8"){const t=Ag[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zh(globalThis.Buffer.from(a,"utf-8")):t.decoder.decode(`${t.prefix}${a}`)}function kr(a,e="utf8"){const t=Ag[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(a.buffer,a.byteOffset,a.byteLength).toString("utf8"):t.encoder.encode(a).substring(1)}var ft={},Ig={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(a){var e,t,n,c,s,m,v,d,p,u,_,w,M,A,R,B,z,P,N,q,k,F,O;(function(j){var J=typeof St=="object"?St:typeof self=="object"?self:typeof this=="object"?this:{};j(L(J,L(a.exports)));function L(C,g){return C!==J&&(typeof Object.create=="function"?Object.defineProperty(C,"__esModule",{value:!0}):C.__esModule=!0),function(h,r){return C[h]=g?g(h,r):r}}})(function(j){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,C){L.__proto__=C}||function(L,C){for(var g in C)C.hasOwnProperty(g)&&(L[g]=C[g])};e=function(L,C){J(L,C);function g(){this.constructor=L}L.prototype=C===null?Object.create(C):(g.prototype=C.prototype,new g)},t=Object.assign||function(L){for(var C,g=1,h=arguments.length;g<h;g++){C=arguments[g];for(var r in C)Object.prototype.hasOwnProperty.call(C,r)&&(L[r]=C[r])}return L},n=function(L,C){var g={};for(var h in L)Object.prototype.hasOwnProperty.call(L,h)&&C.indexOf(h)<0&&(g[h]=L[h]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,h=Object.getOwnPropertySymbols(L);r<h.length;r++)C.indexOf(h[r])<0&&Object.prototype.propertyIsEnumerable.call(L,h[r])&&(g[h[r]]=L[h[r]]);return g},c=function(L,C,g,h){var r=arguments.length,o=r<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,g):h,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(L,C,g,h);else for(var D=L.length-1;D>=0;D--)(b=L[D])&&(o=(r<3?b(o):r>3?b(C,g,o):b(C,g))||o);return r>3&&o&&Object.defineProperty(C,g,o),o},s=function(L,C){return function(g,h){C(g,h,L)}},m=function(L,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,C)},v=function(L,C,g,h){function r(o){return o instanceof g?o:new g(function(b){b(o)})}return new(g||(g=Promise))(function(o,b){function D(y){try{x(h.next(y))}catch(S){b(S)}}function I(y){try{x(h.throw(y))}catch(S){b(S)}}function x(y){y.done?o(y.value):r(y.value).then(D,I)}x((h=h.apply(L,C||[])).next())})},d=function(L,C){var g={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},h,r,o,b;return b={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function D(x){return function(y){return I([x,y])}}function I(x){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return g.label++,{value:x[1],done:!1};case 5:g.label++,r=x[1],x=[0];continue;case 7:x=g.ops.pop(),g.trys.pop();continue;default:if(o=g.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){g=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){g.label=x[1];break}if(x[0]===6&&g.label<o[1]){g.label=o[1],o=x;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(x);break}o[2]&&g.ops.pop(),g.trys.pop();continue}x=C.call(L,g)}catch(y){x=[6,y],r=0}finally{h=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},O=function(L,C,g,h){h===void 0&&(h=g),L[h]=C[g]},p=function(L,C){for(var g in L)g!=="default"&&!C.hasOwnProperty(g)&&(C[g]=L[g])},u=function(L){var C=typeof Symbol=="function"&&Symbol.iterator,g=C&&L[C],h=0;if(g)return g.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&h>=L.length&&(L=void 0),{value:L&&L[h++],done:!L}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(L,C){var g=typeof Symbol=="function"&&L[Symbol.iterator];if(!g)return L;var h=g.call(L),r,o=[],b;try{for(;(C===void 0||C-- >0)&&!(r=h.next()).done;)o.push(r.value)}catch(D){b={error:D}}finally{try{r&&!r.done&&(g=h.return)&&g.call(h)}finally{if(b)throw b.error}}return o},w=function(){for(var L=[],C=0;C<arguments.length;C++)L=L.concat(_(arguments[C]));return L},M=function(){for(var L=0,C=0,g=arguments.length;C<g;C++)L+=arguments[C].length;for(var h=Array(L),r=0,C=0;C<g;C++)for(var o=arguments[C],b=0,D=o.length;b<D;b++,r++)h[r]=o[b];return h},A=function(L){return this instanceof A?(this.v=L,this):new A(L)},R=function(L,C,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=g.apply(L,C||[]),r,o=[];return r={},b("next"),b("throw"),b("return"),r[Symbol.asyncIterator]=function(){return this},r;function b(l){h[l]&&(r[l]=function(T){return new Promise(function(te,ee){o.push([l,T,te,ee])>1||D(l,T)})})}function D(l,T){try{I(h[l](T))}catch(te){S(o[0][3],te)}}function I(l){l.value instanceof A?Promise.resolve(l.value.v).then(x,y):S(o[0][2],l)}function x(l){D("next",l)}function y(l){D("throw",l)}function S(l,T){l(T),o.shift(),o.length&&D(o[0][0],o[0][1])}},B=function(L){var C,g;return C={},h("next"),h("throw",function(r){throw r}),h("return"),C[Symbol.iterator]=function(){return this},C;function h(r,o){C[r]=L[r]?function(b){return(g=!g)?{value:A(L[r](b)),done:r==="return"}:o?o(b):b}:o}},z=function(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=L[Symbol.asyncIterator],g;return C?C.call(L):(L=typeof u=="function"?u(L):L[Symbol.iterator](),g={},h("next"),h("throw"),h("return"),g[Symbol.asyncIterator]=function(){return this},g);function h(o){g[o]=L[o]&&function(b){return new Promise(function(D,I){b=L[o](b),r(D,I,b.done,b.value)})}}function r(o,b,D,I){Promise.resolve(I).then(function(x){o({value:x,done:D})},b)}},P=function(L,C){return Object.defineProperty?Object.defineProperty(L,"raw",{value:C}):L.raw=C,L},N=function(L){if(L&&L.__esModule)return L;var C={};if(L!=null)for(var g in L)Object.hasOwnProperty.call(L,g)&&(C[g]=L[g]);return C.default=L,C},q=function(L){return L&&L.__esModule?L:{default:L}},k=function(L,C){if(!C.has(L))throw new TypeError("attempted to get private field on non-instance");return C.get(L)},F=function(L,C,g){if(!C.has(L))throw new TypeError("attempted to set private field on non-instance");return C.set(L,g),g},j("__extends",e),j("__assign",t),j("__rest",n),j("__decorate",c),j("__param",s),j("__metadata",m),j("__awaiter",v),j("__generator",d),j("__exportStar",p),j("__createBinding",O),j("__values",u),j("__read",_),j("__spread",w),j("__spreadArrays",M),j("__await",A),j("__asyncGenerator",R),j("__asyncDelegator",B),j("__asyncValues",z),j("__makeTemplateObject",P),j("__importStar",N),j("__importDefault",q),j("__classPrivateFieldGet",k),j("__classPrivateFieldSet",F)})})(Ig);var Vo=Ig.exports,Bu={},Us={},fp;function B8(){if(fp)return Us;fp=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.delay=void 0;function a(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Us.delay=a,Us}var On={},Uu={},Pn={},cp;function U8(){return cp||(cp=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.ONE_THOUSAND=Pn.ONE_HUNDRED=void 0,Pn.ONE_HUNDRED=100,Pn.ONE_THOUSAND=1e3),Pn}var qu={},up;function q8(){return up||(up=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ONE_YEAR=a.FOUR_WEEKS=a.THREE_WEEKS=a.TWO_WEEKS=a.ONE_WEEK=a.THIRTY_DAYS=a.SEVEN_DAYS=a.FIVE_DAYS=a.THREE_DAYS=a.ONE_DAY=a.TWENTY_FOUR_HOURS=a.TWELVE_HOURS=a.SIX_HOURS=a.THREE_HOURS=a.ONE_HOUR=a.SIXTY_MINUTES=a.THIRTY_MINUTES=a.TEN_MINUTES=a.FIVE_MINUTES=a.ONE_MINUTE=a.SIXTY_SECONDS=a.THIRTY_SECONDS=a.TEN_SECONDS=a.FIVE_SECONDS=a.ONE_SECOND=void 0,a.ONE_SECOND=1,a.FIVE_SECONDS=5,a.TEN_SECONDS=10,a.THIRTY_SECONDS=30,a.SIXTY_SECONDS=60,a.ONE_MINUTE=a.SIXTY_SECONDS,a.FIVE_MINUTES=a.ONE_MINUTE*5,a.TEN_MINUTES=a.ONE_MINUTE*10,a.THIRTY_MINUTES=a.ONE_MINUTE*30,a.SIXTY_MINUTES=a.ONE_MINUTE*60,a.ONE_HOUR=a.SIXTY_MINUTES,a.THREE_HOURS=a.ONE_HOUR*3,a.SIX_HOURS=a.ONE_HOUR*6,a.TWELVE_HOURS=a.ONE_HOUR*12,a.TWENTY_FOUR_HOURS=a.ONE_HOUR*24,a.ONE_DAY=a.TWENTY_FOUR_HOURS,a.THREE_DAYS=a.ONE_DAY*3,a.FIVE_DAYS=a.ONE_DAY*5,a.SEVEN_DAYS=a.ONE_DAY*7,a.THIRTY_DAYS=a.ONE_DAY*30,a.ONE_WEEK=a.SEVEN_DAYS,a.TWO_WEEKS=a.ONE_WEEK*2,a.THREE_WEEKS=a.ONE_WEEK*3,a.FOUR_WEEKS=a.ONE_WEEK*4,a.ONE_YEAR=a.ONE_DAY*365}(qu)),qu}var hp;function Og(){return hp||(hp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0});const e=Vo;e.__exportStar(U8(),a),e.__exportStar(q8(),a)}(Uu)),Uu}var lp;function L8(){if(lp)return On;lp=1,Object.defineProperty(On,"__esModule",{value:!0}),On.fromMiliseconds=On.toMiliseconds=void 0;const a=Og();function e(n){return n*a.ONE_THOUSAND}On.toMiliseconds=e;function t(n){return Math.floor(n/a.ONE_THOUSAND)}return On.fromMiliseconds=t,On}var dp;function F8(){return dp||(dp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0});const e=Vo;e.__exportStar(B8(),a),e.__exportStar(L8(),a)}(Bu)),Bu}var os={},pp;function j8(){if(pp)return os;pp=1,Object.defineProperty(os,"__esModule",{value:!0}),os.Watch=void 0;class a{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const c=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:c})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return os.Watch=a,os.default=a,os}var Lu={},qs={},vp;function $8(){if(vp)return qs;vp=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.IWatch=void 0;class a{}return qs.IWatch=a,qs}var gp;function k8(){return gp||(gp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),Vo.__exportStar($8(),a)}(Lu)),Lu}(function(a){Object.defineProperty(a,"__esModule",{value:!0});const e=Vo;e.__exportStar(F8(),a),e.__exportStar(j8(),a),e.__exportStar(k8(),a),e.__exportStar(Og(),a)})(ft);var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getLocalStorage=Kt.getLocalStorageOrThrow=Kt.getCrypto=Kt.getCryptoOrThrow=Kt.getLocation=Kt.getLocationOrThrow=Kt.getNavigator=Kt.getNavigatorOrThrow=Kt.getDocument=Kt.getDocumentOrThrow=Kt.getFromWindowOrThrow=Kt.getFromWindow=void 0;function Un(a){let e;return typeof window<"u"&&typeof window[a]<"u"&&(e=window[a]),e}Kt.getFromWindow=Un;function ls(a){const e=Un(a);if(!e)throw new Error(`${a} is not defined in Window`);return e}Kt.getFromWindowOrThrow=ls;function z8(){return ls("document")}Kt.getDocumentOrThrow=z8;function H8(){return Un("document")}Kt.getDocument=H8;function K8(){return ls("navigator")}Kt.getNavigatorOrThrow=K8;function V8(){return Un("navigator")}Kt.getNavigator=V8;function G8(){return ls("location")}Kt.getLocationOrThrow=G8;function W8(){return Un("location")}Kt.getLocation=W8;function Y8(){return ls("crypto")}Kt.getCryptoOrThrow=Y8;function J8(){return Un("crypto")}Kt.getCrypto=J8;function Z8(){return ls("localStorage")}Kt.getLocalStorageOrThrow=Z8;function X8(){return Un("localStorage")}Kt.getLocalStorage=X8;var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.getWindowMetadata=void 0;const bp=Kt;function Q8(){let a,e;try{a=bp.getDocumentOrThrow(),e=bp.getLocationOrThrow()}catch{return null}function t(){const _=a.getElementsByTagName("link"),w=[];for(let M=0;M<_.length;M++){const A=_[M],R=A.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const B=A.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let z=e.protocol+"//"+e.host;if(B.indexOf("/")===0)z+=B;else{const P=e.pathname.split("/");P.pop();const N=P.join("/");z+=N+"/"+B}w.push(z)}else if(B.indexOf("//")===0){const z=e.protocol+B;w.push(z)}else w.push(B)}}return w}function n(..._){const w=a.getElementsByTagName("meta");for(let M=0;M<w.length;M++){const A=w[M],R=["itemprop","property","name"].map(B=>A.getAttribute(B)).filter(B=>B?_.includes(B):!1);if(R.length&&R){const B=A.getAttribute("content");if(B)return B}}return""}function c(){let _=n("name","og:site_name","og:title","twitter:title");return _||(_=a.title),_}function s(){return n("description","og:description","twitter:description","keywords")}const m=c(),v=s(),d=e.origin,p=t();return{description:v,url:d,icons:p,name:m}}Hh.getWindowMetadata=Q8;var e9={},Kh=function(a,e){for(var t={},n=Object.keys(a),c=Array.isArray(e),s=0;s<n.length;s++){var m=n[s],v=a[m];(c?e.indexOf(m)!==-1:e(m,v,a))&&(t[m]=v)}return t};(function(a){const e=Eh,t=Mh,n=wh,c=Kh,s=P=>P==null,m=Symbol("encodeFragmentIdentifier");function v(P){switch(P.arrayFormat){case"index":return N=>(q,k)=>{const F=q.length;return k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[",F,"]"].join("")]:[...q,[u(N,P),"[",u(F,P),"]=",u(k,P)].join("")]};case"bracket":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[]"].join("")]:[...q,[u(N,P),"[]=",u(k,P)].join("")];case"colon-list-separator":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),":list="].join("")]:[...q,[u(N,P),":list=",u(k,P)].join("")];case"comma":case"separator":case"bracket-separator":{const N=P.arrayFormat==="bracket-separator"?"[]=":"=";return q=>(k,F)=>F===void 0||P.skipNull&&F===null||P.skipEmptyString&&F===""?k:(F=F===null?"":F,k.length===0?[[u(q,P),N,u(F,P)].join("")]:[[k,u(F,P)].join(P.arrayFormatSeparator)])}default:return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,u(N,P)]:[...q,[u(N,P),"=",u(k,P)].join("")]}}function d(P){let N;switch(P.arrayFormat){case"index":return(q,k,F)=>{if(N=/\[(\d*)\]$/.exec(q),q=q.replace(/\[\d*\]$/,""),!N){F[q]=k;return}F[q]===void 0&&(F[q]={}),F[q][N[1]]=k};case"bracket":return(q,k,F)=>{if(N=/(\[\])$/.exec(q),q=q.replace(/\[\]$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"colon-list-separator":return(q,k,F)=>{if(N=/(:list)$/.exec(q),q=q.replace(/:list$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"comma":case"separator":return(q,k,F)=>{const O=typeof k=="string"&&k.includes(P.arrayFormatSeparator),j=typeof k=="string"&&!O&&_(k,P).includes(P.arrayFormatSeparator);k=j?_(k,P):k;const J=O||j?k.split(P.arrayFormatSeparator).map(L=>_(L,P)):k===null?k:_(k,P);F[q]=J};case"bracket-separator":return(q,k,F)=>{const O=/(\[\])$/.test(q);if(q=q.replace(/\[\]$/,""),!O){F[q]=k&&_(k,P);return}const j=k===null?[]:k.split(P.arrayFormatSeparator).map(J=>_(J,P));if(F[q]===void 0){F[q]=j;return}F[q]=[].concat(F[q],j)};default:return(q,k,F)=>{if(F[q]===void 0){F[q]=k;return}F[q]=[].concat(F[q],k)}}}function p(P){if(typeof P!="string"||P.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(P,N){return N.encode?N.strict?e(P):encodeURIComponent(P):P}function _(P,N){return N.decode?t(P):P}function w(P){return Array.isArray(P)?P.sort():typeof P=="object"?w(Object.keys(P)).sort((N,q)=>Number(N)-Number(q)).map(N=>P[N]):P}function M(P){const N=P.indexOf("#");return N!==-1&&(P=P.slice(0,N)),P}function A(P){let N="";const q=P.indexOf("#");return q!==-1&&(N=P.slice(q)),N}function R(P){P=M(P);const N=P.indexOf("?");return N===-1?"":P.slice(N+1)}function B(P,N){return N.parseNumbers&&!Number.isNaN(Number(P))&&typeof P=="string"&&P.trim()!==""?P=Number(P):N.parseBooleans&&P!==null&&(P.toLowerCase()==="true"||P.toLowerCase()==="false")&&(P=P.toLowerCase()==="true"),P}function z(P,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),p(N.arrayFormatSeparator);const q=d(N),k=Object.create(null);if(typeof P!="string"||(P=P.trim().replace(/^[?#&]/,""),!P))return k;for(const F of P.split("&")){if(F==="")continue;let[O,j]=n(N.decode?F.replace(/\+/g," "):F,"=");j=j===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?j:_(j,N),q(_(O,N),j,k)}for(const F of Object.keys(k)){const O=k[F];if(typeof O=="object"&&O!==null)for(const j of Object.keys(O))O[j]=B(O[j],N);else k[F]=B(O,N)}return N.sort===!1?k:(N.sort===!0?Object.keys(k).sort():Object.keys(k).sort(N.sort)).reduce((F,O)=>{const j=k[O];return j&&typeof j=="object"&&!Array.isArray(j)?F[O]=w(j):F[O]=j,F},Object.create(null))}a.extract=R,a.parse=z,a.stringify=(P,N)=>{if(!P)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),p(N.arrayFormatSeparator);const q=j=>N.skipNull&&s(P[j])||N.skipEmptyString&&P[j]==="",k=v(N),F={};for(const j of Object.keys(P))q(j)||(F[j]=P[j]);const O=Object.keys(F);return N.sort!==!1&&O.sort(N.sort),O.map(j=>{const J=P[j];return J===void 0?"":J===null?u(j,N):Array.isArray(J)?J.length===0&&N.arrayFormat==="bracket-separator"?u(j,N)+"[]":J.reduce(k(j),[]).join("&"):u(j,N)+"="+u(J,N)}).filter(j=>j.length>0).join("&")},a.parseUrl=(P,N)=>{N=Object.assign({decode:!0},N);const[q,k]=n(P,"#");return Object.assign({url:q.split("?")[0]||"",query:z(R(P),N)},N&&N.parseFragmentIdentifier&&k?{fragmentIdentifier:_(k,N)}:{})},a.stringifyUrl=(P,N)=>{N=Object.assign({encode:!0,strict:!0,[m]:!0},N);const q=M(P.url).split("?")[0]||"",k=a.extract(P.url),F=a.parse(k,{sort:!1}),O=Object.assign(F,P.query);let j=a.stringify(O,N);j&&(j=`?${j}`);let J=A(P.url);return P.fragmentIdentifier&&(J=`#${N[m]?u(P.fragmentIdentifier,N):P.fragmentIdentifier}`),`${q}${j}${J}`},a.pick=(P,N,q)=>{q=Object.assign({parseFragmentIdentifier:!0,[m]:!1},q);const{url:k,query:F,fragmentIdentifier:O}=a.parseUrl(P,q);return a.stringifyUrl({url:k,query:c(F,N),fragmentIdentifier:O},q)},a.exclude=(P,N,q)=>{const k=Array.isArray(N)?F=>!N.includes(F):(F,O)=>!N(F,O);return a.pick(P,k,q)}})(e9);const t9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function r9(a,e=[]){const t=[];return Object.keys(a).forEach(n=>{if(e.length&&!e.includes(n))return;const c=a[n];t.push(...c.accounts)}),t}const i9={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function n9(a,e){const{message:t,code:n}=i9[a];return{message:e?`${t} ${e}`:t,code:n}}function sh(a,e){return Array.isArray(a)?typeof e<"u"&&a.length?a.every(e):!0:!1}var Go={},Pg={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(a){var e,t,n,c,s,m,v,d,p,u,_,w,M,A,R,B,z,P,N,q,k,F,O;(function(j){var J=typeof St=="object"?St:typeof self=="object"?self:typeof this=="object"?this:{};j(L(J,L(a.exports)));function L(C,g){return C!==J&&(typeof Object.create=="function"?Object.defineProperty(C,"__esModule",{value:!0}):C.__esModule=!0),function(h,r){return C[h]=g?g(h,r):r}}})(function(j){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,C){L.__proto__=C}||function(L,C){for(var g in C)C.hasOwnProperty(g)&&(L[g]=C[g])};e=function(L,C){J(L,C);function g(){this.constructor=L}L.prototype=C===null?Object.create(C):(g.prototype=C.prototype,new g)},t=Object.assign||function(L){for(var C,g=1,h=arguments.length;g<h;g++){C=arguments[g];for(var r in C)Object.prototype.hasOwnProperty.call(C,r)&&(L[r]=C[r])}return L},n=function(L,C){var g={};for(var h in L)Object.prototype.hasOwnProperty.call(L,h)&&C.indexOf(h)<0&&(g[h]=L[h]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,h=Object.getOwnPropertySymbols(L);r<h.length;r++)C.indexOf(h[r])<0&&Object.prototype.propertyIsEnumerable.call(L,h[r])&&(g[h[r]]=L[h[r]]);return g},c=function(L,C,g,h){var r=arguments.length,o=r<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,g):h,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(L,C,g,h);else for(var D=L.length-1;D>=0;D--)(b=L[D])&&(o=(r<3?b(o):r>3?b(C,g,o):b(C,g))||o);return r>3&&o&&Object.defineProperty(C,g,o),o},s=function(L,C){return function(g,h){C(g,h,L)}},m=function(L,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,C)},v=function(L,C,g,h){function r(o){return o instanceof g?o:new g(function(b){b(o)})}return new(g||(g=Promise))(function(o,b){function D(y){try{x(h.next(y))}catch(S){b(S)}}function I(y){try{x(h.throw(y))}catch(S){b(S)}}function x(y){y.done?o(y.value):r(y.value).then(D,I)}x((h=h.apply(L,C||[])).next())})},d=function(L,C){var g={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},h,r,o,b;return b={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function D(x){return function(y){return I([x,y])}}function I(x){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return g.label++,{value:x[1],done:!1};case 5:g.label++,r=x[1],x=[0];continue;case 7:x=g.ops.pop(),g.trys.pop();continue;default:if(o=g.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){g=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){g.label=x[1];break}if(x[0]===6&&g.label<o[1]){g.label=o[1],o=x;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(x);break}o[2]&&g.ops.pop(),g.trys.pop();continue}x=C.call(L,g)}catch(y){x=[6,y],r=0}finally{h=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},O=function(L,C,g,h){h===void 0&&(h=g),L[h]=C[g]},p=function(L,C){for(var g in L)g!=="default"&&!C.hasOwnProperty(g)&&(C[g]=L[g])},u=function(L){var C=typeof Symbol=="function"&&Symbol.iterator,g=C&&L[C],h=0;if(g)return g.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&h>=L.length&&(L=void 0),{value:L&&L[h++],done:!L}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(L,C){var g=typeof Symbol=="function"&&L[Symbol.iterator];if(!g)return L;var h=g.call(L),r,o=[],b;try{for(;(C===void 0||C-- >0)&&!(r=h.next()).done;)o.push(r.value)}catch(D){b={error:D}}finally{try{r&&!r.done&&(g=h.return)&&g.call(h)}finally{if(b)throw b.error}}return o},w=function(){for(var L=[],C=0;C<arguments.length;C++)L=L.concat(_(arguments[C]));return L},M=function(){for(var L=0,C=0,g=arguments.length;C<g;C++)L+=arguments[C].length;for(var h=Array(L),r=0,C=0;C<g;C++)for(var o=arguments[C],b=0,D=o.length;b<D;b++,r++)h[r]=o[b];return h},A=function(L){return this instanceof A?(this.v=L,this):new A(L)},R=function(L,C,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=g.apply(L,C||[]),r,o=[];return r={},b("next"),b("throw"),b("return"),r[Symbol.asyncIterator]=function(){return this},r;function b(l){h[l]&&(r[l]=function(T){return new Promise(function(te,ee){o.push([l,T,te,ee])>1||D(l,T)})})}function D(l,T){try{I(h[l](T))}catch(te){S(o[0][3],te)}}function I(l){l.value instanceof A?Promise.resolve(l.value.v).then(x,y):S(o[0][2],l)}function x(l){D("next",l)}function y(l){D("throw",l)}function S(l,T){l(T),o.shift(),o.length&&D(o[0][0],o[0][1])}},B=function(L){var C,g;return C={},h("next"),h("throw",function(r){throw r}),h("return"),C[Symbol.iterator]=function(){return this},C;function h(r,o){C[r]=L[r]?function(b){return(g=!g)?{value:A(L[r](b)),done:r==="return"}:o?o(b):b}:o}},z=function(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=L[Symbol.asyncIterator],g;return C?C.call(L):(L=typeof u=="function"?u(L):L[Symbol.iterator](),g={},h("next"),h("throw"),h("return"),g[Symbol.asyncIterator]=function(){return this},g);function h(o){g[o]=L[o]&&function(b){return new Promise(function(D,I){b=L[o](b),r(D,I,b.done,b.value)})}}function r(o,b,D,I){Promise.resolve(I).then(function(x){o({value:x,done:D})},b)}},P=function(L,C){return Object.defineProperty?Object.defineProperty(L,"raw",{value:C}):L.raw=C,L},N=function(L){if(L&&L.__esModule)return L;var C={};if(L!=null)for(var g in L)Object.hasOwnProperty.call(L,g)&&(C[g]=L[g]);return C.default=L,C},q=function(L){return L&&L.__esModule?L:{default:L}},k=function(L,C){if(!C.has(L))throw new TypeError("attempted to get private field on non-instance");return C.get(L)},F=function(L,C,g){if(!C.has(L))throw new TypeError("attempted to set private field on non-instance");return C.set(L,g),g},j("__extends",e),j("__assign",t),j("__rest",n),j("__decorate",c),j("__param",s),j("__metadata",m),j("__awaiter",v),j("__generator",d),j("__exportStar",p),j("__createBinding",O),j("__values",u),j("__read",_),j("__spread",w),j("__spreadArrays",M),j("__await",A),j("__asyncGenerator",R),j("__asyncDelegator",B),j("__asyncValues",z),j("__makeTemplateObject",P),j("__importStar",N),j("__importDefault",q),j("__classPrivateFieldGet",k),j("__classPrivateFieldSet",F)})})(Pg);var Cg=Pg.exports,na={};Object.defineProperty(na,"__esModule",{value:!0});function s9(a){if(typeof a!="string")throw new Error(`Cannot safe json parse value of type ${typeof a}`);try{return JSON.parse(a)}catch{return a}}na.safeJsonParse=s9;function a9(a){return typeof a=="string"?a:JSON.stringify(a,(e,t)=>typeof t>"u"?null:t)}na.safeJsonStringify=a9;var Ls={exports:{}},mp;function o9(){return mp||(mp=1,function(){let a;function e(){}a=e,a.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},a.prototype.setItem=function(t,n){this[t]=String(n)},a.prototype.removeItem=function(t){delete this[t]},a.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},a.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},a.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof St<"u"&&St.localStorage?Ls.exports=St.localStorage:typeof window<"u"&&window.localStorage?Ls.exports=window.localStorage:Ls.exports=new e}()),Ls.exports}var Fu={},Fs={},yp;function f9(){if(yp)return Fs;yp=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.IKeyValueStorage=void 0;class a{}return Fs.IKeyValueStorage=a,Fs}var js={},_p;function c9(){if(_p)return js;_p=1,Object.defineProperty(js,"__esModule",{value:!0}),js.parseEntry=void 0;const a=na;function e(t){var n;return[t[0],a.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}return js.parseEntry=e,js}var wp;function u9(){return wp||(wp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0});const e=Cg;e.__exportStar(f9(),a),e.__exportStar(c9(),a)}(Fu)),Fu}Object.defineProperty(Go,"__esModule",{value:!0});Go.KeyValueStorage=void 0;const fs=Cg,Ep=na,h9=fs.__importDefault(o9()),l9=u9();class Rg{constructor(){this.localStorage=h9.default}getKeys(){return fs.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return fs.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(l9.parseEntry)})}getItem(e){return fs.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return Ep.safeJsonParse(t)})}setItem(e,t){return fs.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Ep.safeJsonStringify(t))})}removeItem(e){return fs.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Go.KeyValueStorage=Rg;var d9=Go.default=Rg,sa={},Tg={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(a){var e,t,n,c,s,m,v,d,p,u,_,w,M,A,R,B,z,P,N,q,k,F,O;(function(j){var J=typeof St=="object"?St:typeof self=="object"?self:typeof this=="object"?this:{};j(L(J,L(a.exports)));function L(C,g){return C!==J&&(typeof Object.create=="function"?Object.defineProperty(C,"__esModule",{value:!0}):C.__esModule=!0),function(h,r){return C[h]=g?g(h,r):r}}})(function(j){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,C){L.__proto__=C}||function(L,C){for(var g in C)C.hasOwnProperty(g)&&(L[g]=C[g])};e=function(L,C){J(L,C);function g(){this.constructor=L}L.prototype=C===null?Object.create(C):(g.prototype=C.prototype,new g)},t=Object.assign||function(L){for(var C,g=1,h=arguments.length;g<h;g++){C=arguments[g];for(var r in C)Object.prototype.hasOwnProperty.call(C,r)&&(L[r]=C[r])}return L},n=function(L,C){var g={};for(var h in L)Object.prototype.hasOwnProperty.call(L,h)&&C.indexOf(h)<0&&(g[h]=L[h]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,h=Object.getOwnPropertySymbols(L);r<h.length;r++)C.indexOf(h[r])<0&&Object.prototype.propertyIsEnumerable.call(L,h[r])&&(g[h[r]]=L[h[r]]);return g},c=function(L,C,g,h){var r=arguments.length,o=r<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,g):h,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(L,C,g,h);else for(var D=L.length-1;D>=0;D--)(b=L[D])&&(o=(r<3?b(o):r>3?b(C,g,o):b(C,g))||o);return r>3&&o&&Object.defineProperty(C,g,o),o},s=function(L,C){return function(g,h){C(g,h,L)}},m=function(L,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,C)},v=function(L,C,g,h){function r(o){return o instanceof g?o:new g(function(b){b(o)})}return new(g||(g=Promise))(function(o,b){function D(y){try{x(h.next(y))}catch(S){b(S)}}function I(y){try{x(h.throw(y))}catch(S){b(S)}}function x(y){y.done?o(y.value):r(y.value).then(D,I)}x((h=h.apply(L,C||[])).next())})},d=function(L,C){var g={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},h,r,o,b;return b={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function D(x){return function(y){return I([x,y])}}function I(x){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return g.label++,{value:x[1],done:!1};case 5:g.label++,r=x[1],x=[0];continue;case 7:x=g.ops.pop(),g.trys.pop();continue;default:if(o=g.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){g=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){g.label=x[1];break}if(x[0]===6&&g.label<o[1]){g.label=o[1],o=x;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(x);break}o[2]&&g.ops.pop(),g.trys.pop();continue}x=C.call(L,g)}catch(y){x=[6,y],r=0}finally{h=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},O=function(L,C,g,h){h===void 0&&(h=g),L[h]=C[g]},p=function(L,C){for(var g in L)g!=="default"&&!C.hasOwnProperty(g)&&(C[g]=L[g])},u=function(L){var C=typeof Symbol=="function"&&Symbol.iterator,g=C&&L[C],h=0;if(g)return g.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&h>=L.length&&(L=void 0),{value:L&&L[h++],done:!L}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(L,C){var g=typeof Symbol=="function"&&L[Symbol.iterator];if(!g)return L;var h=g.call(L),r,o=[],b;try{for(;(C===void 0||C-- >0)&&!(r=h.next()).done;)o.push(r.value)}catch(D){b={error:D}}finally{try{r&&!r.done&&(g=h.return)&&g.call(h)}finally{if(b)throw b.error}}return o},w=function(){for(var L=[],C=0;C<arguments.length;C++)L=L.concat(_(arguments[C]));return L},M=function(){for(var L=0,C=0,g=arguments.length;C<g;C++)L+=arguments[C].length;for(var h=Array(L),r=0,C=0;C<g;C++)for(var o=arguments[C],b=0,D=o.length;b<D;b++,r++)h[r]=o[b];return h},A=function(L){return this instanceof A?(this.v=L,this):new A(L)},R=function(L,C,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=g.apply(L,C||[]),r,o=[];return r={},b("next"),b("throw"),b("return"),r[Symbol.asyncIterator]=function(){return this},r;function b(l){h[l]&&(r[l]=function(T){return new Promise(function(te,ee){o.push([l,T,te,ee])>1||D(l,T)})})}function D(l,T){try{I(h[l](T))}catch(te){S(o[0][3],te)}}function I(l){l.value instanceof A?Promise.resolve(l.value.v).then(x,y):S(o[0][2],l)}function x(l){D("next",l)}function y(l){D("throw",l)}function S(l,T){l(T),o.shift(),o.length&&D(o[0][0],o[0][1])}},B=function(L){var C,g;return C={},h("next"),h("throw",function(r){throw r}),h("return"),C[Symbol.iterator]=function(){return this},C;function h(r,o){C[r]=L[r]?function(b){return(g=!g)?{value:A(L[r](b)),done:r==="return"}:o?o(b):b}:o}},z=function(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=L[Symbol.asyncIterator],g;return C?C.call(L):(L=typeof u=="function"?u(L):L[Symbol.iterator](),g={},h("next"),h("throw"),h("return"),g[Symbol.asyncIterator]=function(){return this},g);function h(o){g[o]=L[o]&&function(b){return new Promise(function(D,I){b=L[o](b),r(D,I,b.done,b.value)})}}function r(o,b,D,I){Promise.resolve(I).then(function(x){o({value:x,done:D})},b)}},P=function(L,C){return Object.defineProperty?Object.defineProperty(L,"raw",{value:C}):L.raw=C,L},N=function(L){if(L&&L.__esModule)return L;var C={};if(L!=null)for(var g in L)Object.hasOwnProperty.call(L,g)&&(C[g]=L[g]);return C.default=L,C},q=function(L){return L&&L.__esModule?L:{default:L}},k=function(L,C){if(!C.has(L))throw new TypeError("attempted to get private field on non-instance");return C.get(L)},F=function(L,C,g){if(!C.has(L))throw new TypeError("attempted to set private field on non-instance");return C.set(L,g),g},j("__extends",e),j("__assign",t),j("__rest",n),j("__decorate",c),j("__param",s),j("__metadata",m),j("__awaiter",v),j("__generator",d),j("__exportStar",p),j("__createBinding",O),j("__values",u),j("__read",_),j("__spread",w),j("__spreadArrays",M),j("__await",A),j("__asyncGenerator",R),j("__asyncDelegator",B),j("__asyncValues",z),j("__makeTemplateObject",P),j("__importStar",N),j("__importDefault",q),j("__classPrivateFieldGet",k),j("__classPrivateFieldSet",F)})})(Tg);var Wo=Tg.exports,$s={},ju={},ks={};class qn{}const p9=Object.freeze(Object.defineProperty({__proto__:null,IEvents:qn},Symbol.toStringTag,{value:"Module"})),v9=X_(p9);var Mp;function g9(){if(Mp)return ks;Mp=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.IHeartBeat=void 0;const a=v9;class e extends a.IEvents{constructor(n){super()}}return ks.IHeartBeat=e,ks}var Sp;function Ng(){return Sp||(Sp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),Wo.__exportStar(g9(),a)}(ju)),ju}var $u={},Cn={},xp;function b9(){if(xp)return Cn;xp=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HEARTBEAT_EVENTS=Cn.HEARTBEAT_INTERVAL=void 0;const a=ft;return Cn.HEARTBEAT_INTERVAL=a.FIVE_SECONDS,Cn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Cn}var Dp;function Bg(){return Dp||(Dp=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),Wo.__exportStar(b9(),a)}($u)),$u}var Ap;function m9(){if(Ap)return $s;Ap=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.HeartBeat=void 0;const a=Wo,e=ni,t=ft,n=Ng(),c=Bg();class s extends n.IHeartBeat{constructor(v){super(v),this.events=new e.EventEmitter,this.interval=c.HEARTBEAT_INTERVAL,this.interval=(v==null?void 0:v.interval)||c.HEARTBEAT_INTERVAL}static init(v){return a.__awaiter(this,void 0,void 0,function*(){const d=new s(v);return yield d.init(),d})}init(){return a.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(v,d){this.events.on(v,d)}once(v,d){this.events.once(v,d)}off(v,d){this.events.off(v,d)}removeListener(v,d){this.events.removeListener(v,d)}initialize(){return a.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(c.HEARTBEAT_EVENTS.pulse)}}return $s.HeartBeat=s,$s}(function(a){Object.defineProperty(a,"__esModule",{value:!0});const e=Wo;e.__exportStar(m9(),a),e.__exportStar(Ng(),a),e.__exportStar(Bg(),a)})(sa);var Rt={},Ug={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(a){var e,t,n,c,s,m,v,d,p,u,_,w,M,A,R,B,z,P,N,q,k,F,O;(function(j){var J=typeof St=="object"?St:typeof self=="object"?self:typeof this=="object"?this:{};j(L(J,L(a.exports)));function L(C,g){return C!==J&&(typeof Object.create=="function"?Object.defineProperty(C,"__esModule",{value:!0}):C.__esModule=!0),function(h,r){return C[h]=g?g(h,r):r}}})(function(j){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,C){L.__proto__=C}||function(L,C){for(var g in C)C.hasOwnProperty(g)&&(L[g]=C[g])};e=function(L,C){J(L,C);function g(){this.constructor=L}L.prototype=C===null?Object.create(C):(g.prototype=C.prototype,new g)},t=Object.assign||function(L){for(var C,g=1,h=arguments.length;g<h;g++){C=arguments[g];for(var r in C)Object.prototype.hasOwnProperty.call(C,r)&&(L[r]=C[r])}return L},n=function(L,C){var g={};for(var h in L)Object.prototype.hasOwnProperty.call(L,h)&&C.indexOf(h)<0&&(g[h]=L[h]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,h=Object.getOwnPropertySymbols(L);r<h.length;r++)C.indexOf(h[r])<0&&Object.prototype.propertyIsEnumerable.call(L,h[r])&&(g[h[r]]=L[h[r]]);return g},c=function(L,C,g,h){var r=arguments.length,o=r<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,g):h,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(L,C,g,h);else for(var D=L.length-1;D>=0;D--)(b=L[D])&&(o=(r<3?b(o):r>3?b(C,g,o):b(C,g))||o);return r>3&&o&&Object.defineProperty(C,g,o),o},s=function(L,C){return function(g,h){C(g,h,L)}},m=function(L,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,C)},v=function(L,C,g,h){function r(o){return o instanceof g?o:new g(function(b){b(o)})}return new(g||(g=Promise))(function(o,b){function D(y){try{x(h.next(y))}catch(S){b(S)}}function I(y){try{x(h.throw(y))}catch(S){b(S)}}function x(y){y.done?o(y.value):r(y.value).then(D,I)}x((h=h.apply(L,C||[])).next())})},d=function(L,C){var g={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},h,r,o,b;return b={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function D(x){return function(y){return I([x,y])}}function I(x){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return g.label++,{value:x[1],done:!1};case 5:g.label++,r=x[1],x=[0];continue;case 7:x=g.ops.pop(),g.trys.pop();continue;default:if(o=g.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){g=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){g.label=x[1];break}if(x[0]===6&&g.label<o[1]){g.label=o[1],o=x;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(x);break}o[2]&&g.ops.pop(),g.trys.pop();continue}x=C.call(L,g)}catch(y){x=[6,y],r=0}finally{h=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},O=function(L,C,g,h){h===void 0&&(h=g),L[h]=C[g]},p=function(L,C){for(var g in L)g!=="default"&&!C.hasOwnProperty(g)&&(C[g]=L[g])},u=function(L){var C=typeof Symbol=="function"&&Symbol.iterator,g=C&&L[C],h=0;if(g)return g.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&h>=L.length&&(L=void 0),{value:L&&L[h++],done:!L}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(L,C){var g=typeof Symbol=="function"&&L[Symbol.iterator];if(!g)return L;var h=g.call(L),r,o=[],b;try{for(;(C===void 0||C-- >0)&&!(r=h.next()).done;)o.push(r.value)}catch(D){b={error:D}}finally{try{r&&!r.done&&(g=h.return)&&g.call(h)}finally{if(b)throw b.error}}return o},w=function(){for(var L=[],C=0;C<arguments.length;C++)L=L.concat(_(arguments[C]));return L},M=function(){for(var L=0,C=0,g=arguments.length;C<g;C++)L+=arguments[C].length;for(var h=Array(L),r=0,C=0;C<g;C++)for(var o=arguments[C],b=0,D=o.length;b<D;b++,r++)h[r]=o[b];return h},A=function(L){return this instanceof A?(this.v=L,this):new A(L)},R=function(L,C,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=g.apply(L,C||[]),r,o=[];return r={},b("next"),b("throw"),b("return"),r[Symbol.asyncIterator]=function(){return this},r;function b(l){h[l]&&(r[l]=function(T){return new Promise(function(te,ee){o.push([l,T,te,ee])>1||D(l,T)})})}function D(l,T){try{I(h[l](T))}catch(te){S(o[0][3],te)}}function I(l){l.value instanceof A?Promise.resolve(l.value.v).then(x,y):S(o[0][2],l)}function x(l){D("next",l)}function y(l){D("throw",l)}function S(l,T){l(T),o.shift(),o.length&&D(o[0][0],o[0][1])}},B=function(L){var C,g;return C={},h("next"),h("throw",function(r){throw r}),h("return"),C[Symbol.iterator]=function(){return this},C;function h(r,o){C[r]=L[r]?function(b){return(g=!g)?{value:A(L[r](b)),done:r==="return"}:o?o(b):b}:o}},z=function(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=L[Symbol.asyncIterator],g;return C?C.call(L):(L=typeof u=="function"?u(L):L[Symbol.iterator](),g={},h("next"),h("throw"),h("return"),g[Symbol.asyncIterator]=function(){return this},g);function h(o){g[o]=L[o]&&function(b){return new Promise(function(D,I){b=L[o](b),r(D,I,b.done,b.value)})}}function r(o,b,D,I){Promise.resolve(I).then(function(x){o({value:x,done:D})},b)}},P=function(L,C){return Object.defineProperty?Object.defineProperty(L,"raw",{value:C}):L.raw=C,L},N=function(L){if(L&&L.__esModule)return L;var C={};if(L!=null)for(var g in L)Object.hasOwnProperty.call(L,g)&&(C[g]=L[g]);return C.default=L,C},q=function(L){return L&&L.__esModule?L:{default:L}},k=function(L,C){if(!C.has(L))throw new TypeError("attempted to get private field on non-instance");return C.get(L)},F=function(L,C,g){if(!C.has(L))throw new TypeError("attempted to set private field on non-instance");return C.set(L,g),g},j("__extends",e),j("__assign",t),j("__rest",n),j("__decorate",c),j("__param",s),j("__metadata",m),j("__awaiter",v),j("__generator",d),j("__exportStar",p),j("__createBinding",O),j("__values",u),j("__read",_),j("__spread",w),j("__spreadArrays",M),j("__await",A),j("__asyncGenerator",R),j("__asyncDelegator",B),j("__asyncValues",z),j("__makeTemplateObject",P),j("__importStar",N),j("__importDefault",q),j("__classPrivateFieldGet",k),j("__classPrivateFieldSet",F)})})(Ug);var y9=Ug.exports,ku,Ip;function _9(){if(Ip)return ku;Ip=1;function a(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}ku=e;function e(t,n,c){var s=c&&c.stringify||a,m=1;if(typeof t=="object"&&t!==null){var v=n.length+m;if(v===1)return t;var d=new Array(v);d[0]=s(t);for(var p=1;p<v;p++)d[p]=s(n[p]);return d.join(" ")}if(typeof t!="string")return t;var u=n.length;if(u===0)return t;for(var _="",w=1-m,M=-1,A=t&&t.length||0,R=0;R<A;){if(t.charCodeAt(R)===37&&R+1<A){switch(M=M>-1?M:0,t.charCodeAt(R+1)){case 100:case 102:if(w>=u||n[w]==null)break;M<R&&(_+=t.slice(M,R)),_+=Number(n[w]),M=R+2,R++;break;case 105:if(w>=u||n[w]==null)break;M<R&&(_+=t.slice(M,R)),_+=Math.floor(Number(n[w])),M=R+2,R++;break;case 79:case 111:case 106:if(w>=u||n[w]===void 0)break;M<R&&(_+=t.slice(M,R));var B=typeof n[w];if(B==="string"){_+="'"+n[w]+"'",M=R+2,R++;break}if(B==="function"){_+=n[w].name||"<anonymous>",M=R+2,R++;break}_+=s(n[w]),M=R+2,R++;break;case 115:if(w>=u)break;M<R&&(_+=t.slice(M,R)),_+=String(n[w]),M=R+2,R++;break;case 37:M<R&&(_+=t.slice(M,R)),_+="%",M=R+2,R++,w--;break}++w}++R}return M===-1?t:(M<A&&(_+=t.slice(M)),_)}return ku}var zu,Op;function w9(){if(Op)return zu;Op=1;const a=_9();zu=c;const e=k().console||{},t={mapHttpRequest:A,mapHttpResponse:A,wrapRequestSerializer:R,wrapResponseSerializer:R,wrapErrorSerializer:R,req:A,res:A,err:w};function n(F,O){return Array.isArray(F)?F.filter(function(J){return J!=="!stdSerializers.err"}):F===!0?Object.keys(O):!1}function c(F){F=F||{},F.browser=F.browser||{};const O=F.browser.transmit;if(O&&typeof O.send!="function")throw Error("pino: transmit option must have a send function");const j=F.browser.write||e;F.browser.write&&(F.browser.asObject=!0);const J=F.serializers||{},L=n(F.browser.serialize,J);let C=F.browser.serialize;Array.isArray(F.browser.serialize)&&F.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1);const g=["error","fatal","warn","info","debug","trace"];typeof j=="function"&&(j.error=j.fatal=j.warn=j.info=j.debug=j.trace=j),F.enabled===!1&&(F.level="silent");const h=F.level||"info",r=Object.create(j);r.log||(r.log=B),Object.defineProperty(r,"levelVal",{get:b}),Object.defineProperty(r,"level",{get:D,set:I});const o={transmit:O,serialize:L,asObject:F.browser.asObject,levels:g,timestamp:M(F)};r.levels=c.levels,r.level=h,r.setMaxListeners=r.getMaxListeners=r.emit=r.addListener=r.on=r.prependListener=r.once=r.prependOnceListener=r.removeListener=r.removeAllListeners=r.listeners=r.listenerCount=r.eventNames=r.write=r.flush=B,r.serializers=J,r._serialize=L,r._stdErrSerialize=C,r.child=x,O&&(r._logEvent=_());function b(){return this.level==="silent"?1/0:this.levels.values[this.level]}function D(){return this._level}function I(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,s(o,r,"error","log"),s(o,r,"fatal","error"),s(o,r,"warn","error"),s(o,r,"info","log"),s(o,r,"debug","log"),s(o,r,"trace","log")}function x(y,S){if(!y)throw new Error("missing bindings for child Pino");S=S||{},L&&y.serializers&&(S.serializers=y.serializers);const l=S.serializers;if(L&&l){var T=Object.assign({},J,l),te=F.browser.serialize===!0?Object.keys(T):L;delete y.serializers,d([y],te,T,this._stdErrSerialize)}function ee(ae){this._childLevel=(ae._childLevel|0)+1,this.error=p(ae,y,"error"),this.fatal=p(ae,y,"fatal"),this.warn=p(ae,y,"warn"),this.info=p(ae,y,"info"),this.debug=p(ae,y,"debug"),this.trace=p(ae,y,"trace"),T&&(this.serializers=T,this._serialize=te),O&&(this._logEvent=_([].concat(ae._logEvent.bindings,y)))}return ee.prototype=this,new ee(this)}return r}c.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},c.stdSerializers=t,c.stdTimeFunctions=Object.assign({},{nullTime:z,epochTime:P,unixTime:N,isoTime:q});function s(F,O,j,J){const L=Object.getPrototypeOf(O);O[j]=O.levelVal>O.levels.values[j]?B:L[j]?L[j]:e[j]||e[J]||B,m(F,O,j)}function m(F,O,j){!F.transmit&&O[j]===B||(O[j]=function(J){return function(){const C=F.timestamp(),g=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var r=0;r<g.length;r++)g[r]=arguments[r];if(F.serialize&&!F.asObject&&d(g,this._serialize,this.serializers,this._stdErrSerialize),F.asObject?J.call(h,v(this,j,g,C)):J.apply(h,g),F.transmit){const o=F.transmit.level||O.level,b=c.levels.values[o],D=c.levels.values[j];if(D<b)return;u(this,{ts:C,methodLevel:j,methodValue:D,transmitLevel:o,transmitValue:c.levels.values[F.transmit.level||O.level],send:F.transmit.send,val:O.levelVal},g)}}}(O[j]))}function v(F,O,j,J){F._serialize&&d(j,F._serialize,F.serializers,F._stdErrSerialize);const L=j.slice();let C=L[0];const g={};J&&(g.time=J),g.level=c.levels.values[O];let h=(F._childLevel|0)+1;if(h<1&&(h=1),C!==null&&typeof C=="object"){for(;h--&&typeof L[0]=="object";)Object.assign(g,L.shift());C=L.length?a(L.shift(),L):void 0}else typeof C=="string"&&(C=a(L.shift(),L));return C!==void 0&&(g.msg=C),g}function d(F,O,j,J){for(const L in F)if(J&&F[L]instanceof Error)F[L]=c.stdSerializers.err(F[L]);else if(typeof F[L]=="object"&&!Array.isArray(F[L]))for(const C in F[L])O&&O.indexOf(C)>-1&&C in j&&(F[L][C]=j[C](F[L][C]))}function p(F,O,j){return function(){const J=new Array(1+arguments.length);J[0]=O;for(var L=1;L<J.length;L++)J[L]=arguments[L-1];return F[j].apply(this,J)}}function u(F,O,j){const J=O.send,L=O.ts,C=O.methodLevel,g=O.methodValue,h=O.val,r=F._logEvent.bindings;d(j,F._serialize||Object.keys(F.serializers),F.serializers,F._stdErrSerialize===void 0?!0:F._stdErrSerialize),F._logEvent.ts=L,F._logEvent.messages=j.filter(function(o){return r.indexOf(o)===-1}),F._logEvent.level.label=C,F._logEvent.level.value=g,J(C,F._logEvent,h),F._logEvent=_(r)}function _(F){return{ts:0,messages:[],bindings:F||[],level:{label:"",value:0}}}function w(F){const O={type:F.constructor.name,msg:F.message,stack:F.stack};for(const j in F)O[j]===void 0&&(O[j]=F[j]);return O}function M(F){return typeof F.timestamp=="function"?F.timestamp:F.timestamp===!1?z:P}function A(){return{}}function R(F){return F}function B(){}function z(){return!1}function P(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function q(){return new Date(Date.now()).toISOString()}function k(){function F(O){return typeof O<"u"&&O}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return F(self)||F(window)||F(this)||{}}}return zu}var Rn={},Pp;function qg(){return Pp||(Pp=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PINO_CUSTOM_CONTEXT_KEY=Rn.PINO_LOGGER_DEFAULTS=void 0,Rn.PINO_LOGGER_DEFAULTS={level:"info"},Rn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Rn}var Fr={},Cp;function E9(){if(Cp)return Fr;Cp=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.generateChildLogger=Fr.formatChildLoggerContext=Fr.getLoggerContext=Fr.setBrowserLoggerContext=Fr.getBrowserLoggerContext=Fr.getDefaultLoggerOptions=void 0;const a=qg();function e(v){return Object.assign(Object.assign({},v),{level:(v==null?void 0:v.level)||a.PINO_LOGGER_DEFAULTS.level})}Fr.getDefaultLoggerOptions=e;function t(v,d=a.PINO_CUSTOM_CONTEXT_KEY){return v[d]||""}Fr.getBrowserLoggerContext=t;function n(v,d,p=a.PINO_CUSTOM_CONTEXT_KEY){return v[p]=d,v}Fr.setBrowserLoggerContext=n;function c(v,d=a.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof v.bindings>"u"?p=t(v,d):p=v.bindings().context||"",p}Fr.getLoggerContext=c;function s(v,d,p=a.PINO_CUSTOM_CONTEXT_KEY){const u=c(v,p);return u.trim()?`${u}/${d}`:d}Fr.formatChildLoggerContext=s;function m(v,d,p=a.PINO_CUSTOM_CONTEXT_KEY){const u=s(v,d,p),_=v.child({context:u});return n(_,u,p)}return Fr.generateChildLogger=m,Fr}(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.pino=void 0;const e=y9,t=e.__importDefault(w9());Object.defineProperty(a,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(qg(),a),e.__exportStar(E9(),a)})(Rt);class M9 extends qn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class S9 extends qn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class x9{constructor(e,t){this.logger=e,this.core=t}}let D9=class extends qn{constructor(e,t){super(),this.relayer=e,this.logger=t}};class A9 extends qn{constructor(e){super()}}let I9=class{constructor(e,t,n,c){this.core=e,this.logger=t,this.name=n}};class O9 extends qn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class P9 extends qn{constructor(e,t){super(),this.core=e,this.logger=t}}let C9=class{constructor(e,t){this.projectId=e,this.logger=t}},R9=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},T9=class{constructor(e){this.client=e}};const N9=a=>JSON.stringify(a,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),B9=a=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=a.replace(e,'$1"$2n"$3');return JSON.parse(t,(n,c)=>typeof c=="string"&&c.match(/^\d+n$/)?BigInt(c.substring(0,c.length-1)):c)};function Vh(a){if(typeof a!="string")throw new Error(`Cannot safe json parse value of type ${typeof a}`);try{return B9(a)}catch{return a}}function Xs(a){return typeof a=="string"?a:N9(a)||""}var Gh={},Lg={};(function(a){Object.defineProperty(a,"__esModule",{value:!0});var e=_t,t=si;a.DIGEST_LENGTH=64,a.BLOCK_SIZE=128;var n=function(){function v(){this.digestLength=a.DIGEST_LENGTH,this.blockSize=a.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},v.prototype.update=function(d,p){if(p===void 0&&(p=d.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var u=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<a.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=d[u++],p--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(u=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,d,u,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=d[u++],p--;return this},v.prototype.finish=function(d){if(!this._finished){var p=this._bytesHashed,u=this._bufferLength,_=p/536870912|0,w=p<<3,M=p%128<112?128:256;this._buffer[u]=128;for(var A=u+1;A<M-8;A++)this._buffer[A]=0;e.writeUint32BE(_,this._buffer,M-8),e.writeUint32BE(w,this._buffer,M-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,M),this._finished=!0}for(var A=0;A<this.digestLength/8;A++)e.writeUint32BE(this._stateHi[A],d,A*8),e.writeUint32BE(this._stateLo[A],d,A*8+4);return this},v.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(d){return this._stateHi.set(d.stateHi),this._stateLo.set(d.stateLo),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(d){t.wipe(d.stateHi),t.wipe(d.stateLo),d.buffer&&t.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},v}();a.SHA512=n;var c=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(v,d,p,u,_,w,M){for(var A=p[0],R=p[1],B=p[2],z=p[3],P=p[4],N=p[5],q=p[6],k=p[7],F=u[0],O=u[1],j=u[2],J=u[3],L=u[4],C=u[5],g=u[6],h=u[7],r,o,b,D,I,x,y,S;M>=128;){for(var l=0;l<16;l++){var T=8*l+w;v[l]=e.readUint32BE(_,T),d[l]=e.readUint32BE(_,T+4)}for(var l=0;l<80;l++){var te=A,ee=R,ae=B,Q=z,X=P,Y=N,$=q,W=k,oe=F,ye=O,we=j,me=J,Ze=L,De=C,Ee=g,nt=h;if(r=k,o=h,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=(P>>>14|L<<32-14)^(P>>>18|L<<32-18)^(L>>>41-32|P<<32-(41-32)),o=(L>>>14|P<<32-14)^(L>>>18|P<<32-18)^(P>>>41-32|L<<32-(41-32)),I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,r=P&N^~P&q,o=L&C^~L&g,I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,r=c[l*2],o=c[l*2+1],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,r=v[l%16],o=d[l%16],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,b=y&65535|S<<16,D=I&65535|x<<16,r=b,o=D,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=(A>>>28|F<<32-28)^(F>>>34-32|A<<32-(34-32))^(F>>>39-32|A<<32-(39-32)),o=(F>>>28|A<<32-28)^(A>>>34-32|F<<32-(34-32))^(A>>>39-32|F<<32-(39-32)),I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,r=A&R^A&B^R&B,o=F&O^F&j^O&j,I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,W=y&65535|S<<16,nt=I&65535|x<<16,r=Q,o=me,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=b,o=D,I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,Q=y&65535|S<<16,me=I&65535|x<<16,R=te,B=ee,z=ae,P=Q,N=X,q=Y,k=$,A=W,O=oe,j=ye,J=we,L=me,C=Ze,g=De,h=Ee,F=nt,l%16===15)for(var T=0;T<16;T++)r=v[T],o=d[T],I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=v[(T+9)%16],o=d[(T+9)%16],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,b=v[(T+1)%16],D=d[(T+1)%16],r=(b>>>1|D<<32-1)^(b>>>8|D<<32-8)^b>>>7,o=(D>>>1|b<<32-1)^(D>>>8|b<<32-8)^(D>>>7|b<<32-7),I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,b=v[(T+14)%16],D=d[(T+14)%16],r=(b>>>19|D<<32-19)^(D>>>61-32|b<<32-(61-32))^b>>>6,o=(D>>>19|b<<32-19)^(b>>>61-32|D<<32-(61-32))^(D>>>6|b<<32-6),I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,v[T]=y&65535|S<<16,d[T]=I&65535|x<<16}r=A,o=F,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[0],o=u[0],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[0]=A=y&65535|S<<16,u[0]=F=I&65535|x<<16,r=R,o=O,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[1],o=u[1],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[1]=R=y&65535|S<<16,u[1]=O=I&65535|x<<16,r=B,o=j,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[2],o=u[2],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[2]=B=y&65535|S<<16,u[2]=j=I&65535|x<<16,r=z,o=J,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[3],o=u[3],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[3]=z=y&65535|S<<16,u[3]=J=I&65535|x<<16,r=P,o=L,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[4],o=u[4],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[4]=P=y&65535|S<<16,u[4]=L=I&65535|x<<16,r=N,o=C,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[5],o=u[5],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[5]=N=y&65535|S<<16,u[5]=C=I&65535|x<<16,r=q,o=g,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[6],o=u[6],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[6]=q=y&65535|S<<16,u[6]=g=I&65535|x<<16,r=k,o=h,I=o&65535,x=o>>>16,y=r&65535,S=r>>>16,r=p[7],o=u[7],I+=o&65535,x+=o>>>16,y+=r&65535,S+=r>>>16,x+=I>>>16,y+=x>>>16,S+=y>>>16,p[7]=k=y&65535|S<<16,u[7]=h=I&65535|x<<16,w+=128,M-=128}return w}function m(v){var d=new n;d.update(v);var p=d.digest();return d.clean(),p}a.hash=m})(Lg);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.convertSecretKeyToX25519=a.convertPublicKeyToX25519=a.verify=a.sign=a.extractPublicKeyFromSecretKey=a.generateKeyPair=a.generateKeyPairFromSeed=a.SEED_LENGTH=a.SECRET_KEY_LENGTH=a.PUBLIC_KEY_LENGTH=a.SIGNATURE_LENGTH=void 0;const e=us,t=Lg,n=si;a.SIGNATURE_LENGTH=64,a.PUBLIC_KEY_LENGTH=32,a.SECRET_KEY_LENGTH=64,a.SEED_LENGTH=32;function c(Q){const X=new Float64Array(16);if(Q)for(let Y=0;Y<Q.length;Y++)X[Y]=Q[Y];return X}const s=new Uint8Array(32);s[0]=9;const m=c(),v=c([1]),d=c([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=c([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=c([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=c([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=c([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(Q,X){for(let Y=0;Y<16;Y++)Q[Y]=X[Y]|0}function A(Q){let X=1;for(let Y=0;Y<16;Y++){let $=Q[Y]+X+65535;X=Math.floor($/65536),Q[Y]=$-X*65536}Q[0]+=X-1+37*(X-1)}function R(Q,X,Y){const $=~(Y-1);for(let W=0;W<16;W++){const oe=$&(Q[W]^X[W]);Q[W]^=oe,X[W]^=oe}}function B(Q,X){const Y=c(),$=c();for(let W=0;W<16;W++)$[W]=X[W];A($),A($),A($);for(let W=0;W<2;W++){Y[0]=$[0]-65517;for(let ye=1;ye<15;ye++)Y[ye]=$[ye]-65535-(Y[ye-1]>>16&1),Y[ye-1]&=65535;Y[15]=$[15]-32767-(Y[14]>>16&1);const oe=Y[15]>>16&1;Y[14]&=65535,R($,Y,1-oe)}for(let W=0;W<16;W++)Q[2*W]=$[W]&255,Q[2*W+1]=$[W]>>8}function z(Q,X){let Y=0;for(let $=0;$<32;$++)Y|=Q[$]^X[$];return(1&Y-1>>>8)-1}function P(Q,X){const Y=new Uint8Array(32),$=new Uint8Array(32);return B(Y,Q),B($,X),z(Y,$)}function N(Q){const X=new Uint8Array(32);return B(X,Q),X[0]&1}function q(Q,X){for(let Y=0;Y<16;Y++)Q[Y]=X[2*Y]+(X[2*Y+1]<<8);Q[15]&=32767}function k(Q,X,Y){for(let $=0;$<16;$++)Q[$]=X[$]+Y[$]}function F(Q,X,Y){for(let $=0;$<16;$++)Q[$]=X[$]-Y[$]}function O(Q,X,Y){let $,W,oe=0,ye=0,we=0,me=0,Ze=0,De=0,Ee=0,nt=0,Ae=0,de=0,ze=0,Me=0,ge=0,Fe=0,Se=0,le=0,je=0,Pe=0,pe=0,Xe=0,Te=0,_e=0,Qe=0,Ne=0,Be=0,wt=0,rt=0,Ue=0,It=0,it=0,ke=0,ct=Y[0],He=Y[1],Ie=Y[2],ut=Y[3],Ke=Y[4],xe=Y[5],pt=Y[6],Je=Y[7],Oe=Y[8],vt=Y[9],Ge=Y[10],Ce=Y[11],ht=Y[12],$e=Y[13],Re=Y[14],gt=Y[15];$=X[0],oe+=$*ct,ye+=$*He,we+=$*Ie,me+=$*ut,Ze+=$*Ke,De+=$*xe,Ee+=$*pt,nt+=$*Je,Ae+=$*Oe,de+=$*vt,ze+=$*Ge,Me+=$*Ce,ge+=$*ht,Fe+=$*$e,Se+=$*Re,le+=$*gt,$=X[1],ye+=$*ct,we+=$*He,me+=$*Ie,Ze+=$*ut,De+=$*Ke,Ee+=$*xe,nt+=$*pt,Ae+=$*Je,de+=$*Oe,ze+=$*vt,Me+=$*Ge,ge+=$*Ce,Fe+=$*ht,Se+=$*$e,le+=$*Re,je+=$*gt,$=X[2],we+=$*ct,me+=$*He,Ze+=$*Ie,De+=$*ut,Ee+=$*Ke,nt+=$*xe,Ae+=$*pt,de+=$*Je,ze+=$*Oe,Me+=$*vt,ge+=$*Ge,Fe+=$*Ce,Se+=$*ht,le+=$*$e,je+=$*Re,Pe+=$*gt,$=X[3],me+=$*ct,Ze+=$*He,De+=$*Ie,Ee+=$*ut,nt+=$*Ke,Ae+=$*xe,de+=$*pt,ze+=$*Je,Me+=$*Oe,ge+=$*vt,Fe+=$*Ge,Se+=$*Ce,le+=$*ht,je+=$*$e,Pe+=$*Re,pe+=$*gt,$=X[4],Ze+=$*ct,De+=$*He,Ee+=$*Ie,nt+=$*ut,Ae+=$*Ke,de+=$*xe,ze+=$*pt,Me+=$*Je,ge+=$*Oe,Fe+=$*vt,Se+=$*Ge,le+=$*Ce,je+=$*ht,Pe+=$*$e,pe+=$*Re,Xe+=$*gt,$=X[5],De+=$*ct,Ee+=$*He,nt+=$*Ie,Ae+=$*ut,de+=$*Ke,ze+=$*xe,Me+=$*pt,ge+=$*Je,Fe+=$*Oe,Se+=$*vt,le+=$*Ge,je+=$*Ce,Pe+=$*ht,pe+=$*$e,Xe+=$*Re,Te+=$*gt,$=X[6],Ee+=$*ct,nt+=$*He,Ae+=$*Ie,de+=$*ut,ze+=$*Ke,Me+=$*xe,ge+=$*pt,Fe+=$*Je,Se+=$*Oe,le+=$*vt,je+=$*Ge,Pe+=$*Ce,pe+=$*ht,Xe+=$*$e,Te+=$*Re,_e+=$*gt,$=X[7],nt+=$*ct,Ae+=$*He,de+=$*Ie,ze+=$*ut,Me+=$*Ke,ge+=$*xe,Fe+=$*pt,Se+=$*Je,le+=$*Oe,je+=$*vt,Pe+=$*Ge,pe+=$*Ce,Xe+=$*ht,Te+=$*$e,_e+=$*Re,Qe+=$*gt,$=X[8],Ae+=$*ct,de+=$*He,ze+=$*Ie,Me+=$*ut,ge+=$*Ke,Fe+=$*xe,Se+=$*pt,le+=$*Je,je+=$*Oe,Pe+=$*vt,pe+=$*Ge,Xe+=$*Ce,Te+=$*ht,_e+=$*$e,Qe+=$*Re,Ne+=$*gt,$=X[9],de+=$*ct,ze+=$*He,Me+=$*Ie,ge+=$*ut,Fe+=$*Ke,Se+=$*xe,le+=$*pt,je+=$*Je,Pe+=$*Oe,pe+=$*vt,Xe+=$*Ge,Te+=$*Ce,_e+=$*ht,Qe+=$*$e,Ne+=$*Re,Be+=$*gt,$=X[10],ze+=$*ct,Me+=$*He,ge+=$*Ie,Fe+=$*ut,Se+=$*Ke,le+=$*xe,je+=$*pt,Pe+=$*Je,pe+=$*Oe,Xe+=$*vt,Te+=$*Ge,_e+=$*Ce,Qe+=$*ht,Ne+=$*$e,Be+=$*Re,wt+=$*gt,$=X[11],Me+=$*ct,ge+=$*He,Fe+=$*Ie,Se+=$*ut,le+=$*Ke,je+=$*xe,Pe+=$*pt,pe+=$*Je,Xe+=$*Oe,Te+=$*vt,_e+=$*Ge,Qe+=$*Ce,Ne+=$*ht,Be+=$*$e,wt+=$*Re,rt+=$*gt,$=X[12],ge+=$*ct,Fe+=$*He,Se+=$*Ie,le+=$*ut,je+=$*Ke,Pe+=$*xe,pe+=$*pt,Xe+=$*Je,Te+=$*Oe,_e+=$*vt,Qe+=$*Ge,Ne+=$*Ce,Be+=$*ht,wt+=$*$e,rt+=$*Re,Ue+=$*gt,$=X[13],Fe+=$*ct,Se+=$*He,le+=$*Ie,je+=$*ut,Pe+=$*Ke,pe+=$*xe,Xe+=$*pt,Te+=$*Je,_e+=$*Oe,Qe+=$*vt,Ne+=$*Ge,Be+=$*Ce,wt+=$*ht,rt+=$*$e,Ue+=$*Re,It+=$*gt,$=X[14],Se+=$*ct,le+=$*He,je+=$*Ie,Pe+=$*ut,pe+=$*Ke,Xe+=$*xe,Te+=$*pt,_e+=$*Je,Qe+=$*Oe,Ne+=$*vt,Be+=$*Ge,wt+=$*Ce,rt+=$*ht,Ue+=$*$e,It+=$*Re,it+=$*gt,$=X[15],le+=$*ct,je+=$*He,Pe+=$*Ie,pe+=$*ut,Xe+=$*Ke,Te+=$*xe,_e+=$*pt,Qe+=$*Je,Ne+=$*Oe,Be+=$*vt,wt+=$*Ge,rt+=$*Ce,Ue+=$*ht,It+=$*$e,it+=$*Re,ke+=$*gt,oe+=38*je,ye+=38*Pe,we+=38*pe,me+=38*Xe,Ze+=38*Te,De+=38*_e,Ee+=38*Qe,nt+=38*Ne,Ae+=38*Be,de+=38*wt,ze+=38*rt,Me+=38*Ue,ge+=38*It,Fe+=38*it,Se+=38*ke,W=1,$=oe+W+65535,W=Math.floor($/65536),oe=$-W*65536,$=ye+W+65535,W=Math.floor($/65536),ye=$-W*65536,$=we+W+65535,W=Math.floor($/65536),we=$-W*65536,$=me+W+65535,W=Math.floor($/65536),me=$-W*65536,$=Ze+W+65535,W=Math.floor($/65536),Ze=$-W*65536,$=De+W+65535,W=Math.floor($/65536),De=$-W*65536,$=Ee+W+65535,W=Math.floor($/65536),Ee=$-W*65536,$=nt+W+65535,W=Math.floor($/65536),nt=$-W*65536,$=Ae+W+65535,W=Math.floor($/65536),Ae=$-W*65536,$=de+W+65535,W=Math.floor($/65536),de=$-W*65536,$=ze+W+65535,W=Math.floor($/65536),ze=$-W*65536,$=Me+W+65535,W=Math.floor($/65536),Me=$-W*65536,$=ge+W+65535,W=Math.floor($/65536),ge=$-W*65536,$=Fe+W+65535,W=Math.floor($/65536),Fe=$-W*65536,$=Se+W+65535,W=Math.floor($/65536),Se=$-W*65536,$=le+W+65535,W=Math.floor($/65536),le=$-W*65536,oe+=W-1+37*(W-1),W=1,$=oe+W+65535,W=Math.floor($/65536),oe=$-W*65536,$=ye+W+65535,W=Math.floor($/65536),ye=$-W*65536,$=we+W+65535,W=Math.floor($/65536),we=$-W*65536,$=me+W+65535,W=Math.floor($/65536),me=$-W*65536,$=Ze+W+65535,W=Math.floor($/65536),Ze=$-W*65536,$=De+W+65535,W=Math.floor($/65536),De=$-W*65536,$=Ee+W+65535,W=Math.floor($/65536),Ee=$-W*65536,$=nt+W+65535,W=Math.floor($/65536),nt=$-W*65536,$=Ae+W+65535,W=Math.floor($/65536),Ae=$-W*65536,$=de+W+65535,W=Math.floor($/65536),de=$-W*65536,$=ze+W+65535,W=Math.floor($/65536),ze=$-W*65536,$=Me+W+65535,W=Math.floor($/65536),Me=$-W*65536,$=ge+W+65535,W=Math.floor($/65536),ge=$-W*65536,$=Fe+W+65535,W=Math.floor($/65536),Fe=$-W*65536,$=Se+W+65535,W=Math.floor($/65536),Se=$-W*65536,$=le+W+65535,W=Math.floor($/65536),le=$-W*65536,oe+=W-1+37*(W-1),Q[0]=oe,Q[1]=ye,Q[2]=we,Q[3]=me,Q[4]=Ze,Q[5]=De,Q[6]=Ee,Q[7]=nt,Q[8]=Ae,Q[9]=de,Q[10]=ze,Q[11]=Me,Q[12]=ge,Q[13]=Fe,Q[14]=Se,Q[15]=le}function j(Q,X){O(Q,X,X)}function J(Q,X){const Y=c();let $;for($=0;$<16;$++)Y[$]=X[$];for($=253;$>=0;$--)j(Y,Y),$!==2&&$!==4&&O(Y,Y,X);for($=0;$<16;$++)Q[$]=Y[$]}function L(Q,X){const Y=c();let $;for($=0;$<16;$++)Y[$]=X[$];for($=250;$>=0;$--)j(Y,Y),$!==1&&O(Y,Y,X);for($=0;$<16;$++)Q[$]=Y[$]}function C(Q,X){const Y=c(),$=c(),W=c(),oe=c(),ye=c(),we=c(),me=c(),Ze=c(),De=c();F(Y,Q[1],Q[0]),F(De,X[1],X[0]),O(Y,Y,De),k($,Q[0],Q[1]),k(De,X[0],X[1]),O($,$,De),O(W,Q[3],X[3]),O(W,W,p),O(oe,Q[2],X[2]),k(oe,oe,oe),F(ye,$,Y),F(we,oe,W),k(me,oe,W),k(Ze,$,Y),O(Q[0],ye,we),O(Q[1],Ze,me),O(Q[2],me,we),O(Q[3],ye,Ze)}function g(Q,X,Y){for(let $=0;$<4;$++)R(Q[$],X[$],Y)}function h(Q,X){const Y=c(),$=c(),W=c();J(W,X[2]),O(Y,X[0],W),O($,X[1],W),B(Q,$),Q[31]^=N(Y)<<7}function r(Q,X,Y){M(Q[0],m),M(Q[1],v),M(Q[2],v),M(Q[3],m);for(let $=255;$>=0;--$){const W=Y[$/8|0]>>($&7)&1;g(Q,X,W),C(X,Q),C(Q,Q),g(Q,X,W)}}function o(Q,X){const Y=[c(),c(),c(),c()];M(Y[0],u),M(Y[1],_),M(Y[2],v),O(Y[3],u,_),r(Q,Y,X)}function b(Q){if(Q.length!==a.SEED_LENGTH)throw new Error(`ed25519: seed must be ${a.SEED_LENGTH} bytes`);const X=(0,t.hash)(Q);X[0]&=248,X[31]&=127,X[31]|=64;const Y=new Uint8Array(32),$=[c(),c(),c(),c()];o($,X),h(Y,$);const W=new Uint8Array(64);return W.set(Q),W.set(Y,32),{publicKey:Y,secretKey:W}}a.generateKeyPairFromSeed=b;function D(Q){const X=(0,e.randomBytes)(32,Q),Y=b(X);return(0,n.wipe)(X),Y}a.generateKeyPair=D;function I(Q){if(Q.length!==a.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${a.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Q.subarray(32))}a.extractPublicKeyFromSecretKey=I;const x=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function y(Q,X){let Y,$,W,oe;for($=63;$>=32;--$){for(Y=0,W=$-32,oe=$-12;W<oe;++W)X[W]+=Y-16*X[$]*x[W-($-32)],Y=Math.floor((X[W]+128)/256),X[W]-=Y*256;X[W]+=Y,X[$]=0}for(Y=0,W=0;W<32;W++)X[W]+=Y-(X[31]>>4)*x[W],Y=X[W]>>8,X[W]&=255;for(W=0;W<32;W++)X[W]-=Y*x[W];for($=0;$<32;$++)X[$+1]+=X[$]>>8,Q[$]=X[$]&255}function S(Q){const X=new Float64Array(64);for(let Y=0;Y<64;Y++)X[Y]=Q[Y];for(let Y=0;Y<64;Y++)Q[Y]=0;y(Q,X)}function l(Q,X){const Y=new Float64Array(64),$=[c(),c(),c(),c()],W=(0,t.hash)(Q.subarray(0,32));W[0]&=248,W[31]&=127,W[31]|=64;const oe=new Uint8Array(64);oe.set(W.subarray(32),32);const ye=new t.SHA512;ye.update(oe.subarray(32)),ye.update(X);const we=ye.digest();ye.clean(),S(we),o($,we),h(oe,$),ye.reset(),ye.update(oe.subarray(0,32)),ye.update(Q.subarray(32)),ye.update(X);const me=ye.digest();S(me);for(let Ze=0;Ze<32;Ze++)Y[Ze]=we[Ze];for(let Ze=0;Ze<32;Ze++)for(let De=0;De<32;De++)Y[Ze+De]+=me[Ze]*W[De];return y(oe.subarray(32),Y),oe}a.sign=l;function T(Q,X){const Y=c(),$=c(),W=c(),oe=c(),ye=c(),we=c(),me=c();return M(Q[2],v),q(Q[1],X),j(W,Q[1]),O(oe,W,d),F(W,W,Q[2]),k(oe,Q[2],oe),j(ye,oe),j(we,ye),O(me,we,ye),O(Y,me,W),O(Y,Y,oe),L(Y,Y),O(Y,Y,W),O(Y,Y,oe),O(Y,Y,oe),O(Q[0],Y,oe),j($,Q[0]),O($,$,oe),P($,W)&&O(Q[0],Q[0],w),j($,Q[0]),O($,$,oe),P($,W)?-1:(N(Q[0])===X[31]>>7&&F(Q[0],m,Q[0]),O(Q[3],Q[0],Q[1]),0)}function te(Q,X,Y){const $=new Uint8Array(32),W=[c(),c(),c(),c()],oe=[c(),c(),c(),c()];if(Y.length!==a.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${a.SIGNATURE_LENGTH} bytes`);if(T(oe,Q))return!1;const ye=new t.SHA512;ye.update(Y.subarray(0,32)),ye.update(Q),ye.update(X);const we=ye.digest();return S(we),r(W,oe,we),o(oe,Y.subarray(32)),C(W,oe),h($,W),!z(Y,$)}a.verify=te;function ee(Q){let X=[c(),c(),c(),c()];if(T(X,Q))throw new Error("Ed25519: invalid public key");let Y=c(),$=c(),W=X[1];k(Y,v,W),F($,v,W),J($,$),O(Y,Y,$);let oe=new Uint8Array(32);return B(oe,Y),oe}a.convertPublicKeyToX25519=ee;function ae(Q){const X=(0,t.hash)(Q.subarray(0,32));X[0]&=248,X[31]&=127,X[31]|=64;const Y=new Uint8Array(X.subarray(0,32));return(0,n.wipe)(X),Y}a.convertSecretKeyToX25519=ae})(Gh);const U9="EdDSA",q9="JWT",Fg=".",jg="base64url",L9="utf8",F9="utf8",j9=":",$9="did",k9="key",Rp="base58btc",z9="z",H9="K36",K9=32;function Po(a){return kr(Yr(Xs(a),L9),jg)}function $g(a){const e=Yr(H9,Rp),t=z9+kr(nh([e,a]),Rp);return[$9,k9,t].join(j9)}function V9(a){return kr(a,jg)}function G9(a){return Yr([Po(a.header),Po(a.payload)].join(Fg),F9)}function W9(a){return[Po(a.header),Po(a.payload),V9(a.signature)].join(Fg)}function Tp(a=us.randomBytes(K9)){return Gh.generateKeyPairFromSeed(a)}async function Y9(a,e,t,n,c=ft.fromMiliseconds(Date.now())){const s={alg:U9,typ:q9},m=$g(n.publicKey),v=c+t,d={iss:m,sub:a,aud:e,iat:c,exp:v},p=G9({header:s,payload:d}),u=Gh.sign(n.secretKey,p);return W9({header:s,payload:d,signature:u})}var Np=globalThis&&globalThis.__spreadArray||function(a,e,t){if(t||arguments.length===2)for(var n=0,c=e.length,s;n<c;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return a.concat(s||Array.prototype.slice.call(e))},J9=function(){function a(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return a}(),Z9=function(){function a(e){this.version=e,this.type="node",this.name="node",this.os=ii.platform}return a}(),X9=function(){function a(e,t,n,c){this.name=e,this.version=t,this.os=n,this.bot=c,this.type="bot-device"}return a}(),Q9=function(){function a(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return a}(),e7=function(){function a(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return a}(),t7=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,r7=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Bp=3,i7=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",t7]],Up=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n7(a){return a?qp(a):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new e7:typeof navigator<"u"?qp(navigator.userAgent):o7()}function s7(a){return a!==""&&i7.reduce(function(e,t){var n=t[0],c=t[1];if(e)return e;var s=c.exec(a);return!!s&&[n,s]},!1)}function qp(a){var e=s7(a);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new Q9;var c=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);c?c.length<Bp&&(c=Np(Np([],c,!0),f7(Bp-c.length),!0)):c=[];var s=c.join("."),m=a7(a),v=r7.exec(a);return v&&v[1]?new X9(t,s,m,v[1]):new J9(t,s,m)}function a7(a){for(var e=0,t=Up.length;e<t;e++){var n=Up[e],c=n[0],s=n[1],m=s.exec(a);if(m)return c}return null}function o7(){var a=typeof ii<"u"&&ii.version;return a?new Z9(ii.version.slice(1)):null}function f7(a){for(var e=[],t=0;t<a;t++)e.push("0");return e}var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.getLocalStorage=Vt.getLocalStorageOrThrow=Vt.getCrypto=Vt.getCryptoOrThrow=zg=Vt.getLocation=Vt.getLocationOrThrow=Wh=Vt.getNavigator=Vt.getNavigatorOrThrow=kg=Vt.getDocument=Vt.getDocumentOrThrow=Vt.getFromWindowOrThrow=Vt.getFromWindow=void 0;function Ln(a){let e;return typeof window<"u"&&typeof window[a]<"u"&&(e=window[a]),e}Vt.getFromWindow=Ln;function ds(a){const e=Ln(a);if(!e)throw new Error(`${a} is not defined in Window`);return e}Vt.getFromWindowOrThrow=ds;function c7(){return ds("document")}Vt.getDocumentOrThrow=c7;function u7(){return Ln("document")}var kg=Vt.getDocument=u7;function h7(){return ds("navigator")}Vt.getNavigatorOrThrow=h7;function l7(){return Ln("navigator")}var Wh=Vt.getNavigator=l7;function d7(){return ds("location")}Vt.getLocationOrThrow=d7;function p7(){return Ln("location")}var zg=Vt.getLocation=p7;function v7(){return ds("crypto")}Vt.getCryptoOrThrow=v7;function g7(){return Ln("crypto")}Vt.getCrypto=g7;function b7(){return ds("localStorage")}Vt.getLocalStorageOrThrow=b7;function m7(){return Ln("localStorage")}Vt.getLocalStorage=m7;var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0});var Hg=Yh.getWindowMetadata=void 0;const Lp=Vt;function y7(){let a,e;try{a=Lp.getDocumentOrThrow(),e=Lp.getLocationOrThrow()}catch{return null}function t(){const _=a.getElementsByTagName("link"),w=[];for(let M=0;M<_.length;M++){const A=_[M],R=A.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const B=A.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let z=e.protocol+"//"+e.host;if(B.indexOf("/")===0)z+=B;else{const P=e.pathname.split("/");P.pop();const N=P.join("/");z+=N+"/"+B}w.push(z)}else if(B.indexOf("//")===0){const z=e.protocol+B;w.push(z)}else w.push(B)}}return w}function n(..._){const w=a.getElementsByTagName("meta");for(let M=0;M<w.length;M++){const A=w[M],R=["itemprop","property","name"].map(B=>A.getAttribute(B)).filter(B=>B?_.includes(B):!1);if(R.length&&R){const B=A.getAttribute("content");if(B)return B}}return""}function c(){let _=n("name","og:site_name","og:title","twitter:title");return _||(_=a.title),_}function s(){return n("description","og:description","twitter:description","keywords")}const m=c(),v=s(),d=e.origin,p=t();return{description:v,url:d,icons:p,name:m}}Hg=Yh.getWindowMetadata=y7;var Qs={};(function(a){const e=Eh,t=Mh,n=wh,c=Kh,s=P=>P==null,m=Symbol("encodeFragmentIdentifier");function v(P){switch(P.arrayFormat){case"index":return N=>(q,k)=>{const F=q.length;return k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[",F,"]"].join("")]:[...q,[u(N,P),"[",u(F,P),"]=",u(k,P)].join("")]};case"bracket":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[]"].join("")]:[...q,[u(N,P),"[]=",u(k,P)].join("")];case"colon-list-separator":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),":list="].join("")]:[...q,[u(N,P),":list=",u(k,P)].join("")];case"comma":case"separator":case"bracket-separator":{const N=P.arrayFormat==="bracket-separator"?"[]=":"=";return q=>(k,F)=>F===void 0||P.skipNull&&F===null||P.skipEmptyString&&F===""?k:(F=F===null?"":F,k.length===0?[[u(q,P),N,u(F,P)].join("")]:[[k,u(F,P)].join(P.arrayFormatSeparator)])}default:return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,u(N,P)]:[...q,[u(N,P),"=",u(k,P)].join("")]}}function d(P){let N;switch(P.arrayFormat){case"index":return(q,k,F)=>{if(N=/\[(\d*)\]$/.exec(q),q=q.replace(/\[\d*\]$/,""),!N){F[q]=k;return}F[q]===void 0&&(F[q]={}),F[q][N[1]]=k};case"bracket":return(q,k,F)=>{if(N=/(\[\])$/.exec(q),q=q.replace(/\[\]$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"colon-list-separator":return(q,k,F)=>{if(N=/(:list)$/.exec(q),q=q.replace(/:list$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"comma":case"separator":return(q,k,F)=>{const O=typeof k=="string"&&k.includes(P.arrayFormatSeparator),j=typeof k=="string"&&!O&&_(k,P).includes(P.arrayFormatSeparator);k=j?_(k,P):k;const J=O||j?k.split(P.arrayFormatSeparator).map(L=>_(L,P)):k===null?k:_(k,P);F[q]=J};case"bracket-separator":return(q,k,F)=>{const O=/(\[\])$/.test(q);if(q=q.replace(/\[\]$/,""),!O){F[q]=k&&_(k,P);return}const j=k===null?[]:k.split(P.arrayFormatSeparator).map(J=>_(J,P));if(F[q]===void 0){F[q]=j;return}F[q]=[].concat(F[q],j)};default:return(q,k,F)=>{if(F[q]===void 0){F[q]=k;return}F[q]=[].concat(F[q],k)}}}function p(P){if(typeof P!="string"||P.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(P,N){return N.encode?N.strict?e(P):encodeURIComponent(P):P}function _(P,N){return N.decode?t(P):P}function w(P){return Array.isArray(P)?P.sort():typeof P=="object"?w(Object.keys(P)).sort((N,q)=>Number(N)-Number(q)).map(N=>P[N]):P}function M(P){const N=P.indexOf("#");return N!==-1&&(P=P.slice(0,N)),P}function A(P){let N="";const q=P.indexOf("#");return q!==-1&&(N=P.slice(q)),N}function R(P){P=M(P);const N=P.indexOf("?");return N===-1?"":P.slice(N+1)}function B(P,N){return N.parseNumbers&&!Number.isNaN(Number(P))&&typeof P=="string"&&P.trim()!==""?P=Number(P):N.parseBooleans&&P!==null&&(P.toLowerCase()==="true"||P.toLowerCase()==="false")&&(P=P.toLowerCase()==="true"),P}function z(P,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),p(N.arrayFormatSeparator);const q=d(N),k=Object.create(null);if(typeof P!="string"||(P=P.trim().replace(/^[?#&]/,""),!P))return k;for(const F of P.split("&")){if(F==="")continue;let[O,j]=n(N.decode?F.replace(/\+/g," "):F,"=");j=j===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?j:_(j,N),q(_(O,N),j,k)}for(const F of Object.keys(k)){const O=k[F];if(typeof O=="object"&&O!==null)for(const j of Object.keys(O))O[j]=B(O[j],N);else k[F]=B(O,N)}return N.sort===!1?k:(N.sort===!0?Object.keys(k).sort():Object.keys(k).sort(N.sort)).reduce((F,O)=>{const j=k[O];return j&&typeof j=="object"&&!Array.isArray(j)?F[O]=w(j):F[O]=j,F},Object.create(null))}a.extract=R,a.parse=z,a.stringify=(P,N)=>{if(!P)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),p(N.arrayFormatSeparator);const q=j=>N.skipNull&&s(P[j])||N.skipEmptyString&&P[j]==="",k=v(N),F={};for(const j of Object.keys(P))q(j)||(F[j]=P[j]);const O=Object.keys(F);return N.sort!==!1&&O.sort(N.sort),O.map(j=>{const J=P[j];return J===void 0?"":J===null?u(j,N):Array.isArray(J)?J.length===0&&N.arrayFormat==="bracket-separator"?u(j,N)+"[]":J.reduce(k(j),[]).join("&"):u(j,N)+"="+u(J,N)}).filter(j=>j.length>0).join("&")},a.parseUrl=(P,N)=>{N=Object.assign({decode:!0},N);const[q,k]=n(P,"#");return Object.assign({url:q.split("?")[0]||"",query:z(R(P),N)},N&&N.parseFragmentIdentifier&&k?{fragmentIdentifier:_(k,N)}:{})},a.stringifyUrl=(P,N)=>{N=Object.assign({encode:!0,strict:!0,[m]:!0},N);const q=M(P.url).split("?")[0]||"",k=a.extract(P.url),F=a.parse(k,{sort:!1}),O=Object.assign(F,P.query);let j=a.stringify(O,N);j&&(j=`?${j}`);let J=A(P.url);return P.fragmentIdentifier&&(J=`#${N[m]?u(P.fragmentIdentifier,N):P.fragmentIdentifier}`),`${q}${j}${J}`},a.pick=(P,N,q)=>{q=Object.assign({parseFragmentIdentifier:!0,[m]:!1},q);const{url:k,query:F,fragmentIdentifier:O}=a.parseUrl(P,q);return a.stringifyUrl({url:k,query:c(F,N),fragmentIdentifier:O},q)},a.exclude=(P,N,q)=>{const k=Array.isArray(N)?F=>!N.includes(F):(F,O)=>!N(F,O);return a.pick(P,k,q)}})(Qs);function Kg(a,e){return a.includes(":")?[a]:e.chains||[]}const Vg="base10",$r="base16",ah="base64pad",Jh="utf8",Gg=0,Fn=1,_7=0,Fp=1,oh=12,Zh=32;function w7(){const a=kh.generateKeyPair();return{privateKey:kr(a.secretKey,$r),publicKey:kr(a.publicKey,$r)}}function fh(){const a=us.randomBytes(Zh);return kr(a,$r)}function E7(a,e){const t=kh.sharedKey(Yr(a,$r),Yr(e,$r)),n=new Zw(Ho.SHA256,t).expand(Zh);return kr(n,$r)}function M7(a){const e=Ho.hash(Yr(a,$r));return kr(e,$r)}function Nn(a){const e=Ho.hash(Yr(a,Jh));return kr(e,$r)}function S7(a){return Yr(`${a}`,Vg)}function aa(a){return Number(kr(a,Vg))}function x7(a){const e=S7(typeof a.type<"u"?a.type:Gg);if(aa(e)===Fn&&typeof a.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof a.senderPublicKey<"u"?Yr(a.senderPublicKey,$r):void 0,n=typeof a.iv<"u"?Yr(a.iv,$r):us.randomBytes(oh),c=new Ah.ChaCha20Poly1305(Yr(a.symKey,$r)).seal(n,Yr(a.message,Jh));return A7({type:e,sealed:c,iv:n,senderPublicKey:t})}function D7(a){const e=new Ah.ChaCha20Poly1305(Yr(a.symKey,$r)),{sealed:t,iv:n}=Co(a.encoded),c=e.open(n,t);if(c===null)throw new Error("Failed to decrypt");return kr(c,Jh)}function A7(a){if(aa(a.type)===Fn){if(typeof a.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return kr(nh([a.type,a.senderPublicKey,a.iv,a.sealed]),ah)}return kr(nh([a.type,a.iv,a.sealed]),ah)}function Co(a){const e=Yr(a,ah),t=e.slice(_7,Fp),n=Fp;if(aa(t)===Fn){const v=n+Zh,d=v+oh,p=e.slice(n,v),u=e.slice(v,d),_=e.slice(d);return{type:t,sealed:_,iv:u,senderPublicKey:p}}const c=n+oh,s=e.slice(n,c),m=e.slice(c);return{type:t,sealed:m,iv:s}}function I7(a,e){const t=Co(a);return Wg({type:aa(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?kr(t.senderPublicKey,$r):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Wg(a){const e=(a==null?void 0:a.type)||Gg;if(e===Fn){if(typeof(a==null?void 0:a.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(a==null?void 0:a.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:a==null?void 0:a.senderPublicKey,receiverPublicKey:a==null?void 0:a.receiverPublicKey}}function jp(a){return a.type===Fn&&typeof a.senderPublicKey=="string"&&typeof a.receiverPublicKey=="string"}var O7=Object.defineProperty,$p=Object.getOwnPropertySymbols,P7=Object.prototype.hasOwnProperty,C7=Object.prototype.propertyIsEnumerable,kp=(a,e,t)=>e in a?O7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,zp=(a,e)=>{for(var t in e||(e={}))P7.call(e,t)&&kp(a,t,e[t]);if($p)for(var t of $p(e))C7.call(e,t)&&kp(a,t,e[t]);return a};const R7="ReactNative",Ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},T7="js";function Xh(){return typeof ii<"u"&&typeof ii.versions<"u"&&typeof ii.versions.node<"u"}function N7(){return!kg()&&!!Wh()&&navigator.product===R7}function Qh(){return!Xh()&&!!Wh()}function B7(){return N7()?Ws.reactNative:Xh()?Ws.node:Qh()?Ws.browser:Ws.unknown}function U7(a,e){let t=Qs.parse(a);return t=zp(zp({},t),e),a=Qs.stringify(t),a}function q7(){return Hg()||{name:"",description:"",url:"",icons:[""]}}function L7(){const a=n7();if(a===null)return"unknown";const e=a.os?a.os.replace(" ","").toLowerCase():"unknown";return a.type==="browser"?[e,a.name,a.version].join("-"):[e,a.version].join("-")}function F7(){var a;const e=B7();return e===Ws.browser?[e,((a=zg())==null?void 0:a.host)||"unknown"].join(":"):e}function j7(a,e,t){const n=L7(),c=F7();return[[a,e].join("-"),[T7,t].join("-"),n,c].join("/")}function $7({protocol:a,version:e,relayUrl:t,sdkVersion:n,auth:c,projectId:s,useOnCloseEvent:m}){const v=t.split("?"),d=j7(a,e,n),p={auth:c,ua:d,projectId:s,useOnCloseEvent:m||void 0},u=U7(v[1]||"",p);return v[0]+"?"+u}function Tn(a,e){return a.filter(t=>e.includes(t)).length===a.length}function Yg(a){return Object.fromEntries(a.entries())}function Jg(a){return new Map(Object.entries(a))}function cs(a=ft.FIVE_MINUTES,e){const t=ft.toMiliseconds(a||ft.FIVE_MINUTES);let n,c,s;return{resolve:m=>{s&&n&&(clearTimeout(s),n(m))},reject:m=>{s&&c&&(clearTimeout(s),c(m))},done:()=>new Promise((m,v)=>{s=setTimeout(()=>{v(new Error(e))},t),n=m,c=v})}}function Ro(a,e,t){return new Promise(async(n,c)=>{const s=setTimeout(()=>c(new Error(t)),e);try{const m=await a;n(m)}catch(m){c(m)}clearTimeout(s)})}function Zg(a,e){if(typeof e=="string"&&e.startsWith(`${a}:`))return e;if(a.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(a.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${a}`)}function k7(a){return Zg("topic",a)}function z7(a){return Zg("id",a)}function Xg(a){const[e,t]=a.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function Oi(a,e){return ft.fromMiliseconds((e||Date.now())+ft.toMiliseconds(a))}function fn(a){return Date.now()>=ft.toMiliseconds(a)}function ar(a,e){return`${a}${e?`:${e}`:""}`}const H7="irn";function ch(a){return(a==null?void 0:a.relay)||{protocol:H7}}function xo(a){const e=t9[a];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${a}`);return e}var K7=Object.defineProperty,Hp=Object.getOwnPropertySymbols,V7=Object.prototype.hasOwnProperty,G7=Object.prototype.propertyIsEnumerable,Kp=(a,e,t)=>e in a?K7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W7=(a,e)=>{for(var t in e||(e={}))V7.call(e,t)&&Kp(a,t,e[t]);if(Hp)for(var t of Hp(e))G7.call(e,t)&&Kp(a,t,e[t]);return a};function Y7(a,e="-"){const t={},n="relay"+e;return Object.keys(a).forEach(c=>{if(c.startsWith(n)){const s=c.replace(n,""),m=a[c];t[s]=m}}),t}function J7(a){const e=a.indexOf(":"),t=a.indexOf("?")!==-1?a.indexOf("?"):void 0,n=a.substring(0,e),c=a.substring(e+1,t).split("@"),s=typeof t<"u"?a.substring(t):"",m=Qs.parse(s);return{protocol:n,topic:c[0],version:parseInt(c[1],10),symKey:m.symKey,relay:Y7(m)}}function Z7(a,e="-"){const t="relay",n={};return Object.keys(a).forEach(c=>{const s=t+e+c;a[c]&&(n[s]=a[c])}),n}function X7(a){return`${a.protocol}:${a.topic}@${a.version}?`+Qs.stringify(W7({symKey:a.symKey},Z7(a.relay)))}function ps(a){const e=[];return a.forEach(t=>{const[n,c]=t.split(":");e.push(`${n}:${c}`)}),e}function Q7(a){const e=[];return Object.values(a).forEach(t=>{e.push(...ps(t.accounts))}),e}function eE(a,e){const t=[];return Object.values(a).forEach(n=>{ps(n.accounts).includes(e)&&t.push(...n.methods)}),t}function tE(a,e){const t=[];return Object.values(a).forEach(n=>{ps(n.accounts).includes(e)&&t.push(...n.events)}),t}function rE(a,e){const t=Do(a,e);if(t)throw new Error(t.message);const n={};for(const[c,s]of Object.entries(a))n[c]={methods:s.methods,events:s.events,chains:s.accounts.map(m=>`${m.split(":")[0]}:${m.split(":")[1]}`)};return n}const iE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},nE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Le(a,e){const{message:t,code:n}=nE[a];return{message:e?`${t} ${e}`:t,code:n}}function vr(a,e){const{message:t,code:n}=iE[a];return{message:e?`${t} ${e}`:t,code:n}}function oa(a,e){return Array.isArray(a)?typeof e<"u"&&a.length?a.every(e):!0:!1}function Js(a){return Object.getPrototypeOf(a)===Object.prototype&&Object.keys(a).length}function jr(a){return typeof a>"u"}function gr(a,e){return e&&jr(a)?!0:typeof a=="string"&&!!a.trim().length}function e0(a,e){return e&&jr(a)?!0:typeof a=="number"&&!isNaN(a)}function sE(a,e){const{requiredNamespaces:t}=e,n=Object.keys(a.namespaces),c=Object.keys(t);let s=!0;return Tn(c,n)?(n.forEach(m=>{const{accounts:v,methods:d,events:p}=a.namespaces[m],u=ps(v),_=t[m];(!Tn(Kg(m,_),u)||!Tn(_.methods,d)||!Tn(_.events,p))&&(s=!1)}),s):!1}function t0(a){return gr(a,!1)&&a.includes(":")?a.split(":").length===2:!1}function aE(a){if(gr(a,!1)&&a.includes(":")){const e=a.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&t0(t)}}return!1}function oE(a){if(gr(a,!1))try{return typeof new URL(a)<"u"}catch{return!1}return!1}function fE(a){var e;return(e=a==null?void 0:a.proposer)==null?void 0:e.publicKey}function cE(a){return a==null?void 0:a.topic}function uE(a,e){let t=null;return gr(a==null?void 0:a.publicKey,!1)||(t=Le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Vp(a){let e=!0;return oa(a)?a.length&&(e=a.every(t=>gr(t,!1))):e=!1,e}function hE(a,e,t){let n=null;return oa(e)?e.forEach(c=>{n||(!t0(c)||!c.includes(a))&&(n=vr("UNSUPPORTED_CHAINS",`${t}, chain ${c} should be a string and conform to "namespace:chainId" format`))}):n=vr("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),n}function lE(a,e){let t=null;return Object.entries(a).forEach(([n,c])=>{if(t)return;const s=hE(n,Kg(n,c),`${e} requiredNamespace`);s&&(t=s)}),t}function dE(a,e){let t=null;return oa(a)?a.forEach(n=>{t||aE(n)||(t=vr("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=vr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function pE(a,e){let t=null;return Object.values(a).forEach(n=>{if(t)return;const c=dE(n==null?void 0:n.accounts,`${e} namespace`);c&&(t=c)}),t}function vE(a,e){let t=null;return Vp(a==null?void 0:a.methods)?Vp(a==null?void 0:a.events)||(t=vr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=vr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Qg(a,e){let t=null;return Object.values(a).forEach(n=>{if(t)return;const c=vE(n,`${e}, namespace`);c&&(t=c)}),t}function gE(a,e,t){let n=null;if(a&&Js(a)){const c=Qg(a,e);c&&(n=c);const s=lE(a,e);s&&(n=s)}else n=Le("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}function Do(a,e){let t=null;if(a&&Js(a)){const n=Qg(a,e);n&&(t=n);const c=pE(a,e);c&&(t=c)}else t=Le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function eb(a){return gr(a.protocol,!0)}function bE(a,e){let t=!1;return e&&!a?t=!0:a&&oa(a)&&a.length&&a.forEach(n=>{t=eb(n)}),t}function mE(a){return typeof a=="number"}function Wr(a){return typeof a<"u"&&typeof a!==null}function yE(a){return!(!a||typeof a!="object"||!a.code||!e0(a.code,!1)||!a.message||!gr(a.message,!1))}function _E(a){return!(jr(a)||!gr(a.method,!1))}function wE(a){return!(jr(a)||jr(a.result)&&jr(a.error)||!e0(a.id,!1)||!gr(a.jsonrpc,!1))}function EE(a){return!(jr(a)||!gr(a.name,!1))}function Gp(a,e){return!(!t0(e)||!Q7(a).includes(e))}function ME(a,e,t){return gr(t,!1)?eE(a,e).includes(t):!1}function SE(a,e,t){return gr(t,!1)?tE(a,e).includes(t):!1}function Wp(a,e,t){let n=null;const c=xE(a),s=DE(e),m=Object.keys(c),v=Object.keys(s),d=Yp(Object.keys(a)),p=Yp(Object.keys(e)),u=d.filter(_=>!p.includes(_));return u.length&&(n=Le("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Tn(m,v)||(n=Le("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${m.toString()}
      Approved: ${v.toString()}`)),Object.keys(e).forEach(_=>{if(!_.includes(":")||n)return;const w=ps(e[_].accounts);w.includes(_)||(n=Le("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${_}
        Required: ${_}
        Approved: ${w.toString()}`))}),m.forEach(_=>{n||(Tn(c[_].methods,s[_].methods)?Tn(c[_].events,s[_].events)||(n=Le("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${_}`)):n=Le("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${_}`))}),n}function xE(a){const e={};return Object.keys(a).forEach(t=>{var n;t.includes(":")?e[t]=a[t]:(n=a[t].chains)==null||n.forEach(c=>{e[c]={methods:a[t].methods,events:a[t].events}})}),e}function Yp(a){return[...new Set(a.map(e=>e.includes(":")?e.split(":")[0]:e))]}function DE(a){const e={};return Object.keys(a).forEach(t=>{if(t.includes(":"))e[t]=a[t];else{const n=ps(a[t].accounts);n==null||n.forEach(c=>{e[c]={accounts:a[t].accounts.filter(s=>s.includes(`${c}:`)),methods:a[t].methods,events:a[t].events}})}}),e}function AE(a,e){return e0(a,!1)&&a<=e.max&&a>=e.min}class ln extends dw{constructor(e){super(e),this.events=new ni.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(No(e.method,e.params||[],cw().toString()),t)}async requestStrict(e,t){return new Promise(async(n,c)=>{if(!this.connection.connected)try{await this.open()}catch(s){c(s)}this.events.on(`${e.id}`,s=>{Ii(s)?c(s.error):n(s.result)});try{await this.connection.send(e,t)}catch(s){c(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Dh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Jp=10,IE=()=>typeof Ys<"u"&&typeof Ys.WebSocket<"u"?Ys.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),OE=()=>typeof window<"u",PE=IE();class CE{constructor(e){if(this.url=e,this.events=new ni.EventEmitter,this.registering=!1,!fd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xs(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!fd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,c)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),c(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return c(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const c=uw.isReactNative()?void 0:{rejectUnauthorized:!bw(e)},s=new PE(e,[],c);OE()?s.onerror=m=>{const v=m;n(this.emitError(v.error))}:s.on("error",m=>{n(this.emitError(m))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Vh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),c=n.message||n.toString(),s=Bo(e,c);this.events.emit("payload",s)}parseError(e,t=this.url){return Tv(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Jp&&this.events.setMaxListeners(Jp)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}var To={exports:{}};To.exports;(function(a,e){var t=200,n="__lodash_hash_undefined__",c=1,s=2,m=9007199254740991,v="[object Arguments]",d="[object Array]",p="[object AsyncFunction]",u="[object Boolean]",_="[object Date]",w="[object Error]",M="[object Function]",A="[object GeneratorFunction]",R="[object Map]",B="[object Number]",z="[object Null]",P="[object Object]",N="[object Promise]",q="[object Proxy]",k="[object RegExp]",F="[object Set]",O="[object String]",j="[object Symbol]",J="[object Undefined]",L="[object WeakMap]",C="[object ArrayBuffer]",g="[object DataView]",h="[object Float32Array]",r="[object Float64Array]",o="[object Int8Array]",b="[object Int16Array]",D="[object Int32Array]",I="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",S="[object Uint32Array]",l=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,ee={};ee[h]=ee[r]=ee[o]=ee[b]=ee[D]=ee[I]=ee[x]=ee[y]=ee[S]=!0,ee[v]=ee[d]=ee[C]=ee[u]=ee[g]=ee[_]=ee[w]=ee[M]=ee[R]=ee[B]=ee[P]=ee[k]=ee[F]=ee[O]=ee[L]=!1;var ae=typeof St=="object"&&St&&St.Object===Object&&St,Q=typeof self=="object"&&self&&self.Object===Object&&self,X=ae||Q||Function("return this")(),Y=e&&!e.nodeType&&e,$=Y&&!0&&a&&!a.nodeType&&a,W=$&&$.exports===Y,oe=W&&ae.process,ye=function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}}(),we=ye&&ye.isTypedArray;function me(G,ie){for(var ve=-1,Ve=G==null?0:G.length,$t=0,mt=[];++ve<Ve;){var Wt=G[ve];ie(Wt,ve,G)&&(mt[$t++]=Wt)}return mt}function Ze(G,ie){for(var ve=-1,Ve=ie.length,$t=G.length;++ve<Ve;)G[$t+ve]=ie[ve];return G}function De(G,ie){for(var ve=-1,Ve=G==null?0:G.length;++ve<Ve;)if(ie(G[ve],ve,G))return!0;return!1}function Ee(G,ie){for(var ve=-1,Ve=Array(G);++ve<G;)Ve[ve]=ie(ve);return Ve}function nt(G){return function(ie){return G(ie)}}function Ae(G,ie){return G.has(ie)}function de(G,ie){return G==null?void 0:G[ie]}function ze(G){var ie=-1,ve=Array(G.size);return G.forEach(function(Ve,$t){ve[++ie]=[$t,Ve]}),ve}function Me(G,ie){return function(ve){return G(ie(ve))}}function ge(G){var ie=-1,ve=Array(G.size);return G.forEach(function(Ve){ve[++ie]=Ve}),ve}var Fe=Array.prototype,Se=Function.prototype,le=Object.prototype,je=X["__core-js_shared__"],Pe=Se.toString,pe=le.hasOwnProperty,Xe=function(){var G=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Te=le.toString,_e=RegExp("^"+Pe.call(pe).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=W?X.Buffer:void 0,Ne=X.Symbol,Be=X.Uint8Array,wt=le.propertyIsEnumerable,rt=Fe.splice,Ue=Ne?Ne.toStringTag:void 0,It=Object.getOwnPropertySymbols,it=Qe?Qe.isBuffer:void 0,ke=Me(Object.keys,Object),ct=Jr(X,"DataView"),He=Jr(X,"Map"),Ie=Jr(X,"Promise"),ut=Jr(X,"Set"),Ke=Jr(X,"WeakMap"),xe=Jr(Object,"create"),pt=Li(ct),Je=Li(He),Oe=Li(Ie),vt=Li(ut),Ge=Li(Ke),Ce=Ne?Ne.prototype:void 0,ht=Ce?Ce.valueOf:void 0;function $e(G){var ie=-1,ve=G==null?0:G.length;for(this.clear();++ie<ve;){var Ve=G[ie];this.set(Ve[0],Ve[1])}}function Re(){this.__data__=xe?xe(null):{},this.size=0}function gt(G){var ie=this.has(G)&&delete this.__data__[G];return this.size-=ie?1:0,ie}function dt(G){var ie=this.__data__;if(xe){var ve=ie[G];return ve===n?void 0:ve}return pe.call(ie,G)?ie[G]:void 0}function Ye(G){var ie=this.__data__;return xe?ie[G]!==void 0:pe.call(ie,G)}function Ut(G,ie){var ve=this.__data__;return this.size+=this.has(G)?0:1,ve[G]=xe&&ie===void 0?n:ie,this}$e.prototype.clear=Re,$e.prototype.delete=gt,$e.prototype.get=dt,$e.prototype.has=Ye,$e.prototype.set=Ut;function tt(G){var ie=-1,ve=G==null?0:G.length;for(this.clear();++ie<ve;){var Ve=G[ie];this.set(Ve[0],Ve[1])}}function lt(){this.__data__=[],this.size=0}function xr(G){var ie=this.__data__,ve=pn(ie,G);if(ve<0)return!1;var Ve=ie.length-1;return ve==Ve?ie.pop():rt.call(ie,ve,1),--this.size,!0}function Dr(G){var ie=this.__data__,ve=pn(ie,G);return ve<0?void 0:ie[ve][1]}function Ar(G){return pn(this.__data__,G)>-1}function Ir(G,ie){var ve=this.__data__,Ve=pn(ve,G);return Ve<0?(++this.size,ve.push([G,ie])):ve[Ve][1]=ie,this}tt.prototype.clear=lt,tt.prototype.delete=xr,tt.prototype.get=Dr,tt.prototype.has=Ar,tt.prototype.set=Ir;function er(G){var ie=-1,ve=G==null?0:G.length;for(this.clear();++ie<ve;){var Ve=G[ie];this.set(Ve[0],Ve[1])}}function cr(){this.size=0,this.__data__={hash:new $e,map:new(He||tt),string:new $e}}function Or(G){var ie=Zi(this,G).delete(G);return this.size-=ie?1:0,ie}function ur(G){return Zi(this,G).get(G)}function Pr(G){return Zi(this,G).has(G)}function Cr(G,ie){var ve=Zi(this,G),Ve=ve.size;return ve.set(G,ie),this.size+=ve.size==Ve?0:1,this}er.prototype.clear=cr,er.prototype.delete=Or,er.prototype.get=ur,er.prototype.has=Pr,er.prototype.set=Cr;function hr(G){var ie=-1,ve=G==null?0:G.length;for(this.__data__=new er;++ie<ve;)this.add(G[ie])}function _r(G){return this.__data__.set(G,n),this}function wr(G){return this.__data__.has(G)}hr.prototype.add=hr.prototype.push=_r,hr.prototype.has=wr;function Zt(G){var ie=this.__data__=new tt(G);this.size=ie.size}function Rr(){this.__data__=new tt,this.size=0}function Tr(G){var ie=this.__data__,ve=ie.delete(G);return this.size=ie.size,ve}function Nr(G){return this.__data__.get(G)}function Ei(G){return this.__data__.has(G)}function ai(G,ie){var ve=this.__data__;if(ve instanceof tt){var Ve=ve.__data__;if(!He||Ve.length<t-1)return Ve.push([G,ie]),this.size=++ve.size,this;ve=this.__data__=new er(Ve)}return ve.set(G,ie),this.size=ve.size,this}Zt.prototype.clear=Rr,Zt.prototype.delete=Tr,Zt.prototype.get=Nr,Zt.prototype.has=Ei,Zt.prototype.set=ai;function ca(G,ie){var ve=Kn(G),Ve=!ve&&wa(G),$t=!ve&&!Ve&&ms(G),mt=!ve&&!Ve&&!$t&&Sa(G),Wt=ve||Ve||$t||mt,nr=Wt?Ee(G.length,String):[],Pt=nr.length;for(var kt in G)(ie||pe.call(G,kt))&&!(Wt&&(kt=="length"||$t&&(kt=="offset"||kt=="parent")||mt&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||ga(kt,Pt)))&&nr.push(kt);return nr}function pn(G,ie){for(var ve=G.length;ve--;)if(_a(G[ve][0],ie))return ve;return-1}function gs(G,ie,ve){var Ve=ie(G);return Kn(G)?Ve:Ze(Ve,ve(G))}function vn(G){return G==null?G===void 0?J:z:Ue&&Ue in Object(G)?pa(G):Qo(G)}function bs(G){return bn(G)&&vn(G)==v}function gn(G,ie,ve,Ve,$t){return G===ie?!0:G==null||ie==null||!bn(G)&&!bn(ie)?G!==G&&ie!==ie:ua(G,ie,ve,Ve,gn,$t)}function ua(G,ie,ve,Ve,$t,mt){var Wt=Kn(G),nr=Kn(ie),Pt=Wt?d:Pi(G),kt=nr?d:Pi(ie);Pt=Pt==v?P:Pt,kt=kt==v?P:kt;var tr=Pt==P,zr=kt==P,sr=Pt==kt;if(sr&&ms(G)){if(!ms(ie))return!1;Wt=!0,tr=!1}if(sr&&!tr)return mt||(mt=new Zt),Wt||Sa(G)?zn(G,ie,ve,Ve,$t,mt):Xo(G,ie,Pt,ve,Ve,$t,mt);if(!(ve&c)){var Yt=tr&&pe.call(G,"__wrapped__"),Br=zr&&pe.call(ie,"__wrapped__");if(Yt||Br){var Mi=Yt?G.value():G,oi=Br?ie.value():ie;return mt||(mt=new Zt),$t(Mi,oi,ve,Ve,mt)}}return sr?(mt||(mt=new Zt),da(G,ie,ve,Ve,$t,mt)):!1}function Zo(G){if(!Ma(G)||ma(G))return!1;var ie=Vn(G)?_e:T;return ie.test(Li(G))}function ha(G){return bn(G)&&Ea(G.length)&&!!ee[vn(G)]}function la(G){if(!ya(G))return ke(G);var ie=[];for(var ve in Object(G))pe.call(G,ve)&&ve!="constructor"&&ie.push(ve);return ie}function zn(G,ie,ve,Ve,$t,mt){var Wt=ve&c,nr=G.length,Pt=ie.length;if(nr!=Pt&&!(Wt&&Pt>nr))return!1;var kt=mt.get(G);if(kt&&mt.get(ie))return kt==ie;var tr=-1,zr=!0,sr=ve&s?new hr:void 0;for(mt.set(G,ie),mt.set(ie,G);++tr<nr;){var Yt=G[tr],Br=ie[tr];if(Ve)var Mi=Wt?Ve(Br,Yt,tr,ie,G,mt):Ve(Yt,Br,tr,G,ie,mt);if(Mi!==void 0){if(Mi)continue;zr=!1;break}if(sr){if(!De(ie,function(oi,Ci){if(!Ae(sr,Ci)&&(Yt===oi||$t(Yt,oi,ve,Ve,mt)))return sr.push(Ci)})){zr=!1;break}}else if(!(Yt===Br||$t(Yt,Br,ve,Ve,mt))){zr=!1;break}}return mt.delete(G),mt.delete(ie),zr}function Xo(G,ie,ve,Ve,$t,mt,Wt){switch(ve){case g:if(G.byteLength!=ie.byteLength||G.byteOffset!=ie.byteOffset)return!1;G=G.buffer,ie=ie.buffer;case C:return!(G.byteLength!=ie.byteLength||!mt(new Be(G),new Be(ie)));case u:case _:case B:return _a(+G,+ie);case w:return G.name==ie.name&&G.message==ie.message;case k:case O:return G==ie+"";case R:var nr=ze;case F:var Pt=Ve&c;if(nr||(nr=ge),G.size!=ie.size&&!Pt)return!1;var kt=Wt.get(G);if(kt)return kt==ie;Ve|=s,Wt.set(G,ie);var tr=zn(nr(G),nr(ie),Ve,$t,mt,Wt);return Wt.delete(G),tr;case j:if(ht)return ht.call(G)==ht.call(ie)}return!1}function da(G,ie,ve,Ve,$t,mt){var Wt=ve&c,nr=Hn(G),Pt=nr.length,kt=Hn(ie),tr=kt.length;if(Pt!=tr&&!Wt)return!1;for(var zr=Pt;zr--;){var sr=nr[zr];if(!(Wt?sr in ie:pe.call(ie,sr)))return!1}var Yt=mt.get(G);if(Yt&&mt.get(ie))return Yt==ie;var Br=!0;mt.set(G,ie),mt.set(ie,G);for(var Mi=Wt;++zr<Pt;){sr=nr[zr];var oi=G[sr],Ci=ie[sr];if(Ve)var ys=Wt?Ve(Ci,oi,sr,ie,G,mt):Ve(oi,Ci,sr,G,ie,mt);if(!(ys===void 0?oi===Ci||$t(oi,Ci,ve,Ve,mt):ys)){Br=!1;break}Mi||(Mi=sr=="constructor")}if(Br&&!Mi){var mn=G.constructor,lr=ie.constructor;mn!=lr&&"constructor"in G&&"constructor"in ie&&!(typeof mn=="function"&&mn instanceof mn&&typeof lr=="function"&&lr instanceof lr)&&(Br=!1)}return mt.delete(G),mt.delete(ie),Br}function Hn(G){return gs(G,rf,va)}function Zi(G,ie){var ve=G.__data__;return ba(ie)?ve[typeof ie=="string"?"string":"hash"]:ve.map}function Jr(G,ie){var ve=de(G,ie);return Zo(ve)?ve:void 0}function pa(G){var ie=pe.call(G,Ue),ve=G[Ue];try{G[Ue]=void 0;var Ve=!0}catch{}var $t=Te.call(G);return Ve&&(ie?G[Ue]=ve:delete G[Ue]),$t}var va=It?function(G){return G==null?[]:(G=Object(G),me(It(G),function(ie){return wt.call(G,ie)}))}:jt,Pi=vn;(ct&&Pi(new ct(new ArrayBuffer(1)))!=g||He&&Pi(new He)!=R||Ie&&Pi(Ie.resolve())!=N||ut&&Pi(new ut)!=F||Ke&&Pi(new Ke)!=L)&&(Pi=function(G){var ie=vn(G),ve=ie==P?G.constructor:void 0,Ve=ve?Li(ve):"";if(Ve)switch(Ve){case pt:return g;case Je:return R;case Oe:return N;case vt:return F;case Ge:return L}return ie});function ga(G,ie){return ie=ie??m,!!ie&&(typeof G=="number"||te.test(G))&&G>-1&&G%1==0&&G<ie}function ba(G){var ie=typeof G;return ie=="string"||ie=="number"||ie=="symbol"||ie=="boolean"?G!=="__proto__":G===null}function ma(G){return!!Xe&&Xe in G}function ya(G){var ie=G&&G.constructor,ve=typeof ie=="function"&&ie.prototype||le;return G===ve}function Qo(G){return Te.call(G)}function Li(G){if(G!=null){try{return Pe.call(G)}catch{}try{return G+""}catch{}}return""}function _a(G,ie){return G===ie||G!==G&&ie!==ie}var wa=bs(function(){return arguments}())?bs:function(G){return bn(G)&&pe.call(G,"callee")&&!wt.call(G,"callee")},Kn=Array.isArray;function ef(G){return G!=null&&Ea(G.length)&&!Vn(G)}var ms=it||Ft;function tf(G,ie){return gn(G,ie)}function Vn(G){if(!Ma(G))return!1;var ie=vn(G);return ie==M||ie==A||ie==p||ie==q}function Ea(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=m}function Ma(G){var ie=typeof G;return G!=null&&(ie=="object"||ie=="function")}function bn(G){return G!=null&&typeof G=="object"}var Sa=we?nt(we):ha;function rf(G){return ef(G)?ca(G):la(G)}function jt(){return[]}function Ft(){return!1}a.exports=tf})(To,To.exports);var RE=To.exports;const TE=Q_(RE);function NE(a,e){if(a.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var c=0;c<a.length;c++){var s=a.charAt(c),m=s.charCodeAt(0);if(t[m]!==255)throw new TypeError(s+" is ambiguous");t[m]=c}var v=a.length,d=a.charAt(0),p=Math.log(v)/Math.log(256),u=Math.log(256)/Math.log(v);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var R=0,B=0,z=0,P=A.length;z!==P&&A[z]===0;)z++,R++;for(var N=(P-z)*u+1>>>0,q=new Uint8Array(N);z!==P;){for(var k=A[z],F=0,O=N-1;(k!==0||F<B)&&O!==-1;O--,F++)k+=256*q[O]>>>0,q[O]=k%v>>>0,k=k/v>>>0;if(k!==0)throw new Error("Non-zero carry");B=F,z++}for(var j=N-B;j!==N&&q[j]===0;)j++;for(var J=d.repeat(R);j<N;++j)J+=a.charAt(q[j]);return J}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var R=0;if(A[R]!==" "){for(var B=0,z=0;A[R]===d;)B++,R++;for(var P=(A.length-R)*p+1>>>0,N=new Uint8Array(P);A[R];){var q=t[A.charCodeAt(R)];if(q===255)return;for(var k=0,F=P-1;(q!==0||k<z)&&F!==-1;F--,k++)q+=v*N[F]>>>0,N[F]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");z=k,R++}if(A[R]!==" "){for(var O=P-z;O!==P&&N[O]===0;)O++;for(var j=new Uint8Array(B+(P-O)),J=B;O!==P;)j[J++]=N[O++];return j}}}function M(A){var R=w(A);if(R)return R;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:M}}var BE=NE,UE=BE;const tb=a=>{if(a instanceof Uint8Array&&a.constructor.name==="Uint8Array")return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw new Error("Unknown type, must be binary type")},qE=a=>new TextEncoder().encode(a),LE=a=>new TextDecoder().decode(a);let FE=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}};class jE{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return rb(this,e)}}class $E{constructor(e){this.decoders=e}or(e){return rb(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const rb=(a,e)=>new $E({...a.decoders||{[a.prefix]:a},...e.decoders||{[e.prefix]:e}});let kE=class{constructor(e,t,n,c){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=c,this.encoder=new FE(e,t,n),this.decoder=new jE(e,t,c)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Yo=({name:a,prefix:e,encode:t,decode:n})=>new kE(a,e,t,n),fa=({prefix:a,name:e,alphabet:t})=>{const{encode:n,decode:c}=UE(t,e);return Yo({prefix:a,name:e,encode:n,decode:s=>tb(c(s))})},zE=(a,e,t,n)=>{const c={};for(let u=0;u<e.length;++u)c[e[u]]=u;let s=a.length;for(;a[s-1]==="=";)--s;const m=new Uint8Array(s*t/8|0);let v=0,d=0,p=0;for(let u=0;u<s;++u){const _=c[a[u]];if(_===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<t|_,v+=t,v>=8&&(v-=8,m[p++]=255&d>>v)}if(v>=t||255&d<<8-v)throw new SyntaxError("Unexpected end of data");return m},HE=(a,e,t)=>{const n=e[e.length-1]==="=",c=(1<<t)-1;let s="",m=0,v=0;for(let d=0;d<a.length;++d)for(v=v<<8|a[d],m+=8;m>t;)m-=t,s+=e[c&v>>m];if(m&&(s+=e[c&v<<t-m]),n)for(;s.length*t&7;)s+="=";return s},yr=({name:a,prefix:e,bitsPerChar:t,alphabet:n})=>Yo({prefix:e,name:a,encode(c){return HE(c,n,t)},decode(c){return zE(c,n,t,a)}}),KE=Yo({prefix:"\0",name:"identity",encode:a=>LE(a),decode:a=>qE(a)});var VE=Object.freeze({__proto__:null,identity:KE});const GE=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var WE=Object.freeze({__proto__:null,base2:GE});const YE=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var JE=Object.freeze({__proto__:null,base8:YE});const ZE=fa({prefix:"9",name:"base10",alphabet:"0123456789"});var XE=Object.freeze({__proto__:null,base10:ZE});const QE=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eM=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tM=Object.freeze({__proto__:null,base16:QE,base16upper:eM});const rM=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iM=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nM=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sM=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aM=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oM=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fM=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cM=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uM=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hM=Object.freeze({__proto__:null,base32:rM,base32upper:iM,base32pad:nM,base32padupper:sM,base32hex:aM,base32hexupper:oM,base32hexpad:fM,base32hexpadupper:cM,base32z:uM});const lM=fa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dM=fa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pM=Object.freeze({__proto__:null,base36:lM,base36upper:dM});const vM=fa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gM=fa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var bM=Object.freeze({__proto__:null,base58btc:vM,base58flickr:gM});const mM=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yM=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_M=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wM=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var EM=Object.freeze({__proto__:null,base64:mM,base64pad:yM,base64url:_M,base64urlpad:wM});const ib=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),MM=ib.reduce((a,e,t)=>(a[t]=e,a),[]),SM=ib.reduce((a,e,t)=>(a[e.codePointAt(0)]=t,a),[]);function xM(a){return a.reduce((e,t)=>(e+=MM[t],e),"")}function DM(a){const e=[];for(const t of a){const n=SM[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const AM=Yo({prefix:"🚀",name:"base256emoji",encode:xM,decode:DM});var IM=Object.freeze({__proto__:null,base256emoji:AM}),OM=nb,Zp=128,PM=127,CM=~PM,RM=Math.pow(2,31);function nb(a,e,t){e=e||[],t=t||0;for(var n=t;a>=RM;)e[t++]=a&255|Zp,a/=128;for(;a&CM;)e[t++]=a&255|Zp,a>>>=7;return e[t]=a|0,nb.bytes=t-n+1,e}var TM=uh,NM=128,Xp=127;function uh(a,n){var t=0,n=n||0,c=0,s=n,m,v=a.length;do{if(s>=v)throw uh.bytes=0,new RangeError("Could not decode varint");m=a[s++],t+=c<28?(m&Xp)<<c:(m&Xp)*Math.pow(2,c),c+=7}while(m>=NM);return uh.bytes=s-n,t}var BM=Math.pow(2,7),UM=Math.pow(2,14),qM=Math.pow(2,21),LM=Math.pow(2,28),FM=Math.pow(2,35),jM=Math.pow(2,42),$M=Math.pow(2,49),kM=Math.pow(2,56),zM=Math.pow(2,63),HM=function(a){return a<BM?1:a<UM?2:a<qM?3:a<LM?4:a<FM?5:a<jM?6:a<$M?7:a<kM?8:a<zM?9:10},KM={encode:OM,decode:TM,encodingLength:HM},sb=KM;const Qp=(a,e,t=0)=>(sb.encode(a,e,t),e),ev=a=>sb.encodingLength(a),hh=(a,e)=>{const t=e.byteLength,n=ev(a),c=n+ev(t),s=new Uint8Array(c+t);return Qp(a,s,0),Qp(t,s,n),s.set(e,c),new VM(a,t,e,s)};class VM{constructor(e,t,n,c){this.code=e,this.size=t,this.digest=n,this.bytes=c}}const ab=({name:a,code:e,encode:t})=>new GM(a,e,t);class GM{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?hh(this.code,t):t.then(n=>hh(this.code,n))}else throw Error("Unknown type, must be binary type")}}const ob=a=>async e=>new Uint8Array(await crypto.subtle.digest(a,e)),WM=ab({name:"sha2-256",code:18,encode:ob("SHA-256")}),YM=ab({name:"sha2-512",code:19,encode:ob("SHA-512")});var JM=Object.freeze({__proto__:null,sha256:WM,sha512:YM});const fb=0,ZM="identity",cb=tb,XM=a=>hh(fb,cb(a)),QM={code:fb,name:ZM,encode:cb,digest:XM};var eS=Object.freeze({__proto__:null,identity:QM});new TextEncoder,new TextDecoder;const tv={...VE,...WE,...JE,...XE,...tM,...hM,...pM,...bM,...EM,...IM};({...JM,...eS});function tS(a=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(a):new Uint8Array(a)}function ub(a,e,t,n){return{name:a,prefix:e,encoder:{name:a,prefix:e,encode:t},decoder:{decode:n}}}const rv=ub("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>new TextEncoder().encode(a.substring(1))),Hu=ub("ascii","a",a=>{let e="a";for(let t=0;t<a.length;t++)e+=String.fromCharCode(a[t]);return e},a=>{a=a.substring(1);const e=tS(a.length);for(let t=0;t<a.length;t++)e[t]=a.charCodeAt(t);return e}),rS={utf8:rv,"utf-8":rv,hex:tv.base16,latin1:Hu,ascii:Hu,binary:Hu,...tv};function iS(a,e="utf8"){const t=rS[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(a,"utf8"):t.decoder.decode(`${t.prefix}${a}`)}const hb="wc",nS=2,r0="core",cn=`${hb}@2:${r0}:`,sS={name:r0,logger:"error"},aS={database:":memory:"},oS="crypto",iv="client_ed25519_seed",fS=ft.ONE_DAY,cS="keychain",uS="0.3",hS="messages",lS="0.3",dS=ft.SIX_HOURS,pS="publisher",lb="irn",vS="error",db="wss://relay.walletconnect.com",gS="relayer",pr={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},bS="_subscription",zs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},mS=ft.ONE_SECOND,yS="2.7.0",_S="0.3",qi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},wS="subscription",ES="0.3",MS=ft.FIVE_SECONDS*1e3,SS="pairing",xS="0.3",Hs={wc_pairingDelete:{req:{ttl:ft.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ft.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ft.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ft.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ft.ONE_DAY,prompt:!1,tag:0},res:{ttl:ft.ONE_DAY,prompt:!1,tag:0}}},Ui={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},DS="history",AS="0.3",IS="expirer",yi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},OS="0.3",nv="verify-api",sv="https://verify.walletconnect.com";class PS{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=cS,this.version=uS,this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,c)=>{this.isInitialized(),this.keychain.set(n,c),await this.persist()},this.get=n=>{this.isInitialized();const c=this.keychain.get(n);if(typeof c>"u"){const{message:s}=Le("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return c},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Rt.generateChildLogger(t,this.name)}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Yg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class CS{constructor(e,t,n){this.core=e,this.logger=t,this.name=oS,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=c=>(this.isInitialized(),this.keychain.has(c)),this.getClientId=async()=>{this.isInitialized();const c=await this.getClientSeed(),s=Tp(c);return $g(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const c=w7();return this.setPrivateKey(c.publicKey,c.privateKey)},this.signJWT=async c=>{this.isInitialized();const s=await this.getClientSeed(),m=Tp(s),v=fh();return await Y9(v,c,fS,m)},this.generateSharedKey=(c,s,m)=>{this.isInitialized();const v=this.getPrivateKey(c),d=E7(v,s);return this.setSymKey(d,m)},this.setSymKey=async(c,s)=>{this.isInitialized();const m=s||M7(c);return await this.keychain.set(m,c),m},this.deleteKeyPair=async c=>{this.isInitialized(),await this.keychain.del(c)},this.deleteSymKey=async c=>{this.isInitialized(),await this.keychain.del(c)},this.encode=async(c,s,m)=>{this.isInitialized();const v=Wg(m),d=Xs(s);if(jp(v)){const w=v.senderPublicKey,M=v.receiverPublicKey;c=await this.generateSharedKey(w,M)}const p=this.getSymKey(c),{type:u,senderPublicKey:_}=v;return x7({type:u,symKey:p,message:d,senderPublicKey:_})},this.decode=async(c,s,m)=>{this.isInitialized();const v=I7(s,m);if(jp(v)){const u=v.receiverPublicKey,_=v.senderPublicKey;c=await this.generateSharedKey(u,_)}const d=this.getSymKey(c),p=D7({symKey:d,encoded:s});return Vh(p)},this.getPayloadType=c=>{const s=Co(c);return aa(s.type)},this.getPayloadSenderPublicKey=c=>{const s=Co(c);return s.senderPublicKey?kr(s.senderPublicKey,$r):void 0},this.core=e,this.logger=Rt.generateChildLogger(t,this.name),this.keychain=n||new PS(this.core,this.logger)}get context(){return Rt.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(iv)}catch{e=fh(),await this.keychain.set(iv,e)}return iS(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class RS extends x9{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=hS,this.version=lS,this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,c)=>{this.isInitialized();const s=Nn(c);let m=this.messages.get(n);return typeof m>"u"&&(m={}),typeof m[s]<"u"||(m[s]=c,this.messages.set(n,m),await this.persist()),s},this.get=n=>{this.isInitialized();let c=this.messages.get(n);return typeof c>"u"&&(c={}),c},this.has=(n,c)=>{this.isInitialized();const s=this.get(n),m=Nn(c);return typeof s[m]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Rt.generateChildLogger(e,this.name),this.core=t}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Yg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jg(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class TS extends D9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new ni.EventEmitter,this.name=pS,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,c,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:c,opts:s}});try{const m=(s==null?void 0:s.ttl)||dS,v=ch(s),d=(s==null?void 0:s.prompt)||!1,p=(s==null?void 0:s.tag)||0,u={topic:n,message:c,opts:{ttl:m,relay:v,prompt:d,tag:p}},_=Nn(c);this.queue.set(_,u);try{await await Ro(this.rpcPublish(n,c,m,v,d,p),this.publishTimeout),this.relayer.events.emit(pr.publish,u)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(pr.connection_stalled);return}this.onPublish(_,u),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:c,opts:s}})}catch(m){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(m),m}},this.on=(n,c)=>{this.events.on(n,c)},this.once=(n,c)=>{this.events.once(n,c)},this.off=(n,c)=>{this.events.off(n,c)},this.removeListener=(n,c)=>{this.events.removeListener(n,c)},this.relayer=e,this.logger=Rt.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Rt.getLoggerContext(this.logger)}rpcPublish(e,t,n,c,s,m){var v,d,p,u;const _={method:xo(c.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:s,tag:m}};return jr((v=_.params)==null?void 0:v.prompt)&&((d=_.params)==null||delete d.prompt),jr((p=_.params)==null?void 0:p.tag)&&((u=_.params)==null||delete u.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.request(_)}onPublish(e,t){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:n,opts:c}=e;await this.publish(t,n,c)})}registerEventListeners(){this.relayer.core.heartbeat.on(sa.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class NS{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const c=n.filter(s=>s!==t);if(!c.length){this.map.delete(e);return}this.map.set(e,c)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var BS=Object.defineProperty,US=Object.defineProperties,qS=Object.getOwnPropertyDescriptors,av=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,FS=Object.prototype.propertyIsEnumerable,ov=(a,e,t)=>e in a?BS(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ks=(a,e)=>{for(var t in e||(e={}))LS.call(e,t)&&ov(a,t,e[t]);if(av)for(var t of av(e))FS.call(e,t)&&ov(a,t,e[t]);return a},Ku=(a,e)=>US(a,qS(e));class jS extends O9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new NS,this.events=new ni.EventEmitter,this.name=wS,this.version=ES,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=cn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,c)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:c}});try{const s=ch(c),m={topic:n,relay:s};this.pending.set(n,m);const v=await this.rpcSubscribe(n,s);return this.onSubscribe(v,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:c}}),v}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,c)=>{await this.restartToComplete(),this.isInitialized(),typeof(c==null?void 0:c.id)<"u"?await this.unsubscribeById(n,c.id,c):await this.unsubscribeByTopic(n,c)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((c,s)=>{const m=new ft.Watch;m.start(this.pendingSubscriptionWatchLabel);const v=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(v),m.stop(this.pendingSubscriptionWatchLabel),c(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=MS&&(clearInterval(v),m.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pollingInterval)}),this.on=(n,c)=>{this.events.on(n,c)},this.once=(n,c)=>{this.events.once(n,c)},this.off=(n,c)=>{this.events.off(n,c)},this.removeListener=(n,c)=>{this.events.removeListener(n,c)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Rt.generateChildLogger(t,this.name),this.clientId=""}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map(async c=>await this.unsubscribeById(e,c,t)))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const c=ch(n);await this.rpcUnsubscribe(e,t,c);const s=vr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(c){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(c),c}}async rpcSubscribe(e,t){const n={method:xo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Ro(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}return Nn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,n={method:xo(t.protocol).batchSubscribe,params:{topics:e.map(c=>c.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Ro(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}}rpcUnsubscribe(e,t,n){const c={method:xo(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c}),this.relayer.request(c)}onSubscribe(e,t){this.setSubscription(e,Ku(Ks({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ks({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Ks({},t)),this.topicMap.set(t.topic,e),this.events.emit(qi.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=Le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(qi.deleted,Ku(Ks({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(qi.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(qi.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);oa(t)&&this.onBatchSubscribe(t.map((n,c)=>Ku(Ks({},e[c]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(sa.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(pr.connect,async()=>{await this.onConnect()}),this.relayer.on(pr.disconnect,()=>{this.onDisconnect()}),this.events.on(qi.created,async e=>{const t=qi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(qi.deleted,async e=>{const t=qi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var $S=Object.defineProperty,fv=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,zS=Object.prototype.propertyIsEnumerable,cv=(a,e,t)=>e in a?$S(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,HS=(a,e)=>{for(var t in e||(e={}))kS.call(e,t)&&cv(a,t,e[t]);if(fv)for(var t of fv(e))zS.call(e,t)&&cv(a,t,e[t]);return a};class KS extends A9{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ni.EventEmitter,this.name=gS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Rt.generateChildLogger(e.logger,this.name):Rt.pino(Rt.getDefaultLoggerOptions({level:e.logger||vS})),this.messages=new RS(this.logger,e.core),this.subscriber=new jS(this,this.logger),this.publisher=new TS(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||db,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Rt.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){this.isInitialized();let n="";return await Promise.all([new Promise(c=>{this.subscriber.once(qi.created,s=>{s.topic===e&&c()})}),new Promise(async c=>{n=await this.subscriber.subscribe(e,t),c()})]),n}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(pr.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(qi.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,n)=>{await Ro(this.provider.connect(),5e3,"socket stalled").catch(c=>n(c)).then(()=>t()).finally(()=>this.removeListener(pr.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(pr.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.events.emit(pr.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,await Promise.all([new Promise(t=>{this.provider.once(zs.disconnect,()=>{t()})}),this.transportClose()]),await new Promise(t=>setTimeout(t,1e3)),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ln(new CE($7({sdkVersion:yS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),xh(e)){if(!e.method.endsWith(bS))return;const t=e.params,{topic:n,message:c,publishedAt:s}=t.data,m={topic:n,message:c,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(HS({type:"event",event:t.id},m)),this.events.emit(t.id,m),await this.acknowledgePayload(e),await this.onMessageEvent(m)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(pr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Sh(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(zs.payload,e=>this.onProviderPayload(e)),this.provider.on(zs.connect,()=>{this.events.emit(pr.connect)}),this.provider.on(zs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(zs.error,e=>{this.logger.error(e),this.events.emit(pr.error,e)})}registerEventListeners(){this.events.on(pr.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(pr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ft.toMiliseconds(mS))}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var VS=Object.defineProperty,uv=Object.getOwnPropertySymbols,GS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,hv=(a,e,t)=>e in a?VS(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,lv=(a,e)=>{for(var t in e||(e={}))GS.call(e,t)&&hv(a,t,e[t]);if(uv)for(var t of uv(e))WS.call(e,t)&&hv(a,t,e[t]);return a};class Jo extends I9{constructor(e,t,n,c=cn,s=void 0){super(e,t,n,c),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version=_S,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!jr(m)?this.map.set(this.getKey(m),m):fE(m)?this.map.set(m.id,m):cE(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,v)=>{this.isInitialized(),this.map.has(m)?await this.update(m,v):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:v}),this.map.set(m,v),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(v=>Object.keys(m).every(d=>TE(v[d],m[d]))):this.values),this.update=async(m,v)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:v});const d=lv(lv({},this.getData(m)),v);this.map.set(m,d),await this.persist()},this.delete=async(m,v)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:v}),this.map.delete(m),await this.persist())},this.logger=Rt.generateChildLogger(t,this.name),this.storagePrefix=c,this.getKey=s}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:n}=Le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YS{constructor(e,t){this.core=e,this.logger=t,this.name=SS,this.version=xS,this.events=new yh,this.initialized=!1,this.storagePrefix=cn,this.ignoredPayloadTypes=[Fn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=fh(),c=await this.core.crypto.setSymKey(n),s=Oi(ft.FIVE_MINUTES),m={protocol:lb},v={topic:c,expiry:s,relay:m,active:!1},d=X7({protocol:this.core.protocol,version:this.core.version,topic:c,symKey:n,relay:m});return await this.pairings.set(c,v),await this.core.relayer.subscribe(c),this.core.expirer.set(c,s),{topic:c,uri:d}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:c,symKey:s,relay:m}=J7(n.uri);if(this.pairings.keys.includes(c))throw new Error(`Pairing already exists: ${c}`);if(this.core.crypto.hasKeys(c))throw new Error(`Keychain already exists: ${c}`);const v=Oi(ft.FIVE_MINUTES),d={topic:c,relay:m,expiry:v,active:!1};return await this.pairings.set(c,d),await this.core.crypto.setSymKey(s,c),await this.core.relayer.subscribe(c,{relay:m}),this.core.expirer.set(c,v),n.activatePairing&&await this.activate({topic:c}),d},this.activate=async({topic:n})=>{this.isInitialized();const c=Oi(ft.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:c}),this.core.expirer.set(n,c)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:c}=n;if(this.pairings.keys.includes(c)){const s=await this.sendRequest(c,"wc_pairingPing",{}),{done:m,resolve:v,reject:d}=cs();this.events.once(ar("pairing_ping",s),({error:p})=>{p?d(p):v()}),await m()}},this.updateExpiry=async({topic:n,expiry:c})=>{this.isInitialized(),await this.pairings.update(n,{expiry:c})},this.updateMetadata=async({topic:n,metadata:c})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:c})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:c}=n;this.pairings.keys.includes(c)&&(await this.sendRequest(c,"wc_pairingDelete",vr("USER_DISCONNECTED")),await this.deletePairing(c))},this.sendRequest=async(n,c,s)=>{const m=No(c,s),v=await this.core.crypto.encode(n,m),d=Hs[c].req;return this.core.history.set(n,m),await this.core.relayer.publish(n,v,d),m.id},this.sendResult=async(n,c,s)=>{const m=Sh(n,s),v=await this.core.crypto.encode(c,m),d=await this.core.history.get(c,n),p=Hs[d.request.method].res;await this.core.relayer.publish(c,v,p),await this.core.history.resolve(m)},this.sendError=async(n,c,s)=>{const m=Bo(n,s),v=await this.core.crypto.encode(c,m),d=await this.core.history.get(c,n),p=Hs[d.request.method]?Hs[d.request.method].res:Hs.unregistered_method.res;await this.core.relayer.publish(c,v,p),await this.core.history.resolve(m)},this.deletePairing=async(n,c)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,vr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),c?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(c=>fn(c.expiry));await Promise.all(n.map(c=>this.deletePairing(c.topic)))},this.onRelayEventRequest=n=>{const{topic:c,payload:s}=n,m=s.method;if(this.pairings.keys.includes(c))switch(m){case"wc_pairingPing":return this.onPairingPingRequest(c,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(c,s);default:return this.onUnknownRpcMethodRequest(c,s)}},this.onRelayEventResponse=async n=>{const{topic:c,payload:s}=n,m=(await this.core.history.get(c,s.id)).request.method;if(this.pairings.keys.includes(c))switch(m){case"wc_pairingPing":return this.onPairingPingResponse(c,s);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(n,c)=>{const{id:s}=c;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(m){await this.sendError(s,n,m),this.logger.error(m)}},this.onPairingPingResponse=(n,c)=>{const{id:s}=c;setTimeout(()=>{Wi(c)?this.events.emit(ar("pairing_ping",s),{}):Ii(c)&&this.events.emit(ar("pairing_ping",s),{error:c.error})},500)},this.onPairingDeleteRequest=async(n,c)=>{const{id:s}=c;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(m){await this.sendError(s,n,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(n,c)=>{const{id:s,method:m}=c;try{if(this.registeredMethods.includes(m))return;const v=vr("WC_METHOD_UNSUPPORTED",m);await this.sendError(s,n,v),this.logger.error(v)}catch(v){await this.sendError(s,n,v),this.logger.error(v)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(vr("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Wr(n)){const{message:c}=Le("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(c)}if(!oE(n.uri)){const{message:c}=Le("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(c)}},this.isValidPing=async n=>{if(!Wr(n)){const{message:s}=Le("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:c}=n;await this.isValidPairingTopic(c)},this.isValidDisconnect=async n=>{if(!Wr(n)){const{message:s}=Le("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:c}=n;await this.isValidPairingTopic(c)},this.isValidPairingTopic=async n=>{if(!gr(n,!1)){const{message:c}=Le("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(c)}if(!this.pairings.keys.includes(n)){const{message:c}=Le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(c)}if(fn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:c}=Le("EXPIRED",`pairing topic: ${n}`);throw new Error(c)}},this.core=e,this.logger=Rt.generateChildLogger(t,this.name),this.pairings=new Jo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Rt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(pr.message,async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const c=await this.core.crypto.decode(t,n);xh(c)?(this.core.history.set(t,c),this.onRelayEventRequest({topic:t,payload:c})):Dh(c)&&(await this.core.history.resolve(c),this.onRelayEventResponse({topic:t,payload:c}))})}registerExpirerEvents(){this.core.expirer.on(yi.expired,async e=>{const{topic:t}=Xg(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class JS extends S9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new ni.EventEmitter,this.name=DS,this.version=AS,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,c,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:c,chainId:s}),this.records.has(c.id))return;const m={id:c.id,topic:n,request:{method:c.method,params:c.params||null},chainId:s};this.records.set(m.id,m),this.events.emit(Ui.created,m)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const c=await this.getRecord(n.id);typeof c.response>"u"&&(c.response=Ii(n)?{error:n.error}:{result:n.result},this.records.set(c.id,c),this.events.emit(Ui.updated,c))},this.get=async(n,c)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:c}),await this.getRecord(c)),this.delete=(n,c)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:c}),this.values.forEach(s=>{if(s.topic===n){if(typeof c<"u"&&s.id!==c)return;this.records.delete(s.id),this.events.emit(Ui.deleted,s)}})},this.exists=async(n,c)=>(this.isInitialized(),this.records.has(c)?(await this.getRecord(c)).topic===n:!1),this.on=(n,c)=>{this.events.on(n,c)},this.once=(n,c)=>{this.events.once(n,c)},this.off=(n,c)=>{this.events.off(n,c)},this.removeListener=(n,c)=>{this.events.removeListener(n,c)},this.logger=Rt.generateChildLogger(t,this.name)}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:No(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=Le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ui.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ui.created,e=>{const t=Ui.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ui.updated,e=>{const t=Ui.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Ui.deleted,e=>{const t=Ui.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ZS extends P9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new ni.EventEmitter,this.name=IS,this.version=OS,this.cached=[],this.initialized=!1,this.storagePrefix=cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const c=this.formatTarget(n);return typeof this.getExpiration(c)<"u"}catch{return!1}},this.set=(n,c)=>{this.isInitialized();const s=this.formatTarget(n),m={target:s,expiry:c};this.expirations.set(s,m),this.checkExpiry(s,m),this.events.emit(yi.created,{target:s,expiration:m})},this.get=n=>{this.isInitialized();const c=this.formatTarget(n);return this.getExpiration(c)},this.del=n=>{if(this.isInitialized(),this.has(n)){const c=this.formatTarget(n),s=this.getExpiration(c);this.expirations.delete(c),this.events.emit(yi.deleted,{target:c,expiration:s})}},this.on=(n,c)=>{this.events.on(n,c)},this.once=(n,c)=>{this.events.once(n,c)},this.off=(n,c)=>{this.events.off(n,c)},this.removeListener=(n,c)=>{this.events.removeListener(n,c)},this.logger=Rt.generateChildLogger(t,this.name)}get context(){return Rt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return k7(e);if(typeof e=="number")return z7(e);const{message:t}=Le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=Le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;ft.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(yi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(sa.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(yi.created,e=>{const t=yi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(yi.expired,e=>{const t=yi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(yi.deleted,e=>{const t=yi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}}let XS=class extends C9{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=nv,this.initialized=!1,this.init=async n=>{!Qh()||!document||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||sv,await this.createIframe())},this.register=async n=>{var c;this.initialized||await this.init(),this.iframe&&((c=this.iframe.contentWindow)==null||c.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`))},this.resolve=async n=>{var c;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const s=this.startAbortTimer(ft.FIVE_SECONDS),m=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),((c=await m.json())==null?void 0:c.origin)||""},this.createIframe=async()=>{try{const n=this.startAbortTimer(ft.FIVE_SECONDS);await Promise.race([new Promise((c,s)=>{const m=document.createElement("iframe");m.setAttribute("id",nv),m.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),m.style.display="none",m.addEventListener("load",()=>{this.initialized=!0,clearTimeout(n),c()}),m.addEventListener("error",v=>{s(v)}),document.body.append(m),this.iframe=m}),new Promise(c=>{this.abortController.signal.addEventListener("abort",()=>{c("iframe load timeout")})})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Rt.generateChildLogger(t,this.name),this.verifyUrl=sv,this.abortController=new AbortController,this.isDevEnv=Xh()&&{}.IS_VITEST}get context(){return Rt.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),Oi(e))}};var QS=Object.defineProperty,dv=Object.getOwnPropertySymbols,ex=Object.prototype.hasOwnProperty,tx=Object.prototype.propertyIsEnumerable,pv=(a,e,t)=>e in a?QS(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,vv=(a,e)=>{for(var t in e||(e={}))ex.call(e,t)&&pv(a,t,e[t]);if(dv)for(var t of dv(e))tx.call(e,t)&&pv(a,t,e[t]);return a};let rx=class pb extends M9{constructor(e){super(e),this.protocol=hb,this.version=nS,this.name=r0,this.events=new ni.EventEmitter,this.initialized=!1,this.on=(n,c)=>this.events.on(n,c),this.once=(n,c)=>this.events.once(n,c),this.off=(n,c)=>this.events.off(n,c),this.removeListener=(n,c)=>this.events.removeListener(n,c),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||db;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Rt.pino(Rt.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||sS.logger}));this.logger=Rt.generateChildLogger(t,this.name),this.heartbeat=new sa.HeartBeat,this.crypto=new CS(this,this.logger,e==null?void 0:e.keychain),this.history=new JS(this,this.logger),this.expirer=new ZS(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new d9(vv(vv({},aS),e==null?void 0:e.storageOptions)),this.relayer=new KS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new YS(this,this.logger),this.verify=new XS(this.projectId||"",this.logger)}static async init(e){const t=new pb(e);return await t.initialize(),t}get context(){return Rt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const ix=rx,vb="wc",gb=2,bb="client",i0=`${vb}@${gb}:${bb}:`,Vu={name:bb,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},nx="proposal",mb="Proposal expired",sx="session",yo=ft.SEVEN_DAYS,ax="engine",Vs={wc_sessionPropose:{req:{ttl:ft.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ft.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ft.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ft.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ft.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ft.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ft.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ft.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ft.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ft.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ft.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ft.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ft.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ft.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ft.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ft.THIRTY_SECONDS,prompt:!1,tag:1115}}},Gu={min:ft.FIVE_MINUTES,max:ft.SEVEN_DAYS},ox="request",fx=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var cx=Object.defineProperty,ux=Object.defineProperties,hx=Object.getOwnPropertyDescriptors,gv=Object.getOwnPropertySymbols,lx=Object.prototype.hasOwnProperty,dx=Object.prototype.propertyIsEnumerable,bv=(a,e,t)=>e in a?cx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,mi=(a,e)=>{for(var t in e||(e={}))lx.call(e,t)&&bv(a,t,e[t]);if(gv)for(var t of gv(e))dx.call(e,t)&&bv(a,t,e[t]);return a},Wu=(a,e)=>ux(a,hx(e));class px extends T9{constructor(e){super(e),this.name=ax,this.events=new yh,this.initialized=!1,this.ignoredPayloadTypes=[Fn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Vs)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const n=Wu(mi({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:c,requiredNamespaces:s,optionalNamespaces:m,sessionProperties:v,relays:d}=n;let p=c,u,_=!1;if(p&&(_=this.client.core.pairing.pairings.get(p).active),!p||!_){const{topic:N,uri:q}=await this.client.core.pairing.create();p=N,u=q}const w=await this.client.core.crypto.generateKeyPair(),M=mi({requiredNamespaces:s,optionalNamespaces:m,relays:d??[{protocol:lb}],proposer:{publicKey:w,metadata:this.client.metadata}},v&&{sessionProperties:v}),{reject:A,resolve:R,done:B}=cs(ft.FIVE_MINUTES,mb);if(this.events.once(ar("session_connect"),async({error:N,session:q})=>{if(N)A(N);else if(q){q.self.publicKey=w;const k=Wu(mi({},q),{requiredNamespaces:q.requiredNamespaces,optionalNamespaces:q.optionalNamespaces});await this.client.session.set(q.topic,k),await this.setExpiry(q.topic,q.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:q.peer.metadata}),R(k)}}),!p){const{message:N}=Le("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(N)}const z=await this.sendRequest(p,"wc_sessionPropose",M),P=Oi(ft.FIVE_MINUTES);return await this.setProposal(z,mi({id:z,expiry:P},M)),{uri:u,approval:B}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:c,namespaces:s,sessionProperties:m}=t,v=this.client.proposal.get(n);let{pairingTopic:d,proposer:p,requiredNamespaces:u,optionalNamespaces:_}=v;d=d||"",Js(u)||(u=rE(s,"approve()"));const w=await this.client.core.crypto.generateKeyPair(),M=p.publicKey,A=await this.client.core.crypto.generateSharedKey(w,M);d&&n&&(await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.sendResult(n,d,{relay:{protocol:c??"irn"},responderPublicKey:w}),await this.client.proposal.delete(n,vr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}));const R=mi({relay:{protocol:c??"irn"},namespaces:s,requiredNamespaces:u,optionalNamespaces:_,pairingTopic:d,controller:{publicKey:w,metadata:this.client.metadata},expiry:Oi(yo)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe(A),await this.sendRequest(A,"wc_sessionSettle",R);const B=Wu(mi({},R),{topic:A,pairingTopic:d,acknowledged:!1,self:R.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:w});return await this.client.session.set(A,B),await this.setExpiry(A,Oi(yo)),{topic:A,acknowledged:()=>new Promise(z=>z(this.client.session.get(A)))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:n,reason:c}=t,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,c),await this.client.proposal.delete(n,vr("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:c}=t,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:c}),{done:m,resolve:v,reject:d}=cs();return this.events.once(ar("session_update",s),({error:p})=>{p?d(p):v()}),await this.client.session.update(n,{namespaces:c}),{acknowledged:m}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,c=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:m,reject:v}=cs();return this.events.once(ar("session_extend",c),({error:d})=>{d?v(d):m()}),await this.setExpiry(n,Oi(yo)),{acknowledged:s}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:c,topic:s,expiry:m}=t,v=await this.sendRequest(s,"wc_sessionRequest",{request:c,chainId:n},m),{done:d,resolve:p,reject:u}=cs(m);return this.events.once(ar("session_request",v),({error:_,result:w})=>{_?u(_):p(w)}),this.client.events.emit("session_request_sent",{topic:s,request:c,chainId:n,id:v}),await d()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:c}=t,{id:s}=c;Wi(c)?await this.sendResult(s,n,c.result):Ii(c)&&await this.sendError(s,n,c.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const c=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:m,reject:v}=cs();this.events.once(ar("session_ping",c),({error:d})=>{d?v(d):m()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:c,chainId:s}=t;await this.sendRequest(n,"wc_sessionEvent",{event:c,chainId:s})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",vr("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>sE(n,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(t,n)=>{const{self:c}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),await Promise.all([this.client.session.delete(t,vr("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.deleteSymKey(t),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,vr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),c?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=Vs.wc_sessionRequest.req.ttl,{id:c,topic:s,params:m}=t;await this.client.pendingRequest.set(c,{id:c,topic:s,params:m}),n&&this.client.core.expirer.set(c,Oi(n))},this.sendRequest=async(t,n,c,s)=>{const m=No(n,c);if(Qh()&&fx.includes(n)){const p=Nn(JSON.stringify(m));await this.client.core.verify.register({attestationId:p})}const v=await this.client.core.crypto.encode(t,m),d=Vs[n].req;return s&&(d.ttl=s),this.client.core.history.set(t,m),this.client.core.relayer.publish(t,v,d),m.id},this.sendResult=async(t,n,c)=>{const s=Sh(t,c),m=await this.client.core.crypto.encode(n,s),v=await this.client.core.history.get(n,t),d=Vs[v.request.method].res;this.client.core.relayer.publish(n,m,d),await this.client.core.history.resolve(s)},this.sendError=async(t,n,c)=>{const s=Bo(t,c),m=await this.client.core.crypto.encode(n,s),v=await this.client.core.history.get(n,t),d=Vs[v.request.method].res;this.client.core.relayer.publish(n,m,d),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(c=>{fn(c.expiry)&&t.push(c.topic)}),this.client.proposal.getAll().forEach(c=>{fn(c.expiry)&&n.push(c.id)}),await Promise.all([...t.map(c=>this.deleteSession(c)),...n.map(c=>this.deleteProposal(c))])},this.onRelayEventRequest=t=>{const{topic:n,payload:c}=t,s=c.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,c);case"wc_sessionSettle":return this.onSessionSettleRequest(n,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,c);case"wc_sessionExtend":return this.onSessionExtendRequest(n,c);case"wc_sessionPing":return this.onSessionPingRequest(n,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,c);case"wc_sessionRequest":return this.onSessionRequest(n,c);case"wc_sessionEvent":return this.onSessionEventRequest(n,c);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:c}=t,s=(await this.client.core.history.get(n,c.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,c);case"wc_sessionSettle":return this.onSessionSettleResponse(n,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,c);case"wc_sessionExtend":return this.onSessionExtendResponse(n,c);case"wc_sessionPing":return this.onSessionPingResponse(n,c);case"wc_sessionRequest":return this.onSessionRequestResponse(n,c);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(t,n)=>{const{params:c,id:s}=n;try{this.isValidConnect(mi({},n.params));const m=Oi(ft.FIVE_MINUTES),v=mi({id:s,pairingTopic:t,expiry:m},c);await this.setProposal(s,v);const d=Nn(JSON.stringify(n)),p=await this.getVerifyContext(d,v.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:v,context:p})}catch(m){await this.sendError(s,t,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(t,n)=>{const{id:c}=n;if(Wi(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const m=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const v=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});const d=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(v,d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const u=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:t})}else Ii(n)&&(await this.client.proposal.delete(c,vr("USER_DISCONNECTED")),this.events.emit(ar("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:c,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:m,controller:v,expiry:d,namespaces:p,requiredNamespaces:u,optionalNamespaces:_,sessionProperties:w,pairingTopic:M}=n.params,A=mi({topic:t,relay:m,expiry:d,namespaces:p,acknowledged:!0,pairingTopic:M,requiredNamespaces:u,optionalNamespaces:_,controller:v.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:v.publicKey,metadata:v.metadata}},w&&{sessionProperties:w});await this.sendResult(n.id,t,!0),this.events.emit(ar("session_connect"),{session:A})}catch(m){await this.sendError(c,t,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(t,n)=>{const{id:c}=n;Wi(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(ar("session_approve",c),{})):Ii(n)&&(await this.client.session.delete(t,vr("USER_DISCONNECTED")),this.events.emit(ar("session_approve",c),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:c,id:s}=n;try{this.isValidUpdate(mi({topic:t},c)),await this.client.session.update(t,{namespaces:c.namespaces}),await this.sendResult(s,t,!0),this.client.events.emit("session_update",{id:s,topic:t,params:c})}catch(m){await this.sendError(s,t,m),this.client.logger.error(m)}},this.onSessionUpdateResponse=(t,n)=>{const{id:c}=n;Wi(n)?this.events.emit(ar("session_update",c),{}):Ii(n)&&this.events.emit(ar("session_update",c),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:c}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Oi(yo)),await this.sendResult(c,t,!0),this.client.events.emit("session_extend",{id:c,topic:t})}catch(s){await this.sendError(c,t,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(t,n)=>{const{id:c}=n;Wi(n)?this.events.emit(ar("session_extend",c),{}):Ii(n)&&this.events.emit(ar("session_extend",c),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:c}=n;try{this.isValidPing({topic:t}),await this.sendResult(c,t,!0),this.client.events.emit("session_ping",{id:c,topic:t})}catch(s){await this.sendError(c,t,s),this.client.logger.error(s)}},this.onSessionPingResponse=(t,n)=>{const{id:c}=n;setTimeout(()=>{Wi(n)?this.events.emit(ar("session_ping",c),{}):Ii(n)&&this.events.emit(ar("session_ping",c),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:c}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(pr.publish,async()=>{s(await this.deleteSession(t))})}),this.sendResult(c,t,!0)]),this.client.events.emit("session_delete",{id:c,topic:t})}catch(s){await this.sendError(c,t,s),this.client.logger.error(s)}},this.onSessionRequest=async(t,n)=>{const{id:c,params:s}=n;try{this.isValidRequest(mi({topic:t},s)),await this.setPendingSessionRequest({id:c,topic:t,params:s});const m=Nn(JSON.stringify(n)),v=this.client.session.get(t),d=await this.getVerifyContext(m,v.peer.metadata);this.client.events.emit("session_request",{id:c,topic:t,params:s,context:d})}catch(m){await this.sendError(c,t,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(t,n)=>{const{id:c}=n;Wi(n)?this.events.emit(ar("session_request",c),{result:n.result}):Ii(n)&&this.events.emit(ar("session_request",c),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:c,params:s}=n;try{this.isValidEmit(mi({topic:t},s)),this.client.events.emit("session_event",{id:c,topic:t,params:s})}catch(m){await this.sendError(c,t,m),this.client.logger.error(m)}},this.isValidConnect=async t=>{if(!Wr(t)){const{message:d}=Le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(d)}const{pairingTopic:n,requiredNamespaces:c,optionalNamespaces:s,sessionProperties:m,relays:v}=t;if(jr(n)||await this.isValidPairingTopic(n),!bE(v,!0)){const{message:d}=Le("MISSING_OR_INVALID",`connect() relays: ${v}`);throw new Error(d)}!jr(c)&&Js(c)!==0&&this.validateNamespaces(c,"requiredNamespaces"),!jr(s)&&Js(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),jr(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(t,n)=>{const c=gE(t,"connect()",n);if(c)throw new Error(c.message)},this.isValidApprove=async t=>{if(!Wr(t))throw new Error(Le("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:c,relayProtocol:s,sessionProperties:m}=t;await this.isValidProposalId(n);const v=this.client.proposal.get(n),d=Do(c,"approve()");if(d)throw new Error(d.message);const p=Wp(v.requiredNamespaces,c,"approve()");if(p)throw new Error(p.message);if(!gr(s,!0)){const{message:u}=Le("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(u)}jr(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async t=>{if(!Wr(t)){const{message:s}=Le("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:n,reason:c}=t;if(await this.isValidProposalId(n),!yE(c)){const{message:s}=Le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw new Error(s)}},this.isValidSessionSettleRequest=t=>{if(!Wr(t)){const{message:p}=Le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:n,controller:c,namespaces:s,expiry:m}=t;if(!eb(n)){const{message:p}=Le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const v=uE(c,"onSessionSettleRequest()");if(v)throw new Error(v.message);const d=Do(s,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(fn(m)){const{message:p}=Le("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!Wr(t)){const{message:d}=Le("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(d)}const{topic:n,namespaces:c}=t;await this.isValidSessionTopic(n);const s=this.client.session.get(n),m=Do(c,"update()");if(m)throw new Error(m.message);const v=Wp(s.requiredNamespaces,c,"update()");if(v)throw new Error(v.message)},this.isValidExtend=async t=>{if(!Wr(t)){const{message:c}=Le("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(c)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!Wr(t)){const{message:d}=Le("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(d)}const{topic:n,request:c,chainId:s,expiry:m}=t;await this.isValidSessionTopic(n);const{namespaces:v}=this.client.session.get(n);if(!Gp(v,s)){const{message:d}=Le("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(d)}if(!_E(c)){const{message:d}=Le("MISSING_OR_INVALID",`request() ${JSON.stringify(c)}`);throw new Error(d)}if(!ME(v,s,c.method)){const{message:d}=Le("MISSING_OR_INVALID",`request() method: ${c.method}`);throw new Error(d)}if(m&&!AE(m,Gu)){const{message:d}=Le("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${Gu.min} and ${Gu.max}`);throw new Error(d)}},this.isValidRespond=async t=>{if(!Wr(t)){const{message:s}=Le("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(s)}const{topic:n,response:c}=t;if(await this.isValidSessionTopic(n),!wE(c)){const{message:s}=Le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(s)}},this.isValidPing=async t=>{if(!Wr(t)){const{message:c}=Le("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(c)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!Wr(t)){const{message:v}=Le("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(v)}const{topic:n,event:c,chainId:s}=t;await this.isValidSessionTopic(n);const{namespaces:m}=this.client.session.get(n);if(!Gp(m,s)){const{message:v}=Le("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(v)}if(!EE(c)){const{message:v}=Le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw new Error(v)}if(!SE(m,s,c.name)){const{message:v}=Le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw new Error(v)}},this.isValidDisconnect=async t=>{if(!Wr(t)){const{message:c}=Le("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(c)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const c={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});c.verified.origin=s,c.verified.validation=s===n.url?"VALID":"INVALID"}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(c=>{if(!gr(c,!1)){const{message:s}=Le("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(c)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=Le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(pr.message,async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const c=await this.client.core.crypto.decode(t,n);xh(c)?(this.client.core.history.set(t,c),this.onRelayEventRequest({topic:t,payload:c})):Dh(c)&&(await this.client.core.history.resolve(c),this.onRelayEventResponse({topic:t,payload:c}))})}registerExpirerEvents(){this.client.core.expirer.on(yi.expired,async e=>{const{topic:t,id:n}=Xg(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Le("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!gr(e,!1)){const{message:t}=Le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(fn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Le("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!gr(e,!1)){const{message:t}=Le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=Le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(fn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=Le("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(gr(e,!1)){const{message:t}=Le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!mE(e)){const{message:t}=Le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(fn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=Le("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class vx extends Jo{constructor(e,t){super(e,t,nx,i0),this.core=e,this.logger=t}}class gx extends Jo{constructor(e,t){super(e,t,sx,i0),this.core=e,this.logger=t}}class bx extends Jo{constructor(e,t){super(e,t,ox,i0,n=>n.id),this.core=e,this.logger=t}}let mx=class yb extends R9{constructor(e){super(e),this.protocol=vb,this.version=gb,this.name=Vu.name,this.events=new ni.EventEmitter,this.on=(n,c)=>this.events.on(n,c),this.once=(n,c)=>this.events.once(n,c),this.off=(n,c)=>this.events.off(n,c),this.removeListener=(n,c)=>this.events.removeListener(n,c),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(c){throw this.logger.error(c.message),c}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(c){throw this.logger.error(c.message),c}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(c){throw this.logger.error(c.message),c}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(c){throw this.logger.error(c.message),c}},this.update=async n=>{try{return await this.engine.update(n)}catch(c){throw this.logger.error(c.message),c}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(c){throw this.logger.error(c.message),c}},this.request=async n=>{try{return await this.engine.request(n)}catch(c){throw this.logger.error(c.message),c}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(c){throw this.logger.error(c.message),c}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(c){throw this.logger.error(c.message),c}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(c){throw this.logger.error(c.message),c}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(c){throw this.logger.error(c.message),c}},this.find=n=>{try{return this.engine.find(n)}catch(c){throw this.logger.error(c.message),c}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Vu.name,this.metadata=(e==null?void 0:e.metadata)||q7();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Rt.pino(Rt.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Vu.logger}));this.core=(e==null?void 0:e.core)||new ix(e),this.logger=Rt.generateChildLogger(t,this.name),this.session=new gx(this.core,this.logger),this.proposal=new vx(this.core,this.logger),this.pendingRequest=new bx(this.core,this.logger),this.engine=new px(this)}static async init(e){const t=new yb(e);return await t.initialize(),t}get context(){return Rt.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=Gt.getLocation=Gt.getLocationOrThrow=Gt.getNavigator=Gt.getNavigatorOrThrow=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function jn(a){let e;return typeof window<"u"&&typeof window[a]<"u"&&(e=window[a]),e}Gt.getFromWindow=jn;function vs(a){const e=jn(a);if(!e)throw new Error(`${a} is not defined in Window`);return e}Gt.getFromWindowOrThrow=vs;function yx(){return vs("document")}Gt.getDocumentOrThrow=yx;function _x(){return jn("document")}Gt.getDocument=_x;function wx(){return vs("navigator")}Gt.getNavigatorOrThrow=wx;function Ex(){return jn("navigator")}Gt.getNavigator=Ex;function Mx(){return vs("location")}Gt.getLocationOrThrow=Mx;function Sx(){return jn("location")}Gt.getLocation=Sx;function xx(){return vs("crypto")}Gt.getCryptoOrThrow=xx;function Dx(){return jn("crypto")}Gt.getCrypto=Dx;function Ax(){return vs("localStorage")}Gt.getLocalStorageOrThrow=Ax;function Ix(){return jn("localStorage")}Gt.getLocalStorage=Ix;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.getWindowMetadata=void 0;const mv=Gt;function Ox(){let a,e;try{a=mv.getDocumentOrThrow(),e=mv.getLocationOrThrow()}catch{return null}function t(){const _=a.getElementsByTagName("link"),w=[];for(let M=0;M<_.length;M++){const A=_[M],R=A.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const B=A.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let z=e.protocol+"//"+e.host;if(B.indexOf("/")===0)z+=B;else{const P=e.pathname.split("/");P.pop();const N=P.join("/");z+=N+"/"+B}w.push(z)}else if(B.indexOf("//")===0){const z=e.protocol+B;w.push(z)}else w.push(B)}}return w}function n(..._){const w=a.getElementsByTagName("meta");for(let M=0;M<w.length;M++){const A=w[M],R=["itemprop","property","name"].map(B=>A.getAttribute(B)).filter(B=>B?_.includes(B):!1);if(R.length&&R){const B=A.getAttribute("content");if(B)return B}}return""}function c(){let _=n("name","og:site_name","og:title","twitter:title");return _||(_=a.title),_}function s(){return n("description","og:description","twitter:description","keywords")}const m=c(),v=s(),d=e.origin,p=t();return{description:v,url:d,icons:p,name:m}}n0.getWindowMetadata=Ox;var Px={};(function(a){const e=Eh,t=Mh,n=wh,c=Kh,s=P=>P==null,m=Symbol("encodeFragmentIdentifier");function v(P){switch(P.arrayFormat){case"index":return N=>(q,k)=>{const F=q.length;return k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[",F,"]"].join("")]:[...q,[u(N,P),"[",u(F,P),"]=",u(k,P)].join("")]};case"bracket":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),"[]"].join("")]:[...q,[u(N,P),"[]=",u(k,P)].join("")];case"colon-list-separator":return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,[u(N,P),":list="].join("")]:[...q,[u(N,P),":list=",u(k,P)].join("")];case"comma":case"separator":case"bracket-separator":{const N=P.arrayFormat==="bracket-separator"?"[]=":"=";return q=>(k,F)=>F===void 0||P.skipNull&&F===null||P.skipEmptyString&&F===""?k:(F=F===null?"":F,k.length===0?[[u(q,P),N,u(F,P)].join("")]:[[k,u(F,P)].join(P.arrayFormatSeparator)])}default:return N=>(q,k)=>k===void 0||P.skipNull&&k===null||P.skipEmptyString&&k===""?q:k===null?[...q,u(N,P)]:[...q,[u(N,P),"=",u(k,P)].join("")]}}function d(P){let N;switch(P.arrayFormat){case"index":return(q,k,F)=>{if(N=/\[(\d*)\]$/.exec(q),q=q.replace(/\[\d*\]$/,""),!N){F[q]=k;return}F[q]===void 0&&(F[q]={}),F[q][N[1]]=k};case"bracket":return(q,k,F)=>{if(N=/(\[\])$/.exec(q),q=q.replace(/\[\]$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"colon-list-separator":return(q,k,F)=>{if(N=/(:list)$/.exec(q),q=q.replace(/:list$/,""),!N){F[q]=k;return}if(F[q]===void 0){F[q]=[k];return}F[q]=[].concat(F[q],k)};case"comma":case"separator":return(q,k,F)=>{const O=typeof k=="string"&&k.includes(P.arrayFormatSeparator),j=typeof k=="string"&&!O&&_(k,P).includes(P.arrayFormatSeparator);k=j?_(k,P):k;const J=O||j?k.split(P.arrayFormatSeparator).map(L=>_(L,P)):k===null?k:_(k,P);F[q]=J};case"bracket-separator":return(q,k,F)=>{const O=/(\[\])$/.test(q);if(q=q.replace(/\[\]$/,""),!O){F[q]=k&&_(k,P);return}const j=k===null?[]:k.split(P.arrayFormatSeparator).map(J=>_(J,P));if(F[q]===void 0){F[q]=j;return}F[q]=[].concat(F[q],j)};default:return(q,k,F)=>{if(F[q]===void 0){F[q]=k;return}F[q]=[].concat(F[q],k)}}}function p(P){if(typeof P!="string"||P.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(P,N){return N.encode?N.strict?e(P):encodeURIComponent(P):P}function _(P,N){return N.decode?t(P):P}function w(P){return Array.isArray(P)?P.sort():typeof P=="object"?w(Object.keys(P)).sort((N,q)=>Number(N)-Number(q)).map(N=>P[N]):P}function M(P){const N=P.indexOf("#");return N!==-1&&(P=P.slice(0,N)),P}function A(P){let N="";const q=P.indexOf("#");return q!==-1&&(N=P.slice(q)),N}function R(P){P=M(P);const N=P.indexOf("?");return N===-1?"":P.slice(N+1)}function B(P,N){return N.parseNumbers&&!Number.isNaN(Number(P))&&typeof P=="string"&&P.trim()!==""?P=Number(P):N.parseBooleans&&P!==null&&(P.toLowerCase()==="true"||P.toLowerCase()==="false")&&(P=P.toLowerCase()==="true"),P}function z(P,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),p(N.arrayFormatSeparator);const q=d(N),k=Object.create(null);if(typeof P!="string"||(P=P.trim().replace(/^[?#&]/,""),!P))return k;for(const F of P.split("&")){if(F==="")continue;let[O,j]=n(N.decode?F.replace(/\+/g," "):F,"=");j=j===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?j:_(j,N),q(_(O,N),j,k)}for(const F of Object.keys(k)){const O=k[F];if(typeof O=="object"&&O!==null)for(const j of Object.keys(O))O[j]=B(O[j],N);else k[F]=B(O,N)}return N.sort===!1?k:(N.sort===!0?Object.keys(k).sort():Object.keys(k).sort(N.sort)).reduce((F,O)=>{const j=k[O];return j&&typeof j=="object"&&!Array.isArray(j)?F[O]=w(j):F[O]=j,F},Object.create(null))}a.extract=R,a.parse=z,a.stringify=(P,N)=>{if(!P)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),p(N.arrayFormatSeparator);const q=j=>N.skipNull&&s(P[j])||N.skipEmptyString&&P[j]==="",k=v(N),F={};for(const j of Object.keys(P))q(j)||(F[j]=P[j]);const O=Object.keys(F);return N.sort!==!1&&O.sort(N.sort),O.map(j=>{const J=P[j];return J===void 0?"":J===null?u(j,N):Array.isArray(J)?J.length===0&&N.arrayFormat==="bracket-separator"?u(j,N)+"[]":J.reduce(k(j),[]).join("&"):u(j,N)+"="+u(J,N)}).filter(j=>j.length>0).join("&")},a.parseUrl=(P,N)=>{N=Object.assign({decode:!0},N);const[q,k]=n(P,"#");return Object.assign({url:q.split("?")[0]||"",query:z(R(P),N)},N&&N.parseFragmentIdentifier&&k?{fragmentIdentifier:_(k,N)}:{})},a.stringifyUrl=(P,N)=>{N=Object.assign({encode:!0,strict:!0,[m]:!0},N);const q=M(P.url).split("?")[0]||"",k=a.extract(P.url),F=a.parse(k,{sort:!1}),O=Object.assign(F,P.query);let j=a.stringify(O,N);j&&(j=`?${j}`);let J=A(P.url);return P.fragmentIdentifier&&(J=`#${N[m]?u(P.fragmentIdentifier,N):P.fragmentIdentifier}`),`${q}${j}${J}`},a.pick=(P,N,q)=>{q=Object.assign({parseFragmentIdentifier:!0,[m]:!1},q);const{url:k,query:F,fragmentIdentifier:O}=a.parseUrl(P,q);return a.stringifyUrl({url:k,query:c(F,N),fragmentIdentifier:O},q)},a.exclude=(P,N,q)=>{const k=Array.isArray(N)?F=>!N.includes(F):(F,O)=>!N(F,O);return a.pick(P,k,q)}})(Px);function Yu(a=[],e=[]){return[...new Set([...a,...e])]}function _b(a){return a.includes(":")}function Ao(a){return _b(a)?a.split(":")[0]:a}const Cx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function yv(a,e){const{message:t,code:n}=Cx[a];return{message:e?`${t} ${e}`:t,code:n}}function Rx(a,e){return Array.isArray(a)?typeof e<"u"&&a.length?a.every(e):!0:!1}function Tx(a){return Object.getPrototypeOf(a)===Object.prototype&&Object.keys(a).length}const Nx={Accept:"application/json","Content-Type":"application/json"},Bx="POST",_v={headers:Nx,method:Bx},wv=10;class $n{constructor(e){if(this.url=e,this.events=new ni.EventEmitter,this.isAvailable=!1,this.registering=!1,!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const n=Xs(e),s=await(await ad(this.url,Object.assign(Object.assign({},_v),{body:n}))).json();this.onPayload({data:s})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!od(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,c)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),c(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return c(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{const t=Xs({id:1,jsonrpc:"2.0",method:"test",params:[]});await ad(e,Object.assign(Object.assign({},_v),{body:t})),this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Vh(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),c=n.message||n.toString(),s=Bo(e,c);this.events.emit("payload",s)}parseError(e,t=this.url){return Tv(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>wv&&this.events.setMaxListeners(wv)}}const Ev="error",Ux="wss://relay.walletconnect.com",qx="wc",Lx="universal_provider",Mv=`${qx}@2:${Lx}:`,Fx="https://rpc.walletconnect.com/v1",dn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ys<"u"?Ys:typeof self<"u"?self:{},lh={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(a,e){(function(){var t,n="4.17.21",c=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",v="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,u="__lodash_placeholder__",_=1,w=2,M=4,A=1,R=2,B=1,z=2,P=4,N=8,q=16,k=32,F=64,O=128,j=256,J=512,L=30,C="...",g=800,h=16,r=1,o=2,b=3,D=1/0,I=9007199254740991,x=17976931348623157e292,y=0/0,S=4294967295,l=S-1,T=S>>>1,te=[["ary",O],["bind",B],["bindKey",z],["curry",N],["curryRight",q],["flip",J],["partial",k],["partialRight",F],["rearg",j]],ee="[object Arguments]",ae="[object Array]",Q="[object AsyncFunction]",X="[object Boolean]",Y="[object Date]",$="[object DOMException]",W="[object Error]",oe="[object Function]",ye="[object GeneratorFunction]",we="[object Map]",me="[object Number]",Ze="[object Null]",De="[object Object]",Ee="[object Promise]",nt="[object Proxy]",Ae="[object RegExp]",de="[object Set]",ze="[object String]",Me="[object Symbol]",ge="[object Undefined]",Fe="[object WeakMap]",Se="[object WeakSet]",le="[object ArrayBuffer]",je="[object DataView]",Pe="[object Float32Array]",pe="[object Float64Array]",Xe="[object Int8Array]",Te="[object Int16Array]",_e="[object Int32Array]",Qe="[object Uint8Array]",Ne="[object Uint8ClampedArray]",Be="[object Uint16Array]",wt="[object Uint32Array]",rt=/\b__p \+= '';/g,Ue=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,it=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,ct=RegExp(it.source),He=RegExp(ke.source),Ie=/<%-([\s\S]+?)%>/g,ut=/<%([\s\S]+?)%>/g,Ke=/<%=([\s\S]+?)%>/g,xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,Je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,vt=RegExp(Oe.source),Ge=/^\s+/,Ce=/\s/,ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,Ye=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tt=/\w*$/,lt=/^[-+]0x[0-9a-f]+$/i,xr=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Ir=/^(?:0|[1-9]\d*)$/,er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cr=/($^)/,Or=/['\n\r\u2028\u2029\\]/g,ur="\\ud800-\\udfff",Pr="\\u0300-\\u036f",Cr="\\ufe20-\\ufe2f",hr="\\u20d0-\\u20ff",_r=Pr+Cr+hr,wr="\\u2700-\\u27bf",Zt="a-z\\xdf-\\xf6\\xf8-\\xff",Rr="\\xac\\xb1\\xd7\\xf7",Tr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nr="\\u2000-\\u206f",Ei=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ai="A-Z\\xc0-\\xd6\\xd8-\\xde",ca="\\ufe0e\\ufe0f",pn=Rr+Tr+Nr+Ei,gs="['’]",vn="["+ur+"]",bs="["+pn+"]",gn="["+_r+"]",ua="\\d+",Zo="["+wr+"]",ha="["+Zt+"]",la="[^"+ur+pn+ua+wr+Zt+ai+"]",zn="\\ud83c[\\udffb-\\udfff]",Xo="(?:"+gn+"|"+zn+")",da="[^"+ur+"]",Hn="(?:\\ud83c[\\udde6-\\uddff]){2}",Zi="[\\ud800-\\udbff][\\udc00-\\udfff]",Jr="["+ai+"]",pa="\\u200d",va="(?:"+ha+"|"+la+")",Pi="(?:"+Jr+"|"+la+")",ga="(?:"+gs+"(?:d|ll|m|re|s|t|ve))?",ba="(?:"+gs+"(?:D|LL|M|RE|S|T|VE))?",ma=Xo+"?",ya="["+ca+"]?",Qo="(?:"+pa+"(?:"+[da,Hn,Zi].join("|")+")"+ya+ma+")*",Li="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_a="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wa=ya+ma+Qo,Kn="(?:"+[Zo,Hn,Zi].join("|")+")"+wa,ef="(?:"+[da+gn+"?",gn,Hn,Zi,vn].join("|")+")",ms=RegExp(gs,"g"),tf=RegExp(gn,"g"),Vn=RegExp(zn+"(?="+zn+")|"+ef+wa,"g"),Ea=RegExp([Jr+"?"+ha+"+"+ga+"(?="+[bs,Jr,"$"].join("|")+")",Pi+"+"+ba+"(?="+[bs,Jr+va,"$"].join("|")+")",Jr+"?"+va+"+"+ga,Jr+"+"+ba,_a,Li,ua,Kn].join("|"),"g"),Ma=RegExp("["+pa+ur+_r+ca+"]"),bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rf=-1,jt={};jt[Pe]=jt[pe]=jt[Xe]=jt[Te]=jt[_e]=jt[Qe]=jt[Ne]=jt[Be]=jt[wt]=!0,jt[ee]=jt[ae]=jt[le]=jt[X]=jt[je]=jt[Y]=jt[W]=jt[oe]=jt[we]=jt[me]=jt[De]=jt[Ae]=jt[de]=jt[ze]=jt[Fe]=!1;var Ft={};Ft[ee]=Ft[ae]=Ft[le]=Ft[je]=Ft[X]=Ft[Y]=Ft[Pe]=Ft[pe]=Ft[Xe]=Ft[Te]=Ft[_e]=Ft[we]=Ft[me]=Ft[De]=Ft[Ae]=Ft[de]=Ft[ze]=Ft[Me]=Ft[Qe]=Ft[Ne]=Ft[Be]=Ft[wt]=!0,Ft[W]=Ft[oe]=Ft[Fe]=!1;var G={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ve={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=parseFloat,mt=parseInt,Wt=typeof Gs=="object"&&Gs&&Gs.Object===Object&&Gs,nr=typeof self=="object"&&self&&self.Object===Object&&self,Pt=Wt||nr||Function("return this")(),kt=e&&!e.nodeType&&e,tr=kt&&!0&&a&&!a.nodeType&&a,zr=tr&&tr.exports===kt,sr=zr&&Wt.process,Yt=function(){try{var ne=tr&&tr.require&&tr.require("util").types;return ne||sr&&sr.binding&&sr.binding("util")}catch{}}(),Br=Yt&&Yt.isArrayBuffer,Mi=Yt&&Yt.isDate,oi=Yt&&Yt.isMap,Ci=Yt&&Yt.isRegExp,ys=Yt&&Yt.isSet,mn=Yt&&Yt.isTypedArray;function lr(ne,ce,fe){switch(fe.length){case 0:return ne.call(ce);case 1:return ne.call(ce,fe[0]);case 2:return ne.call(ce,fe[0],fe[1]);case 3:return ne.call(ce,fe[0],fe[1],fe[2])}return ne.apply(ce,fe)}function wb(ne,ce,fe,We){for(var bt=-1,Nt=ne==null?0:ne.length;++bt<Nt;){var or=ne[bt];ce(We,or,fe(or),ne)}return We}function fi(ne,ce){for(var fe=-1,We=ne==null?0:ne.length;++fe<We&&ce(ne[fe],fe,ne)!==!1;);return ne}function Eb(ne,ce){for(var fe=ne==null?0:ne.length;fe--&&ce(ne[fe],fe,ne)!==!1;);return ne}function o0(ne,ce){for(var fe=-1,We=ne==null?0:ne.length;++fe<We;)if(!ce(ne[fe],fe,ne))return!1;return!0}function Xi(ne,ce){for(var fe=-1,We=ne==null?0:ne.length,bt=0,Nt=[];++fe<We;){var or=ne[fe];ce(or,fe,ne)&&(Nt[bt++]=or)}return Nt}function xa(ne,ce){var fe=ne==null?0:ne.length;return!!fe&&Gn(ne,ce,0)>-1}function nf(ne,ce,fe){for(var We=-1,bt=ne==null?0:ne.length;++We<bt;)if(fe(ce,ne[We]))return!0;return!1}function Jt(ne,ce){for(var fe=-1,We=ne==null?0:ne.length,bt=Array(We);++fe<We;)bt[fe]=ce(ne[fe],fe,ne);return bt}function Qi(ne,ce){for(var fe=-1,We=ce.length,bt=ne.length;++fe<We;)ne[bt+fe]=ce[fe];return ne}function sf(ne,ce,fe,We){var bt=-1,Nt=ne==null?0:ne.length;for(We&&Nt&&(fe=ne[++bt]);++bt<Nt;)fe=ce(fe,ne[bt],bt,ne);return fe}function Mb(ne,ce,fe,We){var bt=ne==null?0:ne.length;for(We&&bt&&(fe=ne[--bt]);bt--;)fe=ce(fe,ne[bt],bt,ne);return fe}function af(ne,ce){for(var fe=-1,We=ne==null?0:ne.length;++fe<We;)if(ce(ne[fe],fe,ne))return!0;return!1}var Sb=of("length");function xb(ne){return ne.split("")}function Db(ne){return ne.match(gt)||[]}function f0(ne,ce,fe){var We;return fe(ne,function(bt,Nt,or){if(ce(bt,Nt,or))return We=Nt,!1}),We}function Da(ne,ce,fe,We){for(var bt=ne.length,Nt=fe+(We?1:-1);We?Nt--:++Nt<bt;)if(ce(ne[Nt],Nt,ne))return Nt;return-1}function Gn(ne,ce,fe){return ce===ce?Lb(ne,ce,fe):Da(ne,c0,fe)}function Ab(ne,ce,fe,We){for(var bt=fe-1,Nt=ne.length;++bt<Nt;)if(We(ne[bt],ce))return bt;return-1}function c0(ne){return ne!==ne}function u0(ne,ce){var fe=ne==null?0:ne.length;return fe?cf(ne,ce)/fe:y}function of(ne){return function(ce){return ce==null?t:ce[ne]}}function ff(ne){return function(ce){return ne==null?t:ne[ce]}}function h0(ne,ce,fe,We,bt){return bt(ne,function(Nt,or,zt){fe=We?(We=!1,Nt):ce(fe,Nt,or,zt)}),fe}function Ib(ne,ce){var fe=ne.length;for(ne.sort(ce);fe--;)ne[fe]=ne[fe].value;return ne}function cf(ne,ce){for(var fe,We=-1,bt=ne.length;++We<bt;){var Nt=ce(ne[We]);Nt!==t&&(fe=fe===t?Nt:fe+Nt)}return fe}function uf(ne,ce){for(var fe=-1,We=Array(ne);++fe<ne;)We[fe]=ce(fe);return We}function Ob(ne,ce){return Jt(ce,function(fe){return[fe,ne[fe]]})}function l0(ne){return ne&&ne.slice(0,g0(ne)+1).replace(Ge,"")}function Zr(ne){return function(ce){return ne(ce)}}function hf(ne,ce){return Jt(ce,function(fe){return ne[fe]})}function _s(ne,ce){return ne.has(ce)}function d0(ne,ce){for(var fe=-1,We=ne.length;++fe<We&&Gn(ce,ne[fe],0)>-1;);return fe}function p0(ne,ce){for(var fe=ne.length;fe--&&Gn(ce,ne[fe],0)>-1;);return fe}function Pb(ne,ce){for(var fe=ne.length,We=0;fe--;)ne[fe]===ce&&++We;return We}var Cb=ff(G),Rb=ff(ie);function Tb(ne){return"\\"+Ve[ne]}function Nb(ne,ce){return ne==null?t:ne[ce]}function Wn(ne){return Ma.test(ne)}function Bb(ne){return bn.test(ne)}function Ub(ne){for(var ce,fe=[];!(ce=ne.next()).done;)fe.push(ce.value);return fe}function lf(ne){var ce=-1,fe=Array(ne.size);return ne.forEach(function(We,bt){fe[++ce]=[bt,We]}),fe}function v0(ne,ce){return function(fe){return ne(ce(fe))}}function en(ne,ce){for(var fe=-1,We=ne.length,bt=0,Nt=[];++fe<We;){var or=ne[fe];(or===ce||or===u)&&(ne[fe]=u,Nt[bt++]=fe)}return Nt}function Aa(ne){var ce=-1,fe=Array(ne.size);return ne.forEach(function(We){fe[++ce]=We}),fe}function qb(ne){var ce=-1,fe=Array(ne.size);return ne.forEach(function(We){fe[++ce]=[We,We]}),fe}function Lb(ne,ce,fe){for(var We=fe-1,bt=ne.length;++We<bt;)if(ne[We]===ce)return We;return-1}function Fb(ne,ce,fe){for(var We=fe+1;We--;)if(ne[We]===ce)return We;return We}function Yn(ne){return Wn(ne)?$b(ne):Sb(ne)}function Si(ne){return Wn(ne)?kb(ne):xb(ne)}function g0(ne){for(var ce=ne.length;ce--&&Ce.test(ne.charAt(ce)););return ce}var jb=ff(ve);function $b(ne){for(var ce=Vn.lastIndex=0;Vn.test(ne);)++ce;return ce}function kb(ne){return ne.match(Vn)||[]}function zb(ne){return ne.match(Ea)||[]}var Hb=function ne(ce){ce=ce==null?Pt:Jn.defaults(Pt.Object(),ce,Jn.pick(Pt,Sa));var fe=ce.Array,We=ce.Date,bt=ce.Error,Nt=ce.Function,or=ce.Math,zt=ce.Object,df=ce.RegExp,Kb=ce.String,ci=ce.TypeError,Ia=fe.prototype,Vb=Nt.prototype,Zn=zt.prototype,Oa=ce["__core-js_shared__"],Pa=Vb.toString,Lt=Zn.hasOwnProperty,Gb=0,b0=function(){var i=/[^.]+$/.exec(Oa&&Oa.keys&&Oa.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Ca=Zn.toString,Wb=Pa.call(zt),Yb=Pt._,Jb=df("^"+Pa.call(Lt).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ra=zr?ce.Buffer:t,tn=ce.Symbol,Ta=ce.Uint8Array,m0=Ra?Ra.allocUnsafe:t,Na=v0(zt.getPrototypeOf,zt),y0=zt.create,_0=Zn.propertyIsEnumerable,Ba=Ia.splice,w0=tn?tn.isConcatSpreadable:t,ws=tn?tn.iterator:t,yn=tn?tn.toStringTag:t,Ua=function(){try{var i=Sn(zt,"defineProperty");return i({},"",{}),i}catch{}}(),Zb=ce.clearTimeout!==Pt.clearTimeout&&ce.clearTimeout,Xb=We&&We.now!==Pt.Date.now&&We.now,Qb=ce.setTimeout!==Pt.setTimeout&&ce.setTimeout,qa=or.ceil,La=or.floor,pf=zt.getOwnPropertySymbols,em=Ra?Ra.isBuffer:t,E0=ce.isFinite,tm=Ia.join,rm=v0(zt.keys,zt),fr=or.max,Er=or.min,im=We.now,nm=ce.parseInt,M0=or.random,sm=Ia.reverse,vf=Sn(ce,"DataView"),Es=Sn(ce,"Map"),gf=Sn(ce,"Promise"),Xn=Sn(ce,"Set"),Ms=Sn(ce,"WeakMap"),Ss=Sn(zt,"create"),Fa=Ms&&new Ms,Qn={},am=xn(vf),om=xn(Es),fm=xn(gf),cm=xn(Xn),um=xn(Ms),ja=tn?tn.prototype:t,xs=ja?ja.valueOf:t,S0=ja?ja.toString:t;function K(i){if(Qt(i)&&!yt(i)&&!(i instanceof Ot)){if(i instanceof ui)return i;if(Lt.call(i,"__wrapped__"))return xl(i)}return new ui(i)}var es=function(){function i(){}return function(f){if(!Xt(f))return{};if(y0)return y0(f);i.prototype=f;var E=new i;return i.prototype=t,E}}();function $a(){}function ui(i,f){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}K.templateSettings={escape:Ie,evaluate:ut,interpolate:Ke,variable:"",imports:{_:K}},K.prototype=$a.prototype,K.prototype.constructor=K,ui.prototype=es($a.prototype),ui.prototype.constructor=ui;function Ot(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=S,this.__views__=[]}function hm(){var i=new Ot(this.__wrapped__);return i.__actions__=Hr(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Hr(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Hr(this.__views__),i}function lm(){if(this.__filtered__){var i=new Ot(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function dm(){var i=this.__wrapped__.value(),f=this.__dir__,E=yt(i),U=f<0,H=E?i.length:0,V=xy(0,H,this.__views__),Z=V.start,re=V.end,se=re-Z,ue=U?re:Z-1,he=this.__iteratees__,be=he.length,qe=0,et=Er(se,this.__takeCount__);if(!E||!U&&H==se&&et==se)return W0(i,this.__actions__);var at=[];e:for(;se--&&qe<et;){ue+=f;for(var xt=-1,ot=i[ue];++xt<be;){var At=he[xt],Ct=At.iteratee,ei=At.type,Lr=Ct(ot);if(ei==o)ot=Lr;else if(!Lr){if(ei==r)continue e;break e}}at[qe++]=ot}return at}Ot.prototype=es($a.prototype),Ot.prototype.constructor=Ot;function _n(i){var f=-1,E=i==null?0:i.length;for(this.clear();++f<E;){var U=i[f];this.set(U[0],U[1])}}function pm(){this.__data__=Ss?Ss(null):{},this.size=0}function vm(i){var f=this.has(i)&&delete this.__data__[i];return this.size-=f?1:0,f}function gm(i){var f=this.__data__;if(Ss){var E=f[i];return E===d?t:E}return Lt.call(f,i)?f[i]:t}function bm(i){var f=this.__data__;return Ss?f[i]!==t:Lt.call(f,i)}function mm(i,f){var E=this.__data__;return this.size+=this.has(i)?0:1,E[i]=Ss&&f===t?d:f,this}_n.prototype.clear=pm,_n.prototype.delete=vm,_n.prototype.get=gm,_n.prototype.has=bm,_n.prototype.set=mm;function Fi(i){var f=-1,E=i==null?0:i.length;for(this.clear();++f<E;){var U=i[f];this.set(U[0],U[1])}}function ym(){this.__data__=[],this.size=0}function _m(i){var f=this.__data__,E=ka(f,i);if(E<0)return!1;var U=f.length-1;return E==U?f.pop():Ba.call(f,E,1),--this.size,!0}function wm(i){var f=this.__data__,E=ka(f,i);return E<0?t:f[E][1]}function Em(i){return ka(this.__data__,i)>-1}function Mm(i,f){var E=this.__data__,U=ka(E,i);return U<0?(++this.size,E.push([i,f])):E[U][1]=f,this}Fi.prototype.clear=ym,Fi.prototype.delete=_m,Fi.prototype.get=wm,Fi.prototype.has=Em,Fi.prototype.set=Mm;function ji(i){var f=-1,E=i==null?0:i.length;for(this.clear();++f<E;){var U=i[f];this.set(U[0],U[1])}}function Sm(){this.size=0,this.__data__={hash:new _n,map:new(Es||Fi),string:new _n}}function xm(i){var f=eo(this,i).delete(i);return this.size-=f?1:0,f}function Dm(i){return eo(this,i).get(i)}function Am(i){return eo(this,i).has(i)}function Im(i,f){var E=eo(this,i),U=E.size;return E.set(i,f),this.size+=E.size==U?0:1,this}ji.prototype.clear=Sm,ji.prototype.delete=xm,ji.prototype.get=Dm,ji.prototype.has=Am,ji.prototype.set=Im;function wn(i){var f=-1,E=i==null?0:i.length;for(this.__data__=new ji;++f<E;)this.add(i[f])}function Om(i){return this.__data__.set(i,d),this}function Pm(i){return this.__data__.has(i)}wn.prototype.add=wn.prototype.push=Om,wn.prototype.has=Pm;function xi(i){var f=this.__data__=new Fi(i);this.size=f.size}function Cm(){this.__data__=new Fi,this.size=0}function Rm(i){var f=this.__data__,E=f.delete(i);return this.size=f.size,E}function Tm(i){return this.__data__.get(i)}function Nm(i){return this.__data__.has(i)}function Bm(i,f){var E=this.__data__;if(E instanceof Fi){var U=E.__data__;if(!Es||U.length<c-1)return U.push([i,f]),this.size=++E.size,this;E=this.__data__=new ji(U)}return E.set(i,f),this.size=E.size,this}xi.prototype.clear=Cm,xi.prototype.delete=Rm,xi.prototype.get=Tm,xi.prototype.has=Nm,xi.prototype.set=Bm;function x0(i,f){var E=yt(i),U=!E&&Dn(i),H=!E&&!U&&on(i),V=!E&&!U&&!H&&ns(i),Z=E||U||H||V,re=Z?uf(i.length,Kb):[],se=re.length;for(var ue in i)(f||Lt.call(i,ue))&&!(Z&&(ue=="length"||H&&(ue=="offset"||ue=="parent")||V&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Hi(ue,se)))&&re.push(ue);return re}function D0(i){var f=i.length;return f?i[Af(0,f-1)]:t}function Um(i,f){return to(Hr(i),En(f,0,i.length))}function qm(i){return to(Hr(i))}function bf(i,f,E){(E!==t&&!Di(i[f],E)||E===t&&!(f in i))&&$i(i,f,E)}function Ds(i,f,E){var U=i[f];(!(Lt.call(i,f)&&Di(U,E))||E===t&&!(f in i))&&$i(i,f,E)}function ka(i,f){for(var E=i.length;E--;)if(Di(i[E][0],f))return E;return-1}function Lm(i,f,E,U){return rn(i,function(H,V,Z){f(U,H,E(H),Z)}),U}function A0(i,f){return i&&Ti(f,dr(f),i)}function Fm(i,f){return i&&Ti(f,Vr(f),i)}function $i(i,f,E){f=="__proto__"&&Ua?Ua(i,f,{configurable:!0,enumerable:!0,value:E,writable:!0}):i[f]=E}function mf(i,f){for(var E=-1,U=f.length,H=fe(U),V=i==null;++E<U;)H[E]=V?t:Xf(i,f[E]);return H}function En(i,f,E){return i===i&&(E!==t&&(i=i<=E?i:E),f!==t&&(i=i>=f?i:f)),i}function hi(i,f,E,U,H,V){var Z,re=f&_,se=f&w,ue=f&M;if(E&&(Z=H?E(i,U,H,V):E(i)),Z!==t)return Z;if(!Xt(i))return i;var he=yt(i);if(he){if(Z=Ay(i),!re)return Hr(i,Z)}else{var be=Mr(i),qe=be==oe||be==ye;if(on(i))return Z0(i,re);if(be==De||be==ee||qe&&!H){if(Z=se||qe?{}:gl(i),!re)return se?gy(i,Fm(Z,i)):vy(i,A0(Z,i))}else{if(!Ft[be])return H?i:{};Z=Iy(i,be,re)}}V||(V=new xi);var et=V.get(i);if(et)return et;V.set(i,Z),Kl(i)?i.forEach(function(ot){Z.add(hi(ot,f,E,ot,i,V))}):zl(i)&&i.forEach(function(ot,At){Z.set(At,hi(ot,f,E,At,i,V))});var at=ue?se?Lf:qf:se?Vr:dr,xt=he?t:at(i);return fi(xt||i,function(ot,At){xt&&(At=ot,ot=i[At]),Ds(Z,At,hi(ot,f,E,At,i,V))}),Z}function jm(i){var f=dr(i);return function(E){return I0(E,i,f)}}function I0(i,f,E){var U=E.length;if(i==null)return!U;for(i=zt(i);U--;){var H=E[U],V=f[H],Z=i[H];if(Z===t&&!(H in i)||!V(Z))return!1}return!0}function O0(i,f,E){if(typeof i!="function")throw new ci(m);return Ts(function(){i.apply(t,E)},f)}function As(i,f,E,U){var H=-1,V=xa,Z=!0,re=i.length,se=[],ue=f.length;if(!re)return se;E&&(f=Jt(f,Zr(E))),U?(V=nf,Z=!1):f.length>=c&&(V=_s,Z=!1,f=new wn(f));e:for(;++H<re;){var he=i[H],be=E==null?he:E(he);if(he=U||he!==0?he:0,Z&&be===be){for(var qe=ue;qe--;)if(f[qe]===be)continue e;se.push(he)}else V(f,be,U)||se.push(he)}return se}var rn=rl(Ri),P0=rl(_f,!0);function $m(i,f){var E=!0;return rn(i,function(U,H,V){return E=!!f(U,H,V),E}),E}function za(i,f,E){for(var U=-1,H=i.length;++U<H;){var V=i[U],Z=f(V);if(Z!=null&&(re===t?Z===Z&&!Qr(Z):E(Z,re)))var re=Z,se=V}return se}function km(i,f,E,U){var H=i.length;for(E=Et(E),E<0&&(E=-E>H?0:H+E),U=U===t||U>H?H:Et(U),U<0&&(U+=H),U=E>U?0:Gl(U);E<U;)i[E++]=f;return i}function C0(i,f){var E=[];return rn(i,function(U,H,V){f(U,H,V)&&E.push(U)}),E}function br(i,f,E,U,H){var V=-1,Z=i.length;for(E||(E=Py),H||(H=[]);++V<Z;){var re=i[V];f>0&&E(re)?f>1?br(re,f-1,E,U,H):Qi(H,re):U||(H[H.length]=re)}return H}var yf=il(),R0=il(!0);function Ri(i,f){return i&&yf(i,f,dr)}function _f(i,f){return i&&R0(i,f,dr)}function Ha(i,f){return Xi(f,function(E){return Ki(i[E])})}function Mn(i,f){f=sn(f,i);for(var E=0,U=f.length;i!=null&&E<U;)i=i[Ni(f[E++])];return E&&E==U?i:t}function T0(i,f,E){var U=f(i);return yt(i)?U:Qi(U,E(i))}function Ur(i){return i==null?i===t?ge:Ze:yn&&yn in zt(i)?Sy(i):qy(i)}function wf(i,f){return i>f}function zm(i,f){return i!=null&&Lt.call(i,f)}function Hm(i,f){return i!=null&&f in zt(i)}function Km(i,f,E){return i>=Er(f,E)&&i<fr(f,E)}function Ef(i,f,E){for(var U=E?nf:xa,H=i[0].length,V=i.length,Z=V,re=fe(V),se=1/0,ue=[];Z--;){var he=i[Z];Z&&f&&(he=Jt(he,Zr(f))),se=Er(he.length,se),re[Z]=!E&&(f||H>=120&&he.length>=120)?new wn(Z&&he):t}he=i[0];var be=-1,qe=re[0];e:for(;++be<H&&ue.length<se;){var et=he[be],at=f?f(et):et;if(et=E||et!==0?et:0,!(qe?_s(qe,at):U(ue,at,E))){for(Z=V;--Z;){var xt=re[Z];if(!(xt?_s(xt,at):U(i[Z],at,E)))continue e}qe&&qe.push(at),ue.push(et)}}return ue}function Vm(i,f,E,U){return Ri(i,function(H,V,Z){f(U,E(H),V,Z)}),U}function Is(i,f,E){f=sn(f,i),i=_l(i,f);var U=i==null?i:i[Ni(di(f))];return U==null?t:lr(U,i,E)}function N0(i){return Qt(i)&&Ur(i)==ee}function Gm(i){return Qt(i)&&Ur(i)==le}function Wm(i){return Qt(i)&&Ur(i)==Y}function Os(i,f,E,U,H){return i===f?!0:i==null||f==null||!Qt(i)&&!Qt(f)?i!==i&&f!==f:Ym(i,f,E,U,Os,H)}function Ym(i,f,E,U,H,V){var Z=yt(i),re=yt(f),se=Z?ae:Mr(i),ue=re?ae:Mr(f);se=se==ee?De:se,ue=ue==ee?De:ue;var he=se==De,be=ue==De,qe=se==ue;if(qe&&on(i)){if(!on(f))return!1;Z=!0,he=!1}if(qe&&!he)return V||(V=new xi),Z||ns(i)?dl(i,f,E,U,H,V):Ey(i,f,se,E,U,H,V);if(!(E&A)){var et=he&&Lt.call(i,"__wrapped__"),at=be&&Lt.call(f,"__wrapped__");if(et||at){var xt=et?i.value():i,ot=at?f.value():f;return V||(V=new xi),H(xt,ot,E,U,V)}}return qe?(V||(V=new xi),My(i,f,E,U,H,V)):!1}function Jm(i){return Qt(i)&&Mr(i)==we}function Mf(i,f,E,U){var H=E.length,V=H,Z=!U;if(i==null)return!V;for(i=zt(i);H--;){var re=E[H];if(Z&&re[2]?re[1]!==i[re[0]]:!(re[0]in i))return!1}for(;++H<V;){re=E[H];var se=re[0],ue=i[se],he=re[1];if(Z&&re[2]){if(ue===t&&!(se in i))return!1}else{var be=new xi;if(U)var qe=U(ue,he,se,i,f,be);if(!(qe===t?Os(he,ue,A|R,U,be):qe))return!1}}return!0}function B0(i){if(!Xt(i)||Ry(i))return!1;var f=Ki(i)?Jb:Dr;return f.test(xn(i))}function Zm(i){return Qt(i)&&Ur(i)==Ae}function Xm(i){return Qt(i)&&Mr(i)==de}function Qm(i){return Qt(i)&&oo(i.length)&&!!jt[Ur(i)]}function U0(i){return typeof i=="function"?i:i==null?Gr:typeof i=="object"?yt(i)?F0(i[0],i[1]):L0(i):nd(i)}function Sf(i){if(!Rs(i))return rm(i);var f=[];for(var E in zt(i))Lt.call(i,E)&&E!="constructor"&&f.push(E);return f}function ey(i){if(!Xt(i))return Uy(i);var f=Rs(i),E=[];for(var U in i)U=="constructor"&&(f||!Lt.call(i,U))||E.push(U);return E}function xf(i,f){return i<f}function q0(i,f){var E=-1,U=Kr(i)?fe(i.length):[];return rn(i,function(H,V,Z){U[++E]=f(H,V,Z)}),U}function L0(i){var f=jf(i);return f.length==1&&f[0][2]?ml(f[0][0],f[0][1]):function(E){return E===i||Mf(E,i,f)}}function F0(i,f){return kf(i)&&bl(f)?ml(Ni(i),f):function(E){var U=Xf(E,i);return U===t&&U===f?Qf(E,i):Os(f,U,A|R)}}function Ka(i,f,E,U,H){i!==f&&yf(f,function(V,Z){if(H||(H=new xi),Xt(V))ty(i,f,Z,E,Ka,U,H);else{var re=U?U(Hf(i,Z),V,Z+"",i,f,H):t;re===t&&(re=V),bf(i,Z,re)}},Vr)}function ty(i,f,E,U,H,V,Z){var re=Hf(i,E),se=Hf(f,E),ue=Z.get(se);if(ue){bf(i,E,ue);return}var he=V?V(re,se,E+"",i,f,Z):t,be=he===t;if(be){var qe=yt(se),et=!qe&&on(se),at=!qe&&!et&&ns(se);he=se,qe||et||at?yt(re)?he=re:rr(re)?he=Hr(re):et?(be=!1,he=Z0(se,!0)):at?(be=!1,he=X0(se,!0)):he=[]:Ns(se)||Dn(se)?(he=re,Dn(re)?he=Wl(re):(!Xt(re)||Ki(re))&&(he=gl(se))):be=!1}be&&(Z.set(se,he),H(he,se,U,V,Z),Z.delete(se)),bf(i,E,he)}function j0(i,f){var E=i.length;if(E)return f+=f<0?E:0,Hi(f,E)?i[f]:t}function $0(i,f,E){f.length?f=Jt(f,function(V){return yt(V)?function(Z){return Mn(Z,V.length===1?V[0]:V)}:V}):f=[Gr];var U=-1;f=Jt(f,Zr(st()));var H=q0(i,function(V,Z,re){var se=Jt(f,function(ue){return ue(V)});return{criteria:se,index:++U,value:V}});return Ib(H,function(V,Z){return py(V,Z,E)})}function ry(i,f){return k0(i,f,function(E,U){return Qf(i,U)})}function k0(i,f,E){for(var U=-1,H=f.length,V={};++U<H;){var Z=f[U],re=Mn(i,Z);E(re,Z)&&Ps(V,sn(Z,i),re)}return V}function iy(i){return function(f){return Mn(f,i)}}function Df(i,f,E,U){var H=U?Ab:Gn,V=-1,Z=f.length,re=i;for(i===f&&(f=Hr(f)),E&&(re=Jt(i,Zr(E)));++V<Z;)for(var se=0,ue=f[V],he=E?E(ue):ue;(se=H(re,he,se,U))>-1;)re!==i&&Ba.call(re,se,1),Ba.call(i,se,1);return i}function z0(i,f){for(var E=i?f.length:0,U=E-1;E--;){var H=f[E];if(E==U||H!==V){var V=H;Hi(H)?Ba.call(i,H,1):Pf(i,H)}}return i}function Af(i,f){return i+La(M0()*(f-i+1))}function ny(i,f,E,U){for(var H=-1,V=fr(qa((f-i)/(E||1)),0),Z=fe(V);V--;)Z[U?V:++H]=i,i+=E;return Z}function If(i,f){var E="";if(!i||f<1||f>I)return E;do f%2&&(E+=i),f=La(f/2),f&&(i+=i);while(f);return E}function Dt(i,f){return Kf(yl(i,f,Gr),i+"")}function sy(i){return D0(ss(i))}function ay(i,f){var E=ss(i);return to(E,En(f,0,E.length))}function Ps(i,f,E,U){if(!Xt(i))return i;f=sn(f,i);for(var H=-1,V=f.length,Z=V-1,re=i;re!=null&&++H<V;){var se=Ni(f[H]),ue=E;if(se==="__proto__"||se==="constructor"||se==="prototype")return i;if(H!=Z){var he=re[se];ue=U?U(he,se,re):t,ue===t&&(ue=Xt(he)?he:Hi(f[H+1])?[]:{})}Ds(re,se,ue),re=re[se]}return i}var H0=Fa?function(i,f){return Fa.set(i,f),i}:Gr,oy=Ua?function(i,f){return Ua(i,"toString",{configurable:!0,enumerable:!1,value:tc(f),writable:!0})}:Gr;function fy(i){return to(ss(i))}function li(i,f,E){var U=-1,H=i.length;f<0&&(f=-f>H?0:H+f),E=E>H?H:E,E<0&&(E+=H),H=f>E?0:E-f>>>0,f>>>=0;for(var V=fe(H);++U<H;)V[U]=i[U+f];return V}function cy(i,f){var E;return rn(i,function(U,H,V){return E=f(U,H,V),!E}),!!E}function Va(i,f,E){var U=0,H=i==null?U:i.length;if(typeof f=="number"&&f===f&&H<=T){for(;U<H;){var V=U+H>>>1,Z=i[V];Z!==null&&!Qr(Z)&&(E?Z<=f:Z<f)?U=V+1:H=V}return H}return Of(i,f,Gr,E)}function Of(i,f,E,U){var H=0,V=i==null?0:i.length;if(V===0)return 0;f=E(f);for(var Z=f!==f,re=f===null,se=Qr(f),ue=f===t;H<V;){var he=La((H+V)/2),be=E(i[he]),qe=be!==t,et=be===null,at=be===be,xt=Qr(be);if(Z)var ot=U||at;else ue?ot=at&&(U||qe):re?ot=at&&qe&&(U||!et):se?ot=at&&qe&&!et&&(U||!xt):et||xt?ot=!1:ot=U?be<=f:be<f;ot?H=he+1:V=he}return Er(V,l)}function K0(i,f){for(var E=-1,U=i.length,H=0,V=[];++E<U;){var Z=i[E],re=f?f(Z):Z;if(!E||!Di(re,se)){var se=re;V[H++]=Z===0?0:Z}}return V}function V0(i){return typeof i=="number"?i:Qr(i)?y:+i}function Xr(i){if(typeof i=="string")return i;if(yt(i))return Jt(i,Xr)+"";if(Qr(i))return S0?S0.call(i):"";var f=i+"";return f=="0"&&1/i==-D?"-0":f}function nn(i,f,E){var U=-1,H=xa,V=i.length,Z=!0,re=[],se=re;if(E)Z=!1,H=nf;else if(V>=c){var ue=f?null:_y(i);if(ue)return Aa(ue);Z=!1,H=_s,se=new wn}else se=f?[]:re;e:for(;++U<V;){var he=i[U],be=f?f(he):he;if(he=E||he!==0?he:0,Z&&be===be){for(var qe=se.length;qe--;)if(se[qe]===be)continue e;f&&se.push(be),re.push(he)}else H(se,be,E)||(se!==re&&se.push(be),re.push(he))}return re}function Pf(i,f){return f=sn(f,i),i=_l(i,f),i==null||delete i[Ni(di(f))]}function G0(i,f,E,U){return Ps(i,f,E(Mn(i,f)),U)}function Ga(i,f,E,U){for(var H=i.length,V=U?H:-1;(U?V--:++V<H)&&f(i[V],V,i););return E?li(i,U?0:V,U?V+1:H):li(i,U?V+1:0,U?H:V)}function W0(i,f){var E=i;return E instanceof Ot&&(E=E.value()),sf(f,function(U,H){return H.func.apply(H.thisArg,Qi([U],H.args))},E)}function Cf(i,f,E){var U=i.length;if(U<2)return U?nn(i[0]):[];for(var H=-1,V=fe(U);++H<U;)for(var Z=i[H],re=-1;++re<U;)re!=H&&(V[H]=As(V[H]||Z,i[re],f,E));return nn(br(V,1),f,E)}function Y0(i,f,E){for(var U=-1,H=i.length,V=f.length,Z={};++U<H;){var re=U<V?f[U]:t;E(Z,i[U],re)}return Z}function Rf(i){return rr(i)?i:[]}function Tf(i){return typeof i=="function"?i:Gr}function sn(i,f){return yt(i)?i:kf(i,f)?[i]:Sl(qt(i))}var uy=Dt;function an(i,f,E){var U=i.length;return E=E===t?U:E,!f&&E>=U?i:li(i,f,E)}var J0=Zb||function(i){return Pt.clearTimeout(i)};function Z0(i,f){if(f)return i.slice();var E=i.length,U=m0?m0(E):new i.constructor(E);return i.copy(U),U}function Nf(i){var f=new i.constructor(i.byteLength);return new Ta(f).set(new Ta(i)),f}function hy(i,f){var E=f?Nf(i.buffer):i.buffer;return new i.constructor(E,i.byteOffset,i.byteLength)}function ly(i){var f=new i.constructor(i.source,tt.exec(i));return f.lastIndex=i.lastIndex,f}function dy(i){return xs?zt(xs.call(i)):{}}function X0(i,f){var E=f?Nf(i.buffer):i.buffer;return new i.constructor(E,i.byteOffset,i.length)}function Q0(i,f){if(i!==f){var E=i!==t,U=i===null,H=i===i,V=Qr(i),Z=f!==t,re=f===null,se=f===f,ue=Qr(f);if(!re&&!ue&&!V&&i>f||V&&Z&&se&&!re&&!ue||U&&Z&&se||!E&&se||!H)return 1;if(!U&&!V&&!ue&&i<f||ue&&E&&H&&!U&&!V||re&&E&&H||!Z&&H||!se)return-1}return 0}function py(i,f,E){for(var U=-1,H=i.criteria,V=f.criteria,Z=H.length,re=E.length;++U<Z;){var se=Q0(H[U],V[U]);if(se){if(U>=re)return se;var ue=E[U];return se*(ue=="desc"?-1:1)}}return i.index-f.index}function el(i,f,E,U){for(var H=-1,V=i.length,Z=E.length,re=-1,se=f.length,ue=fr(V-Z,0),he=fe(se+ue),be=!U;++re<se;)he[re]=f[re];for(;++H<Z;)(be||H<V)&&(he[E[H]]=i[H]);for(;ue--;)he[re++]=i[H++];return he}function tl(i,f,E,U){for(var H=-1,V=i.length,Z=-1,re=E.length,se=-1,ue=f.length,he=fr(V-re,0),be=fe(he+ue),qe=!U;++H<he;)be[H]=i[H];for(var et=H;++se<ue;)be[et+se]=f[se];for(;++Z<re;)(qe||H<V)&&(be[et+E[Z]]=i[H++]);return be}function Hr(i,f){var E=-1,U=i.length;for(f||(f=fe(U));++E<U;)f[E]=i[E];return f}function Ti(i,f,E,U){var H=!E;E||(E={});for(var V=-1,Z=f.length;++V<Z;){var re=f[V],se=U?U(E[re],i[re],re,E,i):t;se===t&&(se=i[re]),H?$i(E,re,se):Ds(E,re,se)}return E}function vy(i,f){return Ti(i,$f(i),f)}function gy(i,f){return Ti(i,pl(i),f)}function Wa(i,f){return function(E,U){var H=yt(E)?wb:Lm,V=f?f():{};return H(E,i,st(U,2),V)}}function ts(i){return Dt(function(f,E){var U=-1,H=E.length,V=H>1?E[H-1]:t,Z=H>2?E[2]:t;for(V=i.length>3&&typeof V=="function"?(H--,V):t,Z&&qr(E[0],E[1],Z)&&(V=H<3?t:V,H=1),f=zt(f);++U<H;){var re=E[U];re&&i(f,re,U,V)}return f})}function rl(i,f){return function(E,U){if(E==null)return E;if(!Kr(E))return i(E,U);for(var H=E.length,V=f?H:-1,Z=zt(E);(f?V--:++V<H)&&U(Z[V],V,Z)!==!1;);return E}}function il(i){return function(f,E,U){for(var H=-1,V=zt(f),Z=U(f),re=Z.length;re--;){var se=Z[i?re:++H];if(E(V[se],se,V)===!1)break}return f}}function by(i,f,E){var U=f&B,H=Cs(i);function V(){var Z=this&&this!==Pt&&this instanceof V?H:i;return Z.apply(U?E:this,arguments)}return V}function nl(i){return function(f){f=qt(f);var E=Wn(f)?Si(f):t,U=E?E[0]:f.charAt(0),H=E?an(E,1).join(""):f.slice(1);return U[i]()+H}}function rs(i){return function(f){return sf(rd(td(f).replace(ms,"")),i,"")}}function Cs(i){return function(){var f=arguments;switch(f.length){case 0:return new i;case 1:return new i(f[0]);case 2:return new i(f[0],f[1]);case 3:return new i(f[0],f[1],f[2]);case 4:return new i(f[0],f[1],f[2],f[3]);case 5:return new i(f[0],f[1],f[2],f[3],f[4]);case 6:return new i(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new i(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var E=es(i.prototype),U=i.apply(E,f);return Xt(U)?U:E}}function my(i,f,E){var U=Cs(i);function H(){for(var V=arguments.length,Z=fe(V),re=V,se=is(H);re--;)Z[re]=arguments[re];var ue=V<3&&Z[0]!==se&&Z[V-1]!==se?[]:en(Z,se);if(V-=ue.length,V<E)return cl(i,f,Ya,H.placeholder,t,Z,ue,t,t,E-V);var he=this&&this!==Pt&&this instanceof H?U:i;return lr(he,this,Z)}return H}function sl(i){return function(f,E,U){var H=zt(f);if(!Kr(f)){var V=st(E,3);f=dr(f),E=function(re){return V(H[re],re,H)}}var Z=i(f,E,U);return Z>-1?H[V?f[Z]:Z]:t}}function al(i){return zi(function(f){var E=f.length,U=E,H=ui.prototype.thru;for(i&&f.reverse();U--;){var V=f[U];if(typeof V!="function")throw new ci(m);if(H&&!Z&&Qa(V)=="wrapper")var Z=new ui([],!0)}for(U=Z?U:E;++U<E;){V=f[U];var re=Qa(V),se=re=="wrapper"?Ff(V):t;se&&zf(se[0])&&se[1]==(O|N|k|j)&&!se[4].length&&se[9]==1?Z=Z[Qa(se[0])].apply(Z,se[3]):Z=V.length==1&&zf(V)?Z[re]():Z.thru(V)}return function(){var ue=arguments,he=ue[0];if(Z&&ue.length==1&&yt(he))return Z.plant(he).value();for(var be=0,qe=E?f[be].apply(this,ue):he;++be<E;)qe=f[be].call(this,qe);return qe}})}function Ya(i,f,E,U,H,V,Z,re,se,ue){var he=f&O,be=f&B,qe=f&z,et=f&(N|q),at=f&J,xt=qe?t:Cs(i);function ot(){for(var At=arguments.length,Ct=fe(At),ei=At;ei--;)Ct[ei]=arguments[ei];if(et)var Lr=is(ot),ti=Pb(Ct,Lr);if(U&&(Ct=el(Ct,U,H,et)),V&&(Ct=tl(Ct,V,Z,et)),At-=ti,et&&At<ue){var ir=en(Ct,Lr);return cl(i,f,Ya,ot.placeholder,E,Ct,ir,re,se,ue-At)}var Ai=be?E:this,Gi=qe?Ai[i]:i;return At=Ct.length,re?Ct=Ly(Ct,re):at&&At>1&&Ct.reverse(),he&&se<At&&(Ct.length=se),this&&this!==Pt&&this instanceof ot&&(Gi=xt||Cs(Gi)),Gi.apply(Ai,Ct)}return ot}function ol(i,f){return function(E,U){return Vm(E,i,f(U),{})}}function Ja(i,f){return function(E,U){var H;if(E===t&&U===t)return f;if(E!==t&&(H=E),U!==t){if(H===t)return U;typeof E=="string"||typeof U=="string"?(E=Xr(E),U=Xr(U)):(E=V0(E),U=V0(U)),H=i(E,U)}return H}}function Bf(i){return zi(function(f){return f=Jt(f,Zr(st())),Dt(function(E){var U=this;return i(f,function(H){return lr(H,U,E)})})})}function Za(i,f){f=f===t?" ":Xr(f);var E=f.length;if(E<2)return E?If(f,i):f;var U=If(f,qa(i/Yn(f)));return Wn(f)?an(Si(U),0,i).join(""):U.slice(0,i)}function yy(i,f,E,U){var H=f&B,V=Cs(i);function Z(){for(var re=-1,se=arguments.length,ue=-1,he=U.length,be=fe(he+se),qe=this&&this!==Pt&&this instanceof Z?V:i;++ue<he;)be[ue]=U[ue];for(;se--;)be[ue++]=arguments[++re];return lr(qe,H?E:this,be)}return Z}function fl(i){return function(f,E,U){return U&&typeof U!="number"&&qr(f,E,U)&&(E=U=t),f=Vi(f),E===t?(E=f,f=0):E=Vi(E),U=U===t?f<E?1:-1:Vi(U),ny(f,E,U,i)}}function Xa(i){return function(f,E){return typeof f=="string"&&typeof E=="string"||(f=pi(f),E=pi(E)),i(f,E)}}function cl(i,f,E,U,H,V,Z,re,se,ue){var he=f&N,be=he?Z:t,qe=he?t:Z,et=he?V:t,at=he?t:V;f|=he?k:F,f&=~(he?F:k),f&P||(f&=~(B|z));var xt=[i,f,H,et,be,at,qe,re,se,ue],ot=E.apply(t,xt);return zf(i)&&wl(ot,xt),ot.placeholder=U,El(ot,i,f)}function Uf(i){var f=or[i];return function(E,U){if(E=pi(E),U=U==null?0:Er(Et(U),292),U&&E0(E)){var H=(qt(E)+"e").split("e"),V=f(H[0]+"e"+(+H[1]+U));return H=(qt(V)+"e").split("e"),+(H[0]+"e"+(+H[1]-U))}return f(E)}}var _y=Xn&&1/Aa(new Xn([,-0]))[1]==D?function(i){return new Xn(i)}:nc;function ul(i){return function(f){var E=Mr(f);return E==we?lf(f):E==de?qb(f):Ob(f,i(f))}}function ki(i,f,E,U,H,V,Z,re){var se=f&z;if(!se&&typeof i!="function")throw new ci(m);var ue=U?U.length:0;if(ue||(f&=~(k|F),U=H=t),Z=Z===t?Z:fr(Et(Z),0),re=re===t?re:Et(re),ue-=H?H.length:0,f&F){var he=U,be=H;U=H=t}var qe=se?t:Ff(i),et=[i,f,E,U,H,he,be,V,Z,re];if(qe&&By(et,qe),i=et[0],f=et[1],E=et[2],U=et[3],H=et[4],re=et[9]=et[9]===t?se?0:i.length:fr(et[9]-ue,0),!re&&f&(N|q)&&(f&=~(N|q)),!f||f==B)var at=by(i,f,E);else f==N||f==q?at=my(i,f,re):(f==k||f==(B|k))&&!H.length?at=yy(i,f,E,U):at=Ya.apply(t,et);var xt=qe?H0:wl;return El(xt(at,et),i,f)}function hl(i,f,E,U){return i===t||Di(i,Zn[E])&&!Lt.call(U,E)?f:i}function ll(i,f,E,U,H,V){return Xt(i)&&Xt(f)&&(V.set(f,i),Ka(i,f,t,ll,V),V.delete(f)),i}function wy(i){return Ns(i)?t:i}function dl(i,f,E,U,H,V){var Z=E&A,re=i.length,se=f.length;if(re!=se&&!(Z&&se>re))return!1;var ue=V.get(i),he=V.get(f);if(ue&&he)return ue==f&&he==i;var be=-1,qe=!0,et=E&R?new wn:t;for(V.set(i,f),V.set(f,i);++be<re;){var at=i[be],xt=f[be];if(U)var ot=Z?U(xt,at,be,f,i,V):U(at,xt,be,i,f,V);if(ot!==t){if(ot)continue;qe=!1;break}if(et){if(!af(f,function(At,Ct){if(!_s(et,Ct)&&(at===At||H(at,At,E,U,V)))return et.push(Ct)})){qe=!1;break}}else if(!(at===xt||H(at,xt,E,U,V))){qe=!1;break}}return V.delete(i),V.delete(f),qe}function Ey(i,f,E,U,H,V,Z){switch(E){case je:if(i.byteLength!=f.byteLength||i.byteOffset!=f.byteOffset)return!1;i=i.buffer,f=f.buffer;case le:return!(i.byteLength!=f.byteLength||!V(new Ta(i),new Ta(f)));case X:case Y:case me:return Di(+i,+f);case W:return i.name==f.name&&i.message==f.message;case Ae:case ze:return i==f+"";case we:var re=lf;case de:var se=U&A;if(re||(re=Aa),i.size!=f.size&&!se)return!1;var ue=Z.get(i);if(ue)return ue==f;U|=R,Z.set(i,f);var he=dl(re(i),re(f),U,H,V,Z);return Z.delete(i),he;case Me:if(xs)return xs.call(i)==xs.call(f)}return!1}function My(i,f,E,U,H,V){var Z=E&A,re=qf(i),se=re.length,ue=qf(f),he=ue.length;if(se!=he&&!Z)return!1;for(var be=se;be--;){var qe=re[be];if(!(Z?qe in f:Lt.call(f,qe)))return!1}var et=V.get(i),at=V.get(f);if(et&&at)return et==f&&at==i;var xt=!0;V.set(i,f),V.set(f,i);for(var ot=Z;++be<se;){qe=re[be];var At=i[qe],Ct=f[qe];if(U)var ei=Z?U(Ct,At,qe,f,i,V):U(At,Ct,qe,i,f,V);if(!(ei===t?At===Ct||H(At,Ct,E,U,V):ei)){xt=!1;break}ot||(ot=qe=="constructor")}if(xt&&!ot){var Lr=i.constructor,ti=f.constructor;Lr!=ti&&"constructor"in i&&"constructor"in f&&!(typeof Lr=="function"&&Lr instanceof Lr&&typeof ti=="function"&&ti instanceof ti)&&(xt=!1)}return V.delete(i),V.delete(f),xt}function zi(i){return Kf(yl(i,t,Il),i+"")}function qf(i){return T0(i,dr,$f)}function Lf(i){return T0(i,Vr,pl)}var Ff=Fa?function(i){return Fa.get(i)}:nc;function Qa(i){for(var f=i.name+"",E=Qn[f],U=Lt.call(Qn,f)?E.length:0;U--;){var H=E[U],V=H.func;if(V==null||V==i)return H.name}return f}function is(i){var f=Lt.call(K,"placeholder")?K:i;return f.placeholder}function st(){var i=K.iteratee||rc;return i=i===rc?U0:i,arguments.length?i(arguments[0],arguments[1]):i}function eo(i,f){var E=i.__data__;return Cy(f)?E[typeof f=="string"?"string":"hash"]:E.map}function jf(i){for(var f=dr(i),E=f.length;E--;){var U=f[E],H=i[U];f[E]=[U,H,bl(H)]}return f}function Sn(i,f){var E=Nb(i,f);return B0(E)?E:t}function Sy(i){var f=Lt.call(i,yn),E=i[yn];try{i[yn]=t;var U=!0}catch{}var H=Ca.call(i);return U&&(f?i[yn]=E:delete i[yn]),H}var $f=pf?function(i){return i==null?[]:(i=zt(i),Xi(pf(i),function(f){return _0.call(i,f)}))}:sc,pl=pf?function(i){for(var f=[];i;)Qi(f,$f(i)),i=Na(i);return f}:sc,Mr=Ur;(vf&&Mr(new vf(new ArrayBuffer(1)))!=je||Es&&Mr(new Es)!=we||gf&&Mr(gf.resolve())!=Ee||Xn&&Mr(new Xn)!=de||Ms&&Mr(new Ms)!=Fe)&&(Mr=function(i){var f=Ur(i),E=f==De?i.constructor:t,U=E?xn(E):"";if(U)switch(U){case am:return je;case om:return we;case fm:return Ee;case cm:return de;case um:return Fe}return f});function xy(i,f,E){for(var U=-1,H=E.length;++U<H;){var V=E[U],Z=V.size;switch(V.type){case"drop":i+=Z;break;case"dropRight":f-=Z;break;case"take":f=Er(f,i+Z);break;case"takeRight":i=fr(i,f-Z);break}}return{start:i,end:f}}function Dy(i){var f=i.match($e);return f?f[1].split(Re):[]}function vl(i,f,E){f=sn(f,i);for(var U=-1,H=f.length,V=!1;++U<H;){var Z=Ni(f[U]);if(!(V=i!=null&&E(i,Z)))break;i=i[Z]}return V||++U!=H?V:(H=i==null?0:i.length,!!H&&oo(H)&&Hi(Z,H)&&(yt(i)||Dn(i)))}function Ay(i){var f=i.length,E=new i.constructor(f);return f&&typeof i[0]=="string"&&Lt.call(i,"index")&&(E.index=i.index,E.input=i.input),E}function gl(i){return typeof i.constructor=="function"&&!Rs(i)?es(Na(i)):{}}function Iy(i,f,E){var U=i.constructor;switch(f){case le:return Nf(i);case X:case Y:return new U(+i);case je:return hy(i,E);case Pe:case pe:case Xe:case Te:case _e:case Qe:case Ne:case Be:case wt:return X0(i,E);case we:return new U;case me:case ze:return new U(i);case Ae:return ly(i);case de:return new U;case Me:return dy(i)}}function Oy(i,f){var E=f.length;if(!E)return i;var U=E-1;return f[U]=(E>1?"& ":"")+f[U],f=f.join(E>2?", ":" "),i.replace(ht,`{
/* [wrapped with `+f+`] */
`)}function Py(i){return yt(i)||Dn(i)||!!(w0&&i&&i[w0])}function Hi(i,f){var E=typeof i;return f=f??I,!!f&&(E=="number"||E!="symbol"&&Ir.test(i))&&i>-1&&i%1==0&&i<f}function qr(i,f,E){if(!Xt(E))return!1;var U=typeof f;return(U=="number"?Kr(E)&&Hi(f,E.length):U=="string"&&f in E)?Di(E[f],i):!1}function kf(i,f){if(yt(i))return!1;var E=typeof i;return E=="number"||E=="symbol"||E=="boolean"||i==null||Qr(i)?!0:pt.test(i)||!xe.test(i)||f!=null&&i in zt(f)}function Cy(i){var f=typeof i;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?i!=="__proto__":i===null}function zf(i){var f=Qa(i),E=K[f];if(typeof E!="function"||!(f in Ot.prototype))return!1;if(i===E)return!0;var U=Ff(E);return!!U&&i===U[0]}function Ry(i){return!!b0&&b0 in i}var Ty=Oa?Ki:ac;function Rs(i){var f=i&&i.constructor,E=typeof f=="function"&&f.prototype||Zn;return i===E}function bl(i){return i===i&&!Xt(i)}function ml(i,f){return function(E){return E==null?!1:E[i]===f&&(f!==t||i in zt(E))}}function Ny(i){var f=so(i,function(U){return E.size===p&&E.clear(),U}),E=f.cache;return f}function By(i,f){var E=i[1],U=f[1],H=E|U,V=H<(B|z|O),Z=U==O&&E==N||U==O&&E==j&&i[7].length<=f[8]||U==(O|j)&&f[7].length<=f[8]&&E==N;if(!(V||Z))return i;U&B&&(i[2]=f[2],H|=E&B?0:P);var re=f[3];if(re){var se=i[3];i[3]=se?el(se,re,f[4]):re,i[4]=se?en(i[3],u):f[4]}return re=f[5],re&&(se=i[5],i[5]=se?tl(se,re,f[6]):re,i[6]=se?en(i[5],u):f[6]),re=f[7],re&&(i[7]=re),U&O&&(i[8]=i[8]==null?f[8]:Er(i[8],f[8])),i[9]==null&&(i[9]=f[9]),i[0]=f[0],i[1]=H,i}function Uy(i){var f=[];if(i!=null)for(var E in zt(i))f.push(E);return f}function qy(i){return Ca.call(i)}function yl(i,f,E){return f=fr(f===t?i.length-1:f,0),function(){for(var U=arguments,H=-1,V=fr(U.length-f,0),Z=fe(V);++H<V;)Z[H]=U[f+H];H=-1;for(var re=fe(f+1);++H<f;)re[H]=U[H];return re[f]=E(Z),lr(i,this,re)}}function _l(i,f){return f.length<2?i:Mn(i,li(f,0,-1))}function Ly(i,f){for(var E=i.length,U=Er(f.length,E),H=Hr(i);U--;){var V=f[U];i[U]=Hi(V,E)?H[V]:t}return i}function Hf(i,f){if(!(f==="constructor"&&typeof i[f]=="function")&&f!="__proto__")return i[f]}var wl=Ml(H0),Ts=Qb||function(i,f){return Pt.setTimeout(i,f)},Kf=Ml(oy);function El(i,f,E){var U=f+"";return Kf(i,Oy(U,Fy(Dy(U),E)))}function Ml(i){var f=0,E=0;return function(){var U=im(),H=h-(U-E);if(E=U,H>0){if(++f>=g)return arguments[0]}else f=0;return i.apply(t,arguments)}}function to(i,f){var E=-1,U=i.length,H=U-1;for(f=f===t?U:f;++E<f;){var V=Af(E,H),Z=i[V];i[V]=i[E],i[E]=Z}return i.length=f,i}var Sl=Ny(function(i){var f=[];return i.charCodeAt(0)===46&&f.push(""),i.replace(Je,function(E,U,H,V){f.push(H?V.replace(Ye,"$1"):U||E)}),f});function Ni(i){if(typeof i=="string"||Qr(i))return i;var f=i+"";return f=="0"&&1/i==-D?"-0":f}function xn(i){if(i!=null){try{return Pa.call(i)}catch{}try{return i+""}catch{}}return""}function Fy(i,f){return fi(te,function(E){var U="_."+E[0];f&E[1]&&!xa(i,U)&&i.push(U)}),i.sort()}function xl(i){if(i instanceof Ot)return i.clone();var f=new ui(i.__wrapped__,i.__chain__);return f.__actions__=Hr(i.__actions__),f.__index__=i.__index__,f.__values__=i.__values__,f}function jy(i,f,E){(E?qr(i,f,E):f===t)?f=1:f=fr(Et(f),0);var U=i==null?0:i.length;if(!U||f<1)return[];for(var H=0,V=0,Z=fe(qa(U/f));H<U;)Z[V++]=li(i,H,H+=f);return Z}function $y(i){for(var f=-1,E=i==null?0:i.length,U=0,H=[];++f<E;){var V=i[f];V&&(H[U++]=V)}return H}function ky(){var i=arguments.length;if(!i)return[];for(var f=fe(i-1),E=arguments[0],U=i;U--;)f[U-1]=arguments[U];return Qi(yt(E)?Hr(E):[E],br(f,1))}var zy=Dt(function(i,f){return rr(i)?As(i,br(f,1,rr,!0)):[]}),Hy=Dt(function(i,f){var E=di(f);return rr(E)&&(E=t),rr(i)?As(i,br(f,1,rr,!0),st(E,2)):[]}),Ky=Dt(function(i,f){var E=di(f);return rr(E)&&(E=t),rr(i)?As(i,br(f,1,rr,!0),t,E):[]});function Vy(i,f,E){var U=i==null?0:i.length;return U?(f=E||f===t?1:Et(f),li(i,f<0?0:f,U)):[]}function Gy(i,f,E){var U=i==null?0:i.length;return U?(f=E||f===t?1:Et(f),f=U-f,li(i,0,f<0?0:f)):[]}function Wy(i,f){return i&&i.length?Ga(i,st(f,3),!0,!0):[]}function Yy(i,f){return i&&i.length?Ga(i,st(f,3),!0):[]}function Jy(i,f,E,U){var H=i==null?0:i.length;return H?(E&&typeof E!="number"&&qr(i,f,E)&&(E=0,U=H),km(i,f,E,U)):[]}function Dl(i,f,E){var U=i==null?0:i.length;if(!U)return-1;var H=E==null?0:Et(E);return H<0&&(H=fr(U+H,0)),Da(i,st(f,3),H)}function Al(i,f,E){var U=i==null?0:i.length;if(!U)return-1;var H=U-1;return E!==t&&(H=Et(E),H=E<0?fr(U+H,0):Er(H,U-1)),Da(i,st(f,3),H,!0)}function Il(i){var f=i==null?0:i.length;return f?br(i,1):[]}function Zy(i){var f=i==null?0:i.length;return f?br(i,D):[]}function Xy(i,f){var E=i==null?0:i.length;return E?(f=f===t?1:Et(f),br(i,f)):[]}function Qy(i){for(var f=-1,E=i==null?0:i.length,U={};++f<E;){var H=i[f];U[H[0]]=H[1]}return U}function Ol(i){return i&&i.length?i[0]:t}function e2(i,f,E){var U=i==null?0:i.length;if(!U)return-1;var H=E==null?0:Et(E);return H<0&&(H=fr(U+H,0)),Gn(i,f,H)}function t2(i){var f=i==null?0:i.length;return f?li(i,0,-1):[]}var r2=Dt(function(i){var f=Jt(i,Rf);return f.length&&f[0]===i[0]?Ef(f):[]}),i2=Dt(function(i){var f=di(i),E=Jt(i,Rf);return f===di(E)?f=t:E.pop(),E.length&&E[0]===i[0]?Ef(E,st(f,2)):[]}),n2=Dt(function(i){var f=di(i),E=Jt(i,Rf);return f=typeof f=="function"?f:t,f&&E.pop(),E.length&&E[0]===i[0]?Ef(E,t,f):[]});function s2(i,f){return i==null?"":tm.call(i,f)}function di(i){var f=i==null?0:i.length;return f?i[f-1]:t}function a2(i,f,E){var U=i==null?0:i.length;if(!U)return-1;var H=U;return E!==t&&(H=Et(E),H=H<0?fr(U+H,0):Er(H,U-1)),f===f?Fb(i,f,H):Da(i,c0,H,!0)}function o2(i,f){return i&&i.length?j0(i,Et(f)):t}var f2=Dt(Pl);function Pl(i,f){return i&&i.length&&f&&f.length?Df(i,f):i}function c2(i,f,E){return i&&i.length&&f&&f.length?Df(i,f,st(E,2)):i}function u2(i,f,E){return i&&i.length&&f&&f.length?Df(i,f,t,E):i}var h2=zi(function(i,f){var E=i==null?0:i.length,U=mf(i,f);return z0(i,Jt(f,function(H){return Hi(H,E)?+H:H}).sort(Q0)),U});function l2(i,f){var E=[];if(!(i&&i.length))return E;var U=-1,H=[],V=i.length;for(f=st(f,3);++U<V;){var Z=i[U];f(Z,U,i)&&(E.push(Z),H.push(U))}return z0(i,H),E}function Vf(i){return i==null?i:sm.call(i)}function d2(i,f,E){var U=i==null?0:i.length;return U?(E&&typeof E!="number"&&qr(i,f,E)?(f=0,E=U):(f=f==null?0:Et(f),E=E===t?U:Et(E)),li(i,f,E)):[]}function p2(i,f){return Va(i,f)}function v2(i,f,E){return Of(i,f,st(E,2))}function g2(i,f){var E=i==null?0:i.length;if(E){var U=Va(i,f);if(U<E&&Di(i[U],f))return U}return-1}function b2(i,f){return Va(i,f,!0)}function m2(i,f,E){return Of(i,f,st(E,2),!0)}function y2(i,f){var E=i==null?0:i.length;if(E){var U=Va(i,f,!0)-1;if(Di(i[U],f))return U}return-1}function _2(i){return i&&i.length?K0(i):[]}function w2(i,f){return i&&i.length?K0(i,st(f,2)):[]}function E2(i){var f=i==null?0:i.length;return f?li(i,1,f):[]}function M2(i,f,E){return i&&i.length?(f=E||f===t?1:Et(f),li(i,0,f<0?0:f)):[]}function S2(i,f,E){var U=i==null?0:i.length;return U?(f=E||f===t?1:Et(f),f=U-f,li(i,f<0?0:f,U)):[]}function x2(i,f){return i&&i.length?Ga(i,st(f,3),!1,!0):[]}function D2(i,f){return i&&i.length?Ga(i,st(f,3)):[]}var A2=Dt(function(i){return nn(br(i,1,rr,!0))}),I2=Dt(function(i){var f=di(i);return rr(f)&&(f=t),nn(br(i,1,rr,!0),st(f,2))}),O2=Dt(function(i){var f=di(i);return f=typeof f=="function"?f:t,nn(br(i,1,rr,!0),t,f)});function P2(i){return i&&i.length?nn(i):[]}function C2(i,f){return i&&i.length?nn(i,st(f,2)):[]}function R2(i,f){return f=typeof f=="function"?f:t,i&&i.length?nn(i,t,f):[]}function Gf(i){if(!(i&&i.length))return[];var f=0;return i=Xi(i,function(E){if(rr(E))return f=fr(E.length,f),!0}),uf(f,function(E){return Jt(i,of(E))})}function Cl(i,f){if(!(i&&i.length))return[];var E=Gf(i);return f==null?E:Jt(E,function(U){return lr(f,t,U)})}var T2=Dt(function(i,f){return rr(i)?As(i,f):[]}),N2=Dt(function(i){return Cf(Xi(i,rr))}),B2=Dt(function(i){var f=di(i);return rr(f)&&(f=t),Cf(Xi(i,rr),st(f,2))}),U2=Dt(function(i){var f=di(i);return f=typeof f=="function"?f:t,Cf(Xi(i,rr),t,f)}),q2=Dt(Gf);function L2(i,f){return Y0(i||[],f||[],Ds)}function F2(i,f){return Y0(i||[],f||[],Ps)}var j2=Dt(function(i){var f=i.length,E=f>1?i[f-1]:t;return E=typeof E=="function"?(i.pop(),E):t,Cl(i,E)});function Rl(i){var f=K(i);return f.__chain__=!0,f}function $2(i,f){return f(i),i}function ro(i,f){return f(i)}var k2=zi(function(i){var f=i.length,E=f?i[0]:0,U=this.__wrapped__,H=function(V){return mf(V,i)};return f>1||this.__actions__.length||!(U instanceof Ot)||!Hi(E)?this.thru(H):(U=U.slice(E,+E+(f?1:0)),U.__actions__.push({func:ro,args:[H],thisArg:t}),new ui(U,this.__chain__).thru(function(V){return f&&!V.length&&V.push(t),V}))});function z2(){return Rl(this)}function H2(){return new ui(this.value(),this.__chain__)}function K2(){this.__values__===t&&(this.__values__=Vl(this.value()));var i=this.__index__>=this.__values__.length,f=i?t:this.__values__[this.__index__++];return{done:i,value:f}}function V2(){return this}function G2(i){for(var f,E=this;E instanceof $a;){var U=xl(E);U.__index__=0,U.__values__=t,f?H.__wrapped__=U:f=U;var H=U;E=E.__wrapped__}return H.__wrapped__=i,f}function W2(){var i=this.__wrapped__;if(i instanceof Ot){var f=i;return this.__actions__.length&&(f=new Ot(this)),f=f.reverse(),f.__actions__.push({func:ro,args:[Vf],thisArg:t}),new ui(f,this.__chain__)}return this.thru(Vf)}function Y2(){return W0(this.__wrapped__,this.__actions__)}var J2=Wa(function(i,f,E){Lt.call(i,E)?++i[E]:$i(i,E,1)});function Z2(i,f,E){var U=yt(i)?o0:$m;return E&&qr(i,f,E)&&(f=t),U(i,st(f,3))}function X2(i,f){var E=yt(i)?Xi:C0;return E(i,st(f,3))}var Q2=sl(Dl),e3=sl(Al);function t3(i,f){return br(io(i,f),1)}function r3(i,f){return br(io(i,f),D)}function i3(i,f,E){return E=E===t?1:Et(E),br(io(i,f),E)}function Tl(i,f){var E=yt(i)?fi:rn;return E(i,st(f,3))}function Nl(i,f){var E=yt(i)?Eb:P0;return E(i,st(f,3))}var n3=Wa(function(i,f,E){Lt.call(i,E)?i[E].push(f):$i(i,E,[f])});function s3(i,f,E,U){i=Kr(i)?i:ss(i),E=E&&!U?Et(E):0;var H=i.length;return E<0&&(E=fr(H+E,0)),fo(i)?E<=H&&i.indexOf(f,E)>-1:!!H&&Gn(i,f,E)>-1}var a3=Dt(function(i,f,E){var U=-1,H=typeof f=="function",V=Kr(i)?fe(i.length):[];return rn(i,function(Z){V[++U]=H?lr(f,Z,E):Is(Z,f,E)}),V}),o3=Wa(function(i,f,E){$i(i,E,f)});function io(i,f){var E=yt(i)?Jt:q0;return E(i,st(f,3))}function f3(i,f,E,U){return i==null?[]:(yt(f)||(f=f==null?[]:[f]),E=U?t:E,yt(E)||(E=E==null?[]:[E]),$0(i,f,E))}var c3=Wa(function(i,f,E){i[E?0:1].push(f)},function(){return[[],[]]});function u3(i,f,E){var U=yt(i)?sf:h0,H=arguments.length<3;return U(i,st(f,4),E,H,rn)}function h3(i,f,E){var U=yt(i)?Mb:h0,H=arguments.length<3;return U(i,st(f,4),E,H,P0)}function l3(i,f){var E=yt(i)?Xi:C0;return E(i,ao(st(f,3)))}function d3(i){var f=yt(i)?D0:sy;return f(i)}function p3(i,f,E){(E?qr(i,f,E):f===t)?f=1:f=Et(f);var U=yt(i)?Um:ay;return U(i,f)}function v3(i){var f=yt(i)?qm:fy;return f(i)}function g3(i){if(i==null)return 0;if(Kr(i))return fo(i)?Yn(i):i.length;var f=Mr(i);return f==we||f==de?i.size:Sf(i).length}function b3(i,f,E){var U=yt(i)?af:cy;return E&&qr(i,f,E)&&(f=t),U(i,st(f,3))}var m3=Dt(function(i,f){if(i==null)return[];var E=f.length;return E>1&&qr(i,f[0],f[1])?f=[]:E>2&&qr(f[0],f[1],f[2])&&(f=[f[0]]),$0(i,br(f,1),[])}),no=Xb||function(){return Pt.Date.now()};function y3(i,f){if(typeof f!="function")throw new ci(m);return i=Et(i),function(){if(--i<1)return f.apply(this,arguments)}}function Bl(i,f,E){return f=E?t:f,f=i&&f==null?i.length:f,ki(i,O,t,t,t,t,f)}function Ul(i,f){var E;if(typeof f!="function")throw new ci(m);return i=Et(i),function(){return--i>0&&(E=f.apply(this,arguments)),i<=1&&(f=t),E}}var Wf=Dt(function(i,f,E){var U=B;if(E.length){var H=en(E,is(Wf));U|=k}return ki(i,U,f,E,H)}),ql=Dt(function(i,f,E){var U=B|z;if(E.length){var H=en(E,is(ql));U|=k}return ki(f,U,i,E,H)});function Ll(i,f,E){f=E?t:f;var U=ki(i,N,t,t,t,t,t,f);return U.placeholder=Ll.placeholder,U}function Fl(i,f,E){f=E?t:f;var U=ki(i,q,t,t,t,t,t,f);return U.placeholder=Fl.placeholder,U}function jl(i,f,E){var U,H,V,Z,re,se,ue=0,he=!1,be=!1,qe=!0;if(typeof i!="function")throw new ci(m);f=pi(f)||0,Xt(E)&&(he=!!E.leading,be="maxWait"in E,V=be?fr(pi(E.maxWait)||0,f):V,qe="trailing"in E?!!E.trailing:qe);function et(ir){var Ai=U,Gi=H;return U=H=t,ue=ir,Z=i.apply(Gi,Ai),Z}function at(ir){return ue=ir,re=Ts(At,f),he?et(ir):Z}function xt(ir){var Ai=ir-se,Gi=ir-ue,sd=f-Ai;return be?Er(sd,V-Gi):sd}function ot(ir){var Ai=ir-se,Gi=ir-ue;return se===t||Ai>=f||Ai<0||be&&Gi>=V}function At(){var ir=no();if(ot(ir))return Ct(ir);re=Ts(At,xt(ir))}function Ct(ir){return re=t,qe&&U?et(ir):(U=H=t,Z)}function ei(){re!==t&&J0(re),ue=0,U=se=H=re=t}function Lr(){return re===t?Z:Ct(no())}function ti(){var ir=no(),Ai=ot(ir);if(U=arguments,H=this,se=ir,Ai){if(re===t)return at(se);if(be)return J0(re),re=Ts(At,f),et(se)}return re===t&&(re=Ts(At,f)),Z}return ti.cancel=ei,ti.flush=Lr,ti}var _3=Dt(function(i,f){return O0(i,1,f)}),w3=Dt(function(i,f,E){return O0(i,pi(f)||0,E)});function E3(i){return ki(i,J)}function so(i,f){if(typeof i!="function"||f!=null&&typeof f!="function")throw new ci(m);var E=function(){var U=arguments,H=f?f.apply(this,U):U[0],V=E.cache;if(V.has(H))return V.get(H);var Z=i.apply(this,U);return E.cache=V.set(H,Z)||V,Z};return E.cache=new(so.Cache||ji),E}so.Cache=ji;function ao(i){if(typeof i!="function")throw new ci(m);return function(){var f=arguments;switch(f.length){case 0:return!i.call(this);case 1:return!i.call(this,f[0]);case 2:return!i.call(this,f[0],f[1]);case 3:return!i.call(this,f[0],f[1],f[2])}return!i.apply(this,f)}}function M3(i){return Ul(2,i)}var S3=uy(function(i,f){f=f.length==1&&yt(f[0])?Jt(f[0],Zr(st())):Jt(br(f,1),Zr(st()));var E=f.length;return Dt(function(U){for(var H=-1,V=Er(U.length,E);++H<V;)U[H]=f[H].call(this,U[H]);return lr(i,this,U)})}),Yf=Dt(function(i,f){var E=en(f,is(Yf));return ki(i,k,t,f,E)}),$l=Dt(function(i,f){var E=en(f,is($l));return ki(i,F,t,f,E)}),x3=zi(function(i,f){return ki(i,j,t,t,t,f)});function D3(i,f){if(typeof i!="function")throw new ci(m);return f=f===t?f:Et(f),Dt(i,f)}function A3(i,f){if(typeof i!="function")throw new ci(m);return f=f==null?0:fr(Et(f),0),Dt(function(E){var U=E[f],H=an(E,0,f);return U&&Qi(H,U),lr(i,this,H)})}function I3(i,f,E){var U=!0,H=!0;if(typeof i!="function")throw new ci(m);return Xt(E)&&(U="leading"in E?!!E.leading:U,H="trailing"in E?!!E.trailing:H),jl(i,f,{leading:U,maxWait:f,trailing:H})}function O3(i){return Bl(i,1)}function P3(i,f){return Yf(Tf(f),i)}function C3(){if(!arguments.length)return[];var i=arguments[0];return yt(i)?i:[i]}function R3(i){return hi(i,M)}function T3(i,f){return f=typeof f=="function"?f:t,hi(i,M,f)}function N3(i){return hi(i,_|M)}function B3(i,f){return f=typeof f=="function"?f:t,hi(i,_|M,f)}function U3(i,f){return f==null||I0(i,f,dr(f))}function Di(i,f){return i===f||i!==i&&f!==f}var q3=Xa(wf),L3=Xa(function(i,f){return i>=f}),Dn=N0(function(){return arguments}())?N0:function(i){return Qt(i)&&Lt.call(i,"callee")&&!_0.call(i,"callee")},yt=fe.isArray,F3=Br?Zr(Br):Gm;function Kr(i){return i!=null&&oo(i.length)&&!Ki(i)}function rr(i){return Qt(i)&&Kr(i)}function j3(i){return i===!0||i===!1||Qt(i)&&Ur(i)==X}var on=em||ac,$3=Mi?Zr(Mi):Wm;function k3(i){return Qt(i)&&i.nodeType===1&&!Ns(i)}function z3(i){if(i==null)return!0;if(Kr(i)&&(yt(i)||typeof i=="string"||typeof i.splice=="function"||on(i)||ns(i)||Dn(i)))return!i.length;var f=Mr(i);if(f==we||f==de)return!i.size;if(Rs(i))return!Sf(i).length;for(var E in i)if(Lt.call(i,E))return!1;return!0}function H3(i,f){return Os(i,f)}function K3(i,f,E){E=typeof E=="function"?E:t;var U=E?E(i,f):t;return U===t?Os(i,f,t,E):!!U}function Jf(i){if(!Qt(i))return!1;var f=Ur(i);return f==W||f==$||typeof i.message=="string"&&typeof i.name=="string"&&!Ns(i)}function V3(i){return typeof i=="number"&&E0(i)}function Ki(i){if(!Xt(i))return!1;var f=Ur(i);return f==oe||f==ye||f==Q||f==nt}function kl(i){return typeof i=="number"&&i==Et(i)}function oo(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=I}function Xt(i){var f=typeof i;return i!=null&&(f=="object"||f=="function")}function Qt(i){return i!=null&&typeof i=="object"}var zl=oi?Zr(oi):Jm;function G3(i,f){return i===f||Mf(i,f,jf(f))}function W3(i,f,E){return E=typeof E=="function"?E:t,Mf(i,f,jf(f),E)}function Y3(i){return Hl(i)&&i!=+i}function J3(i){if(Ty(i))throw new bt(s);return B0(i)}function Z3(i){return i===null}function X3(i){return i==null}function Hl(i){return typeof i=="number"||Qt(i)&&Ur(i)==me}function Ns(i){if(!Qt(i)||Ur(i)!=De)return!1;var f=Na(i);if(f===null)return!0;var E=Lt.call(f,"constructor")&&f.constructor;return typeof E=="function"&&E instanceof E&&Pa.call(E)==Wb}var Zf=Ci?Zr(Ci):Zm;function Q3(i){return kl(i)&&i>=-I&&i<=I}var Kl=ys?Zr(ys):Xm;function fo(i){return typeof i=="string"||!yt(i)&&Qt(i)&&Ur(i)==ze}function Qr(i){return typeof i=="symbol"||Qt(i)&&Ur(i)==Me}var ns=mn?Zr(mn):Qm;function e6(i){return i===t}function t6(i){return Qt(i)&&Mr(i)==Fe}function r6(i){return Qt(i)&&Ur(i)==Se}var i6=Xa(xf),n6=Xa(function(i,f){return i<=f});function Vl(i){if(!i)return[];if(Kr(i))return fo(i)?Si(i):Hr(i);if(ws&&i[ws])return Ub(i[ws]());var f=Mr(i),E=f==we?lf:f==de?Aa:ss;return E(i)}function Vi(i){if(!i)return i===0?i:0;if(i=pi(i),i===D||i===-D){var f=i<0?-1:1;return f*x}return i===i?i:0}function Et(i){var f=Vi(i),E=f%1;return f===f?E?f-E:f:0}function Gl(i){return i?En(Et(i),0,S):0}function pi(i){if(typeof i=="number")return i;if(Qr(i))return y;if(Xt(i)){var f=typeof i.valueOf=="function"?i.valueOf():i;i=Xt(f)?f+"":f}if(typeof i!="string")return i===0?i:+i;i=l0(i);var E=xr.test(i);return E||Ar.test(i)?mt(i.slice(2),E?2:8):lt.test(i)?y:+i}function Wl(i){return Ti(i,Vr(i))}function s6(i){return i?En(Et(i),-I,I):i===0?i:0}function qt(i){return i==null?"":Xr(i)}var a6=ts(function(i,f){if(Rs(f)||Kr(f)){Ti(f,dr(f),i);return}for(var E in f)Lt.call(f,E)&&Ds(i,E,f[E])}),Yl=ts(function(i,f){Ti(f,Vr(f),i)}),co=ts(function(i,f,E,U){Ti(f,Vr(f),i,U)}),o6=ts(function(i,f,E,U){Ti(f,dr(f),i,U)}),f6=zi(mf);function c6(i,f){var E=es(i);return f==null?E:A0(E,f)}var u6=Dt(function(i,f){i=zt(i);var E=-1,U=f.length,H=U>2?f[2]:t;for(H&&qr(f[0],f[1],H)&&(U=1);++E<U;)for(var V=f[E],Z=Vr(V),re=-1,se=Z.length;++re<se;){var ue=Z[re],he=i[ue];(he===t||Di(he,Zn[ue])&&!Lt.call(i,ue))&&(i[ue]=V[ue])}return i}),h6=Dt(function(i){return i.push(t,ll),lr(Jl,t,i)});function l6(i,f){return f0(i,st(f,3),Ri)}function d6(i,f){return f0(i,st(f,3),_f)}function p6(i,f){return i==null?i:yf(i,st(f,3),Vr)}function v6(i,f){return i==null?i:R0(i,st(f,3),Vr)}function g6(i,f){return i&&Ri(i,st(f,3))}function b6(i,f){return i&&_f(i,st(f,3))}function m6(i){return i==null?[]:Ha(i,dr(i))}function y6(i){return i==null?[]:Ha(i,Vr(i))}function Xf(i,f,E){var U=i==null?t:Mn(i,f);return U===t?E:U}function _6(i,f){return i!=null&&vl(i,f,zm)}function Qf(i,f){return i!=null&&vl(i,f,Hm)}var w6=ol(function(i,f,E){f!=null&&typeof f.toString!="function"&&(f=Ca.call(f)),i[f]=E},tc(Gr)),E6=ol(function(i,f,E){f!=null&&typeof f.toString!="function"&&(f=Ca.call(f)),Lt.call(i,f)?i[f].push(E):i[f]=[E]},st),M6=Dt(Is);function dr(i){return Kr(i)?x0(i):Sf(i)}function Vr(i){return Kr(i)?x0(i,!0):ey(i)}function S6(i,f){var E={};return f=st(f,3),Ri(i,function(U,H,V){$i(E,f(U,H,V),U)}),E}function x6(i,f){var E={};return f=st(f,3),Ri(i,function(U,H,V){$i(E,H,f(U,H,V))}),E}var D6=ts(function(i,f,E){Ka(i,f,E)}),Jl=ts(function(i,f,E,U){Ka(i,f,E,U)}),A6=zi(function(i,f){var E={};if(i==null)return E;var U=!1;f=Jt(f,function(V){return V=sn(V,i),U||(U=V.length>1),V}),Ti(i,Lf(i),E),U&&(E=hi(E,_|w|M,wy));for(var H=f.length;H--;)Pf(E,f[H]);return E});function I6(i,f){return Zl(i,ao(st(f)))}var O6=zi(function(i,f){return i==null?{}:ry(i,f)});function Zl(i,f){if(i==null)return{};var E=Jt(Lf(i),function(U){return[U]});return f=st(f),k0(i,E,function(U,H){return f(U,H[0])})}function P6(i,f,E){f=sn(f,i);var U=-1,H=f.length;for(H||(H=1,i=t);++U<H;){var V=i==null?t:i[Ni(f[U])];V===t&&(U=H,V=E),i=Ki(V)?V.call(i):V}return i}function C6(i,f,E){return i==null?i:Ps(i,f,E)}function R6(i,f,E,U){return U=typeof U=="function"?U:t,i==null?i:Ps(i,f,E,U)}var Xl=ul(dr),Ql=ul(Vr);function T6(i,f,E){var U=yt(i),H=U||on(i)||ns(i);if(f=st(f,4),E==null){var V=i&&i.constructor;H?E=U?new V:[]:Xt(i)?E=Ki(V)?es(Na(i)):{}:E={}}return(H?fi:Ri)(i,function(Z,re,se){return f(E,Z,re,se)}),E}function N6(i,f){return i==null?!0:Pf(i,f)}function B6(i,f,E){return i==null?i:G0(i,f,Tf(E))}function U6(i,f,E,U){return U=typeof U=="function"?U:t,i==null?i:G0(i,f,Tf(E),U)}function ss(i){return i==null?[]:hf(i,dr(i))}function q6(i){return i==null?[]:hf(i,Vr(i))}function L6(i,f,E){return E===t&&(E=f,f=t),E!==t&&(E=pi(E),E=E===E?E:0),f!==t&&(f=pi(f),f=f===f?f:0),En(pi(i),f,E)}function F6(i,f,E){return f=Vi(f),E===t?(E=f,f=0):E=Vi(E),i=pi(i),Km(i,f,E)}function j6(i,f,E){if(E&&typeof E!="boolean"&&qr(i,f,E)&&(f=E=t),E===t&&(typeof f=="boolean"?(E=f,f=t):typeof i=="boolean"&&(E=i,i=t)),i===t&&f===t?(i=0,f=1):(i=Vi(i),f===t?(f=i,i=0):f=Vi(f)),i>f){var U=i;i=f,f=U}if(E||i%1||f%1){var H=M0();return Er(i+H*(f-i+$t("1e-"+((H+"").length-1))),f)}return Af(i,f)}var $6=rs(function(i,f,E){return f=f.toLowerCase(),i+(E?ed(f):f)});function ed(i){return ec(qt(i).toLowerCase())}function td(i){return i=qt(i),i&&i.replace(er,Cb).replace(tf,"")}function k6(i,f,E){i=qt(i),f=Xr(f);var U=i.length;E=E===t?U:En(Et(E),0,U);var H=E;return E-=f.length,E>=0&&i.slice(E,H)==f}function z6(i){return i=qt(i),i&&He.test(i)?i.replace(ke,Rb):i}function H6(i){return i=qt(i),i&&vt.test(i)?i.replace(Oe,"\\$&"):i}var K6=rs(function(i,f,E){return i+(E?"-":"")+f.toLowerCase()}),V6=rs(function(i,f,E){return i+(E?" ":"")+f.toLowerCase()}),G6=nl("toLowerCase");function W6(i,f,E){i=qt(i),f=Et(f);var U=f?Yn(i):0;if(!f||U>=f)return i;var H=(f-U)/2;return Za(La(H),E)+i+Za(qa(H),E)}function Y6(i,f,E){i=qt(i),f=Et(f);var U=f?Yn(i):0;return f&&U<f?i+Za(f-U,E):i}function J6(i,f,E){i=qt(i),f=Et(f);var U=f?Yn(i):0;return f&&U<f?Za(f-U,E)+i:i}function Z6(i,f,E){return E||f==null?f=0:f&&(f=+f),nm(qt(i).replace(Ge,""),f||0)}function X6(i,f,E){return(E?qr(i,f,E):f===t)?f=1:f=Et(f),If(qt(i),f)}function Q6(){var i=arguments,f=qt(i[0]);return i.length<3?f:f.replace(i[1],i[2])}var e_=rs(function(i,f,E){return i+(E?"_":"")+f.toLowerCase()});function t_(i,f,E){return E&&typeof E!="number"&&qr(i,f,E)&&(f=E=t),E=E===t?S:E>>>0,E?(i=qt(i),i&&(typeof f=="string"||f!=null&&!Zf(f))&&(f=Xr(f),!f&&Wn(i))?an(Si(i),0,E):i.split(f,E)):[]}var r_=rs(function(i,f,E){return i+(E?" ":"")+ec(f)});function i_(i,f,E){return i=qt(i),E=E==null?0:En(Et(E),0,i.length),f=Xr(f),i.slice(E,E+f.length)==f}function n_(i,f,E){var U=K.templateSettings;E&&qr(i,f,E)&&(f=t),i=qt(i),f=co({},f,U,hl);var H=co({},f.imports,U.imports,hl),V=dr(H),Z=hf(H,V),re,se,ue=0,he=f.interpolate||cr,be="__p += '",qe=df((f.escape||cr).source+"|"+he.source+"|"+(he===Ke?Ut:cr).source+"|"+(f.evaluate||cr).source+"|$","g"),et="//# sourceURL="+(Lt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rf+"]")+`
`;i.replace(qe,function(ot,At,Ct,ei,Lr,ti){return Ct||(Ct=ei),be+=i.slice(ue,ti).replace(Or,Tb),At&&(re=!0,be+=`' +
__e(`+At+`) +
'`),Lr&&(se=!0,be+=`';
`+Lr+`;
__p += '`),Ct&&(be+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),ue=ti+ot.length,ot}),be+=`';
`;var at=Lt.call(f,"variable")&&f.variable;if(!at)be=`with (obj) {
`+be+`
}
`;else if(dt.test(at))throw new bt(v);be=(se?be.replace(rt,""):be).replace(Ue,"$1").replace(It,"$1;"),be="function("+(at||"obj")+`) {
`+(at?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var xt=id(function(){return Nt(V,et+"return "+be).apply(t,Z)});if(xt.source=be,Jf(xt))throw xt;return xt}function s_(i){return qt(i).toLowerCase()}function a_(i){return qt(i).toUpperCase()}function o_(i,f,E){if(i=qt(i),i&&(E||f===t))return l0(i);if(!i||!(f=Xr(f)))return i;var U=Si(i),H=Si(f),V=d0(U,H),Z=p0(U,H)+1;return an(U,V,Z).join("")}function f_(i,f,E){if(i=qt(i),i&&(E||f===t))return i.slice(0,g0(i)+1);if(!i||!(f=Xr(f)))return i;var U=Si(i),H=p0(U,Si(f))+1;return an(U,0,H).join("")}function c_(i,f,E){if(i=qt(i),i&&(E||f===t))return i.replace(Ge,"");if(!i||!(f=Xr(f)))return i;var U=Si(i),H=d0(U,Si(f));return an(U,H).join("")}function u_(i,f){var E=L,U=C;if(Xt(f)){var H="separator"in f?f.separator:H;E="length"in f?Et(f.length):E,U="omission"in f?Xr(f.omission):U}i=qt(i);var V=i.length;if(Wn(i)){var Z=Si(i);V=Z.length}if(E>=V)return i;var re=E-Yn(U);if(re<1)return U;var se=Z?an(Z,0,re).join(""):i.slice(0,re);if(H===t)return se+U;if(Z&&(re+=se.length-re),Zf(H)){if(i.slice(re).search(H)){var ue,he=se;for(H.global||(H=df(H.source,qt(tt.exec(H))+"g")),H.lastIndex=0;ue=H.exec(he);)var be=ue.index;se=se.slice(0,be===t?re:be)}}else if(i.indexOf(Xr(H),re)!=re){var qe=se.lastIndexOf(H);qe>-1&&(se=se.slice(0,qe))}return se+U}function h_(i){return i=qt(i),i&&ct.test(i)?i.replace(it,jb):i}var l_=rs(function(i,f,E){return i+(E?" ":"")+f.toUpperCase()}),ec=nl("toUpperCase");function rd(i,f,E){return i=qt(i),f=E?t:f,f===t?Bb(i)?zb(i):Db(i):i.match(f)||[]}var id=Dt(function(i,f){try{return lr(i,t,f)}catch(E){return Jf(E)?E:new bt(E)}}),d_=zi(function(i,f){return fi(f,function(E){E=Ni(E),$i(i,E,Wf(i[E],i))}),i});function p_(i){var f=i==null?0:i.length,E=st();return i=f?Jt(i,function(U){if(typeof U[1]!="function")throw new ci(m);return[E(U[0]),U[1]]}):[],Dt(function(U){for(var H=-1;++H<f;){var V=i[H];if(lr(V[0],this,U))return lr(V[1],this,U)}})}function v_(i){return jm(hi(i,_))}function tc(i){return function(){return i}}function g_(i,f){return i==null||i!==i?f:i}var b_=al(),m_=al(!0);function Gr(i){return i}function rc(i){return U0(typeof i=="function"?i:hi(i,_))}function y_(i){return L0(hi(i,_))}function __(i,f){return F0(i,hi(f,_))}var w_=Dt(function(i,f){return function(E){return Is(E,i,f)}}),E_=Dt(function(i,f){return function(E){return Is(i,E,f)}});function ic(i,f,E){var U=dr(f),H=Ha(f,U);E==null&&!(Xt(f)&&(H.length||!U.length))&&(E=f,f=i,i=this,H=Ha(f,dr(f)));var V=!(Xt(E)&&"chain"in E)||!!E.chain,Z=Ki(i);return fi(H,function(re){var se=f[re];i[re]=se,Z&&(i.prototype[re]=function(){var ue=this.__chain__;if(V||ue){var he=i(this.__wrapped__),be=he.__actions__=Hr(this.__actions__);return be.push({func:se,args:arguments,thisArg:i}),he.__chain__=ue,he}return se.apply(i,Qi([this.value()],arguments))})}),i}function M_(){return Pt._===this&&(Pt._=Yb),this}function nc(){}function S_(i){return i=Et(i),Dt(function(f){return j0(f,i)})}var x_=Bf(Jt),D_=Bf(o0),A_=Bf(af);function nd(i){return kf(i)?of(Ni(i)):iy(i)}function I_(i){return function(f){return i==null?t:Mn(i,f)}}var O_=fl(),P_=fl(!0);function sc(){return[]}function ac(){return!1}function C_(){return{}}function R_(){return""}function T_(){return!0}function N_(i,f){if(i=Et(i),i<1||i>I)return[];var E=S,U=Er(i,S);f=st(f),i-=S;for(var H=uf(U,f);++E<i;)f(E);return H}function B_(i){return yt(i)?Jt(i,Ni):Qr(i)?[i]:Hr(Sl(qt(i)))}function U_(i){var f=++Gb;return qt(i)+f}var q_=Ja(function(i,f){return i+f},0),L_=Uf("ceil"),F_=Ja(function(i,f){return i/f},1),j_=Uf("floor");function $_(i){return i&&i.length?za(i,Gr,wf):t}function k_(i,f){return i&&i.length?za(i,st(f,2),wf):t}function z_(i){return u0(i,Gr)}function H_(i,f){return u0(i,st(f,2))}function K_(i){return i&&i.length?za(i,Gr,xf):t}function V_(i,f){return i&&i.length?za(i,st(f,2),xf):t}var G_=Ja(function(i,f){return i*f},1),W_=Uf("round"),Y_=Ja(function(i,f){return i-f},0);function J_(i){return i&&i.length?cf(i,Gr):0}function Z_(i,f){return i&&i.length?cf(i,st(f,2)):0}return K.after=y3,K.ary=Bl,K.assign=a6,K.assignIn=Yl,K.assignInWith=co,K.assignWith=o6,K.at=f6,K.before=Ul,K.bind=Wf,K.bindAll=d_,K.bindKey=ql,K.castArray=C3,K.chain=Rl,K.chunk=jy,K.compact=$y,K.concat=ky,K.cond=p_,K.conforms=v_,K.constant=tc,K.countBy=J2,K.create=c6,K.curry=Ll,K.curryRight=Fl,K.debounce=jl,K.defaults=u6,K.defaultsDeep=h6,K.defer=_3,K.delay=w3,K.difference=zy,K.differenceBy=Hy,K.differenceWith=Ky,K.drop=Vy,K.dropRight=Gy,K.dropRightWhile=Wy,K.dropWhile=Yy,K.fill=Jy,K.filter=X2,K.flatMap=t3,K.flatMapDeep=r3,K.flatMapDepth=i3,K.flatten=Il,K.flattenDeep=Zy,K.flattenDepth=Xy,K.flip=E3,K.flow=b_,K.flowRight=m_,K.fromPairs=Qy,K.functions=m6,K.functionsIn=y6,K.groupBy=n3,K.initial=t2,K.intersection=r2,K.intersectionBy=i2,K.intersectionWith=n2,K.invert=w6,K.invertBy=E6,K.invokeMap=a3,K.iteratee=rc,K.keyBy=o3,K.keys=dr,K.keysIn=Vr,K.map=io,K.mapKeys=S6,K.mapValues=x6,K.matches=y_,K.matchesProperty=__,K.memoize=so,K.merge=D6,K.mergeWith=Jl,K.method=w_,K.methodOf=E_,K.mixin=ic,K.negate=ao,K.nthArg=S_,K.omit=A6,K.omitBy=I6,K.once=M3,K.orderBy=f3,K.over=x_,K.overArgs=S3,K.overEvery=D_,K.overSome=A_,K.partial=Yf,K.partialRight=$l,K.partition=c3,K.pick=O6,K.pickBy=Zl,K.property=nd,K.propertyOf=I_,K.pull=f2,K.pullAll=Pl,K.pullAllBy=c2,K.pullAllWith=u2,K.pullAt=h2,K.range=O_,K.rangeRight=P_,K.rearg=x3,K.reject=l3,K.remove=l2,K.rest=D3,K.reverse=Vf,K.sampleSize=p3,K.set=C6,K.setWith=R6,K.shuffle=v3,K.slice=d2,K.sortBy=m3,K.sortedUniq=_2,K.sortedUniqBy=w2,K.split=t_,K.spread=A3,K.tail=E2,K.take=M2,K.takeRight=S2,K.takeRightWhile=x2,K.takeWhile=D2,K.tap=$2,K.throttle=I3,K.thru=ro,K.toArray=Vl,K.toPairs=Xl,K.toPairsIn=Ql,K.toPath=B_,K.toPlainObject=Wl,K.transform=T6,K.unary=O3,K.union=A2,K.unionBy=I2,K.unionWith=O2,K.uniq=P2,K.uniqBy=C2,K.uniqWith=R2,K.unset=N6,K.unzip=Gf,K.unzipWith=Cl,K.update=B6,K.updateWith=U6,K.values=ss,K.valuesIn=q6,K.without=T2,K.words=rd,K.wrap=P3,K.xor=N2,K.xorBy=B2,K.xorWith=U2,K.zip=q2,K.zipObject=L2,K.zipObjectDeep=F2,K.zipWith=j2,K.entries=Xl,K.entriesIn=Ql,K.extend=Yl,K.extendWith=co,ic(K,K),K.add=q_,K.attempt=id,K.camelCase=$6,K.capitalize=ed,K.ceil=L_,K.clamp=L6,K.clone=R3,K.cloneDeep=N3,K.cloneDeepWith=B3,K.cloneWith=T3,K.conformsTo=U3,K.deburr=td,K.defaultTo=g_,K.divide=F_,K.endsWith=k6,K.eq=Di,K.escape=z6,K.escapeRegExp=H6,K.every=Z2,K.find=Q2,K.findIndex=Dl,K.findKey=l6,K.findLast=e3,K.findLastIndex=Al,K.findLastKey=d6,K.floor=j_,K.forEach=Tl,K.forEachRight=Nl,K.forIn=p6,K.forInRight=v6,K.forOwn=g6,K.forOwnRight=b6,K.get=Xf,K.gt=q3,K.gte=L3,K.has=_6,K.hasIn=Qf,K.head=Ol,K.identity=Gr,K.includes=s3,K.indexOf=e2,K.inRange=F6,K.invoke=M6,K.isArguments=Dn,K.isArray=yt,K.isArrayBuffer=F3,K.isArrayLike=Kr,K.isArrayLikeObject=rr,K.isBoolean=j3,K.isBuffer=on,K.isDate=$3,K.isElement=k3,K.isEmpty=z3,K.isEqual=H3,K.isEqualWith=K3,K.isError=Jf,K.isFinite=V3,K.isFunction=Ki,K.isInteger=kl,K.isLength=oo,K.isMap=zl,K.isMatch=G3,K.isMatchWith=W3,K.isNaN=Y3,K.isNative=J3,K.isNil=X3,K.isNull=Z3,K.isNumber=Hl,K.isObject=Xt,K.isObjectLike=Qt,K.isPlainObject=Ns,K.isRegExp=Zf,K.isSafeInteger=Q3,K.isSet=Kl,K.isString=fo,K.isSymbol=Qr,K.isTypedArray=ns,K.isUndefined=e6,K.isWeakMap=t6,K.isWeakSet=r6,K.join=s2,K.kebabCase=K6,K.last=di,K.lastIndexOf=a2,K.lowerCase=V6,K.lowerFirst=G6,K.lt=i6,K.lte=n6,K.max=$_,K.maxBy=k_,K.mean=z_,K.meanBy=H_,K.min=K_,K.minBy=V_,K.stubArray=sc,K.stubFalse=ac,K.stubObject=C_,K.stubString=R_,K.stubTrue=T_,K.multiply=G_,K.nth=o2,K.noConflict=M_,K.noop=nc,K.now=no,K.pad=W6,K.padEnd=Y6,K.padStart=J6,K.parseInt=Z6,K.random=j6,K.reduce=u3,K.reduceRight=h3,K.repeat=X6,K.replace=Q6,K.result=P6,K.round=W_,K.runInContext=ne,K.sample=d3,K.size=g3,K.snakeCase=e_,K.some=b3,K.sortedIndex=p2,K.sortedIndexBy=v2,K.sortedIndexOf=g2,K.sortedLastIndex=b2,K.sortedLastIndexBy=m2,K.sortedLastIndexOf=y2,K.startCase=r_,K.startsWith=i_,K.subtract=Y_,K.sum=J_,K.sumBy=Z_,K.template=n_,K.times=N_,K.toFinite=Vi,K.toInteger=Et,K.toLength=Gl,K.toLower=s_,K.toNumber=pi,K.toSafeInteger=s6,K.toString=qt,K.toUpper=a_,K.trim=o_,K.trimEnd=f_,K.trimStart=c_,K.truncate=u_,K.unescape=h_,K.uniqueId=U_,K.upperCase=l_,K.upperFirst=ec,K.each=Tl,K.eachRight=Nl,K.first=Ol,ic(K,function(){var i={};return Ri(K,function(f,E){Lt.call(K.prototype,E)||(i[E]=f)}),i}(),{chain:!1}),K.VERSION=n,fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){K[i].placeholder=K}),fi(["drop","take"],function(i,f){Ot.prototype[i]=function(E){E=E===t?1:fr(Et(E),0);var U=this.__filtered__&&!f?new Ot(this):this.clone();return U.__filtered__?U.__takeCount__=Er(E,U.__takeCount__):U.__views__.push({size:Er(E,S),type:i+(U.__dir__<0?"Right":"")}),U},Ot.prototype[i+"Right"]=function(E){return this.reverse()[i](E).reverse()}}),fi(["filter","map","takeWhile"],function(i,f){var E=f+1,U=E==r||E==b;Ot.prototype[i]=function(H){var V=this.clone();return V.__iteratees__.push({iteratee:st(H,3),type:E}),V.__filtered__=V.__filtered__||U,V}}),fi(["head","last"],function(i,f){var E="take"+(f?"Right":"");Ot.prototype[i]=function(){return this[E](1).value()[0]}}),fi(["initial","tail"],function(i,f){var E="drop"+(f?"":"Right");Ot.prototype[i]=function(){return this.__filtered__?new Ot(this):this[E](1)}}),Ot.prototype.compact=function(){return this.filter(Gr)},Ot.prototype.find=function(i){return this.filter(i).head()},Ot.prototype.findLast=function(i){return this.reverse().find(i)},Ot.prototype.invokeMap=Dt(function(i,f){return typeof i=="function"?new Ot(this):this.map(function(E){return Is(E,i,f)})}),Ot.prototype.reject=function(i){return this.filter(ao(st(i)))},Ot.prototype.slice=function(i,f){i=Et(i);var E=this;return E.__filtered__&&(i>0||f<0)?new Ot(E):(i<0?E=E.takeRight(-i):i&&(E=E.drop(i)),f!==t&&(f=Et(f),E=f<0?E.dropRight(-f):E.take(f-i)),E)},Ot.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Ot.prototype.toArray=function(){return this.take(S)},Ri(Ot.prototype,function(i,f){var E=/^(?:filter|find|map|reject)|While$/.test(f),U=/^(?:head|last)$/.test(f),H=K[U?"take"+(f=="last"?"Right":""):f],V=U||/^find/.test(f);H&&(K.prototype[f]=function(){var Z=this.__wrapped__,re=U?[1]:arguments,se=Z instanceof Ot,ue=re[0],he=se||yt(Z),be=function(At){var Ct=H.apply(K,Qi([At],re));return U&&qe?Ct[0]:Ct};he&&E&&typeof ue=="function"&&ue.length!=1&&(se=he=!1);var qe=this.__chain__,et=!!this.__actions__.length,at=V&&!qe,xt=se&&!et;if(!V&&he){Z=xt?Z:new Ot(this);var ot=i.apply(Z,re);return ot.__actions__.push({func:ro,args:[be],thisArg:t}),new ui(ot,qe)}return at&&xt?i.apply(this,re):(ot=this.thru(be),at?U?ot.value()[0]:ot.value():ot)})}),fi(["pop","push","shift","sort","splice","unshift"],function(i){var f=Ia[i],E=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",U=/^(?:pop|shift)$/.test(i);K.prototype[i]=function(){var H=arguments;if(U&&!this.__chain__){var V=this.value();return f.apply(yt(V)?V:[],H)}return this[E](function(Z){return f.apply(yt(Z)?Z:[],H)})}}),Ri(Ot.prototype,function(i,f){var E=K[f];if(E){var U=E.name+"";Lt.call(Qn,U)||(Qn[U]=[]),Qn[U].push({name:f,func:E})}}),Qn[Ya(t,z).name]=[{name:"wrapper",func:t}],Ot.prototype.clone=hm,Ot.prototype.reverse=lm,Ot.prototype.value=dm,K.prototype.at=k2,K.prototype.chain=z2,K.prototype.commit=H2,K.prototype.next=K2,K.prototype.plant=G2,K.prototype.reverse=W2,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=Y2,K.prototype.first=K.prototype.head,ws&&(K.prototype[ws]=V2),K},Jn=Hb();tr?((tr.exports=Jn)._=Jn,kt._=Jn):Pt._=Jn}).call(Gs)})(lh,lh.exports);var jx=Object.defineProperty,$x=Object.defineProperties,kx=Object.getOwnPropertyDescriptors,Sv=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable,xv=(a,e,t)=>e in a?jx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,_o=(a,e)=>{for(var t in e||(e={}))zx.call(e,t)&&xv(a,t,e[t]);if(Sv)for(var t of Sv(e))Hx.call(e,t)&&xv(a,t,e[t]);return a},Kx=(a,e)=>$x(a,kx(e));function _i(a,e,t){let n;const c=dh(a);return e.rpcMap&&(n=e.rpcMap[c]),n||(n=`${Fx}?chainId=eip155:${c}&projectId=${t}`),n}function dh(a){return a.includes("eip155")?Number(a.split(":")[1]):Number(a)}function Vx(a,e){if(!e.includes(a))throw new Error(`Chain '${a}' not approved. Please use one of the following: ${e.toString()}`)}function Gx(a){return a.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Wx(a,e){const t=Object.keys(e.namespaces).filter(c=>c.includes(a));if(!t.length)return[];const n=[];return t.forEach(c=>{const s=e.namespaces[c].accounts;n.push(...s)}),n}function Yx(a,e={}){const t=Dv(a),n=Dv(e);return lh.exports.merge(t,n)}function Dv(a){var e,t,n,c;const s={};if(!Tx(a))return s;for(const[m,v]of Object.entries(a)){const d=_b(m)?[m]:v.chains,p=v.methods||[],u=v.events||[],_=v.rpcMap||{},w=Ao(m);s[w]=Kx(_o(_o({},s[w]),v),{chains:Yu(d,(e=s[w])==null?void 0:e.chains),methods:Yu(p,(t=s[w])==null?void 0:t.methods),events:Yu(u,(n=s[w])==null?void 0:n.events),rpcMap:_o(_o({},_),(c=s[w])==null?void 0:c.rpcMap)})}return s}const kn=(a,e)=>{const t=n=>{n.request!==e.request||n.topic!==e.topic||(a.events.removeListener("session_request_sent",t),Jx(e))};a.on("session_request_sent",t)};function Jx(a){if(typeof window<"u")try{const e=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(e){const t=JSON.parse(e),n=t==null?void 0:t.href;if(typeof n=="string"){n.endsWith("/")&&n.slice(0,-1);const c=`${n}/wc?requestId=${a.id}&sessionTopic=${a.topic}`;window.open(c,"_self","noreferrer noopener")}}}catch(e){console.error(e)}}class Zx{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||_i(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||_i(e,this.namespace);return typeof n>"u"?void 0:new ln(new $n(n))}}class Xx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var t;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const n=dh(e);if(!this.httpProviders[n]){const c=t||_i(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!c)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,c)}this.chainId=n,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const n=t||_i(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ln(new $n(n))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const c=dh(t);e[c]=this.createHttpProvider(c,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16),n=`${this.name}:${t}`;Vx(n,this.namespace.chains),this.setDefaultChain(`${t}`)}}class Qx{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||_i(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||_i(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ln(new $n(n))}}class eD{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||_i(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||_i(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ln(new $n(n))}}class tD{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||this.getCardanoRPCUrl(e);return typeof n>"u"?void 0:new ln(new $n(n))}}class rD{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||_i(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||_i(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ln(new $n(n))}}class iD{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(kn(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||_i(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||_i(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ln(new $n(n))}}var nD=Object.defineProperty,sD=Object.defineProperties,aD=Object.getOwnPropertyDescriptors,Av=Object.getOwnPropertySymbols,oD=Object.prototype.hasOwnProperty,fD=Object.prototype.propertyIsEnumerable,Iv=(a,e,t)=>e in a?nD(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,wo=(a,e)=>{for(var t in e||(e={}))oD.call(e,t)&&Iv(a,t,e[t]);if(Av)for(var t of Av(e))fD.call(e,t)&&Iv(a,t,e[t]);return a},Ju=(a,e)=>sD(a,aD(e));class s0{constructor(e){this.events=new yh,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Rt.pino(Rt.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Ev}))}static async init(e){const t=new s0(e);return await t.initialize(),t}async request(e,t){const[n,c]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:wo({},e),chainId:`${n}:${c}`,topic:this.session.topic})}sendAsync(e,t,n){this.request(e,n).then(c=>t(null,c)).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:yv("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:c}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await c().then(s=>{this.session=s}).catch(s=>{if(s.message!==mb)throw s;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[n,c]=this.validateChain(e);this.getProvider(n).setDefaultChain(c,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Rx(t)){for(const n of t)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await mx.init({logger:this.providerOpts.logger||Ev,relayUrl:this.providerOpts.relayUrl||Ux,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>Ao(e)))].forEach(e=>{if(!this.session)return;const t=Wx(e,this.session),n=Gx(t),c=Yx(this.namespaces,this.optionalNamespaces),s=Ju(wo({},c[e]),{accounts:t,chains:n});switch(e){case"eip155":this.rpcProviders[e]=new Xx({client:this.client,namespace:s,events:this.events});break;case"solana":this.rpcProviders[e]=new Qx({client:this.client,namespace:s,events:this.events});break;case"cosmos":this.rpcProviders[e]=new eD({client:this.client,namespace:s,events:this.events});break;case"polkadot":this.rpcProviders[e]=new Zx({client:this.client,namespace:s,events:this.events});break;case"cip34":this.rpcProviders[e]=new tD({client:this.client,namespace:s,events:this.events});break;case"elrond":this.rpcProviders[e]=new rD({client:this.client,namespace:s,events:this.events});break;case"multiversx":this.rpcProviders[e]=new iD({client:this.client,namespace:s,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:n}=t;n.name==="accountsChanged"?this.events.emit("accountsChanged",n.data):n.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var n;const{namespaces:c}=t,s=(n=this.client)==null?void 0:n.session.get(e);this.session=Ju(wo({},s),{namespaces:c}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ju(wo({},yv("USER_DISCONNECTED")),{data:e.topic}))}),this.on(dn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:n,sessionProperties:c}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=n,this.sessionProperties=c,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(e){const[t,n]=(e==null?void 0:e.split(":"))||["",""];if(t&&!Object.keys(this.namespaces).map(m=>Ao(m)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const c=Ao(Object.keys(this.namespaces)[0]),s=this.rpcProviders[c].getDefaultChain();return[c,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var n;const[c,s]=this.validateChain(e);t||this.getProvider(c).setDefaultChain(s),((n=this.namespaces[c])!=null?n:this.namespaces[`${c}:${s}`]).defaultChain=s,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Mv}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Mv}/${e}`)}}const cD=s0,uD="wc",hD="ethereum_provider",lD=`${uD}@2:${hD}:`,dD="https://rpc.walletconnect.com/v1/",ph=["eth_sendTransaction","personal_sign"],TD=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],vh=["chainChanged","accountsChanged"],ND=["message","disconnect","connect"];var pD=Object.defineProperty,vD=Object.defineProperties,gD=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,bD=Object.prototype.hasOwnProperty,mD=Object.prototype.propertyIsEnumerable,Pv=(a,e,t)=>e in a?pD(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Zu=(a,e)=>{for(var t in e||(e={}))bD.call(e,t)&&Pv(a,t,e[t]);if(Ov)for(var t of Ov(e))mD.call(e,t)&&Pv(a,t,e[t]);return a},Cv=(a,e)=>vD(a,gD(e));function gh(a){return Number(a[0].split(":")[1])}function Xu(a){return`0x${a.toString(16)}`}function yD(a){const{chains:e,optionalChains:t,methods:n,optionalMethods:c,events:s,optionalEvents:m,rpcMap:v}=a;if(!sh(e))throw new Error("Invalid chains");const d=e,p=n||ph,u=s||vh,_={[gh(d)]:v[gh(d)]},w={chains:d,methods:p,events:u,rpcMap:_},M=s==null?void 0:s.filter(z=>!vh.includes(z)),A=n==null?void 0:n.filter(z=>!ph.includes(z));if(!t&&!m&&!c&&!(M!=null&&M.length)&&!(A!=null&&A.length))return{required:w};const R=(M==null?void 0:M.length)&&(A==null?void 0:A.length)||!t,B={chains:[...new Set(R?d.concat(t||[]):t)],methods:[...new Set(p.concat(c||[]))],events:[...new Set(u.concat(m||[]))],rpcMap:v};return{required:w,optional:B}}class a0{constructor(){this.events=new ni.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=lD,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new a0;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:n}=yD(this.rpc);try{const c=await new Promise(async(m,v)=>{var d;this.rpc.showQrModal&&((d=this.modal)==null||d.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),v(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Cv(Zu({namespaces:{[this.namespace]:t}},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{m(p)}).catch(p=>{v(new Error(p.message))})});if(!c)return;this.setChainIds(this.rpc.chains);const s=r9(c.namespaces,[this.namespace]);this.setAccounts(s),this.events.emit("connect",{chainId:Xu(this.chainId)})}catch(c){throw this.signer.logger.error(c),c}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:n}=t;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Xu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Cv(Zu({},n9("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,n;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(n=this.modal)==null||n.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Xu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.setHttpProvider(t)}}parseAccountId(e){const[t,n,c]=e.split(":");return{chainId:`${t}:${n}`,address:c}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,n;return{chains:((t=e.chains)==null?void 0:t.map(c=>this.formatChainId(c)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(c=>this.formatChainId(c)):void 0,methods:(e==null?void 0:e.methods)||ph,events:(e==null?void 0:e.events)||vh,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(n=e==null?void 0:e.qrModalOptions)!=null?n:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const n={};return e.forEach(c=>{n[c]=this.getRpcUrl(c,t)}),n}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=gh(this.rpc.chains),this.signer=await cD.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:t}=await ew(()=>import("./index-512491c1.js").then(n=>n.a),["assets/index-512491c1.js","assets/vendor-3cb367a8.js"]);this.modal=new t(Zu({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:n,rpcMap:c}=e;t&&sh(t)&&(this.rpc.chains=t.map(s=>this.formatChainId(s)),t.forEach(s=>{this.rpc.rpcMap[s]=(c==null?void 0:c[s])||this.getRpcUrl(s)})),n&&sh(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=(c==null?void 0:c[s])||this.getRpcUrl(s)}))}getRpcUrl(e,t){var n;return((n=this.rpc.rpcMap)==null?void 0:n[e])||`${dD}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(e?[this.formatChainId(e)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const BD=a0;export{BD as EthereumProvider,ND as OPTIONAL_EVENTS,TD as OPTIONAL_METHODS,vh as REQUIRED_EVENTS,ph as REQUIRED_METHODS,a0 as default};
